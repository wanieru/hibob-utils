// ==UserScript==
// @name        HiBob Time Utilities
// @version     1.0.8
// @author      Funday Factory
// @description Utilities to make it easier to log time in HiBob
// @match       https://app.hibob.com/*
// @namespace   http://tampermonkey.net/
// @icon        https://www.google.com/s2/favicons?sz=64&domain=hibob.com
// @grant       none
// ==/UserScript==

(()=>{"use strict";class e{static xhr(e,t,n){return new Promise((s=>{let a=new XMLHttpRequest;a.open(e,t),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Content-Type","application/json"),a.onreadystatechange=()=>{if(4===a.readyState){let e;try{e=JSON.parse(a.responseText)}catch(t){e={result:a.responseText}}200!==a.status&&(alert(`HiBob Utils: Error ${a.status} - check the developer console for more information.`),console.log(`HiBob Utils: Error ${a.status} - check the developer console for more information.`),console.log(a)),s({status:a.status,body:e})}},a.send(JSON.stringify(n))}))}}class t{static parse(e){if(!e)return null;const t=e.split("T");return t.length<2&&t.push("00:00"),new Date(t.join("T")).getTime()}static format(e,t){if(!e)return"";const n=new Date(e);return`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}-${n.getDate().toString().padStart(2,"0")}${t?`T${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`:""}`}static formatHour(e){const t=Math.floor(e%24),n=Math.round(60*(e-t));return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}static getWeekNumberFromDate(e){var t=new Date(e);t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)}static parseTimeTohours(e){const t=e.split(":");return parseInt(t[0])+parseInt(t[1])/60}}class n{static async submit(n,s){if(s.some((e=>!e.reasonId)))return void console.log("WARNING: SOME ENTRIES HAVE NO REASON SET - NOT SUBMITTING!!",n,s);const a=s.map((e=>{var s;return{start:t.format(n+3600*e.startHour*1e3,!0),end:e.lengthHours?t.format(n+3600*(e.startHour+e.lengthHours)*1e3,!0):void 0,reason:e.reasonId,comment:null!==(s=e.comment)&&void 0!==s?s:void 0}})),o=t.format(n,!1),i=await this.getUserId();await e.xhr("POST",`https://app.hibob.com/api/attendance/employees/${i}/attendance/entries?forDate=${o}`,a)}static async timelogReasons(){return(await this.metadata()).timeLogEntryReason.values.map((e=>({id:e.serverId,name:e.value})))}static async attendance(t){return(await e.xhr("GET",`https://app.hibob.com/api/employees/attendance/my/sheets/${t}`,{})).body}static async sheets(){const t=await this.getUserId();return(await e.xhr("GET",`https://app.hibob.com/api/employees/${t}/timelog/attendance/sheets`,{})).body}static async metadata(){return(await e.xhr("GET","https://app.hibob.com/api/company/metadata/lists/?includeArchived=true",{})).body}static async getUserId(){var e;return"string"!=typeof this.userId&&await this.userInfo(),null!==(e=this.userId)&&void 0!==e?e:""}static async userInfo(){const t=await e.xhr("GET","https://app.hibob.com/api/user",{});return this.userId=t.body.id,t.body}}class s{static for(e){return new Promise((t=>{window.setTimeout((()=>t()),e)}))}static until(e){return new Promise((t=>{const n=window.setInterval((()=>{e()&&(t(),window.clearInterval(n))}),1)}))}}var a,o;!function(e){e[e.FixAll=0]="FixAll",e[e.FixLatest=1]="FixLatest"}(a||(a={}));class i{static initialize(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200",e.rel="stylesheet",document.head.appendChild(e)}static get(e,t=!1){const n=document.createElement("span");return n.className="material-symbols-outlined",n.innerText=e,n.style.verticalAlign="middle",n.style.fontSize="1.5em",n.style.fontVariationSettings="'FILL' "+(t?1:0),n}}class r{static round(e,t){return Math.round(e*10**t)/10**t}static floor(e,t){return Math.floor(e*10**t)/10**t}static ceil(e,t){return Math.ceil(e*10**t)/10**t}static sum(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}}class l{constructor(){this.handlers=[]}on(e,t){this.handlers.push({handler:e,context:t})}off(e,t){this.handlers=this.handlers.filter((n=>n.handler!==e||n.context!==t))}fire(e){this.handlers.forEach((t=>t.handler.call(t.context,e)))}}!function(e){e[e.Waiting=0]="Waiting",e[e.Saving=1]="Saving",e[e.Saved=2]="Saved"}(o||(o={}));class d{constructor(){this.sheets=[],this.onDateUpdated=new l,this.onReasonsUpdated=new l,this.onSheetUpdated=new l,this.onSheetsUpdated=new l,this.onSaveStatusUpdated=new l,this.saveHandle=-1,this.saving=!1,this.calculatingFlex=!1,this.reasons=[]}initialize(){this.fetchSheets(),this.fetchReasons(),this.onSaveStatusUpdated.fire(o.Saved)}async fetchSheets(){var e,s;this.sheets=[];const a=await n.sheets();for(const n of a.employeeSheets){const a=null!==(e=t.parse(n.cycleStartDate))&&void 0!==e?e:0,o=null!==(s=t.parse(n.cycleEndDate))&&void 0!==s?s:0,i={id:n.id,status:n.status,start:a,end:o,dates:[],locked:n.locked,hoursPerDay:0};this.sheets.push(i)}this.sheets.sort(((e,t)=>t.start-e.start)),this.onSheetsUpdated.fire(this.sheets)}async fetchReasons(){this.reasons=(await n.metadata()).timeLogEntryReason.values,this.onReasonsUpdated.fire(this.reasons)}async fetchSheet(e){var s;const a=this.sheets.find((t=>t.id===e));if(!a)return;const o=await n.attendance(e);a.hoursPerDay=o.summary.potentialWorkingHours/o.summary.potentialWorkingDays,a.dates=[];for(const e of o.attendance){const n={dirty:!1,date:null!==(s=t.parse(e.date))&&void 0!==s?s:Date.now(),weekend:"WeekendEvent"===e.status,favorited:!1,entries:e.entries.map((n=>{var s,a,o,i,l;return{startHour:r.floor(((null!==(s=t.parse(n.start))&&void 0!==s?s:Date.now())-(null!==(a=t.parse(e.date))&&void 0!==a?a:Date.now()))/36e5,2),lengthHours:r.ceil(((null!==(o=t.parse(n.end))&&void 0!==o?o:Date.now())-(null!==(i=t.parse(n.start))&&void 0!==i?i:Date.now()))/36e5,2),reasonId:n.reason,comment:null!==(l=n.comment)&&void 0!==l?l:null,hasComment:!!n.comment}})).sort(((e,t)=>e.startHour-t.startHour))};a.dates.push(n)}a.dates.sort(((e,t)=>t.date-e.date));const i=this.getFavoritedDate();i&&i.sheet===a&&(i.date.favorited=!0),this.onSheetUpdated.fire(a)}changeStartHour(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].startHour=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}changeLengthHours(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].lengthHours=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}changeReason(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].reasonId=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}changeComment(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].comment=n,e.entries[t].hasComment=!0,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}toggleComment(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries[t].hasComment=!e.entries[t].hasComment,e.entries[t].comment=e.entries[t].hasComment?"":null,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}setFavoritedDate(e){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!n)return;const s=this.getFavoritedDate();s&&(s.date.favorited=!1,this.onDateUpdated.fire(s)),e.favorited=!0,this.onDateUpdated.fire({sheet:n,date:e}),window.localStorage.setItem("tl_favorite",JSON.stringify({date:t.format(e.date,!1)}))}getFavoritedDate(){const e=window.localStorage.getItem("tl_favorite");if(!e)return null;const n=JSON.parse(e),s=t.parse(n.date),a=this.sheets.find((e=>e.dates.some((e=>e.date===s))));if(a){const e=a.dates.find((e=>e.date===s));if(e)return{sheet:a,date:e}}return null}deleteEntry(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries.splice(t,1),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}async findLastEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;let n=t.dates.indexOf(e),s=-1;for(let e=this.sheets.indexOf(t);e<this.sheets.length;e++){const t=this.sheets[e];for(t.dates.length<1&&await this.fetchSheet(t.id);n<t.dates.length;n++){const e=t.dates[n];if(e.entries.length>0)return s<0?e.entries[e.entries.length-1]:e.entries[s];s=0}n=0}}async newEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const n=await this.findLastEntry(e);let s=8.5,a=r.round(t.hoursPerDay,2),o="";n&&(e.entries.includes(n)&&(s=n.startHour+n.lengthHours,a=1),o=n.reasonId),e.entries.push({startHour:s,lengthHours:a,reasonId:o,comment:null,hasComment:!1}),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}async pasteFromStarred(e){if(e.entries.length>0)return;const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const n=this.getFavoritedDate();if(n&&n.date!==e){for(const t of n.date.entries)e.entries.push({startHour:t.startHour,lengthHours:t.lengthHours,reasonId:t.reasonId,comment:t.comment,hasComment:t.hasComment});e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}}queueSave(){window.clearTimeout(this.saveHandle),this.saveHandle=window.setTimeout((()=>this.save()),500),this.onSaveStatusUpdated.fire(o.Waiting)}async save(){await s.until((()=>!this.saving)),this.saving=!0,this.onSaveStatusUpdated.fire(o.Saving);for(const e of this.sheets)for(const t of e.dates)t.dirty&&(await n.submit(t.date,t.entries),t.dirty=!1);this.onSaveStatusUpdated.fire(o.Saved),this.saving=!1}async getCurrentBalanceHours(e){var t;const n=this.sheets.indexOf(e),a={};let o=0;if(this.sheets){await s.until((()=>!this.calculatingFlex)),this.calculatingFlex=!0;for(let e=n+1;e>=n&&e<this.sheets.length;e--){const n=this.sheets[e];if(!n)continue;const s=`tl_cached_hour_balance_${n.id}`;let i=0;if(n.locked&&null!==window.localStorage.getItem(s))i=parseFloat(null!==(t=window.localStorage.getItem(s))&&void 0!==t?t:"0");else{n.dates.length<1&&await this.fetchSheet(n.id);let e=n.dates.filter((e=>!e.weekend)).length*n.hoursPerDay,t=r.sum(n.dates.map((e=>r.sum(e.entries.map((e=>e.lengthHours))))));t>0&&(i-=e,i+=t),n.locked&&n.id>0&&window.localStorage.setItem(s,i.toString())}o+=i,a[n.id.toString()]=i}this.calculatingFlex=!1}return{sheets:a,balance:o}}}i.initialize(),new class{constructor(){this.sheetDropdownOptions=[],this.sheetDates=[],this.weekSums=[],this.reasons=[],window.timelog=this,this.addButton()}async addButton(){for(;;){const e=document.querySelector("div.app-content > app-top-bar.app-top-bar > div.actions");if(e){this.toggleButton=document.createElement("button"),this.toggleButton.className="tl-toggle-btn",this.toggleButton.appendChild(i.get("sentiment_very_satisfied")),this.toggleButton.title="HiBob Utilities",this.toggleButton.onclick=()=>this.toggleVisible(),e.appendChild(this.toggleButton),this.createUI(),this.createModel();break}await s.for(1)}}toggleVisible(){var e;this.timelogUIOuter&&("none"===this.timelogUIOuter.style.display?(this.timelogUIOuter.style.display="block",document.body.style.overflow="hidden",this.sheetContainer&&(this.sheetContainer.innerHTML=""),null===(e=this.model)||void 0===e||e.fetchSheets()):(this.timelogUIOuter.style.display="none",document.body.style.overflow="initial"))}createUI(){const e=document.createElement("style");e.innerHTML="\n.tl-toggle-btn\n{\n    border: none;\n    background: none;\n    font-size: 2em;\n}\n.tl-close-btn\n{\n    font-size: 2em;\n    position: absolute;\n    right: 5px;\n}\n.tl-ui\n{\n    position: fixed;\n    z-index: 1000;\n    inset: 0px;\n    background-color: white;\n    overflow-y: scroll;\n    padding: 10px;\n}        \n.tl-date\n{\n    margin-top: 10px;\n    padding: 10px;\n    border: 1px solid gray;\n    border-radius: 5px;\n}\n.tl-save-status, .tl-add-entry-btn\n{\n    margin-left: 10px;\n}\n.tl-entry\n{\n    margin-top: 5px;\n}\n.tl-entry > *\n{\n    margin-left: 5px;\n}\n.tl-entry > input[type=number]\n{\n    width: 50px;\n}\n.tl-entry > input[type=time]\n{\n    width: 75px;\n}\n.tl-save-status\n{\n    font-weight: bold;\n}\n.tl-sheet-select\n{\n    margin-left: 5px;\n}\n.tl-date-label\n{\n    font-weight: bold;\n}\n.tl-date-label.tl-date-label-weekend\n{\n    font-weight: initial;\n    font-style: italic;\n    color: gray;\n}\n.tl-entry-reason \n{\n    padding: 3px;\n}\n.tl-remove-entry-btn\n{\n    float: right;\n}\n.tl-week-seperator\n{\n    border-bottom: 2px solid gray;\n    margin-top: 25px;\n    margin-bottom: 25px;\n}\n.tl-balance-label\n{\n    margin: 5px;\n}\n.tl-ui-inner\n{\n    display: table;\n    margin-left: auto;\n    margin-right: auto;\n}\n.tl-ui-inner, .tl-week-seperator, .tl-date\n{\n    min-width: 650px;\n}\n.tl-entry-comment {\n    margin-top: 5px;\n    margin-bottom: 15px;\n    width: 100%;\n    display: none;\n}\n.tl-has-comment .tl-entry-comment\n{\n    display: block;\n}\n.tl-success\n{\n    color: #02B875;\n}\n.tl-warning\n{\n    color: #F0AF52;\n}\n.tl-danger\n{\n    color: #DA5652;\n}\n.tl-sum-hours\n{\n    position: absolute;\n    margin-top: -23px;\n}\n.tl-week-sum\n{\n    position: absolute;\n    margin-top: -57px;\n    text-decoration: underline;\n}\n.tl-star-button\n{\n    background: none;\n    border: none;\n    margin: 0;\n    padding: 0;\n}\n.tl-star-button.tl-favorite\n{\n    color: #f1a00b;\n    opacity: 1;\n}\n.tl-paste-btn {\n    margin-left: 5px;\n    display: none;\n}\n.tl-has-favorite .tl-paste-btn:not(.tl-hide-favorite-button)\n{\n    display: inline-block;\n}\n.tl-show-on-hover\n{\n    opacity: 0;\n}\n.tl-date:hover .tl-show-on-hover\n{\n    opacity: 1;\n}\n",document.body.appendChild(e),this.timelogUIOuter=document.createElement("div"),this.timelogUIOuter.className="tl-ui",this.timelogUIOuter.style.display="none",document.body.append(this.timelogUIOuter),this.timelogUIInner=document.createElement("div"),this.timelogUIInner.className="tl-ui-inner",this.timelogUIOuter.append(this.timelogUIInner);const t=document.createElement("button");t.className="tl-close-btn",t.appendChild(i.get("close")),t.onclick=()=>this.toggleVisible(),this.timelogUIInner.appendChild(t);const n=document.createElement("span");n.innerText="Sheet:",this.timelogUIInner.appendChild(n),this.sheetDropdown=document.createElement("select"),this.sheetDropdown.className="tl-sheet-select",this.sheetDropdown.onchange=()=>this.onSelectedSheetChange(),this.timelogUIInner.appendChild(this.sheetDropdown),this.saveStatus=document.createElement("span"),this.saveStatus.className="tl-save-status",this.timelogUIInner.append(this.saveStatus),this.balanceLabel=document.createElement("div"),this.balanceLabel.innerText="Balance: ",this.balanceLabel.className="tl-balance-label",this.timelogUIInner.append(this.balanceLabel),this.sheetContainer=document.createElement("div"),this.sheetContainer.className="tl-sheet",this.timelogUIInner.appendChild(this.sheetContainer)}createModel(){this.model&&(this.model.onDateUpdated.off(this.onDateUpdated,this),this.model.onReasonsUpdated.off(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.off(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.off(this.onSheetUpdated,this),this.model.onSheetsUpdated.off(this.onSheetsUpdated,this)),this.model=new d,this.model.onDateUpdated.on(this.onDateUpdated,this),this.model.onReasonsUpdated.on(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.on(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.on(this.onSheetUpdated,this),this.model.onSheetsUpdated.on(this.onSheetsUpdated,this),this.model.initialize()}getDateContainer(e){if(this.selectedSheet===e.sheet&&this.sheetContainer){let t=this.sheetDates.find((t=>t.date===e.date));if(!t){if(t={date:e.date,parent:document.createElement("div"),entries:[],starButton:document.createElement("button"),pasteButton:document.createElement("button")},this.sheetDates.push(t),t.parent.className="tl-date",this.sheetContainer.appendChild(t.parent),1===new Date(e.date.date).getDay()){const e=document.createElement("div");e.className="tl-week-seperator",this.sheetContainer.appendChild(e)}t.parent.append(t.starButton),t.starButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.setFavoritedDate(e.date)},t.starButton.className="tl-star-button tl-show-on-hover",t.starButton.title="Favorite Day";const n=document.createElement("span");if(n.className="tl-date-label",n.innerText=new Date(e.date.date).toDateString(),e.date.weekend&&n.classList.add("tl-date-label-weekend"),t.parent.append(n),!e.sheet.locked){const n=document.createElement("button");n.appendChild(i.get("add")),n.className="tl-add-entry-btn tl-show-on-hover",n.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.newEntry(e.date)},t.parent.append(n),t.pasteButton=document.createElement("button"),t.pasteButton.appendChild(i.get("switch_access_shortcut_add")),t.pasteButton.title="Paste from Favorite Day",t.pasteButton.className="tl-paste-btn tl-show-on-hover",t.pasteButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.pasteFromStarred(e.date)},t.parent.append(t.pasteButton)}this.addToWeekSum(t)}return t}return null}getEntryContainer(e,n,s){let a=n.entries.find((e=>e.entry===s));if(!a){a={entry:s,parent:document.createElement("div"),startHour:document.createElement("input"),endHour:document.createElement("input"),length:document.createElement("input"),reason:document.createElement("select"),comment:document.createElement("input"),commentButton:document.createElement("button")},n.entries.push(a),a.parent.className="tl-entry",n.parent.appendChild(a.parent),a.startHour.type="time",a.startHour.className="tl-entry-start",e.sheet.locked&&(a.startHour.disabled=!0),a.startHour.onchange=()=>{var n,o,i;const l=s.startHour+s.lengthHours;null===(n=this.model)||void 0===n||n.changeStartHour(e.date,e.date.entries.indexOf(s),t.parseTimeTohours(null!==(o=null==a?void 0:a.startHour.value)&&void 0!==o?o:"08:00"));const d=r.round(l-s.startHour,2);null===(i=this.model)||void 0===i||i.changeLengthHours(e.date,e.date.entries.indexOf(s),d)},a.parent.appendChild(a.startHour);const o=document.createElement("span");o.className="tl-end-label",o.innerText="-",a.parent.appendChild(o),a.endHour.type="time",a.endHour.className="tl-entry-end",e.sheet.locked&&(a.endHour.disabled=!0),a.endHour.onchange=()=>{var n;if(null==a?void 0:a.endHour){const o=r.round(t.parseTimeTohours(a.endHour.value)-s.startHour,2);null===(n=this.model)||void 0===n||n.changeLengthHours(e.date,e.date.entries.indexOf(s),o)}},a.parent.appendChild(a.endHour),a.reason.onchange=()=>{var t,n;return null===(t=this.model)||void 0===t?void 0:t.changeReason(e.date,e.date.entries.indexOf(s),null!==(n=null==a?void 0:a.reason.value)&&void 0!==n?n:"")},e.sheet.locked&&(a.reason.disabled=!0),a.reason.className="tl-entry-reason",a.parent.appendChild(a.reason),this.updateReasonsDropdown(a.reason),1===n.entries.length&&(n.sumHours=document.createElement("span"),n.sumHours.className="tl-sum-hours",a.parent.append(n.sumHours)),a.length.type="number",a.length.className="tl-entry-length",a.length.step="0.01",e.sheet.locked&&(a.length.disabled=!0),a.length.onchange=()=>{var t;null===(t=this.model)||void 0===t||t.changeLengthHours(e.date,e.date.entries.indexOf(s),parseFloat((null==a?void 0:a.length.value)||"0"))},a.parent.appendChild(a.length);const l=document.createElement("span");if(l.className="tl-duration-label",l.innerText="hour(s)",a.parent.appendChild(l),!e.sheet.locked){a.commentButton.className="tl-add-comment-btn tl-show-on-hover",a.commentButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.toggleComment(e.date,e.date.entries.indexOf(s))},a.parent.appendChild(a.commentButton);const t=document.createElement("button");t.appendChild(i.get("delete")),t.className="tl-remove-entry-btn tl-show-on-hover",t.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.deleteEntry(e.date,e.date.entries.indexOf(s))},a.parent.appendChild(t)}a.comment.type="text",a.comment.placeholder="Write a note...",a.comment.title="Write a note...",a.comment.className="tl-entry-comment",e.sheet.locked&&(a.comment.disabled=!0),a.comment.onchange=()=>{var t,n;null===(t=this.model)||void 0===t||t.changeComment(e.date,e.date.entries.indexOf(s),null!==(n=null==a?void 0:a.comment.value)&&void 0!==n?n:"")},a.parent.appendChild(a.comment)}return a}addToWeekSum(e){if(this.weekSums.length<1||0===new Date(e.date.date).getDay()){const t={dates:[e],element:document.createElement("div")};t.element.className="tl-week-sum",this.weekSums.push(t),e.parent.appendChild(t.element),e.parent.style.marginTop="38px"}else this.weekSums[this.weekSums.length-1].dates.push(e)}onDateUpdated(e){var n;if(this.selectedSheet===e.sheet&&this.sheetContainer){let s=this.getDateContainer(e);if(s){for(const a of e.date.entries){let o=this.getEntryContainer(e,s,a);o.startHour.value=t.formatHour(a.startHour),o.length.value=a.lengthHours.toString(),o.endHour.value=t.formatHour(a.startHour+a.lengthHours),o.reason.value=a.reasonId,o.comment.value=null!==(n=a.comment)&&void 0!==n?n:"",o.commentButton.title=a.hasComment?"Remove note":"Add note",o.commentButton.innerHTML="",o.commentButton.appendChild(i.get(a.hasComment?"speaker_notes_off":"speaker_notes")),a.hasComment?o.parent.classList.add("tl-has-comment"):o.parent.classList.remove("tl-has-comment")}const a=s.entries.filter((t=>!e.date.entries.find((e=>e===t.entry))));if(s.entries=s.entries.filter((e=>!a.includes(e))),a.forEach((e=>e.parent.remove())),s.sumHours){const t=r.sum(e.date.entries.map((e=>e.lengthHours)));s.sumHours.innerText=`${r.round(t,2)} hour${1===t?"":"s"}`}s.starButton.innerHTML="",s.starButton.disabled=e.date.favorited,s.starButton.classList.remove("tl-favorite"),s.starButton.appendChild(i.get("star",e.date.favorited)),e.date.favorited&&s.starButton.classList.add("tl-favorite"),s.entries.length>0||s.date.favorited?s.pasteButton.classList.add("tl-hide-favorite-button"):s.pasteButton.classList.remove("tl-hide-favorite-button")}const a=this.weekSums.find((t=>t.dates.some((t=>t.date===e.date))));if(a){const n=r.sum(a.dates.map((e=>r.sum(e.entries.map((e=>e.entry.lengthHours)))))),s=a.dates.filter((e=>!e.date.weekend)).length,o=e.sheet.hoursPerDay*s,i=t.getWeekNumberFromDate(a.dates[0].date.date);a.element.innerHTML=`<b>Week ${i}</b>: ${r.round(n,2)} / ${r.round(o,2)} hours`}}this.updateBalance()}updateReasonsDropdown(e){e.innerHTML="";for(const t of this.reasons){const n=document.createElement("option");n.value=t.serverId,n.innerText=t.value,e.appendChild(n)}}onReasonsUpdated(e){this.reasons=e;for(const e of this.sheetDates)for(const t of e.entries)this.updateReasonsDropdown(t.reason)}onSaveStatusUpdated(e){this.saveStatus&&(this.saveStatus.innerHTML="",this.saveStatus.classList.remove("tl-success"),e===o.Saved&&(this.saveStatus.appendChild(i.get("cloud_done",!0)),this.saveStatus.append(" Saved"),this.saveStatus.classList.add("tl-success")),e===o.Waiting&&(this.saveStatus.appendChild(i.get("pending")),this.saveStatus.append(" Pending...")),e===o.Saving&&(this.saveStatus.appendChild(i.get("cloud_upload")),this.saveStatus.append(" Saving...")))}onSheetUpdated(e){if(this.sheetDropdown&&!this.sheetDropdownOptions.find((t=>t.sheet===e))){const t=document.createElement("option");t.value=e.id.toString(),t.innerText=`${new Date(e.start).toDateString()} - ${new Date(e.end).toDateString()}${e.locked?" (locked)":""}`,this.sheetDropdownOptions.push({sheet:e,element:t}),this.sheetDropdown.appendChild(t)}this.selectedSheet===e&&(this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[],this.weekSums=[]);for(const t of e.dates)this.onDateUpdated({sheet:e,date:t});this.updateBalance()}onSheetsUpdated(e){this.sheetDropdown&&(this.sheetDropdown.innerHTML=""),this.sheetDropdownOptions=[];for(const t of e)this.onSheetUpdated(t);this.onSelectedSheetChange()}onSelectedSheetChange(){var e;if(!this.sheetDropdown)return;this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[];const t=this.sheetDropdown.value;this.selectedSheet=null===(e=this.sheetDropdownOptions.find((e=>e.element.value===t)))||void 0===e?void 0:e.sheet,this.selectedSheet&&this.model&&this.model.fetchSheet(this.selectedSheet.id)}async updateBalance(){var e,t,n;if(!this.model||!this.balanceLabel||!this.selectedSheet)return;const s=await this.model.getCurrentBalanceHours(this.selectedSheet),a=r.round(null!==(e=s.sheets[this.selectedSheet.id.toString()])&&void 0!==e?e:0,2),o=r.round(s.balance,2);this.balanceLabel.innerText=`Flex: ${o} hour${1!=o?"s":""} (current month: ${a} hour${1!=a?"s":""})`,this.model.getFavoritedDate()?null===(t=this.sheetContainer)||void 0===t||t.classList.add("tl-has-favorite"):null===(n=this.sheetContainer)||void 0===n||n.classList.remove("tl-has-favorite")}},new class{constructor(){this.submitting=!1,this.createUI(),this.clockInButtonFinder()}createUI(){const e=document.createElement("style");e.innerHTML="\n.re-label\n{\n    font-size: 1.5em;\n    margin-bottom: 10px;\n}\n.re-reason-select\n{\n    padding: 5px;\n}\n.re-reason-ui\n{\n    z-index: 2000;\n    position: fixed;\n    inset: 0;\n    background-color: rgba(0,0,0,0.75);\n    padding-top: 45vh;\n    text-align: center;\n    color: white;\n    font-weight: bold;\n}\n.re-btn\n{\n    padding: 0 var(--button-padding-x, 15px);\n    min-width: 80px;\n    height: var(--button-size, 30px);\n    font-weight: 600;\n    font-size: var(--button-font-size, 12px);\n    font-family: var(--body-font-family);\n    border: 0;\n    border-radius: 4px;\n    margin: 5px;\n}\n.re-btn.re-primary\n{\n    color: var(--primary-bg-text-color, white);\n    background-color: var(--primary-600);\n}\n.re-btn.re-secondary\n{\n    color: var(--secondary-bg-text-color, #535353);\n    background-color: var(--secondary-600);\n}\n.re-blur\n{\n    filter: blur(2px);\n}\n.re-submitting .re-btn\n{\n    display: none;\n}\n.re-submitting-text\n{\n    display: none;\n    font-size: 1.5em;\n}\n.re-submitting .re-submitting-text\n{\n    display: block;\n}\n",document.body.append(e),this.reasonEnhancementUI=document.createElement("div"),this.reasonEnhancementUI.className="re-reason-ui",this.reasonEnhancementUI.style.display="none",document.body.appendChild(this.reasonEnhancementUI);const t=document.createElement("div");t.innerText="Choose Default Reason",t.className="re-label",this.reasonEnhancementUI.appendChild(t),this.reasonSelect=document.createElement("select"),this.reasonSelect.className="re-reason-select",this.reasonSelect.onchange=()=>this.saveDefaultReasonValue(),this.reasonEnhancementUI.appendChild(this.reasonSelect),this.reasonEnhancementUI.appendChild(document.createElement("br"));const n=document.createElement("button");n.className="re-cancel-btn re-btn re-secondary",n.innerText="Cancel",n.onclick=()=>this.cancel(),this.reasonEnhancementUI.appendChild(n);const s=document.createElement("button");s.className="re-submit-btn re-btn re-primary",s.innerText="Submit",s.onclick=()=>this.submit(),this.reasonEnhancementUI.appendChild(s);const a=document.createElement("div");a.className="re-submitting-text",a.innerText="Submitting...",this.reasonEnhancementUI.appendChild(a)}async clockInButtonFinder(){for(var e;;)this.findUnenhancedButtons("b-button.punch-clock-button, b-button.time-widget-clock-in-btn, b-button.time-widget-clock-out-btn").forEach((e=>this.enhanceClockInButton(e,a.FixLatest))),this.findUnenhancedButtons("b-button.quick-fix-apply-button").forEach((e=>this.enhanceClockInButton(e,a.FixAll))),this.appRoot||(this.appRoot=null!==(e=document.querySelector("app-root"))&&void 0!==e?e:void 0),await s.for(10)}findUnenhancedButtons(e){var t=[],n=document.querySelectorAll(e);for(const e of n)e.classList.contains("re-enhanced")||(e.classList.add("re-enhanced"),t.push(e));return t}enhanceClockInButton(e,t){e.addEventListener("click",(()=>this.showReasonFixer(t)))}saveDefaultReasonValue(){this.reasonSelect&&window.localStorage.setItem("re-last-reason",this.reasonSelect.value)}loadDefaultReasonValue(){var e;this.reasonSelect&&(this.reasonSelect.value=null!==(e=window.localStorage.getItem("re-last-reason"))&&void 0!==e?e:"")}async showReasonFixer(e){if(this.reasonEnhancementUI&&(await s.for(250),this.setUIVisible(!0),this.mode=e,this.reasonSelect)){const e=await n.metadata();this.reasonSelect.innerHTML="";for(const t of e.timeLogEntryReason.values){const e=document.createElement("option");e.value=t.serverId,e.innerText=t.value,this.reasonSelect.appendChild(e)}this.loadDefaultReasonValue()}}cancel(){this.setUIVisible(!1)}setUIVisible(e){this.reasonEnhancementUI&&(this.reasonEnhancementUI.style.display=e?"block":"none"),this.appRoot&&(e?this.appRoot.classList.add("re-blur"):this.appRoot.classList.remove("re-blur"))}async submit(){var e,t;await s.until((()=>!this.submitting)),this.submitting=!0,null===(e=this.reasonEnhancementUI)||void 0===e||e.classList.add("re-submitting"),this.mode===a.FixAll&&await this.fixAll(),this.mode===a.FixLatest&&await this.fixLatest(),this.setUIVisible(!1),null===(t=this.reasonEnhancementUI)||void 0===t||t.classList.remove("re-submitting"),this.submitting=!1}async fixAll(){if(!this.reasonSelect)return;const e=this.reasonSelect.value,s=await n.sheets();for(const a of s.employeeSheets){if(a.locked)continue;const s=await n.attendance(a.id);for(const a of s.attendance)if(a.entries.some((e=>!e.reason))){const s=t.parse(a.date);if("number"!=typeof s)continue;const o=a.entries.map((n=>{var a,o,i,r;return{startHour:((null!==(a=t.parse(n.start))&&void 0!==a?a:Date.now())-s)/36e5,lengthHours:n.end?((null!==(o=t.parse(n.end))&&void 0!==o?o:Date.now())-(null!==(i=t.parse(n.start))&&void 0!==i?i:Date.now()))/36e5:null,reasonId:n.reason||e,comment:null!==(r=n.comment)&&void 0!==r?r:null}}));await n.submit(s,o)}}}async fixLatest(){if(!this.reasonSelect)return;const e=this.reasonSelect.value;let s=null;const a=await n.sheets();for(const e of a.employeeSheets){if(e.locked)continue;const a=await n.attendance(e.id);for(const e of a.attendance){const n=t.parse(e.date);if("number"==typeof n&&(!s||n>s.date)){const a=e.entries.map((e=>{var s,a,o,i;return{startHour:((null!==(s=t.parse(e.start))&&void 0!==s?s:Date.now())-n)/36e5,lengthHours:e.end?((null!==(a=t.parse(e.end))&&void 0!==a?a:Date.now())-(null!==(o=t.parse(e.start))&&void 0!==o?o:Date.now()))/36e5:null,reasonId:e.reason,comment:null!==(i=e.comment)&&void 0!==i?i:null}}));s={date:n,entries:a}}}}if(s){for(const t of s.entries)t.reasonId=t.reasonId||e;await n.submit(s.date,s.entries)}}}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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akMsSUFBSWtPLEVBQStELEtBQ25FLE1BQU1qTCxRQUFlM0UsRUFBTTJFLFNBQzNCLElBQUssTUFBTWhELEtBQVNnRCxFQUFPZSxlQUMzQixDQUNJLEdBQUkvRCxFQUFNb0UsT0FBUSxTQUNsQixNQUFNTyxRQUFtQnRHLEVBQU1zRyxXQUFXM0UsRUFBTUosSUFDaEQsSUFBSyxNQUFNMUMsS0FBUXlILEVBQVdBLFdBQzlCLENBQ0ksTUFBTTNILEVBQU9SLEVBQU1SLE1BQU1rQixFQUFLQSxNQUM5QixHQUFvQixpQkFBVEYsS0FDTmlSLEdBQVVqUixFQUFPaVIsRUFBTy9RLE1BQzdCLENBQ0ksTUFBTW9CLEVBQThCcEIsRUFBS29CLFFBQVFLLEtBQUlILEksWUFFakQsTUFBTyxDQUNITSxZQUFpQyxRQUFwQixFQUFBdEMsRUFBQSxNQUFZZ0MsRUFBRUksY0FBTSxRQUFJL0IsS0FBS21JLE9BQVNoSSxHQUFRLEtBQzNEZ0MsWUFBYVIsRUFBRU8sTUFBMEIsUUFBbEIsRUFBQXZDLEVBQUEsTUFBWWdDLEVBQUVPLFlBQUksUUFBSWxDLEtBQUttSSxRQUE4QixRQUFwQixFQUFBeEksRUFBQSxNQUFZZ0MsRUFBRUksY0FBTSxRQUFJL0IsS0FBS21JLFFBQVUsS0FBZ0IsS0FDbkh2RyxTQUFVRCxFQUFFVSxPQUNaQyxRQUFrQixRQUFULEVBQUFYLEVBQUVXLGVBQU8sUUFBSSxLQUN6QixJQUVMOE8sRUFBUyxDQUFFL1EsS0FBTUYsRUFBTXNCLFFBQVNBLEUsR0FJNUMsR0FBSTJQLEVBQ0osQ0FDSSxJQUFLLE1BQU1sSCxLQUFTa0gsRUFBTzNQLFFBRXZCeUksRUFBTXRJLFNBQVdzSSxFQUFNdEksVUFBWVMsUUFFakNiLEVBQU1nSixPQUFPNEcsRUFBTy9RLEtBQU0rUSxFQUFPM1AsUSxDQUUvQyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvQXBpLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL0RhdGVzLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL0hpQm9iL0hpQm9iLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL1dhaXQudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvUmVhc29uRW5oYW5jZW1lbnRzL1JlYXNvbnNFbmhhbmNlbWVudHMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVGltZWxvZy9UaW1lbG9nVHlwZXMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvTWF0ZXJpYWxJY29uLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL051bWJlcnMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvRXZlbnRIYW5kbGVyLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ01vZGVsLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ1VJLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ0Nzcy50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9SZWFzb25FbmhhbmNlbWVudHMvUmVhc29uRW5oYW5jZW1lbnRzQ3NzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBBcGlcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyB4aHIobWV0aG9kOiBcIkdFVFwiIHwgXCJQT1NUXCIsIHVybDogc3RyaW5nLCBib2R5OiBvYmplY3QpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHsgc3RhdHVzOiBudW1iZXIsIGJvZHk6IGFueSB9PihyZXNvbHZlID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsKTtcclxuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xyXG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XHJcbiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogeGhyLnJlc3BvbnNlVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyAhPT0gMjAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoYEhpQm9iIFV0aWxzOiBFcnJvciAke3hoci5zdGF0dXN9IC0gY2hlY2sgdGhlIGRldmVsb3BlciBjb25zb2xlIGZvciBtb3JlIGluZm9ybWF0aW9uLmApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgSGlCb2IgVXRpbHM6IEVycm9yICR7eGhyLnN0YXR1c30gLSBjaGVjayB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgZm9yIG1vcmUgaW5mb3JtYXRpb24uYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHhocik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHhoci5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShib2R5KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgRGF0ZXNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBwYXJzZShzdHI6IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICBpZiAoIXN0cikgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgY29uc3Qgc3BsaXQgPSBzdHIuc3BsaXQoXCJUXCIpO1xyXG4gICAgICAgIGlmIChzcGxpdC5sZW5ndGggPCAyKSBzcGxpdC5wdXNoKFwiMDA6MDBcIik7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHNwbGl0LmpvaW4oXCJUXCIpKS5nZXRUaW1lKCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGZvcm1hdCh0aW1lOiBudW1iZXIsIGluY2x1ZGVUaW1lc3RhbXA6IGJvb2xlYW4pXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aW1lKSByZXR1cm4gXCJcIjtcclxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodGltZSk7XHJcbiAgICAgICAgcmV0dXJuIGAke2RhdGUuZ2V0RnVsbFllYXIoKX0tJHsoZGF0ZS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9LSR7ZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9JHtpbmNsdWRlVGltZXN0YW1wID8gYFQke2RhdGUuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX06JHtkYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX1gIDogXCJcIn1gO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBmb3JtYXRIb3VyKGhvdXJzOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgaG91ciA9IE1hdGguZmxvb3IoaG91cnMgJSAyNCk7XHJcbiAgICAgICAgY29uc3QgbWludXRlID0gTWF0aC5yb3VuZCgoaG91cnMgLSBob3VyKSAqIDYwKTtcclxuICAgICAgICByZXR1cm4gYCR7aG91ci50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX06JHttaW51dGUudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9YFxyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRXZWVrTnVtYmVyRnJvbURhdGUodGltZTogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUodGltZSk7XHJcbiAgICAgICAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcclxuICAgICAgICAvLyBUaHVyc2RheSBpbiBjdXJyZW50IHdlZWsgZGVjaWRlcyB0aGUgeWVhci5cclxuICAgICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyAzIC0gKGRhdGUuZ2V0RGF5KCkgKyA2KSAlIDcpO1xyXG4gICAgICAgIC8vIEphbnVhcnkgNCBpcyBhbHdheXMgaW4gd2VlayAxLlxyXG4gICAgICAgIHZhciB3ZWVrMSA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgMCwgNCk7XHJcbiAgICAgICAgLy8gQWRqdXN0IHRvIFRodXJzZGF5IGluIHdlZWsgMSBhbmQgY291bnQgbnVtYmVyIG9mIHdlZWtzIGZyb20gZGF0ZSB0byB3ZWVrMS5cclxuICAgICAgICByZXR1cm4gMSArIE1hdGgucm91bmQoKChkYXRlLmdldFRpbWUoKSAtIHdlZWsxLmdldFRpbWUoKSkgLyA4NjQwMDAwMFxyXG4gICAgICAgICAgICAtIDMgKyAod2VlazEuZ2V0RGF5KCkgKyA2KSAlIDcpIC8gNyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIHBhcnNlVGltZVRvaG91cnModGltZTogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNwbGl0ID0gdGltZS5zcGxpdChcIjpcIik7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHNwbGl0WzBdKSArIHBhcnNlSW50KHNwbGl0WzFdKSAvIDYwO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uL1V0aWxzL0FwaVwiO1xyXG5pbXBvcnQgeyBEYXRlcyB9IGZyb20gXCIuLi9VdGlscy9EYXRlc1wiO1xyXG5pbXBvcnQgeyBIaUJvYkF0dGVuZGFuY2UsIEhpQm9iTWV0YWRhdGEsIEhpQm9iU2hlZXRzLCBIaUJvYlN1Ym1pdEVudHJ5LCBIaUJvYlVzZXIgfSBmcm9tIFwiLi9IaUJvYlR5cGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSGlCb2Jcclxue1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgdXNlcklkOiBzdHJpbmcgfCBudWxsO1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBzdWJtaXQoZGF0ZTogbnVtYmVyLCBlbnRyaWVzOiBIaUJvYlN1Ym1pdEVudHJ5W10pXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKGVudHJpZXMuc29tZShlID0+ICFlLnJlYXNvbklkKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiV0FSTklORzogU09NRSBFTlRSSUVTIEhBVkUgTk8gUkVBU09OIFNFVCAtIE5PVCBTVUJNSVRUSU5HISFcIiwgZGF0ZSwgZW50cmllcyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGVudHJpZXMubWFwKGUgPT4geyByZXR1cm4geyBzdGFydDogRGF0ZXMuZm9ybWF0KGRhdGUgKyBlLnN0YXJ0SG91ciAqIDM2MDAgKiAxMDAwLCB0cnVlKSwgZW5kOiBlLmxlbmd0aEhvdXJzID8gRGF0ZXMuZm9ybWF0KGRhdGUgKyAoZS5zdGFydEhvdXIgKyBlLmxlbmd0aEhvdXJzKSAqIDM2MDAgKiAxMDAwLCB0cnVlKSA6IHVuZGVmaW5lZCwgcmVhc29uOiBlLnJlYXNvbklkLCBjb21tZW50OiBlLmNvbW1lbnQgPz8gdW5kZWZpbmVkIH0gfSk7XHJcbiAgICAgICAgY29uc3QgZGF0ZVN0ciA9IERhdGVzLmZvcm1hdChkYXRlLCBmYWxzZSk7XHJcbiAgICAgICAgY29uc3QgdXNlcklkID0gYXdhaXQgdGhpcy5nZXRVc2VySWQoKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiUE9TVFwiLCBgaHR0cHM6Ly9hcHAuaGlib2IuY29tL2FwaS9hdHRlbmRhbmNlL2VtcGxveWVlcy8ke3VzZXJJZH0vYXR0ZW5kYW5jZS9lbnRyaWVzP2ZvckRhdGU9JHtkYXRlU3RyfWAsIGRhdGEpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyB0aW1lbG9nUmVhc29ucygpOiBQcm9taXNlPHsgaWQ6IHN0cmluZywgbmFtZTogc3RyaW5nIH1bXT5cclxuICAgIHtcclxuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IHRoaXMubWV0YWRhdGEoKTtcclxuICAgICAgICByZXR1cm4gbWV0YWRhdGEudGltZUxvZ0VudHJ5UmVhc29uLnZhbHVlcy5tYXAodiA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGlkOiB2LnNlcnZlcklkLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogdi52YWx1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGF0dGVuZGFuY2Uoc2hlZXQ6IG51bWJlcik6IFByb21pc2U8SGlCb2JBdHRlbmRhbmNlPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFwaS54aHIoXCJHRVRcIiwgYGh0dHBzOi8vYXBwLmhpYm9iLmNvbS9hcGkvZW1wbG95ZWVzL2F0dGVuZGFuY2UvbXkvc2hlZXRzLyR7c2hlZXR9YCwge30pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuYm9keTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgc2hlZXRzKCk6IFByb21pc2U8SGlCb2JTaGVldHM+XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgdXNlcklkID0gYXdhaXQgdGhpcy5nZXRVc2VySWQoKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiR0VUXCIsIGBodHRwczovL2FwcC5oaWJvYi5jb20vYXBpL2VtcGxveWVlcy8ke3VzZXJJZH0vdGltZWxvZy9hdHRlbmRhbmNlL3NoZWV0c2AsIHt9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LmJvZHk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIG1ldGFkYXRhKCk6IFByb21pc2U8SGlCb2JNZXRhZGF0YT5cclxuICAgIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiR0VUXCIsIFwiaHR0cHM6Ly9hcHAuaGlib2IuY29tL2FwaS9jb21wYW55L21ldGFkYXRhL2xpc3RzLz9pbmNsdWRlQXJjaGl2ZWQ9dHJ1ZVwiLCB7fSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5ib2R5O1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgZ2V0VXNlcklkKCk6IFByb21pc2U8c3RyaW5nPlxyXG4gICAge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy51c2VySWQgIT09IFwic3RyaW5nXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVzZXJJbmZvKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnVzZXJJZCA/PyBcIlwiO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyB1c2VySW5mbygpOiBQcm9taXNlPEhpQm9iVXNlcj5cclxuICAgIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiR0VUXCIsIFwiaHR0cHM6Ly9hcHAuaGlib2IuY29tL2FwaS91c2VyXCIsIHt9KTtcclxuICAgICAgICB0aGlzLnVzZXJJZCA9IChyZXN1bHQuYm9keSBhcyBIaUJvYlVzZXIpLmlkO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuYm9keTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBXYWl0XHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgZm9yKG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+XHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KHJlc29sdmUgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoKSwgbXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyB1bnRpbChkZWxlZ2F0ZTogKCkgPT4gYm9vbGVhbilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4ocmVzb2x2ZSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgaGFuZGxlID0gd2luZG93LnNldEludGVydmFsKCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChkZWxlZ2F0ZSgpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChoYW5kbGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAxKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEhpQm9iIH0gZnJvbSBcIi4uL0hpQm9iL0hpQm9iXCI7XHJcbmltcG9ydCB7IEhpQm9iU3VibWl0RW50cnkgfSBmcm9tIFwiLi4vSGlCb2IvSGlCb2JUeXBlc1wiO1xyXG5pbXBvcnQgeyBEYXRlcyB9IGZyb20gXCIuLi9VdGlscy9EYXRlc1wiO1xyXG5pbXBvcnQgeyBXYWl0IH0gZnJvbSBcIi4uL1V0aWxzL1dhaXRcIjtcclxuaW1wb3J0IHsgUmVhc29uRW5oYW5jZW1lbnRDc3MgfSBmcm9tIFwiLi9SZWFzb25FbmhhbmNlbWVudHNDc3NcIjtcclxuXHJcbmV4cG9ydCBlbnVtIFJlYXNvbkVuaGFuY2VtZW50TW9kZVxyXG57XHJcbiAgICBGaXhBbGwsXHJcbiAgICBGaXhMYXRlc3QsXHJcbn1cclxuZXhwb3J0IGNsYXNzIFJlYXNvbkVuaGFuY2VtZW50c1xyXG57XHJcbiAgICBwcml2YXRlIHJlYXNvbkVuaGFuY2VtZW50VUk/OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByaXZhdGUgcmVhc29uU2VsZWN0PzogSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGFwcFJvb3Q/OiBFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBzdWJtaXR0aW5nID0gZmFsc2U7XHJcblxyXG4gICAgcHJpdmF0ZSBtb2RlPzogUmVhc29uRW5oYW5jZW1lbnRNb2RlO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVVSSgpO1xyXG4gICAgICAgIHRoaXMuY2xvY2tJbkJ1dHRvbkZpbmRlcigpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjcmVhdGVVSSgpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgICAgc3R5bGUuaW5uZXJIVE1MID0gUmVhc29uRW5oYW5jZW1lbnRDc3M7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQoc3R5bGUpO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuY2xhc3NOYW1lID0gXCJyZS1yZWFzb24tdWlcIjtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5yZWFzb25FbmhhbmNlbWVudFVJKTtcclxuXHJcbiAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGxhYmVsLmlubmVyVGV4dCA9IFwiQ2hvb3NlIERlZmF1bHQgUmVhc29uXCI7XHJcbiAgICAgICAgbGFiZWwuY2xhc3NOYW1lID0gXCJyZS1sYWJlbFwiO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChsYWJlbCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVhc29uU2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcclxuICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC5jbGFzc05hbWUgPSBcInJlLXJlYXNvbi1zZWxlY3RcIjtcclxuICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHRoaXMuc2F2ZURlZmF1bHRSZWFzb25WYWx1ZSgpO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZCh0aGlzLnJlYXNvblNlbGVjdCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIikpO1xyXG5cclxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5jbGFzc05hbWUgPSBcInJlLWNhbmNlbC1idG4gcmUtYnRuIHJlLXNlY29uZGFyeVwiO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5pbm5lclRleHQgPSBcIkNhbmNlbFwiXHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNhbmNlbCgpO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChjYW5jZWxCdXR0b24pO1xyXG5cclxuICAgICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5jbGFzc05hbWUgPSBcInJlLXN1Ym1pdC1idG4gcmUtYnRuIHJlLXByaW1hcnlcIjtcclxuICAgICAgICBzdWJtaXRCdXR0b24uaW5uZXJUZXh0ID0gXCJTdWJtaXRcIlxyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zdWJtaXQoKTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuYXBwZW5kQ2hpbGQoc3VibWl0QnV0dG9uKTtcclxuXHJcblxyXG4gICAgICAgIGNvbnN0IHN1Ym1pdHRpbmdUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBzdWJtaXR0aW5nVGV4dC5jbGFzc05hbWUgPSBcInJlLXN1Ym1pdHRpbmctdGV4dFwiO1xyXG4gICAgICAgIHN1Ym1pdHRpbmdUZXh0LmlubmVyVGV4dCA9IFwiU3VibWl0dGluZy4uLlwiXHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKHN1Ym1pdHRpbmdUZXh0KTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgY2xvY2tJbkJ1dHRvbkZpbmRlcigpXHJcbiAgICB7XHJcbiAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2xvY2tJbkJ1dHRvbnMgPSB0aGlzLmZpbmRVbmVuaGFuY2VkQnV0dG9ucyhcImItYnV0dG9uLnB1bmNoLWNsb2NrLWJ1dHRvbiwgYi1idXR0b24udGltZS13aWRnZXQtY2xvY2staW4tYnRuLCBiLWJ1dHRvbi50aW1lLXdpZGdldC1jbG9jay1vdXQtYnRuXCIpO1xyXG4gICAgICAgICAgICBjbG9ja0luQnV0dG9ucy5mb3JFYWNoKGUgPT4gdGhpcy5lbmhhbmNlQ2xvY2tJbkJ1dHRvbihlLCBSZWFzb25FbmhhbmNlbWVudE1vZGUuRml4TGF0ZXN0KSk7XHJcbiAgICAgICAgICAgIHZhciBxdWlja0ZpeEJ1dHRvbiA9IHRoaXMuZmluZFVuZW5oYW5jZWRCdXR0b25zKFwiYi1idXR0b24ucXVpY2stZml4LWFwcGx5LWJ1dHRvblwiKTtcclxuICAgICAgICAgICAgcXVpY2tGaXhCdXR0b24uZm9yRWFjaChlID0+IHRoaXMuZW5oYW5jZUNsb2NrSW5CdXR0b24oZSwgUmVhc29uRW5oYW5jZW1lbnRNb2RlLkZpeEFsbCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmFwcFJvb3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwUm9vdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJhcHAtcm9vdFwiKSA/PyB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgV2FpdC5mb3IoMTApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgZmluZFVuZW5oYW5jZWRCdXR0b25zKHNlbGVjdG9yOiBzdHJpbmcpOiBFbGVtZW50W11cclxuICAgIHtcclxuICAgICAgICB2YXIgYXJyID0gW10gYXMgRWxlbWVudFtdO1xyXG4gICAgICAgIHZhciBxdWVyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xyXG4gICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBxdWVyeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJyZS1lbmhhbmNlZFwiKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicmUtZW5oYW5jZWRcIik7XHJcbiAgICAgICAgICAgICAgICBhcnIucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZW5oYW5jZUNsb2NrSW5CdXR0b24oYnV0dG9uOiBFbGVtZW50LCBtb2RlOiBSZWFzb25FbmhhbmNlbWVudE1vZGUpXHJcbiAgICB7XHJcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnNob3dSZWFzb25GaXhlcihtb2RlKSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHNhdmVEZWZhdWx0UmVhc29uVmFsdWUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFzb25TZWxlY3QpIHJldHVybjtcclxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJyZS1sYXN0LXJlYXNvblwiLCB0aGlzLnJlYXNvblNlbGVjdC52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGxvYWREZWZhdWx0UmVhc29uVmFsdWUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFzb25TZWxlY3QpIHJldHVybjtcclxuICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC52YWx1ZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInJlLWxhc3QtcmVhc29uXCIpID8/IFwiXCI7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIHNob3dSZWFzb25GaXhlcihtb2RlOiBSZWFzb25FbmhhbmNlbWVudE1vZGUpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkpIHJldHVybjtcclxuICAgICAgICBhd2FpdCBXYWl0LmZvcigyNTApO1xyXG4gICAgICAgIHRoaXMuc2V0VUlWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XHJcbiAgICAgICAgaWYgKHRoaXMucmVhc29uU2VsZWN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgcmVhc29ucyA9IGF3YWl0IEhpQm9iLm1ldGFkYXRhKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVhc29uU2VsZWN0LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVhc29uIG9mIHJlYXNvbnMudGltZUxvZ0VudHJ5UmVhc29uLnZhbHVlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IHJlYXNvbi5zZXJ2ZXJJZDtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi5pbm5lclRleHQgPSByZWFzb24udmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubG9hZERlZmF1bHRSZWFzb25WYWx1ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgY2FuY2VsKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLnNldFVJVmlzaWJsZShmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHNldFVJVmlzaWJsZSh2YWx1ZTogYm9vbGVhbilcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5yZWFzb25FbmhhbmNlbWVudFVJKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGVsc2UgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuYXBwUm9vdClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHRoaXMuYXBwUm9vdC5jbGFzc0xpc3QuYWRkKFwicmUtYmx1clwiKTtcclxuICAgICAgICAgICAgZWxzZSB0aGlzLmFwcFJvb3QuY2xhc3NMaXN0LnJlbW92ZShcInJlLWJsdXJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBzdWJtaXQoKVxyXG4gICAge1xyXG4gICAgICAgIGF3YWl0IFdhaXQudW50aWwoKCkgPT4gIXRoaXMuc3VibWl0dGluZyk7XHJcblxyXG4gICAgICAgIHRoaXMuc3VibWl0dGluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJPy5jbGFzc0xpc3QuYWRkKFwicmUtc3VibWl0dGluZ1wiKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gUmVhc29uRW5oYW5jZW1lbnRNb2RlLkZpeEFsbCkgYXdhaXQgdGhpcy5maXhBbGwoKTtcclxuICAgICAgICBpZiAodGhpcy5tb2RlID09PSBSZWFzb25FbmhhbmNlbWVudE1vZGUuRml4TGF0ZXN0KSBhd2FpdCB0aGlzLmZpeExhdGVzdCgpO1xyXG5cclxuICAgICAgICB0aGlzLnNldFVJVmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJPy5jbGFzc0xpc3QucmVtb3ZlKFwicmUtc3VibWl0dGluZ1wiKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdWJtaXR0aW5nID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGZpeEFsbCgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvblNlbGVjdCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHJlYXNvbiA9IHRoaXMucmVhc29uU2VsZWN0LnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IHNoZWV0cyA9IGF3YWl0IEhpQm9iLnNoZWV0cygpO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2hlZXQgb2Ygc2hlZXRzLmVtcGxveWVlU2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHNoZWV0LmxvY2tlZCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGF0dGVuZGFuY2UgPSBhd2FpdCBIaUJvYi5hdHRlbmRhbmNlKHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIGF0dGVuZGFuY2UuYXR0ZW5kYW5jZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGUuZW50cmllcy5zb21lKGUgPT4gIWUucmVhc29uKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lID0gRGF0ZXMucGFyc2UoZGF0ZS5kYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWUgIT09IFwibnVtYmVyXCIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudHJpZXM6IEhpQm9iU3VibWl0RW50cnlbXSA9IGRhdGUuZW50cmllcy5tYXAoZSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0SG91cjogKChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSAtIHRpbWUpIC8gKDM2MDAgKiAxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aEhvdXJzOiBlLmVuZCA/ICgoRGF0ZXMucGFyc2UoZS5lbmQpID8/IERhdGUubm93KCkpIC0gKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpKSAvICgzNjAwICogMTAwMCkgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uSWQ6IGUucmVhc29uIHx8IHJlYXNvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGUuY29tbWVudCA/PyBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgSGlCb2Iuc3VibWl0KHRpbWUsIGVudHJpZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBmaXhMYXRlc3QoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFzb25TZWxlY3QpIHJldHVybjtcclxuICAgICAgICBjb25zdCByZWFzb24gPSB0aGlzLnJlYXNvblNlbGVjdC52YWx1ZTtcclxuICAgICAgICBsZXQgbGF0ZXN0OiB7IGRhdGU6IG51bWJlciwgZW50cmllczogSGlCb2JTdWJtaXRFbnRyeVtdIH0gfCBudWxsID0gbnVsbDtcclxuICAgICAgICBjb25zdCBzaGVldHMgPSBhd2FpdCBIaUJvYi5zaGVldHMoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHNoZWV0cy5lbXBsb3llZVNoZWV0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzaGVldC5sb2NrZWQpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBjb25zdCBhdHRlbmRhbmNlID0gYXdhaXQgSGlCb2IuYXR0ZW5kYW5jZShzaGVldC5pZCk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZGF0ZSBvZiBhdHRlbmRhbmNlLmF0dGVuZGFuY2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBEYXRlcy5wYXJzZShkYXRlLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lICE9PSBcIm51bWJlclwiKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGlmICghbGF0ZXN0IHx8IHRpbWUgPiBsYXRlc3QuZGF0ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRyaWVzOiBIaUJvYlN1Ym1pdEVudHJ5W10gPSBkYXRlLmVudHJpZXMubWFwKGUgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydEhvdXI6ICgoRGF0ZXMucGFyc2UoZS5zdGFydCkgPz8gRGF0ZS5ub3coKSkgLSB0aW1lKSAvICgzNjAwICogMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGhIb3VyczogZS5lbmQgPyAoKERhdGVzLnBhcnNlKGUuZW5kKSA/PyBEYXRlLm5vdygpKSAtIChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSkgLyAoMzYwMCAqIDEwMDApIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbklkOiBlLnJlYXNvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGUuY29tbWVudCA/PyBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF0ZXN0ID0geyBkYXRlOiB0aW1lLCBlbnRyaWVzOiBlbnRyaWVzIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxhdGVzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgbGF0ZXN0LmVudHJpZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVudHJ5LnJlYXNvbklkID0gZW50cnkucmVhc29uSWQgfHwgcmVhc29uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGF3YWl0IEhpQm9iLnN1Ym1pdChsYXRlc3QuZGF0ZSwgbGF0ZXN0LmVudHJpZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ0VudHJ5XHJcbntcclxuICAgIHN0YXJ0SG91cjogbnVtYmVyLFxyXG4gICAgbGVuZ3RoSG91cnM6IG51bWJlcixcclxuICAgIHJlYXNvbklkOiBzdHJpbmcsXHJcbiAgICBjb21tZW50OiBzdHJpbmcgfCBudWxsLFxyXG4gICAgaGFzQ29tbWVudDogYm9vbGVhblxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ0RhdGVcclxue1xyXG4gICAgZGlydHk6IGJvb2xlYW4sXHJcbiAgICBkYXRlOiBudW1iZXJcclxuICAgIGVudHJpZXM6IFRpbWVsb2dFbnRyeVtdLFxyXG4gICAgd2Vla2VuZDogYm9vbGVhbixcclxuICAgIGZhdm9yaXRlZDogYm9vbGVhblxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ1NoZWV0XHJcbntcclxuICAgIGlkOiBudW1iZXIsXHJcbiAgICBzdGF0dXM6IHN0cmluZyxcclxuICAgIHN0YXJ0OiBudW1iZXIsXHJcbiAgICBlbmQ6IG51bWJlclxyXG4gICAgZGF0ZXM6IFRpbWVsb2dEYXRlW10sXHJcbiAgICBsb2NrZWQ6IGJvb2xlYW4sXHJcbiAgICBob3Vyc1BlckRheTogbnVtYmVyXHJcbn1cclxuZXhwb3J0IGVudW0gVGltZWxvZ1NhdmVTdGF0dXNcclxue1xyXG4gICAgV2FpdGluZyxcclxuICAgIFNhdmluZyxcclxuICAgIFNhdmVkXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lTG9nRmF2b3JpdGVkRGF0ZVxyXG57XHJcbiAgICBkYXRlOiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nVUlEYXRlIFxyXG57XHJcbiAgICBkYXRlOiBUaW1lbG9nRGF0ZSxcclxuICAgIHBhcmVudDogSFRNTERpdkVsZW1lbnQsXHJcbiAgICBlbnRyaWVzOiBUaW1lbG9nVUlFbnRyeUNvbnRhaW5lcltdLFxyXG4gICAgc3VtSG91cnM/OiBIVE1MU3BhbkVsZW1lbnQsXHJcbiAgICBzdGFyQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCxcclxuICAgIHBhc3RlQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudFxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ1VJRW50cnlDb250YWluZXJcclxue1xyXG4gICAgZW50cnk6IFRpbWVsb2dFbnRyeSxcclxuICAgIHBhcmVudDogSFRNTERpdkVsZW1lbnQsXHJcbiAgICBzdGFydEhvdXI6IEhUTUxJbnB1dEVsZW1lbnQsXHJcbiAgICBsZW5ndGg6IEhUTUxJbnB1dEVsZW1lbnQsXHJcbiAgICByZWFzb246IEhUTUxTZWxlY3RFbGVtZW50LFxyXG4gICAgZW5kSG91cjogSFRNTElucHV0RWxlbWVudCxcclxuICAgIGNvbW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQsXHJcbiAgICBjb21tZW50QnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudFxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ1VJV2Vla1N1bVxyXG57XHJcbiAgICBkYXRlczogVGltZWxvZ1VJRGF0ZVtdLFxyXG4gICAgZWxlbWVudDogSFRNTERpdkVsZW1lbnRcclxufSIsImV4cG9ydCBhYnN0cmFjdCBjbGFzcyBNYXRlcmlhbEljb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBpbml0aWFsaXplKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcbiAgICAgICAgbGluay5ocmVmID0gXCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PU1hdGVyaWFsK1N5bWJvbHMrT3V0bGluZWQ6b3Bzeix3Z2h0LEZJTEwsR1JBREAyMC4uNDgsMTAwLi43MDAsMC4uMSwtNTAuLjIwMFwiO1xyXG4gICAgICAgIGxpbmsucmVsID0gXCJzdHlsZXNoZWV0XCI7XHJcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0KGljb246IHN0cmluZywgZmlsbDogYm9vbGVhbiA9IGZhbHNlKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICBzcGFuLmNsYXNzTmFtZSA9IGBtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkYDtcclxuICAgICAgICBzcGFuLmlubmVyVGV4dCA9IGljb247XHJcbiAgICAgICAgc3Bhbi5zdHlsZS52ZXJ0aWNhbEFsaWduID0gXCJtaWRkbGVcIjtcclxuICAgICAgICBzcGFuLnN0eWxlLmZvbnRTaXplID0gXCIxLjVlbVwiO1xyXG4gICAgICAgIHNwYW4uc3R5bGUuZm9udFZhcmlhdGlvblNldHRpbmdzID0gYCdGSUxMJyAke2ZpbGwgPyAxIDogMH1gO1xyXG4gICAgICAgIHJldHVybiBzcGFuO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIE51bWJlcnNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyByb3VuZChudW06IG51bWJlciwgZGVjaW1hbHM6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChudW0gKiAoMTAgKiogZGVjaW1hbHMpKSAvICgxMCAqKiBkZWNpbWFscyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGZsb29yKG51bTogbnVtYmVyLCBkZWNpbWFsczogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKG51bSAqICgxMCAqKiBkZWNpbWFscykpIC8gKDEwICoqIGRlY2ltYWxzKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgY2VpbChudW06IG51bWJlciwgZGVjaW1hbHM6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKG51bSAqICgxMCAqKiBkZWNpbWFscykpIC8gKDEwICoqIGRlY2ltYWxzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHN1bShhcnI6IG51bWJlcltdKVxyXG4gICAge1xyXG4gICAgICAgIGxldCB2YWwgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB2YWwgKz0gYXJyW2ldO1xyXG4gICAgICAgIHJldHVybiB2YWw7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgRXZlbnRIYW5kbGVyPFQ+XHJcbntcclxuICAgIHByaXZhdGUgaGFuZGxlcnM6IHsgaGFuZGxlcjogKHZhbDogVCkgPT4gdm9pZCwgY29udGV4dDogYW55IH1bXSA9IFtdO1xyXG4gICAgcHVibGljIG9uKGhhbmRsZXI6ICh2YWw6IFQpID0+IHZvaWQsIGNvbnRleHQ6IGFueSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLmhhbmRsZXJzLnB1c2goeyBoYW5kbGVyLCBjb250ZXh0IH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG9mZihoYW5kbGVyOiAodmFsOiBUKSA9PiB2b2lkLCBjb250ZXh0OiBhbnkpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZmlsdGVyKGggPT4gaC5oYW5kbGVyICE9PSBoYW5kbGVyIHx8IGguY29udGV4dCAhPT0gY29udGV4dCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZmlyZSh2YWw6IFQpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycy5mb3JFYWNoKGggPT4gaC5oYW5kbGVyLmNhbGwoaC5jb250ZXh0LCB2YWwpKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEhpQm9iIH0gZnJvbSBcIi4uL0hpQm9iL0hpQm9iXCI7XHJcbmltcG9ydCB7IEhpQm9iUmVhc29uIH0gZnJvbSBcIi4uL0hpQm9iL0hpQm9iVHlwZXNcIjtcclxuaW1wb3J0IHsgRGF0ZXMgfSBmcm9tIFwiLi4vVXRpbHMvRGF0ZXNcIjtcclxuaW1wb3J0IHsgRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4uL1V0aWxzL0V2ZW50SGFuZGxlclwiO1xyXG5pbXBvcnQgeyBOdW1iZXJzIH0gZnJvbSBcIi4uL1V0aWxzL051bWJlcnNcIjtcclxuaW1wb3J0IHsgV2FpdCB9IGZyb20gXCIuLi9VdGlscy9XYWl0XCI7XHJcbmltcG9ydCB7IFRpbWVsb2dTaGVldCwgVGltZWxvZ0RhdGUsIFRpbWVsb2dTYXZlU3RhdHVzLCBUaW1lTG9nRmF2b3JpdGVkRGF0ZSB9IGZyb20gXCIuL1RpbWVsb2dUeXBlc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRpbWVsb2dNb2RlbFxyXG57XHJcbiAgICBwdWJsaWMgc2hlZXRzOiBUaW1lbG9nU2hlZXRbXSA9IFtdO1xyXG4gICAgcHVibGljIG9uRGF0ZVVwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPHsgc2hlZXQ6IFRpbWVsb2dTaGVldCwgZGF0ZTogVGltZWxvZ0RhdGUgfT4oKTtcclxuICAgIHB1YmxpYyBvblJlYXNvbnNVcGRhdGVkID0gbmV3IEV2ZW50SGFuZGxlcjxIaUJvYlJlYXNvbltdPigpO1xyXG4gICAgcHVibGljIG9uU2hlZXRVcGRhdGVkID0gbmV3IEV2ZW50SGFuZGxlcjxUaW1lbG9nU2hlZXQ+KCk7XHJcbiAgICBwdWJsaWMgb25TaGVldHNVcGRhdGVkID0gbmV3IEV2ZW50SGFuZGxlcjxUaW1lbG9nU2hlZXRbXT4oKTtcclxuICAgIHB1YmxpYyBvblNhdmVTdGF0dXNVcGRhdGVkID0gbmV3IEV2ZW50SGFuZGxlcjxUaW1lbG9nU2F2ZVN0YXR1cz4oKTtcclxuICAgIHByaXZhdGUgc2F2ZUhhbmRsZTogbnVtYmVyID0gLTE7XHJcbiAgICBwcml2YXRlIHNhdmluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGluZ0ZsZXg6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBwcml2YXRlIHJlYXNvbnM6IEhpQm9iUmVhc29uW10gPSBbXTtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpXHJcbiAgICB7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5mZXRjaFNoZWV0cygpO1xyXG4gICAgICAgIHRoaXMuZmV0Y2hSZWFzb25zKCk7XHJcbiAgICAgICAgdGhpcy5vblNhdmVTdGF0dXNVcGRhdGVkLmZpcmUoVGltZWxvZ1NhdmVTdGF0dXMuU2F2ZWQpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGZldGNoU2hlZXRzKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLnNoZWV0cyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNoZWV0cyA9IGF3YWl0IEhpQm9iLnNoZWV0cygpO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2hlZXQgb2Ygc2hlZXRzLmVtcGxveWVlU2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBEYXRlcy5wYXJzZShzaGVldC5jeWNsZVN0YXJ0RGF0ZSkgPz8gMDtcclxuICAgICAgICAgICAgY29uc3QgZW5kID0gRGF0ZXMucGFyc2Uoc2hlZXQuY3ljbGVFbmREYXRlKSA/PyAwO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdTaGVldCA9IHtcclxuICAgICAgICAgICAgICAgIGlkOiBzaGVldC5pZCxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogc2hlZXQuc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgc3RhcnQsXHJcbiAgICAgICAgICAgICAgICBlbmQsXHJcbiAgICAgICAgICAgICAgICBkYXRlczogW10sXHJcbiAgICAgICAgICAgICAgICBsb2NrZWQ6IHNoZWV0LmxvY2tlZCxcclxuICAgICAgICAgICAgICAgIGhvdXJzUGVyRGF5OiAwXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuc2hlZXRzLnB1c2gobmV3U2hlZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNoZWV0cy5zb3J0KChhLCBiKSA9PiBiLnN0YXJ0IC0gYS5zdGFydCk7XHJcbiAgICAgICAgdGhpcy5vblNoZWV0c1VwZGF0ZWQuZmlyZSh0aGlzLnNoZWV0cyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZmV0Y2hSZWFzb25zKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLnJlYXNvbnMgPSAoYXdhaXQgSGlCb2IubWV0YWRhdGEoKSkudGltZUxvZ0VudHJ5UmVhc29uLnZhbHVlcztcclxuICAgICAgICB0aGlzLm9uUmVhc29uc1VwZGF0ZWQuZmlyZSh0aGlzLnJlYXNvbnMpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGZldGNoU2hlZXQoaWQ6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmlkID09PSBpZCk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGF0dGVuZGFuY2UgPSBhd2FpdCBIaUJvYi5hdHRlbmRhbmNlKGlkKTtcclxuICAgICAgICBzaGVldC5ob3Vyc1BlckRheSA9IGF0dGVuZGFuY2Uuc3VtbWFyeS5wb3RlbnRpYWxXb3JraW5nSG91cnMgLyBhdHRlbmRhbmNlLnN1bW1hcnkucG90ZW50aWFsV29ya2luZ0RheXM7XHJcbiAgICAgICAgc2hlZXQuZGF0ZXMgPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2YgYXR0ZW5kYW5jZS5hdHRlbmRhbmNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgdGltZSA9IERhdGVzLnBhcnNlKGRhdGUuZGF0ZSkgPz8gRGF0ZS5ub3coKVxyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZTogVGltZWxvZ0RhdGUgPSB7XHJcbiAgICAgICAgICAgICAgICBkaXJ0eTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkYXRlOiB0aW1lLFxyXG4gICAgICAgICAgICAgICAgd2Vla2VuZDogZGF0ZS5zdGF0dXMgPT09IFwiV2Vla2VuZEV2ZW50XCIsXHJcbiAgICAgICAgICAgICAgICBmYXZvcml0ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZW50cmllczogZGF0ZS5lbnRyaWVzLm1hcChlID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRIb3VyOiBOdW1iZXJzLmZsb29yKCgoRGF0ZXMucGFyc2UoZS5zdGFydCkgPz8gRGF0ZS5ub3coKSkgLSAoRGF0ZXMucGFyc2UoZGF0ZS5kYXRlKSA/PyBEYXRlLm5vdygpKSkgLyAoMzYwMCAqIDEwMDApLCAyKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoSG91cnM6IE51bWJlcnMuY2VpbCgoKERhdGVzLnBhcnNlKGUuZW5kKSA/PyBEYXRlLm5vdygpKSAtIChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSkgLyAoMzYwMCAqIDEwMDApLCAyKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uSWQ6IGUucmVhc29uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50OiBlLmNvbW1lbnQgPz8gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ29tbWVudDogISFlLmNvbW1lbnRcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSkuc29ydCgoYSwgYikgPT4gYS5zdGFydEhvdXIgLSBiLnN0YXJ0SG91cilcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgc2hlZXQuZGF0ZXMucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNoZWV0LmRhdGVzLnNvcnQoKGEsIGIpID0+IGIuZGF0ZSAtIGEuZGF0ZSk7XHJcbiAgICAgICAgY29uc3QgZmF2b3JpdGUgPSB0aGlzLmdldEZhdm9yaXRlZERhdGUoKTtcclxuICAgICAgICBpZiAoZmF2b3JpdGUgJiYgZmF2b3JpdGUuc2hlZXQgPT09IHNoZWV0KVxyXG4gICAgICAgICAgICBmYXZvcml0ZS5kYXRlLmZhdm9yaXRlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5vblNoZWV0VXBkYXRlZC5maXJlKHNoZWV0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2hhbmdlU3RhcnRIb3VyKGRhdGU6IFRpbWVsb2dEYXRlLCBpbmRleDogbnVtYmVyLCBob3VyOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLnN0YXJ0SG91ciA9IGhvdXI7XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGNoYW5nZUxlbmd0aEhvdXJzKGRhdGU6IFRpbWVsb2dEYXRlLCBpbmRleDogbnVtYmVyLCBsZW5ndGg6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0ubGVuZ3RoSG91cnMgPSBsZW5ndGg7XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGNoYW5nZVJlYXNvbihkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlciwgcmVhc29uOiBzdHJpbmcpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLnJlYXNvbklkID0gcmVhc29uO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBjaGFuZ2VDb21tZW50KGRhdGU6IFRpbWVsb2dEYXRlLCBpbmRleDogbnVtYmVyLCBjb21tZW50OiBzdHJpbmcpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLmNvbW1lbnQgPSBjb21tZW50O1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0uaGFzQ29tbWVudCA9IHRydWU7XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHRvZ2dsZUNvbW1lbnQoZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLmhhc0NvbW1lbnQgPSAhZGF0ZS5lbnRyaWVzW2luZGV4XS5oYXNDb21tZW50O1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0uY29tbWVudCA9IGRhdGUuZW50cmllc1tpbmRleF0uaGFzQ29tbWVudCA/IFwiXCIgOiBudWxsO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXRGYXZvcml0ZWREYXRlKGRhdGU6IFRpbWVsb2dEYXRlKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IG9sZEZhdm9yaXRlID0gdGhpcy5nZXRGYXZvcml0ZWREYXRlKCk7XHJcbiAgICAgICAgaWYgKG9sZEZhdm9yaXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgb2xkRmF2b3JpdGUuZGF0ZS5mYXZvcml0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUob2xkRmF2b3JpdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGF0ZS5mYXZvcml0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQ6IHNoZWV0LCBkYXRlOiBkYXRlIH0pO1xyXG5cclxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0bF9mYXZvcml0ZVwiLCBKU09OLnN0cmluZ2lmeSh7IGRhdGU6IERhdGVzLmZvcm1hdChkYXRlLmRhdGUsIGZhbHNlKSB9IGFzIFRpbWVMb2dGYXZvcml0ZWREYXRlKSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0RmF2b3JpdGVkRGF0ZSgpOiB7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGRhdGU6IFRpbWVsb2dEYXRlIH0gfCBudWxsXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc3RyID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGxfZmF2b3JpdGVcIik7XHJcbiAgICAgICAgaWYgKCFzdHIpIHJldHVybiBudWxsO1xyXG4gICAgICAgIGNvbnN0IGZhdm9yaXRlOiBUaW1lTG9nRmF2b3JpdGVkRGF0ZSA9IEpTT04ucGFyc2Uoc3RyKTtcclxuICAgICAgICBjb25zdCB0aW1lID0gRGF0ZXMucGFyc2UoZmF2b3JpdGUuZGF0ZSk7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZC5kYXRlID09PSB0aW1lKSk7XHJcbiAgICAgICAgaWYgKHNoZWV0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IHNoZWV0LmRhdGVzLmZpbmQoZCA9PiBkLmRhdGUgPT09IHRpbWUpO1xyXG4gICAgICAgICAgICBpZiAoZGF0ZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHNoZWV0OiBzaGVldCwgZGF0ZTogZGF0ZSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVsZXRlRW50cnkoZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGZpbmRMYXN0RW50cnkob3JpZ2luYWxEYXRlOiBUaW1lbG9nRGF0ZSlcclxuICAgIHtcclxuICAgICAgICBjb25zdCBvcmlnaW5hbFNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IG9yaWdpbmFsRGF0ZSkpO1xyXG4gICAgICAgIGlmICghb3JpZ2luYWxTaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGxldCBkYXRlSW5kZXggPSBvcmlnaW5hbFNoZWV0LmRhdGVzLmluZGV4T2Yob3JpZ2luYWxEYXRlKTtcclxuICAgICAgICBsZXQgZW50cnlJbmRleCA9IC0xO1xyXG4gICAgICAgIGZvciAobGV0IHNoZWV0SW5kZXggPSB0aGlzLnNoZWV0cy5pbmRleE9mKG9yaWdpbmFsU2hlZXQpOyBzaGVldEluZGV4IDwgdGhpcy5zaGVldHMubGVuZ3RoOyBzaGVldEluZGV4KyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzW3NoZWV0SW5kZXhdO1xyXG4gICAgICAgICAgICBpZiAoc2hlZXQuZGF0ZXMubGVuZ3RoIDwgMSkgYXdhaXQgdGhpcy5mZXRjaFNoZWV0KHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgZm9yICg7IGRhdGVJbmRleCA8IHNoZWV0LmRhdGVzLmxlbmd0aDsgZGF0ZUluZGV4KyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBzaGVldC5kYXRlc1tkYXRlSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGUuZW50cmllcy5sZW5ndGggPiAwKSByZXR1cm4gZW50cnlJbmRleCA8IDAgPyBkYXRlLmVudHJpZXNbZGF0ZS5lbnRyaWVzLmxlbmd0aCAtIDFdIDogZGF0ZS5lbnRyaWVzW2VudHJ5SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgZW50cnlJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGF0ZUluZGV4ID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgbmV3RW50cnkoZGF0ZTogVGltZWxvZ0RhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBjb25zdCBsYXN0ID0gYXdhaXQgdGhpcy5maW5kTGFzdEVudHJ5KGRhdGUpO1xyXG4gICAgICAgIGxldCBzdGFydEhvdXIgPSA4LjU7XHJcbiAgICAgICAgbGV0IGxlbmd0aEhvdXJzID0gTnVtYmVycy5yb3VuZChzaGVldC5ob3Vyc1BlckRheSwgMik7XHJcbiAgICAgICAgbGV0IHJlYXNvbklkID0gXCJcIjtcclxuICAgICAgICBpZiAobGFzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkYXRlLmVudHJpZXMuaW5jbHVkZXMobGFzdCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0SG91ciA9IGxhc3Quc3RhcnRIb3VyICsgbGFzdC5sZW5ndGhIb3VycztcclxuICAgICAgICAgICAgICAgIGxlbmd0aEhvdXJzID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZWFzb25JZCA9IGxhc3QucmVhc29uSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGUuZW50cmllcy5wdXNoKHtcclxuICAgICAgICAgICAgc3RhcnRIb3VyLFxyXG4gICAgICAgICAgICBsZW5ndGhIb3VycyxcclxuICAgICAgICAgICAgcmVhc29uSWQsXHJcbiAgICAgICAgICAgIGNvbW1lbnQ6IG51bGwsXHJcbiAgICAgICAgICAgIGhhc0NvbW1lbnQ6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIHBhc3RlRnJvbVN0YXJyZWQoZGF0ZTogVGltZWxvZ0RhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKGRhdGUuZW50cmllcy5sZW5ndGggPiAwKSByZXR1cm47XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBjb25zdCBmYXZvcml0ZSA9IHRoaXMuZ2V0RmF2b3JpdGVkRGF0ZSgpO1xyXG4gICAgICAgIGlmICghZmF2b3JpdGUgfHwgZmF2b3JpdGUuZGF0ZSA9PT0gZGF0ZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGZhdm9yaXRlLmRhdGUuZW50cmllcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGRhdGUuZW50cmllcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0SG91cjogZW50cnkuc3RhcnRIb3VyLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoSG91cnM6IGVudHJ5Lmxlbmd0aEhvdXJzLFxyXG4gICAgICAgICAgICAgICAgcmVhc29uSWQ6IGVudHJ5LnJlYXNvbklkLFxyXG4gICAgICAgICAgICAgICAgY29tbWVudDogZW50cnkuY29tbWVudCxcclxuICAgICAgICAgICAgICAgIGhhc0NvbW1lbnQ6IGVudHJ5Lmhhc0NvbW1lbnRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcXVldWVTYXZlKClcclxuICAgIHtcclxuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc2F2ZUhhbmRsZSk7XHJcbiAgICAgICAgdGhpcy5zYXZlSGFuZGxlID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4gdGhpcy5zYXZlKCksIDUwMCk7XHJcbiAgICAgICAgdGhpcy5vblNhdmVTdGF0dXNVcGRhdGVkLmZpcmUoVGltZWxvZ1NhdmVTdGF0dXMuV2FpdGluZyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgc2F2ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgYXdhaXQgV2FpdC51bnRpbCgoKSA9PiAhdGhpcy5zYXZpbmcpO1xyXG4gICAgICAgIHRoaXMuc2F2aW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQuZmlyZShUaW1lbG9nU2F2ZVN0YXR1cy5TYXZpbmcpO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2hlZXQgb2YgdGhpcy5zaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2Ygc2hlZXQuZGF0ZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRlLmRpcnR5KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IEhpQm9iLnN1Ym1pdChkYXRlLmRhdGUsIGRhdGUuZW50cmllcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZS5kaXJ0eSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub25TYXZlU3RhdHVzVXBkYXRlZC5maXJlKFRpbWVsb2dTYXZlU3RhdHVzLlNhdmVkKTtcclxuICAgICAgICB0aGlzLnNhdmluZyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGdldEN1cnJlbnRCYWxhbmNlSG91cnMoc2hlZXQ6IFRpbWVsb2dTaGVldClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBvbGRTaGVldHNJbmNsdWRlZCA9IDE7IC8vQ3VycmVudCBzaGVldCdzIGJhbGFuY2UgaXMgaW5jbHVkZWQsIGFuZCB0aGlzIG1hbnkgcHJldmlvdXMgc2hlZXRzXHJcbiAgICAgICAgY29uc3Qgc2hlZXRJbmRleCA9IHRoaXMuc2hlZXRzLmluZGV4T2Yoc2hlZXQpO1xyXG5cclxuICAgICAgICBjb25zdCBzaGVldHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcclxuICAgICAgICBsZXQgYmFsYW5jZSA9IDA7XHJcbiAgICAgICAgaWYgKCEhdGhpcy5zaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhd2FpdCBXYWl0LnVudGlsKCgpID0+ICF0aGlzLmNhbGN1bGF0aW5nRmxleCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRpbmdGbGV4ID0gdHJ1ZTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHNoZWV0SW5kZXggKyBvbGRTaGVldHNJbmNsdWRlZDsgaSA+PSBzaGVldEluZGV4ICYmIGkgPCB0aGlzLnNoZWV0cy5sZW5ndGg7IGktLSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0c1tpXTtcclxuICAgICAgICAgICAgICAgIGlmICghc2hlZXQpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2FjaGVLZXkgPSBgdGxfY2FjaGVkX2hvdXJfYmFsYW5jZV8ke3NoZWV0LmlkfWA7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2hlZXRCYWxhbmNlID0gMDtcclxuICAgICAgICAgICAgICAgIGlmIChzaGVldC5sb2NrZWQgJiYgd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGNhY2hlS2V5KSAhPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzaGVldEJhbGFuY2UgPSBwYXJzZUZsb2F0KHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShjYWNoZUtleSkgPz8gXCIwXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaGVldC5kYXRlcy5sZW5ndGggPCAxKSBhd2FpdCB0aGlzLmZldGNoU2hlZXQoc2hlZXQuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwb3RlbnRpYWxIb3VycyA9IHNoZWV0LmRhdGVzLmZpbHRlcihkID0+ICFkLndlZWtlbmQpLmxlbmd0aCAqIHNoZWV0LmhvdXJzUGVyRGF5O1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB3b3JrZWRIb3VycyA9IE51bWJlcnMuc3VtKHNoZWV0LmRhdGVzLm1hcChkID0+IE51bWJlcnMuc3VtKGQuZW50cmllcy5tYXAoZSA9PiBlLmxlbmd0aEhvdXJzKSkpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAod29ya2VkSG91cnMgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hlZXRCYWxhbmNlIC09IHBvdGVudGlhbEhvdXJzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGVldEJhbGFuY2UgKz0gd29ya2VkSG91cnM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaGVldC5sb2NrZWQgJiYgc2hlZXQuaWQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oY2FjaGVLZXksIHNoZWV0QmFsYW5jZS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJhbGFuY2UgKz0gc2hlZXRCYWxhbmNlO1xyXG4gICAgICAgICAgICAgICAgc2hlZXRzW3NoZWV0LmlkLnRvU3RyaW5nKCldID0gc2hlZXRCYWxhbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRpbmdGbGV4ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IHNoZWV0cywgYmFsYW5jZSB9O1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCB7IFJlYXNvbkVuaGFuY2VtZW50cyB9IGZyb20gXCIuL1JlYXNvbkVuaGFuY2VtZW50cy9SZWFzb25zRW5oYW5jZW1lbnRzXCI7XHJcbmltcG9ydCB7IFRpbWVsb2dVSSB9IGZyb20gXCIuL1RpbWVsb2cvVGltZWxvZ1VJXCI7XHJcbmltcG9ydCB7IE1hdGVyaWFsSWNvbiB9IGZyb20gXCIuL1V0aWxzL01hdGVyaWFsSWNvblwiO1xyXG5cclxuTWF0ZXJpYWxJY29uLmluaXRpYWxpemUoKTtcclxubmV3IFRpbWVsb2dVSSgpO1xyXG5uZXcgUmVhc29uRW5oYW5jZW1lbnRzKCk7IiwiaW1wb3J0IHsgSGlCb2JSZWFzb24gfSBmcm9tIFwiLi4vSGlCb2IvSGlCb2JUeXBlc1wiO1xyXG5pbXBvcnQgeyBEYXRlcyB9IGZyb20gXCIuLi9VdGlscy9EYXRlc1wiO1xyXG5pbXBvcnQgeyBNYXRlcmlhbEljb24gfSBmcm9tIFwiLi4vVXRpbHMvTWF0ZXJpYWxJY29uXCI7XHJcbmltcG9ydCB7IE51bWJlcnMgfSBmcm9tIFwiLi4vVXRpbHMvTnVtYmVyc1wiO1xyXG5pbXBvcnQgeyBXYWl0IH0gZnJvbSBcIi4uL1V0aWxzL1dhaXRcIjtcclxuaW1wb3J0IHsgVGltZWxvZ0NzcyB9IGZyb20gXCIuL1RpbWVsb2dDc3NcIjtcclxuaW1wb3J0IHsgVGltZWxvZ01vZGVsIH0gZnJvbSBcIi4vVGltZWxvZ01vZGVsXCI7XHJcbmltcG9ydCB7IFRpbWVsb2dEYXRlLCBUaW1lbG9nRW50cnksIFRpbWVsb2dTYXZlU3RhdHVzLCBUaW1lbG9nU2hlZXQsIFRpbWVsb2dVSURhdGUgYXMgVGltZWxvZ1VJRGF0ZUNvbnRhaW5lciwgVGltZWxvZ1VJV2Vla1N1bSB9IGZyb20gXCIuL1RpbWVsb2dUeXBlc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRpbWVsb2dVSVxyXG57XHJcbiAgICBwcml2YXRlIHRpbWVsb2dVSU91dGVyPzogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHRpbWVsb2dVSUlubmVyPzogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHRvZ2dsZUJ1dHRvbj86IEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBtb2RlbD86IFRpbWVsb2dNb2RlbDtcclxuXHJcbiAgICBwcml2YXRlIHNoZWV0RHJvcGRvd24/OiBIVE1MU2VsZWN0RWxlbWVudDtcclxuICAgIHByaXZhdGUgc2hlZXREcm9wZG93bk9wdGlvbnM6IHsgc2hlZXQ6IFRpbWVsb2dTaGVldCwgZWxlbWVudDogSFRNTE9wdGlvbkVsZW1lbnQgfVtdID0gW107XHJcbiAgICBwcml2YXRlIHNlbGVjdGVkU2hlZXQ/OiBUaW1lbG9nU2hlZXQ7XHJcblxyXG4gICAgcHJpdmF0ZSBzaGVldENvbnRhaW5lcj86IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBzaGVldERhdGVzOiBUaW1lbG9nVUlEYXRlQ29udGFpbmVyW10gPSBbXTtcclxuICAgIHByaXZhdGUgd2Vla1N1bXM6IFRpbWVsb2dVSVdlZWtTdW1bXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBzYXZlU3RhdHVzPzogSFRNTFNwYW5FbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBiYWxhbmNlTGFiZWw/OiBIVE1MRGl2RWxlbWVudDtcclxuXHJcbiAgICBwcml2YXRlIHJlYXNvbnM6IEhpQm9iUmVhc29uW10gPSBbXTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKVxyXG4gICAge1xyXG4gICAgICAgICh3aW5kb3cgYXMgYW55KS50aW1lbG9nID0gdGhpcztcclxuICAgICAgICB0aGlzLmFkZEJ1dHRvbigpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBhZGRCdXR0b24oKVxyXG4gICAge1xyXG4gICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImRpdi5hcHAtY29udGVudCA+IGFwcC10b3AtYmFyLmFwcC10b3AtYmFyID4gZGl2LmFjdGlvbnNcIik7XHJcbiAgICAgICAgICAgIGlmICghcGFyZW50KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBXYWl0LmZvcigxKTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtdG9nZ2xlLWJ0blwiO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwic2VudGltZW50X3Zlcnlfc2F0aXNmaWVkXCIpKTtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24udGl0bGUgPSBcIkhpQm9iIFV0aWxpdGllc1wiO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy50b2dnbGVWaXNpYmxlKCk7XHJcbiAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLnRvZ2dsZUJ1dHRvbik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVVJKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZU1vZGVsKCk7XHJcblxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHRvZ2dsZVZpc2libGUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy50aW1lbG9nVUlPdXRlcikgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVsb2dVSU91dGVyLnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hlZXRDb250YWluZXIpIHRoaXMuc2hlZXRDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbD8uZmV0Y2hTaGVldHMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImluaXRpYWxcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVVSSgpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgICAgc3R5bGUuaW5uZXJIVE1MID0gVGltZWxvZ0NzcztcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHN0eWxlKTtcclxuXHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlci5jbGFzc05hbWUgPSBcInRsLXVpXCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQodGhpcy50aW1lbG9nVUlPdXRlcik7XHJcblxyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuY2xhc3NOYW1lID0gXCJ0bC11aS1pbm5lclwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIuYXBwZW5kKHRoaXMudGltZWxvZ1VJSW5uZXIpO1xyXG5cclxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uY2xhc3NOYW1lID0gXCJ0bC1jbG9zZS1idG5cIjtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiY2xvc2VcIikpO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnRvZ2dsZVZpc2libGUoKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2hlZXREcm9wZG93bkxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgc2hlZXREcm9wZG93bkxhYmVsLmlubmVyVGV4dCA9IFwiU2hlZXQ6XCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZChzaGVldERyb3Bkb3duTGFiZWwpO1xyXG5cclxuICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xyXG4gICAgICAgIHRoaXMuc2hlZXREcm9wZG93bi5jbGFzc05hbWUgPSBcInRsLXNoZWV0LXNlbGVjdFwiO1xyXG4gICAgICAgIHRoaXMuc2hlZXREcm9wZG93bi5vbmNoYW5nZSA9ICgpID0+IHRoaXMub25TZWxlY3RlZFNoZWV0Q2hhbmdlKCk7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZCh0aGlzLnNoZWV0RHJvcGRvd24pO1xyXG5cclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NOYW1lID0gXCJ0bC1zYXZlLXN0YXR1c1wiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kKHRoaXMuc2F2ZVN0YXR1cyk7XHJcblxyXG4gICAgICAgIHRoaXMuYmFsYW5jZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLmJhbGFuY2VMYWJlbC5pbm5lclRleHQgPSBcIkJhbGFuY2U6IFwiO1xyXG4gICAgICAgIHRoaXMuYmFsYW5jZUxhYmVsLmNsYXNzTmFtZSA9IFwidGwtYmFsYW5jZS1sYWJlbFwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kKHRoaXMuYmFsYW5jZUxhYmVsKTtcclxuXHJcbiAgICAgICAgdGhpcy5zaGVldENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5zaGVldENvbnRhaW5lci5jbGFzc05hbWUgPSBcInRsLXNoZWV0XCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZCh0aGlzLnNoZWV0Q29udGFpbmVyKTtcclxuXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNyZWF0ZU1vZGVsKClcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5tb2RlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwub25EYXRlVXBkYXRlZC5vZmYodGhpcy5vbkRhdGVVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5vblJlYXNvbnNVcGRhdGVkLm9mZih0aGlzLm9uUmVhc29uc1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLm9uU2F2ZVN0YXR1c1VwZGF0ZWQub2ZmKHRoaXMub25TYXZlU3RhdHVzVXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwub25TaGVldFVwZGF0ZWQub2ZmKHRoaXMub25TaGVldFVwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLm9uU2hlZXRzVXBkYXRlZC5vZmYodGhpcy5vblNoZWV0c1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1vZGVsID0gbmV3IFRpbWVsb2dNb2RlbCgpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25EYXRlVXBkYXRlZC5vbih0aGlzLm9uRGF0ZVVwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25SZWFzb25zVXBkYXRlZC5vbih0aGlzLm9uUmVhc29uc1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25TYXZlU3RhdHVzVXBkYXRlZC5vbih0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25TaGVldFVwZGF0ZWQub24odGhpcy5vblNoZWV0VXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5tb2RlbC5vblNoZWV0c1VwZGF0ZWQub24odGhpcy5vblNoZWV0c1VwZGF0ZWQsIHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLm1vZGVsLmluaXRpYWxpemUoKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0RGF0ZUNvbnRhaW5lcihkYXRhOiB7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGRhdGU6IFRpbWVsb2dEYXRlIH0pXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTaGVldCA9PT0gZGF0YS5zaGVldCAmJiB0aGlzLnNoZWV0Q29udGFpbmVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IGRhdGVDb250YWluZXIgPSB0aGlzLnNoZWV0RGF0ZXMuZmluZChkID0+IGQuZGF0ZSA9PT0gZGF0YS5kYXRlKTtcclxuICAgICAgICAgICAgaWYgKCFkYXRlQ29udGFpbmVyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyID0geyBkYXRlOiBkYXRhLmRhdGUsIHBhcmVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSwgZW50cmllczogW10sIHN0YXJCdXR0b246IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksIHBhc3RlQnV0dG9uOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNoZWV0RGF0ZXMucHVzaChkYXRlQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmNsYXNzTmFtZSA9IFwidGwtZGF0ZVwiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaGVldENvbnRhaW5lci5hcHBlbmRDaGlsZChkYXRlQ29udGFpbmVyLnBhcmVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG5ldyBEYXRlKGRhdGEuZGF0ZS5kYXRlKS5nZXREYXkoKSA9PT0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3ZWVrU2VwZXJhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgICAgICAgICB3ZWVrU2VwZXJhdG9yLmNsYXNzTmFtZSA9IFwidGwtd2Vlay1zZXBlcmF0b3JcIjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoZWV0Q29udGFpbmVyLmFwcGVuZENoaWxkKHdlZWtTZXBlcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmFwcGVuZChkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm1vZGVsPy5zZXRGYXZvcml0ZWREYXRlKGRhdGEuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uY2xhc3NOYW1lID0gXCJ0bC1zdGFyLWJ1dHRvbiB0bC1zaG93LW9uLWhvdmVyXCI7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24udGl0bGUgPSBcIkZhdm9yaXRlIERheVwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgICAgICAgICB0aXRsZS5jbGFzc05hbWUgPSBcInRsLWRhdGUtbGFiZWxcIjtcclxuICAgICAgICAgICAgICAgIHRpdGxlLmlubmVyVGV4dCA9IG5ldyBEYXRlKGRhdGEuZGF0ZS5kYXRlKS50b0RhdGVTdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGUud2Vla2VuZCkgdGl0bGUuY2xhc3NMaXN0LmFkZChcInRsLWRhdGUtbGFiZWwtd2Vla2VuZFwiKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmFwcGVuZCh0aXRsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhLnNoZWV0LmxvY2tlZClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZC5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiYWRkXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIGFkZC5jbGFzc05hbWUgPSBcInRsLWFkZC1lbnRyeS1idG4gdGwtc2hvdy1vbi1ob3ZlclwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZC5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8ubmV3RW50cnkoZGF0YS5kYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmQoYWRkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwic3dpdGNoX2FjY2Vzc19zaG9ydGN1dF9hZGRcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi50aXRsZSA9IFwiUGFzdGUgZnJvbSBGYXZvcml0ZSBEYXlcIjtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtcGFzdGUtYnRuIHRsLXNob3ctb24taG92ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm1vZGVsPy5wYXN0ZUZyb21TdGFycmVkKGRhdGEuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kKGRhdGVDb250YWluZXIucGFzdGVCdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRUb1dlZWtTdW0oZGF0ZUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGRhdGVDb250YWluZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXRFbnRyeUNvbnRhaW5lcihkYXRhOiB7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGRhdGU6IFRpbWVsb2dEYXRlIH0sIGRhdGVDb250YWluZXI6IFRpbWVsb2dVSURhdGVDb250YWluZXIsIGVudHJ5OiBUaW1lbG9nRW50cnkpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IGVudHJ5Q29udGFpbmVyID0gZGF0ZUNvbnRhaW5lci5lbnRyaWVzLmZpbmQocCA9PiBwLmVudHJ5ID09PSBlbnRyeSk7XHJcbiAgICAgICAgaWYgKCFlbnRyeUNvbnRhaW5lcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyID0ge1xyXG4gICAgICAgICAgICAgICAgZW50cnksXHJcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXHJcbiAgICAgICAgICAgICAgICBzdGFydEhvdXI6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcclxuICAgICAgICAgICAgICAgIGVuZEhvdXI6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLFxyXG4gICAgICAgICAgICAgICAgcmVhc29uOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpLFxyXG4gICAgICAgICAgICAgICAgY29tbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLFxyXG4gICAgICAgICAgICAgICAgY29tbWVudEJ1dHRvbjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBkYXRlQ29udGFpbmVyLmVudHJpZXMucHVzaChlbnRyeUNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuY2xhc3NOYW1lID0gXCJ0bC1lbnRyeVwiO1xyXG4gICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5wYXJlbnQpO1xyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuc3RhcnRIb3VyLnR5cGUgPSBcInRpbWVcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuc3RhcnRIb3VyLmNsYXNzTmFtZSA9IFwidGwtZW50cnktc3RhcnRcIjtcclxuICAgICAgICAgICAgaWYgKGRhdGEuc2hlZXQubG9ja2VkKSBlbnRyeUNvbnRhaW5lci5zdGFydEhvdXIuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5zdGFydEhvdXIub25jaGFuZ2UgPSAoKSA9PiBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5kID0gZW50cnkuc3RhcnRIb3VyICsgZW50cnkubGVuZ3RoSG91cnM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsPy5jaGFuZ2VTdGFydEhvdXIoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgRGF0ZXMucGFyc2VUaW1lVG9ob3VycyhlbnRyeUNvbnRhaW5lcj8uc3RhcnRIb3VyLnZhbHVlID8/IFwiMDg6MDBcIikpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gTnVtYmVycy5yb3VuZChlbmQgLSBlbnRyeS5zdGFydEhvdXIsIDIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbD8uY2hhbmdlTGVuZ3RoSG91cnMoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIuc3RhcnRIb3VyKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGVuZExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgICAgIGVuZExhYmVsLmNsYXNzTmFtZSA9IFwidGwtZW5kLWxhYmVsXCJcclxuICAgICAgICAgICAgZW5kTGFiZWwuaW5uZXJUZXh0ID0gXCItXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbmRMYWJlbCk7XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5lbmRIb3VyLnR5cGUgPSBcInRpbWVcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuZW5kSG91ci5jbGFzc05hbWUgPSBcInRsLWVudHJ5LWVuZFwiO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zaGVldC5sb2NrZWQpIGVudHJ5Q29udGFpbmVyLmVuZEhvdXIuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5lbmRIb3VyLm9uY2hhbmdlID0gKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5Q29udGFpbmVyPy5lbmRIb3VyKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IE51bWJlcnMucm91bmQoRGF0ZXMucGFyc2VUaW1lVG9ob3VycyhlbnRyeUNvbnRhaW5lci5lbmRIb3VyLnZhbHVlKSAtIGVudHJ5LnN0YXJ0SG91ciwgMik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbD8uY2hhbmdlTGVuZ3RoSG91cnMoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIuZW5kSG91cik7XHJcblxyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucmVhc29uLm9uY2hhbmdlID0gKCkgPT4gdGhpcy5tb2RlbD8uY2hhbmdlUmVhc29uKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIGVudHJ5Q29udGFpbmVyPy5yZWFzb24udmFsdWUgPz8gXCJcIik7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnNoZWV0LmxvY2tlZCkgZW50cnlDb250YWluZXIucmVhc29uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucmVhc29uLmNsYXNzTmFtZSA9IFwidGwtZW50cnktcmVhc29uXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5yZWFzb24pO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJlYXNvbnNEcm9wZG93bihlbnRyeUNvbnRhaW5lci5yZWFzb24pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRhdGVDb250YWluZXIuZW50cmllcy5sZW5ndGggPT09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3VtSG91cnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3VtSG91cnMuY2xhc3NOYW1lID0gXCJ0bC1zdW0taG91cnNcIjtcclxuICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmQoZGF0ZUNvbnRhaW5lci5zdW1Ib3Vycyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmxlbmd0aC50eXBlID0gXCJudW1iZXJcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubGVuZ3RoLmNsYXNzTmFtZSA9IFwidGwtZW50cnktbGVuZ3RoXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmxlbmd0aC5zdGVwID0gXCIwLjAxXCI7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnNoZWV0LmxvY2tlZCkgZW50cnlDb250YWluZXIubGVuZ3RoLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubGVuZ3RoLm9uY2hhbmdlID0gKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbD8uY2hhbmdlTGVuZ3RoSG91cnMoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgcGFyc2VGbG9hdChlbnRyeUNvbnRhaW5lcj8ubGVuZ3RoLnZhbHVlIHx8IFwiMFwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkdXJhdGlvbkxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgICAgIGR1cmF0aW9uTGFiZWwuY2xhc3NOYW1lID0gXCJ0bC1kdXJhdGlvbi1sYWJlbFwiO1xyXG4gICAgICAgICAgICBkdXJhdGlvbkxhYmVsLmlubmVyVGV4dCA9IFwiaG91cihzKVwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZHVyYXRpb25MYWJlbCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWRhdGEuc2hlZXQubG9ja2VkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtYWRkLWNvbW1lbnQtYnRuIHRsLXNob3ctb24taG92ZXJcIjtcclxuICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnRCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMubW9kZWw/LnRvZ2dsZUNvbW1lbnQoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSk7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZS5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiZGVsZXRlXCIpKTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZS5jbGFzc05hbWUgPSBcInRsLXJlbW92ZS1lbnRyeS1idG4gdGwtc2hvdy1vbi1ob3ZlclwiO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm1vZGVsPy5kZWxldGVFbnRyeShkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpKTtcclxuICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChyZW1vdmUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50LnR5cGUgPSBcInRleHRcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC5wbGFjZWhvbGRlciA9IFwiV3JpdGUgYSBub3RlLi4uXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQudGl0bGUgPSBcIldyaXRlIGEgbm90ZS4uLlwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50LmNsYXNzTmFtZSA9IFwidGwtZW50cnktY29tbWVudFwiO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zaGVldC5sb2NrZWQpIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50Lm9uY2hhbmdlID0gKCkgPT4gXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWw/LmNoYW5nZUNvbW1lbnQoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgZW50cnlDb250YWluZXI/LmNvbW1lbnQudmFsdWUgPz8gXCJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLmNvbW1lbnQpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVudHJ5Q29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhZGRUb1dlZWtTdW0oZGF0ZTogVGltZWxvZ1VJRGF0ZUNvbnRhaW5lcilcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy53ZWVrU3Vtcy5sZW5ndGggPCAxIHx8IG5ldyBEYXRlKGRhdGUuZGF0ZS5kYXRlKS5nZXREYXkoKSA9PT0gMCkgLy9JZiB0aGlzIGlzIHRoZSBmaXJzdCBkYXksIG9yIGEgc3VuZGF5LCBjcmVhdGUgYSBuZXcgd2VlayBmb3IgaXQuXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCB3ZWVrU3VtID0ge1xyXG4gICAgICAgICAgICAgICAgZGF0ZXM6IFtkYXRlXSxcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgd2Vla1N1bS5lbGVtZW50LmNsYXNzTmFtZSA9IFwidGwtd2Vlay1zdW1cIjtcclxuICAgICAgICAgICAgdGhpcy53ZWVrU3Vtcy5wdXNoKHdlZWtTdW0pO1xyXG4gICAgICAgICAgICBkYXRlLnBhcmVudC5hcHBlbmRDaGlsZCh3ZWVrU3VtLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICBkYXRlLnBhcmVudC5zdHlsZS5tYXJnaW5Ub3AgPSBcIjM4cHhcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy53ZWVrU3Vtc1t0aGlzLndlZWtTdW1zLmxlbmd0aCAtIDFdLmRhdGVzLnB1c2goZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBvbkRhdGVVcGRhdGVkKGRhdGE6IHsgc2hlZXQ6IFRpbWVsb2dTaGVldCwgZGF0ZTogVGltZWxvZ0RhdGUgfSlcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFNoZWV0ID09PSBkYXRhLnNoZWV0ICYmIHRoaXMuc2hlZXRDb250YWluZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgZGF0ZUNvbnRhaW5lciA9IHRoaXMuZ2V0RGF0ZUNvbnRhaW5lcihkYXRhKTtcclxuICAgICAgICAgICAgaWYgKGRhdGVDb250YWluZXIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZGF0YS5kYXRlLmVudHJpZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVudHJ5Q29udGFpbmVyID0gdGhpcy5nZXRFbnRyeUNvbnRhaW5lcihkYXRhLCBkYXRlQ29udGFpbmVyLCBlbnRyeSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91ci52YWx1ZSA9IERhdGVzLmZvcm1hdEhvdXIoZW50cnkuc3RhcnRIb3VyKTtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5sZW5ndGgudmFsdWUgPSBlbnRyeS5sZW5ndGhIb3Vycy50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmVuZEhvdXIudmFsdWUgPSBEYXRlcy5mb3JtYXRIb3VyKGVudHJ5LnN0YXJ0SG91ciArIGVudHJ5Lmxlbmd0aEhvdXJzKTtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5yZWFzb24udmFsdWUgPSBlbnRyeS5yZWFzb25JZDtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50LnZhbHVlID0gZW50cnkuY29tbWVudCA/PyBcIlwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uLnRpdGxlID0gZW50cnkuaGFzQ29tbWVudCA/IFwiUmVtb3ZlIG5vdGVcIiA6IFwiQWRkIG5vdGVcIjtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KGVudHJ5Lmhhc0NvbW1lbnQgPyBcInNwZWFrZXJfbm90ZXNfb2ZmXCIgOiBcInNwZWFrZXJfbm90ZXNcIikpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuaGFzQ29tbWVudCkgZW50cnlDb250YWluZXIucGFyZW50LmNsYXNzTGlzdC5hZGQoXCJ0bC1oYXMtY29tbWVudFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGVudHJ5Q29udGFpbmVyLnBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKFwidGwtaGFzLWNvbW1lbnRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZW1vdmVkRW50cmllcyA9IGRhdGVDb250YWluZXIuZW50cmllcy5maWx0ZXIoZW50cnkgPT4gIWRhdGEuZGF0ZS5lbnRyaWVzLmZpbmQoZSA9PiBlID09PSBlbnRyeS5lbnRyeSkpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5lbnRyaWVzID0gZGF0ZUNvbnRhaW5lci5lbnRyaWVzLmZpbHRlcihlbnRyeSA9PiAhcmVtb3ZlZEVudHJpZXMuaW5jbHVkZXMoZW50cnkpKTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZWRFbnRyaWVzLmZvckVhY2goZSA9PiBlLnBhcmVudC5yZW1vdmUoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGVDb250YWluZXIuc3VtSG91cnMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VtID0gTnVtYmVycy5zdW0oZGF0YS5kYXRlLmVudHJpZXMubWFwKGUgPT4gZS5sZW5ndGhIb3VycykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3VtSG91cnMuaW5uZXJUZXh0ID0gYCR7TnVtYmVycy5yb3VuZChzdW0sIDIpfSBob3VyJHtzdW0gPT09IDEgPyBcIlwiIDogXCJzXCJ9YDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5kaXNhYmxlZCA9IGRhdGEuZGF0ZS5mYXZvcml0ZWQ7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInRsLWZhdm9yaXRlXCIpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJzdGFyXCIsIGRhdGEuZGF0ZS5mYXZvcml0ZWQpKTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGUuZmF2b3JpdGVkKSBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uY2xhc3NMaXN0LmFkZChcInRsLWZhdm9yaXRlXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkYXRlQ29udGFpbmVyLmVudHJpZXMubGVuZ3RoID4gMCB8fCBkYXRlQ29udGFpbmVyLmRhdGUuZmF2b3JpdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24uY2xhc3NMaXN0LmFkZChcInRsLWhpZGUtZmF2b3JpdGUtYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInRsLWhpZGUtZmF2b3JpdGUtYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCB3ZWVrU3VtID0gdGhpcy53ZWVrU3Vtcy5maW5kKHcgPT4gdy5kYXRlcy5zb21lKGQgPT4gZC5kYXRlID09PSBkYXRhLmRhdGUpKTtcclxuICAgICAgICAgICAgaWYgKHdlZWtTdW0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN1bSA9IE51bWJlcnMuc3VtKHdlZWtTdW0uZGF0ZXMubWFwKGQgPT4gTnVtYmVycy5zdW0oZC5lbnRyaWVzLm1hcChlID0+IGUuZW50cnkubGVuZ3RoSG91cnMpKSkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF5cyA9IHdlZWtTdW0uZGF0ZXMuZmlsdGVyKGQgPT4gIWQuZGF0ZS53ZWVrZW5kKS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbEhvdXJzID0gZGF0YS5zaGVldC5ob3Vyc1BlckRheSAqIGRheXM7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB3ZWVrTnVtYmVyID0gRGF0ZXMuZ2V0V2Vla051bWJlckZyb21EYXRlKHdlZWtTdW0uZGF0ZXNbMF0uZGF0ZS5kYXRlKTtcclxuICAgICAgICAgICAgICAgIHdlZWtTdW0uZWxlbWVudC5pbm5lckhUTUwgPSBgPGI+V2VlayAke3dlZWtOdW1iZXJ9PC9iPjogJHtOdW1iZXJzLnJvdW5kKHN1bSwgMil9IC8gJHtOdW1iZXJzLnJvdW5kKHRvdGFsSG91cnMsIDIpfSBob3Vyc2A7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51cGRhdGVCYWxhbmNlKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHVwZGF0ZVJlYXNvbnNEcm9wZG93bihzZWxlY3Q6IEhUTUxTZWxlY3RFbGVtZW50KVxyXG4gICAge1xyXG4gICAgICAgIHNlbGVjdC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIGZvciAoY29uc3QgcmVhc29uIG9mIHRoaXMucmVhc29ucylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IHJlYXNvbi5zZXJ2ZXJJZDtcclxuICAgICAgICAgICAgb3B0aW9uLmlubmVyVGV4dCA9IHJlYXNvbi52YWx1ZTtcclxuICAgICAgICAgICAgc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBvblJlYXNvbnNVcGRhdGVkKHJlYXNvbnM6IEhpQm9iUmVhc29uW10pXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5yZWFzb25zID0gcmVhc29ucztcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIHRoaXMuc2hlZXREYXRlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZGF0ZS5lbnRyaWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVJlYXNvbnNEcm9wZG93bihlbnRyeS5yZWFzb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBvblNhdmVTdGF0dXNVcGRhdGVkKHN0YXR1czogVGltZWxvZ1NhdmVTdGF0dXMpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNhdmVTdGF0dXMpIHJldHVybjtcclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NMaXN0LnJlbW92ZShcInRsLXN1Y2Nlc3NcIik7XHJcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gVGltZWxvZ1NhdmVTdGF0dXMuU2F2ZWQpIHsgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJjbG91ZF9kb25lXCIsIHRydWUpKTsgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZChcIiBTYXZlZFwiKTsgdGhpcy5zYXZlU3RhdHVzLmNsYXNzTGlzdC5hZGQoXCJ0bC1zdWNjZXNzXCIpOyB9XHJcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gVGltZWxvZ1NhdmVTdGF0dXMuV2FpdGluZykgeyB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcInBlbmRpbmdcIikpOyB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kKFwiIFBlbmRpbmcuLi5cIikgfVxyXG4gICAgICAgIGlmIChzdGF0dXMgPT09IFRpbWVsb2dTYXZlU3RhdHVzLlNhdmluZykgeyB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImNsb3VkX3VwbG9hZFwiKSk7IHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmQoXCIgU2F2aW5nLi4uXCIpIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgb25TaGVldFVwZGF0ZWQoc2hlZXQ6IFRpbWVsb2dTaGVldClcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5zaGVldERyb3Bkb3duICYmICF0aGlzLnNoZWV0RHJvcGRvd25PcHRpb25zLmZpbmQocyA9PiBzLnNoZWV0ID09PSBzaGVldCkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSBzaGVldC5pZC50b1N0cmluZygpO1xyXG4gICAgICAgICAgICBvcHRpb24uaW5uZXJUZXh0ID0gYCR7bmV3IERhdGUoc2hlZXQuc3RhcnQpLnRvRGF0ZVN0cmluZygpfSAtICR7bmV3IERhdGUoc2hlZXQuZW5kKS50b0RhdGVTdHJpbmcoKX0ke3NoZWV0LmxvY2tlZCA/IFwiIChsb2NrZWQpXCIgOiBcIlwifWA7XHJcbiAgICAgICAgICAgIHRoaXMuc2hlZXREcm9wZG93bk9wdGlvbnMucHVzaCh7IHNoZWV0OiBzaGVldCwgZWxlbWVudDogb3B0aW9uIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd24uYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTaGVldCA9PT0gc2hlZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaGVldENvbnRhaW5lcikgdGhpcy5zaGVldENvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0RGF0ZXMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy53ZWVrU3VtcyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2Ygc2hlZXQuZGF0ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51cGRhdGVCYWxhbmNlKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uU2hlZXRzVXBkYXRlZChzaGVldHM6IFRpbWVsb2dTaGVldFtdKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLnNoZWV0RHJvcGRvd24pIHRoaXMuc2hlZXREcm9wZG93bi5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuc2hlZXREcm9wZG93bk9wdGlvbnMgPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHNoZWV0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMub25TaGVldFVwZGF0ZWQoc2hlZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9uU2VsZWN0ZWRTaGVldENoYW5nZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25TZWxlY3RlZFNoZWV0Q2hhbmdlKClcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2hlZXREcm9wZG93bikgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0aGlzLnNoZWV0Q29udGFpbmVyKSB0aGlzLnNoZWV0Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5zaGVldERhdGVzID0gW107XHJcbiAgICAgICAgY29uc3QgdmFsID0gdGhpcy5zaGVldERyb3Bkb3duLnZhbHVlO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTaGVldCA9IHRoaXMuc2hlZXREcm9wZG93bk9wdGlvbnMuZmluZChvID0+IG8uZWxlbWVudC52YWx1ZSA9PT0gdmFsKT8uc2hlZXQ7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTaGVldCAmJiB0aGlzLm1vZGVsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5mZXRjaFNoZWV0KHRoaXMuc2VsZWN0ZWRTaGVldC5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgdXBkYXRlQmFsYW5jZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLm1vZGVsIHx8ICF0aGlzLmJhbGFuY2VMYWJlbCB8fCAhdGhpcy5zZWxlY3RlZFNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgYmFsYW5jZSA9IGF3YWl0IHRoaXMubW9kZWwuZ2V0Q3VycmVudEJhbGFuY2VIb3Vycyh0aGlzLnNlbGVjdGVkU2hlZXQpO1xyXG4gICAgICAgIGNvbnN0IG1vbnRoQmFsYW5jZSA9IE51bWJlcnMucm91bmQoYmFsYW5jZS5zaGVldHNbdGhpcy5zZWxlY3RlZFNoZWV0LmlkLnRvU3RyaW5nKCldID8/IDAsIDIpO1xyXG4gICAgICAgIGNvbnN0IHRvdGFsQmFsYW5jZSA9IE51bWJlcnMucm91bmQoYmFsYW5jZS5iYWxhbmNlLCAyKTtcclxuICAgICAgICB0aGlzLmJhbGFuY2VMYWJlbC5pbm5lclRleHQgPSBgRmxleDogJHt0b3RhbEJhbGFuY2V9IGhvdXIke3RvdGFsQmFsYW5jZSAhPSAxID8gXCJzXCIgOiBcIlwifSAoY3VycmVudCBtb250aDogJHttb250aEJhbGFuY2V9IGhvdXIke21vbnRoQmFsYW5jZSAhPSAxID8gXCJzXCIgOiBcIlwifSlgO1xyXG5cclxuICAgICAgICBjb25zdCBmYXZvcml0ZSA9IHRoaXMubW9kZWwuZ2V0RmF2b3JpdGVkRGF0ZSgpO1xyXG4gICAgICAgIGlmIChmYXZvcml0ZSkgdGhpcy5zaGVldENvbnRhaW5lcj8uY2xhc3NMaXN0LmFkZChcInRsLWhhcy1mYXZvcml0ZVwiKTtcclxuICAgICAgICBlbHNlIHRoaXMuc2hlZXRDb250YWluZXI/LmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1oYXMtZmF2b3JpdGVcIik7XHJcbiAgICB9XHJcblxyXG59IiwiZXhwb3J0IGNvbnN0IFRpbWVsb2dDc3MgPSBgXHJcbi50bC10b2dnbGUtYnRuXHJcbntcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIGJhY2tncm91bmQ6IG5vbmU7XHJcbiAgICBmb250LXNpemU6IDJlbTtcclxufVxyXG4udGwtY2xvc2UtYnRuXHJcbntcclxuICAgIGZvbnQtc2l6ZTogMmVtO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgcmlnaHQ6IDVweDtcclxufVxyXG4udGwtdWlcclxue1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgei1pbmRleDogMTAwMDtcclxuICAgIGluc2V0OiAwcHg7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIG92ZXJmbG93LXk6IHNjcm9sbDtcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbn0gICAgICAgIFxyXG4udGwtZGF0ZVxyXG57XHJcbiAgICBtYXJnaW4tdG9wOiAxMHB4O1xyXG4gICAgcGFkZGluZzogMTBweDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkIGdyYXk7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbn1cclxuLnRsLXNhdmUtc3RhdHVzLCAudGwtYWRkLWVudHJ5LWJ0blxyXG57XHJcbiAgICBtYXJnaW4tbGVmdDogMTBweDtcclxufVxyXG4udGwtZW50cnlcclxue1xyXG4gICAgbWFyZ2luLXRvcDogNXB4O1xyXG59XHJcbi50bC1lbnRyeSA+ICpcclxue1xyXG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcclxufVxyXG4udGwtZW50cnkgPiBpbnB1dFt0eXBlPW51bWJlcl1cclxue1xyXG4gICAgd2lkdGg6IDUwcHg7XHJcbn1cclxuLnRsLWVudHJ5ID4gaW5wdXRbdHlwZT10aW1lXVxyXG57XHJcbiAgICB3aWR0aDogNzVweDtcclxufVxyXG4udGwtc2F2ZS1zdGF0dXNcclxue1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuLnRsLXNoZWV0LXNlbGVjdFxyXG57XHJcbiAgICBtYXJnaW4tbGVmdDogNXB4O1xyXG59XHJcbi50bC1kYXRlLWxhYmVsXHJcbntcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcbi50bC1kYXRlLWxhYmVsLnRsLWRhdGUtbGFiZWwtd2Vla2VuZFxyXG57XHJcbiAgICBmb250LXdlaWdodDogaW5pdGlhbDtcclxuICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcclxuICAgIGNvbG9yOiBncmF5O1xyXG59XHJcbi50bC1lbnRyeS1yZWFzb24gXHJcbntcclxuICAgIHBhZGRpbmc6IDNweDtcclxufVxyXG4udGwtcmVtb3ZlLWVudHJ5LWJ0blxyXG57XHJcbiAgICBmbG9hdDogcmlnaHQ7XHJcbn1cclxuLnRsLXdlZWstc2VwZXJhdG9yXHJcbntcclxuICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCBncmF5O1xyXG4gICAgbWFyZ2luLXRvcDogMjVweDtcclxuICAgIG1hcmdpbi1ib3R0b206IDI1cHg7XHJcbn1cclxuLnRsLWJhbGFuY2UtbGFiZWxcclxue1xyXG4gICAgbWFyZ2luOiA1cHg7XHJcbn1cclxuLnRsLXVpLWlubmVyXHJcbntcclxuICAgIGRpc3BsYXk6IHRhYmxlO1xyXG4gICAgbWFyZ2luLWxlZnQ6IGF1dG87XHJcbiAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XHJcbn1cclxuLnRsLXVpLWlubmVyLCAudGwtd2Vlay1zZXBlcmF0b3IsIC50bC1kYXRlXHJcbntcclxuICAgIG1pbi13aWR0aDogNjUwcHg7XHJcbn1cclxuLnRsLWVudHJ5LWNvbW1lbnQge1xyXG4gICAgbWFyZ2luLXRvcDogNXB4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTVweDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG4udGwtaGFzLWNvbW1lbnQgLnRsLWVudHJ5LWNvbW1lbnRcclxue1xyXG4gICAgZGlzcGxheTogYmxvY2s7XHJcbn1cclxuLnRsLXN1Y2Nlc3Ncclxue1xyXG4gICAgY29sb3I6ICMwMkI4NzU7XHJcbn1cclxuLnRsLXdhcm5pbmdcclxue1xyXG4gICAgY29sb3I6ICNGMEFGNTI7XHJcbn1cclxuLnRsLWRhbmdlclxyXG57XHJcbiAgICBjb2xvcjogI0RBNTY1MjtcclxufVxyXG4udGwtc3VtLWhvdXJzXHJcbntcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIG1hcmdpbi10b3A6IC0yM3B4O1xyXG59XHJcbi50bC13ZWVrLXN1bVxyXG57XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBtYXJnaW4tdG9wOiAtNTdweDtcclxuICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xyXG59XHJcbi50bC1zdGFyLWJ1dHRvblxyXG57XHJcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgbWFyZ2luOiAwO1xyXG4gICAgcGFkZGluZzogMDtcclxufVxyXG4udGwtc3Rhci1idXR0b24udGwtZmF2b3JpdGVcclxue1xyXG4gICAgY29sb3I6ICNmMWEwMGI7XHJcbiAgICBvcGFjaXR5OiAxO1xyXG59XHJcbi50bC1wYXN0ZS1idG4ge1xyXG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuLnRsLWhhcy1mYXZvcml0ZSAudGwtcGFzdGUtYnRuOm5vdCgudGwtaGlkZS1mYXZvcml0ZS1idXR0b24pXHJcbntcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxufVxyXG4udGwtc2hvdy1vbi1ob3ZlclxyXG57XHJcbiAgICBvcGFjaXR5OiAwO1xyXG59XHJcbi50bC1kYXRlOmhvdmVyIC50bC1zaG93LW9uLWhvdmVyXHJcbntcclxuICAgIG9wYWNpdHk6IDE7XHJcbn1cclxuYDsiLCJleHBvcnQgY29uc3QgUmVhc29uRW5oYW5jZW1lbnRDc3MgPSBgXHJcbi5yZS1sYWJlbFxyXG57XHJcbiAgICBmb250LXNpemU6IDEuNWVtO1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxufVxyXG4ucmUtcmVhc29uLXNlbGVjdFxyXG57XHJcbiAgICBwYWRkaW5nOiA1cHg7XHJcbn1cclxuLnJlLXJlYXNvbi11aVxyXG57XHJcbiAgICB6LWluZGV4OiAyMDAwO1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgaW5zZXQ6IDA7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDAuNzUpO1xyXG4gICAgcGFkZGluZy10b3A6IDQ1dmg7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG4ucmUtYnRuXHJcbntcclxuICAgIHBhZGRpbmc6IDAgdmFyKC0tYnV0dG9uLXBhZGRpbmcteCwgMTVweCk7XHJcbiAgICBtaW4td2lkdGg6IDgwcHg7XHJcbiAgICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1zaXplLCAzMHB4KTtcclxuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgICBmb250LXNpemU6IHZhcigtLWJ1dHRvbi1mb250LXNpemUsIDEycHgpO1xyXG4gICAgZm9udC1mYW1pbHk6IHZhcigtLWJvZHktZm9udC1mYW1pbHkpO1xyXG4gICAgYm9yZGVyOiAwO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgbWFyZ2luOiA1cHg7XHJcbn1cclxuLnJlLWJ0bi5yZS1wcmltYXJ5XHJcbntcclxuICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5LWJnLXRleHQtY29sb3IsIHdoaXRlKTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktNjAwKTtcclxufVxyXG4ucmUtYnRuLnJlLXNlY29uZGFyeVxyXG57XHJcbiAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LWJnLXRleHQtY29sb3IsICM1MzUzNTMpO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2Vjb25kYXJ5LTYwMCk7XHJcbn1cclxuLnJlLWJsdXJcclxue1xyXG4gICAgZmlsdGVyOiBibHVyKDJweCk7XHJcbn1cclxuLnJlLXN1Ym1pdHRpbmcgLnJlLWJ0blxyXG57XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcbi5yZS1zdWJtaXR0aW5nLXRleHRcclxue1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxuICAgIGZvbnQtc2l6ZTogMS41ZW07XHJcbn1cclxuLnJlLXN1Ym1pdHRpbmcgLnJlLXN1Ym1pdHRpbmctdGV4dFxyXG57XHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxufVxyXG5gOyJdLCJuYW1lcyI6WyJBcGkiLCJzdGF0aWMiLCJtZXRob2QiLCJ1cmwiLCJib2R5IiwiUHJvbWlzZSIsInJlc29sdmUiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInJlc3VsdCIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsInN0YXR1cyIsImFsZXJ0IiwiY29uc29sZSIsImxvZyIsInNlbmQiLCJzdHJpbmdpZnkiLCJEYXRlcyIsInN0ciIsInNwbGl0IiwibGVuZ3RoIiwicHVzaCIsIkRhdGUiLCJqb2luIiwiZ2V0VGltZSIsInRpbWUiLCJpbmNsdWRlVGltZXN0YW1wIiwiZGF0ZSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJ0b1N0cmluZyIsInBhZFN0YXJ0IiwiZ2V0RGF0ZSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImhvdXJzIiwiaG91ciIsIk1hdGgiLCJmbG9vciIsIm1pbnV0ZSIsInJvdW5kIiwic2V0SG91cnMiLCJzZXREYXRlIiwiZ2V0RGF5Iiwid2VlazEiLCJwYXJzZUludCIsIkhpQm9iIiwiZW50cmllcyIsInNvbWUiLCJlIiwicmVhc29uSWQiLCJkYXRhIiwibWFwIiwic3RhcnQiLCJmb3JtYXQiLCJzdGFydEhvdXIiLCJlbmQiLCJsZW5ndGhIb3VycyIsInVuZGVmaW5lZCIsInJlYXNvbiIsImNvbW1lbnQiLCJkYXRlU3RyIiwidXNlcklkIiwidGhpcyIsImdldFVzZXJJZCIsIm1ldGFkYXRhIiwidGltZUxvZ0VudHJ5UmVhc29uIiwidmFsdWVzIiwidiIsImlkIiwic2VydmVySWQiLCJuYW1lIiwidmFsdWUiLCJzaGVldCIsInVzZXJJbmZvIiwiV2FpdCIsIm1zIiwid2luZG93Iiwic2V0VGltZW91dCIsImRlbGVnYXRlIiwiaGFuZGxlIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiUmVhc29uRW5oYW5jZW1lbnRNb2RlIiwiVGltZWxvZ1NhdmVTdGF0dXMiLCJNYXRlcmlhbEljb24iLCJsaW5rIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaHJlZiIsInJlbCIsImhlYWQiLCJhcHBlbmRDaGlsZCIsImljb24iLCJmaWxsIiwic3BhbiIsImNsYXNzTmFtZSIsImlubmVyVGV4dCIsInN0eWxlIiwidmVydGljYWxBbGlnbiIsImZvbnRTaXplIiwiZm9udFZhcmlhdGlvblNldHRpbmdzIiwiTnVtYmVycyIsIm51bSIsImRlY2ltYWxzIiwiY2VpbCIsImFyciIsInZhbCIsImkiLCJFdmVudEhhbmRsZXIiLCJoYW5kbGVycyIsIm9uIiwiaGFuZGxlciIsImNvbnRleHQiLCJvZmYiLCJmaWx0ZXIiLCJoIiwiZmlyZSIsImZvckVhY2giLCJjYWxsIiwiVGltZWxvZ01vZGVsIiwic2hlZXRzIiwib25EYXRlVXBkYXRlZCIsIm9uUmVhc29uc1VwZGF0ZWQiLCJvblNoZWV0VXBkYXRlZCIsIm9uU2hlZXRzVXBkYXRlZCIsIm9uU2F2ZVN0YXR1c1VwZGF0ZWQiLCJzYXZlSGFuZGxlIiwic2F2aW5nIiwiY2FsY3VsYXRpbmdGbGV4IiwicmVhc29ucyIsImluaXRpYWxpemUiLCJmZXRjaFNoZWV0cyIsImZldGNoUmVhc29ucyIsIlNhdmVkIiwiYXN5bmMiLCJlbXBsb3llZVNoZWV0cyIsImN5Y2xlU3RhcnREYXRlIiwiY3ljbGVFbmREYXRlIiwibmV3U2hlZXQiLCJkYXRlcyIsImxvY2tlZCIsImhvdXJzUGVyRGF5Iiwic29ydCIsImEiLCJiIiwiZmluZCIsInMiLCJhdHRlbmRhbmNlIiwic3VtbWFyeSIsInBvdGVudGlhbFdvcmtpbmdIb3VycyIsInBvdGVudGlhbFdvcmtpbmdEYXlzIiwiZGlydHkiLCJub3ciLCJ3ZWVrZW5kIiwiZmF2b3JpdGVkIiwiaGFzQ29tbWVudCIsImZhdm9yaXRlIiwiZ2V0RmF2b3JpdGVkRGF0ZSIsImNoYW5nZVN0YXJ0SG91ciIsImluZGV4IiwiZCIsInF1ZXVlU2F2ZSIsImNoYW5nZUxlbmd0aEhvdXJzIiwiY2hhbmdlUmVhc29uIiwiY2hhbmdlQ29tbWVudCIsInRvZ2dsZUNvbW1lbnQiLCJzZXRGYXZvcml0ZWREYXRlIiwib2xkRmF2b3JpdGUiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiZ2V0SXRlbSIsImRlbGV0ZUVudHJ5Iiwic3BsaWNlIiwib3JpZ2luYWxEYXRlIiwib3JpZ2luYWxTaGVldCIsImRhdGVJbmRleCIsImluZGV4T2YiLCJlbnRyeUluZGV4Iiwic2hlZXRJbmRleCIsImZldGNoU2hlZXQiLCJsYXN0IiwiZmluZExhc3RFbnRyeSIsImluY2x1ZGVzIiwiZW50cnkiLCJjbGVhclRpbWVvdXQiLCJzYXZlIiwiV2FpdGluZyIsInVudGlsIiwiU2F2aW5nIiwic3VibWl0IiwiYmFsYW5jZSIsImNhY2hlS2V5Iiwic2hlZXRCYWxhbmNlIiwicGFyc2VGbG9hdCIsInBvdGVudGlhbEhvdXJzIiwid29ya2VkSG91cnMiLCJzdW0iLCJzaGVldERyb3Bkb3duT3B0aW9ucyIsInNoZWV0RGF0ZXMiLCJ3ZWVrU3VtcyIsInRpbWVsb2ciLCJhZGRCdXR0b24iLCJwYXJlbnQiLCJxdWVyeVNlbGVjdG9yIiwidG9nZ2xlQnV0dG9uIiwiZ2V0IiwidGl0bGUiLCJvbmNsaWNrIiwidG9nZ2xlVmlzaWJsZSIsImNyZWF0ZVVJIiwiY3JlYXRlTW9kZWwiLCJ0aW1lbG9nVUlPdXRlciIsImRpc3BsYXkiLCJvdmVyZmxvdyIsInNoZWV0Q29udGFpbmVyIiwiaW5uZXJIVE1MIiwibW9kZWwiLCJhcHBlbmQiLCJ0aW1lbG9nVUlJbm5lciIsImNsb3NlQnV0dG9uIiwic2hlZXREcm9wZG93bkxhYmVsIiwic2hlZXREcm9wZG93biIsIm9uY2hhbmdlIiwib25TZWxlY3RlZFNoZWV0Q2hhbmdlIiwic2F2ZVN0YXR1cyIsImJhbGFuY2VMYWJlbCIsImdldERhdGVDb250YWluZXIiLCJzZWxlY3RlZFNoZWV0IiwiZGF0ZUNvbnRhaW5lciIsInN0YXJCdXR0b24iLCJwYXN0ZUJ1dHRvbiIsIndlZWtTZXBlcmF0b3IiLCJ0b0RhdGVTdHJpbmciLCJjbGFzc0xpc3QiLCJhZGQiLCJuZXdFbnRyeSIsInBhc3RlRnJvbVN0YXJyZWQiLCJhZGRUb1dlZWtTdW0iLCJnZXRFbnRyeUNvbnRhaW5lciIsImVudHJ5Q29udGFpbmVyIiwicCIsImVuZEhvdXIiLCJjb21tZW50QnV0dG9uIiwidHlwZSIsImRpc2FibGVkIiwicGFyc2VUaW1lVG9ob3VycyIsImVuZExhYmVsIiwidXBkYXRlUmVhc29uc0Ryb3Bkb3duIiwic3VtSG91cnMiLCJzdGVwIiwiZHVyYXRpb25MYWJlbCIsInJlbW92ZSIsInBsYWNlaG9sZGVyIiwid2Vla1N1bSIsImVsZW1lbnQiLCJtYXJnaW5Ub3AiLCJmb3JtYXRIb3VyIiwicmVtb3ZlZEVudHJpZXMiLCJ3IiwiZGF5cyIsInRvdGFsSG91cnMiLCJ3ZWVrTnVtYmVyIiwiZ2V0V2Vla051bWJlckZyb21EYXRlIiwidXBkYXRlQmFsYW5jZSIsInNlbGVjdCIsIm9wdGlvbiIsIm8iLCJnZXRDdXJyZW50QmFsYW5jZUhvdXJzIiwibW9udGhCYWxhbmNlIiwidG90YWxCYWxhbmNlIiwic3VibWl0dGluZyIsImNsb2NrSW5CdXR0b25GaW5kZXIiLCJyZWFzb25FbmhhbmNlbWVudFVJIiwibGFiZWwiLCJyZWFzb25TZWxlY3QiLCJzYXZlRGVmYXVsdFJlYXNvblZhbHVlIiwiY2FuY2VsQnV0dG9uIiwiY2FuY2VsIiwic3VibWl0QnV0dG9uIiwic3VibWl0dGluZ1RleHQiLCJmaW5kVW5lbmhhbmNlZEJ1dHRvbnMiLCJlbmhhbmNlQ2xvY2tJbkJ1dHRvbiIsIkZpeExhdGVzdCIsIkZpeEFsbCIsImFwcFJvb3QiLCJzZWxlY3RvciIsInF1ZXJ5IiwicXVlcnlTZWxlY3RvckFsbCIsImNvbnRhaW5zIiwiYnV0dG9uIiwibW9kZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzaG93UmVhc29uRml4ZXIiLCJsb2FkRGVmYXVsdFJlYXNvblZhbHVlIiwic2V0VUlWaXNpYmxlIiwiZml4QWxsIiwiZml4TGF0ZXN0IiwibGF0ZXN0Il0sInNvdXJjZVJvb3QiOiIifQ==