// ==UserScript==
// @name        HiBob Time Utilities
// @version     1.1.13
// @author      Funday Factory
// @description Utilities to make it easier to log time in HiBob
// @match       https://app.hibob.com/*
// @namespace   http://tampermonkey.net/
// @icon        https://www.google.com/s2/favicons?sz=64&domain=hibob.com
// @grant       none
// ==/UserScript==

(()=>{"use strict";class e{static parse(e){if(!e)return null;const t=e.split("T");return t.length<2&&t.push("00:00"),new Date(t.join("T")).getTime()}static format(e,t){if(!e)return"";const n=new Date(e);return`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}-${n.getDate().toString().padStart(2,"0")}${t?`T${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`:""}`}static formatHour(e){const t=Math.floor(e%24),n=Math.round(60*(e-t));return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}static getWeekNumberFromDate(e){var t=new Date(e);t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)}static parseTimeTohours(e){const t=e.split(":");return parseInt(t[0])+parseInt(t[1])/60}}class t{constructor(){this.handlers=[]}on(e,t){this.handlers.push({handler:e,context:t})}off(e,t){this.handlers=this.handlers.filter((n=>n.handler!==e||n.context!==t))}fire(e){this.handlers.forEach((t=>t.handler.call(t.context,e)))}}class n{static round(e,t){return Math.round(e*10**t)/10**t}static floor(e,t){return Math.floor(e*10**t)/10**t}static ceil(e,t){return Math.ceil(e*10**t)/10**t}static sum(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}}class a{static scale(e){return e*this.scaling.scale}static unscale(e){return e/this.scaling.scale}static getUnitName(e=null){return null===e?this.scaling.unitGeneral:1===e?this.scaling.unitSingular:this.scaling.unitPlural}static format(e){return`${n.round(this.scale(e),2)} ${this.getUnitName(e)}`}}a.scaling={unitGeneral:"hour(s)",unitPlural:"hours",unitSingular:"hour",scale:1};class s{static initialize(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200",e.rel="stylesheet",document.head.appendChild(e)}static get(e,t=!1){const n=document.createElement("span");return n.className="material-symbols-outlined",n.innerText=e,n.style.verticalAlign="middle",n.style.fontSize="1.5em",n.style.fontVariationSettings="'FILL' "+(t?1:0),n}}class o{static for(e){return new Promise((t=>{window.setTimeout((()=>t()),e)}))}static until(e){return new Promise((t=>{const n=window.setInterval((()=>{e()&&(t(),window.clearInterval(n))}),1)}))}}class i{static xhr(e,t,n){return new Promise((a=>{let s=new XMLHttpRequest;s.open(e,t),s.setRequestHeader("Accept","application/json"),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(4===s.readyState){let e;try{e=JSON.parse(s.responseText)}catch(t){e={result:s.responseText}}if(200!==s.status){if(e.hasOwnProperty("error")){const t=e.hasOwnProperty("key")?e.key:s.status.toString();alert(`HiBob Utils: Error ${t} - ${e.error}`)}else alert(`HiBob Utils: Error ${s.status} - check the developer console for more information.`);console.log(`HiBob Utils: Error ${s.status}.`),console.log(s)}a({status:s.status,body:e})}},s.send(JSON.stringify(n))}))}}class r{static async submit(t,n){if(n.some((e=>!e.reasonId)))return console.log("WARNING: SOME ENTRIES HAVE NO REASON SET - NOT SUBMITTING!!",t,n),!1;const a=n.map((n=>{var a;return{start:e.format(t+3600*n.startHour*1e3,!0),end:"number"==typeof n.lengthHours?e.format(t+3600*(n.startHour+n.lengthHours)*1e3,!0):void 0,reason:n.reasonId,comment:null!==(a=n.comment)&&void 0!==a?a:void 0}})),s=e.format(t,!1),o=await this.getUserId();return 200===(await i.xhr("POST",`https://app.hibob.com/api/attendance/employees/${o}/attendance/entries?forDate=${s}`,a)).status}static async timelogReasons(){return(await this.metadata()).timeLogEntryReason.values.map((e=>({id:e.serverId,name:e.value})))}static async attendance(e){return(await i.xhr("GET",`https://app.hibob.com/api/employees/attendance/my/sheets/${e}`,{})).body}static async sheets(){const e=await this.getUserId();return(await i.xhr("GET",`https://app.hibob.com/api/employees/${e}/timelog/attendance/sheets`,{})).body}static async metadata(){return(await i.xhr("GET","https://app.hibob.com/api/company/metadata/lists/?includeArchived=true",{})).body}static async getUserId(){var e;return"string"!=typeof this.userId&&await this.userInfo(),null!==(e=this.userId)&&void 0!==e?e:""}static async userInfo(){const e=await i.xhr("GET","https://app.hibob.com/api/user",{});return this.userId=e.body.id,e.body}}var l,d;!function(e){e[e.Waiting=0]="Waiting",e[e.Saving=1]="Saving",e[e.Saved=2]="Saved",e[e.Error=3]="Error"}(l||(l={}));class c{constructor(){this.sheets=[],this.onDateUpdated=new t,this.onReasonsUpdated=new t,this.onSheetUpdated=new t,this.onSheetsUpdated=new t,this.onSaveStatusUpdated=new t,this.saveHandle=-1,this.saving=!1,this.calculatingFlex=!1,this.fetchingSheets=!1,this.reasons=[]}async initialize(){await this.fetchSheets(),await this.fetchReasons(),this.onSaveStatusUpdated.fire(l.Saved)}async fetchSheets(){var t,n;await o.until((()=>!this.fetchingSheets)),this.fetchingSheets=!0,this.sheets=[];const a=await r.sheets();for(const s of a.employeeSheets){const a=null!==(t=e.parse(s.cycleStartDate))&&void 0!==t?t:0,o=null!==(n=e.parse(s.cycleEndDate))&&void 0!==n?n:0,i={id:s.id,status:s.status,start:a,end:o,dates:[],locked:s.locked,hoursPerDay:0};this.sheets.push(i)}this.sheets.sort(((e,t)=>t.start-e.start)),this.onSheetsUpdated.fire(this.sheets),this.fetchingSheets=!1}async fetchReasons(){this.reasons=(await r.metadata()).timeLogEntryReason.values,this.onReasonsUpdated.fire(this.reasons)}async fetchSheet(t){var a;const s=this.sheets.find((e=>e.id===t));if(!s)return;const o=await r.attendance(t);s.hoursPerDay=o.summary.potentialWorkingHours/o.summary.potentialWorkingDays,s.dates=[];for(const t of o.attendance){const o={dirty:!1,date:null!==(a=e.parse(t.date))&&void 0!==a?a:Date.now(),nonWorkingDay:"WeekendEvent"===t.status||"ApproveTimeoffRequest"===t.status,hoursToWork:s.hoursPerDay,favorited:!1,dateDescription:t.note.description,entries:t.entries.map((a=>{var s,o,i,r,l;return{startHour:n.floor(((null!==(s=e.parse(a.start))&&void 0!==s?s:Date.now())-(null!==(o=e.parse(t.date))&&void 0!==o?o:Date.now()))/36e5,2),lengthHours:n.ceil(((null!==(i=e.parse(a.end))&&void 0!==i?i:Date.now())-(null!==(r=e.parse(a.start))&&void 0!==r?r:Date.now()))/36e5,2),reasonId:a.reason,comment:null!==(l=a.comment)&&void 0!==l?l:null,hasComment:!!a.comment}})).sort(((e,t)=>e.startHour-t.startHour))};"number"==typeof t.paidTimeoffSeconds&&t.paidTimeoffSeconds>0?o.hoursToWork-=t.paidTimeoffSeconds/3600:o.nonWorkingDay&&(o.hoursToWork=0),s.dates.push(o)}s.dates.sort(((e,t)=>t.date-e.date));const i=await this.getFavoritedDate();i&&i.sheet===s&&(i.date.favorited=!0),this.onSheetUpdated.fire(s)}changeStartHour(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].startHour=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}changeLengthHours(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].lengthHours=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}changeReason(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].reasonId=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}changeComment(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].comment=n,e.entries[t].hasComment=!0,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}toggleComment(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries[t].hasComment=!e.entries[t].hasComment,e.entries[t].comment=e.entries[t].hasComment?"":null,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}async setFavoritedDate(t){const n=this.sheets.find((e=>e.dates.some((e=>e===t))));if(!n)return;const a=await this.getFavoritedDate();a&&(a.date.favorited=!1,this.onDateUpdated.fire(a)),t.favorited=!0,this.onDateUpdated.fire({sheet:n,date:t}),window.localStorage.setItem("tl_favorite",JSON.stringify({date:e.format(t.date,!1)}))}async getFavoritedDate(){const t=window.localStorage.getItem("tl_favorite");if(!t)return null;const n=JSON.parse(t),a=e.parse(n.date);if("number"==typeof a){const e=this.sheets.find((e=>e.start<=a&&e.end>=a));if(e){e.dates.length<1&&await this.fetchSheet(e.id);const t=e.dates.find((e=>e.date===a));if(t)return{sheet:e,date:t}}}return null}deleteEntry(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries.splice(t,1),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}async findLastEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;let n=t.dates.indexOf(e),a=-1;for(let e=this.sheets.indexOf(t);e<this.sheets.length;e++){const t=this.sheets[e];for(t.dates.length<1&&await this.fetchSheet(t.id);n<t.dates.length;n++){const e=t.dates[n];if(e.entries.length>0)return a<0?e.entries[e.entries.length-1]:e.entries[a];a=0}n=0}}async newEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const a=await this.findLastEntry(e);let s=8.5,o=n.round(t.hoursPerDay,2),i="";a&&(e.entries.includes(a)&&(s=a.startHour+a.lengthHours,o=1),i=a.reasonId),e.entries.push({startHour:s,lengthHours:o,reasonId:i,comment:null,hasComment:!1}),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}async pasteFromStarred(e){if(e.entries.length>0)return;const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const n=await this.getFavoritedDate();if(n&&n.date!==e){for(const t of n.date.entries)e.entries.push({startHour:t.startHour,lengthHours:t.lengthHours,reasonId:t.reasonId,comment:t.comment,hasComment:t.hasComment});e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}}queueSave(){window.clearTimeout(this.saveHandle),this.saveHandle=window.setTimeout((()=>this.save()),500),this.onSaveStatusUpdated.fire(l.Waiting)}async save(){await o.until((()=>!this.saving)),this.saving=!0,this.onSaveStatusUpdated.fire(l.Saving);const e=o.for(100);let t=!1;for(const e of this.sheets)for(const n of e.dates)n.dirty&&(await r.submit(n.date,n.entries)?n.dirty=!1:t=!0);await e,this.onSaveStatusUpdated.fire(t?l.Error:l.Saved),this.saving=!1}getFlexPolicy(){return{previousDaysIncluded:28,flexWarningThreshold:21}}async clearSheetBalanceCache(){if(!this.sheets)return;const e=await r.getUserId();for(let t=0;t<this.sheets.length;t++){const n=this.sheets[t];if(!n)continue;const a=`tl_cached_hour_balances_${e}_${n.id}`;n.locked&&null!==window.localStorage.getItem(a)&&window.localStorage.removeItem(a)}}async getCachedBalances(){var t;const a={},s=await r.getUserId();for(let o=this.sheets.length-1;o>=0;o--){const i=this.sheets[o];if(!i)continue;let r=[];const l=`tl_cached_hour_balances_${s}_${i.id}`;if(i.locked&&null!==window.localStorage.getItem(l))r=JSON.parse(null!==(t=window.localStorage.getItem(l))&&void 0!==t?t:"[]");else{if(i.dates.length<1&&await this.fetchSheet(i.id),i.dates.some((e=>e.entries.length>0&&e.entries.some((e=>e.lengthHours>0)))))for(const e of i.dates){const t=n.sum(e.entries.map((e=>e.lengthHours)))-e.hoursToWork;r.push({date:e.date,balance:t})}i.locked&&i.id>0&&window.localStorage.setItem(l,JSON.stringify(r))}a[i.id.toString()]=r.map((t=>({date:t.date,dateString:e.format(t.date,!1),realBalance:t.balance,reallocatedBalance:n.round(t.balance,3)}))).sort(((e,t)=>e.date-t.date))}return a}async getFlexStatus(){var t,a,s;const i=this.getFlexPolicy(),r=null!==(t=e.parse(e.format(Date.now(),!1)))&&void 0!==t?t:0,l=null!==(a=e.parse(e.format(r-864e5*(i.previousDaysIncluded-1),!1)))&&void 0!==a?a:0,d=null!==(s=e.parse(e.format(r-864e5*(i.flexWarningThreshold-1),!1)))&&void 0!==s?s:0,c=[];let h=0;if(this.sheets){await o.until((()=>!this.calculatingFlex)),this.calculatingFlex=!0;const e=await this.getCachedBalances();for(let t=this.sheets.length-1;t>=0;t--){const n=e[this.sheets[t].id];n&&c.push(...n)}for(let e=0;e<c.length;e++){const t=c[e];for(let a=0;a<e&&0!==t.reallocatedBalance;a++){const e=c[a],s=Math.min(Math.abs(t.reallocatedBalance),Math.abs(e.reallocatedBalance));t.reallocatedBalance<0&&e.reallocatedBalance>0?(e.reallocatedBalance-=s,t.reallocatedBalance+=s):t.reallocatedBalance>0&&e.reallocatedBalance<0&&(e.reallocatedBalance+=s,t.reallocatedBalance-=s),e.reallocatedBalance=n.round(e.reallocatedBalance,3)}t.reallocatedBalance=n.round(t.reallocatedBalance,3)}h=n.sum(c.map((e=>n.round(e.reallocatedBalance,3)))),this.calculatingFlex=!1}return{balance:h,unbalancedDates:c.filter((e=>0!==e.reallocatedBalance)),overdueDates:c.filter((e=>0!==e.reallocatedBalance&&e.date<=l)),warningDates:c.filter((e=>0!==e.reallocatedBalance&&e.date<=d&&e.date>l))}}}class h{}h.buttons=[{className:"tl-settings-reload-locked-sheets-button",icon:"cached",text:"Reload Locked Sheets",title:"Recalculates flex balance for all locked sheets.",onClick:e=>{var t;return null===(t=e.model)||void 0===t?void 0:t.clearSheetBalanceCache().then((()=>e.updateBalance()))}}];class u{constructor(){this.sheetDropdownOptions=[],this.sheetDates=[],this.weekSums=[],this.reasons=[],this.onDarkModeChange=new t,window.timelog=this,this.addButton()}async addButton(){for(;;){if(document.querySelector("div.app-content nav")){this.toggleButton=document.createElement("button"),this.toggleButton.className="tl-toggle-btn",this.toggleButton.appendChild(s.get("sentiment_very_satisfied")),this.toggleButton.title="HiBob Utilities",this.toggleButton.onclick=()=>this.toggleVisible(),this.toggleButton.style.position="fixed",this.toggleButton.style.zIndex="10",this.toggleButton.style.backgroundColor="white",this.toggleButton.style.top="0",this.toggleButton.style.right="0",document.body.appendChild(this.toggleButton),this.createUI(),await this.createModel(),"#tl-ui"===location.hash&&this.toggleVisible(),this.onDarkModeChange.fire(this.isDarkMode());break}await o.for(1)}}toggleVisible(){var e;this.timelogUIOuter&&("none"===this.timelogUIOuter.style.display?(this.timelogUIOuter.style.display="block",location.hash="#tl-ui",document.body.style.overflow="hidden",this.sheetContainer&&(this.sheetContainer.innerHTML=""),null===(e=this.model)||void 0===e||e.fetchSheets(),u.onShow.fire(this)):(this.timelogUIOuter.style.display="none",location.hash="",document.body.style.overflow="initial"))}isDarkMode(){return"true"===localStorage.getItem("tl_dark_mode")}toggleDarkMode(){this.isDarkMode()?localStorage.setItem("tl_dark_mode","false"):localStorage.setItem("tl_dark_mode","true"),this.onDarkModeChange.fire(this.isDarkMode())}createUI(){const e=document.createElement("style");e.innerHTML="\n.tl-toggle-btn\n{\n    border: none;\n    background: none;\n    font-size: 2em;\n}\n.tl-close-btn\n{\n    font-size: 2em;\n    position: absolute;\n    right: 5px;\n}\n.tl-ui\n{\n    position: fixed;\n    z-index: 1000;\n    inset: 0px;\n    background-color: white;\n    overflow-y: scroll;\n    padding: 10px;\n}        \n.tl-date\n{\n    margin-top: 10px;\n    padding: 10px;\n    border: 1px solid gray;\n    border-radius: 5px;\n}\n.tl-save-status, .tl-add-entry-btn\n{\n    margin-left: 10px;\n}\n.tl-entry\n{\n    margin-top: 5px;\n}\n.tl-entry > *\n{\n    margin-left: 5px;\n}\n.tl-entry > input[type=number]\n{\n    width: 50px;\n}\n.tl-entry > input[type=time]\n{\n    width: 75px;\n}\n.tl-save-status\n{\n    font-weight: bold;\n}\n.tl-sheet-select\n{\n    margin-left: 5px;\n}\n.tl-date-label\n{\n    font-weight: bold;\n}\n.tl-date-label.tl-date-label-weekend\n{\n    font-weight: initial;\n    font-style: italic;\n    color: gray;\n}\n.tl-entry-reason \n{\n    padding: 3px;\n}\n.tl-remove-entry-btn\n{\n    float: right;\n}\n.tl-week-seperator\n{\n    margin-top: 57px;\n}\n.tl-balance-label\n{\n    margin: 5px;\n    display: inline-block;\n}\n.tl-balance-help\n{\n    display: inline-block;\n    cursor: help;\n}\n\n.tl-ui-inner\n{\n    display: table;\n    margin-left: auto;\n    margin-right: auto;\n}\n.tl-ui-inner, .tl-week-seperator, .tl-date\n{\n    min-width: 650px;\n}\n.tl-entry-comment {\n    margin-top: 5px;\n    margin-bottom: 15px;\n    width: 100%;\n    display: none;\n}\n.tl-has-comment .tl-entry-comment\n{\n    display: block;\n}\n.tl-success\n{\n    color: #02B875;\n}\n.tl-warning\n{\n    color: #F0AF52;\n}\n.tl-danger\n{\n    color: #DA5652;\n}\n.tl-sum-hours\n{\n    position: absolute;\n    margin-top: -23px;\n}\n.tl-week-sum\n{\n    position: absolute;\n    margin-top: -57px;\n    text-decoration: underline;\n}\n.tl-ui button.tl-star-button, .tl-ui.tl-dark button.tl-star-button\n{\n    background: none;\n    border: none;\n    margin: 0;\n    padding: 0;\n}\n.tl-ui button.tl-star-button.tl-favorite, .tl-ui.tl-dark button.tl-star-button.tl-favorite\n{\n    color: #f1a00b;\n    opacity: 1;\n}\n.tl-paste-btn {\n    margin-left: 5px;\n    display: none;\n}\n.tl-has-favorite .tl-paste-btn:not(.tl-hide-favorite-button)\n{\n    display: inline-block;\n}\n.tl-show-on-hover\n{\n    opacity: 0;\n}\n.tl-date:hover .tl-show-on-hover\n{\n    opacity: 1;\n}\n.tl-no-reason-warning {\n    margin-left: 180px;\n    position: absolute;\n    margin-top: -22px;\n    font-weight: bold;\n    background-color: white;\n    user-select: none;\n    pointer-events: none;\n}\n.tl-no-reason-warning.tl-has-reason\n{\n    display: none;\n}\n.tl-clickable\n{\n    cursor: pointer;\n}\n.tl-dark-mode-btn {\n    position: fixed;\n    bottom: 5px;\n    right: 20px;\n}\n.tl-ui button\n{\n    background-color: #d9d9d9;\n    border: 1px solid gray;\n    border-radius: 5px;\n}\n.tl-ui button:hover\n{\n    background-color: #efebeb;\n}\n\n.tl-ui.tl-dark\n{\n    background-color: #1E1E1E;\n    color: white;\n}\n.tl-ui.tl-dark select, .tl-ui.tl-dark input {\n    color: white;\n    background-color: #252526;\n    border: 1px gray solid;\n    color-scheme: dark;\n}\n.tl-ui.tl-dark button\n{\n    background-color: #333333;\n    border: 1px solid #282828;\n    color: white;\n}\n.tl-ui.tl-dark button:hover\n{\n    background-color: #525252;\n}\n.tl-ui.tl-dark .tl-no-reason-warning\n{\n    background-color: #252526;\n}\n.tl-weekend-description {\n    color: gray;\n    font-style: italic;\n    float: right;\n    margin-top: 2px;\n    display: inline-block;\n    max-width: 400px;\n    overflow: hidden;\n    max-height: 35px;\n}\n.tl-weekend-description.tl-weekend-description-hidden\n{\n    display: none;\n}\n.tl-version-number {\n    position: fixed;\n    bottom: 5px;\n    left: 5px;\n}\n\n.tl-settings {\n    position: fixed;\n    inset: 0;\n    z-index: 100;\n}\n.tl-settings-back {\n    inset: 0;\n    position: absolute;\n    background-color: black;\n    opacity: 0.5;\n    cursor: pointer;\n}\n\n.tl-settings.tl-settings-hidden {\n    display: none;\n}\n\n.tl-settings-version {\n    margin: 5px 10px;\n    border-bottom: 1px solid gray;\n}\n\n.tl-settings-version:last-child {\n    border-bottom: 0;\n}\n\n.tl-settings-title {\n    font-weight: bold;\n    font-size: 1.25em;\n}\n.tl-settings-inner {\n    position: absolute;\n    background-color: white;\n    height: 70vh;\n    width: 90vw;\n    left: 5vw;\n    top: 15vh;\n    border: 1px solid gray;\n    border-radius: 10px;\n    padding: 10px;\n    overflow: auto;\n}\n.tl-settings-version button\n{\n    margin-left: 5px;\n    margin-bottom: 15px;\n}\n\n.tl-dark .tl-settings-inner\n{\n    background-color: #1a1a1a;\n}\n\n.tl-balance-warning\n{\n    font-size: 0.8em;\n    display: inline-block;\n    text-decoration: underline;\n    cursor: help;\n}\n.tl-hidden\n{\n    display: none;\n}\n\n.tl-no-entries-warning\n{\n    float: right;\n    font-weight: bold;\n}\n\n",document.body.appendChild(e),this.timelogUIOuter=document.createElement("div"),this.timelogUIOuter.className="tl-ui",this.timelogUIOuter.style.display="none",document.body.append(this.timelogUIOuter),this.timelogUIInner=document.createElement("div"),this.timelogUIInner.className="tl-ui-inner",this.timelogUIOuter.append(this.timelogUIInner);const t=document.createElement("button");t.className="tl-close-btn",t.appendChild(s.get("close")),t.onclick=()=>this.toggleVisible(),this.timelogUIInner.appendChild(t),this.darkModeButton=document.createElement("button"),this.darkModeButton.className="tl-dark-mode-btn",this.darkModeButton.onclick=()=>this.toggleDarkMode(),this.timelogUIInner.appendChild(this.darkModeButton),this.onDarkModeChange.on((e=>{var t,n;e?null===(t=this.timelogUIOuter)||void 0===t||t.classList.add("tl-dark"):null===(n=this.timelogUIOuter)||void 0===n||n.classList.remove("tl-dark"),this.darkModeButton&&(this.darkModeButton.innerHTML="",this.darkModeButton.append(e?s.get("light_mode"):s.get("dark_mode")))}),this);const n=this.createSettingsWindow();this.timelogUIInner.appendChild(n);const a=document.createElement("div");a.append(s.get("settings",!0)),a.append(" 1.1.13"),a.className="tl-version-number",a.onclick=()=>n.classList.remove("tl-settings-hidden"),a.style.cursor="pointer",a.style.textDecoration="underline",this.timelogUIInner.appendChild(a);const o=document.createElement("span");o.innerText="Sheet:",this.timelogUIInner.appendChild(o),this.sheetDropdown=document.createElement("select"),this.sheetDropdown.className="tl-sheet-select",this.sheetDropdown.onchange=()=>this.onSelectedSheetChange(),this.timelogUIInner.appendChild(this.sheetDropdown),this.saveStatus=document.createElement("span"),this.saveStatus.className="tl-save-status",this.saveStatus.onclick=()=>this.onSaveStatusClick(),this.timelogUIInner.append(this.saveStatus);const i=document.createElement("div");i.className="tl-balance",this.timelogUIInner.append(i),this.balanceLabel=document.createElement("div"),this.balanceLabel.innerText="Balance: ",this.balanceLabel.className="tl-balance-label",i.append(this.balanceLabel),this.balanceWarning=document.createElement("div"),this.balanceWarning.className="tl-balance-warning tl-warning tl-hidden",i.append(this.balanceWarning),this.sheetContainer=document.createElement("div"),this.sheetContainer.className="tl-sheet",this.timelogUIInner.appendChild(this.sheetContainer)}createSettingsWindow(){const e=document.createElement("div");e.className="tl-settings tl-settings-hidden";const t=document.createElement("div");t.className="tl-settings-back",e.append(t),t.onclick=()=>e.classList.add("tl-settings-hidden");const n=document.createElement("div");n.className="tl-settings-inner",e.append(n);const a=document.createElement("div");a.className="tl-settings-version",n.append(a);for(const e of h.buttons){const t=document.createElement("button");t.className=e.className,t.append(s.get(e.icon)),t.append(e.text),e.title&&(t.style.cursor="help"),t.title=e.title,t.onclick=()=>e.onClick(this),a.appendChild(t)}const o=[{version:"1.1.13 - 06/12/2023",text:["Fixed an issue where the new HiBob layout broke everything. How silly of HiBob."]},{version:"1.1.12 - 31/03/2023",text:["Removed april fools :)"]},{version:"1.1.11 - 21/01/2023",text:["Change expected hours to work on a day to show as a warning on empty days with expected hours."]},{version:"1.1.10 - 20/01/2023",text:["Show expected hours to work on a given day."]},{version:"1.1.9 - 04/11/2022",text:["Fix problem where changing user on HiBob would cause problems due to caching"]},{version:"1.1.8 - 04/11/2022",text:["Fixed issue where you couldn't make an entry have a length of 0 hours","On the warning of flex becoming too old, show how many hours are left to be flexed on that day"]},{version:"1.1.7 - 02/11/2022",text:['Removed the option to "fix" old flex, as this solution would break when switching devices.',"Please talk to HR if you need to clear time logged before october.","To fix old flex hours without taking time off, please talk to HR or Finance about a solution."]},{version:"1.1.6 - 26/10/2022",text:["Holidays are now shown in the alternative timelog UI","Holidays are considered in the flex time calculation."]},{version:"1.1.4 - 03/10/2022",text:["Added a warning when unbalanced flex days are close to expiring.","Added button to cancel old unbalanced flex for extraordinary situations","Added buttons to delete cached data in the settings menu."]},{version:"1.1.3 - 03/10/2022",text:["Fixed how flex hours is calculated.","A warning is shown if you have unbalanced flex days that are older than 28 days."]},{version:"1.1.2 - 03/10/2022",text:["Fixed problem where you couldn't log time on some days, where you were supposed to."]},{version:"1.1.1 - 30/09/2022",text:["Added changelog","Show descriptions on non-working days"]}];for(const e of o){const t=document.createElement("div");t.className="tl-settings-version",n.append(t);const a=document.createElement("div");a.className="tl-settings-title",a.innerText=e.version,t.append(a);const s=document.createElement("ul");s.className="tl-settings-list",t.append(s);for(const t of e.text){const e=document.createElement("li");e.innerText=t,s.append(e)}}return e}async createModel(){this.model&&(this.model.onDateUpdated.off(this.onDateUpdated,this),this.model.onReasonsUpdated.off(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.off(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.off(this.onSheetUpdated,this),this.model.onSheetsUpdated.off(this.onSheetsUpdated,this)),this.model=new c,this.model.onDateUpdated.on(this.onDateUpdated,this),this.model.onReasonsUpdated.on(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.on(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.on(this.onSheetUpdated,this),this.model.onSheetsUpdated.on(this.onSheetsUpdated,this),await this.model.initialize()}getDateContainer(e){if(this.selectedSheet===e.sheet&&this.sheetContainer){let t=this.sheetDates.find((t=>t.date===e.date));if(!t){if(t={date:e.date,parent:document.createElement("div"),title:document.createElement("span"),entries:[],starButton:document.createElement("button"),pasteButton:document.createElement("button"),weekendDescription:document.createElement("div"),noEntriesWarning:document.createElement("div")},this.sheetDates.push(t),t.parent.className="tl-date",this.sheetContainer.appendChild(t.parent),1===new Date(e.date.date).getDay()){const e=document.createElement("div");e.className="tl-week-seperator",this.sheetContainer.appendChild(e)}if(t.parent.append(t.starButton),t.starButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.setFavoritedDate(e.date)},t.starButton.className="tl-star-button tl-show-on-hover",t.starButton.title="Favorite Day",t.title.className="tl-date-label",t.title.innerText=new Date(e.date.date).toDateString(),e.date.nonWorkingDay&&t.title.classList.add("tl-date-label-weekend"),t.parent.append(t.title),t.weekendDescription.className="tl-weekend-description",t.parent.append(t.weekendDescription),t.noEntriesWarning.className="tl-no-entries-warning",t.parent.append(t.noEntriesWarning),!e.sheet.locked){const n=document.createElement("button");n.appendChild(s.get("add")),n.className="tl-add-entry-btn tl-show-on-hover",n.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.newEntry(e.date)},t.parent.append(n),t.pasteButton=document.createElement("button"),t.pasteButton.appendChild(s.get("switch_access_shortcut_add")),t.pasteButton.title="Paste from Favorite Day",t.pasteButton.className="tl-paste-btn tl-show-on-hover",t.pasteButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.pasteFromStarred(e.date)},t.parent.append(t.pasteButton)}this.addToWeekSum(t)}return t}return null}getEntryContainer(t,o,i){let r=o.entries.find((e=>e.entry===i));if(!r){r={entry:i,parent:document.createElement("div"),startHour:document.createElement("input"),endHour:document.createElement("input"),length:document.createElement("input"),reason:document.createElement("select"),comment:document.createElement("input"),commentButton:document.createElement("button"),noReasonWarning:document.createElement("div")},o.entries.push(r),r.parent.className="tl-entry",o.parent.appendChild(r.parent),r.startHour.type="time",r.startHour.className="tl-entry-start",t.sheet.locked&&(r.startHour.disabled=!0),r.startHour.onchange=()=>{var a,s,o;const l=i.startHour+i.lengthHours;null===(a=this.model)||void 0===a||a.changeStartHour(t.date,t.date.entries.indexOf(i),e.parseTimeTohours(null!==(s=null==r?void 0:r.startHour.value)&&void 0!==s?s:"08:00"));const d=n.round(l-i.startHour,2);null===(o=this.model)||void 0===o||o.changeLengthHours(t.date,t.date.entries.indexOf(i),d)},r.parent.appendChild(r.startHour);const l=document.createElement("span");l.className="tl-end-label",l.innerText="-",r.parent.appendChild(l),r.endHour.type="time",r.endHour.className="tl-entry-end",t.sheet.locked&&(r.endHour.disabled=!0),r.endHour.onchange=()=>{var a;if(null==r?void 0:r.endHour){const s=n.round(e.parseTimeTohours(r.endHour.value)-i.startHour,2);null===(a=this.model)||void 0===a||a.changeLengthHours(t.date,t.date.entries.indexOf(i),s)}},r.parent.appendChild(r.endHour),r.reason.onchange=()=>{var e,n;return null===(e=this.model)||void 0===e?void 0:e.changeReason(t.date,t.date.entries.indexOf(i),null!==(n=null==r?void 0:r.reason.value)&&void 0!==n?n:"")},t.sheet.locked&&(r.reason.disabled=!0),r.reason.className="tl-entry-reason",r.parent.appendChild(r.reason),this.updateReasonsDropdown(r.reason),1===o.entries.length&&(o.sumHours=document.createElement("span"),o.sumHours.className="tl-sum-hours",r.parent.append(o.sumHours)),r.length.type="number",r.length.className="tl-entry-length",r.length.step="0.01",t.sheet.locked&&(r.length.disabled=!0),r.length.onchange=()=>{var e;null===(e=this.model)||void 0===e||e.changeLengthHours(t.date,t.date.entries.indexOf(i),a.unscale(parseFloat((null==r?void 0:r.length.value)||"0")))},r.parent.appendChild(r.length);const d=document.createElement("span");if(d.className="tl-duration-label",d.innerText=a.getUnitName(),r.parent.appendChild(d),!t.sheet.locked){r.commentButton.className="tl-add-comment-btn tl-show-on-hover",r.commentButton.onclick=()=>{var e;return null===(e=this.model)||void 0===e?void 0:e.toggleComment(t.date,t.date.entries.indexOf(i))},r.parent.appendChild(r.commentButton);const e=document.createElement("button");e.appendChild(s.get("delete")),e.className="tl-remove-entry-btn tl-show-on-hover",e.onclick=()=>{var e;return null===(e=this.model)||void 0===e?void 0:e.deleteEntry(t.date,t.date.entries.indexOf(i))},r.parent.appendChild(e)}r.noReasonWarning.append(s.get("warning",!0)),r.noReasonWarning.append(" No reason selected!"),r.noReasonWarning.className="tl-no-reason-warning tl-warning tl-has-reason",r.parent.appendChild(r.noReasonWarning),r.comment.type="text",r.comment.placeholder="Write a note...",r.comment.title="Write a note...",r.comment.className="tl-entry-comment",t.sheet.locked&&(r.comment.disabled=!0),r.comment.onchange=()=>{var e,n;null===(e=this.model)||void 0===e||e.changeComment(t.date,t.date.entries.indexOf(i),null!==(n=null==r?void 0:r.comment.value)&&void 0!==n?n:"")},r.parent.appendChild(r.comment)}return r}addToWeekSum(e){if(this.weekSums.length<1||0===new Date(e.date.date).getDay()){const t={dates:[e],element:document.createElement("div")};t.element.className="tl-week-sum",this.weekSums.push(t),e.parent.appendChild(t.element),e.parent.style.marginTop="38px"}else this.weekSums[this.weekSums.length-1].dates.push(e)}onDateUpdated(t){var o,i,r;if(this.selectedSheet===t.sheet&&this.sheetContainer){let l=this.getDateContainer(t);if(l){for(const i of t.date.entries){let r=this.getEntryContainer(t,l,i);r.startHour.value=e.formatHour(i.startHour),r.length.value=n.round(a.scale(i.lengthHours),2).toString(),r.endHour.value=e.formatHour(i.startHour+i.lengthHours),r.reason.value=i.reasonId,r.comment.value=null!==(o=i.comment)&&void 0!==o?o:"",i.reasonId?r.noReasonWarning.classList.add("tl-has-reason"):r.noReasonWarning.classList.remove("tl-has-reason"),r.commentButton.title=i.hasComment?"Remove note":"Add note",r.commentButton.innerHTML="",r.commentButton.appendChild(s.get(i.hasComment?"speaker_notes_off":"speaker_notes")),i.hasComment?r.parent.classList.add("tl-has-comment"):r.parent.classList.remove("tl-has-comment")}const d=l.entries.filter((e=>!t.date.entries.find((t=>t===e.entry))));if(l.entries=l.entries.filter((e=>!d.includes(e))),d.forEach((e=>e.parent.remove())),l.sumHours){const e=n.sum(t.date.entries.map((e=>e.lengthHours)));l.sumHours.innerText=`${a.format(n.round(e,2))}`}if(l.starButton.innerHTML="",l.starButton.disabled=t.date.favorited,l.starButton.classList.remove("tl-favorite"),l.starButton.appendChild(s.get("star",t.date.favorited)),t.date.favorited&&l.starButton.classList.add("tl-favorite"),l.entries.length>0||l.date.favorited?l.pasteButton.classList.add("tl-hide-favorite-button"):l.pasteButton.classList.remove("tl-hide-favorite-button"),l.title.title=null!==(i=t.date.dateDescription)&&void 0!==i?i:"",t.date.nonWorkingDay&&t.date.entries.length<1?(l.weekendDescription.classList.remove("tl-weekend-description-hidden"),l.weekendDescription.innerText=null!==(r=t.date.dateDescription)&&void 0!==r?r:""):l.weekendDescription.classList.add("tl-weekend-description-hidden"),l.date.hoursToWork>0&&l.entries.length<1){l.noEntriesWarning.classList.remove("tl-hidden"),l.noEntriesWarning.classList.add("tl-warning");const e=n.sum(t.date.entries.map((e=>e.lengthHours)));l.noEntriesWarning.innerHTML="",l.noEntriesWarning.append(s.get("warning",!0)),l.noEntriesWarning.append(` ${n.round(a.scale(e),2)} / ${a.format(n.round(l.date.hoursToWork,2))}`)}else l.noEntriesWarning.classList.add("tl-hidden")}const d=this.weekSums.find((e=>e.dates.some((e=>e.date===t.date))));if(d){const t=n.sum(d.dates.map((e=>n.sum(e.entries.map((e=>e.entry.lengthHours)))))),s=n.sum(d.dates.map((e=>e.date.hoursToWork))),o=e.getWeekNumberFromDate(d.dates[0].date.date);d.element.innerHTML=`<b>Week ${o}</b>: ${n.round(a.scale(t),2)} / ${a.format(n.round(s,2))}`}}this.updateBalance()}updateReasonsDropdown(e){e.innerHTML="";for(const t of this.reasons){const n=document.createElement("option");n.value=t.serverId,n.innerText=t.value,e.appendChild(n)}}onReasonsUpdated(e){this.reasons=e;for(const e of this.sheetDates)for(const t of e.entries)this.updateReasonsDropdown(t.reason)}onSaveStatusUpdated(e){this.saveStatus&&(this.saveStatus.innerHTML="",this.saveStatus.classList.remove("tl-success"),this.saveStatus.classList.remove("tl-warning"),this.saveStatus.classList.remove("tl-clickable"),e===l.Saved&&(this.saveStatus.appendChild(s.get("cloud_done",!0)),this.saveStatus.append(" Saved"),this.saveStatus.classList.add("tl-success")),e===l.Waiting&&(this.saveStatus.appendChild(s.get("pending")),this.saveStatus.append(" Pending...")),e===l.Saving&&(this.saveStatus.appendChild(s.get("cloud_upload")),this.saveStatus.append(" Saving...")),e===l.Error&&(this.saveStatus.appendChild(s.get("cloud_off")),this.saveStatus.append(" Failed!"),this.saveStatus.classList.add("tl-warning"),this.saveStatus.classList.add("tl-clickable")))}onSaveStatusClick(){var e,t;(null===(e=this.saveStatus)||void 0===e?void 0:e.classList.contains("tl-clickable"))&&(null===(t=this.model)||void 0===t||t.save())}onSheetUpdated(e){if(this.sheetDropdown&&!this.sheetDropdownOptions.find((t=>t.sheet===e))){const t=document.createElement("option");t.value=e.id.toString(),t.innerText=`${new Date(e.start).toDateString()} - ${new Date(e.end).toDateString()}${e.locked?" (locked)":""}`,this.sheetDropdownOptions.push({sheet:e,element:t}),this.sheetDropdown.appendChild(t)}this.selectedSheet===e&&(this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[],this.weekSums=[]);for(const t of e.dates)this.onDateUpdated({sheet:e,date:t});this.updateBalance()}onSheetsUpdated(e){this.sheetDropdown&&(this.sheetDropdown.innerHTML=""),this.sheetDropdownOptions=[];for(const t of e)this.onSheetUpdated(t);this.onSelectedSheetChange()}onSelectedSheetChange(){var e;if(!this.sheetDropdown)return;this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[];const t=this.sheetDropdown.value;this.selectedSheet=null===(e=this.sheetDropdownOptions.find((e=>e.element.value===t)))||void 0===e?void 0:e.sheet,this.selectedSheet&&this.model&&this.model.fetchSheet(this.selectedSheet.id)}async updateBalance(){var t,o,i;if(!this.model||!this.balanceLabel||!this.selectedSheet)return;const r=await this.model.getFlexStatus(),l=n.round(r.balance,2);if(this.balanceLabel.innerText=`Flex: ${a.format(l)}${0===l?" 🥳":""}`,null===(t=this.balanceWarning)||void 0===t||t.classList.add("tl-hidden"),r.overdueDates.length+r.warningDates.length>0&&this.balanceWarning){const t=this.model.getFlexPolicy();this.balanceWarning.classList.remove("tl-hidden"),this.balanceWarning.innerHTML="",this.balanceWarning.append(s.get("warning",!0)),r.overdueDates.length>0?(this.balanceWarning.append(`You have ${r.overdueDates.length} unbalanced flex date${1===r.overdueDates.length?"":"s"} older than ${t.previousDaysIncluded} days!`),this.balanceWarning.title+=`Overdue dates: ${r.overdueDates.map((t=>e.format(t.date,!1))).join(", ")}`):r.warningDates.length>0&&this.balanceWarning.append(`${r.warningDates.length} unbalanced flex date${1===r.warningDates.length?"":"s"} will soon be older than ${t.previousDaysIncluded} days!`),this.balanceWarning.title="",r.overdueDates.length>0&&(this.balanceWarning.title+=`Overdue dates: ${r.overdueDates.map((t=>`${e.format(t.date,!1)} (${t.reallocatedBalance}h)`)).join(", ")}`),r.warningDates.length>0&&(this.balanceWarning.title+=`${this.balanceWarning.title.length>0?"\n":""}Soon overdue dates: ${r.warningDates.map((t=>`${e.format(t.date,!1)} (${t.reallocatedBalance}h)`)).join(", ")}`),this.balanceWarning.append(" "),this.balanceWarning.append(s.get("info",!1))}await this.model.getFavoritedDate()?null===(o=this.sheetContainer)||void 0===o||o.classList.add("tl-has-favorite"):null===(i=this.sheetContainer)||void 0===i||i.classList.remove("tl-has-favorite")}}u.onShow=new t,function(e){e[e.FixAll=0]="FixAll",e[e.FixLatest=1]="FixLatest"}(d||(d={})),class{static setAprilFoolsOptOut(e){window.localStorage.setItem("tl_april_fools_opt_out",JSON.stringify(e))}static getAprilFoolsOptOut(){var e;return JSON.parse(null!==(e=window.localStorage.getItem("tl_april_fools_opt_out"))&&void 0!==e?e:"false")}static setHasSeenPopup(e){window.localStorage.setItem("tl_april_fools_popup",JSON.stringify(e))}static hasSeenPopup(){var e;return JSON.parse(null!==(e=window.localStorage.getItem("tl_april_fools_popup"))&&void 0!==e?e:"false")}static isAprilFools(){return"#tl-aprilfools"===window.location.hash}static init(){this.isAprilFools()?(h.buttons.push({className:"",icon:"bolt",text:"Opt out of Teralightmeters",title:"April fools!",onClick:()=>{this.setAprilFoolsOptOut(!this.getAprilFoolsOptOut()),location.reload()}}),this.getAprilFoolsOptOut()||(a.scaling={unitGeneral:"teralightmeter(s)",unitPlural:"teralightmeters",unitSingular:"teralightmeter",scale:this.hour2TeralightmeterScaling()}),u.onShow.on((e=>this.showAprilFoolsPopup(e)),this)):(this.setAprilFoolsOptOut(!1),this.setHasSeenPopup(!1))}static showAprilFoolsPopup(e){var t;if(this.hasSeenPopup())return;const n=document.createElement("div");n.className="tl-settings",n.style.cursor="pointer";const a=document.createElement("div");a.className="tl-settings-back",n.append(a);const s=()=>{n.remove(),this.setHasSeenPopup(!0)};a.onclick=()=>s(),n.onclick=()=>s();const o=document.createElement("div");o.className="tl-settings-inner",n.append(o);const i=document.createElement("div");i.className="tl-settings-version",o.append(i);const r=(new Date).getMonth()<3;i.innerHTML=`<h1>Introducing: the Teralightmeter!</h1>\n        <h3>All hours logged will now be measured in a new time unit: the Teralightmeter - the time it takes for light to travel 1 000 000 000 000 meters!</h3>\n        <h3>This feature was made exclusively for your benefit, in no way related to ${r?"an upcoming date.":"today's date."}</h3>\n        <h3>We hope you enjoy 😉📅</h3>`,null===(t=e.timelogUIInner)||void 0===t||t.appendChild(n)}static hour2TeralightmeterScaling(){return 1.0792528488}}.init(),s.initialize(),new u,new class{constructor(){this.submitting=!1,this.createUI(),this.clockInButtonFinder()}createUI(){const e=document.createElement("style");e.innerHTML="\n.re-label\n{\n    font-size: 1.5em;\n    margin-bottom: 10px;\n}\n.re-reason-select\n{\n    padding: 5px;\n}\n.re-reason-ui\n{\n    z-index: 2000;\n    position: fixed;\n    inset: 0;\n    background-color: rgba(0,0,0,0.75);\n    padding-top: 45vh;\n    text-align: center;\n    color: white;\n    font-weight: bold;\n}\n.re-btn\n{\n    padding: 0 var(--button-padding-x, 15px);\n    min-width: 80px;\n    height: var(--button-size, 30px);\n    font-weight: 600;\n    font-size: var(--button-font-size, 12px);\n    font-family: var(--body-font-family);\n    border: 0;\n    border-radius: 4px;\n    margin: 5px;\n}\n.re-btn.re-primary\n{\n    color: var(--primary-bg-text-color, white);\n    background-color: var(--primary-600);\n}\n.re-btn.re-secondary\n{\n    color: var(--secondary-bg-text-color, #535353);\n    background-color: var(--secondary-600);\n}\n.re-blur\n{\n    filter: blur(2px);\n}\n.re-submitting .re-btn\n{\n    display: none;\n}\n.re-submitting-text\n{\n    display: none;\n    font-size: 1.5em;\n}\n.re-submitting .re-submitting-text\n{\n    display: block;\n}\n",document.body.append(e),this.reasonEnhancementUI=document.createElement("div"),this.reasonEnhancementUI.className="re-reason-ui",this.reasonEnhancementUI.style.display="none",document.body.appendChild(this.reasonEnhancementUI);const t=document.createElement("div");t.innerText="Choose Default Reason",t.className="re-label",this.reasonEnhancementUI.appendChild(t),this.reasonSelect=document.createElement("select"),this.reasonSelect.className="re-reason-select",this.reasonSelect.onchange=()=>this.saveDefaultReasonValue(),this.reasonEnhancementUI.appendChild(this.reasonSelect),this.reasonEnhancementUI.appendChild(document.createElement("br"));const n=document.createElement("button");n.className="re-cancel-btn re-btn re-secondary",n.innerText="Cancel",n.onclick=()=>this.cancel(),this.reasonEnhancementUI.appendChild(n);const a=document.createElement("button");a.className="re-submit-btn re-btn re-primary",a.innerText="Submit",a.onclick=()=>this.submit(),this.reasonEnhancementUI.appendChild(a);const s=document.createElement("div");s.className="re-submitting-text",s.innerText="Submitting...",this.reasonEnhancementUI.appendChild(s)}async clockInButtonFinder(){for(var e;;)this.findUnenhancedButtons("b-button.punch-clock-button, b-button.time-widget-clock-in-btn, b-button.time-widget-clock-out-btn").forEach((e=>this.enhanceClockInButton(e,d.FixLatest))),this.findUnenhancedButtons("b-button.quick-fix-apply-button").forEach((e=>this.enhanceClockInButton(e,d.FixAll))),this.appRoot||(this.appRoot=null!==(e=document.querySelector("app-root"))&&void 0!==e?e:void 0),await o.for(10)}findUnenhancedButtons(e){var t=[],n=document.querySelectorAll(e);for(const e of n)e.classList.contains("re-enhanced")||(e.classList.add("re-enhanced"),t.push(e));return t}enhanceClockInButton(e,t){e.addEventListener("click",(()=>this.showReasonFixer(t)))}saveDefaultReasonValue(){this.reasonSelect&&window.localStorage.setItem("re-last-reason",this.reasonSelect.value)}loadDefaultReasonValue(){var e;this.reasonSelect&&(this.reasonSelect.value=null!==(e=window.localStorage.getItem("re-last-reason"))&&void 0!==e?e:"")}async showReasonFixer(e){if(this.reasonEnhancementUI&&(await o.for(250),this.setUIVisible(!0),this.mode=e,this.reasonSelect)){const e=await r.metadata();this.reasonSelect.innerHTML="";for(const t of e.timeLogEntryReason.values){const e=document.createElement("option");e.value=t.serverId,e.innerText=t.value,this.reasonSelect.appendChild(e)}this.loadDefaultReasonValue()}}cancel(){this.setUIVisible(!1)}setUIVisible(e){this.reasonEnhancementUI&&(this.reasonEnhancementUI.style.display=e?"block":"none"),this.appRoot&&(e?this.appRoot.classList.add("re-blur"):this.appRoot.classList.remove("re-blur"))}async submit(){var e,t;await o.until((()=>!this.submitting)),this.submitting=!0,null===(e=this.reasonEnhancementUI)||void 0===e||e.classList.add("re-submitting"),this.mode===d.FixAll&&await this.fixAll(),this.mode===d.FixLatest&&await this.fixLatest(),this.setUIVisible(!1),null===(t=this.reasonEnhancementUI)||void 0===t||t.classList.remove("re-submitting"),this.submitting=!1}async fixAll(){if(!this.reasonSelect)return;const t=this.reasonSelect.value,n=await r.sheets();for(const a of n.employeeSheets){if(a.locked)continue;const n=await r.attendance(a.id);for(const a of n.attendance)if(a.entries.some((e=>!e.reason))){const n=e.parse(a.date);if("number"!=typeof n)continue;const s=a.entries.map((a=>{var s,o,i,r;return{startHour:((null!==(s=e.parse(a.start))&&void 0!==s?s:Date.now())-n)/36e5,lengthHours:a.end?((null!==(o=e.parse(a.end))&&void 0!==o?o:Date.now())-(null!==(i=e.parse(a.start))&&void 0!==i?i:Date.now()))/36e5:null,reasonId:a.reason||t,comment:null!==(r=a.comment)&&void 0!==r?r:null}}));await r.submit(n,s)}}}async fixLatest(){if(!this.reasonSelect)return;const t=this.reasonSelect.value;let n=null;const a=await r.sheets();for(const t of a.employeeSheets){if(t.locked)continue;const a=await r.attendance(t.id);for(const t of a.attendance){const a=e.parse(t.date);if("number"==typeof a&&(!n||a>n.date)){const s=t.entries.map((t=>{var n,s,o,i;return{startHour:((null!==(n=e.parse(t.start))&&void 0!==n?n:Date.now())-a)/36e5,lengthHours:t.end?((null!==(s=e.parse(t.end))&&void 0!==s?s:Date.now())-(null!==(o=e.parse(t.start))&&void 0!==o?o:Date.now()))/36e5:null,reasonId:t.reason,comment:null!==(i=t.comment)&&void 0!==i?i:null}}));n={date:a,entries:s}}}}if(n){for(const e of n.entries)e.reasonId=e.reasonId||t;await r.submit(n.date,n.entries)}}}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQVUsS0FBZ0IsS0FDbkg1RCxTQUFVRCxFQUFFVSxPQUNaQyxRQUFrQixRQUFULEVBQUFYLEVBQUVXLGVBQU8sUUFBSSxLQUN6QixJQUVMbVIsRUFBUyxDQUFFalksS0FBTUYsRUFBTW1HLFFBQVNBLEUsR0FJNUMsR0FBSWdTLEVBQ0osQ0FDSSxJQUFLLE1BQU05TCxLQUFTOEwsRUFBT2hTLFFBRXZCa0csRUFBTS9GLFNBQVcrRixFQUFNL0YsVUFBWVMsUUFFakNiLEVBQU15RyxPQUFPd0wsRUFBT2pZLEtBQU1pWSxFQUFPaFMsUSxDQUUvQyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvRGF0ZXMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvRXZlbnRIYW5kbGVyLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL051bWJlcnMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvSG91clNjYWxpbmcudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvTWF0ZXJpYWxJY29uLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL1dhaXQudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvQXBpLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL0hpQm9iL0hpQm9iLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ1R5cGVzLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1JlYXNvbkVuaGFuY2VtZW50cy9SZWFzb25zRW5oYW5jZW1lbnRzLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ01vZGVsLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ1VJU2V0dGluZ3NCdXR0b25zLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ1VJLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ0Nzcy50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9GdW4vQXByaWxGb29scy50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9SZWFzb25FbmhhbmNlbWVudHMvUmVhc29uRW5oYW5jZW1lbnRzQ3NzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBEYXRlc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIHBhcnNlKHN0cjogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghc3RyKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBjb25zdCBzcGxpdCA9IHN0ci5zcGxpdChcIlRcIik7XHJcbiAgICAgICAgaWYgKHNwbGl0Lmxlbmd0aCA8IDIpIHNwbGl0LnB1c2goXCIwMDowMFwiKTtcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUoc3BsaXQuam9pbihcIlRcIikpLmdldFRpbWUoKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgZm9ybWF0KHRpbWU6IG51bWJlciwgaW5jbHVkZVRpbWVzdGFtcDogYm9vbGVhbilcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRpbWUpIHJldHVybiBcIlwiO1xyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0aW1lKTtcclxuICAgICAgICByZXR1cm4gYCR7ZGF0ZS5nZXRGdWxsWWVhcigpfS0keyhkYXRlLmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX0tJHtkYXRlLmdldERhdGUoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX0ke2luY2x1ZGVUaW1lc3RhbXAgPyBgVCR7ZGF0ZS5nZXRIb3VycygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfToke2RhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfWAgOiBcIlwifWA7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGZvcm1hdEhvdXIoaG91cnM6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBjb25zdCBob3VyID0gTWF0aC5mbG9vcihob3VycyAlIDI0KTtcclxuICAgICAgICBjb25zdCBtaW51dGUgPSBNYXRoLnJvdW5kKChob3VycyAtIGhvdXIpICogNjApO1xyXG4gICAgICAgIHJldHVybiBgJHtob3VyLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfToke21pbnV0ZS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX1gXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFdlZWtOdW1iZXJGcm9tRGF0ZSh0aW1lOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh0aW1lKTtcclxuICAgICAgICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xyXG4gICAgICAgIC8vIFRodXJzZGF5IGluIGN1cnJlbnQgd2VlayBkZWNpZGVzIHRoZSB5ZWFyLlxyXG4gICAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIDMgLSAoZGF0ZS5nZXREYXkoKSArIDYpICUgNyk7XHJcbiAgICAgICAgLy8gSmFudWFyeSA0IGlzIGFsd2F5cyBpbiB3ZWVrIDEuXHJcbiAgICAgICAgdmFyIHdlZWsxID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCAwLCA0KTtcclxuICAgICAgICAvLyBBZGp1c3QgdG8gVGh1cnNkYXkgaW4gd2VlayAxIGFuZCBjb3VudCBudW1iZXIgb2Ygd2Vla3MgZnJvbSBkYXRlIHRvIHdlZWsxLlxyXG4gICAgICAgIHJldHVybiAxICsgTWF0aC5yb3VuZCgoKGRhdGUuZ2V0VGltZSgpIC0gd2VlazEuZ2V0VGltZSgpKSAvIDg2NDAwMDAwXHJcbiAgICAgICAgICAgIC0gMyArICh3ZWVrMS5nZXREYXkoKSArIDYpICUgNykgLyA3KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgcGFyc2VUaW1lVG9ob3Vycyh0aW1lOiBzdHJpbmcpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc3BsaXQgPSB0aW1lLnNwbGl0KFwiOlwiKTtcclxuICAgICAgICByZXR1cm4gcGFyc2VJbnQoc3BsaXRbMF0pICsgcGFyc2VJbnQoc3BsaXRbMV0pIC8gNjA7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgRXZlbnRIYW5kbGVyPFQ+XHJcbntcclxuICAgIHByaXZhdGUgaGFuZGxlcnM6IHsgaGFuZGxlcjogKHZhbDogVCkgPT4gdm9pZCwgY29udGV4dDogYW55IH1bXSA9IFtdO1xyXG4gICAgcHVibGljIG9uKGhhbmRsZXI6ICh2YWw6IFQpID0+IHZvaWQsIGNvbnRleHQ6IGFueSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLmhhbmRsZXJzLnB1c2goeyBoYW5kbGVyLCBjb250ZXh0IH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG9mZihoYW5kbGVyOiAodmFsOiBUKSA9PiB2b2lkLCBjb250ZXh0OiBhbnkpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZmlsdGVyKGggPT4gaC5oYW5kbGVyICE9PSBoYW5kbGVyIHx8IGguY29udGV4dCAhPT0gY29udGV4dCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZmlyZSh2YWw6IFQpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycy5mb3JFYWNoKGggPT4gaC5oYW5kbGVyLmNhbGwoaC5jb250ZXh0LCB2YWwpKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBOdW1iZXJzXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgcm91bmQobnVtOiBudW1iZXIsIGRlY2ltYWxzOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQobnVtICogKDEwICoqIGRlY2ltYWxzKSkgLyAoMTAgKiogZGVjaW1hbHMpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBmbG9vcihudW06IG51bWJlciwgZGVjaW1hbHM6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihudW0gKiAoMTAgKiogZGVjaW1hbHMpKSAvICgxMCAqKiBkZWNpbWFscyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGNlaWwobnVtOiBudW1iZXIsIGRlY2ltYWxzOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguY2VpbChudW0gKiAoMTAgKiogZGVjaW1hbHMpKSAvICgxMCAqKiBkZWNpbWFscyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBzdW0oYXJyOiBudW1iZXJbXSlcclxuICAgIHtcclxuICAgICAgICBsZXQgdmFsID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgdmFsICs9IGFycltpXTtcclxuICAgICAgICByZXR1cm4gdmFsO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgTnVtYmVycyB9IGZyb20gXCIuL051bWJlcnNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBIb3VyU2NhbGluZ1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIHNjYWxpbmcgPSB7XHJcbiAgICAgICAgdW5pdEdlbmVyYWw6IFwiaG91cihzKVwiLFxyXG4gICAgICAgIHVuaXRQbHVyYWw6IFwiaG91cnNcIixcclxuICAgICAgICB1bml0U2luZ3VsYXI6IFwiaG91clwiLFxyXG4gICAgICAgIHNjYWxlOiAxXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIHNjYWxlKGhvdXJzOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIGhvdXJzICogdGhpcy5zY2FsaW5nLnNjYWxlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyB1bnNjYWxlKHNjYWxlZDogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBzY2FsZWQgLyB0aGlzLnNjYWxpbmcuc2NhbGU7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFVuaXROYW1lKGhvdXJzOiBudW1iZXIgfCBudWxsID0gbnVsbClcclxuICAgIHtcclxuICAgICAgICBpZiAoaG91cnMgPT09IG51bGwpIHJldHVybiB0aGlzLnNjYWxpbmcudW5pdEdlbmVyYWw7XHJcbiAgICAgICAgaWYgKGhvdXJzID09PSAxKSByZXR1cm4gdGhpcy5zY2FsaW5nLnVuaXRTaW5ndWxhcjtcclxuICAgICAgICByZXR1cm4gdGhpcy5zY2FsaW5nLnVuaXRQbHVyYWw7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGZvcm1hdChob3VyczogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBgJHtOdW1iZXJzLnJvdW5kKHRoaXMuc2NhbGUoaG91cnMpLCAyKX0gJHt0aGlzLmdldFVuaXROYW1lKGhvdXJzKX1gO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGFic3RyYWN0IGNsYXNzIE1hdGVyaWFsSWNvblxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGluaXRpYWxpemUoKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcclxuICAgICAgICBsaW5rLmhyZWYgPSBcImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9TWF0ZXJpYWwrU3ltYm9scytPdXRsaW5lZDpvcHN6LHdnaHQsRklMTCxHUkFEQDIwLi40OCwxMDAuLjcwMCwwLi4xLC01MC4uMjAwXCI7XHJcbiAgICAgICAgbGluay5yZWwgPSBcInN0eWxlc2hlZXRcIjtcclxuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGxpbmspO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBnZXQoaWNvbjogc3RyaW5nLCBmaWxsOiBib29sZWFuID0gZmFsc2UpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgIHNwYW4uY2xhc3NOYW1lID0gYG1hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWRgO1xyXG4gICAgICAgIHNwYW4uaW5uZXJUZXh0ID0gaWNvbjtcclxuICAgICAgICBzcGFuLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSBcIm1pZGRsZVwiO1xyXG4gICAgICAgIHNwYW4uc3R5bGUuZm9udFNpemUgPSBcIjEuNWVtXCI7XHJcbiAgICAgICAgc3Bhbi5zdHlsZS5mb250VmFyaWF0aW9uU2V0dGluZ3MgPSBgJ0ZJTEwnICR7ZmlsbCA/IDEgOiAwfWA7XHJcbiAgICAgICAgcmV0dXJuIHNwYW47XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgV2FpdFxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGZvcihtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPlxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPihyZXNvbHZlID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiByZXNvbHZlKCksIG1zKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgdW50aWwoZGVsZWdhdGU6ICgpID0+IGJvb2xlYW4pXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KHJlc29sdmUgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZSA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVsZWdhdGUoKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoaGFuZGxlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgQXBpXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgeGhyKG1ldGhvZDogXCJHRVRcIiB8IFwiUE9TVFwiLCB1cmw6IHN0cmluZywgYm9keTogb2JqZWN0KVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx7IHN0YXR1czogbnVtYmVyLCBib2R5OiBhbnkgfT4ocmVzb2x2ZSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB4aHIub3BlbihtZXRob2QsIHVybCk7XHJcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcclxuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xyXG4gICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHhoci5yZXNwb25zZVRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgIT09IDIwMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuaGFzT3duUHJvcGVydHkoXCJlcnJvclwiKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gcmVzdWx0Lmhhc093blByb3BlcnR5KFwia2V5XCIpID8gcmVzdWx0LmtleSA6IHhoci5zdGF0dXMudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBIaUJvYiBVdGlsczogRXJyb3IgJHtrZXl9IC0gJHtyZXN1bHQuZXJyb3J9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChgSGlCb2IgVXRpbHM6IEVycm9yICR7eGhyLnN0YXR1c30gLSBjaGVjayB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgZm9yIG1vcmUgaW5mb3JtYXRpb24uYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEhpQm9iIFV0aWxzOiBFcnJvciAke3hoci5zdGF0dXN9LmApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh4aHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB4aHIuc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiByZXN1bHRcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkoYm9keSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uL1V0aWxzL0FwaVwiO1xyXG5pbXBvcnQgeyBEYXRlcyB9IGZyb20gXCIuLi9VdGlscy9EYXRlc1wiO1xyXG5pbXBvcnQgeyBIaUJvYkF0dGVuZGFuY2UsIEhpQm9iTWV0YWRhdGEsIEhpQm9iU2hlZXRzLCBIaUJvYlN1Ym1pdEVudHJ5LCBIaUJvYlVzZXIgfSBmcm9tIFwiLi9IaUJvYlR5cGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSGlCb2Jcclxue1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgdXNlcklkOiBzdHJpbmcgfCBudWxsO1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBzdWJtaXQoZGF0ZTogbnVtYmVyLCBlbnRyaWVzOiBIaUJvYlN1Ym1pdEVudHJ5W10pOiBQcm9taXNlPGJvb2xlYW4+XHJcbiAgICB7XHJcbiAgICAgICAgaWYgKGVudHJpZXMuc29tZShlID0+ICFlLnJlYXNvbklkKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiV0FSTklORzogU09NRSBFTlRSSUVTIEhBVkUgTk8gUkVBU09OIFNFVCAtIE5PVCBTVUJNSVRUSU5HISFcIiwgZGF0ZSwgZW50cmllcyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGVudHJpZXMubWFwKGUgPT4geyByZXR1cm4geyBzdGFydDogRGF0ZXMuZm9ybWF0KGRhdGUgKyBlLnN0YXJ0SG91ciAqIDM2MDAgKiAxMDAwLCB0cnVlKSwgZW5kOiB0eXBlb2YgZS5sZW5ndGhIb3VycyA9PT0gXCJudW1iZXJcIiA/IERhdGVzLmZvcm1hdChkYXRlICsgKGUuc3RhcnRIb3VyICsgZS5sZW5ndGhIb3VycykgKiAzNjAwICogMTAwMCwgdHJ1ZSkgOiB1bmRlZmluZWQsIHJlYXNvbjogZS5yZWFzb25JZCwgY29tbWVudDogZS5jb21tZW50ID8/IHVuZGVmaW5lZCB9IH0pO1xyXG4gICAgICAgIGNvbnN0IGRhdGVTdHIgPSBEYXRlcy5mb3JtYXQoZGF0ZSwgZmFsc2UpO1xyXG4gICAgICAgIGNvbnN0IHVzZXJJZCA9IGF3YWl0IHRoaXMuZ2V0VXNlcklkKCk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQXBpLnhocihcIlBPU1RcIiwgYGh0dHBzOi8vYXBwLmhpYm9iLmNvbS9hcGkvYXR0ZW5kYW5jZS9lbXBsb3llZXMvJHt1c2VySWR9L2F0dGVuZGFuY2UvZW50cmllcz9mb3JEYXRlPSR7ZGF0ZVN0cn1gLCBkYXRhKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LnN0YXR1cyA9PT0gMjAwO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyB0aW1lbG9nUmVhc29ucygpOiBQcm9taXNlPHsgaWQ6IHN0cmluZywgbmFtZTogc3RyaW5nIH1bXT5cclxuICAgIHtcclxuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IHRoaXMubWV0YWRhdGEoKTtcclxuICAgICAgICByZXR1cm4gbWV0YWRhdGEudGltZUxvZ0VudHJ5UmVhc29uLnZhbHVlcy5tYXAodiA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGlkOiB2LnNlcnZlcklkLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogdi52YWx1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGF0dGVuZGFuY2Uoc2hlZXQ6IG51bWJlcik6IFByb21pc2U8SGlCb2JBdHRlbmRhbmNlPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFwaS54aHIoXCJHRVRcIiwgYGh0dHBzOi8vYXBwLmhpYm9iLmNvbS9hcGkvZW1wbG95ZWVzL2F0dGVuZGFuY2UvbXkvc2hlZXRzLyR7c2hlZXR9YCwge30pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuYm9keTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgc2hlZXRzKCk6IFByb21pc2U8SGlCb2JTaGVldHM+XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgdXNlcklkID0gYXdhaXQgdGhpcy5nZXRVc2VySWQoKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiR0VUXCIsIGBodHRwczovL2FwcC5oaWJvYi5jb20vYXBpL2VtcGxveWVlcy8ke3VzZXJJZH0vdGltZWxvZy9hdHRlbmRhbmNlL3NoZWV0c2AsIHt9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LmJvZHk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIG1ldGFkYXRhKCk6IFByb21pc2U8SGlCb2JNZXRhZGF0YT5cclxuICAgIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiR0VUXCIsIFwiaHR0cHM6Ly9hcHAuaGlib2IuY29tL2FwaS9jb21wYW55L21ldGFkYXRhL2xpc3RzLz9pbmNsdWRlQXJjaGl2ZWQ9dHJ1ZVwiLCB7fSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5ib2R5O1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRVc2VySWQoKTogUHJvbWlzZTxzdHJpbmc+XHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnVzZXJJZCAhPT0gXCJzdHJpbmdcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXNlckluZm8oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlcklkID8/IFwiXCI7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIHVzZXJJbmZvKCk6IFByb21pc2U8SGlCb2JVc2VyPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFwaS54aHIoXCJHRVRcIiwgXCJodHRwczovL2FwcC5oaWJvYi5jb20vYXBpL3VzZXJcIiwge30pO1xyXG4gICAgICAgIHRoaXMudXNlcklkID0gKHJlc3VsdC5ib2R5IGFzIEhpQm9iVXNlcikuaWQ7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5ib2R5O1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nRW50cnlcclxue1xyXG4gICAgc3RhcnRIb3VyOiBudW1iZXIsXHJcbiAgICBsZW5ndGhIb3VyczogbnVtYmVyLFxyXG4gICAgcmVhc29uSWQ6IHN0cmluZyxcclxuICAgIGNvbW1lbnQ6IHN0cmluZyB8IG51bGwsXHJcbiAgICBoYXNDb21tZW50OiBib29sZWFuXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nRGF0ZVxyXG57XHJcbiAgICBkaXJ0eTogYm9vbGVhbixcclxuICAgIGRhdGU6IG51bWJlclxyXG4gICAgZW50cmllczogVGltZWxvZ0VudHJ5W10sXHJcbiAgICBub25Xb3JraW5nRGF5OiBib29sZWFuLFxyXG4gICAgaG91cnNUb1dvcms6IG51bWJlclxyXG4gICAgZmF2b3JpdGVkOiBib29sZWFuLFxyXG4gICAgZGF0ZURlc2NyaXB0aW9uPzogc3RyaW5nXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nU2hlZXRcclxue1xyXG4gICAgaWQ6IG51bWJlcixcclxuICAgIHN0YXR1czogc3RyaW5nLFxyXG4gICAgc3RhcnQ6IG51bWJlcixcclxuICAgIGVuZDogbnVtYmVyXHJcbiAgICBkYXRlczogVGltZWxvZ0RhdGVbXSxcclxuICAgIGxvY2tlZDogYm9vbGVhbixcclxuICAgIGhvdXJzUGVyRGF5OiBudW1iZXJcclxufVxyXG5leHBvcnQgZW51bSBUaW1lbG9nU2F2ZVN0YXR1c1xyXG57XHJcbiAgICBXYWl0aW5nLFxyXG4gICAgU2F2aW5nLFxyXG4gICAgU2F2ZWQsXHJcbiAgICBFcnJvclxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZUxvZ0Zhdm9yaXRlZERhdGVcclxue1xyXG4gICAgZGF0ZTogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ0ZsZXhEYXRlXHJcbntcclxuICAgIGRhdGU6IG51bWJlcixcclxuICAgIGRhdGVTdHJpbmc6IHN0cmluZyxcclxuICAgIHJlYWxCYWxhbmNlOiBudW1iZXIsXHJcbiAgICByZWFsbG9jYXRlZEJhbGFuY2U6IG51bWJlclxyXG59XHJcblxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nVUlEYXRlIFxyXG57XHJcbiAgICBkYXRlOiBUaW1lbG9nRGF0ZSxcclxuICAgIHBhcmVudDogSFRNTERpdkVsZW1lbnQsXHJcbiAgICB0aXRsZTogSFRNTFNwYW5FbGVtZW50LFxyXG4gICAgZW50cmllczogVGltZWxvZ1VJRW50cnlDb250YWluZXJbXSxcclxuICAgIHN1bUhvdXJzPzogSFRNTFNwYW5FbGVtZW50LFxyXG4gICAgc3RhckJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQsXHJcbiAgICBwYXN0ZUJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQsXHJcbiAgICB3ZWVrZW5kRGVzY3JpcHRpb246IEhUTUxEaXZFbGVtZW50LFxyXG4gICAgbm9FbnRyaWVzV2FybmluZzogSFRNTERpdkVsZW1lbnQsXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nVUlFbnRyeUNvbnRhaW5lclxyXG57XHJcbiAgICBlbnRyeTogVGltZWxvZ0VudHJ5LFxyXG4gICAgcGFyZW50OiBIVE1MRGl2RWxlbWVudCxcclxuICAgIHN0YXJ0SG91cjogSFRNTElucHV0RWxlbWVudCxcclxuICAgIGxlbmd0aDogSFRNTElucHV0RWxlbWVudCxcclxuICAgIHJlYXNvbjogSFRNTFNlbGVjdEVsZW1lbnQsXHJcbiAgICBlbmRIb3VyOiBIVE1MSW5wdXRFbGVtZW50LFxyXG4gICAgY29tbWVudDogSFRNTElucHV0RWxlbWVudCxcclxuICAgIGNvbW1lbnRCdXR0b246IEhUTUxCdXR0b25FbGVtZW50LFxyXG4gICAgbm9SZWFzb25XYXJuaW5nOiBIVE1MRGl2RWxlbWVudFxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ1VJV2Vla1N1bVxyXG57XHJcbiAgICBkYXRlczogVGltZWxvZ1VJRGF0ZVtdLFxyXG4gICAgZWxlbWVudDogSFRNTERpdkVsZW1lbnRcclxufSIsImltcG9ydCB7IEhpQm9iIH0gZnJvbSBcIi4uL0hpQm9iL0hpQm9iXCI7XHJcbmltcG9ydCB7IEhpQm9iU3VibWl0RW50cnkgfSBmcm9tIFwiLi4vSGlCb2IvSGlCb2JUeXBlc1wiO1xyXG5pbXBvcnQgeyBEYXRlcyB9IGZyb20gXCIuLi9VdGlscy9EYXRlc1wiO1xyXG5pbXBvcnQgeyBXYWl0IH0gZnJvbSBcIi4uL1V0aWxzL1dhaXRcIjtcclxuaW1wb3J0IHsgUmVhc29uRW5oYW5jZW1lbnRDc3MgfSBmcm9tIFwiLi9SZWFzb25FbmhhbmNlbWVudHNDc3NcIjtcclxuXHJcbmV4cG9ydCBlbnVtIFJlYXNvbkVuaGFuY2VtZW50TW9kZVxyXG57XHJcbiAgICBGaXhBbGwsXHJcbiAgICBGaXhMYXRlc3QsXHJcbn1cclxuZXhwb3J0IGNsYXNzIFJlYXNvbkVuaGFuY2VtZW50c1xyXG57XHJcbiAgICBwcml2YXRlIHJlYXNvbkVuaGFuY2VtZW50VUk/OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByaXZhdGUgcmVhc29uU2VsZWN0PzogSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGFwcFJvb3Q/OiBFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBzdWJtaXR0aW5nID0gZmFsc2U7XHJcblxyXG4gICAgcHJpdmF0ZSBtb2RlPzogUmVhc29uRW5oYW5jZW1lbnRNb2RlO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVVSSgpO1xyXG4gICAgICAgIHRoaXMuY2xvY2tJbkJ1dHRvbkZpbmRlcigpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjcmVhdGVVSSgpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgICAgc3R5bGUuaW5uZXJIVE1MID0gUmVhc29uRW5oYW5jZW1lbnRDc3M7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQoc3R5bGUpO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuY2xhc3NOYW1lID0gXCJyZS1yZWFzb24tdWlcIjtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5yZWFzb25FbmhhbmNlbWVudFVJKTtcclxuXHJcbiAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGxhYmVsLmlubmVyVGV4dCA9IFwiQ2hvb3NlIERlZmF1bHQgUmVhc29uXCI7XHJcbiAgICAgICAgbGFiZWwuY2xhc3NOYW1lID0gXCJyZS1sYWJlbFwiO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChsYWJlbCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVhc29uU2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcclxuICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC5jbGFzc05hbWUgPSBcInJlLXJlYXNvbi1zZWxlY3RcIjtcclxuICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHRoaXMuc2F2ZURlZmF1bHRSZWFzb25WYWx1ZSgpO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZCh0aGlzLnJlYXNvblNlbGVjdCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIikpO1xyXG5cclxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5jbGFzc05hbWUgPSBcInJlLWNhbmNlbC1idG4gcmUtYnRuIHJlLXNlY29uZGFyeVwiO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5pbm5lclRleHQgPSBcIkNhbmNlbFwiXHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNhbmNlbCgpO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChjYW5jZWxCdXR0b24pO1xyXG5cclxuICAgICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5jbGFzc05hbWUgPSBcInJlLXN1Ym1pdC1idG4gcmUtYnRuIHJlLXByaW1hcnlcIjtcclxuICAgICAgICBzdWJtaXRCdXR0b24uaW5uZXJUZXh0ID0gXCJTdWJtaXRcIlxyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zdWJtaXQoKTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuYXBwZW5kQ2hpbGQoc3VibWl0QnV0dG9uKTtcclxuXHJcblxyXG4gICAgICAgIGNvbnN0IHN1Ym1pdHRpbmdUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBzdWJtaXR0aW5nVGV4dC5jbGFzc05hbWUgPSBcInJlLXN1Ym1pdHRpbmctdGV4dFwiO1xyXG4gICAgICAgIHN1Ym1pdHRpbmdUZXh0LmlubmVyVGV4dCA9IFwiU3VibWl0dGluZy4uLlwiXHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKHN1Ym1pdHRpbmdUZXh0KTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgY2xvY2tJbkJ1dHRvbkZpbmRlcigpXHJcbiAgICB7XHJcbiAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2xvY2tJbkJ1dHRvbnMgPSB0aGlzLmZpbmRVbmVuaGFuY2VkQnV0dG9ucyhcImItYnV0dG9uLnB1bmNoLWNsb2NrLWJ1dHRvbiwgYi1idXR0b24udGltZS13aWRnZXQtY2xvY2staW4tYnRuLCBiLWJ1dHRvbi50aW1lLXdpZGdldC1jbG9jay1vdXQtYnRuXCIpO1xyXG4gICAgICAgICAgICBjbG9ja0luQnV0dG9ucy5mb3JFYWNoKGUgPT4gdGhpcy5lbmhhbmNlQ2xvY2tJbkJ1dHRvbihlLCBSZWFzb25FbmhhbmNlbWVudE1vZGUuRml4TGF0ZXN0KSk7XHJcbiAgICAgICAgICAgIHZhciBxdWlja0ZpeEJ1dHRvbiA9IHRoaXMuZmluZFVuZW5oYW5jZWRCdXR0b25zKFwiYi1idXR0b24ucXVpY2stZml4LWFwcGx5LWJ1dHRvblwiKTtcclxuICAgICAgICAgICAgcXVpY2tGaXhCdXR0b24uZm9yRWFjaChlID0+IHRoaXMuZW5oYW5jZUNsb2NrSW5CdXR0b24oZSwgUmVhc29uRW5oYW5jZW1lbnRNb2RlLkZpeEFsbCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmFwcFJvb3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwUm9vdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJhcHAtcm9vdFwiKSA/PyB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgV2FpdC5mb3IoMTApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgZmluZFVuZW5oYW5jZWRCdXR0b25zKHNlbGVjdG9yOiBzdHJpbmcpOiBFbGVtZW50W11cclxuICAgIHtcclxuICAgICAgICB2YXIgYXJyID0gW10gYXMgRWxlbWVudFtdO1xyXG4gICAgICAgIHZhciBxdWVyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xyXG4gICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBxdWVyeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJyZS1lbmhhbmNlZFwiKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicmUtZW5oYW5jZWRcIik7XHJcbiAgICAgICAgICAgICAgICBhcnIucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZW5oYW5jZUNsb2NrSW5CdXR0b24oYnV0dG9uOiBFbGVtZW50LCBtb2RlOiBSZWFzb25FbmhhbmNlbWVudE1vZGUpXHJcbiAgICB7XHJcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnNob3dSZWFzb25GaXhlcihtb2RlKSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHNhdmVEZWZhdWx0UmVhc29uVmFsdWUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFzb25TZWxlY3QpIHJldHVybjtcclxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJyZS1sYXN0LXJlYXNvblwiLCB0aGlzLnJlYXNvblNlbGVjdC52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGxvYWREZWZhdWx0UmVhc29uVmFsdWUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFzb25TZWxlY3QpIHJldHVybjtcclxuICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC52YWx1ZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInJlLWxhc3QtcmVhc29uXCIpID8/IFwiXCI7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIHNob3dSZWFzb25GaXhlcihtb2RlOiBSZWFzb25FbmhhbmNlbWVudE1vZGUpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkpIHJldHVybjtcclxuICAgICAgICBhd2FpdCBXYWl0LmZvcigyNTApO1xyXG4gICAgICAgIHRoaXMuc2V0VUlWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XHJcbiAgICAgICAgaWYgKHRoaXMucmVhc29uU2VsZWN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgcmVhc29ucyA9IGF3YWl0IEhpQm9iLm1ldGFkYXRhKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVhc29uU2VsZWN0LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVhc29uIG9mIHJlYXNvbnMudGltZUxvZ0VudHJ5UmVhc29uLnZhbHVlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IHJlYXNvbi5zZXJ2ZXJJZDtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi5pbm5lclRleHQgPSByZWFzb24udmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubG9hZERlZmF1bHRSZWFzb25WYWx1ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgY2FuY2VsKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLnNldFVJVmlzaWJsZShmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHNldFVJVmlzaWJsZSh2YWx1ZTogYm9vbGVhbilcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5yZWFzb25FbmhhbmNlbWVudFVJKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGVsc2UgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuYXBwUm9vdClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHRoaXMuYXBwUm9vdC5jbGFzc0xpc3QuYWRkKFwicmUtYmx1clwiKTtcclxuICAgICAgICAgICAgZWxzZSB0aGlzLmFwcFJvb3QuY2xhc3NMaXN0LnJlbW92ZShcInJlLWJsdXJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBzdWJtaXQoKVxyXG4gICAge1xyXG4gICAgICAgIGF3YWl0IFdhaXQudW50aWwoKCkgPT4gIXRoaXMuc3VibWl0dGluZyk7XHJcblxyXG4gICAgICAgIHRoaXMuc3VibWl0dGluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJPy5jbGFzc0xpc3QuYWRkKFwicmUtc3VibWl0dGluZ1wiKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gUmVhc29uRW5oYW5jZW1lbnRNb2RlLkZpeEFsbCkgYXdhaXQgdGhpcy5maXhBbGwoKTtcclxuICAgICAgICBpZiAodGhpcy5tb2RlID09PSBSZWFzb25FbmhhbmNlbWVudE1vZGUuRml4TGF0ZXN0KSBhd2FpdCB0aGlzLmZpeExhdGVzdCgpO1xyXG5cclxuICAgICAgICB0aGlzLnNldFVJVmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJPy5jbGFzc0xpc3QucmVtb3ZlKFwicmUtc3VibWl0dGluZ1wiKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdWJtaXR0aW5nID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGZpeEFsbCgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvblNlbGVjdCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHJlYXNvbiA9IHRoaXMucmVhc29uU2VsZWN0LnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IHNoZWV0cyA9IGF3YWl0IEhpQm9iLnNoZWV0cygpO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2hlZXQgb2Ygc2hlZXRzLmVtcGxveWVlU2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHNoZWV0LmxvY2tlZCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGF0dGVuZGFuY2UgPSBhd2FpdCBIaUJvYi5hdHRlbmRhbmNlKHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIGF0dGVuZGFuY2UuYXR0ZW5kYW5jZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGUuZW50cmllcy5zb21lKGUgPT4gIWUucmVhc29uKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lID0gRGF0ZXMucGFyc2UoZGF0ZS5kYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWUgIT09IFwibnVtYmVyXCIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudHJpZXM6IEhpQm9iU3VibWl0RW50cnlbXSA9IGRhdGUuZW50cmllcy5tYXAoZSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0SG91cjogKChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSAtIHRpbWUpIC8gKDM2MDAgKiAxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aEhvdXJzOiBlLmVuZCA/ICgoRGF0ZXMucGFyc2UoZS5lbmQpID8/IERhdGUubm93KCkpIC0gKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpKSAvICgzNjAwICogMTAwMCkgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uSWQ6IGUucmVhc29uIHx8IHJlYXNvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGUuY29tbWVudCA/PyBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgSGlCb2Iuc3VibWl0KHRpbWUsIGVudHJpZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBmaXhMYXRlc3QoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFzb25TZWxlY3QpIHJldHVybjtcclxuICAgICAgICBjb25zdCByZWFzb24gPSB0aGlzLnJlYXNvblNlbGVjdC52YWx1ZTtcclxuICAgICAgICBsZXQgbGF0ZXN0OiB7IGRhdGU6IG51bWJlciwgZW50cmllczogSGlCb2JTdWJtaXRFbnRyeVtdIH0gfCBudWxsID0gbnVsbDtcclxuICAgICAgICBjb25zdCBzaGVldHMgPSBhd2FpdCBIaUJvYi5zaGVldHMoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHNoZWV0cy5lbXBsb3llZVNoZWV0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzaGVldC5sb2NrZWQpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBjb25zdCBhdHRlbmRhbmNlID0gYXdhaXQgSGlCb2IuYXR0ZW5kYW5jZShzaGVldC5pZCk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZGF0ZSBvZiBhdHRlbmRhbmNlLmF0dGVuZGFuY2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBEYXRlcy5wYXJzZShkYXRlLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lICE9PSBcIm51bWJlclwiKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGlmICghbGF0ZXN0IHx8IHRpbWUgPiBsYXRlc3QuZGF0ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRyaWVzOiBIaUJvYlN1Ym1pdEVudHJ5W10gPSBkYXRlLmVudHJpZXMubWFwKGUgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydEhvdXI6ICgoRGF0ZXMucGFyc2UoZS5zdGFydCkgPz8gRGF0ZS5ub3coKSkgLSB0aW1lKSAvICgzNjAwICogMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGhIb3VyczogZS5lbmQgPyAoKERhdGVzLnBhcnNlKGUuZW5kKSA/PyBEYXRlLm5vdygpKSAtIChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSkgLyAoMzYwMCAqIDEwMDApIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbklkOiBlLnJlYXNvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGUuY29tbWVudCA/PyBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF0ZXN0ID0geyBkYXRlOiB0aW1lLCBlbnRyaWVzOiBlbnRyaWVzIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxhdGVzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgbGF0ZXN0LmVudHJpZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVudHJ5LnJlYXNvbklkID0gZW50cnkucmVhc29uSWQgfHwgcmVhc29uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGF3YWl0IEhpQm9iLnN1Ym1pdChsYXRlc3QuZGF0ZSwgbGF0ZXN0LmVudHJpZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IEhpQm9iIH0gZnJvbSBcIi4uL0hpQm9iL0hpQm9iXCI7XHJcbmltcG9ydCB7IEhpQm9iUmVhc29uIH0gZnJvbSBcIi4uL0hpQm9iL0hpQm9iVHlwZXNcIjtcclxuaW1wb3J0IHsgRGF0ZXMgfSBmcm9tIFwiLi4vVXRpbHMvRGF0ZXNcIjtcclxuaW1wb3J0IHsgRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4uL1V0aWxzL0V2ZW50SGFuZGxlclwiO1xyXG5pbXBvcnQgeyBOdW1iZXJzIH0gZnJvbSBcIi4uL1V0aWxzL051bWJlcnNcIjtcclxuaW1wb3J0IHsgV2FpdCB9IGZyb20gXCIuLi9VdGlscy9XYWl0XCI7XHJcbmltcG9ydCB7IFRpbWVsb2dTaGVldCwgVGltZWxvZ0RhdGUsIFRpbWVsb2dTYXZlU3RhdHVzLCBUaW1lTG9nRmF2b3JpdGVkRGF0ZSwgVGltZWxvZ0ZsZXhEYXRlIH0gZnJvbSBcIi4vVGltZWxvZ1R5cGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVGltZWxvZ01vZGVsXHJcbntcclxuICAgIHB1YmxpYyBzaGVldHM6IFRpbWVsb2dTaGVldFtdID0gW107XHJcbiAgICBwdWJsaWMgb25EYXRlVXBkYXRlZCA9IG5ldyBFdmVudEhhbmRsZXI8eyBzaGVldDogVGltZWxvZ1NoZWV0LCBkYXRlOiBUaW1lbG9nRGF0ZSB9PigpO1xyXG4gICAgcHVibGljIG9uUmVhc29uc1VwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPEhpQm9iUmVhc29uW10+KCk7XHJcbiAgICBwdWJsaWMgb25TaGVldFVwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPFRpbWVsb2dTaGVldD4oKTtcclxuICAgIHB1YmxpYyBvblNoZWV0c1VwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPFRpbWVsb2dTaGVldFtdPigpO1xyXG4gICAgcHVibGljIG9uU2F2ZVN0YXR1c1VwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPFRpbWVsb2dTYXZlU3RhdHVzPigpO1xyXG4gICAgcHJpdmF0ZSBzYXZlSGFuZGxlOiBudW1iZXIgPSAtMTtcclxuICAgIHByaXZhdGUgc2F2aW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGNhbGN1bGF0aW5nRmxleDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBmZXRjaGluZ1NoZWV0cyA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSByZWFzb25zOiBIaUJvYlJlYXNvbltdID0gW107XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKVxyXG4gICAge1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGluaXRpYWxpemUoKVxyXG4gICAge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hTaGVldHMoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmZldGNoUmVhc29ucygpO1xyXG4gICAgICAgIHRoaXMub25TYXZlU3RhdHVzVXBkYXRlZC5maXJlKFRpbWVsb2dTYXZlU3RhdHVzLlNhdmVkKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBmZXRjaFNoZWV0cygpXHJcbiAgICB7XHJcbiAgICAgICAgYXdhaXQgV2FpdC51bnRpbCgoKSA9PiAhdGhpcy5mZXRjaGluZ1NoZWV0cyk7XHJcbiAgICAgICAgdGhpcy5mZXRjaGluZ1NoZWV0cyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zaGVldHMgPSBbXTtcclxuICAgICAgICBjb25zdCBzaGVldHMgPSBhd2FpdCBIaUJvYi5zaGVldHMoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHNoZWV0cy5lbXBsb3llZVNoZWV0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZXMucGFyc2Uoc2hlZXQuY3ljbGVTdGFydERhdGUpID8/IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IERhdGVzLnBhcnNlKHNoZWV0LmN5Y2xlRW5kRGF0ZSkgPz8gMDtcclxuICAgICAgICAgICAgY29uc3QgbmV3U2hlZXQgPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogc2hlZXQuaWQsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHNoZWV0LnN0YXR1cyxcclxuICAgICAgICAgICAgICAgIHN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgZW5kLFxyXG4gICAgICAgICAgICAgICAgZGF0ZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgbG9ja2VkOiBzaGVldC5sb2NrZWQsXHJcbiAgICAgICAgICAgICAgICBob3Vyc1BlckRheTogMFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0cy5wdXNoKG5ld1NoZWV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaGVldHMuc29ydCgoYSwgYikgPT4gYi5zdGFydCAtIGEuc3RhcnQpO1xyXG4gICAgICAgIHRoaXMub25TaGVldHNVcGRhdGVkLmZpcmUodGhpcy5zaGVldHMpO1xyXG4gICAgICAgIHRoaXMuZmV0Y2hpbmdTaGVldHMgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBmZXRjaFJlYXNvbnMoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucmVhc29ucyA9IChhd2FpdCBIaUJvYi5tZXRhZGF0YSgpKS50aW1lTG9nRW50cnlSZWFzb24udmFsdWVzO1xyXG4gICAgICAgIHRoaXMub25SZWFzb25zVXBkYXRlZC5maXJlKHRoaXMucmVhc29ucyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZmV0Y2hTaGVldChpZDogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuaWQgPT09IGlkKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgYXR0ZW5kYW5jZSA9IGF3YWl0IEhpQm9iLmF0dGVuZGFuY2UoaWQpO1xyXG4gICAgICAgIHNoZWV0LmhvdXJzUGVyRGF5ID0gYXR0ZW5kYW5jZS5zdW1tYXJ5LnBvdGVudGlhbFdvcmtpbmdIb3VycyAvIGF0dGVuZGFuY2Uuc3VtbWFyeS5wb3RlbnRpYWxXb3JraW5nRGF5cztcclxuICAgICAgICBzaGVldC5kYXRlcyA9IFtdO1xyXG4gICAgICAgIGZvciAoY29uc3QgZGF0ZSBvZiBhdHRlbmRhbmNlLmF0dGVuZGFuY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCB0aW1lID0gRGF0ZXMucGFyc2UoZGF0ZS5kYXRlKSA/PyBEYXRlLm5vdygpXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlOiBUaW1lbG9nRGF0ZSA9IHtcclxuICAgICAgICAgICAgICAgIGRpcnR5OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGRhdGU6IHRpbWUsXHJcbiAgICAgICAgICAgICAgICBub25Xb3JraW5nRGF5OiBkYXRlLnN0YXR1cyA9PT0gXCJXZWVrZW5kRXZlbnRcIiB8fCBkYXRlLnN0YXR1cyA9PT0gXCJBcHByb3ZlVGltZW9mZlJlcXVlc3RcIixcclxuICAgICAgICAgICAgICAgIGhvdXJzVG9Xb3JrOiBzaGVldC5ob3Vyc1BlckRheSxcclxuICAgICAgICAgICAgICAgIGZhdm9yaXRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkYXRlRGVzY3JpcHRpb246IGRhdGUubm90ZS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgIGVudHJpZXM6IGRhdGUuZW50cmllcy5tYXAoZSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0SG91cjogTnVtYmVycy5mbG9vcigoKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpIC0gKERhdGVzLnBhcnNlKGRhdGUuZGF0ZSkgPz8gRGF0ZS5ub3coKSkpIC8gKDM2MDAgKiAxMDAwKSwgMiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aEhvdXJzOiBOdW1iZXJzLmNlaWwoKChEYXRlcy5wYXJzZShlLmVuZCkgPz8gRGF0ZS5ub3coKSkgLSAoRGF0ZXMucGFyc2UoZS5zdGFydCkgPz8gRGF0ZS5ub3coKSkpIC8gKDM2MDAgKiAxMDAwKSwgMiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbklkOiBlLnJlYXNvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDogZS5jb21tZW50ID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NvbW1lbnQ6ICEhZS5jb21tZW50XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pLnNvcnQoKGEsIGIpID0+IGEuc3RhcnRIb3VyIC0gYi5zdGFydEhvdXIpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0ZS5wYWlkVGltZW9mZlNlY29uZHMgPT09IFwibnVtYmVyXCIgJiYgZGF0ZS5wYWlkVGltZW9mZlNlY29uZHMgPiAwKSB2YWx1ZS5ob3Vyc1RvV29yayAtPSAoZGF0ZS5wYWlkVGltZW9mZlNlY29uZHMgLyAoNjAgKiA2MCkpO1xyXG4gICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS5ub25Xb3JraW5nRGF5KSB2YWx1ZS5ob3Vyc1RvV29yayA9IDA7XHJcbiAgICAgICAgICAgIHNoZWV0LmRhdGVzLnB1c2godmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzaGVldC5kYXRlcy5zb3J0KChhLCBiKSA9PiBiLmRhdGUgLSBhLmRhdGUpO1xyXG4gICAgICAgIGNvbnN0IGZhdm9yaXRlID0gYXdhaXQgdGhpcy5nZXRGYXZvcml0ZWREYXRlKCk7XHJcbiAgICAgICAgaWYgKGZhdm9yaXRlICYmIGZhdm9yaXRlLnNoZWV0ID09PSBzaGVldClcclxuICAgICAgICAgICAgZmF2b3JpdGUuZGF0ZS5mYXZvcml0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMub25TaGVldFVwZGF0ZWQuZmlyZShzaGVldCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNoYW5nZVN0YXJ0SG91cihkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlciwgaG91cjogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5zdGFydEhvdXIgPSBob3VyO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBjaGFuZ2VMZW5ndGhIb3VycyhkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLmxlbmd0aEhvdXJzID0gbGVuZ3RoO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBjaGFuZ2VSZWFzb24oZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIsIHJlYXNvbjogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5yZWFzb25JZCA9IHJlYXNvbjtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2hhbmdlQ29tbWVudChkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlciwgY29tbWVudDogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5jb21tZW50ID0gY29tbWVudDtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLmhhc0NvbW1lbnQgPSB0cnVlO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyB0b2dnbGVDb21tZW50KGRhdGU6IFRpbWVsb2dEYXRlLCBpbmRleDogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5oYXNDb21tZW50ID0gIWRhdGUuZW50cmllc1tpbmRleF0uaGFzQ29tbWVudDtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLmNvbW1lbnQgPSBkYXRlLmVudHJpZXNbaW5kZXhdLmhhc0NvbW1lbnQgPyBcIlwiIDogbnVsbDtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgc2V0RmF2b3JpdGVkRGF0ZShkYXRlOiBUaW1lbG9nRGF0ZSlcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBvbGRGYXZvcml0ZSA9IGF3YWl0IHRoaXMuZ2V0RmF2b3JpdGVkRGF0ZSgpO1xyXG4gICAgICAgIGlmIChvbGRGYXZvcml0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9sZEZhdm9yaXRlLmRhdGUuZmF2b3JpdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKG9sZEZhdm9yaXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRhdGUuZmF2b3JpdGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0OiBzaGVldCwgZGF0ZTogZGF0ZSB9KTtcclxuXHJcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGxfZmF2b3JpdGVcIiwgSlNPTi5zdHJpbmdpZnkoeyBkYXRlOiBEYXRlcy5mb3JtYXQoZGF0ZS5kYXRlLCBmYWxzZSkgfSBhcyBUaW1lTG9nRmF2b3JpdGVkRGF0ZSkpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGdldEZhdm9yaXRlZERhdGUoKTogUHJvbWlzZTx7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGRhdGU6IFRpbWVsb2dEYXRlIH0gfCBudWxsPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHN0ciA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRsX2Zhdm9yaXRlXCIpO1xyXG4gICAgICAgIGlmICghc3RyKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBjb25zdCBmYXZvcml0ZTogVGltZUxvZ0Zhdm9yaXRlZERhdGUgPSBKU09OLnBhcnNlKHN0cik7XHJcbiAgICAgICAgY29uc3QgdGltZSA9IERhdGVzLnBhcnNlKGZhdm9yaXRlLmRhdGUpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGltZSA9PT0gXCJudW1iZXJcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuc3RhcnQgPD0gdGltZSAmJiBzLmVuZCA+PSB0aW1lKTtcclxuICAgICAgICAgICAgaWYgKHNoZWV0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hlZXQuZGF0ZXMubGVuZ3RoIDwgMSkgYXdhaXQgdGhpcy5mZXRjaFNoZWV0KHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBzaGVldC5kYXRlcy5maW5kKGQgPT4gZC5kYXRlID09PSB0aW1lKTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHNoZWV0OiBzaGVldCwgZGF0ZTogZGF0ZSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZWxldGVFbnRyeShkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGRhdGUuZW50cmllcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgZmluZExhc3RFbnRyeShvcmlnaW5hbERhdGU6IFRpbWVsb2dEYXRlKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsU2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gb3JpZ2luYWxEYXRlKSk7XHJcbiAgICAgICAgaWYgKCFvcmlnaW5hbFNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgbGV0IGRhdGVJbmRleCA9IG9yaWdpbmFsU2hlZXQuZGF0ZXMuaW5kZXhPZihvcmlnaW5hbERhdGUpO1xyXG4gICAgICAgIGxldCBlbnRyeUluZGV4ID0gLTE7XHJcbiAgICAgICAgZm9yIChsZXQgc2hlZXRJbmRleCA9IHRoaXMuc2hlZXRzLmluZGV4T2Yob3JpZ2luYWxTaGVldCk7IHNoZWV0SW5kZXggPCB0aGlzLnNoZWV0cy5sZW5ndGg7IHNoZWV0SW5kZXgrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHNbc2hlZXRJbmRleF07XHJcbiAgICAgICAgICAgIGlmIChzaGVldC5kYXRlcy5sZW5ndGggPCAxKSBhd2FpdCB0aGlzLmZldGNoU2hlZXQoc2hlZXQuaWQpO1xyXG4gICAgICAgICAgICBmb3IgKDsgZGF0ZUluZGV4IDwgc2hlZXQuZGF0ZXMubGVuZ3RoOyBkYXRlSW5kZXgrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IHNoZWV0LmRhdGVzW2RhdGVJbmRleF07XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZS5lbnRyaWVzLmxlbmd0aCA+IDApIHJldHVybiBlbnRyeUluZGV4IDwgMCA/IGRhdGUuZW50cmllc1tkYXRlLmVudHJpZXMubGVuZ3RoIC0gMV0gOiBkYXRlLmVudHJpZXNbZW50cnlJbmRleF07XHJcbiAgICAgICAgICAgICAgICBlbnRyeUluZGV4ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkYXRlSW5kZXggPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBuZXdFbnRyeShkYXRlOiBUaW1lbG9nRGF0ZSlcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGxhc3QgPSBhd2FpdCB0aGlzLmZpbmRMYXN0RW50cnkoZGF0ZSk7XHJcbiAgICAgICAgbGV0IHN0YXJ0SG91ciA9IDguNTtcclxuICAgICAgICBsZXQgbGVuZ3RoSG91cnMgPSBOdW1iZXJzLnJvdW5kKHNoZWV0LmhvdXJzUGVyRGF5LCAyKTtcclxuICAgICAgICBsZXQgcmVhc29uSWQgPSBcIlwiO1xyXG4gICAgICAgIGlmIChsYXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGRhdGUuZW50cmllcy5pbmNsdWRlcyhsYXN0KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RhcnRIb3VyID0gbGFzdC5zdGFydEhvdXIgKyBsYXN0Lmxlbmd0aEhvdXJzO1xyXG4gICAgICAgICAgICAgICAgbGVuZ3RoSG91cnMgPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlYXNvbklkID0gbGFzdC5yZWFzb25JZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzLnB1c2goe1xyXG4gICAgICAgICAgICBzdGFydEhvdXIsXHJcbiAgICAgICAgICAgIGxlbmd0aEhvdXJzLFxyXG4gICAgICAgICAgICByZWFzb25JZCxcclxuICAgICAgICAgICAgY29tbWVudDogbnVsbCxcclxuICAgICAgICAgICAgaGFzQ29tbWVudDogZmFsc2VcclxuICAgICAgICB9KTtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgcGFzdGVGcm9tU3RhcnJlZChkYXRlOiBUaW1lbG9nRGF0ZSlcclxuICAgIHtcclxuICAgICAgICBpZiAoZGF0ZS5lbnRyaWVzLmxlbmd0aCA+IDApIHJldHVybjtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGZhdm9yaXRlID0gYXdhaXQgdGhpcy5nZXRGYXZvcml0ZWREYXRlKCk7XHJcbiAgICAgICAgaWYgKCFmYXZvcml0ZSB8fCBmYXZvcml0ZS5kYXRlID09PSBkYXRlKSByZXR1cm47XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZmF2b3JpdGUuZGF0ZS5lbnRyaWVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZGF0ZS5lbnRyaWVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgc3RhcnRIb3VyOiBlbnRyeS5zdGFydEhvdXIsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGhIb3VyczogZW50cnkubGVuZ3RoSG91cnMsXHJcbiAgICAgICAgICAgICAgICByZWFzb25JZDogZW50cnkucmVhc29uSWQsXHJcbiAgICAgICAgICAgICAgICBjb21tZW50OiBlbnRyeS5jb21tZW50LFxyXG4gICAgICAgICAgICAgICAgaGFzQ29tbWVudDogZW50cnkuaGFzQ29tbWVudFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBxdWV1ZVNhdmUoKVxyXG4gICAge1xyXG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5zYXZlSGFuZGxlKTtcclxuICAgICAgICB0aGlzLnNhdmVIYW5kbGUgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB0aGlzLnNhdmUoKSwgNTAwKTtcclxuICAgICAgICB0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQuZmlyZShUaW1lbG9nU2F2ZVN0YXR1cy5XYWl0aW5nKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBzYXZlKClcclxuICAgIHtcclxuICAgICAgICBhd2FpdCBXYWl0LnVudGlsKCgpID0+ICF0aGlzLnNhdmluZyk7XHJcbiAgICAgICAgdGhpcy5zYXZpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMub25TYXZlU3RhdHVzVXBkYXRlZC5maXJlKFRpbWVsb2dTYXZlU3RhdHVzLlNhdmluZyk7XHJcbiAgICAgICAgY29uc3QgbWluaW11bVdhaXQgPSBXYWl0LmZvcigxMDApO1xyXG4gICAgICAgIGxldCBlcnJvciA9IGZhbHNlO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2hlZXQgb2YgdGhpcy5zaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2Ygc2hlZXQuZGF0ZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRlLmRpcnR5KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEhpQm9iLnN1Ym1pdChkYXRlLmRhdGUsIGRhdGUuZW50cmllcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUuZGlydHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBhd2FpdCBtaW5pbXVtV2FpdDtcclxuICAgICAgICB0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQuZmlyZShlcnJvciA/IFRpbWVsb2dTYXZlU3RhdHVzLkVycm9yIDogVGltZWxvZ1NhdmVTdGF0dXMuU2F2ZWQpO1xyXG4gICAgICAgIHRoaXMuc2F2aW5nID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEZsZXhQb2xpY3koKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB7IHByZXZpb3VzRGF5c0luY2x1ZGVkOiA3ICogNCwgZmxleFdhcm5pbmdUaHJlc2hvbGQ6IDcgKiAzIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGNsZWFyU2hlZXRCYWxhbmNlQ2FjaGUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5zaGVldHMpIHJldHVybjtcclxuICAgICAgICBjb25zdCB1c2VySWQgPSBhd2FpdCBIaUJvYi5nZXRVc2VySWQoKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2hlZXRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0c1tpXTtcclxuICAgICAgICAgICAgaWYgKCFzaGVldCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gYHRsX2NhY2hlZF9ob3VyX2JhbGFuY2VzXyR7dXNlcklkfV8ke3NoZWV0LmlkfWA7XHJcbiAgICAgICAgICAgIGlmIChzaGVldC5sb2NrZWQgJiYgd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGNhY2hlS2V5KSAhPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGNhY2hlS2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGdldENhY2hlZEJhbGFuY2VzKCk6IFByb21pc2U8UmVjb3JkPHN0cmluZywgVGltZWxvZ0ZsZXhEYXRlW10+PlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0czogUmVjb3JkPHN0cmluZywgVGltZWxvZ0ZsZXhEYXRlW10+ID0ge307XHJcbiAgICAgICAgY29uc3QgdXNlcklkID0gYXdhaXQgSGlCb2IuZ2V0VXNlcklkKCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuc2hlZXRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0c1tpXTtcclxuICAgICAgICAgICAgaWYgKCFzaGVldCkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICBsZXQgc2hlZXRCYWxhbmNlczogeyBkYXRlOiBudW1iZXIsIGJhbGFuY2U6IG51bWJlciB9W10gPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgY2FjaGVLZXkgPSBgdGxfY2FjaGVkX2hvdXJfYmFsYW5jZXNfJHt1c2VySWR9XyR7c2hlZXQuaWR9YDtcclxuICAgICAgICAgICAgaWYgKHNoZWV0LmxvY2tlZCAmJiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oY2FjaGVLZXkpICE9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzaGVldEJhbGFuY2VzID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oY2FjaGVLZXkpID8/IFwiW11cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hlZXQuZGF0ZXMubGVuZ3RoIDwgMSkgYXdhaXQgdGhpcy5mZXRjaFNoZWV0KHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgICAgIGlmIChzaGVldC5kYXRlcy5zb21lKGQgPT4gZC5lbnRyaWVzLmxlbmd0aCA+IDAgJiYgZC5lbnRyaWVzLnNvbWUoZSA9PiBlLmxlbmd0aEhvdXJzID4gMCkpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGF5IG9mIHNoZWV0LmRhdGVzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29ya2VkSG91cnMgPSBOdW1iZXJzLnN1bShkYXkuZW50cmllcy5tYXAoZSA9PiBlLmxlbmd0aEhvdXJzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhbGFuY2UgPSB3b3JrZWRIb3VycyAtIGRheS5ob3Vyc1RvV29yaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hlZXRCYWxhbmNlcy5wdXNoKHsgZGF0ZTogZGF5LmRhdGUsIGJhbGFuY2UgfSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hlZXQubG9ja2VkICYmIHNoZWV0LmlkID4gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oY2FjaGVLZXksIEpTT04uc3RyaW5naWZ5KHNoZWV0QmFsYW5jZXMpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzaGVldHNbc2hlZXQuaWQudG9TdHJpbmcoKV0gPSBzaGVldEJhbGFuY2VzLm1hcChkID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogZC5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVTdHJpbmc6IERhdGVzLmZvcm1hdChkLmRhdGUsIGZhbHNlKSxcclxuICAgICAgICAgICAgICAgICAgICByZWFsQmFsYW5jZTogZC5iYWxhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWxsb2NhdGVkQmFsYW5jZTogTnVtYmVycy5yb3VuZChkLmJhbGFuY2UsIDMpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pLnNvcnQoKGEsIGIpID0+IGEuZGF0ZSAtIGIuZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzaGVldHM7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0RmxleFN0YXR1cygpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgcG9saWN5ID0gdGhpcy5nZXRGbGV4UG9saWN5KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnREYXRlVGltZSA9IERhdGVzLnBhcnNlKERhdGVzLmZvcm1hdChEYXRlLm5vdygpLCBmYWxzZSkpID8/IDA7XHJcbiAgICAgICAgY29uc3Qgb3ZlcmR1ZURhdGVUaW1lID0gRGF0ZXMucGFyc2UoRGF0ZXMuZm9ybWF0KGN1cnJlbnREYXRlVGltZSAtICgxMDAwICogNjAgKiA2MCAqIDI0ICogKHBvbGljeS5wcmV2aW91c0RheXNJbmNsdWRlZCAtIDEpKSwgZmFsc2UpKSA/PyAwO1xyXG4gICAgICAgIGNvbnN0IHdhcm5pbmdEYXRlVGltZSA9IERhdGVzLnBhcnNlKERhdGVzLmZvcm1hdChjdXJyZW50RGF0ZVRpbWUgLSAoMTAwMCAqIDYwICogNjAgKiAyNCAqIChwb2xpY3kuZmxleFdhcm5pbmdUaHJlc2hvbGQgLSAxKSksIGZhbHNlKSkgPz8gMDtcclxuXHJcbiAgICAgICAgY29uc3QgYWxsRGF0ZXM6IFRpbWVsb2dGbGV4RGF0ZVtdID0gW107XHJcbiAgICAgICAgbGV0IGJhbGFuY2U6IG51bWJlciA9IDA7XHJcbiAgICAgICAgaWYgKCEhdGhpcy5zaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhd2FpdCBXYWl0LnVudGlsKCgpID0+ICF0aGlzLmNhbGN1bGF0aW5nRmxleCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRpbmdGbGV4ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNoZWV0cyA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVkQmFsYW5jZXMoKTtcclxuXHJcbiAgICAgICAgICAgIC8vQ2FsY3VsYXRlIHJlbWFpbmluZyBiYWxhbmNlcyAvIGNhbmNlbGxlZCBvdXQgYmFsYW5jZXNcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuc2hlZXRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaGVldCA9IHNoZWV0c1t0aGlzLnNoZWV0c1tpXS5pZF07XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hlZXQpIGFsbERhdGVzLnB1c2goLi4uc2hlZXQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL1J1biB0aGUgcmVhbGxvY2F0aW9uIGFsZ29yaXRobVxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbERhdGVzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlID0gYWxsRGF0ZXNbaV07XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGk7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgPT09IDApIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZEYXRlID0gYWxsRGF0ZXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW1vdW50ID0gTWF0aC5taW4oTWF0aC5hYnMoZGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UpLCBNYXRoLmFicyhwcmV2RGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgPCAwICYmIHByZXZEYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2RGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgLT0gYW1vdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSArPSBhbW91bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlID4gMCAmJiBwcmV2RGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgPCAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldkRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlICs9IGFtb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgLT0gYW1vdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwcmV2RGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgPSBOdW1iZXJzLnJvdW5kKHByZXZEYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSwgMyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSA9IE51bWJlcnMucm91bmQoZGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UsIDMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJhbGFuY2UgPSBOdW1iZXJzLnN1bShhbGxEYXRlcy5tYXAoZCA9PiBOdW1iZXJzLnJvdW5kKGQucmVhbGxvY2F0ZWRCYWxhbmNlLCAzKSkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGluZ0ZsZXggPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYmFsYW5jZSxcclxuICAgICAgICAgICAgdW5iYWxhbmNlZERhdGVzOiBhbGxEYXRlcy5maWx0ZXIoZCA9PiBkLnJlYWxsb2NhdGVkQmFsYW5jZSAhPT0gMCksXHJcbiAgICAgICAgICAgIG92ZXJkdWVEYXRlczogYWxsRGF0ZXMuZmlsdGVyKGQgPT4gZC5yZWFsbG9jYXRlZEJhbGFuY2UgIT09IDAgJiYgZC5kYXRlIDw9IG92ZXJkdWVEYXRlVGltZSksXHJcbiAgICAgICAgICAgIHdhcm5pbmdEYXRlczogYWxsRGF0ZXMuZmlsdGVyKGQgPT4gZC5yZWFsbG9jYXRlZEJhbGFuY2UgIT09IDAgJiYgZC5kYXRlIDw9IHdhcm5pbmdEYXRlVGltZSAmJiBkLmRhdGUgPiBvdmVyZHVlRGF0ZVRpbWUpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBUaW1lbG9nVUkgfSBmcm9tIFwiLi9UaW1lbG9nVUlcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUaW1lbG9nVUlTZXR0aW5nc0J1dHRvbnNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBidXR0b25zID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY2xhc3NOYW1lOiBcInRsLXNldHRpbmdzLXJlbG9hZC1sb2NrZWQtc2hlZXRzLWJ1dHRvblwiLFxyXG4gICAgICAgICAgICBpY29uOiBcImNhY2hlZFwiLFxyXG4gICAgICAgICAgICB0ZXh0OiBcIlJlbG9hZCBMb2NrZWQgU2hlZXRzXCIsXHJcbiAgICAgICAgICAgIHRpdGxlOiBcIlJlY2FsY3VsYXRlcyBmbGV4IGJhbGFuY2UgZm9yIGFsbCBsb2NrZWQgc2hlZXRzLlwiLFxyXG4gICAgICAgICAgICBvbkNsaWNrOiB1aSA9PiB1aS5tb2RlbD8uY2xlYXJTaGVldEJhbGFuY2VDYWNoZSgpLnRoZW4oKCkgPT4gdWkudXBkYXRlQmFsYW5jZSgpKVxyXG4gICAgICAgIH1cclxuICAgIF0gYXMge1xyXG4gICAgICAgIGNsYXNzTmFtZTogc3RyaW5nLFxyXG4gICAgICAgIGljb246IHN0cmluZyxcclxuICAgICAgICB0ZXh0OiBzdHJpbmcsXHJcbiAgICAgICAgdGl0bGU6IHN0cmluZ1xyXG4gICAgICAgIG9uQ2xpY2s6ICh1aTogVGltZWxvZ1VJKSA9PiB2b2lkXHJcbiAgICB9W107XHJcbn0iLCJpbXBvcnQgeyBIaUJvYlJlYXNvbiB9IGZyb20gXCIuLi9IaUJvYi9IaUJvYlR5cGVzXCI7XHJcbmltcG9ydCB7IERhdGVzIH0gZnJvbSBcIi4uL1V0aWxzL0RhdGVzXCI7XHJcbmltcG9ydCB7IEV2ZW50SGFuZGxlciB9IGZyb20gXCIuLi9VdGlscy9FdmVudEhhbmRsZXJcIjtcclxuaW1wb3J0IHsgSG91clNjYWxpbmcgfSBmcm9tIFwiLi4vVXRpbHMvSG91clNjYWxpbmdcIjtcclxuaW1wb3J0IHsgTWF0ZXJpYWxJY29uIH0gZnJvbSBcIi4uL1V0aWxzL01hdGVyaWFsSWNvblwiO1xyXG5pbXBvcnQgeyBOdW1iZXJzIH0gZnJvbSBcIi4uL1V0aWxzL051bWJlcnNcIjtcclxuaW1wb3J0IHsgV2FpdCB9IGZyb20gXCIuLi9VdGlscy9XYWl0XCI7XHJcbmltcG9ydCB7IFRpbWVsb2dDc3MgfSBmcm9tIFwiLi9UaW1lbG9nQ3NzXCI7XHJcbmltcG9ydCB7IFRpbWVsb2dNb2RlbCB9IGZyb20gXCIuL1RpbWVsb2dNb2RlbFwiO1xyXG5pbXBvcnQgeyBUaW1lbG9nRGF0ZSwgVGltZWxvZ0VudHJ5LCBUaW1lbG9nU2F2ZVN0YXR1cywgVGltZWxvZ1NoZWV0LCBUaW1lbG9nVUlEYXRlIGFzIFRpbWVsb2dVSURhdGVDb250YWluZXIsIFRpbWVsb2dVSVdlZWtTdW0gfSBmcm9tIFwiLi9UaW1lbG9nVHlwZXNcIjtcclxuaW1wb3J0IHsgVGltZWxvZ1VJU2V0dGluZ3NCdXR0b25zIH0gZnJvbSBcIi4vVGltZWxvZ1VJU2V0dGluZ3NCdXR0b25zXCI7XHJcblxyXG5kZWNsYXJlIHZhciBISUJPQl9VVElMU19WRVI6IHN0cmluZztcclxuZGVjbGFyZSB2YXIgSElCT0JfVVRJTFNfQ0hBTkdFTE9HOiB7IHZlcnNpb246IHN0cmluZywgdGV4dDogc3RyaW5nW10gfVtdO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRpbWVsb2dVSVxyXG57XHJcblxyXG4gICAgcHJpdmF0ZSB0aW1lbG9nVUlPdXRlcj86IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHVibGljIHRpbWVsb2dVSUlubmVyPzogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHRvZ2dsZUJ1dHRvbj86IEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBkYXJrTW9kZUJ1dHRvbj86IEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgcHVibGljIG1vZGVsPzogVGltZWxvZ01vZGVsO1xyXG5cclxuICAgIHByaXZhdGUgc2hlZXREcm9wZG93bj86IEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBzaGVldERyb3Bkb3duT3B0aW9uczogeyBzaGVldDogVGltZWxvZ1NoZWV0LCBlbGVtZW50OiBIVE1MT3B0aW9uRWxlbWVudCB9W10gPSBbXTtcclxuICAgIHByaXZhdGUgc2VsZWN0ZWRTaGVldD86IFRpbWVsb2dTaGVldDtcclxuXHJcbiAgICBwcml2YXRlIHNoZWV0Q29udGFpbmVyPzogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHNoZWV0RGF0ZXM6IFRpbWVsb2dVSURhdGVDb250YWluZXJbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSB3ZWVrU3VtczogVGltZWxvZ1VJV2Vla1N1bVtdID0gW107XHJcbiAgICBwcml2YXRlIHNhdmVTdGF0dXM/OiBIVE1MU3BhbkVsZW1lbnQ7XHJcblxyXG4gICAgcHJpdmF0ZSBiYWxhbmNlTGFiZWw/OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByaXZhdGUgYmFsYW5jZVdhcm5pbmc/OiBIVE1MRGl2RWxlbWVudDtcclxuXHJcbiAgICBwcml2YXRlIHJlYXNvbnM6IEhpQm9iUmVhc29uW10gPSBbXTtcclxuXHJcbiAgICBwcml2YXRlIG9uRGFya01vZGVDaGFuZ2UgPSBuZXcgRXZlbnRIYW5kbGVyPGJvb2xlYW4+KCk7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBvblNob3c6IEV2ZW50SGFuZGxlcjxUaW1lbG9nVUk+ID0gbmV3IEV2ZW50SGFuZGxlcigpO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpXHJcbiAgICB7XHJcbiAgICAgICAgKHdpbmRvdyBhcyBhbnkpLnRpbWVsb2cgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuYWRkQnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGFkZEJ1dHRvbigpXHJcbiAgICB7XHJcbiAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXYuYXBwLWNvbnRlbnQgbmF2XCIpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBXYWl0LmZvcigxKTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtdG9nZ2xlLWJ0blwiO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwic2VudGltZW50X3Zlcnlfc2F0aXNmaWVkXCIpKTtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24udGl0bGUgPSBcIkhpQm9iIFV0aWxpdGllc1wiO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy50b2dnbGVWaXNpYmxlKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5zdHlsZS5wb3NpdGlvbiA9IFwiZml4ZWRcIjtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24uc3R5bGUuekluZGV4ID0gXCIxMFwiO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLnN0eWxlLnRvcCA9IFwiMFwiO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5zdHlsZS5yaWdodCA9IFwiMFwiO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnRvZ2dsZUJ1dHRvbik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVVJKCk7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZU1vZGVsKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAobG9jYXRpb24uaGFzaCA9PT0gXCIjdGwtdWlcIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMub25EYXJrTW9kZUNoYW5nZS5maXJlKHRoaXMuaXNEYXJrTW9kZSgpKTtcclxuXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgdG9nZ2xlVmlzaWJsZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRpbWVsb2dVSU91dGVyKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHRoaXMudGltZWxvZ1VJT3V0ZXIuc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVsb2dVSU91dGVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSBcIiN0bC11aVwiO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hlZXRDb250YWluZXIpIHRoaXMuc2hlZXRDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbD8uZmV0Y2hTaGVldHMoKTtcclxuICAgICAgICAgICAgVGltZWxvZ1VJLm9uU2hvdy5maXJlKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVsb2dVSU91dGVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgbG9jYXRpb24uaGFzaCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImluaXRpYWxcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGlzRGFya01vZGUoKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRsX2RhcmtfbW9kZVwiKSA9PT0gXCJ0cnVlXCI7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHRvZ2dsZURhcmtNb2RlKClcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5pc0RhcmtNb2RlKCkpIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGxfZGFya19tb2RlXCIsIFwiZmFsc2VcIik7XHJcbiAgICAgICAgZWxzZSBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRsX2RhcmtfbW9kZVwiLCBcInRydWVcIik7XHJcbiAgICAgICAgdGhpcy5vbkRhcmtNb2RlQ2hhbmdlLmZpcmUodGhpcy5pc0RhcmtNb2RlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlVUkoKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG4gICAgICAgIHN0eWxlLmlubmVySFRNTCA9IFRpbWVsb2dDc3M7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdHlsZSk7XHJcblxyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIuY2xhc3NOYW1lID0gXCJ0bC11aVwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHRoaXMudGltZWxvZ1VJT3V0ZXIpO1xyXG5cclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmNsYXNzTmFtZSA9IFwidGwtdWktaW5uZXJcIjtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSU91dGVyLmFwcGVuZCh0aGlzLnRpbWVsb2dVSUlubmVyKTtcclxuXHJcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtY2xvc2UtYnRuXCI7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImNsb3NlXCIpKTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy50b2dnbGVWaXNpYmxlKCk7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbik7XHJcblxyXG4gICAgICAgIHRoaXMuZGFya01vZGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIHRoaXMuZGFya01vZGVCdXR0b24uY2xhc3NOYW1lID0gXCJ0bC1kYXJrLW1vZGUtYnRuXCI7XHJcbiAgICAgICAgdGhpcy5kYXJrTW9kZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy50b2dnbGVEYXJrTW9kZSgpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQodGhpcy5kYXJrTW9kZUJ1dHRvbik7XHJcbiAgICAgICAgdGhpcy5vbkRhcmtNb2RlQ2hhbmdlLm9uKChkYXJrKSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGRhcmspIHRoaXMudGltZWxvZ1VJT3V0ZXI/LmNsYXNzTGlzdC5hZGQoXCJ0bC1kYXJrXCIpO1xyXG4gICAgICAgICAgICBlbHNlIHRoaXMudGltZWxvZ1VJT3V0ZXI/LmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1kYXJrXCIpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXJrTW9kZUJ1dHRvbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXJrTW9kZUJ1dHRvbi5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXJrTW9kZUJ1dHRvbi5hcHBlbmQoZGFyayA/IE1hdGVyaWFsSWNvbi5nZXQoXCJsaWdodF9tb2RlXCIpIDogTWF0ZXJpYWxJY29uLmdldChcImRhcmtfbW9kZVwiKSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMpO1xyXG5cclxuICAgICAgICBjb25zdCBzZXR0aW5zV2luZG93ID0gdGhpcy5jcmVhdGVTZXR0aW5nc1dpbmRvdygpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQoc2V0dGluc1dpbmRvdyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNldHRpbmdzQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBzZXR0aW5nc0J1dHRvbi5hcHBlbmQoTWF0ZXJpYWxJY29uLmdldChcInNldHRpbmdzXCIsIHRydWUpKTtcclxuICAgICAgICBzZXR0aW5nc0J1dHRvbi5hcHBlbmQoXCIgXCIgKyBISUJPQl9VVElMU19WRVIpO1xyXG4gICAgICAgIHNldHRpbmdzQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtdmVyc2lvbi1udW1iZXJcIjtcclxuICAgICAgICBzZXR0aW5nc0J1dHRvbi5vbmNsaWNrID0gKCkgPT4gc2V0dGluc1dpbmRvdy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtc2V0dGluZ3MtaGlkZGVuXCIpO1xyXG4gICAgICAgIHNldHRpbmdzQnV0dG9uLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xyXG4gICAgICAgIHNldHRpbmdzQnV0dG9uLnN0eWxlLnRleHREZWNvcmF0aW9uID0gXCJ1bmRlcmxpbmVcIjtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZENoaWxkKHNldHRpbmdzQnV0dG9uKTtcclxuXHJcblxyXG4gICAgICAgIGNvbnN0IHNoZWV0RHJvcGRvd25MYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgIHNoZWV0RHJvcGRvd25MYWJlbC5pbm5lclRleHQgPSBcIlNoZWV0OlwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQoc2hlZXREcm9wZG93bkxhYmVsKTtcclxuXHJcbiAgICAgICAgdGhpcy5zaGVldERyb3Bkb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcclxuICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd24uY2xhc3NOYW1lID0gXCJ0bC1zaGVldC1zZWxlY3RcIjtcclxuICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd24ub25jaGFuZ2UgPSAoKSA9PiB0aGlzLm9uU2VsZWN0ZWRTaGVldENoYW5nZSgpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQodGhpcy5zaGVldERyb3Bkb3duKTtcclxuXHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmNsYXNzTmFtZSA9IFwidGwtc2F2ZS1zdGF0dXNcIjtcclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMub25jbGljayA9ICgpID0+IHRoaXMub25TYXZlU3RhdHVzQ2xpY2soKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZCh0aGlzLnNhdmVTdGF0dXMpO1xyXG5cclxuICAgICAgICBjb25zdCBiYWxhbmNlUGFyZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBiYWxhbmNlUGFyZW50LmNsYXNzTmFtZSA9IFwidGwtYmFsYW5jZVwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kKGJhbGFuY2VQYXJlbnQpO1xyXG5cclxuICAgICAgICB0aGlzLmJhbGFuY2VMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5iYWxhbmNlTGFiZWwuaW5uZXJUZXh0ID0gXCJCYWxhbmNlOiBcIjtcclxuICAgICAgICB0aGlzLmJhbGFuY2VMYWJlbC5jbGFzc05hbWUgPSBcInRsLWJhbGFuY2UtbGFiZWxcIjtcclxuICAgICAgICBiYWxhbmNlUGFyZW50LmFwcGVuZCh0aGlzLmJhbGFuY2VMYWJlbCk7XHJcblxyXG4gICAgICAgIHRoaXMuYmFsYW5jZVdhcm5pbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuYmFsYW5jZVdhcm5pbmcuY2xhc3NOYW1lID0gXCJ0bC1iYWxhbmNlLXdhcm5pbmcgdGwtd2FybmluZyB0bC1oaWRkZW5cIjtcclxuICAgICAgICBiYWxhbmNlUGFyZW50LmFwcGVuZCh0aGlzLmJhbGFuY2VXYXJuaW5nKTtcclxuXHJcbiAgICAgICAgdGhpcy5zaGVldENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5zaGVldENvbnRhaW5lci5jbGFzc05hbWUgPSBcInRsLXNoZWV0XCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZCh0aGlzLnNoZWV0Q29udGFpbmVyKTtcclxuXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNyZWF0ZVNldHRpbmdzV2luZG93KClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IFwidGwtc2V0dGluZ3MgdGwtc2V0dGluZ3MtaGlkZGVuXCI7XHJcbiAgICAgICAgY29uc3QgYmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgYmFjay5jbGFzc05hbWUgPSBcInRsLXNldHRpbmdzLWJhY2tcIjtcclxuICAgICAgICBlbGVtZW50LmFwcGVuZChiYWNrKTtcclxuICAgICAgICBiYWNrLm9uY2xpY2sgPSAoKSA9PiBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0bC1zZXR0aW5ncy1oaWRkZW5cIik7XHJcblxyXG4gICAgICAgIGNvbnN0IGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBpbm5lci5jbGFzc05hbWUgPSBcInRsLXNldHRpbmdzLWlubmVyXCI7XHJcbiAgICAgICAgZWxlbWVudC5hcHBlbmQoaW5uZXIpO1xyXG5cclxuICAgICAgICBjb25zdCBzZXR0aW5nc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHNldHRpbmdzRWxlbWVudC5jbGFzc05hbWUgPSBcInRsLXNldHRpbmdzLXZlcnNpb25cIjtcclxuICAgICAgICBpbm5lci5hcHBlbmQoc2V0dGluZ3NFbGVtZW50KTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gb2YgVGltZWxvZ1VJU2V0dGluZ3NCdXR0b25zLmJ1dHRvbnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBidXR0b24uY2xhc3NOYW1lO1xyXG4gICAgICAgICAgICBlbGVtZW50LmFwcGVuZChNYXRlcmlhbEljb24uZ2V0KGJ1dHRvbi5pY29uKSk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kKGJ1dHRvbi50ZXh0KTtcclxuICAgICAgICAgICAgaWYgKGJ1dHRvbi50aXRsZSkgZWxlbWVudC5zdHlsZS5jdXJzb3IgPSBcImhlbHBcIjtcclxuICAgICAgICAgICAgZWxlbWVudC50aXRsZSA9IGJ1dHRvbi50aXRsZTtcclxuICAgICAgICAgICAgZWxlbWVudC5vbmNsaWNrID0gKCkgPT4gYnV0dG9uLm9uQ2xpY2sodGhpcyk7XHJcbiAgICAgICAgICAgIHNldHRpbmdzRWxlbWVudC5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGNoYW5nZWxvZyA9IEhJQk9CX1VUSUxTX0NIQU5HRUxPRztcclxuICAgICAgICBmb3IgKGNvbnN0IHZlcnNpb24gb2YgY2hhbmdlbG9nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgdmVyc2lvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICB2ZXJzaW9uRWxlbWVudC5jbGFzc05hbWUgPSBcInRsLXNldHRpbmdzLXZlcnNpb25cIjtcclxuICAgICAgICAgICAgaW5uZXIuYXBwZW5kKHZlcnNpb25FbGVtZW50KTtcclxuICAgICAgICAgICAgY29uc3QgdmVyc2lvblRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgdmVyc2lvblRpdGxlLmNsYXNzTmFtZSA9IFwidGwtc2V0dGluZ3MtdGl0bGVcIjtcclxuICAgICAgICAgICAgdmVyc2lvblRpdGxlLmlubmVyVGV4dCA9IHZlcnNpb24udmVyc2lvbjtcclxuICAgICAgICAgICAgdmVyc2lvbkVsZW1lbnQuYXBwZW5kKHZlcnNpb25UaXRsZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XHJcbiAgICAgICAgICAgIGxpc3QuY2xhc3NOYW1lID0gXCJ0bC1zZXR0aW5ncy1saXN0XCI7XHJcbiAgICAgICAgICAgIHZlcnNpb25FbGVtZW50LmFwcGVuZChsaXN0KTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCB0ZXh0IG9mIHZlcnNpb24udGV4dClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICAgICAgICAgICAgICB0ZXh0RWxlbWVudC5pbm5lclRleHQgPSB0ZXh0O1xyXG4gICAgICAgICAgICAgICAgbGlzdC5hcHBlbmQodGV4dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVNb2RlbCgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMubW9kZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLm9uRGF0ZVVwZGF0ZWQub2ZmKHRoaXMub25EYXRlVXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwub25SZWFzb25zVXBkYXRlZC5vZmYodGhpcy5vblJlYXNvbnNVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5vblNhdmVTdGF0dXNVcGRhdGVkLm9mZih0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLm9uU2hlZXRVcGRhdGVkLm9mZih0aGlzLm9uU2hlZXRVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5vblNoZWV0c1VwZGF0ZWQub2ZmKHRoaXMub25TaGVldHNVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG5ldyBUaW1lbG9nTW9kZWwoKTtcclxuICAgICAgICB0aGlzLm1vZGVsLm9uRGF0ZVVwZGF0ZWQub24odGhpcy5vbkRhdGVVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm1vZGVsLm9uUmVhc29uc1VwZGF0ZWQub24odGhpcy5vblJlYXNvbnNVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm1vZGVsLm9uU2F2ZVN0YXR1c1VwZGF0ZWQub24odGhpcy5vblNhdmVTdGF0dXNVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm1vZGVsLm9uU2hlZXRVcGRhdGVkLm9uKHRoaXMub25TaGVldFVwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25TaGVldHNVcGRhdGVkLm9uKHRoaXMub25TaGVldHNVcGRhdGVkLCB0aGlzKTtcclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5tb2RlbC5pbml0aWFsaXplKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGdldERhdGVDb250YWluZXIoZGF0YTogeyBzaGVldDogVGltZWxvZ1NoZWV0LCBkYXRlOiBUaW1lbG9nRGF0ZSB9KVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2hlZXQgPT09IGRhdGEuc2hlZXQgJiYgdGhpcy5zaGVldENvbnRhaW5lcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCBkYXRlQ29udGFpbmVyID0gdGhpcy5zaGVldERhdGVzLmZpbmQoZCA9PiBkLmRhdGUgPT09IGRhdGEuZGF0ZSk7XHJcbiAgICAgICAgICAgIGlmICghZGF0ZUNvbnRhaW5lcilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lciA9IHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSxcclxuICAgICAgICAgICAgICAgICAgICBlbnRyaWVzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBzdGFyQnV0dG9uOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhc3RlQnV0dG9uOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHdlZWtlbmREZXNjcmlwdGlvbjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcclxuICAgICAgICAgICAgICAgICAgICBub0VudHJpZXNXYXJuaW5nOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaGVldERhdGVzLnB1c2goZGF0ZUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5jbGFzc05hbWUgPSBcInRsLWRhdGVcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hlZXRDb250YWluZXIuYXBwZW5kQ2hpbGQoZGF0ZUNvbnRhaW5lci5wYXJlbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChuZXcgRGF0ZShkYXRhLmRhdGUuZGF0ZSkuZ2V0RGF5KCkgPT09IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2Vla1NlcGVyYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgd2Vla1NlcGVyYXRvci5jbGFzc05hbWUgPSBcInRsLXdlZWstc2VwZXJhdG9yXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGVldENvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWVrU2VwZXJhdG9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmQoZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8uc2V0RmF2b3JpdGVkRGF0ZShkYXRhLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtc3Rhci1idXR0b24gdGwtc2hvdy1vbi1ob3ZlclwiO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLnRpdGxlID0gXCJGYXZvcml0ZSBEYXlcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnRpdGxlLmNsYXNzTmFtZSA9IFwidGwtZGF0ZS1sYWJlbFwiO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci50aXRsZS5pbm5lclRleHQgPSBuZXcgRGF0ZShkYXRhLmRhdGUuZGF0ZSkudG9EYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRlLm5vbldvcmtpbmdEYXkpIGRhdGVDb250YWluZXIudGl0bGUuY2xhc3NMaXN0LmFkZChcInRsLWRhdGUtbGFiZWwtd2Vla2VuZFwiKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmFwcGVuZChkYXRlQ29udGFpbmVyLnRpdGxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLndlZWtlbmREZXNjcmlwdGlvbi5jbGFzc05hbWUgPSBcInRsLXdlZWtlbmQtZGVzY3JpcHRpb25cIjtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmFwcGVuZChkYXRlQ29udGFpbmVyLndlZWtlbmREZXNjcmlwdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5ub0VudHJpZXNXYXJuaW5nLmNsYXNzTmFtZSA9IFwidGwtbm8tZW50cmllcy13YXJuaW5nXCI7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmQoZGF0ZUNvbnRhaW5lci5ub0VudHJpZXNXYXJuaW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEuc2hlZXQubG9ja2VkKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJhZGRcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgYWRkLmNsYXNzTmFtZSA9IFwidGwtYWRkLWVudHJ5LWJ0biB0bC1zaG93LW9uLWhvdmVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm1vZGVsPy5uZXdFbnRyeShkYXRhLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmFwcGVuZChhZGQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJzd2l0Y2hfYWNjZXNzX3Nob3J0Y3V0X2FkZFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLnRpdGxlID0gXCJQYXN0ZSBmcm9tIEZhdm9yaXRlIERheVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24uY2xhc3NOYW1lID0gXCJ0bC1wYXN0ZS1idG4gdGwtc2hvdy1vbi1ob3ZlclwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMubW9kZWw/LnBhc3RlRnJvbVN0YXJyZWQoZGF0YS5kYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmQoZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFRvV2Vla1N1bShkYXRlQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZUNvbnRhaW5lcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGdldEVudHJ5Q29udGFpbmVyKGRhdGE6IHsgc2hlZXQ6IFRpbWVsb2dTaGVldCwgZGF0ZTogVGltZWxvZ0RhdGUgfSwgZGF0ZUNvbnRhaW5lcjogVGltZWxvZ1VJRGF0ZUNvbnRhaW5lciwgZW50cnk6IFRpbWVsb2dFbnRyeSlcclxuICAgIHtcclxuICAgICAgICBsZXQgZW50cnlDb250YWluZXIgPSBkYXRlQ29udGFpbmVyLmVudHJpZXMuZmluZChwID0+IHAuZW50cnkgPT09IGVudHJ5KTtcclxuICAgICAgICBpZiAoIWVudHJ5Q29udGFpbmVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBlbnRyeSxcclxuICAgICAgICAgICAgICAgIHBhcmVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcclxuICAgICAgICAgICAgICAgIHN0YXJ0SG91cjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLFxyXG4gICAgICAgICAgICAgICAgZW5kSG91cjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXHJcbiAgICAgICAgICAgICAgICByZWFzb246IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIiksXHJcbiAgICAgICAgICAgICAgICBjb21tZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXHJcbiAgICAgICAgICAgICAgICBjb21tZW50QnV0dG9uOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpLFxyXG4gICAgICAgICAgICAgICAgbm9SZWFzb25XYXJuaW5nOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGRhdGVDb250YWluZXIuZW50cmllcy5wdXNoKGVudHJ5Q29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5jbGFzc05hbWUgPSBcInRsLWVudHJ5XCI7XHJcbiAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLnBhcmVudCk7XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5zdGFydEhvdXIudHlwZSA9IFwidGltZVwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5zdGFydEhvdXIuY2xhc3NOYW1lID0gXCJ0bC1lbnRyeS1zdGFydFwiO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zaGVldC5sb2NrZWQpIGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91ci5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91ci5vbmNoYW5nZSA9ICgpID0+IFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSBlbnRyeS5zdGFydEhvdXIgKyBlbnRyeS5sZW5ndGhIb3VycztcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWw/LmNoYW5nZVN0YXJ0SG91cihkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpLCBEYXRlcy5wYXJzZVRpbWVUb2hvdXJzKGVudHJ5Q29udGFpbmVyPy5zdGFydEhvdXIudmFsdWUgPz8gXCIwODowMFwiKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBOdW1iZXJzLnJvdW5kKGVuZCAtIGVudHJ5LnN0YXJ0SG91ciwgMik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsPy5jaGFuZ2VMZW5ndGhIb3VycyhkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpLCBsZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5zdGFydEhvdXIpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZW5kTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICAgICAgZW5kTGFiZWwuY2xhc3NOYW1lID0gXCJ0bC1lbmQtbGFiZWxcIlxyXG4gICAgICAgICAgICBlbmRMYWJlbC5pbm5lclRleHQgPSBcIi1cIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVuZExhYmVsKTtcclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmVuZEhvdXIudHlwZSA9IFwidGltZVwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5lbmRIb3VyLmNsYXNzTmFtZSA9IFwidGwtZW50cnktZW5kXCI7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnNoZWV0LmxvY2tlZCkgZW50cnlDb250YWluZXIuZW5kSG91ci5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmVuZEhvdXIub25jaGFuZ2UgPSAoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW50cnlDb250YWluZXI/LmVuZEhvdXIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gTnVtYmVycy5yb3VuZChEYXRlcy5wYXJzZVRpbWVUb2hvdXJzKGVudHJ5Q29udGFpbmVyLmVuZEhvdXIudmFsdWUpIC0gZW50cnkuc3RhcnRIb3VyLCAyKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGVsPy5jaGFuZ2VMZW5ndGhIb3VycyhkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpLCBsZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5lbmRIb3VyKTtcclxuXHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5yZWFzb24ub25jaGFuZ2UgPSAoKSA9PiB0aGlzLm1vZGVsPy5jaGFuZ2VSZWFzb24oZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgZW50cnlDb250YWluZXI/LnJlYXNvbi52YWx1ZSA/PyBcIlwiKTtcclxuICAgICAgICAgICAgaWYgKGRhdGEuc2hlZXQubG9ja2VkKSBlbnRyeUNvbnRhaW5lci5yZWFzb24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5yZWFzb24uY2xhc3NOYW1lID0gXCJ0bC1lbnRyeS1yZWFzb25cIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLnJlYXNvbik7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUmVhc29uc0Ryb3Bkb3duKGVudHJ5Q29udGFpbmVyLnJlYXNvbik7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGF0ZUNvbnRhaW5lci5lbnRyaWVzLmxlbmd0aCA9PT0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdW1Ib3VycyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdW1Ib3Vycy5jbGFzc05hbWUgPSBcInRsLXN1bS1ob3Vyc1wiO1xyXG4gICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZChkYXRlQ29udGFpbmVyLnN1bUhvdXJzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubGVuZ3RoLnR5cGUgPSBcIm51bWJlclwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5sZW5ndGguY2xhc3NOYW1lID0gXCJ0bC1lbnRyeS1sZW5ndGhcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubGVuZ3RoLnN0ZXAgPSBcIjAuMDFcIjtcclxuICAgICAgICAgICAgaWYgKGRhdGEuc2hlZXQubG9ja2VkKSBlbnRyeUNvbnRhaW5lci5sZW5ndGguZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5sZW5ndGgub25jaGFuZ2UgPSAoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsPy5jaGFuZ2VMZW5ndGhIb3VycyhkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpLCBIb3VyU2NhbGluZy51bnNjYWxlKHBhcnNlRmxvYXQoZW50cnlDb250YWluZXI/Lmxlbmd0aC52YWx1ZSB8fCBcIjBcIikpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICAgICAgZHVyYXRpb25MYWJlbC5jbGFzc05hbWUgPSBcInRsLWR1cmF0aW9uLWxhYmVsXCI7XHJcbiAgICAgICAgICAgIGR1cmF0aW9uTGFiZWwuaW5uZXJUZXh0ID0gSG91clNjYWxpbmcuZ2V0VW5pdE5hbWUoKTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGR1cmF0aW9uTGFiZWwpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFkYXRhLnNoZWV0LmxvY2tlZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLWFkZC1jb21tZW50LWJ0biB0bC1zaG93LW9uLWhvdmVyXCI7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm1vZGVsPy50b2dnbGVDb21tZW50KGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSkpO1xyXG4gICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLmNvbW1lbnRCdXR0b24pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgICAgICByZW1vdmUuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImRlbGV0ZVwiKSk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmUuY2xhc3NOYW1lID0gXCJ0bC1yZW1vdmUtZW50cnktYnRuIHRsLXNob3ctb24taG92ZXJcIjtcclxuICAgICAgICAgICAgICAgIHJlbW92ZS5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8uZGVsZXRlRW50cnkoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSk7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQocmVtb3ZlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubm9SZWFzb25XYXJuaW5nLmFwcGVuZChNYXRlcmlhbEljb24uZ2V0KFwid2FybmluZ1wiLCB0cnVlKSk7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLm5vUmVhc29uV2FybmluZy5hcHBlbmQoXCIgTm8gcmVhc29uIHNlbGVjdGVkIVwiKTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubm9SZWFzb25XYXJuaW5nLmNsYXNzTmFtZSA9IFwidGwtbm8tcmVhc29uLXdhcm5pbmcgdGwtd2FybmluZyB0bC1oYXMtcmVhc29uXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5ub1JlYXNvbldhcm5pbmcpO1xyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC50eXBlID0gXCJ0ZXh0XCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQucGxhY2Vob2xkZXIgPSBcIldyaXRlIGEgbm90ZS4uLlwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50LnRpdGxlID0gXCJXcml0ZSBhIG5vdGUuLi5cIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC5jbGFzc05hbWUgPSBcInRsLWVudHJ5LWNvbW1lbnRcIjtcclxuICAgICAgICAgICAgaWYgKGRhdGEuc2hlZXQubG9ja2VkKSBlbnRyeUNvbnRhaW5lci5jb21tZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC5vbmNoYW5nZSA9ICgpID0+IFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsPy5jaGFuZ2VDb21tZW50KGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIGVudHJ5Q29udGFpbmVyPy5jb21tZW50LnZhbHVlID8/IFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5jb21tZW50KTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlbnRyeUNvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYWRkVG9XZWVrU3VtKGRhdGU6IFRpbWVsb2dVSURhdGVDb250YWluZXIpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMud2Vla1N1bXMubGVuZ3RoIDwgMSB8fCBuZXcgRGF0ZShkYXRlLmRhdGUuZGF0ZSkuZ2V0RGF5KCkgPT09IDApIC8vSWYgdGhpcyBpcyB0aGUgZmlyc3QgZGF5LCBvciBhIHN1bmRheSwgY3JlYXRlIGEgbmV3IHdlZWsgZm9yIGl0LlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgd2Vla1N1bSA9IHtcclxuICAgICAgICAgICAgICAgIGRhdGVzOiBbZGF0ZV0sXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHdlZWtTdW0uZWxlbWVudC5jbGFzc05hbWUgPSBcInRsLXdlZWstc3VtXCI7XHJcbiAgICAgICAgICAgIHRoaXMud2Vla1N1bXMucHVzaCh3ZWVrU3VtKTtcclxuICAgICAgICAgICAgZGF0ZS5wYXJlbnQuYXBwZW5kQ2hpbGQod2Vla1N1bS5lbGVtZW50KTtcclxuICAgICAgICAgICAgZGF0ZS5wYXJlbnQuc3R5bGUubWFyZ2luVG9wID0gXCIzOHB4XCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMud2Vla1N1bXNbdGhpcy53ZWVrU3Vtcy5sZW5ndGggLSAxXS5kYXRlcy5wdXNoKGRhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgb25EYXRlVXBkYXRlZChkYXRhOiB7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGRhdGU6IFRpbWVsb2dEYXRlIH0pXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTaGVldCA9PT0gZGF0YS5zaGVldCAmJiB0aGlzLnNoZWV0Q29udGFpbmVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IGRhdGVDb250YWluZXIgPSB0aGlzLmdldERhdGVDb250YWluZXIoZGF0YSk7XHJcbiAgICAgICAgICAgIGlmIChkYXRlQ29udGFpbmVyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGRhdGEuZGF0ZS5lbnRyaWVzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBlbnRyeUNvbnRhaW5lciA9IHRoaXMuZ2V0RW50cnlDb250YWluZXIoZGF0YSwgZGF0ZUNvbnRhaW5lciwgZW50cnkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5zdGFydEhvdXIudmFsdWUgPSBEYXRlcy5mb3JtYXRIb3VyKGVudHJ5LnN0YXJ0SG91cik7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIubGVuZ3RoLnZhbHVlID0gTnVtYmVycy5yb3VuZChIb3VyU2NhbGluZy5zY2FsZShlbnRyeS5sZW5ndGhIb3VycyksIDIpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuZW5kSG91ci52YWx1ZSA9IERhdGVzLmZvcm1hdEhvdXIoZW50cnkuc3RhcnRIb3VyICsgZW50cnkubGVuZ3RoSG91cnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnJlYXNvbi52YWx1ZSA9IGVudHJ5LnJlYXNvbklkO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQudmFsdWUgPSBlbnRyeS5jb21tZW50ID8/IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIWVudHJ5LnJlYXNvbklkKSBlbnRyeUNvbnRhaW5lci5ub1JlYXNvbldhcm5pbmcuY2xhc3NMaXN0LmFkZChcInRsLWhhcy1yZWFzb25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBlbnRyeUNvbnRhaW5lci5ub1JlYXNvbldhcm5pbmcuY2xhc3NMaXN0LnJlbW92ZShcInRsLWhhcy1yZWFzb25cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnRCdXR0b24udGl0bGUgPSBlbnRyeS5oYXNDb21tZW50ID8gXCJSZW1vdmUgbm90ZVwiIDogXCJBZGQgbm90ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnRCdXR0b24uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoZW50cnkuaGFzQ29tbWVudCA/IFwic3BlYWtlcl9ub3Rlc19vZmZcIiA6IFwic3BlYWtlcl9ub3Rlc1wiKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeS5oYXNDb21tZW50KSBlbnRyeUNvbnRhaW5lci5wYXJlbnQuY2xhc3NMaXN0LmFkZChcInRsLWhhcy1jb21tZW50XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgZW50cnlDb250YWluZXIucGFyZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1oYXMtY29tbWVudFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZWRFbnRyaWVzID0gZGF0ZUNvbnRhaW5lci5lbnRyaWVzLmZpbHRlcihlbnRyeSA9PiAhZGF0YS5kYXRlLmVudHJpZXMuZmluZChlID0+IGUgPT09IGVudHJ5LmVudHJ5KSk7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLmVudHJpZXMgPSBkYXRlQ29udGFpbmVyLmVudHJpZXMuZmlsdGVyKGVudHJ5ID0+ICFyZW1vdmVkRW50cmllcy5pbmNsdWRlcyhlbnRyeSkpO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlZEVudHJpZXMuZm9yRWFjaChlID0+IGUucGFyZW50LnJlbW92ZSgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZUNvbnRhaW5lci5zdW1Ib3VycylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdW0gPSBOdW1iZXJzLnN1bShkYXRhLmRhdGUuZW50cmllcy5tYXAoZSA9PiBlLmxlbmd0aEhvdXJzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdW1Ib3Vycy5pbm5lclRleHQgPSBgJHtIb3VyU2NhbGluZy5mb3JtYXQoTnVtYmVycy5yb3VuZChzdW0sIDIpKX1gO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmRpc2FibGVkID0gZGF0YS5kYXRlLmZhdm9yaXRlZDtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwidGwtZmF2b3JpdGVcIik7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcInN0YXJcIiwgZGF0YS5kYXRlLmZhdm9yaXRlZCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0ZS5mYXZvcml0ZWQpIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwidGwtZmF2b3JpdGVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGVDb250YWluZXIuZW50cmllcy5sZW5ndGggPiAwIHx8IGRhdGVDb250YWluZXIuZGF0ZS5mYXZvcml0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwidGwtaGlkZS1mYXZvcml0ZS1idXR0b25cIik7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwidGwtaGlkZS1mYXZvcml0ZS1idXR0b25cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci50aXRsZS50aXRsZSA9IGRhdGEuZGF0ZS5kYXRlRGVzY3JpcHRpb24gPz8gXCJcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRlLm5vbldvcmtpbmdEYXkgJiYgZGF0YS5kYXRlLmVudHJpZXMubGVuZ3RoIDwgMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLndlZWtlbmREZXNjcmlwdGlvbi5jbGFzc0xpc3QucmVtb3ZlKFwidGwtd2Vla2VuZC1kZXNjcmlwdGlvbi1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci53ZWVrZW5kRGVzY3JpcHRpb24uaW5uZXJUZXh0ID0gZGF0YS5kYXRlLmRhdGVEZXNjcmlwdGlvbiA/PyBcIlwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIud2Vla2VuZERlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoXCJ0bC13ZWVrZW5kLWRlc2NyaXB0aW9uLWhpZGRlblwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZUNvbnRhaW5lci5kYXRlLmhvdXJzVG9Xb3JrID4gMCAmJiBkYXRlQ29udGFpbmVyLmVudHJpZXMubGVuZ3RoIDwgMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLm5vRW50cmllc1dhcm5pbmcuY2xhc3NMaXN0LnJlbW92ZShcInRsLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLm5vRW50cmllc1dhcm5pbmcuY2xhc3NMaXN0LmFkZChcInRsLXdhcm5pbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VtID0gTnVtYmVycy5zdW0oZGF0YS5kYXRlLmVudHJpZXMubWFwKGUgPT4gZS5sZW5ndGhIb3VycykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIubm9FbnRyaWVzV2FybmluZy5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIubm9FbnRyaWVzV2FybmluZy5hcHBlbmQoTWF0ZXJpYWxJY29uLmdldChcIndhcm5pbmdcIiwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIubm9FbnRyaWVzV2FybmluZy5hcHBlbmQoYCAke051bWJlcnMucm91bmQoSG91clNjYWxpbmcuc2NhbGUoc3VtKSwgMil9IC8gJHtIb3VyU2NhbGluZy5mb3JtYXQoTnVtYmVycy5yb3VuZChkYXRlQ29udGFpbmVyLmRhdGUuaG91cnNUb1dvcmssIDIpKX1gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLm5vRW50cmllc1dhcm5pbmcuY2xhc3NMaXN0LmFkZChcInRsLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3Qgd2Vla1N1bSA9IHRoaXMud2Vla1N1bXMuZmluZCh3ID0+IHcuZGF0ZXMuc29tZShkID0+IGQuZGF0ZSA9PT0gZGF0YS5kYXRlKSk7XHJcbiAgICAgICAgICAgIGlmICh3ZWVrU3VtKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdW0gPSBOdW1iZXJzLnN1bSh3ZWVrU3VtLmRhdGVzLm1hcChkID0+IE51bWJlcnMuc3VtKGQuZW50cmllcy5tYXAoZSA9PiBlLmVudHJ5Lmxlbmd0aEhvdXJzKSkpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsSG91cnMgPSBOdW1iZXJzLnN1bSh3ZWVrU3VtLmRhdGVzLm1hcChkID0+IGQuZGF0ZS5ob3Vyc1RvV29yaykpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd2Vla051bWJlciA9IERhdGVzLmdldFdlZWtOdW1iZXJGcm9tRGF0ZSh3ZWVrU3VtLmRhdGVzWzBdLmRhdGUuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB3ZWVrU3VtLmVsZW1lbnQuaW5uZXJIVE1MID0gYDxiPldlZWsgJHt3ZWVrTnVtYmVyfTwvYj46ICR7TnVtYmVycy5yb3VuZChIb3VyU2NhbGluZy5zY2FsZShzdW0pLCAyKX0gLyAke0hvdXJTY2FsaW5nLmZvcm1hdChOdW1iZXJzLnJvdW5kKHRvdGFsSG91cnMsIDIpKX1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudXBkYXRlQmFsYW5jZSgpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSB1cGRhdGVSZWFzb25zRHJvcGRvd24oc2VsZWN0OiBIVE1MU2VsZWN0RWxlbWVudClcclxuICAgIHtcclxuICAgICAgICBzZWxlY3QuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICBmb3IgKGNvbnN0IHJlYXNvbiBvZiB0aGlzLnJlYXNvbnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSByZWFzb24uc2VydmVySWQ7XHJcbiAgICAgICAgICAgIG9wdGlvbi5pbm5lclRleHQgPSByZWFzb24udmFsdWU7XHJcbiAgICAgICAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgb25SZWFzb25zVXBkYXRlZChyZWFzb25zOiBIaUJvYlJlYXNvbltdKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucmVhc29ucyA9IHJlYXNvbnM7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZGF0ZSBvZiB0aGlzLnNoZWV0RGF0ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGRhdGUuZW50cmllcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSZWFzb25zRHJvcGRvd24oZW50cnkucmVhc29uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgb25TYXZlU3RhdHVzVXBkYXRlZChzdGF0dXM6IFRpbWVsb2dTYXZlU3RhdHVzKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5zYXZlU3RhdHVzKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1zdWNjZXNzXCIpO1xyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtd2FybmluZ1wiKTtcclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NMaXN0LnJlbW92ZShcInRsLWNsaWNrYWJsZVwiKTtcclxuICAgICAgICBpZiAoc3RhdHVzID09PSBUaW1lbG9nU2F2ZVN0YXR1cy5TYXZlZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiY2xvdWRfZG9uZVwiLCB0cnVlKSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmQoXCIgU2F2ZWRcIik7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc0xpc3QuYWRkKFwidGwtc3VjY2Vzc1wiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gVGltZWxvZ1NhdmVTdGF0dXMuV2FpdGluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwicGVuZGluZ1wiKSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmQoXCIgUGVuZGluZy4uLlwiKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RhdHVzID09PSBUaW1lbG9nU2F2ZVN0YXR1cy5TYXZpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImNsb3VkX3VwbG9hZFwiKSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmQoXCIgU2F2aW5nLi4uXCIpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdGF0dXMgPT09IFRpbWVsb2dTYXZlU3RhdHVzLkVycm9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJjbG91ZF9vZmZcIikpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kKFwiIEZhaWxlZCFcIik7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc0xpc3QuYWRkKFwidGwtd2FybmluZ1wiKTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmNsYXNzTGlzdC5hZGQoXCJ0bC1jbGlja2FibGVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBvblNhdmVTdGF0dXNDbGljaygpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNhdmVTdGF0dXM/LmNsYXNzTGlzdC5jb250YWlucyhcInRsLWNsaWNrYWJsZVwiKSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMubW9kZWw/LnNhdmUoKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgb25TaGVldFVwZGF0ZWQoc2hlZXQ6IFRpbWVsb2dTaGVldClcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5zaGVldERyb3Bkb3duICYmICF0aGlzLnNoZWV0RHJvcGRvd25PcHRpb25zLmZpbmQocyA9PiBzLnNoZWV0ID09PSBzaGVldCkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSBzaGVldC5pZC50b1N0cmluZygpO1xyXG4gICAgICAgICAgICBvcHRpb24uaW5uZXJUZXh0ID0gYCR7bmV3IERhdGUoc2hlZXQuc3RhcnQpLnRvRGF0ZVN0cmluZygpfSAtICR7bmV3IERhdGUoc2hlZXQuZW5kKS50b0RhdGVTdHJpbmcoKX0ke3NoZWV0LmxvY2tlZCA/IFwiIChsb2NrZWQpXCIgOiBcIlwifWA7XHJcbiAgICAgICAgICAgIHRoaXMuc2hlZXREcm9wZG93bk9wdGlvbnMucHVzaCh7IHNoZWV0OiBzaGVldCwgZWxlbWVudDogb3B0aW9uIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd24uYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTaGVldCA9PT0gc2hlZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaGVldENvbnRhaW5lcikgdGhpcy5zaGVldENvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0RGF0ZXMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy53ZWVrU3VtcyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2Ygc2hlZXQuZGF0ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51cGRhdGVCYWxhbmNlKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uU2hlZXRzVXBkYXRlZChzaGVldHM6IFRpbWVsb2dTaGVldFtdKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLnNoZWV0RHJvcGRvd24pIHRoaXMuc2hlZXREcm9wZG93bi5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuc2hlZXREcm9wZG93bk9wdGlvbnMgPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHNoZWV0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMub25TaGVldFVwZGF0ZWQoc2hlZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9uU2VsZWN0ZWRTaGVldENoYW5nZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25TZWxlY3RlZFNoZWV0Q2hhbmdlKClcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2hlZXREcm9wZG93bikgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0aGlzLnNoZWV0Q29udGFpbmVyKSB0aGlzLnNoZWV0Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5zaGVldERhdGVzID0gW107XHJcbiAgICAgICAgY29uc3QgdmFsID0gdGhpcy5zaGVldERyb3Bkb3duLnZhbHVlO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTaGVldCA9IHRoaXMuc2hlZXREcm9wZG93bk9wdGlvbnMuZmluZChvID0+IG8uZWxlbWVudC52YWx1ZSA9PT0gdmFsKT8uc2hlZXQ7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTaGVldCAmJiB0aGlzLm1vZGVsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5mZXRjaFNoZWV0KHRoaXMuc2VsZWN0ZWRTaGVldC5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyB1cGRhdGVCYWxhbmNlKClcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMubW9kZWwgfHwgIXRoaXMuYmFsYW5jZUxhYmVsIHx8ICF0aGlzLnNlbGVjdGVkU2hlZXQpIHJldHVybjtcclxuICAgICAgICBjb25zdCBiYWxhbmNlID0gYXdhaXQgdGhpcy5tb2RlbC5nZXRGbGV4U3RhdHVzKCk7XHJcbiAgICAgICAgY29uc3QgdG90YWxCYWxhbmNlID0gTnVtYmVycy5yb3VuZChiYWxhbmNlLmJhbGFuY2UsIDIpO1xyXG4gICAgICAgIHRoaXMuYmFsYW5jZUxhYmVsLmlubmVyVGV4dCA9IGBGbGV4OiAke0hvdXJTY2FsaW5nLmZvcm1hdCh0b3RhbEJhbGFuY2UpfSR7dG90YWxCYWxhbmNlID09PSAwID8gXCIg8J+ls1wiIDogXCJcIn1gO1xyXG5cclxuICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nPy5jbGFzc0xpc3QuYWRkKFwidGwtaGlkZGVuXCIpO1xyXG4gICAgICAgIGlmIChiYWxhbmNlLm92ZXJkdWVEYXRlcy5sZW5ndGggKyBiYWxhbmNlLndhcm5pbmdEYXRlcy5sZW5ndGggPiAwICYmIHRoaXMuYmFsYW5jZVdhcm5pbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBwb2xpY3kgPSB0aGlzLm1vZGVsLmdldEZsZXhQb2xpY3koKTtcclxuICAgICAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgIHRoaXMuYmFsYW5jZVdhcm5pbmcuYXBwZW5kKE1hdGVyaWFsSWNvbi5nZXQoXCJ3YXJuaW5nXCIsIHRydWUpKTtcclxuICAgICAgICAgICAgaWYgKGJhbGFuY2Uub3ZlcmR1ZURhdGVzLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFsYW5jZVdhcm5pbmcuYXBwZW5kKGBZb3UgaGF2ZSAke2JhbGFuY2Uub3ZlcmR1ZURhdGVzLmxlbmd0aH0gdW5iYWxhbmNlZCBmbGV4IGRhdGUke2JhbGFuY2Uub3ZlcmR1ZURhdGVzLmxlbmd0aCA9PT0gMSA/IFwiXCIgOiBcInNcIn0gb2xkZXIgdGhhbiAke3BvbGljeS5wcmV2aW91c0RheXNJbmNsdWRlZH0gZGF5cyFgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFsYW5jZVdhcm5pbmcudGl0bGUgKz0gYE92ZXJkdWUgZGF0ZXM6ICR7YmFsYW5jZS5vdmVyZHVlRGF0ZXMubWFwKGQgPT4gRGF0ZXMuZm9ybWF0KGQuZGF0ZSwgZmFsc2UpKS5qb2luKFwiLCBcIil9YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChiYWxhbmNlLndhcm5pbmdEYXRlcy5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nLmFwcGVuZChgJHtiYWxhbmNlLndhcm5pbmdEYXRlcy5sZW5ndGh9IHVuYmFsYW5jZWQgZmxleCBkYXRlJHtiYWxhbmNlLndhcm5pbmdEYXRlcy5sZW5ndGggPT09IDEgPyBcIlwiIDogXCJzXCJ9IHdpbGwgc29vbiBiZSBvbGRlciB0aGFuICR7cG9saWN5LnByZXZpb3VzRGF5c0luY2x1ZGVkfSBkYXlzIWApO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZy50aXRsZSA9IFwiXCI7XHJcbiAgICAgICAgICAgIGlmIChiYWxhbmNlLm92ZXJkdWVEYXRlcy5sZW5ndGggPiAwKSB0aGlzLmJhbGFuY2VXYXJuaW5nLnRpdGxlICs9IGBPdmVyZHVlIGRhdGVzOiAke2JhbGFuY2Uub3ZlcmR1ZURhdGVzLm1hcChkID0+IGAke0RhdGVzLmZvcm1hdChkLmRhdGUsIGZhbHNlKX0gKCR7ZC5yZWFsbG9jYXRlZEJhbGFuY2V9aClgKS5qb2luKFwiLCBcIil9YDtcclxuICAgICAgICAgICAgaWYgKGJhbGFuY2Uud2FybmluZ0RhdGVzLmxlbmd0aCA+IDApIHRoaXMuYmFsYW5jZVdhcm5pbmcudGl0bGUgKz0gYCR7dGhpcy5iYWxhbmNlV2FybmluZy50aXRsZS5sZW5ndGggPiAwID8gXCJcXG5cIiA6IFwiXCJ9U29vbiBvdmVyZHVlIGRhdGVzOiAke2JhbGFuY2Uud2FybmluZ0RhdGVzLm1hcChkID0+IGAke0RhdGVzLmZvcm1hdChkLmRhdGUsIGZhbHNlKX0gKCR7ZC5yZWFsbG9jYXRlZEJhbGFuY2V9aClgKS5qb2luKFwiLCBcIil9YDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYmFsYW5jZVdhcm5pbmcuYXBwZW5kKFwiIFwiKTtcclxuICAgICAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZy5hcHBlbmQoTWF0ZXJpYWxJY29uLmdldChcImluZm9cIiwgZmFsc2UpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGZhdm9yaXRlID0gYXdhaXQgdGhpcy5tb2RlbC5nZXRGYXZvcml0ZWREYXRlKCk7XHJcbiAgICAgICAgaWYgKGZhdm9yaXRlKSB0aGlzLnNoZWV0Q29udGFpbmVyPy5jbGFzc0xpc3QuYWRkKFwidGwtaGFzLWZhdm9yaXRlXCIpO1xyXG4gICAgICAgIGVsc2UgdGhpcy5zaGVldENvbnRhaW5lcj8uY2xhc3NMaXN0LnJlbW92ZShcInRsLWhhcy1mYXZvcml0ZVwiKTtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgY29uc3QgVGltZWxvZ0NzcyA9IGBcclxuLnRsLXRvZ2dsZS1idG5cclxue1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgYmFja2dyb3VuZDogbm9uZTtcclxuICAgIGZvbnQtc2l6ZTogMmVtO1xyXG59XHJcbi50bC1jbG9zZS1idG5cclxue1xyXG4gICAgZm9udC1zaXplOiAyZW07XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICByaWdodDogNXB4O1xyXG59XHJcbi50bC11aVxyXG57XHJcbiAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICB6LWluZGV4OiAxMDAwO1xyXG4gICAgaW5zZXQ6IDBweDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gICAgb3ZlcmZsb3cteTogc2Nyb2xsO1xyXG4gICAgcGFkZGluZzogMTBweDtcclxufSAgICAgICAgXHJcbi50bC1kYXRlXHJcbntcclxuICAgIG1hcmdpbi10b3A6IDEwcHg7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgZ3JheTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxufVxyXG4udGwtc2F2ZS1zdGF0dXMsIC50bC1hZGQtZW50cnktYnRuXHJcbntcclxuICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xyXG59XHJcbi50bC1lbnRyeVxyXG57XHJcbiAgICBtYXJnaW4tdG9wOiA1cHg7XHJcbn1cclxuLnRsLWVudHJ5ID4gKlxyXG57XHJcbiAgICBtYXJnaW4tbGVmdDogNXB4O1xyXG59XHJcbi50bC1lbnRyeSA+IGlucHV0W3R5cGU9bnVtYmVyXVxyXG57XHJcbiAgICB3aWR0aDogNTBweDtcclxufVxyXG4udGwtZW50cnkgPiBpbnB1dFt0eXBlPXRpbWVdXHJcbntcclxuICAgIHdpZHRoOiA3NXB4O1xyXG59XHJcbi50bC1zYXZlLXN0YXR1c1xyXG57XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG4udGwtc2hlZXQtc2VsZWN0XHJcbntcclxuICAgIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbn1cclxuLnRsLWRhdGUtbGFiZWxcclxue1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuLnRsLWRhdGUtbGFiZWwudGwtZGF0ZS1sYWJlbC13ZWVrZW5kXHJcbntcclxuICAgIGZvbnQtd2VpZ2h0OiBpbml0aWFsO1xyXG4gICAgZm9udC1zdHlsZTogaXRhbGljO1xyXG4gICAgY29sb3I6IGdyYXk7XHJcbn1cclxuLnRsLWVudHJ5LXJlYXNvbiBcclxue1xyXG4gICAgcGFkZGluZzogM3B4O1xyXG59XHJcbi50bC1yZW1vdmUtZW50cnktYnRuXHJcbntcclxuICAgIGZsb2F0OiByaWdodDtcclxufVxyXG4udGwtd2Vlay1zZXBlcmF0b3Jcclxue1xyXG4gICAgbWFyZ2luLXRvcDogNTdweDtcclxufVxyXG4udGwtYmFsYW5jZS1sYWJlbFxyXG57XHJcbiAgICBtYXJnaW46IDVweDtcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxufVxyXG4udGwtYmFsYW5jZS1oZWxwXHJcbntcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgIGN1cnNvcjogaGVscDtcclxufVxyXG5cclxuLnRsLXVpLWlubmVyXHJcbntcclxuICAgIGRpc3BsYXk6IHRhYmxlO1xyXG4gICAgbWFyZ2luLWxlZnQ6IGF1dG87XHJcbiAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XHJcbn1cclxuLnRsLXVpLWlubmVyLCAudGwtd2Vlay1zZXBlcmF0b3IsIC50bC1kYXRlXHJcbntcclxuICAgIG1pbi13aWR0aDogNjUwcHg7XHJcbn1cclxuLnRsLWVudHJ5LWNvbW1lbnQge1xyXG4gICAgbWFyZ2luLXRvcDogNXB4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTVweDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG4udGwtaGFzLWNvbW1lbnQgLnRsLWVudHJ5LWNvbW1lbnRcclxue1xyXG4gICAgZGlzcGxheTogYmxvY2s7XHJcbn1cclxuLnRsLXN1Y2Nlc3Ncclxue1xyXG4gICAgY29sb3I6ICMwMkI4NzU7XHJcbn1cclxuLnRsLXdhcm5pbmdcclxue1xyXG4gICAgY29sb3I6ICNGMEFGNTI7XHJcbn1cclxuLnRsLWRhbmdlclxyXG57XHJcbiAgICBjb2xvcjogI0RBNTY1MjtcclxufVxyXG4udGwtc3VtLWhvdXJzXHJcbntcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIG1hcmdpbi10b3A6IC0yM3B4O1xyXG59XHJcbi50bC13ZWVrLXN1bVxyXG57XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBtYXJnaW4tdG9wOiAtNTdweDtcclxuICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xyXG59XHJcbi50bC11aSBidXR0b24udGwtc3Rhci1idXR0b24sIC50bC11aS50bC1kYXJrIGJ1dHRvbi50bC1zdGFyLWJ1dHRvblxyXG57XHJcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgbWFyZ2luOiAwO1xyXG4gICAgcGFkZGluZzogMDtcclxufVxyXG4udGwtdWkgYnV0dG9uLnRsLXN0YXItYnV0dG9uLnRsLWZhdm9yaXRlLCAudGwtdWkudGwtZGFyayBidXR0b24udGwtc3Rhci1idXR0b24udGwtZmF2b3JpdGVcclxue1xyXG4gICAgY29sb3I6ICNmMWEwMGI7XHJcbiAgICBvcGFjaXR5OiAxO1xyXG59XHJcbi50bC1wYXN0ZS1idG4ge1xyXG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuLnRsLWhhcy1mYXZvcml0ZSAudGwtcGFzdGUtYnRuOm5vdCgudGwtaGlkZS1mYXZvcml0ZS1idXR0b24pXHJcbntcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxufVxyXG4udGwtc2hvdy1vbi1ob3ZlclxyXG57XHJcbiAgICBvcGFjaXR5OiAwO1xyXG59XHJcbi50bC1kYXRlOmhvdmVyIC50bC1zaG93LW9uLWhvdmVyXHJcbntcclxuICAgIG9wYWNpdHk6IDE7XHJcbn1cclxuLnRsLW5vLXJlYXNvbi13YXJuaW5nIHtcclxuICAgIG1hcmdpbi1sZWZ0OiAxODBweDtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIG1hcmdpbi10b3A6IC0yMnB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIHVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XHJcbn1cclxuLnRsLW5vLXJlYXNvbi13YXJuaW5nLnRsLWhhcy1yZWFzb25cclxue1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG4udGwtY2xpY2thYmxlXHJcbntcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG4udGwtZGFyay1tb2RlLWJ0biB7XHJcbiAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICBib3R0b206IDVweDtcclxuICAgIHJpZ2h0OiAyMHB4O1xyXG59XHJcbi50bC11aSBidXR0b25cclxue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2Q5ZDlkOTtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkIGdyYXk7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbn1cclxuLnRsLXVpIGJ1dHRvbjpob3ZlclxyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWZlYmViO1xyXG59XHJcblxyXG4udGwtdWkudGwtZGFya1xyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMUUxRTFFO1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG59XHJcbi50bC11aS50bC1kYXJrIHNlbGVjdCwgLnRsLXVpLnRsLWRhcmsgaW5wdXQge1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzI1MjUyNjtcclxuICAgIGJvcmRlcjogMXB4IGdyYXkgc29saWQ7XHJcbiAgICBjb2xvci1zY2hlbWU6IGRhcms7XHJcbn1cclxuLnRsLXVpLnRsLWRhcmsgYnV0dG9uXHJcbntcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMzMzMzMzM7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjMjgyODI4O1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG59XHJcbi50bC11aS50bC1kYXJrIGJ1dHRvbjpob3ZlclxyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTI1MjUyO1xyXG59XHJcbi50bC11aS50bC1kYXJrIC50bC1uby1yZWFzb24td2FybmluZ1xyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjUyNTI2O1xyXG59XHJcbi50bC13ZWVrZW5kLWRlc2NyaXB0aW9uIHtcclxuICAgIGNvbG9yOiBncmF5O1xyXG4gICAgZm9udC1zdHlsZTogaXRhbGljO1xyXG4gICAgZmxvYXQ6IHJpZ2h0O1xyXG4gICAgbWFyZ2luLXRvcDogMnB4O1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgbWF4LXdpZHRoOiA0MDBweDtcclxuICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICBtYXgtaGVpZ2h0OiAzNXB4O1xyXG59XHJcbi50bC13ZWVrZW5kLWRlc2NyaXB0aW9uLnRsLXdlZWtlbmQtZGVzY3JpcHRpb24taGlkZGVuXHJcbntcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuLnRsLXZlcnNpb24tbnVtYmVyIHtcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIGJvdHRvbTogNXB4O1xyXG4gICAgbGVmdDogNXB4O1xyXG59XHJcblxyXG4udGwtc2V0dGluZ3Mge1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgaW5zZXQ6IDA7XHJcbiAgICB6LWluZGV4OiAxMDA7XHJcbn1cclxuLnRsLXNldHRpbmdzLWJhY2sge1xyXG4gICAgaW5zZXQ6IDA7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcclxuICAgIG9wYWNpdHk6IDAuNTtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuLnRsLXNldHRpbmdzLnRsLXNldHRpbmdzLWhpZGRlbiB7XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcblxyXG4udGwtc2V0dGluZ3MtdmVyc2lvbiB7XHJcbiAgICBtYXJnaW46IDVweCAxMHB4O1xyXG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIGdyYXk7XHJcbn1cclxuXHJcbi50bC1zZXR0aW5ncy12ZXJzaW9uOmxhc3QtY2hpbGQge1xyXG4gICAgYm9yZGVyLWJvdHRvbTogMDtcclxufVxyXG5cclxuLnRsLXNldHRpbmdzLXRpdGxlIHtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgZm9udC1zaXplOiAxLjI1ZW07XHJcbn1cclxuLnRsLXNldHRpbmdzLWlubmVyIHtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gICAgaGVpZ2h0OiA3MHZoO1xyXG4gICAgd2lkdGg6IDkwdnc7XHJcbiAgICBsZWZ0OiA1dnc7XHJcbiAgICB0b3A6IDE1dmg7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCBncmF5O1xyXG4gICAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICBvdmVyZmxvdzogYXV0bztcclxufVxyXG4udGwtc2V0dGluZ3MtdmVyc2lvbiBidXR0b25cclxue1xyXG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcclxuICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XHJcbn1cclxuXHJcbi50bC1kYXJrIC50bC1zZXR0aW5ncy1pbm5lclxyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWExYTFhO1xyXG59XHJcblxyXG4udGwtYmFsYW5jZS13YXJuaW5nXHJcbntcclxuICAgIGZvbnQtc2l6ZTogMC44ZW07XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcclxuICAgIGN1cnNvcjogaGVscDtcclxufVxyXG4udGwtaGlkZGVuXHJcbntcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuXHJcbi50bC1uby1lbnRyaWVzLXdhcm5pbmdcclxue1xyXG4gICAgZmxvYXQ6IHJpZ2h0O1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuXHJcbmA7IiwiaW1wb3J0IHsgVGltZWxvZ1VJIH0gZnJvbSBcIi4uL1RpbWVsb2cvVGltZWxvZ1VJXCI7XHJcbmltcG9ydCB7IFRpbWVsb2dVSVNldHRpbmdzQnV0dG9ucyB9IGZyb20gXCIuLi9UaW1lbG9nL1RpbWVsb2dVSVNldHRpbmdzQnV0dG9uc1wiO1xyXG5pbXBvcnQgeyBIb3VyU2NhbGluZyB9IGZyb20gXCIuLi9VdGlscy9Ib3VyU2NhbGluZ1wiO1xyXG5pbXBvcnQgeyBNYXRlcmlhbEljb24gfSBmcm9tIFwiLi4vVXRpbHMvTWF0ZXJpYWxJY29uXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQXByaWxGb29sc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIHNldEFwcmlsRm9vbHNPcHRPdXQob3B0T3V0OiBib29sZWFuKVxyXG4gICAge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRsX2FwcmlsX2Zvb2xzX29wdF9vdXRcIiwgSlNPTi5zdHJpbmdpZnkob3B0T3V0KSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEFwcmlsRm9vbHNPcHRPdXQoKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRsX2FwcmlsX2Zvb2xzX29wdF9vdXRcIikgPz8gXCJmYWxzZVwiKSBhcyBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgc2V0SGFzU2VlblBvcHVwKHZhbHVlOiBib29sZWFuKVxyXG4gICAge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRsX2FwcmlsX2Zvb2xzX3BvcHVwXCIsIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGhhc1NlZW5Qb3B1cCgpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGxfYXByaWxfZm9vbHNfcG9wdXBcIikgPz8gXCJmYWxzZVwiKSBhcyBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGlzQXByaWxGb29scygpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5oYXNoID09PSBcIiN0bC1hcHJpbGZvb2xzXCIpIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBjb25zdCB5ZWFyID0gbm93LmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgbGV0IG1vbnRoID0gNDtcclxuICAgICAgICBsZXQgZGF5ID0gMTtcclxuICAgICAgICBsZXQgYXByaWxGb29sczogRGF0ZSB8IG51bGw7XHJcbiAgICAgICAgbGV0IHdlZWtlbmREYXlzID0gWzYsIDddO1xyXG4gICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGRheSA8IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRheSA9IDMxO1xyXG4gICAgICAgICAgICAgICAgbW9udGgtLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhcHJpbEZvb2xzID0gbmV3IERhdGUoYCR7eWVhcn0vJHttb250aH0vJHtkYXl9YCk7XHJcbiAgICAgICAgICAgIGlmICghd2Vla2VuZERheXMuaW5jbHVkZXMoYXByaWxGb29scy5nZXREYXkoKSkpIGJyZWFrO1xyXG4gICAgICAgICAgICBkYXktLTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGFwcmlsRm9vbHNFbmQgPSBhcHJpbEZvb2xzLmdldFRpbWUoKSArICgxMDAwICogNjAgKiA2MCAqIDI0KTtcclxuICAgICAgICByZXR1cm4gbm93LmdldFRpbWUoKSA8PSBhcHJpbEZvb2xzRW5kICYmIG5vdy5nZXRUaW1lKCkgPj0gYXByaWxGb29scy5nZXRUaW1lKCk7Ki9cclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgaW5pdCgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNBcHJpbEZvb2xzKCkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUaW1lbG9nVUlTZXR0aW5nc0J1dHRvbnMuYnV0dG9ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJcIixcclxuICAgICAgICAgICAgICAgIGljb246IFwiYm9sdFwiLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJPcHQgb3V0IG9mIFRlcmFsaWdodG1ldGVyc1wiLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IFwiQXByaWwgZm9vbHMhXCIsXHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB7IHRoaXMuc2V0QXByaWxGb29sc09wdE91dCghdGhpcy5nZXRBcHJpbEZvb2xzT3B0T3V0KCkpOyBsb2NhdGlvbi5yZWxvYWQoKSB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5nZXRBcHJpbEZvb2xzT3B0T3V0KCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEhvdXJTY2FsaW5nLnNjYWxpbmcgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5pdEdlbmVyYWw6IFwidGVyYWxpZ2h0bWV0ZXIocylcIixcclxuICAgICAgICAgICAgICAgICAgICB1bml0UGx1cmFsOiBcInRlcmFsaWdodG1ldGVyc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHVuaXRTaW5ndWxhcjogXCJ0ZXJhbGlnaHRtZXRlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlOiB0aGlzLmhvdXIyVGVyYWxpZ2h0bWV0ZXJTY2FsaW5nKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgVGltZWxvZ1VJLm9uU2hvdy5vbigodWkpID0+IHRoaXMuc2hvd0FwcmlsRm9vbHNQb3B1cCh1aSksIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNldEFwcmlsRm9vbHNPcHRPdXQoZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEhhc1NlZW5Qb3B1cChmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgc2hvd0FwcmlsRm9vbHNQb3B1cCh1aTogVGltZWxvZ1VJKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLmhhc1NlZW5Qb3B1cCgpKSByZXR1cm47XHJcbiAgICAgICAgLy9KdXN0IGdvbm5hIHVzZSB0aGUgc2V0dGluZ3MgQ1NTIGZvciB0aGlzLi4uXHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBcInRsLXNldHRpbmdzXCI7XHJcbiAgICAgICAgZWxlbWVudC5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcclxuICAgICAgICBjb25zdCBiYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBiYWNrLmNsYXNzTmFtZSA9IFwidGwtc2V0dGluZ3MtYmFja1wiO1xyXG4gICAgICAgIGVsZW1lbnQuYXBwZW5kKGJhY2spO1xyXG4gICAgICAgIGNvbnN0IGRpc21pc3MgPSAoKSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRIYXNTZWVuUG9wdXAodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJhY2sub25jbGljayA9ICgpID0+IGRpc21pc3MoKTtcclxuICAgICAgICBlbGVtZW50Lm9uY2xpY2sgPSAoKSA9PiBkaXNtaXNzKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBpbm5lci5jbGFzc05hbWUgPSBcInRsLXNldHRpbmdzLWlubmVyXCI7XHJcbiAgICAgICAgZWxlbWVudC5hcHBlbmQoaW5uZXIpO1xyXG5cclxuICAgICAgICBjb25zdCBwb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHBvcHVwRWxlbWVudC5jbGFzc05hbWUgPSBcInRsLXNldHRpbmdzLXZlcnNpb25cIjtcclxuICAgICAgICBpbm5lci5hcHBlbmQocG9wdXBFbGVtZW50KTtcclxuXHJcbiAgICAgICAgY29uc3QgaXNFYXJseUFwcmlsRm9vbHMgPSBuZXcgRGF0ZSgpLmdldE1vbnRoKCkgPCAzOyAvL0FwcmlsIGlzIDAtaW5kZXggbW9udGggMy5cclxuICAgICAgICBwb3B1cEVsZW1lbnQuaW5uZXJIVE1MID0gYDxoMT5JbnRyb2R1Y2luZzogdGhlIFRlcmFsaWdodG1ldGVyITwvaDE+XHJcbiAgICAgICAgPGgzPkFsbCBob3VycyBsb2dnZWQgd2lsbCBub3cgYmUgbWVhc3VyZWQgaW4gYSBuZXcgdGltZSB1bml0OiB0aGUgVGVyYWxpZ2h0bWV0ZXIgLSB0aGUgdGltZSBpdCB0YWtlcyBmb3IgbGlnaHQgdG8gdHJhdmVsIDEgMDAwIDAwMCAwMDAgMDAwIG1ldGVycyE8L2gzPlxyXG4gICAgICAgIDxoMz5UaGlzIGZlYXR1cmUgd2FzIG1hZGUgZXhjbHVzaXZlbHkgZm9yIHlvdXIgYmVuZWZpdCwgaW4gbm8gd2F5IHJlbGF0ZWQgdG8gJHtpc0Vhcmx5QXByaWxGb29scyA/IGBhbiB1cGNvbWluZyBkYXRlLmAgOiBgdG9kYXkncyBkYXRlLmB9PC9oMz5cclxuICAgICAgICA8aDM+V2UgaG9wZSB5b3UgZW5qb3kg8J+YifCfk4U8L2gzPmA7XHJcblxyXG4gICAgICAgIHVpLnRpbWVsb2dVSUlubmVyPy5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgaG91cjJUZXJhbGlnaHRtZXRlclNjYWxpbmcoKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGxpZ2h0TWV0ZXJzUGVyTXMgPSAyOTk3OTIuNDU4O1xyXG4gICAgICAgIGNvbnN0IGxpZ2h0TWV0ZXJNcyA9IDEgLyBsaWdodE1ldGVyc1Blck1zO1xyXG4gICAgICAgIGNvbnN0IHRlcmFMaWdodE1ldGVyc01zID0gbGlnaHRNZXRlck1zICogMTAwMCAqIDEwMDAgKiAxMDAwICogMTAwMDtcclxuICAgICAgICBjb25zdCB0ZXJhTGlnaHRNZXRlcnNIb3VycyA9IHRlcmFMaWdodE1ldGVyc01zIC8gKDEwMDAgKiA2MCAqIDYwKVxyXG4gICAgICAgIHJldHVybiAxIC8gdGVyYUxpZ2h0TWV0ZXJzSG91cnM7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBBcHJpbEZvb2xzIH0gZnJvbSBcIi4vRnVuL0FwcmlsRm9vbHNcIjtcclxuaW1wb3J0IHsgUmVhc29uRW5oYW5jZW1lbnRzIH0gZnJvbSBcIi4vUmVhc29uRW5oYW5jZW1lbnRzL1JlYXNvbnNFbmhhbmNlbWVudHNcIjtcclxuaW1wb3J0IHsgVGltZWxvZ1VJIH0gZnJvbSBcIi4vVGltZWxvZy9UaW1lbG9nVUlcIjtcclxuaW1wb3J0IHsgTWF0ZXJpYWxJY29uIH0gZnJvbSBcIi4vVXRpbHMvTWF0ZXJpYWxJY29uXCI7XHJcblxyXG5BcHJpbEZvb2xzLmluaXQoKTtcclxuTWF0ZXJpYWxJY29uLmluaXRpYWxpemUoKTtcclxubmV3IFRpbWVsb2dVSSgpO1xyXG5uZXcgUmVhc29uRW5oYW5jZW1lbnRzKCk7IiwiZXhwb3J0IGNvbnN0IFJlYXNvbkVuaGFuY2VtZW50Q3NzID0gYFxyXG4ucmUtbGFiZWxcclxue1xyXG4gICAgZm9udC1zaXplOiAxLjVlbTtcclxuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbn1cclxuLnJlLXJlYXNvbi1zZWxlY3Rcclxue1xyXG4gICAgcGFkZGluZzogNXB4O1xyXG59XHJcbi5yZS1yZWFzb24tdWlcclxue1xyXG4gICAgei1pbmRleDogMjAwMDtcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIGluc2V0OiAwO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwwLjc1KTtcclxuICAgIHBhZGRpbmctdG9wOiA0NXZoO1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuLnJlLWJ0blxyXG57XHJcbiAgICBwYWRkaW5nOiAwIHZhcigtLWJ1dHRvbi1wYWRkaW5nLXgsIDE1cHgpO1xyXG4gICAgbWluLXdpZHRoOiA4MHB4O1xyXG4gICAgaGVpZ2h0OiB2YXIoLS1idXR0b24tc2l6ZSwgMzBweCk7XHJcbiAgICBmb250LXdlaWdodDogNjAwO1xyXG4gICAgZm9udC1zaXplOiB2YXIoLS1idXR0b24tZm9udC1zaXplLCAxMnB4KTtcclxuICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1ib2R5LWZvbnQtZmFtaWx5KTtcclxuICAgIGJvcmRlcjogMDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgIG1hcmdpbjogNXB4O1xyXG59XHJcbi5yZS1idG4ucmUtcHJpbWFyeVxyXG57XHJcbiAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1iZy10ZXh0LWNvbG9yLCB3aGl0ZSk7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5LTYwMCk7XHJcbn1cclxuLnJlLWJ0bi5yZS1zZWNvbmRhcnlcclxue1xyXG4gICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS1iZy10ZXh0LWNvbG9yLCAjNTM1MzUzKTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNlY29uZGFyeS02MDApO1xyXG59XHJcbi5yZS1ibHVyXHJcbntcclxuICAgIGZpbHRlcjogYmx1cigycHgpO1xyXG59XHJcbi5yZS1zdWJtaXR0aW5nIC5yZS1idG5cclxue1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG4ucmUtc3VibWl0dGluZy10ZXh0XHJcbntcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgICBmb250LXNpemU6IDEuNWVtO1xyXG59XHJcbi5yZS1zdWJtaXR0aW5nIC5yZS1zdWJtaXR0aW5nLXRleHRcclxue1xyXG4gICAgZGlzcGxheTogYmxvY2s7XHJcbn1cclxuYDsiXSwibmFtZXMiOlsiRGF0ZXMiLCJzdGF0aWMiLCJzdHIiLCJzcGxpdCIsImxlbmd0aCIsInB1c2giLCJEYXRlIiwiam9pbiIsImdldFRpbWUiLCJ0aW1lIiwiaW5jbHVkZVRpbWVzdGFtcCIsImRhdGUiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwidG9TdHJpbmciLCJwYWRTdGFydCIsImdldERhdGUiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJob3VycyIsImhvdXIiLCJNYXRoIiwiZmxvb3IiLCJtaW51dGUiLCJyb3VuZCIsInNldEhvdXJzIiwic2V0RGF0ZSIsImdldERheSIsIndlZWsxIiwicGFyc2VJbnQiLCJFdmVudEhhbmRsZXIiLCJoYW5kbGVycyIsIm9uIiwiaGFuZGxlciIsImNvbnRleHQiLCJ0aGlzIiwib2ZmIiwiZmlsdGVyIiwiaCIsImZpcmUiLCJ2YWwiLCJmb3JFYWNoIiwiY2FsbCIsIk51bWJlcnMiLCJudW0iLCJkZWNpbWFscyIsImNlaWwiLCJhcnIiLCJpIiwiSG91clNjYWxpbmciLCJzY2FsaW5nIiwic2NhbGUiLCJzY2FsZWQiLCJ1bml0R2VuZXJhbCIsInVuaXRTaW5ndWxhciIsInVuaXRQbHVyYWwiLCJnZXRVbml0TmFtZSIsIk1hdGVyaWFsSWNvbiIsImxpbmsiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwicmVsIiwiaGVhZCIsImFwcGVuZENoaWxkIiwiaWNvbiIsImZpbGwiLCJzcGFuIiwiY2xhc3NOYW1lIiwiaW5uZXJUZXh0Iiwic3R5bGUiLCJ2ZXJ0aWNhbEFsaWduIiwiZm9udFNpemUiLCJmb250VmFyaWF0aW9uU2V0dGluZ3MiLCJXYWl0IiwibXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJkZWxlZ2F0ZSIsImhhbmRsZSIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsIkFwaSIsIm1ldGhvZCIsInVybCIsImJvZHkiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInJlc3VsdCIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsInN0YXR1cyIsImhhc093blByb3BlcnR5Iiwia2V5IiwiYWxlcnQiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJzZW5kIiwic3RyaW5naWZ5IiwiSGlCb2IiLCJlbnRyaWVzIiwic29tZSIsImUiLCJyZWFzb25JZCIsImRhdGEiLCJtYXAiLCJzdGFydCIsImZvcm1hdCIsInN0YXJ0SG91ciIsImVuZCIsImxlbmd0aEhvdXJzIiwidW5kZWZpbmVkIiwicmVhc29uIiwiY29tbWVudCIsImRhdGVTdHIiLCJ1c2VySWQiLCJnZXRVc2VySWQiLCJtZXRhZGF0YSIsInRpbWVMb2dFbnRyeVJlYXNvbiIsInZhbHVlcyIsInYiLCJpZCIsInNlcnZlcklkIiwibmFtZSIsInZhbHVlIiwic2hlZXQiLCJ1c2VySW5mbyIsIlRpbWVsb2dTYXZlU3RhdHVzIiwiUmVhc29uRW5oYW5jZW1lbnRNb2RlIiwiVGltZWxvZ01vZGVsIiwic2hlZXRzIiwib25EYXRlVXBkYXRlZCIsIm9uUmVhc29uc1VwZGF0ZWQiLCJvblNoZWV0VXBkYXRlZCIsIm9uU2hlZXRzVXBkYXRlZCIsIm9uU2F2ZVN0YXR1c1VwZGF0ZWQiLCJzYXZlSGFuZGxlIiwic2F2aW5nIiwiY2FsY3VsYXRpbmdGbGV4IiwiZmV0Y2hpbmdTaGVldHMiLCJyZWFzb25zIiwiYXN5bmMiLCJmZXRjaFNoZWV0cyIsImZldGNoUmVhc29ucyIsIlNhdmVkIiwidW50aWwiLCJlbXBsb3llZVNoZWV0cyIsImN5Y2xlU3RhcnREYXRlIiwiY3ljbGVFbmREYXRlIiwibmV3U2hlZXQiLCJkYXRlcyIsImxvY2tlZCIsImhvdXJzUGVyRGF5Iiwic29ydCIsImEiLCJiIiwiZmluZCIsInMiLCJhdHRlbmRhbmNlIiwic3VtbWFyeSIsInBvdGVudGlhbFdvcmtpbmdIb3VycyIsInBvdGVudGlhbFdvcmtpbmdEYXlzIiwiZGlydHkiLCJub3ciLCJub25Xb3JraW5nRGF5IiwiaG91cnNUb1dvcmsiLCJmYXZvcml0ZWQiLCJkYXRlRGVzY3JpcHRpb24iLCJub3RlIiwiZGVzY3JpcHRpb24iLCJoYXNDb21tZW50IiwicGFpZFRpbWVvZmZTZWNvbmRzIiwiZmF2b3JpdGUiLCJnZXRGYXZvcml0ZWREYXRlIiwiY2hhbmdlU3RhcnRIb3VyIiwiaW5kZXgiLCJkIiwicXVldWVTYXZlIiwiY2hhbmdlTGVuZ3RoSG91cnMiLCJjaGFuZ2VSZWFzb24iLCJjaGFuZ2VDb21tZW50IiwidG9nZ2xlQ29tbWVudCIsIm9sZEZhdm9yaXRlIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImdldEl0ZW0iLCJmZXRjaFNoZWV0IiwiZGVsZXRlRW50cnkiLCJzcGxpY2UiLCJvcmlnaW5hbERhdGUiLCJvcmlnaW5hbFNoZWV0IiwiZGF0ZUluZGV4IiwiaW5kZXhPZiIsImVudHJ5SW5kZXgiLCJzaGVldEluZGV4IiwibGFzdCIsImZpbmRMYXN0RW50cnkiLCJpbmNsdWRlcyIsImVudHJ5IiwiY2xlYXJUaW1lb3V0Iiwic2F2ZSIsIldhaXRpbmciLCJTYXZpbmciLCJtaW5pbXVtV2FpdCIsInN1Ym1pdCIsIkVycm9yIiwiZ2V0RmxleFBvbGljeSIsInByZXZpb3VzRGF5c0luY2x1ZGVkIiwiZmxleFdhcm5pbmdUaHJlc2hvbGQiLCJjYWNoZUtleSIsInJlbW92ZUl0ZW0iLCJzaGVldEJhbGFuY2VzIiwiZGF5IiwiYmFsYW5jZSIsInN1bSIsImRhdGVTdHJpbmciLCJyZWFsQmFsYW5jZSIsInJlYWxsb2NhdGVkQmFsYW5jZSIsInBvbGljeSIsImN1cnJlbnREYXRlVGltZSIsIm92ZXJkdWVEYXRlVGltZSIsIndhcm5pbmdEYXRlVGltZSIsImFsbERhdGVzIiwiZ2V0Q2FjaGVkQmFsYW5jZXMiLCJqIiwicHJldkRhdGUiLCJhbW91bnQiLCJtaW4iLCJhYnMiLCJ1bmJhbGFuY2VkRGF0ZXMiLCJvdmVyZHVlRGF0ZXMiLCJ3YXJuaW5nRGF0ZXMiLCJUaW1lbG9nVUlTZXR0aW5nc0J1dHRvbnMiLCJidXR0b25zIiwidGV4dCIsInRpdGxlIiwib25DbGljayIsInVpIiwibW9kZWwiLCJjbGVhclNoZWV0QmFsYW5jZUNhY2hlIiwidGhlbiIsInVwZGF0ZUJhbGFuY2UiLCJUaW1lbG9nVUkiLCJzaGVldERyb3Bkb3duT3B0aW9ucyIsInNoZWV0RGF0ZXMiLCJ3ZWVrU3VtcyIsIm9uRGFya01vZGVDaGFuZ2UiLCJ0aW1lbG9nIiwiYWRkQnV0dG9uIiwicXVlcnlTZWxlY3RvciIsInRvZ2dsZUJ1dHRvbiIsImdldCIsIm9uY2xpY2siLCJ0b2dnbGVWaXNpYmxlIiwicG9zaXRpb24iLCJ6SW5kZXgiLCJiYWNrZ3JvdW5kQ29sb3IiLCJ0b3AiLCJyaWdodCIsImNyZWF0ZVVJIiwiY3JlYXRlTW9kZWwiLCJsb2NhdGlvbiIsImhhc2giLCJpc0RhcmtNb2RlIiwidGltZWxvZ1VJT3V0ZXIiLCJkaXNwbGF5Iiwib3ZlcmZsb3ciLCJzaGVldENvbnRhaW5lciIsImlubmVySFRNTCIsIm9uU2hvdyIsInRvZ2dsZURhcmtNb2RlIiwiYXBwZW5kIiwidGltZWxvZ1VJSW5uZXIiLCJjbG9zZUJ1dHRvbiIsImRhcmtNb2RlQnV0dG9uIiwiZGFyayIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInNldHRpbnNXaW5kb3ciLCJjcmVhdGVTZXR0aW5nc1dpbmRvdyIsInNldHRpbmdzQnV0dG9uIiwiY3Vyc29yIiwidGV4dERlY29yYXRpb24iLCJzaGVldERyb3Bkb3duTGFiZWwiLCJzaGVldERyb3Bkb3duIiwib25jaGFuZ2UiLCJvblNlbGVjdGVkU2hlZXRDaGFuZ2UiLCJzYXZlU3RhdHVzIiwib25TYXZlU3RhdHVzQ2xpY2siLCJiYWxhbmNlUGFyZW50IiwiYmFsYW5jZUxhYmVsIiwiYmFsYW5jZVdhcm5pbmciLCJlbGVtZW50IiwiYmFjayIsImlubmVyIiwic2V0dGluZ3NFbGVtZW50IiwiYnV0dG9uIiwiY2hhbmdlbG9nIiwidmVyc2lvbiIsInZlcnNpb25FbGVtZW50IiwidmVyc2lvblRpdGxlIiwibGlzdCIsInRleHRFbGVtZW50IiwiaW5pdGlhbGl6ZSIsImdldERhdGVDb250YWluZXIiLCJzZWxlY3RlZFNoZWV0IiwiZGF0ZUNvbnRhaW5lciIsInBhcmVudCIsInN0YXJCdXR0b24iLCJwYXN0ZUJ1dHRvbiIsIndlZWtlbmREZXNjcmlwdGlvbiIsIm5vRW50cmllc1dhcm5pbmciLCJ3ZWVrU2VwZXJhdG9yIiwic2V0RmF2b3JpdGVkRGF0ZSIsInRvRGF0ZVN0cmluZyIsIm5ld0VudHJ5IiwicGFzdGVGcm9tU3RhcnJlZCIsImFkZFRvV2Vla1N1bSIsImdldEVudHJ5Q29udGFpbmVyIiwiZW50cnlDb250YWluZXIiLCJwIiwiZW5kSG91ciIsImNvbW1lbnRCdXR0b24iLCJub1JlYXNvbldhcm5pbmciLCJ0eXBlIiwiZGlzYWJsZWQiLCJwYXJzZVRpbWVUb2hvdXJzIiwiZW5kTGFiZWwiLCJ1cGRhdGVSZWFzb25zRHJvcGRvd24iLCJzdW1Ib3VycyIsInN0ZXAiLCJ1bnNjYWxlIiwicGFyc2VGbG9hdCIsImR1cmF0aW9uTGFiZWwiLCJwbGFjZWhvbGRlciIsIndlZWtTdW0iLCJtYXJnaW5Ub3AiLCJmb3JtYXRIb3VyIiwicmVtb3ZlZEVudHJpZXMiLCJ3IiwidG90YWxIb3VycyIsIndlZWtOdW1iZXIiLCJnZXRXZWVrTnVtYmVyRnJvbURhdGUiLCJzZWxlY3QiLCJvcHRpb24iLCJjb250YWlucyIsIm8iLCJnZXRGbGV4U3RhdHVzIiwidG90YWxCYWxhbmNlIiwib3B0T3V0IiwiaXNBcHJpbEZvb2xzIiwic2V0QXByaWxGb29sc09wdE91dCIsImdldEFwcmlsRm9vbHNPcHRPdXQiLCJyZWxvYWQiLCJob3VyMlRlcmFsaWdodG1ldGVyU2NhbGluZyIsInNob3dBcHJpbEZvb2xzUG9wdXAiLCJzZXRIYXNTZWVuUG9wdXAiLCJoYXNTZWVuUG9wdXAiLCJkaXNtaXNzIiwicG9wdXBFbGVtZW50IiwiaXNFYXJseUFwcmlsRm9vbHMiLCJpbml0Iiwic3VibWl0dGluZyIsImNsb2NrSW5CdXR0b25GaW5kZXIiLCJyZWFzb25FbmhhbmNlbWVudFVJIiwibGFiZWwiLCJyZWFzb25TZWxlY3QiLCJzYXZlRGVmYXVsdFJlYXNvblZhbHVlIiwiY2FuY2VsQnV0dG9uIiwiY2FuY2VsIiwic3VibWl0QnV0dG9uIiwic3VibWl0dGluZ1RleHQiLCJmaW5kVW5lbmhhbmNlZEJ1dHRvbnMiLCJlbmhhbmNlQ2xvY2tJbkJ1dHRvbiIsIkZpeExhdGVzdCIsIkZpeEFsbCIsImFwcFJvb3QiLCJzZWxlY3RvciIsInF1ZXJ5IiwicXVlcnlTZWxlY3RvckFsbCIsIm1vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwic2hvd1JlYXNvbkZpeGVyIiwibG9hZERlZmF1bHRSZWFzb25WYWx1ZSIsInNldFVJVmlzaWJsZSIsImZpeEFsbCIsImZpeExhdGVzdCIsImxhdGVzdCJdLCJzb3VyY2VSb290IjoiIn0=