// ==UserScript==
// @name        HiBob Time Utilities
// @version     1.0.10
// @author      Funday Factory
// @description Utilities to make it easier to log time in HiBob
// @match       https://app.hibob.com/*
// @namespace   http://tampermonkey.net/
// @icon        https://www.google.com/s2/favicons?sz=64&domain=hibob.com
// @grant       none
// ==/UserScript==

(()=>{"use strict";class e{static xhr(e,t,n){return new Promise((s=>{let a=new XMLHttpRequest;a.open(e,t),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Content-Type","application/json"),a.onreadystatechange=()=>{if(4===a.readyState){let e;try{e=JSON.parse(a.responseText)}catch(t){e={result:a.responseText}}200!==a.status&&(alert(`HiBob Utils: Error ${a.status} - check the developer console for more information.`),console.log(`HiBob Utils: Error ${a.status} - check the developer console for more information.`),console.log(a)),s({status:a.status,body:e})}},a.send(JSON.stringify(n))}))}}class t{static parse(e){if(!e)return null;const t=e.split("T");return t.length<2&&t.push("00:00"),new Date(t.join("T")).getTime()}static format(e,t){if(!e)return"";const n=new Date(e);return`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}-${n.getDate().toString().padStart(2,"0")}${t?`T${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`:""}`}static formatHour(e){const t=Math.floor(e%24),n=Math.round(60*(e-t));return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}static getWeekNumberFromDate(e){var t=new Date(e);t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)}static parseTimeTohours(e){const t=e.split(":");return parseInt(t[0])+parseInt(t[1])/60}}class n{static async submit(n,s){if(s.some((e=>!e.reasonId)))return void console.log("WARNING: SOME ENTRIES HAVE NO REASON SET - NOT SUBMITTING!!",n,s);const a=s.map((e=>{var s;return{start:t.format(n+3600*e.startHour*1e3,!0),end:e.lengthHours?t.format(n+3600*(e.startHour+e.lengthHours)*1e3,!0):void 0,reason:e.reasonId,comment:null!==(s=e.comment)&&void 0!==s?s:void 0}})),o=t.format(n,!1),i=await this.getUserId();await e.xhr("POST",`https://app.hibob.com/api/attendance/employees/${i}/attendance/entries?forDate=${o}`,a)}static async timelogReasons(){return(await this.metadata()).timeLogEntryReason.values.map((e=>({id:e.serverId,name:e.value})))}static async attendance(t){return(await e.xhr("GET",`https://app.hibob.com/api/employees/attendance/my/sheets/${t}`,{})).body}static async sheets(){const t=await this.getUserId();return(await e.xhr("GET",`https://app.hibob.com/api/employees/${t}/timelog/attendance/sheets`,{})).body}static async metadata(){return(await e.xhr("GET","https://app.hibob.com/api/company/metadata/lists/?includeArchived=true",{})).body}static async getUserId(){var e;return"string"!=typeof this.userId&&await this.userInfo(),null!==(e=this.userId)&&void 0!==e?e:""}static async userInfo(){const t=await e.xhr("GET","https://app.hibob.com/api/user",{});return this.userId=t.body.id,t.body}}class s{static for(e){return new Promise((t=>{window.setTimeout((()=>t()),e)}))}static until(e){return new Promise((t=>{const n=window.setInterval((()=>{e()&&(t(),window.clearInterval(n))}),1)}))}}var a,o;!function(e){e[e.FixAll=0]="FixAll",e[e.FixLatest=1]="FixLatest"}(a||(a={}));class i{static initialize(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200",e.rel="stylesheet",document.head.appendChild(e)}static get(e,t=!1){const n=document.createElement("span");return n.className="material-symbols-outlined",n.innerText=e,n.style.verticalAlign="middle",n.style.fontSize="1.5em",n.style.fontVariationSettings="'FILL' "+(t?1:0),n}}class r{static round(e,t){return Math.round(e*10**t)/10**t}static floor(e,t){return Math.floor(e*10**t)/10**t}static ceil(e,t){return Math.ceil(e*10**t)/10**t}static sum(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}}class l{constructor(){this.handlers=[]}on(e,t){this.handlers.push({handler:e,context:t})}off(e,t){this.handlers=this.handlers.filter((n=>n.handler!==e||n.context!==t))}fire(e){this.handlers.forEach((t=>t.handler.call(t.context,e)))}}!function(e){e[e.Waiting=0]="Waiting",e[e.Saving=1]="Saving",e[e.Saved=2]="Saved"}(o||(o={}));class d{constructor(){this.sheets=[],this.onDateUpdated=new l,this.onReasonsUpdated=new l,this.onSheetUpdated=new l,this.onSheetsUpdated=new l,this.onSaveStatusUpdated=new l,this.saveHandle=-1,this.saving=!1,this.calculatingFlex=!1,this.reasons=[]}initialize(){this.fetchSheets(),this.fetchReasons(),this.onSaveStatusUpdated.fire(o.Saved)}async fetchSheets(){var e,s;this.sheets=[];const a=await n.sheets();for(const n of a.employeeSheets){const a=null!==(e=t.parse(n.cycleStartDate))&&void 0!==e?e:0,o=null!==(s=t.parse(n.cycleEndDate))&&void 0!==s?s:0,i={id:n.id,status:n.status,start:a,end:o,dates:[],locked:n.locked,hoursPerDay:0};this.sheets.push(i)}this.sheets.sort(((e,t)=>t.start-e.start)),this.onSheetsUpdated.fire(this.sheets)}async fetchReasons(){this.reasons=(await n.metadata()).timeLogEntryReason.values,this.onReasonsUpdated.fire(this.reasons)}async fetchSheet(e){var s;const a=this.sheets.find((t=>t.id===e));if(!a)return;const o=await n.attendance(e);a.hoursPerDay=o.summary.potentialWorkingHours/o.summary.potentialWorkingDays,a.dates=[];for(const e of o.attendance){const n={dirty:!1,date:null!==(s=t.parse(e.date))&&void 0!==s?s:Date.now(),weekend:"WeekendEvent"===e.status,favorited:!1,entries:e.entries.map((n=>{var s,a,o,i,l;return{startHour:r.floor(((null!==(s=t.parse(n.start))&&void 0!==s?s:Date.now())-(null!==(a=t.parse(e.date))&&void 0!==a?a:Date.now()))/36e5,2),lengthHours:r.ceil(((null!==(o=t.parse(n.end))&&void 0!==o?o:Date.now())-(null!==(i=t.parse(n.start))&&void 0!==i?i:Date.now()))/36e5,2),reasonId:n.reason,comment:null!==(l=n.comment)&&void 0!==l?l:null,hasComment:!!n.comment}})).sort(((e,t)=>e.startHour-t.startHour))};a.dates.push(n)}a.dates.sort(((e,t)=>t.date-e.date));const i=await this.getFavoritedDate();i&&i.sheet===a&&(i.date.favorited=!0),this.onSheetUpdated.fire(a)}changeStartHour(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].startHour=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}changeLengthHours(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].lengthHours=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}changeReason(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].reasonId=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}changeComment(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].comment=n,e.entries[t].hasComment=!0,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}toggleComment(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries[t].hasComment=!e.entries[t].hasComment,e.entries[t].comment=e.entries[t].hasComment?"":null,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}async setFavoritedDate(e){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!n)return;const s=await this.getFavoritedDate();s&&(s.date.favorited=!1,this.onDateUpdated.fire(s)),e.favorited=!0,this.onDateUpdated.fire({sheet:n,date:e}),window.localStorage.setItem("tl_favorite",JSON.stringify({date:t.format(e.date,!1)}))}async getFavoritedDate(){const e=window.localStorage.getItem("tl_favorite");if(!e)return null;const n=JSON.parse(e),s=t.parse(n.date);if("number"==typeof s){const e=this.sheets.find((e=>e.start<=s&&e.end>=s));if(e){e.dates.length<1&&await this.fetchSheet(e.id);const t=e.dates.find((e=>e.date===s));if(t)return{sheet:e,date:t}}}return null}deleteEntry(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries.splice(t,1),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}async findLastEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;let n=t.dates.indexOf(e),s=-1;for(let e=this.sheets.indexOf(t);e<this.sheets.length;e++){const t=this.sheets[e];for(t.dates.length<1&&await this.fetchSheet(t.id);n<t.dates.length;n++){const e=t.dates[n];if(e.entries.length>0)return s<0?e.entries[e.entries.length-1]:e.entries[s];s=0}n=0}}async newEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const n=await this.findLastEntry(e);let s=8.5,a=r.round(t.hoursPerDay,2),o="";n&&(e.entries.includes(n)&&(s=n.startHour+n.lengthHours,a=1),o=n.reasonId),e.entries.push({startHour:s,lengthHours:a,reasonId:o,comment:null,hasComment:!1}),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}async pasteFromStarred(e){if(e.entries.length>0)return;const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const n=await this.getFavoritedDate();if(n&&n.date!==e){for(const t of n.date.entries)e.entries.push({startHour:t.startHour,lengthHours:t.lengthHours,reasonId:t.reasonId,comment:t.comment,hasComment:t.hasComment});e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}}queueSave(){window.clearTimeout(this.saveHandle),this.saveHandle=window.setTimeout((()=>this.save()),500),this.onSaveStatusUpdated.fire(o.Waiting)}async save(){await s.until((()=>!this.saving)),this.saving=!0,this.onSaveStatusUpdated.fire(o.Saving);for(const e of this.sheets)for(const t of e.dates)t.dirty&&(await n.submit(t.date,t.entries),t.dirty=!1);this.onSaveStatusUpdated.fire(o.Saved),this.saving=!1}async getCurrentBalanceHours(e){var t;const n=this.sheets.indexOf(e),a={};let o=0;if(this.sheets){await s.until((()=>!this.calculatingFlex)),this.calculatingFlex=!0;for(let e=n+1;e>=n&&e<this.sheets.length;e--){const n=this.sheets[e];if(!n)continue;const s=`tl_cached_hour_balance_${n.id}`;let i=0;if(n.locked&&null!==window.localStorage.getItem(s))i=parseFloat(null!==(t=window.localStorage.getItem(s))&&void 0!==t?t:"0");else{n.dates.length<1&&await this.fetchSheet(n.id);let e=n.dates.filter((e=>!e.weekend)).length*n.hoursPerDay,t=r.sum(n.dates.map((e=>r.sum(e.entries.map((e=>e.lengthHours))))));t>0&&(i-=e,i+=t),n.locked&&n.id>0&&window.localStorage.setItem(s,i.toString())}o+=i,a[n.id.toString()]=i}this.calculatingFlex=!1}return{sheets:a,balance:o}}}i.initialize(),new class{constructor(){this.sheetDropdownOptions=[],this.sheetDates=[],this.weekSums=[],this.reasons=[],window.timelog=this,this.addButton()}async addButton(){for(;;){const e=document.querySelector("div.app-content > app-top-bar.app-top-bar > div.actions");if(e){this.toggleButton=document.createElement("button"),this.toggleButton.className="tl-toggle-btn",this.toggleButton.appendChild(i.get("sentiment_very_satisfied")),this.toggleButton.title="HiBob Utilities",this.toggleButton.onclick=()=>this.toggleVisible(),e.appendChild(this.toggleButton),this.createUI(),this.createModel();break}await s.for(1)}}toggleVisible(){var e;this.timelogUIOuter&&("none"===this.timelogUIOuter.style.display?(this.timelogUIOuter.style.display="block",document.body.style.overflow="hidden",this.sheetContainer&&(this.sheetContainer.innerHTML=""),null===(e=this.model)||void 0===e||e.fetchSheets()):(this.timelogUIOuter.style.display="none",document.body.style.overflow="initial"))}createUI(){const e=document.createElement("style");e.innerHTML="\n.tl-toggle-btn\n{\n    border: none;\n    background: none;\n    font-size: 2em;\n}\n.tl-close-btn\n{\n    font-size: 2em;\n    position: absolute;\n    right: 5px;\n}\n.tl-ui\n{\n    position: fixed;\n    z-index: 1000;\n    inset: 0px;\n    background-color: white;\n    overflow-y: scroll;\n    padding: 10px;\n}        \n.tl-date\n{\n    margin-top: 10px;\n    padding: 10px;\n    border: 1px solid gray;\n    border-radius: 5px;\n}\n.tl-save-status, .tl-add-entry-btn\n{\n    margin-left: 10px;\n}\n.tl-entry\n{\n    margin-top: 5px;\n}\n.tl-entry > *\n{\n    margin-left: 5px;\n}\n.tl-entry > input[type=number]\n{\n    width: 50px;\n}\n.tl-entry > input[type=time]\n{\n    width: 75px;\n}\n.tl-save-status\n{\n    font-weight: bold;\n}\n.tl-sheet-select\n{\n    margin-left: 5px;\n}\n.tl-date-label\n{\n    font-weight: bold;\n}\n.tl-date-label.tl-date-label-weekend\n{\n    font-weight: initial;\n    font-style: italic;\n    color: gray;\n}\n.tl-entry-reason \n{\n    padding: 3px;\n}\n.tl-remove-entry-btn\n{\n    float: right;\n}\n.tl-week-seperator\n{\n    margin-top: 57px;\n}\n.tl-balance-label\n{\n    margin: 5px;\n}\n.tl-ui-inner\n{\n    display: table;\n    margin-left: auto;\n    margin-right: auto;\n}\n.tl-ui-inner, .tl-week-seperator, .tl-date\n{\n    min-width: 650px;\n}\n.tl-entry-comment {\n    margin-top: 5px;\n    margin-bottom: 15px;\n    width: 100%;\n    display: none;\n}\n.tl-has-comment .tl-entry-comment\n{\n    display: block;\n}\n.tl-success\n{\n    color: #02B875;\n}\n.tl-warning\n{\n    color: #F0AF52;\n}\n.tl-danger\n{\n    color: #DA5652;\n}\n.tl-sum-hours\n{\n    position: absolute;\n    margin-top: -23px;\n}\n.tl-week-sum\n{\n    position: absolute;\n    margin-top: -57px;\n    text-decoration: underline;\n}\n.tl-star-button\n{\n    background: none;\n    border: none;\n    margin: 0;\n    padding: 0;\n}\n.tl-star-button.tl-favorite\n{\n    color: #f1a00b;\n    opacity: 1;\n}\n.tl-paste-btn {\n    margin-left: 5px;\n    display: none;\n}\n.tl-has-favorite .tl-paste-btn:not(.tl-hide-favorite-button)\n{\n    display: inline-block;\n}\n.tl-show-on-hover\n{\n    opacity: 0;\n}\n.tl-date:hover .tl-show-on-hover\n{\n    opacity: 1;\n}\n",document.body.appendChild(e),this.timelogUIOuter=document.createElement("div"),this.timelogUIOuter.className="tl-ui",this.timelogUIOuter.style.display="none",document.body.append(this.timelogUIOuter),this.timelogUIInner=document.createElement("div"),this.timelogUIInner.className="tl-ui-inner",this.timelogUIOuter.append(this.timelogUIInner);const t=document.createElement("button");t.className="tl-close-btn",t.appendChild(i.get("close")),t.onclick=()=>this.toggleVisible(),this.timelogUIInner.appendChild(t);const n=document.createElement("span");n.innerText="Sheet:",this.timelogUIInner.appendChild(n),this.sheetDropdown=document.createElement("select"),this.sheetDropdown.className="tl-sheet-select",this.sheetDropdown.onchange=()=>this.onSelectedSheetChange(),this.timelogUIInner.appendChild(this.sheetDropdown),this.saveStatus=document.createElement("span"),this.saveStatus.className="tl-save-status",this.timelogUIInner.append(this.saveStatus),this.balanceLabel=document.createElement("div"),this.balanceLabel.innerText="Balance: ",this.balanceLabel.className="tl-balance-label",this.timelogUIInner.append(this.balanceLabel),this.sheetContainer=document.createElement("div"),this.sheetContainer.className="tl-sheet",this.timelogUIInner.appendChild(this.sheetContainer)}createModel(){this.model&&(this.model.onDateUpdated.off(this.onDateUpdated,this),this.model.onReasonsUpdated.off(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.off(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.off(this.onSheetUpdated,this),this.model.onSheetsUpdated.off(this.onSheetsUpdated,this)),this.model=new d,this.model.onDateUpdated.on(this.onDateUpdated,this),this.model.onReasonsUpdated.on(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.on(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.on(this.onSheetUpdated,this),this.model.onSheetsUpdated.on(this.onSheetsUpdated,this),this.model.initialize()}getDateContainer(e){if(this.selectedSheet===e.sheet&&this.sheetContainer){let t=this.sheetDates.find((t=>t.date===e.date));if(!t){if(t={date:e.date,parent:document.createElement("div"),entries:[],starButton:document.createElement("button"),pasteButton:document.createElement("button")},this.sheetDates.push(t),t.parent.className="tl-date",this.sheetContainer.appendChild(t.parent),1===new Date(e.date.date).getDay()){const e=document.createElement("div");e.className="tl-week-seperator",this.sheetContainer.appendChild(e)}t.parent.append(t.starButton),t.starButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.setFavoritedDate(e.date)},t.starButton.className="tl-star-button tl-show-on-hover",t.starButton.title="Favorite Day";const n=document.createElement("span");if(n.className="tl-date-label",n.innerText=new Date(e.date.date).toDateString(),e.date.weekend&&n.classList.add("tl-date-label-weekend"),t.parent.append(n),!e.sheet.locked){const n=document.createElement("button");n.appendChild(i.get("add")),n.className="tl-add-entry-btn tl-show-on-hover",n.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.newEntry(e.date)},t.parent.append(n),t.pasteButton=document.createElement("button"),t.pasteButton.appendChild(i.get("switch_access_shortcut_add")),t.pasteButton.title="Paste from Favorite Day",t.pasteButton.className="tl-paste-btn tl-show-on-hover",t.pasteButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.pasteFromStarred(e.date)},t.parent.append(t.pasteButton)}this.addToWeekSum(t)}return t}return null}getEntryContainer(e,n,s){let a=n.entries.find((e=>e.entry===s));if(!a){a={entry:s,parent:document.createElement("div"),startHour:document.createElement("input"),endHour:document.createElement("input"),length:document.createElement("input"),reason:document.createElement("select"),comment:document.createElement("input"),commentButton:document.createElement("button")},n.entries.push(a),a.parent.className="tl-entry",n.parent.appendChild(a.parent),a.startHour.type="time",a.startHour.className="tl-entry-start",e.sheet.locked&&(a.startHour.disabled=!0),a.startHour.onchange=()=>{var n,o,i;const l=s.startHour+s.lengthHours;null===(n=this.model)||void 0===n||n.changeStartHour(e.date,e.date.entries.indexOf(s),t.parseTimeTohours(null!==(o=null==a?void 0:a.startHour.value)&&void 0!==o?o:"08:00"));const d=r.round(l-s.startHour,2);null===(i=this.model)||void 0===i||i.changeLengthHours(e.date,e.date.entries.indexOf(s),d)},a.parent.appendChild(a.startHour);const o=document.createElement("span");o.className="tl-end-label",o.innerText="-",a.parent.appendChild(o),a.endHour.type="time",a.endHour.className="tl-entry-end",e.sheet.locked&&(a.endHour.disabled=!0),a.endHour.onchange=()=>{var n;if(null==a?void 0:a.endHour){const o=r.round(t.parseTimeTohours(a.endHour.value)-s.startHour,2);null===(n=this.model)||void 0===n||n.changeLengthHours(e.date,e.date.entries.indexOf(s),o)}},a.parent.appendChild(a.endHour),a.reason.onchange=()=>{var t,n;return null===(t=this.model)||void 0===t?void 0:t.changeReason(e.date,e.date.entries.indexOf(s),null!==(n=null==a?void 0:a.reason.value)&&void 0!==n?n:"")},e.sheet.locked&&(a.reason.disabled=!0),a.reason.className="tl-entry-reason",a.parent.appendChild(a.reason),this.updateReasonsDropdown(a.reason),1===n.entries.length&&(n.sumHours=document.createElement("span"),n.sumHours.className="tl-sum-hours",a.parent.append(n.sumHours)),a.length.type="number",a.length.className="tl-entry-length",a.length.step="0.01",e.sheet.locked&&(a.length.disabled=!0),a.length.onchange=()=>{var t;null===(t=this.model)||void 0===t||t.changeLengthHours(e.date,e.date.entries.indexOf(s),parseFloat((null==a?void 0:a.length.value)||"0"))},a.parent.appendChild(a.length);const l=document.createElement("span");if(l.className="tl-duration-label",l.innerText="hour(s)",a.parent.appendChild(l),!e.sheet.locked){a.commentButton.className="tl-add-comment-btn tl-show-on-hover",a.commentButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.toggleComment(e.date,e.date.entries.indexOf(s))},a.parent.appendChild(a.commentButton);const t=document.createElement("button");t.appendChild(i.get("delete")),t.className="tl-remove-entry-btn tl-show-on-hover",t.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.deleteEntry(e.date,e.date.entries.indexOf(s))},a.parent.appendChild(t)}a.comment.type="text",a.comment.placeholder="Write a note...",a.comment.title="Write a note...",a.comment.className="tl-entry-comment",e.sheet.locked&&(a.comment.disabled=!0),a.comment.onchange=()=>{var t,n;null===(t=this.model)||void 0===t||t.changeComment(e.date,e.date.entries.indexOf(s),null!==(n=null==a?void 0:a.comment.value)&&void 0!==n?n:"")},a.parent.appendChild(a.comment)}return a}addToWeekSum(e){if(this.weekSums.length<1||0===new Date(e.date.date).getDay()){const t={dates:[e],element:document.createElement("div")};t.element.className="tl-week-sum",this.weekSums.push(t),e.parent.appendChild(t.element),e.parent.style.marginTop="38px"}else this.weekSums[this.weekSums.length-1].dates.push(e)}onDateUpdated(e){var n;if(this.selectedSheet===e.sheet&&this.sheetContainer){let s=this.getDateContainer(e);if(s){for(const a of e.date.entries){let o=this.getEntryContainer(e,s,a);o.startHour.value=t.formatHour(a.startHour),o.length.value=a.lengthHours.toString(),o.endHour.value=t.formatHour(a.startHour+a.lengthHours),o.reason.value=a.reasonId,o.comment.value=null!==(n=a.comment)&&void 0!==n?n:"",o.commentButton.title=a.hasComment?"Remove note":"Add note",o.commentButton.innerHTML="",o.commentButton.appendChild(i.get(a.hasComment?"speaker_notes_off":"speaker_notes")),a.hasComment?o.parent.classList.add("tl-has-comment"):o.parent.classList.remove("tl-has-comment")}const a=s.entries.filter((t=>!e.date.entries.find((e=>e===t.entry))));if(s.entries=s.entries.filter((e=>!a.includes(e))),a.forEach((e=>e.parent.remove())),s.sumHours){const t=r.sum(e.date.entries.map((e=>e.lengthHours)));s.sumHours.innerText=`${r.round(t,2)} hour${1===t?"":"s"}`}s.starButton.innerHTML="",s.starButton.disabled=e.date.favorited,s.starButton.classList.remove("tl-favorite"),s.starButton.appendChild(i.get("star",e.date.favorited)),e.date.favorited&&s.starButton.classList.add("tl-favorite"),s.entries.length>0||s.date.favorited?s.pasteButton.classList.add("tl-hide-favorite-button"):s.pasteButton.classList.remove("tl-hide-favorite-button")}const a=this.weekSums.find((t=>t.dates.some((t=>t.date===e.date))));if(a){const n=r.sum(a.dates.map((e=>r.sum(e.entries.map((e=>e.entry.lengthHours)))))),s=a.dates.filter((e=>!e.date.weekend)).length,o=e.sheet.hoursPerDay*s,i=t.getWeekNumberFromDate(a.dates[0].date.date);a.element.innerHTML=`<b>Week ${i}</b>: ${r.round(n,2)} / ${r.round(o,2)} hours`}}this.updateBalance()}updateReasonsDropdown(e){e.innerHTML="";for(const t of this.reasons){const n=document.createElement("option");n.value=t.serverId,n.innerText=t.value,e.appendChild(n)}}onReasonsUpdated(e){this.reasons=e;for(const e of this.sheetDates)for(const t of e.entries)this.updateReasonsDropdown(t.reason)}onSaveStatusUpdated(e){this.saveStatus&&(this.saveStatus.innerHTML="",this.saveStatus.classList.remove("tl-success"),e===o.Saved&&(this.saveStatus.appendChild(i.get("cloud_done",!0)),this.saveStatus.append(" Saved"),this.saveStatus.classList.add("tl-success")),e===o.Waiting&&(this.saveStatus.appendChild(i.get("pending")),this.saveStatus.append(" Pending...")),e===o.Saving&&(this.saveStatus.appendChild(i.get("cloud_upload")),this.saveStatus.append(" Saving...")))}onSheetUpdated(e){if(this.sheetDropdown&&!this.sheetDropdownOptions.find((t=>t.sheet===e))){const t=document.createElement("option");t.value=e.id.toString(),t.innerText=`${new Date(e.start).toDateString()} - ${new Date(e.end).toDateString()}${e.locked?" (locked)":""}`,this.sheetDropdownOptions.push({sheet:e,element:t}),this.sheetDropdown.appendChild(t)}this.selectedSheet===e&&(this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[],this.weekSums=[]);for(const t of e.dates)this.onDateUpdated({sheet:e,date:t});this.updateBalance()}onSheetsUpdated(e){this.sheetDropdown&&(this.sheetDropdown.innerHTML=""),this.sheetDropdownOptions=[];for(const t of e)this.onSheetUpdated(t);this.onSelectedSheetChange()}onSelectedSheetChange(){var e;if(!this.sheetDropdown)return;this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[];const t=this.sheetDropdown.value;this.selectedSheet=null===(e=this.sheetDropdownOptions.find((e=>e.element.value===t)))||void 0===e?void 0:e.sheet,this.selectedSheet&&this.model&&this.model.fetchSheet(this.selectedSheet.id)}async updateBalance(){var e,t,n;if(!this.model||!this.balanceLabel||!this.selectedSheet)return;const s=await this.model.getCurrentBalanceHours(this.selectedSheet),a=r.round(null!==(e=s.sheets[this.selectedSheet.id.toString()])&&void 0!==e?e:0,2),o=r.round(s.balance,2);this.balanceLabel.innerText=`Flex: ${o} hour${1!=o?"s":""} (current month: ${a} hour${1!=a?"s":""})`,await this.model.getFavoritedDate()?null===(t=this.sheetContainer)||void 0===t||t.classList.add("tl-has-favorite"):null===(n=this.sheetContainer)||void 0===n||n.classList.remove("tl-has-favorite")}},new class{constructor(){this.submitting=!1,this.createUI(),this.clockInButtonFinder()}createUI(){const e=document.createElement("style");e.innerHTML="\n.re-label\n{\n    font-size: 1.5em;\n    margin-bottom: 10px;\n}\n.re-reason-select\n{\n    padding: 5px;\n}\n.re-reason-ui\n{\n    z-index: 2000;\n    position: fixed;\n    inset: 0;\n    background-color: rgba(0,0,0,0.75);\n    padding-top: 45vh;\n    text-align: center;\n    color: white;\n    font-weight: bold;\n}\n.re-btn\n{\n    padding: 0 var(--button-padding-x, 15px);\n    min-width: 80px;\n    height: var(--button-size, 30px);\n    font-weight: 600;\n    font-size: var(--button-font-size, 12px);\n    font-family: var(--body-font-family);\n    border: 0;\n    border-radius: 4px;\n    margin: 5px;\n}\n.re-btn.re-primary\n{\n    color: var(--primary-bg-text-color, white);\n    background-color: var(--primary-600);\n}\n.re-btn.re-secondary\n{\n    color: var(--secondary-bg-text-color, #535353);\n    background-color: var(--secondary-600);\n}\n.re-blur\n{\n    filter: blur(2px);\n}\n.re-submitting .re-btn\n{\n    display: none;\n}\n.re-submitting-text\n{\n    display: none;\n    font-size: 1.5em;\n}\n.re-submitting .re-submitting-text\n{\n    display: block;\n}\n",document.body.append(e),this.reasonEnhancementUI=document.createElement("div"),this.reasonEnhancementUI.className="re-reason-ui",this.reasonEnhancementUI.style.display="none",document.body.appendChild(this.reasonEnhancementUI);const t=document.createElement("div");t.innerText="Choose Default Reason",t.className="re-label",this.reasonEnhancementUI.appendChild(t),this.reasonSelect=document.createElement("select"),this.reasonSelect.className="re-reason-select",this.reasonSelect.onchange=()=>this.saveDefaultReasonValue(),this.reasonEnhancementUI.appendChild(this.reasonSelect),this.reasonEnhancementUI.appendChild(document.createElement("br"));const n=document.createElement("button");n.className="re-cancel-btn re-btn re-secondary",n.innerText="Cancel",n.onclick=()=>this.cancel(),this.reasonEnhancementUI.appendChild(n);const s=document.createElement("button");s.className="re-submit-btn re-btn re-primary",s.innerText="Submit",s.onclick=()=>this.submit(),this.reasonEnhancementUI.appendChild(s);const a=document.createElement("div");a.className="re-submitting-text",a.innerText="Submitting...",this.reasonEnhancementUI.appendChild(a)}async clockInButtonFinder(){for(var e;;)this.findUnenhancedButtons("b-button.punch-clock-button, b-button.time-widget-clock-in-btn, b-button.time-widget-clock-out-btn").forEach((e=>this.enhanceClockInButton(e,a.FixLatest))),this.findUnenhancedButtons("b-button.quick-fix-apply-button").forEach((e=>this.enhanceClockInButton(e,a.FixAll))),this.appRoot||(this.appRoot=null!==(e=document.querySelector("app-root"))&&void 0!==e?e:void 0),await s.for(10)}findUnenhancedButtons(e){var t=[],n=document.querySelectorAll(e);for(const e of n)e.classList.contains("re-enhanced")||(e.classList.add("re-enhanced"),t.push(e));return t}enhanceClockInButton(e,t){e.addEventListener("click",(()=>this.showReasonFixer(t)))}saveDefaultReasonValue(){this.reasonSelect&&window.localStorage.setItem("re-last-reason",this.reasonSelect.value)}loadDefaultReasonValue(){var e;this.reasonSelect&&(this.reasonSelect.value=null!==(e=window.localStorage.getItem("re-last-reason"))&&void 0!==e?e:"")}async showReasonFixer(e){if(this.reasonEnhancementUI&&(await s.for(250),this.setUIVisible(!0),this.mode=e,this.reasonSelect)){const e=await n.metadata();this.reasonSelect.innerHTML="";for(const t of e.timeLogEntryReason.values){const e=document.createElement("option");e.value=t.serverId,e.innerText=t.value,this.reasonSelect.appendChild(e)}this.loadDefaultReasonValue()}}cancel(){this.setUIVisible(!1)}setUIVisible(e){this.reasonEnhancementUI&&(this.reasonEnhancementUI.style.display=e?"block":"none"),this.appRoot&&(e?this.appRoot.classList.add("re-blur"):this.appRoot.classList.remove("re-blur"))}async submit(){var e,t;await s.until((()=>!this.submitting)),this.submitting=!0,null===(e=this.reasonEnhancementUI)||void 0===e||e.classList.add("re-submitting"),this.mode===a.FixAll&&await this.fixAll(),this.mode===a.FixLatest&&await this.fixLatest(),this.setUIVisible(!1),null===(t=this.reasonEnhancementUI)||void 0===t||t.classList.remove("re-submitting"),this.submitting=!1}async fixAll(){if(!this.reasonSelect)return;const e=this.reasonSelect.value,s=await n.sheets();for(const a of s.employeeSheets){if(a.locked)continue;const s=await n.attendance(a.id);for(const a of s.attendance)if(a.entries.some((e=>!e.reason))){const s=t.parse(a.date);if("number"!=typeof s)continue;const o=a.entries.map((n=>{var a,o,i,r;return{startHour:((null!==(a=t.parse(n.start))&&void 0!==a?a:Date.now())-s)/36e5,lengthHours:n.end?((null!==(o=t.parse(n.end))&&void 0!==o?o:Date.now())-(null!==(i=t.parse(n.start))&&void 0!==i?i:Date.now()))/36e5:null,reasonId:n.reason||e,comment:null!==(r=n.comment)&&void 0!==r?r:null}}));await n.submit(s,o)}}}async fixLatest(){if(!this.reasonSelect)return;const e=this.reasonSelect.value;let s=null;const a=await n.sheets();for(const e of a.employeeSheets){if(e.locked)continue;const a=await n.attendance(e.id);for(const e of a.attendance){const n=t.parse(e.date);if("number"==typeof n&&(!s||n>s.date)){const a=e.entries.map((e=>{var s,a,o,i;return{startHour:((null!==(s=t.parse(e.start))&&void 0!==s?s:Date.now())-n)/36e5,lengthHours:e.end?((null!==(a=t.parse(e.end))&&void 0!==a?a:Date.now())-(null!==(o=t.parse(e.start))&&void 0!==o?o:Date.now()))/36e5:null,reasonId:e.reason,comment:null!==(i=e.comment)&&void 0!==i?i:null}}));s={date:n,entries:a}}}}if(s){for(const t of s.entries)t.reasonId=t.reasonId||e;await n.submit(s.date,s.entries)}}}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlib2IudXNlci5qcyIsIm1hcHBpbmdzIjoibUJBQU8sTUFBTUEsRUFFRkMsV0FBV0MsRUFBd0JDLEVBQWFDLEdBRW5ELE9BQU8sSUFBSUMsU0FBdUNDLElBRTlDLElBQUlDLEVBQU0sSUFBSUMsZUFDZEQsRUFBSUUsS0FBS1AsRUFBUUMsR0FDakJJLEVBQUlHLGlCQUFpQixTQUFVLG9CQUMvQkgsRUFBSUcsaUJBQWlCLGVBQWdCLG9CQUNyQ0gsRUFBSUksbUJBQXFCLEtBRXJCLEdBQXVCLElBQW5CSixFQUFJSyxXQUNSLENBQ0ksSUFBSUMsRUFDSixJQUVJQSxFQUFTQyxLQUFLQyxNQUFNUixFQUFJUyxhLENBQzFCLFNBQ0VILEVBQVMsQ0FDTEEsT0FBUU4sRUFBSVMsYSxDQUdELE1BQWZULEVBQUlVLFNBRUpDLE1BQU0sc0JBQXNCWCxFQUFJVSw4REFDaENFLFFBQVFDLElBQUksc0JBQXNCYixFQUFJVSw4REFDdENFLFFBQVFDLElBQUliLElBRWhCRCxFQUFRLENBQ0pXLE9BQVFWLEVBQUlVLE9BQ1piLEtBQU1TLEcsR0FJbEJOLEVBQUljLEtBQUtQLEtBQUtRLFVBQVVsQixHQUFNLEdBRXRDLEVDckNHLE1BQU1tQixFQUVGdEIsYUFBYXVCLEdBRWhCLElBQUtBLEVBQUssT0FBTyxLQUNqQixNQUFNQyxFQUFRRCxFQUFJQyxNQUFNLEtBRXhCLE9BRElBLEVBQU1DLE9BQVMsR0FBR0QsRUFBTUUsS0FBSyxTQUMxQixJQUFJQyxLQUFLSCxFQUFNSSxLQUFLLE1BQU1DLFNBQ3JDLENBQ083QixjQUFjOEIsRUFBY0MsR0FFL0IsSUFBS0QsRUFBTSxNQUFPLEdBQ2xCLE1BQU1FLEVBQU8sSUFBSUwsS0FBS0csR0FDdEIsTUFBTyxHQUFHRSxFQUFLQyxrQkFBa0JELEVBQUtFLFdBQWEsR0FBR0MsV0FBV0MsU0FBUyxFQUFHLFFBQVFKLEVBQUtLLFVBQVVGLFdBQVdDLFNBQVMsRUFBRyxPQUFPTCxFQUFtQixJQUFJQyxFQUFLTSxXQUFXSCxXQUFXQyxTQUFTLEVBQUcsUUFBUUosRUFBS08sYUFBYUosV0FBV0MsU0FBUyxFQUFHLE9BQVMsSUFDOVAsQ0FDT3BDLGtCQUFrQndDLEdBRXJCLE1BQU1DLEVBQU9DLEtBQUtDLE1BQU1ILEVBQVEsSUFDMUJJLEVBQVNGLEtBQUtHLE1BQXVCLElBQWhCTCxFQUFRQyxJQUNuQyxNQUFPLEdBQUdBLEVBQUtOLFdBQVdDLFNBQVMsRUFBRyxRQUFRUSxFQUFPVCxXQUFXQyxTQUFTLEVBQUcsTUFDaEYsQ0FDT3BDLDZCQUE2QjhCLEdBRWhDLElBQUlFLEVBQU8sSUFBSUwsS0FBS0csR0FDcEJFLEVBQUtjLFNBQVMsRUFBRyxFQUFHLEVBQUcsR0FFdkJkLEVBQUtlLFFBQVFmLEVBQUtLLFVBQVksR0FBS0wsRUFBS2dCLFNBQVcsR0FBSyxHQUV4RCxJQUFJQyxFQUFRLElBQUl0QixLQUFLSyxFQUFLQyxjQUFlLEVBQUcsR0FFNUMsT0FBTyxFQUFJUyxLQUFLRyxRQUFRYixFQUFLSCxVQUFZb0IsRUFBTXBCLFdBQWEsTUFDdEQsR0FBS29CLEVBQU1ELFNBQVcsR0FBSyxHQUFLLEVBQzFDLENBQ09oRCx3QkFBd0I4QixHQUUzQixNQUFNTixFQUFRTSxFQUFLTixNQUFNLEtBQ3pCLE9BQU8wQixTQUFTMUIsRUFBTSxJQUFNMEIsU0FBUzFCLEVBQU0sSUFBTSxFQUNyRCxFQ2pDRyxNQUFNMkIsRUFHRm5ELG9CQUFvQmdDLEVBQWNvQixHQUVyQyxHQUFJQSxFQUFRQyxNQUFLQyxJQUFNQSxFQUFFQyxXQUdyQixZQURBckMsUUFBUUMsSUFBSSw4REFBK0RhLEVBQU1vQixHQUdyRixNQUFNSSxFQUFPSixFQUFRSyxLQUFJSCxJQUFPLElBQUgsRUFBRyxNQUFPLENBQUVJLE1BQU9wQyxFQUFNcUMsT0FBTzNCLEVBQXFCLEtBQWRzQixFQUFFTSxVQUFtQixLQUFNLEdBQU9DLElBQUtQLEVBQUVRLFlBQWN4QyxFQUFNcUMsT0FBTzNCLEVBQXVDLE1BQS9Cc0IsRUFBRU0sVUFBWU4sRUFBRVEsYUFBc0IsS0FBTSxRQUFRQyxFQUFXQyxPQUFRVixFQUFFQyxTQUFVVSxRQUFrQixRQUFULEVBQUFYLEVBQUVXLGVBQU8sYUFBSUYsRUFBVyxJQUM5UEcsRUFBVTVDLEVBQU1xQyxPQUFPM0IsR0FBTSxHQUM3Qm1DLFFBQWVDLEtBQUtDLGtCQUNMdEUsRUFBSU8sSUFBSSxPQUFRLGtEQUFrRDZELGdDQUFxQ0QsSUFBV1YsRUFDM0ksQ0FDT3hELDhCQUdILGFBRHVCb0UsS0FBS0UsWUFDWkMsbUJBQW1CQyxPQUFPZixLQUFJZ0IsSUFFbkMsQ0FDSEMsR0FBSUQsRUFBRUUsU0FDTkMsS0FBTUgsRUFBRUksU0FHcEIsQ0FDTzdFLHdCQUF3QjhFLEdBRzNCLGFBRHFCL0UsRUFBSU8sSUFBSSxNQUFPLDREQUE0RHdFLElBQVMsQ0FBQyxJQUM1RjNFLElBQ2xCLENBQ09ILHNCQUVILE1BQU1tRSxRQUFlQyxLQUFLQyxZQUUxQixhQURxQnRFLEVBQUlPLElBQUksTUFBTyx1Q0FBdUM2RCw4QkFBb0MsQ0FBQyxJQUNsR2hFLElBQ2xCLENBQ09ILHdCQUdILGFBRHFCRCxFQUFJTyxJQUFJLE1BQU8seUVBQTBFLENBQUMsSUFDakdILElBQ2xCLENBQ1FILHlCLE1BTUosTUFKMkIsaUJBQWhCb0UsS0FBS0QsY0FFTkMsS0FBS1csV0FFRyxRQUFYLEVBQUFYLEtBQUtELGNBQU0sUUFBSSxFQUMxQixDQUNPbkUsd0JBRUgsTUFBTVksUUFBZWIsRUFBSU8sSUFBSSxNQUFPLGlDQUFrQyxDQUFDLEdBRXZFLE9BREE4RCxLQUFLRCxPQUFVdkQsRUFBT1QsS0FBbUJ1RSxHQUNsQzlELEVBQU9ULElBQ2xCLEVDM0RHLE1BQU02RSxFQUVGaEYsV0FBV2lGLEdBRWQsT0FBTyxJQUFJN0UsU0FBY0MsSUFFckI2RSxPQUFPQyxZQUFXLElBQU05RSxLQUFXNEUsRUFBRyxHQUU5QyxDQUNPakYsYUFBYW9GLEdBRWhCLE9BQU8sSUFBSWhGLFNBQWNDLElBRXJCLE1BQU1nRixFQUFTSCxPQUFPSSxhQUFZLEtBRTFCRixNQUVBL0UsSUFDQTZFLE9BQU9LLGNBQWNGLEcsR0FFMUIsRUFBRSxHQUViLEVDaEJKLElBQVlHLEVDb0JBQyxHRHBCWixTQUFZRCxHQUVSLHVCQUNBLDRCQUNILENBSkQsQ0FBWUEsSUFBQUEsRUFBcUIsS0VOMUIsTUFBZUUsRUFFWDFGLG9CQUVILE1BQU0yRixFQUFPQyxTQUFTQyxjQUFjLFFBQ3BDRixFQUFLRyxLQUFPLHVIQUNaSCxFQUFLSSxJQUFNLGFBQ1hILFNBQVNJLEtBQUtDLFlBQVlOLEVBQzlCLENBQ08zRixXQUFXa0csRUFBY0MsR0FBZ0IsR0FFNUMsTUFBTUMsRUFBT1IsU0FBU0MsY0FBYyxRQU1wQyxPQUxBTyxFQUFLQyxVQUFZLDRCQUNqQkQsRUFBS0UsVUFBWUosRUFDakJFLEVBQUtHLE1BQU1DLGNBQWdCLFNBQzNCSixFQUFLRyxNQUFNRSxTQUFXLFFBQ3RCTCxFQUFLRyxNQUFNRyxzQkFBd0IsV0FBVVAsRUFBTyxFQUFJLEdBQ2pEQyxDQUNYLEVDbEJHLE1BQU1PLEVBRUYzRyxhQUFhNEcsRUFBYUMsR0FFN0IsT0FBT25FLEtBQUtHLE1BQU0rRCxFQUFPLElBQU1DLEdBQWMsSUFBTUEsQ0FDdkQsQ0FDTzdHLGFBQWE0RyxFQUFhQyxHQUU3QixPQUFPbkUsS0FBS0MsTUFBTWlFLEVBQU8sSUFBTUMsR0FBYyxJQUFNQSxDQUN2RCxDQUNPN0csWUFBWTRHLEVBQWFDLEdBRTVCLE9BQU9uRSxLQUFLb0UsS0FBS0YsRUFBTyxJQUFNQyxHQUFjLElBQU1BLENBQ3RELENBRU83RyxXQUFXK0csR0FFZCxJQUFJQyxFQUFNLEVBQ1YsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlGLEVBQUl0RixPQUFRd0YsSUFBS0QsR0FBT0QsRUFBSUUsR0FDaEQsT0FBT0QsQ0FDWCxFQ3BCRyxNQUFNRSxFQUFiLGNBRVksS0FBQUMsU0FBMEQsRUFhdEUsQ0FaV0MsR0FBR0MsRUFBMkJDLEdBRWpDbEQsS0FBSytDLFNBQVN6RixLQUFLLENBQUUyRixVQUFTQyxXQUNsQyxDQUNPQyxJQUFJRixFQUEyQkMsR0FFbENsRCxLQUFLK0MsU0FBVy9DLEtBQUsrQyxTQUFTSyxRQUFPQyxHQUFLQSxFQUFFSixVQUFZQSxHQUFXSSxFQUFFSCxVQUFZQSxHQUNyRixDQUNPSSxLQUFLVixHQUVSNUMsS0FBSytDLFNBQVNRLFNBQVFGLEdBQUtBLEVBQUVKLFFBQVFPLEtBQUtILEVBQUVILFFBQVNOLElBQ3pELEdIWUosU0FBWXZCLEdBRVIseUJBQ0EsdUJBQ0Esb0JBQ0gsQ0FMRCxDQUFZQSxJQUFBQSxFQUFpQixLSWxCdEIsTUFBTW9DLEVBYVQsY0FYTyxLQUFBQyxPQUF5QixHQUN6QixLQUFBQyxjQUFnQixJQUFJYixFQUNwQixLQUFBYyxpQkFBbUIsSUFBSWQsRUFDdkIsS0FBQWUsZUFBaUIsSUFBSWYsRUFDckIsS0FBQWdCLGdCQUFrQixJQUFJaEIsRUFDdEIsS0FBQWlCLG9CQUFzQixJQUFJakIsRUFDekIsS0FBQWtCLFlBQXNCLEVBQ3RCLEtBQUFDLFFBQWtCLEVBQ2xCLEtBQUFDLGlCQUEyQixFQUUzQixLQUFBQyxRQUF5QixFQUdqQyxDQUNPQyxhQUVIcEUsS0FBS3FFLGNBQ0xyRSxLQUFLc0UsZUFDTHRFLEtBQUsrRCxvQkFBb0JULEtBQUtqQyxFQUFrQmtELE1BQ3BELENBQ09DLG9CLFFBRUh4RSxLQUFLMEQsT0FBUyxHQUNkLE1BQU1BLFFBQWUzRSxFQUFNMkUsU0FDM0IsSUFBSyxNQUFNaEQsS0FBU2dELEVBQU9lLGVBQzNCLENBQ0ksTUFBTW5GLEVBQXlDLFFBQWpDLEVBQUFwQyxFQUFBLE1BQVl3RCxFQUFNZ0UsdUJBQWUsUUFBSSxFQUM3Q2pGLEVBQXFDLFFBQS9CLEVBQUF2QyxFQUFBLE1BQVl3RCxFQUFNaUUscUJBQWEsUUFBSSxFQUN6Q0MsRUFBVyxDQUNidEUsR0FBSUksRUFBTUosR0FDVjFELE9BQVE4RCxFQUFNOUQsT0FDZDBDLFFBQ0FHLE1BQ0FvRixNQUFPLEdBQ1BDLE9BQVFwRSxFQUFNb0UsT0FDZEMsWUFBYSxHQUVqQi9FLEtBQUswRCxPQUFPcEcsS0FBS3NILEUsQ0FFckI1RSxLQUFLMEQsT0FBT3NCLE1BQUssQ0FBQ0MsRUFBR0MsSUFBTUEsRUFBRTVGLE1BQVEyRixFQUFFM0YsUUFDdkNVLEtBQUs4RCxnQkFBZ0JSLEtBQUt0RCxLQUFLMEQsT0FDbkMsQ0FDT2MscUJBRUh4RSxLQUFLbUUsZUFBaUJwRixFQUFNbUIsWUFBWUMsbUJBQW1CQyxPQUMzREosS0FBSzRELGlCQUFpQk4sS0FBS3RELEtBQUttRSxRQUNwQyxDQUNPSyxpQkFBaUJsRSxHLE1BRXBCLE1BQU1JLEVBQVFWLEtBQUswRCxPQUFPeUIsTUFBS0MsR0FBS0EsRUFBRTlFLEtBQU9BLElBQzdDLElBQUtJLEVBQU8sT0FDWixNQUFNMkUsUUFBbUJ0RyxFQUFNc0csV0FBVy9FLEdBQzFDSSxFQUFNcUUsWUFBY00sRUFBV0MsUUFBUUMsc0JBQXdCRixFQUFXQyxRQUFRRSxxQkFDbEY5RSxFQUFNbUUsTUFBUSxHQUNkLElBQUssTUFBTWpILEtBQVF5SCxFQUFXQSxXQUM5QixDQUNJLE1BQ001RSxFQUFxQixDQUN2QmdGLE9BQU8sRUFDUDdILEtBSCtCLFFBQXRCLEVBQUFWLEVBQUEsTUFBWVUsRUFBS0EsYUFBSyxRQUFJTCxLQUFLbUksTUFJeENDLFFBQXlCLGlCQUFoQi9ILEVBQUtoQixPQUNkZ0osV0FBVyxFQUNYNUcsUUFBU3BCLEVBQUtvQixRQUFRSyxLQUFJSCxJLGNBRXRCLE1BQU8sQ0FDSE0sVUFBVytDLEVBQVFoRSxRQUE0QixRQUFwQixFQUFBckIsRUFBQSxNQUFZZ0MsRUFBRUksY0FBTSxRQUFJL0IsS0FBS21JLFFBQWdDLFFBQXRCLEVBQUF4SSxFQUFBLE1BQVlVLEVBQUtBLGFBQUssUUFBSUwsS0FBS21JLFFBQVUsS0FBZSxHQUMxSGhHLFlBQWE2QyxFQUFRRyxPQUF5QixRQUFsQixFQUFBeEYsRUFBQSxNQUFZZ0MsRUFBRU8sWUFBSSxRQUFJbEMsS0FBS21JLFFBQThCLFFBQXBCLEVBQUF4SSxFQUFBLE1BQVlnQyxFQUFFSSxjQUFNLFFBQUkvQixLQUFLbUksUUFBVSxLQUFlLEdBQ3ZIdkcsU0FBVUQsRUFBRVUsT0FDWkMsUUFBa0IsUUFBVCxFQUFBWCxFQUFFVyxlQUFPLFFBQUksS0FDdEJnRyxhQUFjM0csRUFBRVcsUUFDbkIsSUFDRm1GLE1BQUssQ0FBQ0MsRUFBR0MsSUFBTUQsRUFBRXpGLFVBQVkwRixFQUFFMUYsYUFFdENrQixFQUFNbUUsTUFBTXZILEtBQUttRCxFLENBRXJCQyxFQUFNbUUsTUFBTUcsTUFBSyxDQUFDQyxFQUFHQyxJQUFNQSxFQUFFdEgsS0FBT3FILEVBQUVySCxPQUN0QyxNQUFNa0ksUUFBaUI5RixLQUFLK0YsbUJBQ3hCRCxHQUFZQSxFQUFTcEYsUUFBVUEsSUFDL0JvRixFQUFTbEksS0FBS2dJLFdBQVksR0FDOUI1RixLQUFLNkQsZUFBZVAsS0FBSzVDLEVBQzdCLENBRU9zRixnQkFBZ0JwSSxFQUFtQnFJLEVBQWU1SCxHQUVyRCxNQUFNcUMsRUFBUVYsS0FBSzBELE9BQU95QixNQUFLQyxHQUFLQSxFQUFFUCxNQUFNNUYsTUFBS2lILEdBQUtBLElBQU10SSxNQUN2RDhDLElBQ0w5QyxFQUFLb0IsUUFBUWlILEdBQU96RyxVQUFZbkIsRUFDaENULEVBQUs2SCxPQUFRLEVBQ2J6RixLQUFLbUcsWUFDTG5HLEtBQUsyRCxjQUFjTCxLQUFLLENBQUU1QyxRQUFPOUMsU0FDckMsQ0FDT3dJLGtCQUFrQnhJLEVBQW1CcUksRUFBZTVJLEdBRXZELE1BQU1xRCxFQUFRVixLQUFLMEQsT0FBT3lCLE1BQUtDLEdBQUtBLEVBQUVQLE1BQU01RixNQUFLaUgsR0FBS0EsSUFBTXRJLE1BQ3ZEOEMsSUFDTDlDLEVBQUtvQixRQUFRaUgsR0FBT3ZHLFlBQWNyQyxFQUNsQ08sRUFBSzZILE9BQVEsRUFDYnpGLEtBQUttRyxZQUNMbkcsS0FBSzJELGNBQWNMLEtBQUssQ0FBRTVDLFFBQU85QyxTQUNyQyxDQUNPeUksYUFBYXpJLEVBQW1CcUksRUFBZXJHLEdBRWxELE1BQU1jLEVBQVFWLEtBQUswRCxPQUFPeUIsTUFBS0MsR0FBS0EsRUFBRVAsTUFBTTVGLE1BQUtpSCxHQUFLQSxJQUFNdEksTUFDdkQ4QyxJQUNMOUMsRUFBS29CLFFBQVFpSCxHQUFPOUcsU0FBV1MsRUFDL0JoQyxFQUFLNkgsT0FBUSxFQUNiekYsS0FBS21HLFlBQ0xuRyxLQUFLMkQsY0FBY0wsS0FBSyxDQUFFNUMsUUFBTzlDLFNBQ3JDLENBQ08wSSxjQUFjMUksRUFBbUJxSSxFQUFlcEcsR0FFbkQsTUFBTWEsRUFBUVYsS0FBSzBELE9BQU95QixNQUFLQyxHQUFLQSxFQUFFUCxNQUFNNUYsTUFBS2lILEdBQUtBLElBQU10SSxNQUN2RDhDLElBQ0w5QyxFQUFLb0IsUUFBUWlILEdBQU9wRyxRQUFVQSxFQUM5QmpDLEVBQUtvQixRQUFRaUgsR0FBT0osWUFBYSxFQUNqQ2pJLEVBQUs2SCxPQUFRLEVBQ2J6RixLQUFLbUcsWUFDTG5HLEtBQUsyRCxjQUFjTCxLQUFLLENBQUU1QyxRQUFPOUMsU0FDckMsQ0FDTzJJLGNBQWMzSSxFQUFtQnFJLEdBRXBDLE1BQU12RixFQUFRVixLQUFLMEQsT0FBT3lCLE1BQUtDLEdBQUtBLEVBQUVQLE1BQU01RixNQUFLaUgsR0FBS0EsSUFBTXRJLE1BQ3ZEOEMsSUFDTDlDLEVBQUtvQixRQUFRaUgsR0FBT0osWUFBY2pJLEVBQUtvQixRQUFRaUgsR0FBT0osV0FDdERqSSxFQUFLb0IsUUFBUWlILEdBQU9wRyxRQUFVakMsRUFBS29CLFFBQVFpSCxHQUFPSixXQUFhLEdBQUssS0FDcEVqSSxFQUFLNkgsT0FBUSxFQUNiekYsS0FBS21HLFlBQ0xuRyxLQUFLMkQsY0FBY0wsS0FBSyxDQUFFNUMsUUFBTzlDLFNBQ3JDLENBQ080Ryx1QkFBdUI1RyxHQUUxQixNQUFNOEMsRUFBUVYsS0FBSzBELE9BQU95QixNQUFLQyxHQUFLQSxFQUFFUCxNQUFNNUYsTUFBS2lILEdBQUtBLElBQU10SSxNQUM1RCxJQUFLOEMsRUFBTyxPQUVaLE1BQU04RixRQUFvQnhHLEtBQUsrRixtQkFDM0JTLElBRUFBLEVBQVk1SSxLQUFLZ0ksV0FBWSxFQUM3QjVGLEtBQUsyRCxjQUFjTCxLQUFLa0QsSUFHNUI1SSxFQUFLZ0ksV0FBWSxFQUNqQjVGLEtBQUsyRCxjQUFjTCxLQUFLLENBQUU1QyxNQUFPQSxFQUFPOUMsS0FBTUEsSUFFOUNrRCxPQUFPMkYsYUFBYUMsUUFBUSxjQUFlakssS0FBS1EsVUFBVSxDQUFFVyxLQUFNVixFQUFNcUMsT0FBTzNCLEVBQUtBLE1BQU0sS0FDOUYsQ0FDTzRHLHlCQUVILE1BQU1ySCxFQUFNMkQsT0FBTzJGLGFBQWFFLFFBQVEsZUFDeEMsSUFBS3hKLEVBQUssT0FBTyxLQUNqQixNQUFNMkksRUFBaUNySixLQUFLQyxNQUFNUyxHQUM1Q08sRUFBT1IsRUFBTVIsTUFBTW9KLEVBQVNsSSxNQUNsQyxHQUFvQixpQkFBVEYsRUFDWCxDQUNJLE1BQU1nRCxFQUFRVixLQUFLMEQsT0FBT3lCLE1BQUtDLEdBQUtBLEVBQUU5RixPQUFTNUIsR0FBUTBILEVBQUUzRixLQUFPL0IsSUFDaEUsR0FBSWdELEVBQ0osQ0FDUUEsRUFBTW1FLE1BQU14SCxPQUFTLFNBQVMyQyxLQUFLNEcsV0FBV2xHLEVBQU1KLElBQ3hELE1BQU0xQyxFQUFPOEMsRUFBTW1FLE1BQU1NLE1BQUtlLEdBQUtBLEVBQUV0SSxPQUFTRixJQUM5QyxHQUFJRSxFQUNBLE1BQU8sQ0FBRThDLE1BQU9BLEVBQU85QyxLQUFNQSxFLEVBR3pDLE9BQU8sSUFDWCxDQUVPaUosWUFBWWpKLEVBQW1CcUksR0FFbEMsTUFBTXZGLEVBQVFWLEtBQUswRCxPQUFPeUIsTUFBS0MsR0FBS0EsRUFBRVAsTUFBTTVGLE1BQUtpSCxHQUFLQSxJQUFNdEksTUFDdkQ4QyxJQUNMOUMsRUFBS29CLFFBQVE4SCxPQUFPYixFQUFPLEdBQzNCckksRUFBSzZILE9BQVEsRUFDYnpGLEtBQUttRyxZQUNMbkcsS0FBSzJELGNBQWNMLEtBQUssQ0FBRTVDLFFBQU85QyxTQUNyQyxDQUNRNEcsb0JBQW9CdUMsR0FFeEIsTUFBTUMsRUFBZ0JoSCxLQUFLMEQsT0FBT3lCLE1BQUtDLEdBQUtBLEVBQUVQLE1BQU01RixNQUFLaUgsR0FBS0EsSUFBTWEsTUFDcEUsSUFBS0MsRUFBZSxPQUNwQixJQUFJQyxFQUFZRCxFQUFjbkMsTUFBTXFDLFFBQVFILEdBQ3hDSSxHQUFjLEVBQ2xCLElBQUssSUFBSUMsRUFBYXBILEtBQUswRCxPQUFPd0QsUUFBUUYsR0FBZ0JJLEVBQWFwSCxLQUFLMEQsT0FBT3JHLE9BQVErSixJQUMzRixDQUNJLE1BQU0xRyxFQUFRVixLQUFLMEQsT0FBTzBELEdBRTFCLElBREkxRyxFQUFNbUUsTUFBTXhILE9BQVMsU0FBUzJDLEtBQUs0RyxXQUFXbEcsRUFBTUosSUFDakQyRyxFQUFZdkcsRUFBTW1FLE1BQU14SCxPQUFRNEosSUFDdkMsQ0FDSSxNQUFNckosRUFBTzhDLEVBQU1tRSxNQUFNb0MsR0FDekIsR0FBSXJKLEVBQUtvQixRQUFRM0IsT0FBUyxFQUFHLE9BQU84SixFQUFhLEVBQUl2SixFQUFLb0IsUUFBUXBCLEVBQUtvQixRQUFRM0IsT0FBUyxHQUFLTyxFQUFLb0IsUUFBUW1JLEdBQzFHQSxFQUFhLEMsQ0FFakJGLEVBQVksQyxDQUVwQixDQUNPekMsZUFBZTVHLEdBRWxCLE1BQU04QyxFQUFRVixLQUFLMEQsT0FBT3lCLE1BQUtDLEdBQUtBLEVBQUVQLE1BQU01RixNQUFLaUgsR0FBS0EsSUFBTXRJLE1BQzVELElBQUs4QyxFQUFPLE9BQ1osTUFBTTJHLFFBQWFySCxLQUFLc0gsY0FBYzFKLEdBQ3RDLElBQUk0QixFQUFZLElBQ1pFLEVBQWM2QyxFQUFROUQsTUFBTWlDLEVBQU1xRSxZQUFhLEdBQy9DNUYsRUFBVyxHQUNYa0ksSUFFSXpKLEVBQUtvQixRQUFRdUksU0FBU0YsS0FFdEI3SCxFQUFZNkgsRUFBSzdILFVBQVk2SCxFQUFLM0gsWUFDbENBLEVBQWMsR0FFbEJQLEVBQVdrSSxFQUFLbEksVUFFcEJ2QixFQUFLb0IsUUFBUTFCLEtBQUssQ0FDZGtDLFlBQ0FFLGNBQ0FQLFdBQ0FVLFFBQVMsS0FDVGdHLFlBQVksSUFFaEJqSSxFQUFLNkgsT0FBUSxFQUNiekYsS0FBS21HLFlBQ0xuRyxLQUFLMkQsY0FBY0wsS0FBSyxDQUFFNUMsUUFBTzlDLFFBQ3JDLENBQ080Ryx1QkFBdUI1RyxHQUUxQixHQUFJQSxFQUFLb0IsUUFBUTNCLE9BQVMsRUFBRyxPQUM3QixNQUFNcUQsRUFBUVYsS0FBSzBELE9BQU95QixNQUFLQyxHQUFLQSxFQUFFUCxNQUFNNUYsTUFBS2lILEdBQUtBLElBQU10SSxNQUM1RCxJQUFLOEMsRUFBTyxPQUNaLE1BQU1vRixRQUFpQjlGLEtBQUsrRixtQkFDNUIsR0FBS0QsR0FBWUEsRUFBU2xJLE9BQVNBLEVBQW5DLENBRUEsSUFBSyxNQUFNNEosS0FBUzFCLEVBQVNsSSxLQUFLb0IsUUFFOUJwQixFQUFLb0IsUUFBUTFCLEtBQUssQ0FDZGtDLFVBQVdnSSxFQUFNaEksVUFDakJFLFlBQWE4SCxFQUFNOUgsWUFDbkJQLFNBQVVxSSxFQUFNckksU0FDaEJVLFFBQVMySCxFQUFNM0gsUUFDZmdHLFdBQVkyQixFQUFNM0IsYUFHMUJqSSxFQUFLNkgsT0FBUSxFQUNiekYsS0FBS21HLFlBQ0xuRyxLQUFLMkQsY0FBY0wsS0FBSyxDQUFFNUMsUUFBTzlDLFFBZGMsQ0FlbkQsQ0FFT3VJLFlBRUhyRixPQUFPMkcsYUFBYXpILEtBQUtnRSxZQUN6QmhFLEtBQUtnRSxXQUFhbEQsT0FBT0MsWUFBVyxJQUFNZixLQUFLMEgsUUFBUSxLQUN2RDFILEtBQUsrRCxvQkFBb0JULEtBQUtqQyxFQUFrQnNHLFFBQ3BELENBQ09uRCxtQkFFRzVELEVBQUtnSCxPQUFNLEtBQU81SCxLQUFLaUUsU0FDN0JqRSxLQUFLaUUsUUFBUyxFQUNkakUsS0FBSytELG9CQUFvQlQsS0FBS2pDLEVBQWtCd0csUUFDaEQsSUFBSyxNQUFNbkgsS0FBU1YsS0FBSzBELE9BRXJCLElBQUssTUFBTTlGLEtBQVE4QyxFQUFNbUUsTUFFakJqSCxFQUFLNkgsY0FFQzFHLEVBQU0rSSxPQUFPbEssRUFBS0EsS0FBTUEsRUFBS29CLFNBQ25DcEIsRUFBSzZILE9BQVEsR0FJekJ6RixLQUFLK0Qsb0JBQW9CVCxLQUFLakMsRUFBa0JrRCxPQUNoRHZFLEtBQUtpRSxRQUFTLENBQ2xCLENBQ09PLDZCQUE2QjlELEcsTUFFaEMsTUFDTTBHLEVBQWFwSCxLQUFLMEQsT0FBT3dELFFBQVF4RyxHQUVqQ2dELEVBQWlDLENBQUMsRUFDeEMsSUFBSXFFLEVBQVUsRUFDZCxHQUFNL0gsS0FBSzBELE9BQ1gsT0FDVTlDLEVBQUtnSCxPQUFNLEtBQU81SCxLQUFLa0Usa0JBQzdCbEUsS0FBS2tFLGlCQUFrQixFQUN2QixJQUFLLElBQUlyQixFQUFJdUUsRUFUUyxFQVN1QnZFLEdBQUt1RSxHQUFjdkUsRUFBSTdDLEtBQUswRCxPQUFPckcsT0FBUXdGLElBQ3hGLENBQ0ksTUFBTW5DLEVBQVFWLEtBQUswRCxPQUFPYixHQUMxQixJQUFLbkMsRUFBTyxTQUNaLE1BQU1zSCxFQUFXLDBCQUEwQnRILEVBQU1KLEtBQ2pELElBQUkySCxFQUFlLEVBQ25CLEdBQUl2SCxFQUFNb0UsUUFBb0QsT0FBMUNoRSxPQUFPMkYsYUFBYUUsUUFBUXFCLEdBRTVDQyxFQUFlQyxXQUFnRCxRQUFyQyxFQUFBcEgsT0FBTzJGLGFBQWFFLFFBQVFxQixVQUFTLFFBQUksU0FHdkUsQ0FDUXRILEVBQU1tRSxNQUFNeEgsT0FBUyxTQUFTMkMsS0FBSzRHLFdBQVdsRyxFQUFNSixJQUN4RCxJQUFJNkgsRUFBaUJ6SCxFQUFNbUUsTUFBTXpCLFFBQU84QyxJQUFNQSxFQUFFUCxVQUFTdEksT0FBU3FELEVBQU1xRSxZQUNwRXFELEVBQWM3RixFQUFROEYsSUFBSTNILEVBQU1tRSxNQUFNeEYsS0FBSTZHLEdBQUszRCxFQUFROEYsSUFBSW5DLEVBQUVsSCxRQUFRSyxLQUFJSCxHQUFLQSxFQUFFUSxrQkFDaEYwSSxFQUFjLElBRWRILEdBQWdCRSxFQUNoQkYsR0FBZ0JHLEdBRWhCMUgsRUFBTW9FLFFBQVVwRSxFQUFNSixHQUFLLEdBQzNCUSxPQUFPMkYsYUFBYUMsUUFBUXNCLEVBQVVDLEVBQWFsSyxXLENBRTNEZ0ssR0FBV0UsRUFDWHZFLEVBQU9oRCxFQUFNSixHQUFHdkMsWUFBY2tLLEMsQ0FFbENqSSxLQUFLa0UsaUJBQWtCLEMsQ0FFM0IsTUFBTyxDQUFFUixTQUFRcUUsVUFDckIsRUM1VEp6RyxFQUFhOEMsYUFDYixJQ0lPLE1BbUJILGNBWFEsS0FBQWtFLHFCQUE4RSxHQUk5RSxLQUFBQyxXQUF1QyxHQUN2QyxLQUFBQyxTQUErQixHQUkvQixLQUFBckUsUUFBeUIsR0FJNUJyRCxPQUFlMkgsUUFBVXpJLEtBQzFCQSxLQUFLMEksV0FDVCxDQUNRbEUsa0JBRUosT0FDQSxDQUNJLE1BQU1tRSxFQUFTbkgsU0FBU29ILGNBQWMsMkRBQ3RDLEdBQUtELEVBQUwsQ0FNQTNJLEtBQUs2SSxhQUFlckgsU0FBU0MsY0FBYyxVQUMzQ3pCLEtBQUs2SSxhQUFhNUcsVUFBWSxnQkFDOUJqQyxLQUFLNkksYUFBYWhILFlBQVlQLEVBQWF3SCxJQUFJLDZCQUMvQzlJLEtBQUs2SSxhQUFhRSxNQUFRLGtCQUMxQi9JLEtBQUs2SSxhQUFhRyxRQUFVLElBQU1oSixLQUFLaUosZ0JBQ3ZDTixFQUFPOUcsWUFBWTdCLEtBQUs2SSxjQUV4QjdJLEtBQUtrSixXQUVMbEosS0FBS21KLGNBRUwsSyxPQWZVdkksRUFBQSxJQUFTLEUsQ0FpQjNCLENBQ1FxSSxnQixNQUVDakosS0FBS29KLGlCQUNnQyxTQUF0Q3BKLEtBQUtvSixlQUFlakgsTUFBTWtILFNBRTFCckosS0FBS29KLGVBQWVqSCxNQUFNa0gsUUFBVSxRQUNwQzdILFNBQVN6RixLQUFLb0csTUFBTW1ILFNBQVcsU0FDM0J0SixLQUFLdUosaUJBQWdCdkosS0FBS3VKLGVBQWVDLFVBQVksSUFDL0MsUUFBVixFQUFBeEosS0FBS3lKLGFBQUssU0FBRXBGLGdCQUlackUsS0FBS29KLGVBQWVqSCxNQUFNa0gsUUFBVSxPQUNwQzdILFNBQVN6RixLQUFLb0csTUFBTW1ILFNBQVcsV0FFdkMsQ0FFUUosV0FFSixNQUFNL0csRUFBUVgsU0FBU0MsY0FBYyxTQUNyQ1UsRUFBTXFILFVDOUVZLGtwRUQrRWxCaEksU0FBU3pGLEtBQUs4RixZQUFZTSxHQUUxQm5DLEtBQUtvSixlQUFpQjVILFNBQVNDLGNBQWMsT0FDN0N6QixLQUFLb0osZUFBZW5ILFVBQVksUUFDaENqQyxLQUFLb0osZUFBZWpILE1BQU1rSCxRQUFVLE9BQ3BDN0gsU0FBU3pGLEtBQUsyTixPQUFPMUosS0FBS29KLGdCQUUxQnBKLEtBQUsySixlQUFpQm5JLFNBQVNDLGNBQWMsT0FDN0N6QixLQUFLMkosZUFBZTFILFVBQVksY0FDaENqQyxLQUFLb0osZUFBZU0sT0FBTzFKLEtBQUsySixnQkFFaEMsTUFBTUMsRUFBY3BJLFNBQVNDLGNBQWMsVUFDM0NtSSxFQUFZM0gsVUFBWSxlQUN4QjJILEVBQVkvSCxZQUFZUCxFQUFhd0gsSUFBSSxVQUN6Q2MsRUFBWVosUUFBVSxJQUFNaEosS0FBS2lKLGdCQUNqQ2pKLEtBQUsySixlQUFlOUgsWUFBWStILEdBRWhDLE1BQU1DLEVBQXFCckksU0FBU0MsY0FBYyxRQUNsRG9JLEVBQW1CM0gsVUFBWSxTQUMvQmxDLEtBQUsySixlQUFlOUgsWUFBWWdJLEdBRWhDN0osS0FBSzhKLGNBQWdCdEksU0FBU0MsY0FBYyxVQUM1Q3pCLEtBQUs4SixjQUFjN0gsVUFBWSxrQkFDL0JqQyxLQUFLOEosY0FBY0MsU0FBVyxJQUFNL0osS0FBS2dLLHdCQUN6Q2hLLEtBQUsySixlQUFlOUgsWUFBWTdCLEtBQUs4SixlQUVyQzlKLEtBQUtpSyxXQUFhekksU0FBU0MsY0FBYyxRQUN6Q3pCLEtBQUtpSyxXQUFXaEksVUFBWSxpQkFDNUJqQyxLQUFLMkosZUFBZUQsT0FBTzFKLEtBQUtpSyxZQUVoQ2pLLEtBQUtrSyxhQUFlMUksU0FBU0MsY0FBYyxPQUMzQ3pCLEtBQUtrSyxhQUFhaEksVUFBWSxZQUM5QmxDLEtBQUtrSyxhQUFhakksVUFBWSxtQkFDOUJqQyxLQUFLMkosZUFBZUQsT0FBTzFKLEtBQUtrSyxjQUVoQ2xLLEtBQUt1SixlQUFpQi9ILFNBQVNDLGNBQWMsT0FDN0N6QixLQUFLdUosZUFBZXRILFVBQVksV0FDaENqQyxLQUFLMkosZUFBZTlILFlBQVk3QixLQUFLdUosZUFFekMsQ0FDUUosY0FFQW5KLEtBQUt5SixRQUVMekosS0FBS3lKLE1BQU05RixjQUFjUixJQUFJbkQsS0FBSzJELGNBQWUzRCxNQUNqREEsS0FBS3lKLE1BQU03RixpQkFBaUJULElBQUluRCxLQUFLNEQsaUJBQWtCNUQsTUFDdkRBLEtBQUt5SixNQUFNMUYsb0JBQW9CWixJQUFJbkQsS0FBSytELG9CQUFxQi9ELE1BQzdEQSxLQUFLeUosTUFBTTVGLGVBQWVWLElBQUluRCxLQUFLNkQsZUFBZ0I3RCxNQUNuREEsS0FBS3lKLE1BQU0zRixnQkFBZ0JYLElBQUluRCxLQUFLOEQsZ0JBQWlCOUQsT0FFekRBLEtBQUt5SixNQUFRLElBQUloRyxFQUNqQnpELEtBQUt5SixNQUFNOUYsY0FBY1gsR0FBR2hELEtBQUsyRCxjQUFlM0QsTUFDaERBLEtBQUt5SixNQUFNN0YsaUJBQWlCWixHQUFHaEQsS0FBSzRELGlCQUFrQjVELE1BQ3REQSxLQUFLeUosTUFBTTFGLG9CQUFvQmYsR0FBR2hELEtBQUsrRCxvQkFBcUIvRCxNQUM1REEsS0FBS3lKLE1BQU01RixlQUFlYixHQUFHaEQsS0FBSzZELGVBQWdCN0QsTUFDbERBLEtBQUt5SixNQUFNM0YsZ0JBQWdCZCxHQUFHaEQsS0FBSzhELGdCQUFpQjlELE1BRXBEQSxLQUFLeUosTUFBTXJGLFlBQ2YsQ0FDUStGLGlCQUFpQi9LLEdBRXJCLEdBQUlZLEtBQUtvSyxnQkFBa0JoTCxFQUFLc0IsT0FBU1YsS0FBS3VKLGVBQzlDLENBQ0ksSUFBSWMsRUFBZ0JySyxLQUFLdUksV0FBV3BELE1BQUtlLEdBQUtBLEVBQUV0SSxPQUFTd0IsRUFBS3hCLE9BQzlELElBQUt5TSxFQUNMLENBTUksR0FMQUEsRUFBZ0IsQ0FBRXpNLEtBQU13QixFQUFLeEIsS0FBTStLLE9BQVFuSCxTQUFTQyxjQUFjLE9BQVF6QyxRQUFTLEdBQUlzTCxXQUFZOUksU0FBU0MsY0FBYyxVQUFXOEksWUFBYS9JLFNBQVNDLGNBQWMsV0FDekt6QixLQUFLdUksV0FBV2pMLEtBQUsrTSxHQUNyQkEsRUFBYzFCLE9BQU8xRyxVQUFZLFVBQ2pDakMsS0FBS3VKLGVBQWUxSCxZQUFZd0ksRUFBYzFCLFFBRUosSUFBdEMsSUFBSXBMLEtBQUs2QixFQUFLeEIsS0FBS0EsTUFBTWdCLFNBQzdCLENBQ0ksTUFBTTRMLEVBQWdCaEosU0FBU0MsY0FBYyxPQUM3QytJLEVBQWN2SSxVQUFZLG9CQUMxQmpDLEtBQUt1SixlQUFlMUgsWUFBWTJJLEUsQ0FHcENILEVBQWMxQixPQUFPZSxPQUFPVyxFQUFjQyxZQUMxQ0QsRUFBY0MsV0FBV3RCLFFBQVUsS0FBSyxNQUFDLE9BQVUsUUFBVixFQUFBaEosS0FBS3lKLGFBQUssZUFBRWdCLGlCQUFpQnJMLEVBQUt4QixLQUFLLEVBQ2hGeU0sRUFBY0MsV0FBV3JJLFVBQVksa0NBQ3JDb0ksRUFBY0MsV0FBV3ZCLE1BQVEsZUFFakMsTUFBTUEsRUFBUXZILFNBQVNDLGNBQWMsUUFNckMsR0FMQXNILEVBQU05RyxVQUFZLGdCQUNsQjhHLEVBQU03RyxVQUFZLElBQUkzRSxLQUFLNkIsRUFBS3hCLEtBQUtBLE1BQU04TSxlQUN2Q3RMLEVBQUt4QixLQUFLK0gsU0FBU29ELEVBQU00QixVQUFVQyxJQUFJLHlCQUMzQ1AsRUFBYzFCLE9BQU9lLE9BQU9YLElBRXZCM0osRUFBS3NCLE1BQU1vRSxPQUNoQixDQUNJLE1BQU04RixFQUFNcEosU0FBU0MsY0FBYyxVQUNuQ21KLEVBQUkvSSxZQUFZUCxFQUFhd0gsSUFBSSxRQUNqQzhCLEVBQUkzSSxVQUFZLG9DQUNoQjJJLEVBQUk1QixRQUFVLEtBQUssTUFBQyxPQUFVLFFBQVYsRUFBQWhKLEtBQUt5SixhQUFLLGVBQUVvQixTQUFTekwsRUFBS3hCLEtBQUssRUFDbkR5TSxFQUFjMUIsT0FBT2UsT0FBT2tCLEdBRTVCUCxFQUFjRSxZQUFjL0ksU0FBU0MsY0FBYyxVQUNuRDRJLEVBQWNFLFlBQVkxSSxZQUFZUCxFQUFhd0gsSUFBSSwrQkFDdkR1QixFQUFjRSxZQUFZeEIsTUFBUSwwQkFDbENzQixFQUFjRSxZQUFZdEksVUFBWSxnQ0FDdENvSSxFQUFjRSxZQUFZdkIsUUFBVSxLQUFLLE1BQUMsT0FBVSxRQUFWLEVBQUFoSixLQUFLeUosYUFBSyxlQUFFcUIsaUJBQWlCMUwsRUFBS3hCLEtBQUssRUFDakZ5TSxFQUFjMUIsT0FBT2UsT0FBT1csRUFBY0UsWSxDQUU5Q3ZLLEtBQUsrSyxhQUFhVixFLENBRXRCLE9BQU9BLEMsQ0FFWCxPQUFPLElBQ1gsQ0FDUVcsa0JBQWtCNUwsRUFBa0RpTCxFQUF1QzdDLEdBRS9HLElBQUl5RCxFQUFpQlosRUFBY3JMLFFBQVFtRyxNQUFLK0YsR0FBS0EsRUFBRTFELFFBQVVBLElBQ2pFLElBQUt5RCxFQUNMLENBQ0lBLEVBQWlCLENBQ2J6RCxRQUNBbUIsT0FBUW5ILFNBQVNDLGNBQWMsT0FDL0JqQyxVQUFXZ0MsU0FBU0MsY0FBYyxTQUNsQzBKLFFBQVMzSixTQUFTQyxjQUFjLFNBQ2hDcEUsT0FBUW1FLFNBQVNDLGNBQWMsU0FDL0I3QixPQUFRNEIsU0FBU0MsY0FBYyxVQUMvQjVCLFFBQVMyQixTQUFTQyxjQUFjLFNBQ2hDMkosY0FBZTVKLFNBQVNDLGNBQWMsV0FFMUM0SSxFQUFjckwsUUFBUTFCLEtBQUsyTixHQUUzQkEsRUFBZXRDLE9BQU8xRyxVQUFZLFdBQ2xDb0ksRUFBYzFCLE9BQU85RyxZQUFZb0osRUFBZXRDLFFBRWhEc0MsRUFBZXpMLFVBQVU2TCxLQUFPLE9BQ2hDSixFQUFlekwsVUFBVXlDLFVBQVksaUJBQ2pDN0MsRUFBS3NCLE1BQU1vRSxTQUFRbUcsRUFBZXpMLFVBQVU4TCxVQUFXLEdBQzNETCxFQUFlekwsVUFBVXVLLFNBQVcsSyxVQUVoQyxNQUFNdEssRUFBTStILEVBQU1oSSxVQUFZZ0ksRUFBTTlILFlBQzFCLFFBQVYsRUFBQU0sS0FBS3lKLGFBQUssU0FBRXpELGdCQUFnQjVHLEVBQUt4QixLQUFNd0IsRUFBS3hCLEtBQUtvQixRQUFRa0ksUUFBUU0sR0FBUXRLLEVBQU1xTyxpQkFBZ0QsUUFBL0IsRUFBQU4sYUFBYyxFQUFkQSxFQUFnQnpMLFVBQVVpQixhQUFLLFFBQUksVUFDbkksTUFBTXBELEVBQVNrRixFQUFROUQsTUFBTWdCLEVBQU0rSCxFQUFNaEksVUFBVyxHQUMxQyxRQUFWLEVBQUFRLEtBQUt5SixhQUFLLFNBQUVyRCxrQkFBa0JoSCxFQUFLeEIsS0FBTXdCLEVBQUt4QixLQUFLb0IsUUFBUWtJLFFBQVFNLEdBQVFuSyxFQUFPLEVBRXRGNE4sRUFBZXRDLE9BQU85RyxZQUFZb0osRUFBZXpMLFdBRWpELE1BQU1nTSxFQUFXaEssU0FBU0MsY0FBYyxRQUN4QytKLEVBQVN2SixVQUFZLGVBQ3JCdUosRUFBU3RKLFVBQVksSUFDckIrSSxFQUFldEMsT0FBTzlHLFlBQVkySixHQUVsQ1AsRUFBZUUsUUFBUUUsS0FBTyxPQUM5QkosRUFBZUUsUUFBUWxKLFVBQVksZUFDL0I3QyxFQUFLc0IsTUFBTW9FLFNBQVFtRyxFQUFlRSxRQUFRRyxVQUFXLEdBQ3pETCxFQUFlRSxRQUFRcEIsU0FBVyxLLE1BRTlCLEdBQUlrQixhQUFjLEVBQWRBLEVBQWdCRSxRQUNwQixDQUNJLE1BQU05TixFQUFTa0YsRUFBUTlELE1BQU12QixFQUFNcU8saUJBQWlCTixFQUFlRSxRQUFRMUssT0FBUytHLEVBQU1oSSxVQUFXLEdBQzNGLFFBQVYsRUFBQVEsS0FBS3lKLGFBQUssU0FBRXJELGtCQUFrQmhILEVBQUt4QixLQUFNd0IsRUFBS3hCLEtBQUtvQixRQUFRa0ksUUFBUU0sR0FBUW5LLEUsR0FHbkY0TixFQUFldEMsT0FBTzlHLFlBQVlvSixFQUFlRSxTQUdqREYsRUFBZXJMLE9BQU9tSyxTQUFXLEtBQUssUUFBQyxPQUFVLFFBQVYsRUFBQS9KLEtBQUt5SixhQUFLLGVBQUVwRCxhQUFhakgsRUFBS3hCLEtBQU13QixFQUFLeEIsS0FBS29CLFFBQVFrSSxRQUFRTSxHQUFvQyxRQUE1QixFQUFBeUQsYUFBYyxFQUFkQSxFQUFnQnJMLE9BQU9hLGFBQUssUUFBSSxHQUFHLEVBQzVJckIsRUFBS3NCLE1BQU1vRSxTQUFRbUcsRUFBZXJMLE9BQU8wTCxVQUFXLEdBQ3hETCxFQUFlckwsT0FBT3FDLFVBQVksa0JBQ2xDZ0osRUFBZXRDLE9BQU85RyxZQUFZb0osRUFBZXJMLFFBQ2pESSxLQUFLeUwsc0JBQXNCUixFQUFlckwsUUFFTCxJQUFqQ3lLLEVBQWNyTCxRQUFRM0IsU0FFdEJnTixFQUFjcUIsU0FBV2xLLFNBQVNDLGNBQWMsUUFDaEQ0SSxFQUFjcUIsU0FBU3pKLFVBQVksZUFDbkNnSixFQUFldEMsT0FBT2UsT0FBT1csRUFBY3FCLFdBRy9DVCxFQUFlNU4sT0FBT2dPLEtBQU8sU0FDN0JKLEVBQWU1TixPQUFPNEUsVUFBWSxrQkFDbENnSixFQUFlNU4sT0FBT3NPLEtBQU8sT0FDekJ2TSxFQUFLc0IsTUFBTW9FLFNBQVFtRyxFQUFlNU4sT0FBT2lPLFVBQVcsR0FDeERMLEVBQWU1TixPQUFPME0sU0FBVyxLLE1BRW5CLFFBQVYsRUFBQS9KLEtBQUt5SixhQUFLLFNBQUVyRCxrQkFBa0JoSCxFQUFLeEIsS0FBTXdCLEVBQUt4QixLQUFLb0IsUUFBUWtJLFFBQVFNLEdBQVFVLFlBQVcrQyxhQUFjLEVBQWRBLEVBQWdCNU4sT0FBT29ELFFBQVMsS0FBSyxFQUUvSHdLLEVBQWV0QyxPQUFPOUcsWUFBWW9KLEVBQWU1TixRQUVqRCxNQUFNdU8sRUFBZ0JwSyxTQUFTQyxjQUFjLFFBSzdDLEdBSkFtSyxFQUFjM0osVUFBWSxvQkFDMUIySixFQUFjMUosVUFBWSxVQUMxQitJLEVBQWV0QyxPQUFPOUcsWUFBWStKLElBRTdCeE0sRUFBS3NCLE1BQU1vRSxPQUNoQixDQUNJbUcsRUFBZUcsY0FBY25KLFVBQVksc0NBQ3pDZ0osRUFBZUcsY0FBY3BDLFFBQVUsS0FBSyxNQUFDLE9BQVUsUUFBVixFQUFBaEosS0FBS3lKLGFBQUssZUFBRWxELGNBQWNuSCxFQUFLeEIsS0FBTXdCLEVBQUt4QixLQUFLb0IsUUFBUWtJLFFBQVFNLEdBQU8sRUFDbkh5RCxFQUFldEMsT0FBTzlHLFlBQVlvSixFQUFlRyxlQUVqRCxNQUFNUyxFQUFTckssU0FBU0MsY0FBYyxVQUN0Q29LLEVBQU9oSyxZQUFZUCxFQUFhd0gsSUFBSSxXQUNwQytDLEVBQU81SixVQUFZLHVDQUNuQjRKLEVBQU83QyxRQUFVLEtBQUssTUFBQyxPQUFVLFFBQVYsRUFBQWhKLEtBQUt5SixhQUFLLGVBQUU1QyxZQUFZekgsRUFBS3hCLEtBQU13QixFQUFLeEIsS0FBS29CLFFBQVFrSSxRQUFRTSxHQUFPLEVBQzNGeUQsRUFBZXRDLE9BQU85RyxZQUFZZ0ssRSxDQUd0Q1osRUFBZXBMLFFBQVF3TCxLQUFPLE9BQzlCSixFQUFlcEwsUUFBUWlNLFlBQWMsa0JBQ3JDYixFQUFlcEwsUUFBUWtKLE1BQVEsa0JBQy9Ca0MsRUFBZXBMLFFBQVFvQyxVQUFZLG1CQUMvQjdDLEVBQUtzQixNQUFNb0UsU0FBUW1HLEVBQWVwTCxRQUFReUwsVUFBVyxHQUN6REwsRUFBZXBMLFFBQVFrSyxTQUFXLEssUUFFcEIsUUFBVixFQUFBL0osS0FBS3lKLGFBQUssU0FBRW5ELGNBQWNsSCxFQUFLeEIsS0FBTXdCLEVBQUt4QixLQUFLb0IsUUFBUWtJLFFBQVFNLEdBQXFDLFFBQTdCLEVBQUF5RCxhQUFjLEVBQWRBLEVBQWdCcEwsUUFBUVksYUFBSyxRQUFJLEdBQUcsRUFFL0d3SyxFQUFldEMsT0FBTzlHLFlBQVlvSixFQUFlcEwsUSxDQUdyRCxPQUFPb0wsQ0FDWCxDQUNRRixhQUFhbk4sR0FFakIsR0FBSW9DLEtBQUt3SSxTQUFTbkwsT0FBUyxHQUEyQyxJQUF0QyxJQUFJRSxLQUFLSyxFQUFLQSxLQUFLQSxNQUFNZ0IsU0FDekQsQ0FDSSxNQUFNbU4sRUFBVSxDQUNabEgsTUFBTyxDQUFDakgsR0FDUm9PLFFBQVN4SyxTQUFTQyxjQUFjLFFBRXBDc0ssRUFBUUMsUUFBUS9KLFVBQVksY0FDNUJqQyxLQUFLd0ksU0FBU2xMLEtBQUt5TyxHQUNuQm5PLEVBQUsrSyxPQUFPOUcsWUFBWWtLLEVBQVFDLFNBQ2hDcE8sRUFBSytLLE9BQU94RyxNQUFNOEosVUFBWSxNLE1BSTlCak0sS0FBS3dJLFNBQVN4SSxLQUFLd0ksU0FBU25MLE9BQVMsR0FBR3dILE1BQU12SCxLQUFLTSxFQUUzRCxDQUNRK0YsY0FBY3ZFLEcsTUFFbEIsR0FBSVksS0FBS29LLGdCQUFrQmhMLEVBQUtzQixPQUFTVixLQUFLdUosZUFDOUMsQ0FDSSxJQUFJYyxFQUFnQnJLLEtBQUttSyxpQkFBaUIvSyxHQUMxQyxHQUFJaUwsRUFDSixDQUNJLElBQUssTUFBTTdDLEtBQVNwSSxFQUFLeEIsS0FBS29CLFFBQzlCLENBQ0ksSUFBSWlNLEVBQWlCakwsS0FBS2dMLGtCQUFrQjVMLEVBQU1pTCxFQUFlN0MsR0FFakV5RCxFQUFlekwsVUFBVWlCLE1BQVF2RCxFQUFNZ1AsV0FBVzFFLEVBQU1oSSxXQUN4RHlMLEVBQWU1TixPQUFPb0QsTUFBUStHLEVBQU05SCxZQUFZM0IsV0FDaERrTixFQUFlRSxRQUFRMUssTUFBUXZELEVBQU1nUCxXQUFXMUUsRUFBTWhJLFVBQVlnSSxFQUFNOUgsYUFDeEV1TCxFQUFlckwsT0FBT2EsTUFBUStHLEVBQU1ySSxTQUNwQzhMLEVBQWVwTCxRQUFRWSxNQUFxQixRQUFiLEVBQUErRyxFQUFNM0gsZUFBTyxRQUFJLEdBRWhEb0wsRUFBZUcsY0FBY3JDLE1BQVF2QixFQUFNM0IsV0FBYSxjQUFnQixXQUN4RW9GLEVBQWVHLGNBQWM1QixVQUFZLEdBQ3pDeUIsRUFBZUcsY0FBY3ZKLFlBQVlQLEVBQWF3SCxJQUFJdEIsRUFBTTNCLFdBQWEsb0JBQXNCLGtCQUUvRjJCLEVBQU0zQixXQUFZb0YsRUFBZXRDLE9BQU9nQyxVQUFVQyxJQUFJLGtCQUNyREssRUFBZXRDLE9BQU9nQyxVQUFVa0IsT0FBTyxpQixDQUVoRCxNQUFNTSxFQUFpQjlCLEVBQWNyTCxRQUFRb0UsUUFBT29FLElBQVVwSSxFQUFLeEIsS0FBS29CLFFBQVFtRyxNQUFLakcsR0FBS0EsSUFBTXNJLEVBQU1BLFVBSXRHLEdBSEE2QyxFQUFjckwsUUFBVXFMLEVBQWNyTCxRQUFRb0UsUUFBT29FLElBQVUyRSxFQUFlNUUsU0FBU0MsS0FDdkYyRSxFQUFlNUksU0FBUXJFLEdBQUtBLEVBQUV5SixPQUFPa0QsV0FFakN4QixFQUFjcUIsU0FDbEIsQ0FDSSxNQUFNckQsRUFBTTlGLEVBQVE4RixJQUFJakosRUFBS3hCLEtBQUtvQixRQUFRSyxLQUFJSCxHQUFLQSxFQUFFUSxlQUNyRDJLLEVBQWNxQixTQUFTeEosVUFBWSxHQUFHSyxFQUFROUQsTUFBTTRKLEVBQUssVUFBa0IsSUFBUkEsRUFBWSxHQUFLLEssQ0FHeEZnQyxFQUFjQyxXQUFXZCxVQUFZLEdBQ3JDYSxFQUFjQyxXQUFXZ0IsU0FBV2xNLEVBQUt4QixLQUFLZ0ksVUFDOUN5RSxFQUFjQyxXQUFXSyxVQUFVa0IsT0FBTyxlQUMxQ3hCLEVBQWNDLFdBQVd6SSxZQUFZUCxFQUFhd0gsSUFBSSxPQUFRMUosRUFBS3hCLEtBQUtnSSxZQUNwRXhHLEVBQUt4QixLQUFLZ0ksV0FBV3lFLEVBQWNDLFdBQVdLLFVBQVVDLElBQUksZUFFNURQLEVBQWNyTCxRQUFRM0IsT0FBUyxHQUFLZ04sRUFBY3pNLEtBQUtnSSxVQUN2RHlFLEVBQWNFLFlBQVlJLFVBQVVDLElBQUksMkJBRXhDUCxFQUFjRSxZQUFZSSxVQUFVa0IsT0FBTywwQixDQUduRCxNQUFNRSxFQUFVL0wsS0FBS3dJLFNBQVNyRCxNQUFLaUgsR0FBS0EsRUFBRXZILE1BQU01RixNQUFLaUgsR0FBS0EsRUFBRXRJLE9BQVN3QixFQUFLeEIsU0FDMUUsR0FBSW1PLEVBQ0osQ0FDSSxNQUFNMUQsRUFBTTlGLEVBQVE4RixJQUFJMEQsRUFBUWxILE1BQU14RixLQUFJNkcsR0FBSzNELEVBQVE4RixJQUFJbkMsRUFBRWxILFFBQVFLLEtBQUlILEdBQUtBLEVBQUVzSSxNQUFNOUgsa0JBQ2hGMk0sRUFBT04sRUFBUWxILE1BQU16QixRQUFPOEMsSUFBTUEsRUFBRXRJLEtBQUsrSCxVQUFTdEksT0FDbERpUCxFQUFhbE4sRUFBS3NCLE1BQU1xRSxZQUFjc0gsRUFDdENFLEVBQWFyUCxFQUFNc1Asc0JBQXNCVCxFQUFRbEgsTUFBTSxHQUFHakgsS0FBS0EsTUFDckVtTyxFQUFRQyxRQUFReEMsVUFBWSxXQUFXK0MsVUFBbUJoSyxFQUFROUQsTUFBTTRKLEVBQUssUUFBUTlGLEVBQVE5RCxNQUFNNk4sRUFBWSxVLEVBR3ZIdE0sS0FBS3lNLGVBQ1QsQ0FDUWhCLHNCQUFzQmlCLEdBRTFCQSxFQUFPbEQsVUFBWSxHQUNuQixJQUFLLE1BQU01SixLQUFVSSxLQUFLbUUsUUFDMUIsQ0FDSSxNQUFNd0ksRUFBU25MLFNBQVNDLGNBQWMsVUFDdENrTCxFQUFPbE0sTUFBUWIsRUFBT1csU0FDdEJvTSxFQUFPekssVUFBWXRDLEVBQU9hLE1BQzFCaU0sRUFBTzdLLFlBQVk4SyxFLENBRTNCLENBQ1EvSSxpQkFBaUJPLEdBRXJCbkUsS0FBS21FLFFBQVVBLEVBRWYsSUFBSyxNQUFNdkcsS0FBUW9DLEtBQUt1SSxXQUVwQixJQUFLLE1BQU1mLEtBQVM1SixFQUFLb0IsUUFFckJnQixLQUFLeUwsc0JBQXNCakUsRUFBTTVILE9BRzdDLENBQ1FtRSxvQkFBb0JuSCxHQUVuQm9ELEtBQUtpSyxhQUNWakssS0FBS2lLLFdBQVdULFVBQVksR0FDNUJ4SixLQUFLaUssV0FBV1UsVUFBVWtCLE9BQU8sY0FDN0JqUCxJQUFXeUUsRUFBa0JrRCxRQUFTdkUsS0FBS2lLLFdBQVdwSSxZQUFZUCxFQUFhd0gsSUFBSSxjQUFjLElBQVE5SSxLQUFLaUssV0FBV1AsT0FBTyxVQUFXMUosS0FBS2lLLFdBQVdVLFVBQVVDLElBQUksZUFDektoTyxJQUFXeUUsRUFBa0JzRyxVQUFXM0gsS0FBS2lLLFdBQVdwSSxZQUFZUCxFQUFhd0gsSUFBSSxZQUFhOUksS0FBS2lLLFdBQVdQLE9BQU8sZ0JBQ3pIOU0sSUFBV3lFLEVBQWtCd0csU0FBVTdILEtBQUtpSyxXQUFXcEksWUFBWVAsRUFBYXdILElBQUksaUJBQWtCOUksS0FBS2lLLFdBQVdQLE9BQU8sZUFDckksQ0FDUTdGLGVBQWVuRCxHQUVuQixHQUFJVixLQUFLOEosZ0JBQWtCOUosS0FBS3NJLHFCQUFxQm5ELE1BQUtDLEdBQUtBLEVBQUUxRSxRQUFVQSxJQUMzRSxDQUNJLE1BQU1pTSxFQUFTbkwsU0FBU0MsY0FBYyxVQUN0Q2tMLEVBQU9sTSxNQUFRQyxFQUFNSixHQUFHdkMsV0FDeEI0TyxFQUFPekssVUFBWSxHQUFHLElBQUkzRSxLQUFLbUQsRUFBTXBCLE9BQU9vTCxvQkFBb0IsSUFBSW5OLEtBQUttRCxFQUFNakIsS0FBS2lMLGlCQUFpQmhLLEVBQU1vRSxPQUFTLFlBQWMsS0FDbEk5RSxLQUFLc0kscUJBQXFCaEwsS0FBSyxDQUFFb0QsTUFBT0EsRUFBT3NMLFFBQVNXLElBQ3hEM00sS0FBSzhKLGNBQWNqSSxZQUFZOEssRSxDQUUvQjNNLEtBQUtvSyxnQkFBa0IxSixJQUVuQlYsS0FBS3VKLGlCQUFnQnZKLEtBQUt1SixlQUFlQyxVQUFZLElBQ3pEeEosS0FBS3VJLFdBQWEsR0FDbEJ2SSxLQUFLd0ksU0FBVyxJQUVwQixJQUFLLE1BQU01SyxLQUFROEMsRUFBTW1FLE1BRXJCN0UsS0FBSzJELGNBQWMsQ0FBRWpELFFBQU85QyxTQUVoQ29DLEtBQUt5TSxlQUNULENBQ1EzSSxnQkFBZ0JKLEdBRWhCMUQsS0FBSzhKLGdCQUFlOUosS0FBSzhKLGNBQWNOLFVBQVksSUFDdkR4SixLQUFLc0kscUJBQXVCLEdBQzVCLElBQUssTUFBTTVILEtBQVNnRCxFQUVoQjFELEtBQUs2RCxlQUFlbkQsR0FFeEJWLEtBQUtnSyx1QkFDVCxDQUVRQSx3QixNQUVKLElBQUtoSyxLQUFLOEosY0FBZSxPQUNyQjlKLEtBQUt1SixpQkFBZ0J2SixLQUFLdUosZUFBZUMsVUFBWSxJQUN6RHhKLEtBQUt1SSxXQUFhLEdBQ2xCLE1BQU0zRixFQUFNNUMsS0FBSzhKLGNBQWNySixNQUMvQlQsS0FBS29LLGNBQTRFLFFBQTVELEVBQUFwSyxLQUFLc0kscUJBQXFCbkQsTUFBS3lILEdBQUtBLEVBQUVaLFFBQVF2TCxRQUFVbUMsV0FBSSxlQUFFbEMsTUFDL0VWLEtBQUtvSyxlQUFpQnBLLEtBQUt5SixPQUUzQnpKLEtBQUt5SixNQUFNN0MsV0FBVzVHLEtBQUtvSyxjQUFjOUosR0FFakQsQ0FFUWtFLHNCLFVBRUosSUFBS3hFLEtBQUt5SixRQUFVekosS0FBS2tLLGVBQWlCbEssS0FBS29LLGNBQWUsT0FDOUQsTUFBTXJDLFFBQWdCL0gsS0FBS3lKLE1BQU1vRCx1QkFBdUI3TSxLQUFLb0ssZUFDdkQwQyxFQUFldkssRUFBUTlELE1BQXNELFFBQWhELEVBQUFzSixFQUFRckUsT0FBTzFELEtBQUtvSyxjQUFjOUosR0FBR3ZDLG1CQUFXLFFBQUksRUFBRyxHQUNwRmdQLEVBQWV4SyxFQUFROUQsTUFBTXNKLEVBQVFBLFFBQVMsR0FDcEQvSCxLQUFLa0ssYUFBYWhJLFVBQVksU0FBUzZLLFNBQW9DLEdBQWhCQSxFQUFvQixJQUFNLHNCQUFzQkQsU0FBb0MsR0FBaEJBLEVBQW9CLElBQU0sWUFFbEk5TSxLQUFLeUosTUFBTTFELG1CQUNELFFBQW5CLEVBQUEvRixLQUFLdUosc0JBQWMsU0FBRW9CLFVBQVVDLElBQUksbUJBQ3pCLFFBQW5CLEVBQUE1SyxLQUFLdUosc0JBQWMsU0FBRW9CLFVBQVVrQixPQUFPLGtCQUMvQyxHRHRjSixJTktPLE1BU0gsY0FKUSxLQUFBbUIsWUFBYSxFQU1qQmhOLEtBQUtrSixXQUNMbEosS0FBS2lOLHFCQUNULENBQ1EvRCxXQUVKLE1BQU0vRyxFQUFRWCxTQUFTQyxjQUFjLFNBQ3JDVSxFQUFNcUgsVVM1QnNCLGdrQ1Q2QjVCaEksU0FBU3pGLEtBQUsyTixPQUFPdkgsR0FHckJuQyxLQUFLa04sb0JBQXNCMUwsU0FBU0MsY0FBYyxPQUNsRHpCLEtBQUtrTixvQkFBb0JqTCxVQUFZLGVBQ3JDakMsS0FBS2tOLG9CQUFvQi9LLE1BQU1rSCxRQUFVLE9BQ3pDN0gsU0FBU3pGLEtBQUs4RixZQUFZN0IsS0FBS2tOLHFCQUUvQixNQUFNQyxFQUFRM0wsU0FBU0MsY0FBYyxPQUNyQzBMLEVBQU1qTCxVQUFZLHdCQUNsQmlMLEVBQU1sTCxVQUFZLFdBQ2xCakMsS0FBS2tOLG9CQUFvQnJMLFlBQVlzTCxHQUVyQ25OLEtBQUtvTixhQUFlNUwsU0FBU0MsY0FBYyxVQUMzQ3pCLEtBQUtvTixhQUFhbkwsVUFBWSxtQkFDOUJqQyxLQUFLb04sYUFBYXJELFNBQVcsSUFBTS9KLEtBQUtxTix5QkFDeENyTixLQUFLa04sb0JBQW9CckwsWUFBWTdCLEtBQUtvTixjQUUxQ3BOLEtBQUtrTixvQkFBb0JyTCxZQUFZTCxTQUFTQyxjQUFjLE9BRTVELE1BQU02TCxFQUFlOUwsU0FBU0MsY0FBYyxVQUM1QzZMLEVBQWFyTCxVQUFZLG9DQUN6QnFMLEVBQWFwTCxVQUFZLFNBQ3pCb0wsRUFBYXRFLFFBQVUsSUFBTWhKLEtBQUt1TixTQUNsQ3ZOLEtBQUtrTixvQkFBb0JyTCxZQUFZeUwsR0FFckMsTUFBTUUsRUFBZWhNLFNBQVNDLGNBQWMsVUFDNUMrTCxFQUFhdkwsVUFBWSxrQ0FDekJ1TCxFQUFhdEwsVUFBWSxTQUN6QnNMLEVBQWF4RSxRQUFVLElBQU1oSixLQUFLOEgsU0FDbEM5SCxLQUFLa04sb0JBQW9CckwsWUFBWTJMLEdBR3JDLE1BQU1DLEVBQWlCak0sU0FBU0MsY0FBYyxPQUM5Q2dNLEVBQWV4TCxVQUFZLHFCQUMzQndMLEVBQWV2TCxVQUFZLGdCQUMzQmxDLEtBQUtrTixvQkFBb0JyTCxZQUFZNEwsRUFDekMsQ0FDUWpKLDRCQUVKLEksUUFFeUJ4RSxLQUFLME4sc0JBQXNCLHNHQUNqQ25LLFNBQVFyRSxHQUFLYyxLQUFLMk4scUJBQXFCek8sRUFBR2tDLEVBQXNCd00sYUFDMUQ1TixLQUFLME4sc0JBQXNCLG1DQUNqQ25LLFNBQVFyRSxHQUFLYyxLQUFLMk4scUJBQXFCek8sRUFBR2tDLEVBQXNCeU0sVUFFMUU3TixLQUFLOE4sVUFFTjlOLEtBQUs4TixRQUE0QyxRQUFsQyxFQUFBdE0sU0FBU29ILGNBQWMsbUJBQVcsYUFBSWpKLFNBRW5EaUIsRUFBQSxJQUFTLEdBRXZCLENBQ1E4TSxzQkFBc0JLLEdBRTFCLElBQUlwTCxFQUFNLEdBQ05xTCxFQUFReE0sU0FBU3lNLGlCQUFpQkYsR0FDdEMsSUFBSyxNQUFNL0IsS0FBV2dDLEVBRWJoQyxFQUFRckIsVUFBVXVELFNBQVMsaUJBRTVCbEMsRUFBUXJCLFVBQVVDLElBQUksZUFDdEJqSSxFQUFJckYsS0FBSzBPLElBR2pCLE9BQU9ySixDQUNYLENBRVFnTCxxQkFBcUJRLEVBQWlCQyxHQUUxQ0QsRUFBT0UsaUJBQWlCLFNBQVMsSUFBTXJPLEtBQUtzTyxnQkFBZ0JGLElBQ2hFLENBQ1FmLHlCQUVDck4sS0FBS29OLGNBQ1Z0TSxPQUFPMkYsYUFBYUMsUUFBUSxpQkFBa0IxRyxLQUFLb04sYUFBYTNNLE1BQ3BFLENBQ1E4Tix5QixNQUVDdk8sS0FBS29OLGVBQ1ZwTixLQUFLb04sYUFBYTNNLE1BQXFELFFBQTdDLEVBQUFLLE9BQU8yRixhQUFhRSxRQUFRLHlCQUFpQixRQUFJLEdBQy9FLENBQ1FuQyxzQkFBc0I0SixHQUUxQixHQUFLcE8sS0FBS2tOLDRCQUNKdE0sRUFBQSxJQUFTLEtBQ2ZaLEtBQUt3TyxjQUFhLEdBQ2xCeE8sS0FBS29PLEtBQU9BLEVBQ1JwTyxLQUFLb04sY0FDVCxDQUNJLE1BQU1qSixRQUFnQnBGLEVBQU1tQixXQUM1QkYsS0FBS29OLGFBQWE1RCxVQUFZLEdBQzlCLElBQUssTUFBTTVKLEtBQVV1RSxFQUFRaEUsbUJBQW1CQyxPQUNoRCxDQUNJLE1BQU11TSxFQUFTbkwsU0FBU0MsY0FBYyxVQUN0Q2tMLEVBQU9sTSxNQUFRYixFQUFPVyxTQUN0Qm9NLEVBQU96SyxVQUFZdEMsRUFBT2EsTUFDMUJULEtBQUtvTixhQUFhdkwsWUFBWThLLEUsQ0FFbEMzTSxLQUFLdU8sd0IsQ0FFYixDQUNRaEIsU0FFSnZOLEtBQUt3TyxjQUFhLEVBQ3RCLENBQ1FBLGFBQWEvTixHQUViVCxLQUFLa04sc0JBR01sTixLQUFLa04sb0JBQW9CL0ssTUFBTWtILFFBQXRDNUksRUFBZ0QsUUFDTixRQUU5Q1QsS0FBSzhOLFVBR0RyTixFQUFPVCxLQUFLOE4sUUFBUW5ELFVBQVVDLElBQUksV0FDakM1SyxLQUFLOE4sUUFBUW5ELFVBQVVrQixPQUFPLFdBRTNDLENBQ1FySCxlLGNBRUU1RCxFQUFLZ0gsT0FBTSxLQUFPNUgsS0FBS2dOLGFBRTdCaE4sS0FBS2dOLFlBQWEsRUFDTSxRQUF4QixFQUFBaE4sS0FBS2tOLDJCQUFtQixTQUFFdkMsVUFBVUMsSUFBSSxpQkFFcEM1SyxLQUFLb08sT0FBU2hOLEVBQXNCeU0sY0FBYzdOLEtBQUt5TyxTQUN2RHpPLEtBQUtvTyxPQUFTaE4sRUFBc0J3TSxpQkFBaUI1TixLQUFLME8sWUFFOUQxTyxLQUFLd08sY0FBYSxHQUNNLFFBQXhCLEVBQUF4TyxLQUFLa04sMkJBQW1CLFNBQUV2QyxVQUFVa0IsT0FBTyxpQkFFM0M3TCxLQUFLZ04sWUFBYSxDQUN0QixDQUNReEksZUFFSixJQUFLeEUsS0FBS29OLGFBQWMsT0FDeEIsTUFBTXhOLEVBQVNJLEtBQUtvTixhQUFhM00sTUFDM0JpRCxRQUFlM0UsRUFBTTJFLFNBQzNCLElBQUssTUFBTWhELEtBQVNnRCxFQUFPZSxlQUMzQixDQUNJLEdBQUkvRCxFQUFNb0UsT0FBUSxTQUNsQixNQUFNTyxRQUFtQnRHLEVBQU1zRyxXQUFXM0UsRUFBTUosSUFDaEQsSUFBSyxNQUFNMUMsS0FBUXlILEVBQVdBLFdBRTFCLEdBQUl6SCxFQUFLb0IsUUFBUUMsTUFBS0MsSUFBTUEsRUFBRVUsU0FDOUIsQ0FDSSxNQUFNbEMsRUFBT1IsRUFBTVIsTUFBTWtCLEVBQUtBLE1BQzlCLEdBQW9CLGlCQUFURixFQUFtQixTQUM5QixNQUFNc0IsRUFBOEJwQixFQUFLb0IsUUFBUUssS0FBSUgsSSxZQUVqRCxNQUFPLENBQ0hNLFlBQWlDLFFBQXBCLEVBQUF0QyxFQUFBLE1BQVlnQyxFQUFFSSxjQUFNLFFBQUkvQixLQUFLbUksT0FBU2hJLEdBQVEsS0FDM0RnQyxZQUFhUixFQUFFTyxNQUEwQixRQUFsQixFQUFBdkMsRUFBQSxNQUFZZ0MsRUFBRU8sWUFBSSxRQUFJbEMsS0FBS21JLFFBQThCLFFBQXBCLEVBQUF4SSxFQUFBLE1BQVlnQyxFQUFFSSxjQUFNLFFBQUkvQixLQUFLbUksUUFBVSxLQUFnQixLQUNuSHZHLFNBQVVELEVBQUVVLFFBQVVBLEVBQ3RCQyxRQUFrQixRQUFULEVBQUFYLEVBQUVXLGVBQU8sUUFBSSxLQUN6QixVQUVDZCxFQUFNK0ksT0FBT3BLLEVBQU1zQixFLEVBSXpDLENBQ1F3RixrQkFFSixJQUFLeEUsS0FBS29OLGFBQWMsT0FDeEIsTUFBTXhOLEVBQVNJLEtBQUtvTixhQUFhM00sTUFDakMsSUFBSWtPLEVBQStELEtBQ25FLE1BQU1qTCxRQUFlM0UsRUFBTTJFLFNBQzNCLElBQUssTUFBTWhELEtBQVNnRCxFQUFPZSxlQUMzQixDQUNJLEdBQUkvRCxFQUFNb0UsT0FBUSxTQUNsQixNQUFNTyxRQUFtQnRHLEVBQU1zRyxXQUFXM0UsRUFBTUosSUFDaEQsSUFBSyxNQUFNMUMsS0FBUXlILEVBQVdBLFdBQzlCLENBQ0ksTUFBTTNILEVBQU9SLEVBQU1SLE1BQU1rQixFQUFLQSxNQUM5QixHQUFvQixpQkFBVEYsS0FDTmlSLEdBQVVqUixFQUFPaVIsRUFBTy9RLE1BQzdCLENBQ0ksTUFBTW9CLEVBQThCcEIsRUFBS29CLFFBQVFLLEtBQUlILEksWUFFakQsTUFBTyxDQUNITSxZQUFpQyxRQUFwQixFQUFBdEMsRUFBQSxNQUFZZ0MsRUFBRUksY0FBTSxRQUFJL0IsS0FBS21JLE9BQVNoSSxHQUFRLEtBQzNEZ0MsWUFBYVIsRUFBRU8sTUFBMEIsUUFBbEIsRUFBQXZDLEVBQUEsTUFBWWdDLEVBQUVPLFlBQUksUUFBSWxDLEtBQUttSSxRQUE4QixRQUFwQixFQUFBeEksRUFBQSxNQUFZZ0MsRUFBRUksY0FBTSxRQUFJL0IsS0FBS21JLFFBQVUsS0FBZ0IsS0FDbkh2RyxTQUFVRCxFQUFFVSxPQUNaQyxRQUFrQixRQUFULEVBQUFYLEVBQUVXLGVBQU8sUUFBSSxLQUN6QixJQUVMOE8sRUFBUyxDQUFFL1EsS0FBTUYsRUFBTXNCLFFBQVNBLEUsR0FJNUMsR0FBSTJQLEVBQ0osQ0FDSSxJQUFLLE1BQU1uSCxLQUFTbUgsRUFBTzNQLFFBRXZCd0ksRUFBTXJJLFNBQVdxSSxFQUFNckksVUFBWVMsUUFFakNiLEVBQU0rSSxPQUFPNkcsRUFBTy9RLEtBQU0rUSxFQUFPM1AsUSxDQUUvQyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvQXBpLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL0RhdGVzLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL0hpQm9iL0hpQm9iLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL1dhaXQudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvUmVhc29uRW5oYW5jZW1lbnRzL1JlYXNvbnNFbmhhbmNlbWVudHMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVGltZWxvZy9UaW1lbG9nVHlwZXMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvTWF0ZXJpYWxJY29uLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL051bWJlcnMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvRXZlbnRIYW5kbGVyLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ01vZGVsLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ1VJLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ0Nzcy50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9SZWFzb25FbmhhbmNlbWVudHMvUmVhc29uRW5oYW5jZW1lbnRzQ3NzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBBcGlcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyB4aHIobWV0aG9kOiBcIkdFVFwiIHwgXCJQT1NUXCIsIHVybDogc3RyaW5nLCBib2R5OiBvYmplY3QpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHsgc3RhdHVzOiBudW1iZXIsIGJvZHk6IGFueSB9PihyZXNvbHZlID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsKTtcclxuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xyXG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XHJcbiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogeGhyLnJlc3BvbnNlVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyAhPT0gMjAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoYEhpQm9iIFV0aWxzOiBFcnJvciAke3hoci5zdGF0dXN9IC0gY2hlY2sgdGhlIGRldmVsb3BlciBjb25zb2xlIGZvciBtb3JlIGluZm9ybWF0aW9uLmApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgSGlCb2IgVXRpbHM6IEVycm9yICR7eGhyLnN0YXR1c30gLSBjaGVjayB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgZm9yIG1vcmUgaW5mb3JtYXRpb24uYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHhocik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHhoci5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShib2R5KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgRGF0ZXNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBwYXJzZShzdHI6IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICBpZiAoIXN0cikgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgY29uc3Qgc3BsaXQgPSBzdHIuc3BsaXQoXCJUXCIpO1xyXG4gICAgICAgIGlmIChzcGxpdC5sZW5ndGggPCAyKSBzcGxpdC5wdXNoKFwiMDA6MDBcIik7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHNwbGl0LmpvaW4oXCJUXCIpKS5nZXRUaW1lKCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGZvcm1hdCh0aW1lOiBudW1iZXIsIGluY2x1ZGVUaW1lc3RhbXA6IGJvb2xlYW4pXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aW1lKSByZXR1cm4gXCJcIjtcclxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodGltZSk7XHJcbiAgICAgICAgcmV0dXJuIGAke2RhdGUuZ2V0RnVsbFllYXIoKX0tJHsoZGF0ZS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9LSR7ZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9JHtpbmNsdWRlVGltZXN0YW1wID8gYFQke2RhdGUuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX06JHtkYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX1gIDogXCJcIn1gO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBmb3JtYXRIb3VyKGhvdXJzOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgaG91ciA9IE1hdGguZmxvb3IoaG91cnMgJSAyNCk7XHJcbiAgICAgICAgY29uc3QgbWludXRlID0gTWF0aC5yb3VuZCgoaG91cnMgLSBob3VyKSAqIDYwKTtcclxuICAgICAgICByZXR1cm4gYCR7aG91ci50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX06JHttaW51dGUudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9YFxyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRXZWVrTnVtYmVyRnJvbURhdGUodGltZTogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUodGltZSk7XHJcbiAgICAgICAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcclxuICAgICAgICAvLyBUaHVyc2RheSBpbiBjdXJyZW50IHdlZWsgZGVjaWRlcyB0aGUgeWVhci5cclxuICAgICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyAzIC0gKGRhdGUuZ2V0RGF5KCkgKyA2KSAlIDcpO1xyXG4gICAgICAgIC8vIEphbnVhcnkgNCBpcyBhbHdheXMgaW4gd2VlayAxLlxyXG4gICAgICAgIHZhciB3ZWVrMSA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgMCwgNCk7XHJcbiAgICAgICAgLy8gQWRqdXN0IHRvIFRodXJzZGF5IGluIHdlZWsgMSBhbmQgY291bnQgbnVtYmVyIG9mIHdlZWtzIGZyb20gZGF0ZSB0byB3ZWVrMS5cclxuICAgICAgICByZXR1cm4gMSArIE1hdGgucm91bmQoKChkYXRlLmdldFRpbWUoKSAtIHdlZWsxLmdldFRpbWUoKSkgLyA4NjQwMDAwMFxyXG4gICAgICAgICAgICAtIDMgKyAod2VlazEuZ2V0RGF5KCkgKyA2KSAlIDcpIC8gNyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIHBhcnNlVGltZVRvaG91cnModGltZTogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNwbGl0ID0gdGltZS5zcGxpdChcIjpcIik7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHNwbGl0WzBdKSArIHBhcnNlSW50KHNwbGl0WzFdKSAvIDYwO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uL1V0aWxzL0FwaVwiO1xyXG5pbXBvcnQgeyBEYXRlcyB9IGZyb20gXCIuLi9VdGlscy9EYXRlc1wiO1xyXG5pbXBvcnQgeyBIaUJvYkF0dGVuZGFuY2UsIEhpQm9iTWV0YWRhdGEsIEhpQm9iU2hlZXRzLCBIaUJvYlN1Ym1pdEVudHJ5LCBIaUJvYlVzZXIgfSBmcm9tIFwiLi9IaUJvYlR5cGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSGlCb2Jcclxue1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgdXNlcklkOiBzdHJpbmcgfCBudWxsO1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBzdWJtaXQoZGF0ZTogbnVtYmVyLCBlbnRyaWVzOiBIaUJvYlN1Ym1pdEVudHJ5W10pXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKGVudHJpZXMuc29tZShlID0+ICFlLnJlYXNvbklkKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiV0FSTklORzogU09NRSBFTlRSSUVTIEhBVkUgTk8gUkVBU09OIFNFVCAtIE5PVCBTVUJNSVRUSU5HISFcIiwgZGF0ZSwgZW50cmllcyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGVudHJpZXMubWFwKGUgPT4geyByZXR1cm4geyBzdGFydDogRGF0ZXMuZm9ybWF0KGRhdGUgKyBlLnN0YXJ0SG91ciAqIDM2MDAgKiAxMDAwLCB0cnVlKSwgZW5kOiBlLmxlbmd0aEhvdXJzID8gRGF0ZXMuZm9ybWF0KGRhdGUgKyAoZS5zdGFydEhvdXIgKyBlLmxlbmd0aEhvdXJzKSAqIDM2MDAgKiAxMDAwLCB0cnVlKSA6IHVuZGVmaW5lZCwgcmVhc29uOiBlLnJlYXNvbklkLCBjb21tZW50OiBlLmNvbW1lbnQgPz8gdW5kZWZpbmVkIH0gfSk7XHJcbiAgICAgICAgY29uc3QgZGF0ZVN0ciA9IERhdGVzLmZvcm1hdChkYXRlLCBmYWxzZSk7XHJcbiAgICAgICAgY29uc3QgdXNlcklkID0gYXdhaXQgdGhpcy5nZXRVc2VySWQoKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiUE9TVFwiLCBgaHR0cHM6Ly9hcHAuaGlib2IuY29tL2FwaS9hdHRlbmRhbmNlL2VtcGxveWVlcy8ke3VzZXJJZH0vYXR0ZW5kYW5jZS9lbnRyaWVzP2ZvckRhdGU9JHtkYXRlU3RyfWAsIGRhdGEpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyB0aW1lbG9nUmVhc29ucygpOiBQcm9taXNlPHsgaWQ6IHN0cmluZywgbmFtZTogc3RyaW5nIH1bXT5cclxuICAgIHtcclxuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IHRoaXMubWV0YWRhdGEoKTtcclxuICAgICAgICByZXR1cm4gbWV0YWRhdGEudGltZUxvZ0VudHJ5UmVhc29uLnZhbHVlcy5tYXAodiA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGlkOiB2LnNlcnZlcklkLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogdi52YWx1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGF0dGVuZGFuY2Uoc2hlZXQ6IG51bWJlcik6IFByb21pc2U8SGlCb2JBdHRlbmRhbmNlPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFwaS54aHIoXCJHRVRcIiwgYGh0dHBzOi8vYXBwLmhpYm9iLmNvbS9hcGkvZW1wbG95ZWVzL2F0dGVuZGFuY2UvbXkvc2hlZXRzLyR7c2hlZXR9YCwge30pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuYm9keTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgc2hlZXRzKCk6IFByb21pc2U8SGlCb2JTaGVldHM+XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgdXNlcklkID0gYXdhaXQgdGhpcy5nZXRVc2VySWQoKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiR0VUXCIsIGBodHRwczovL2FwcC5oaWJvYi5jb20vYXBpL2VtcGxveWVlcy8ke3VzZXJJZH0vdGltZWxvZy9hdHRlbmRhbmNlL3NoZWV0c2AsIHt9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LmJvZHk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIG1ldGFkYXRhKCk6IFByb21pc2U8SGlCb2JNZXRhZGF0YT5cclxuICAgIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiR0VUXCIsIFwiaHR0cHM6Ly9hcHAuaGlib2IuY29tL2FwaS9jb21wYW55L21ldGFkYXRhL2xpc3RzLz9pbmNsdWRlQXJjaGl2ZWQ9dHJ1ZVwiLCB7fSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5ib2R5O1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgZ2V0VXNlcklkKCk6IFByb21pc2U8c3RyaW5nPlxyXG4gICAge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy51c2VySWQgIT09IFwic3RyaW5nXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVzZXJJbmZvKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnVzZXJJZCA/PyBcIlwiO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyB1c2VySW5mbygpOiBQcm9taXNlPEhpQm9iVXNlcj5cclxuICAgIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiR0VUXCIsIFwiaHR0cHM6Ly9hcHAuaGlib2IuY29tL2FwaS91c2VyXCIsIHt9KTtcclxuICAgICAgICB0aGlzLnVzZXJJZCA9IChyZXN1bHQuYm9keSBhcyBIaUJvYlVzZXIpLmlkO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuYm9keTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBXYWl0XHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgZm9yKG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+XHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KHJlc29sdmUgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoKSwgbXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyB1bnRpbChkZWxlZ2F0ZTogKCkgPT4gYm9vbGVhbilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4ocmVzb2x2ZSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgaGFuZGxlID0gd2luZG93LnNldEludGVydmFsKCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChkZWxlZ2F0ZSgpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChoYW5kbGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAxKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEhpQm9iIH0gZnJvbSBcIi4uL0hpQm9iL0hpQm9iXCI7XHJcbmltcG9ydCB7IEhpQm9iU3VibWl0RW50cnkgfSBmcm9tIFwiLi4vSGlCb2IvSGlCb2JUeXBlc1wiO1xyXG5pbXBvcnQgeyBEYXRlcyB9IGZyb20gXCIuLi9VdGlscy9EYXRlc1wiO1xyXG5pbXBvcnQgeyBXYWl0IH0gZnJvbSBcIi4uL1V0aWxzL1dhaXRcIjtcclxuaW1wb3J0IHsgUmVhc29uRW5oYW5jZW1lbnRDc3MgfSBmcm9tIFwiLi9SZWFzb25FbmhhbmNlbWVudHNDc3NcIjtcclxuXHJcbmV4cG9ydCBlbnVtIFJlYXNvbkVuaGFuY2VtZW50TW9kZVxyXG57XHJcbiAgICBGaXhBbGwsXHJcbiAgICBGaXhMYXRlc3QsXHJcbn1cclxuZXhwb3J0IGNsYXNzIFJlYXNvbkVuaGFuY2VtZW50c1xyXG57XHJcbiAgICBwcml2YXRlIHJlYXNvbkVuaGFuY2VtZW50VUk/OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByaXZhdGUgcmVhc29uU2VsZWN0PzogSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGFwcFJvb3Q/OiBFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBzdWJtaXR0aW5nID0gZmFsc2U7XHJcblxyXG4gICAgcHJpdmF0ZSBtb2RlPzogUmVhc29uRW5oYW5jZW1lbnRNb2RlO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVVSSgpO1xyXG4gICAgICAgIHRoaXMuY2xvY2tJbkJ1dHRvbkZpbmRlcigpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjcmVhdGVVSSgpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgICAgc3R5bGUuaW5uZXJIVE1MID0gUmVhc29uRW5oYW5jZW1lbnRDc3M7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQoc3R5bGUpO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuY2xhc3NOYW1lID0gXCJyZS1yZWFzb24tdWlcIjtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5yZWFzb25FbmhhbmNlbWVudFVJKTtcclxuXHJcbiAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGxhYmVsLmlubmVyVGV4dCA9IFwiQ2hvb3NlIERlZmF1bHQgUmVhc29uXCI7XHJcbiAgICAgICAgbGFiZWwuY2xhc3NOYW1lID0gXCJyZS1sYWJlbFwiO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChsYWJlbCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVhc29uU2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcclxuICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC5jbGFzc05hbWUgPSBcInJlLXJlYXNvbi1zZWxlY3RcIjtcclxuICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHRoaXMuc2F2ZURlZmF1bHRSZWFzb25WYWx1ZSgpO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZCh0aGlzLnJlYXNvblNlbGVjdCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIikpO1xyXG5cclxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5jbGFzc05hbWUgPSBcInJlLWNhbmNlbC1idG4gcmUtYnRuIHJlLXNlY29uZGFyeVwiO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5pbm5lclRleHQgPSBcIkNhbmNlbFwiXHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNhbmNlbCgpO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChjYW5jZWxCdXR0b24pO1xyXG5cclxuICAgICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5jbGFzc05hbWUgPSBcInJlLXN1Ym1pdC1idG4gcmUtYnRuIHJlLXByaW1hcnlcIjtcclxuICAgICAgICBzdWJtaXRCdXR0b24uaW5uZXJUZXh0ID0gXCJTdWJtaXRcIlxyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zdWJtaXQoKTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuYXBwZW5kQ2hpbGQoc3VibWl0QnV0dG9uKTtcclxuXHJcblxyXG4gICAgICAgIGNvbnN0IHN1Ym1pdHRpbmdUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBzdWJtaXR0aW5nVGV4dC5jbGFzc05hbWUgPSBcInJlLXN1Ym1pdHRpbmctdGV4dFwiO1xyXG4gICAgICAgIHN1Ym1pdHRpbmdUZXh0LmlubmVyVGV4dCA9IFwiU3VibWl0dGluZy4uLlwiXHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKHN1Ym1pdHRpbmdUZXh0KTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgY2xvY2tJbkJ1dHRvbkZpbmRlcigpXHJcbiAgICB7XHJcbiAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2xvY2tJbkJ1dHRvbnMgPSB0aGlzLmZpbmRVbmVuaGFuY2VkQnV0dG9ucyhcImItYnV0dG9uLnB1bmNoLWNsb2NrLWJ1dHRvbiwgYi1idXR0b24udGltZS13aWRnZXQtY2xvY2staW4tYnRuLCBiLWJ1dHRvbi50aW1lLXdpZGdldC1jbG9jay1vdXQtYnRuXCIpO1xyXG4gICAgICAgICAgICBjbG9ja0luQnV0dG9ucy5mb3JFYWNoKGUgPT4gdGhpcy5lbmhhbmNlQ2xvY2tJbkJ1dHRvbihlLCBSZWFzb25FbmhhbmNlbWVudE1vZGUuRml4TGF0ZXN0KSk7XHJcbiAgICAgICAgICAgIHZhciBxdWlja0ZpeEJ1dHRvbiA9IHRoaXMuZmluZFVuZW5oYW5jZWRCdXR0b25zKFwiYi1idXR0b24ucXVpY2stZml4LWFwcGx5LWJ1dHRvblwiKTtcclxuICAgICAgICAgICAgcXVpY2tGaXhCdXR0b24uZm9yRWFjaChlID0+IHRoaXMuZW5oYW5jZUNsb2NrSW5CdXR0b24oZSwgUmVhc29uRW5oYW5jZW1lbnRNb2RlLkZpeEFsbCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmFwcFJvb3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwUm9vdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJhcHAtcm9vdFwiKSA/PyB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgV2FpdC5mb3IoMTApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgZmluZFVuZW5oYW5jZWRCdXR0b25zKHNlbGVjdG9yOiBzdHJpbmcpOiBFbGVtZW50W11cclxuICAgIHtcclxuICAgICAgICB2YXIgYXJyID0gW10gYXMgRWxlbWVudFtdO1xyXG4gICAgICAgIHZhciBxdWVyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xyXG4gICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBxdWVyeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJyZS1lbmhhbmNlZFwiKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicmUtZW5oYW5jZWRcIik7XHJcbiAgICAgICAgICAgICAgICBhcnIucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZW5oYW5jZUNsb2NrSW5CdXR0b24oYnV0dG9uOiBFbGVtZW50LCBtb2RlOiBSZWFzb25FbmhhbmNlbWVudE1vZGUpXHJcbiAgICB7XHJcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnNob3dSZWFzb25GaXhlcihtb2RlKSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHNhdmVEZWZhdWx0UmVhc29uVmFsdWUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFzb25TZWxlY3QpIHJldHVybjtcclxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJyZS1sYXN0LXJlYXNvblwiLCB0aGlzLnJlYXNvblNlbGVjdC52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGxvYWREZWZhdWx0UmVhc29uVmFsdWUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFzb25TZWxlY3QpIHJldHVybjtcclxuICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC52YWx1ZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInJlLWxhc3QtcmVhc29uXCIpID8/IFwiXCI7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIHNob3dSZWFzb25GaXhlcihtb2RlOiBSZWFzb25FbmhhbmNlbWVudE1vZGUpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkpIHJldHVybjtcclxuICAgICAgICBhd2FpdCBXYWl0LmZvcigyNTApO1xyXG4gICAgICAgIHRoaXMuc2V0VUlWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XHJcbiAgICAgICAgaWYgKHRoaXMucmVhc29uU2VsZWN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgcmVhc29ucyA9IGF3YWl0IEhpQm9iLm1ldGFkYXRhKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVhc29uU2VsZWN0LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVhc29uIG9mIHJlYXNvbnMudGltZUxvZ0VudHJ5UmVhc29uLnZhbHVlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IHJlYXNvbi5zZXJ2ZXJJZDtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi5pbm5lclRleHQgPSByZWFzb24udmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubG9hZERlZmF1bHRSZWFzb25WYWx1ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgY2FuY2VsKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLnNldFVJVmlzaWJsZShmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHNldFVJVmlzaWJsZSh2YWx1ZTogYm9vbGVhbilcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5yZWFzb25FbmhhbmNlbWVudFVJKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGVsc2UgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuYXBwUm9vdClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHRoaXMuYXBwUm9vdC5jbGFzc0xpc3QuYWRkKFwicmUtYmx1clwiKTtcclxuICAgICAgICAgICAgZWxzZSB0aGlzLmFwcFJvb3QuY2xhc3NMaXN0LnJlbW92ZShcInJlLWJsdXJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBzdWJtaXQoKVxyXG4gICAge1xyXG4gICAgICAgIGF3YWl0IFdhaXQudW50aWwoKCkgPT4gIXRoaXMuc3VibWl0dGluZyk7XHJcblxyXG4gICAgICAgIHRoaXMuc3VibWl0dGluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJPy5jbGFzc0xpc3QuYWRkKFwicmUtc3VibWl0dGluZ1wiKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gUmVhc29uRW5oYW5jZW1lbnRNb2RlLkZpeEFsbCkgYXdhaXQgdGhpcy5maXhBbGwoKTtcclxuICAgICAgICBpZiAodGhpcy5tb2RlID09PSBSZWFzb25FbmhhbmNlbWVudE1vZGUuRml4TGF0ZXN0KSBhd2FpdCB0aGlzLmZpeExhdGVzdCgpO1xyXG5cclxuICAgICAgICB0aGlzLnNldFVJVmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJPy5jbGFzc0xpc3QucmVtb3ZlKFwicmUtc3VibWl0dGluZ1wiKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdWJtaXR0aW5nID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGZpeEFsbCgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvblNlbGVjdCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHJlYXNvbiA9IHRoaXMucmVhc29uU2VsZWN0LnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IHNoZWV0cyA9IGF3YWl0IEhpQm9iLnNoZWV0cygpO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2hlZXQgb2Ygc2hlZXRzLmVtcGxveWVlU2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHNoZWV0LmxvY2tlZCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGF0dGVuZGFuY2UgPSBhd2FpdCBIaUJvYi5hdHRlbmRhbmNlKHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIGF0dGVuZGFuY2UuYXR0ZW5kYW5jZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGUuZW50cmllcy5zb21lKGUgPT4gIWUucmVhc29uKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lID0gRGF0ZXMucGFyc2UoZGF0ZS5kYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWUgIT09IFwibnVtYmVyXCIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudHJpZXM6IEhpQm9iU3VibWl0RW50cnlbXSA9IGRhdGUuZW50cmllcy5tYXAoZSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0SG91cjogKChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSAtIHRpbWUpIC8gKDM2MDAgKiAxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aEhvdXJzOiBlLmVuZCA/ICgoRGF0ZXMucGFyc2UoZS5lbmQpID8/IERhdGUubm93KCkpIC0gKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpKSAvICgzNjAwICogMTAwMCkgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uSWQ6IGUucmVhc29uIHx8IHJlYXNvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGUuY29tbWVudCA/PyBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgSGlCb2Iuc3VibWl0KHRpbWUsIGVudHJpZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBmaXhMYXRlc3QoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFzb25TZWxlY3QpIHJldHVybjtcclxuICAgICAgICBjb25zdCByZWFzb24gPSB0aGlzLnJlYXNvblNlbGVjdC52YWx1ZTtcclxuICAgICAgICBsZXQgbGF0ZXN0OiB7IGRhdGU6IG51bWJlciwgZW50cmllczogSGlCb2JTdWJtaXRFbnRyeVtdIH0gfCBudWxsID0gbnVsbDtcclxuICAgICAgICBjb25zdCBzaGVldHMgPSBhd2FpdCBIaUJvYi5zaGVldHMoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHNoZWV0cy5lbXBsb3llZVNoZWV0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzaGVldC5sb2NrZWQpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBjb25zdCBhdHRlbmRhbmNlID0gYXdhaXQgSGlCb2IuYXR0ZW5kYW5jZShzaGVldC5pZCk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZGF0ZSBvZiBhdHRlbmRhbmNlLmF0dGVuZGFuY2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBEYXRlcy5wYXJzZShkYXRlLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lICE9PSBcIm51bWJlclwiKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGlmICghbGF0ZXN0IHx8IHRpbWUgPiBsYXRlc3QuZGF0ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRyaWVzOiBIaUJvYlN1Ym1pdEVudHJ5W10gPSBkYXRlLmVudHJpZXMubWFwKGUgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydEhvdXI6ICgoRGF0ZXMucGFyc2UoZS5zdGFydCkgPz8gRGF0ZS5ub3coKSkgLSB0aW1lKSAvICgzNjAwICogMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGhIb3VyczogZS5lbmQgPyAoKERhdGVzLnBhcnNlKGUuZW5kKSA/PyBEYXRlLm5vdygpKSAtIChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSkgLyAoMzYwMCAqIDEwMDApIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbklkOiBlLnJlYXNvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGUuY29tbWVudCA/PyBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF0ZXN0ID0geyBkYXRlOiB0aW1lLCBlbnRyaWVzOiBlbnRyaWVzIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxhdGVzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgbGF0ZXN0LmVudHJpZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVudHJ5LnJlYXNvbklkID0gZW50cnkucmVhc29uSWQgfHwgcmVhc29uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGF3YWl0IEhpQm9iLnN1Ym1pdChsYXRlc3QuZGF0ZSwgbGF0ZXN0LmVudHJpZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ0VudHJ5XHJcbntcclxuICAgIHN0YXJ0SG91cjogbnVtYmVyLFxyXG4gICAgbGVuZ3RoSG91cnM6IG51bWJlcixcclxuICAgIHJlYXNvbklkOiBzdHJpbmcsXHJcbiAgICBjb21tZW50OiBzdHJpbmcgfCBudWxsLFxyXG4gICAgaGFzQ29tbWVudDogYm9vbGVhblxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ0RhdGVcclxue1xyXG4gICAgZGlydHk6IGJvb2xlYW4sXHJcbiAgICBkYXRlOiBudW1iZXJcclxuICAgIGVudHJpZXM6IFRpbWVsb2dFbnRyeVtdLFxyXG4gICAgd2Vla2VuZDogYm9vbGVhbixcclxuICAgIGZhdm9yaXRlZDogYm9vbGVhblxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ1NoZWV0XHJcbntcclxuICAgIGlkOiBudW1iZXIsXHJcbiAgICBzdGF0dXM6IHN0cmluZyxcclxuICAgIHN0YXJ0OiBudW1iZXIsXHJcbiAgICBlbmQ6IG51bWJlclxyXG4gICAgZGF0ZXM6IFRpbWVsb2dEYXRlW10sXHJcbiAgICBsb2NrZWQ6IGJvb2xlYW4sXHJcbiAgICBob3Vyc1BlckRheTogbnVtYmVyXHJcbn1cclxuZXhwb3J0IGVudW0gVGltZWxvZ1NhdmVTdGF0dXNcclxue1xyXG4gICAgV2FpdGluZyxcclxuICAgIFNhdmluZyxcclxuICAgIFNhdmVkXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lTG9nRmF2b3JpdGVkRGF0ZVxyXG57XHJcbiAgICBkYXRlOiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nVUlEYXRlIFxyXG57XHJcbiAgICBkYXRlOiBUaW1lbG9nRGF0ZSxcclxuICAgIHBhcmVudDogSFRNTERpdkVsZW1lbnQsXHJcbiAgICBlbnRyaWVzOiBUaW1lbG9nVUlFbnRyeUNvbnRhaW5lcltdLFxyXG4gICAgc3VtSG91cnM/OiBIVE1MU3BhbkVsZW1lbnQsXHJcbiAgICBzdGFyQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCxcclxuICAgIHBhc3RlQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudFxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ1VJRW50cnlDb250YWluZXJcclxue1xyXG4gICAgZW50cnk6IFRpbWVsb2dFbnRyeSxcclxuICAgIHBhcmVudDogSFRNTERpdkVsZW1lbnQsXHJcbiAgICBzdGFydEhvdXI6IEhUTUxJbnB1dEVsZW1lbnQsXHJcbiAgICBsZW5ndGg6IEhUTUxJbnB1dEVsZW1lbnQsXHJcbiAgICByZWFzb246IEhUTUxTZWxlY3RFbGVtZW50LFxyXG4gICAgZW5kSG91cjogSFRNTElucHV0RWxlbWVudCxcclxuICAgIGNvbW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQsXHJcbiAgICBjb21tZW50QnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudFxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ1VJV2Vla1N1bVxyXG57XHJcbiAgICBkYXRlczogVGltZWxvZ1VJRGF0ZVtdLFxyXG4gICAgZWxlbWVudDogSFRNTERpdkVsZW1lbnRcclxufSIsImV4cG9ydCBhYnN0cmFjdCBjbGFzcyBNYXRlcmlhbEljb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBpbml0aWFsaXplKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcbiAgICAgICAgbGluay5ocmVmID0gXCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PU1hdGVyaWFsK1N5bWJvbHMrT3V0bGluZWQ6b3Bzeix3Z2h0LEZJTEwsR1JBREAyMC4uNDgsMTAwLi43MDAsMC4uMSwtNTAuLjIwMFwiO1xyXG4gICAgICAgIGxpbmsucmVsID0gXCJzdHlsZXNoZWV0XCI7XHJcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0KGljb246IHN0cmluZywgZmlsbDogYm9vbGVhbiA9IGZhbHNlKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICBzcGFuLmNsYXNzTmFtZSA9IGBtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkYDtcclxuICAgICAgICBzcGFuLmlubmVyVGV4dCA9IGljb247XHJcbiAgICAgICAgc3Bhbi5zdHlsZS52ZXJ0aWNhbEFsaWduID0gXCJtaWRkbGVcIjtcclxuICAgICAgICBzcGFuLnN0eWxlLmZvbnRTaXplID0gXCIxLjVlbVwiO1xyXG4gICAgICAgIHNwYW4uc3R5bGUuZm9udFZhcmlhdGlvblNldHRpbmdzID0gYCdGSUxMJyAke2ZpbGwgPyAxIDogMH1gO1xyXG4gICAgICAgIHJldHVybiBzcGFuO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIE51bWJlcnNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyByb3VuZChudW06IG51bWJlciwgZGVjaW1hbHM6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChudW0gKiAoMTAgKiogZGVjaW1hbHMpKSAvICgxMCAqKiBkZWNpbWFscyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGZsb29yKG51bTogbnVtYmVyLCBkZWNpbWFsczogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKG51bSAqICgxMCAqKiBkZWNpbWFscykpIC8gKDEwICoqIGRlY2ltYWxzKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgY2VpbChudW06IG51bWJlciwgZGVjaW1hbHM6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKG51bSAqICgxMCAqKiBkZWNpbWFscykpIC8gKDEwICoqIGRlY2ltYWxzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHN1bShhcnI6IG51bWJlcltdKVxyXG4gICAge1xyXG4gICAgICAgIGxldCB2YWwgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB2YWwgKz0gYXJyW2ldO1xyXG4gICAgICAgIHJldHVybiB2YWw7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgRXZlbnRIYW5kbGVyPFQ+XHJcbntcclxuICAgIHByaXZhdGUgaGFuZGxlcnM6IHsgaGFuZGxlcjogKHZhbDogVCkgPT4gdm9pZCwgY29udGV4dDogYW55IH1bXSA9IFtdO1xyXG4gICAgcHVibGljIG9uKGhhbmRsZXI6ICh2YWw6IFQpID0+IHZvaWQsIGNvbnRleHQ6IGFueSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLmhhbmRsZXJzLnB1c2goeyBoYW5kbGVyLCBjb250ZXh0IH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG9mZihoYW5kbGVyOiAodmFsOiBUKSA9PiB2b2lkLCBjb250ZXh0OiBhbnkpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZmlsdGVyKGggPT4gaC5oYW5kbGVyICE9PSBoYW5kbGVyIHx8IGguY29udGV4dCAhPT0gY29udGV4dCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZmlyZSh2YWw6IFQpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycy5mb3JFYWNoKGggPT4gaC5oYW5kbGVyLmNhbGwoaC5jb250ZXh0LCB2YWwpKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEhpQm9iIH0gZnJvbSBcIi4uL0hpQm9iL0hpQm9iXCI7XHJcbmltcG9ydCB7IEhpQm9iUmVhc29uIH0gZnJvbSBcIi4uL0hpQm9iL0hpQm9iVHlwZXNcIjtcclxuaW1wb3J0IHsgRGF0ZXMgfSBmcm9tIFwiLi4vVXRpbHMvRGF0ZXNcIjtcclxuaW1wb3J0IHsgRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4uL1V0aWxzL0V2ZW50SGFuZGxlclwiO1xyXG5pbXBvcnQgeyBOdW1iZXJzIH0gZnJvbSBcIi4uL1V0aWxzL051bWJlcnNcIjtcclxuaW1wb3J0IHsgV2FpdCB9IGZyb20gXCIuLi9VdGlscy9XYWl0XCI7XHJcbmltcG9ydCB7IFRpbWVsb2dTaGVldCwgVGltZWxvZ0RhdGUsIFRpbWVsb2dTYXZlU3RhdHVzLCBUaW1lTG9nRmF2b3JpdGVkRGF0ZSB9IGZyb20gXCIuL1RpbWVsb2dUeXBlc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRpbWVsb2dNb2RlbFxyXG57XHJcbiAgICBwdWJsaWMgc2hlZXRzOiBUaW1lbG9nU2hlZXRbXSA9IFtdO1xyXG4gICAgcHVibGljIG9uRGF0ZVVwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPHsgc2hlZXQ6IFRpbWVsb2dTaGVldCwgZGF0ZTogVGltZWxvZ0RhdGUgfT4oKTtcclxuICAgIHB1YmxpYyBvblJlYXNvbnNVcGRhdGVkID0gbmV3IEV2ZW50SGFuZGxlcjxIaUJvYlJlYXNvbltdPigpO1xyXG4gICAgcHVibGljIG9uU2hlZXRVcGRhdGVkID0gbmV3IEV2ZW50SGFuZGxlcjxUaW1lbG9nU2hlZXQ+KCk7XHJcbiAgICBwdWJsaWMgb25TaGVldHNVcGRhdGVkID0gbmV3IEV2ZW50SGFuZGxlcjxUaW1lbG9nU2hlZXRbXT4oKTtcclxuICAgIHB1YmxpYyBvblNhdmVTdGF0dXNVcGRhdGVkID0gbmV3IEV2ZW50SGFuZGxlcjxUaW1lbG9nU2F2ZVN0YXR1cz4oKTtcclxuICAgIHByaXZhdGUgc2F2ZUhhbmRsZTogbnVtYmVyID0gLTE7XHJcbiAgICBwcml2YXRlIHNhdmluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGluZ0ZsZXg6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBwcml2YXRlIHJlYXNvbnM6IEhpQm9iUmVhc29uW10gPSBbXTtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpXHJcbiAgICB7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5mZXRjaFNoZWV0cygpO1xyXG4gICAgICAgIHRoaXMuZmV0Y2hSZWFzb25zKCk7XHJcbiAgICAgICAgdGhpcy5vblNhdmVTdGF0dXNVcGRhdGVkLmZpcmUoVGltZWxvZ1NhdmVTdGF0dXMuU2F2ZWQpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGZldGNoU2hlZXRzKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLnNoZWV0cyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNoZWV0cyA9IGF3YWl0IEhpQm9iLnNoZWV0cygpO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2hlZXQgb2Ygc2hlZXRzLmVtcGxveWVlU2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBEYXRlcy5wYXJzZShzaGVldC5jeWNsZVN0YXJ0RGF0ZSkgPz8gMDtcclxuICAgICAgICAgICAgY29uc3QgZW5kID0gRGF0ZXMucGFyc2Uoc2hlZXQuY3ljbGVFbmREYXRlKSA/PyAwO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdTaGVldCA9IHtcclxuICAgICAgICAgICAgICAgIGlkOiBzaGVldC5pZCxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogc2hlZXQuc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgc3RhcnQsXHJcbiAgICAgICAgICAgICAgICBlbmQsXHJcbiAgICAgICAgICAgICAgICBkYXRlczogW10sXHJcbiAgICAgICAgICAgICAgICBsb2NrZWQ6IHNoZWV0LmxvY2tlZCxcclxuICAgICAgICAgICAgICAgIGhvdXJzUGVyRGF5OiAwXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuc2hlZXRzLnB1c2gobmV3U2hlZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNoZWV0cy5zb3J0KChhLCBiKSA9PiBiLnN0YXJ0IC0gYS5zdGFydCk7XHJcbiAgICAgICAgdGhpcy5vblNoZWV0c1VwZGF0ZWQuZmlyZSh0aGlzLnNoZWV0cyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZmV0Y2hSZWFzb25zKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLnJlYXNvbnMgPSAoYXdhaXQgSGlCb2IubWV0YWRhdGEoKSkudGltZUxvZ0VudHJ5UmVhc29uLnZhbHVlcztcclxuICAgICAgICB0aGlzLm9uUmVhc29uc1VwZGF0ZWQuZmlyZSh0aGlzLnJlYXNvbnMpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGZldGNoU2hlZXQoaWQ6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmlkID09PSBpZCk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGF0dGVuZGFuY2UgPSBhd2FpdCBIaUJvYi5hdHRlbmRhbmNlKGlkKTtcclxuICAgICAgICBzaGVldC5ob3Vyc1BlckRheSA9IGF0dGVuZGFuY2Uuc3VtbWFyeS5wb3RlbnRpYWxXb3JraW5nSG91cnMgLyBhdHRlbmRhbmNlLnN1bW1hcnkucG90ZW50aWFsV29ya2luZ0RheXM7XHJcbiAgICAgICAgc2hlZXQuZGF0ZXMgPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2YgYXR0ZW5kYW5jZS5hdHRlbmRhbmNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgdGltZSA9IERhdGVzLnBhcnNlKGRhdGUuZGF0ZSkgPz8gRGF0ZS5ub3coKVxyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZTogVGltZWxvZ0RhdGUgPSB7XHJcbiAgICAgICAgICAgICAgICBkaXJ0eTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkYXRlOiB0aW1lLFxyXG4gICAgICAgICAgICAgICAgd2Vla2VuZDogZGF0ZS5zdGF0dXMgPT09IFwiV2Vla2VuZEV2ZW50XCIsXHJcbiAgICAgICAgICAgICAgICBmYXZvcml0ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZW50cmllczogZGF0ZS5lbnRyaWVzLm1hcChlID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRIb3VyOiBOdW1iZXJzLmZsb29yKCgoRGF0ZXMucGFyc2UoZS5zdGFydCkgPz8gRGF0ZS5ub3coKSkgLSAoRGF0ZXMucGFyc2UoZGF0ZS5kYXRlKSA/PyBEYXRlLm5vdygpKSkgLyAoMzYwMCAqIDEwMDApLCAyKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoSG91cnM6IE51bWJlcnMuY2VpbCgoKERhdGVzLnBhcnNlKGUuZW5kKSA/PyBEYXRlLm5vdygpKSAtIChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSkgLyAoMzYwMCAqIDEwMDApLCAyKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uSWQ6IGUucmVhc29uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50OiBlLmNvbW1lbnQgPz8gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ29tbWVudDogISFlLmNvbW1lbnRcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSkuc29ydCgoYSwgYikgPT4gYS5zdGFydEhvdXIgLSBiLnN0YXJ0SG91cilcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgc2hlZXQuZGF0ZXMucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNoZWV0LmRhdGVzLnNvcnQoKGEsIGIpID0+IGIuZGF0ZSAtIGEuZGF0ZSk7XHJcbiAgICAgICAgY29uc3QgZmF2b3JpdGUgPSBhd2FpdCB0aGlzLmdldEZhdm9yaXRlZERhdGUoKTtcclxuICAgICAgICBpZiAoZmF2b3JpdGUgJiYgZmF2b3JpdGUuc2hlZXQgPT09IHNoZWV0KVxyXG4gICAgICAgICAgICBmYXZvcml0ZS5kYXRlLmZhdm9yaXRlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5vblNoZWV0VXBkYXRlZC5maXJlKHNoZWV0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2hhbmdlU3RhcnRIb3VyKGRhdGU6IFRpbWVsb2dEYXRlLCBpbmRleDogbnVtYmVyLCBob3VyOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLnN0YXJ0SG91ciA9IGhvdXI7XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGNoYW5nZUxlbmd0aEhvdXJzKGRhdGU6IFRpbWVsb2dEYXRlLCBpbmRleDogbnVtYmVyLCBsZW5ndGg6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0ubGVuZ3RoSG91cnMgPSBsZW5ndGg7XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGNoYW5nZVJlYXNvbihkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlciwgcmVhc29uOiBzdHJpbmcpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLnJlYXNvbklkID0gcmVhc29uO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBjaGFuZ2VDb21tZW50KGRhdGU6IFRpbWVsb2dEYXRlLCBpbmRleDogbnVtYmVyLCBjb21tZW50OiBzdHJpbmcpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLmNvbW1lbnQgPSBjb21tZW50O1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0uaGFzQ29tbWVudCA9IHRydWU7XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHRvZ2dsZUNvbW1lbnQoZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLmhhc0NvbW1lbnQgPSAhZGF0ZS5lbnRyaWVzW2luZGV4XS5oYXNDb21tZW50O1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0uY29tbWVudCA9IGRhdGUuZW50cmllc1tpbmRleF0uaGFzQ29tbWVudCA/IFwiXCIgOiBudWxsO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBzZXRGYXZvcml0ZWREYXRlKGRhdGU6IFRpbWVsb2dEYXRlKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IG9sZEZhdm9yaXRlID0gYXdhaXQgdGhpcy5nZXRGYXZvcml0ZWREYXRlKCk7XHJcbiAgICAgICAgaWYgKG9sZEZhdm9yaXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgb2xkRmF2b3JpdGUuZGF0ZS5mYXZvcml0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUob2xkRmF2b3JpdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGF0ZS5mYXZvcml0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQ6IHNoZWV0LCBkYXRlOiBkYXRlIH0pO1xyXG5cclxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0bF9mYXZvcml0ZVwiLCBKU09OLnN0cmluZ2lmeSh7IGRhdGU6IERhdGVzLmZvcm1hdChkYXRlLmRhdGUsIGZhbHNlKSB9IGFzIFRpbWVMb2dGYXZvcml0ZWREYXRlKSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0RmF2b3JpdGVkRGF0ZSgpOiBQcm9taXNlPHsgc2hlZXQ6IFRpbWVsb2dTaGVldCwgZGF0ZTogVGltZWxvZ0RhdGUgfSB8IG51bGw+XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc3RyID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGxfZmF2b3JpdGVcIik7XHJcbiAgICAgICAgaWYgKCFzdHIpIHJldHVybiBudWxsO1xyXG4gICAgICAgIGNvbnN0IGZhdm9yaXRlOiBUaW1lTG9nRmF2b3JpdGVkRGF0ZSA9IEpTT04ucGFyc2Uoc3RyKTtcclxuICAgICAgICBjb25zdCB0aW1lID0gRGF0ZXMucGFyc2UoZmF2b3JpdGUuZGF0ZSk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aW1lID09PSBcIm51bWJlclwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5zdGFydCA8PSB0aW1lICYmIHMuZW5kID49IHRpbWUpO1xyXG4gICAgICAgICAgICBpZiAoc2hlZXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChzaGVldC5kYXRlcy5sZW5ndGggPCAxKSBhd2FpdCB0aGlzLmZldGNoU2hlZXQoc2hlZXQuaWQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IHNoZWV0LmRhdGVzLmZpbmQoZCA9PiBkLmRhdGUgPT09IHRpbWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgc2hlZXQ6IHNoZWV0LCBkYXRlOiBkYXRlIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlbGV0ZUVudHJ5KGRhdGU6IFRpbWVsb2dEYXRlLCBpbmRleDogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBmaW5kTGFzdEVudHJ5KG9yaWdpbmFsRGF0ZTogVGltZWxvZ0RhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxTaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBvcmlnaW5hbERhdGUpKTtcclxuICAgICAgICBpZiAoIW9yaWdpbmFsU2hlZXQpIHJldHVybjtcclxuICAgICAgICBsZXQgZGF0ZUluZGV4ID0gb3JpZ2luYWxTaGVldC5kYXRlcy5pbmRleE9mKG9yaWdpbmFsRGF0ZSk7XHJcbiAgICAgICAgbGV0IGVudHJ5SW5kZXggPSAtMTtcclxuICAgICAgICBmb3IgKGxldCBzaGVldEluZGV4ID0gdGhpcy5zaGVldHMuaW5kZXhPZihvcmlnaW5hbFNoZWV0KTsgc2hlZXRJbmRleCA8IHRoaXMuc2hlZXRzLmxlbmd0aDsgc2hlZXRJbmRleCsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0c1tzaGVldEluZGV4XTtcclxuICAgICAgICAgICAgaWYgKHNoZWV0LmRhdGVzLmxlbmd0aCA8IDEpIGF3YWl0IHRoaXMuZmV0Y2hTaGVldChzaGVldC5pZCk7XHJcbiAgICAgICAgICAgIGZvciAoOyBkYXRlSW5kZXggPCBzaGVldC5kYXRlcy5sZW5ndGg7IGRhdGVJbmRleCsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlID0gc2hlZXQuZGF0ZXNbZGF0ZUluZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRlLmVudHJpZXMubGVuZ3RoID4gMCkgcmV0dXJuIGVudHJ5SW5kZXggPCAwID8gZGF0ZS5lbnRyaWVzW2RhdGUuZW50cmllcy5sZW5ndGggLSAxXSA6IGRhdGUuZW50cmllc1tlbnRyeUluZGV4XTtcclxuICAgICAgICAgICAgICAgIGVudHJ5SW5kZXggPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRhdGVJbmRleCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIG5ld0VudHJ5KGRhdGU6IFRpbWVsb2dEYXRlKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgbGFzdCA9IGF3YWl0IHRoaXMuZmluZExhc3RFbnRyeShkYXRlKTtcclxuICAgICAgICBsZXQgc3RhcnRIb3VyID0gOC41O1xyXG4gICAgICAgIGxldCBsZW5ndGhIb3VycyA9IE51bWJlcnMucm91bmQoc2hlZXQuaG91cnNQZXJEYXksIDIpO1xyXG4gICAgICAgIGxldCByZWFzb25JZCA9IFwiXCI7XHJcbiAgICAgICAgaWYgKGxhc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZGF0ZS5lbnRyaWVzLmluY2x1ZGVzKGxhc3QpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdGFydEhvdXIgPSBsYXN0LnN0YXJ0SG91ciArIGxhc3QubGVuZ3RoSG91cnM7XHJcbiAgICAgICAgICAgICAgICBsZW5ndGhIb3VycyA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVhc29uSWQgPSBsYXN0LnJlYXNvbklkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRlLmVudHJpZXMucHVzaCh7XHJcbiAgICAgICAgICAgIHN0YXJ0SG91cixcclxuICAgICAgICAgICAgbGVuZ3RoSG91cnMsXHJcbiAgICAgICAgICAgIHJlYXNvbklkLFxyXG4gICAgICAgICAgICBjb21tZW50OiBudWxsLFxyXG4gICAgICAgICAgICBoYXNDb21tZW50OiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBwYXN0ZUZyb21TdGFycmVkKGRhdGU6IFRpbWVsb2dEYXRlKVxyXG4gICAge1xyXG4gICAgICAgIGlmIChkYXRlLmVudHJpZXMubGVuZ3RoID4gMCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgZmF2b3JpdGUgPSBhd2FpdCB0aGlzLmdldEZhdm9yaXRlZERhdGUoKTtcclxuICAgICAgICBpZiAoIWZhdm9yaXRlIHx8IGZhdm9yaXRlLmRhdGUgPT09IGRhdGUpIHJldHVybjtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBmYXZvcml0ZS5kYXRlLmVudHJpZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBkYXRlLmVudHJpZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBzdGFydEhvdXI6IGVudHJ5LnN0YXJ0SG91cixcclxuICAgICAgICAgICAgICAgIGxlbmd0aEhvdXJzOiBlbnRyeS5sZW5ndGhIb3VycyxcclxuICAgICAgICAgICAgICAgIHJlYXNvbklkOiBlbnRyeS5yZWFzb25JZCxcclxuICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGVudHJ5LmNvbW1lbnQsXHJcbiAgICAgICAgICAgICAgICBoYXNDb21tZW50OiBlbnRyeS5oYXNDb21tZW50XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHF1ZXVlU2F2ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnNhdmVIYW5kbGUpO1xyXG4gICAgICAgIHRoaXMuc2F2ZUhhbmRsZSA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHRoaXMuc2F2ZSgpLCA1MDApO1xyXG4gICAgICAgIHRoaXMub25TYXZlU3RhdHVzVXBkYXRlZC5maXJlKFRpbWVsb2dTYXZlU3RhdHVzLldhaXRpbmcpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIHNhdmUoKVxyXG4gICAge1xyXG4gICAgICAgIGF3YWl0IFdhaXQudW50aWwoKCkgPT4gIXRoaXMuc2F2aW5nKTtcclxuICAgICAgICB0aGlzLnNhdmluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5vblNhdmVTdGF0dXNVcGRhdGVkLmZpcmUoVGltZWxvZ1NhdmVTdGF0dXMuU2F2aW5nKTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHRoaXMuc2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIHNoZWV0LmRhdGVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZS5kaXJ0eSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBIaUJvYi5zdWJtaXQoZGF0ZS5kYXRlLCBkYXRlLmVudHJpZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGUuZGlydHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQuZmlyZShUaW1lbG9nU2F2ZVN0YXR1cy5TYXZlZCk7XHJcbiAgICAgICAgdGhpcy5zYXZpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBnZXRDdXJyZW50QmFsYW5jZUhvdXJzKHNoZWV0OiBUaW1lbG9nU2hlZXQpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgb2xkU2hlZXRzSW5jbHVkZWQgPSAxOyAvL0N1cnJlbnQgc2hlZXQncyBiYWxhbmNlIGlzIGluY2x1ZGVkLCBhbmQgdGhpcyBtYW55IHByZXZpb3VzIHNoZWV0c1xyXG4gICAgICAgIGNvbnN0IHNoZWV0SW5kZXggPSB0aGlzLnNoZWV0cy5pbmRleE9mKHNoZWV0KTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2hlZXRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XHJcbiAgICAgICAgbGV0IGJhbGFuY2UgPSAwO1xyXG4gICAgICAgIGlmICghIXRoaXMuc2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYXdhaXQgV2FpdC51bnRpbCgoKSA9PiAhdGhpcy5jYWxjdWxhdGluZ0ZsZXgpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0aW5nRmxleCA9IHRydWU7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBzaGVldEluZGV4ICsgb2xkU2hlZXRzSW5jbHVkZWQ7IGkgPj0gc2hlZXRJbmRleCAmJiBpIDwgdGhpcy5zaGVldHMubGVuZ3RoOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNoZWV0KSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gYHRsX2NhY2hlZF9ob3VyX2JhbGFuY2VfJHtzaGVldC5pZH1gO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNoZWV0QmFsYW5jZSA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hlZXQubG9ja2VkICYmIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShjYWNoZUtleSkgIT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hlZXRCYWxhbmNlID0gcGFyc2VGbG9hdCh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oY2FjaGVLZXkpID8/IFwiMFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hlZXQuZGF0ZXMubGVuZ3RoIDwgMSkgYXdhaXQgdGhpcy5mZXRjaFNoZWV0KHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcG90ZW50aWFsSG91cnMgPSBzaGVldC5kYXRlcy5maWx0ZXIoZCA9PiAhZC53ZWVrZW5kKS5sZW5ndGggKiBzaGVldC5ob3Vyc1BlckRheTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgd29ya2VkSG91cnMgPSBOdW1iZXJzLnN1bShzaGVldC5kYXRlcy5tYXAoZCA9PiBOdW1iZXJzLnN1bShkLmVudHJpZXMubWFwKGUgPT4gZS5sZW5ndGhIb3VycykpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdvcmtlZEhvdXJzID4gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoZWV0QmFsYW5jZSAtPSBwb3RlbnRpYWxIb3VycztcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hlZXRCYWxhbmNlICs9IHdvcmtlZEhvdXJzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hlZXQubG9ja2VkICYmIHNoZWV0LmlkID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGNhY2hlS2V5LCBzaGVldEJhbGFuY2UudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBiYWxhbmNlICs9IHNoZWV0QmFsYW5jZTtcclxuICAgICAgICAgICAgICAgIHNoZWV0c1tzaGVldC5pZC50b1N0cmluZygpXSA9IHNoZWV0QmFsYW5jZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0aW5nRmxleCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBzaGVldHMsIGJhbGFuY2UgfTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBSZWFzb25FbmhhbmNlbWVudHMgfSBmcm9tIFwiLi9SZWFzb25FbmhhbmNlbWVudHMvUmVhc29uc0VuaGFuY2VtZW50c1wiO1xyXG5pbXBvcnQgeyBUaW1lbG9nVUkgfSBmcm9tIFwiLi9UaW1lbG9nL1RpbWVsb2dVSVwiO1xyXG5pbXBvcnQgeyBNYXRlcmlhbEljb24gfSBmcm9tIFwiLi9VdGlscy9NYXRlcmlhbEljb25cIjtcclxuXHJcbk1hdGVyaWFsSWNvbi5pbml0aWFsaXplKCk7XHJcbm5ldyBUaW1lbG9nVUkoKTtcclxubmV3IFJlYXNvbkVuaGFuY2VtZW50cygpOyIsImltcG9ydCB7IEhpQm9iUmVhc29uIH0gZnJvbSBcIi4uL0hpQm9iL0hpQm9iVHlwZXNcIjtcclxuaW1wb3J0IHsgRGF0ZXMgfSBmcm9tIFwiLi4vVXRpbHMvRGF0ZXNcIjtcclxuaW1wb3J0IHsgTWF0ZXJpYWxJY29uIH0gZnJvbSBcIi4uL1V0aWxzL01hdGVyaWFsSWNvblwiO1xyXG5pbXBvcnQgeyBOdW1iZXJzIH0gZnJvbSBcIi4uL1V0aWxzL051bWJlcnNcIjtcclxuaW1wb3J0IHsgV2FpdCB9IGZyb20gXCIuLi9VdGlscy9XYWl0XCI7XHJcbmltcG9ydCB7IFRpbWVsb2dDc3MgfSBmcm9tIFwiLi9UaW1lbG9nQ3NzXCI7XHJcbmltcG9ydCB7IFRpbWVsb2dNb2RlbCB9IGZyb20gXCIuL1RpbWVsb2dNb2RlbFwiO1xyXG5pbXBvcnQgeyBUaW1lbG9nRGF0ZSwgVGltZWxvZ0VudHJ5LCBUaW1lbG9nU2F2ZVN0YXR1cywgVGltZWxvZ1NoZWV0LCBUaW1lbG9nVUlEYXRlIGFzIFRpbWVsb2dVSURhdGVDb250YWluZXIsIFRpbWVsb2dVSVdlZWtTdW0gfSBmcm9tIFwiLi9UaW1lbG9nVHlwZXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUaW1lbG9nVUlcclxue1xyXG4gICAgcHJpdmF0ZSB0aW1lbG9nVUlPdXRlcj86IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSB0aW1lbG9nVUlJbm5lcj86IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSB0b2dnbGVCdXR0b24/OiBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgIHByaXZhdGUgbW9kZWw/OiBUaW1lbG9nTW9kZWw7XHJcblxyXG4gICAgcHJpdmF0ZSBzaGVldERyb3Bkb3duPzogSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHNoZWV0RHJvcGRvd25PcHRpb25zOiB7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGVsZW1lbnQ6IEhUTUxPcHRpb25FbGVtZW50IH1bXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBzZWxlY3RlZFNoZWV0PzogVGltZWxvZ1NoZWV0O1xyXG5cclxuICAgIHByaXZhdGUgc2hlZXRDb250YWluZXI/OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByaXZhdGUgc2hlZXREYXRlczogVGltZWxvZ1VJRGF0ZUNvbnRhaW5lcltdID0gW107XHJcbiAgICBwcml2YXRlIHdlZWtTdW1zOiBUaW1lbG9nVUlXZWVrU3VtW10gPSBbXTtcclxuICAgIHByaXZhdGUgc2F2ZVN0YXR1cz86IEhUTUxTcGFuRWxlbWVudDtcclxuICAgIHByaXZhdGUgYmFsYW5jZUxhYmVsPzogSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICAgcHJpdmF0ZSByZWFzb25zOiBIaUJvYlJlYXNvbltdID0gW107XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgICAgICAod2luZG93IGFzIGFueSkudGltZWxvZyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5hZGRCdXR0b24oKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgYWRkQnV0dG9uKClcclxuICAgIHtcclxuICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXYuYXBwLWNvbnRlbnQgPiBhcHAtdG9wLWJhci5hcHAtdG9wLWJhciA+IGRpdi5hY3Rpb25zXCIpO1xyXG4gICAgICAgICAgICBpZiAoIXBhcmVudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgV2FpdC5mb3IoMSk7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLXRvZ2dsZS1idG5cIjtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24uYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcInNlbnRpbWVudF92ZXJ5X3NhdGlzZmllZFwiKSk7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLnRpdGxlID0gXCJIaUJvYiBVdGlsaXRpZXNcIjtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMudG9nZ2xlVmlzaWJsZSgpO1xyXG4gICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy50b2dnbGVCdXR0b24pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVVSSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVNb2RlbCgpO1xyXG5cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSB0b2dnbGVWaXNpYmxlKClcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMudGltZWxvZ1VJT3V0ZXIpIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy50aW1lbG9nVUlPdXRlci5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNoZWV0Q29udGFpbmVyKSB0aGlzLnNoZWV0Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWw/LmZldGNoU2hlZXRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJpbml0aWFsXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlVUkoKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG4gICAgICAgIHN0eWxlLmlubmVySFRNTCA9IFRpbWVsb2dDc3M7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdHlsZSk7XHJcblxyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIuY2xhc3NOYW1lID0gXCJ0bC11aVwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHRoaXMudGltZWxvZ1VJT3V0ZXIpO1xyXG5cclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmNsYXNzTmFtZSA9IFwidGwtdWktaW5uZXJcIjtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSU91dGVyLmFwcGVuZCh0aGlzLnRpbWVsb2dVSUlubmVyKTtcclxuXHJcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtY2xvc2UtYnRuXCI7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImNsb3NlXCIpKTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy50b2dnbGVWaXNpYmxlKCk7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IHNoZWV0RHJvcGRvd25MYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgIHNoZWV0RHJvcGRvd25MYWJlbC5pbm5lclRleHQgPSBcIlNoZWV0OlwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQoc2hlZXREcm9wZG93bkxhYmVsKTtcclxuXHJcbiAgICAgICAgdGhpcy5zaGVldERyb3Bkb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcclxuICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd24uY2xhc3NOYW1lID0gXCJ0bC1zaGVldC1zZWxlY3RcIjtcclxuICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd24ub25jaGFuZ2UgPSAoKSA9PiB0aGlzLm9uU2VsZWN0ZWRTaGVldENoYW5nZSgpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQodGhpcy5zaGVldERyb3Bkb3duKTtcclxuXHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmNsYXNzTmFtZSA9IFwidGwtc2F2ZS1zdGF0dXNcIjtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZCh0aGlzLnNhdmVTdGF0dXMpO1xyXG5cclxuICAgICAgICB0aGlzLmJhbGFuY2VMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5iYWxhbmNlTGFiZWwuaW5uZXJUZXh0ID0gXCJCYWxhbmNlOiBcIjtcclxuICAgICAgICB0aGlzLmJhbGFuY2VMYWJlbC5jbGFzc05hbWUgPSBcInRsLWJhbGFuY2UtbGFiZWxcIjtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZCh0aGlzLmJhbGFuY2VMYWJlbCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2hlZXRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuc2hlZXRDb250YWluZXIuY2xhc3NOYW1lID0gXCJ0bC1zaGVldFwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQodGhpcy5zaGVldENvbnRhaW5lcik7XHJcblxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjcmVhdGVNb2RlbCgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMubW9kZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLm9uRGF0ZVVwZGF0ZWQub2ZmKHRoaXMub25EYXRlVXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwub25SZWFzb25zVXBkYXRlZC5vZmYodGhpcy5vblJlYXNvbnNVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5vblNhdmVTdGF0dXNVcGRhdGVkLm9mZih0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLm9uU2hlZXRVcGRhdGVkLm9mZih0aGlzLm9uU2hlZXRVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5vblNoZWV0c1VwZGF0ZWQub2ZmKHRoaXMub25TaGVldHNVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG5ldyBUaW1lbG9nTW9kZWwoKTtcclxuICAgICAgICB0aGlzLm1vZGVsLm9uRGF0ZVVwZGF0ZWQub24odGhpcy5vbkRhdGVVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm1vZGVsLm9uUmVhc29uc1VwZGF0ZWQub24odGhpcy5vblJlYXNvbnNVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm1vZGVsLm9uU2F2ZVN0YXR1c1VwZGF0ZWQub24odGhpcy5vblNhdmVTdGF0dXNVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm1vZGVsLm9uU2hlZXRVcGRhdGVkLm9uKHRoaXMub25TaGVldFVwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25TaGVldHNVcGRhdGVkLm9uKHRoaXMub25TaGVldHNVcGRhdGVkLCB0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5tb2RlbC5pbml0aWFsaXplKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGdldERhdGVDb250YWluZXIoZGF0YTogeyBzaGVldDogVGltZWxvZ1NoZWV0LCBkYXRlOiBUaW1lbG9nRGF0ZSB9KVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2hlZXQgPT09IGRhdGEuc2hlZXQgJiYgdGhpcy5zaGVldENvbnRhaW5lcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCBkYXRlQ29udGFpbmVyID0gdGhpcy5zaGVldERhdGVzLmZpbmQoZCA9PiBkLmRhdGUgPT09IGRhdGEuZGF0ZSk7XHJcbiAgICAgICAgICAgIGlmICghZGF0ZUNvbnRhaW5lcilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lciA9IHsgZGF0ZTogZGF0YS5kYXRlLCBwYXJlbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksIGVudHJpZXM6IFtdLCBzdGFyQnV0dG9uOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpLCBwYXN0ZUJ1dHRvbjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKSB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaGVldERhdGVzLnB1c2goZGF0ZUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5jbGFzc05hbWUgPSBcInRsLWRhdGVcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hlZXRDb250YWluZXIuYXBwZW5kQ2hpbGQoZGF0ZUNvbnRhaW5lci5wYXJlbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChuZXcgRGF0ZShkYXRhLmRhdGUuZGF0ZSkuZ2V0RGF5KCkgPT09IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2Vla1NlcGVyYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgd2Vla1NlcGVyYXRvci5jbGFzc05hbWUgPSBcInRsLXdlZWstc2VwZXJhdG9yXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGVldENvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWVrU2VwZXJhdG9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmQoZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8uc2V0RmF2b3JpdGVkRGF0ZShkYXRhLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtc3Rhci1idXR0b24gdGwtc2hvdy1vbi1ob3ZlclwiO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLnRpdGxlID0gXCJGYXZvcml0ZSBEYXlcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgICAgICAgICAgdGl0bGUuY2xhc3NOYW1lID0gXCJ0bC1kYXRlLWxhYmVsXCI7XHJcbiAgICAgICAgICAgICAgICB0aXRsZS5pbm5lclRleHQgPSBuZXcgRGF0ZShkYXRhLmRhdGUuZGF0ZSkudG9EYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRlLndlZWtlbmQpIHRpdGxlLmNsYXNzTGlzdC5hZGQoXCJ0bC1kYXRlLWxhYmVsLXdlZWtlbmRcIik7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmQodGl0bGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghZGF0YS5zaGVldC5sb2NrZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICBhZGQuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImFkZFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBhZGQuY2xhc3NOYW1lID0gXCJ0bC1hZGQtZW50cnktYnRuIHRsLXNob3ctb24taG92ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICBhZGQub25jbGljayA9ICgpID0+IHRoaXMubW9kZWw/Lm5ld0VudHJ5KGRhdGEuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kKGFkZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24uYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcInN3aXRjaF9hY2Nlc3Nfc2hvcnRjdXRfYWRkXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24udGl0bGUgPSBcIlBhc3RlIGZyb20gRmF2b3JpdGUgRGF5XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLXBhc3RlLWJ0biB0bC1zaG93LW9uLWhvdmVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8ucGFzdGVGcm9tU3RhcnJlZChkYXRhLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmFwcGVuZChkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkVG9XZWVrU3VtKGRhdGVDb250YWluZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlQ29udGFpbmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0RW50cnlDb250YWluZXIoZGF0YTogeyBzaGVldDogVGltZWxvZ1NoZWV0LCBkYXRlOiBUaW1lbG9nRGF0ZSB9LCBkYXRlQ29udGFpbmVyOiBUaW1lbG9nVUlEYXRlQ29udGFpbmVyLCBlbnRyeTogVGltZWxvZ0VudHJ5KVxyXG4gICAge1xyXG4gICAgICAgIGxldCBlbnRyeUNvbnRhaW5lciA9IGRhdGVDb250YWluZXIuZW50cmllcy5maW5kKHAgPT4gcC5lbnRyeSA9PT0gZW50cnkpO1xyXG4gICAgICAgIGlmICghZW50cnlDb250YWluZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lciA9IHtcclxuICAgICAgICAgICAgICAgIGVudHJ5LFxyXG4gICAgICAgICAgICAgICAgcGFyZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxyXG4gICAgICAgICAgICAgICAgc3RhcnRIb3VyOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXHJcbiAgICAgICAgICAgICAgICBlbmRIb3VyOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXHJcbiAgICAgICAgICAgICAgICBsZW5ndGg6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcclxuICAgICAgICAgICAgICAgIHJlYXNvbjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKSxcclxuICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcclxuICAgICAgICAgICAgICAgIGNvbW1lbnRCdXR0b246IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIilcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5lbnRyaWVzLnB1c2goZW50cnlDb250YWluZXIpO1xyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmNsYXNzTmFtZSA9IFwidGwtZW50cnlcIjtcclxuICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIucGFyZW50KTtcclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91ci50eXBlID0gXCJ0aW1lXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91ci5jbGFzc05hbWUgPSBcInRsLWVudHJ5LXN0YXJ0XCI7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnNoZWV0LmxvY2tlZCkgZW50cnlDb250YWluZXIuc3RhcnRIb3VyLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuc3RhcnRIb3VyLm9uY2hhbmdlID0gKCkgPT4gXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IGVudHJ5LnN0YXJ0SG91ciArIGVudHJ5Lmxlbmd0aEhvdXJzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbD8uY2hhbmdlU3RhcnRIb3VyKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIERhdGVzLnBhcnNlVGltZVRvaG91cnMoZW50cnlDb250YWluZXI/LnN0YXJ0SG91ci52YWx1ZSA/PyBcIjA4OjAwXCIpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IE51bWJlcnMucm91bmQoZW5kIC0gZW50cnkuc3RhcnRIb3VyLCAyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWw/LmNoYW5nZUxlbmd0aEhvdXJzKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIGxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91cik7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBlbmRMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgICAgICBlbmRMYWJlbC5jbGFzc05hbWUgPSBcInRsLWVuZC1sYWJlbFwiXHJcbiAgICAgICAgICAgIGVuZExhYmVsLmlubmVyVGV4dCA9IFwiLVwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW5kTGFiZWwpO1xyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuZW5kSG91ci50eXBlID0gXCJ0aW1lXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmVuZEhvdXIuY2xhc3NOYW1lID0gXCJ0bC1lbnRyeS1lbmRcIjtcclxuICAgICAgICAgICAgaWYgKGRhdGEuc2hlZXQubG9ja2VkKSBlbnRyeUNvbnRhaW5lci5lbmRIb3VyLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuZW5kSG91ci5vbmNoYW5nZSA9ICgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChlbnRyeUNvbnRhaW5lcj8uZW5kSG91cilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBOdW1iZXJzLnJvdW5kKERhdGVzLnBhcnNlVGltZVRvaG91cnMoZW50cnlDb250YWluZXIuZW5kSG91ci52YWx1ZSkgLSBlbnRyeS5zdGFydEhvdXIsIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZWw/LmNoYW5nZUxlbmd0aEhvdXJzKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIGxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLmVuZEhvdXIpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnJlYXNvbi5vbmNoYW5nZSA9ICgpID0+IHRoaXMubW9kZWw/LmNoYW5nZVJlYXNvbihkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpLCBlbnRyeUNvbnRhaW5lcj8ucmVhc29uLnZhbHVlID8/IFwiXCIpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zaGVldC5sb2NrZWQpIGVudHJ5Q29udGFpbmVyLnJlYXNvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnJlYXNvbi5jbGFzc05hbWUgPSBcInRsLWVudHJ5LXJlYXNvblwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIucmVhc29uKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVSZWFzb25zRHJvcGRvd24oZW50cnlDb250YWluZXIucmVhc29uKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkYXRlQ29udGFpbmVyLmVudHJpZXMubGVuZ3RoID09PSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN1bUhvdXJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN1bUhvdXJzLmNsYXNzTmFtZSA9IFwidGwtc3VtLWhvdXJzXCI7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kKGRhdGVDb250YWluZXIuc3VtSG91cnMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5sZW5ndGgudHlwZSA9IFwibnVtYmVyXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmxlbmd0aC5jbGFzc05hbWUgPSBcInRsLWVudHJ5LWxlbmd0aFwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5sZW5ndGguc3RlcCA9IFwiMC4wMVwiO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zaGVldC5sb2NrZWQpIGVudHJ5Q29udGFpbmVyLmxlbmd0aC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmxlbmd0aC5vbmNoYW5nZSA9ICgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWw/LmNoYW5nZUxlbmd0aEhvdXJzKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIHBhcnNlRmxvYXQoZW50cnlDb250YWluZXI/Lmxlbmd0aC52YWx1ZSB8fCBcIjBcIikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZHVyYXRpb25MYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgICAgICBkdXJhdGlvbkxhYmVsLmNsYXNzTmFtZSA9IFwidGwtZHVyYXRpb24tbGFiZWxcIjtcclxuICAgICAgICAgICAgZHVyYXRpb25MYWJlbC5pbm5lclRleHQgPSBcImhvdXIocylcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGR1cmF0aW9uTGFiZWwpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFkYXRhLnNoZWV0LmxvY2tlZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLWFkZC1jb21tZW50LWJ0biB0bC1zaG93LW9uLWhvdmVyXCI7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm1vZGVsPy50b2dnbGVDb21tZW50KGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSkpO1xyXG4gICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLmNvbW1lbnRCdXR0b24pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgICAgICByZW1vdmUuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImRlbGV0ZVwiKSk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmUuY2xhc3NOYW1lID0gXCJ0bC1yZW1vdmUtZW50cnktYnRuIHRsLXNob3ctb24taG92ZXJcIjtcclxuICAgICAgICAgICAgICAgIHJlbW92ZS5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8uZGVsZXRlRW50cnkoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSk7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQocmVtb3ZlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC50eXBlID0gXCJ0ZXh0XCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQucGxhY2Vob2xkZXIgPSBcIldyaXRlIGEgbm90ZS4uLlwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50LnRpdGxlID0gXCJXcml0ZSBhIG5vdGUuLi5cIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC5jbGFzc05hbWUgPSBcInRsLWVudHJ5LWNvbW1lbnRcIjtcclxuICAgICAgICAgICAgaWYgKGRhdGEuc2hlZXQubG9ja2VkKSBlbnRyeUNvbnRhaW5lci5jb21tZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC5vbmNoYW5nZSA9ICgpID0+IFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsPy5jaGFuZ2VDb21tZW50KGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIGVudHJ5Q29udGFpbmVyPy5jb21tZW50LnZhbHVlID8/IFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5jb21tZW50KTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlbnRyeUNvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYWRkVG9XZWVrU3VtKGRhdGU6IFRpbWVsb2dVSURhdGVDb250YWluZXIpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMud2Vla1N1bXMubGVuZ3RoIDwgMSB8fCBuZXcgRGF0ZShkYXRlLmRhdGUuZGF0ZSkuZ2V0RGF5KCkgPT09IDApIC8vSWYgdGhpcyBpcyB0aGUgZmlyc3QgZGF5LCBvciBhIHN1bmRheSwgY3JlYXRlIGEgbmV3IHdlZWsgZm9yIGl0LlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgd2Vla1N1bSA9IHtcclxuICAgICAgICAgICAgICAgIGRhdGVzOiBbZGF0ZV0sXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHdlZWtTdW0uZWxlbWVudC5jbGFzc05hbWUgPSBcInRsLXdlZWstc3VtXCI7XHJcbiAgICAgICAgICAgIHRoaXMud2Vla1N1bXMucHVzaCh3ZWVrU3VtKTtcclxuICAgICAgICAgICAgZGF0ZS5wYXJlbnQuYXBwZW5kQ2hpbGQod2Vla1N1bS5lbGVtZW50KTtcclxuICAgICAgICAgICAgZGF0ZS5wYXJlbnQuc3R5bGUubWFyZ2luVG9wID0gXCIzOHB4XCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMud2Vla1N1bXNbdGhpcy53ZWVrU3Vtcy5sZW5ndGggLSAxXS5kYXRlcy5wdXNoKGRhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgb25EYXRlVXBkYXRlZChkYXRhOiB7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGRhdGU6IFRpbWVsb2dEYXRlIH0pXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTaGVldCA9PT0gZGF0YS5zaGVldCAmJiB0aGlzLnNoZWV0Q29udGFpbmVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IGRhdGVDb250YWluZXIgPSB0aGlzLmdldERhdGVDb250YWluZXIoZGF0YSk7XHJcbiAgICAgICAgICAgIGlmIChkYXRlQ29udGFpbmVyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGRhdGEuZGF0ZS5lbnRyaWVzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBlbnRyeUNvbnRhaW5lciA9IHRoaXMuZ2V0RW50cnlDb250YWluZXIoZGF0YSwgZGF0ZUNvbnRhaW5lciwgZW50cnkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5zdGFydEhvdXIudmFsdWUgPSBEYXRlcy5mb3JtYXRIb3VyKGVudHJ5LnN0YXJ0SG91cik7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIubGVuZ3RoLnZhbHVlID0gZW50cnkubGVuZ3RoSG91cnMudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5lbmRIb3VyLnZhbHVlID0gRGF0ZXMuZm9ybWF0SG91cihlbnRyeS5zdGFydEhvdXIgKyBlbnRyeS5sZW5ndGhIb3Vycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIucmVhc29uLnZhbHVlID0gZW50cnkucmVhc29uSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC52YWx1ZSA9IGVudHJ5LmNvbW1lbnQgPz8gXCJcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbi50aXRsZSA9IGVudHJ5Lmhhc0NvbW1lbnQgPyBcIlJlbW92ZSBub3RlXCIgOiBcIkFkZCBub3RlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbi5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnRCdXR0b24uYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChlbnRyeS5oYXNDb21tZW50ID8gXCJzcGVha2VyX25vdGVzX29mZlwiIDogXCJzcGVha2VyX25vdGVzXCIpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5Lmhhc0NvbW1lbnQpIGVudHJ5Q29udGFpbmVyLnBhcmVudC5jbGFzc0xpc3QuYWRkKFwidGwtaGFzLWNvbW1lbnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBlbnRyeUNvbnRhaW5lci5wYXJlbnQuY2xhc3NMaXN0LnJlbW92ZShcInRsLWhhcy1jb21tZW50XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlZEVudHJpZXMgPSBkYXRlQ29udGFpbmVyLmVudHJpZXMuZmlsdGVyKGVudHJ5ID0+ICFkYXRhLmRhdGUuZW50cmllcy5maW5kKGUgPT4gZSA9PT0gZW50cnkuZW50cnkpKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuZW50cmllcyA9IGRhdGVDb250YWluZXIuZW50cmllcy5maWx0ZXIoZW50cnkgPT4gIXJlbW92ZWRFbnRyaWVzLmluY2x1ZGVzKGVudHJ5KSk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVkRW50cmllcy5mb3JFYWNoKGUgPT4gZS5wYXJlbnQucmVtb3ZlKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkYXRlQ29udGFpbmVyLnN1bUhvdXJzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1bSA9IE51bWJlcnMuc3VtKGRhdGEuZGF0ZS5lbnRyaWVzLm1hcChlID0+IGUubGVuZ3RoSG91cnMpKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN1bUhvdXJzLmlubmVyVGV4dCA9IGAke051bWJlcnMucm91bmQoc3VtLCAyKX0gaG91ciR7c3VtID09PSAxID8gXCJcIiA6IFwic1wifWA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uZGlzYWJsZWQgPSBkYXRhLmRhdGUuZmF2b3JpdGVkO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1mYXZvcml0ZVwiKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwic3RhclwiLCBkYXRhLmRhdGUuZmF2b3JpdGVkKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRlLmZhdm9yaXRlZCkgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJ0bC1mYXZvcml0ZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZUNvbnRhaW5lci5lbnRyaWVzLmxlbmd0aCA+IDAgfHwgZGF0ZUNvbnRhaW5lci5kYXRlLmZhdm9yaXRlZClcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJ0bC1oaWRlLWZhdm9yaXRlLWJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1oaWRlLWZhdm9yaXRlLWJ1dHRvblwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3Qgd2Vla1N1bSA9IHRoaXMud2Vla1N1bXMuZmluZCh3ID0+IHcuZGF0ZXMuc29tZShkID0+IGQuZGF0ZSA9PT0gZGF0YS5kYXRlKSk7XHJcbiAgICAgICAgICAgIGlmICh3ZWVrU3VtKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdW0gPSBOdW1iZXJzLnN1bSh3ZWVrU3VtLmRhdGVzLm1hcChkID0+IE51bWJlcnMuc3VtKGQuZW50cmllcy5tYXAoZSA9PiBlLmVudHJ5Lmxlbmd0aEhvdXJzKSkpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRheXMgPSB3ZWVrU3VtLmRhdGVzLmZpbHRlcihkID0+ICFkLmRhdGUud2Vla2VuZCkubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdG90YWxIb3VycyA9IGRhdGEuc2hlZXQuaG91cnNQZXJEYXkgKiBkYXlzO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd2Vla051bWJlciA9IERhdGVzLmdldFdlZWtOdW1iZXJGcm9tRGF0ZSh3ZWVrU3VtLmRhdGVzWzBdLmRhdGUuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB3ZWVrU3VtLmVsZW1lbnQuaW5uZXJIVE1MID0gYDxiPldlZWsgJHt3ZWVrTnVtYmVyfTwvYj46ICR7TnVtYmVycy5yb3VuZChzdW0sIDIpfSAvICR7TnVtYmVycy5yb3VuZCh0b3RhbEhvdXJzLCAyKX0gaG91cnNgO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudXBkYXRlQmFsYW5jZSgpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSB1cGRhdGVSZWFzb25zRHJvcGRvd24oc2VsZWN0OiBIVE1MU2VsZWN0RWxlbWVudClcclxuICAgIHtcclxuICAgICAgICBzZWxlY3QuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICBmb3IgKGNvbnN0IHJlYXNvbiBvZiB0aGlzLnJlYXNvbnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSByZWFzb24uc2VydmVySWQ7XHJcbiAgICAgICAgICAgIG9wdGlvbi5pbm5lclRleHQgPSByZWFzb24udmFsdWU7XHJcbiAgICAgICAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgb25SZWFzb25zVXBkYXRlZChyZWFzb25zOiBIaUJvYlJlYXNvbltdKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucmVhc29ucyA9IHJlYXNvbnM7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZGF0ZSBvZiB0aGlzLnNoZWV0RGF0ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGRhdGUuZW50cmllcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSZWFzb25zRHJvcGRvd24oZW50cnkucmVhc29uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgb25TYXZlU3RhdHVzVXBkYXRlZChzdGF0dXM6IFRpbWVsb2dTYXZlU3RhdHVzKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5zYXZlU3RhdHVzKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1zdWNjZXNzXCIpO1xyXG4gICAgICAgIGlmIChzdGF0dXMgPT09IFRpbWVsb2dTYXZlU3RhdHVzLlNhdmVkKSB7IHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiY2xvdWRfZG9uZVwiLCB0cnVlKSk7IHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmQoXCIgU2F2ZWRcIik7IHRoaXMuc2F2ZVN0YXR1cy5jbGFzc0xpc3QuYWRkKFwidGwtc3VjY2Vzc1wiKTsgfVxyXG4gICAgICAgIGlmIChzdGF0dXMgPT09IFRpbWVsb2dTYXZlU3RhdHVzLldhaXRpbmcpIHsgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJwZW5kaW5nXCIpKTsgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZChcIiBQZW5kaW5nLi4uXCIpIH1cclxuICAgICAgICBpZiAoc3RhdHVzID09PSBUaW1lbG9nU2F2ZVN0YXR1cy5TYXZpbmcpIHsgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJjbG91ZF91cGxvYWRcIikpOyB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kKFwiIFNhdmluZy4uLlwiKSB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uU2hlZXRVcGRhdGVkKHNoZWV0OiBUaW1lbG9nU2hlZXQpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hlZXREcm9wZG93biAmJiAhdGhpcy5zaGVldERyb3Bkb3duT3B0aW9ucy5maW5kKHMgPT4gcy5zaGVldCA9PT0gc2hlZXQpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gc2hlZXQuaWQudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgb3B0aW9uLmlubmVyVGV4dCA9IGAke25ldyBEYXRlKHNoZWV0LnN0YXJ0KS50b0RhdGVTdHJpbmcoKX0gLSAke25ldyBEYXRlKHNoZWV0LmVuZCkudG9EYXRlU3RyaW5nKCl9JHtzaGVldC5sb2NrZWQgPyBcIiAobG9ja2VkKVwiIDogXCJcIn1gO1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd25PcHRpb25zLnB1c2goeyBzaGVldDogc2hlZXQsIGVsZW1lbnQ6IG9wdGlvbiB9KTtcclxuICAgICAgICAgICAgdGhpcy5zaGVldERyb3Bkb3duLmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2hlZXQgPT09IHNoZWV0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hlZXRDb250YWluZXIpIHRoaXMuc2hlZXRDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgdGhpcy5zaGVldERhdGVzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMud2Vla1N1bXMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIHNoZWV0LmRhdGVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudXBkYXRlQmFsYW5jZSgpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBvblNoZWV0c1VwZGF0ZWQoc2hlZXRzOiBUaW1lbG9nU2hlZXRbXSlcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5zaGVldERyb3Bkb3duKSB0aGlzLnNoZWV0RHJvcGRvd24uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd25PcHRpb25zID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBzaGVldCBvZiBzaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm9uU2hlZXRVcGRhdGVkKHNoZWV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vblNlbGVjdGVkU2hlZXRDaGFuZ2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uU2VsZWN0ZWRTaGVldENoYW5nZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNoZWV0RHJvcGRvd24pIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5zaGVldENvbnRhaW5lcikgdGhpcy5zaGVldENvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuc2hlZXREYXRlcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHZhbCA9IHRoaXMuc2hlZXREcm9wZG93bi52YWx1ZTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkU2hlZXQgPSB0aGlzLnNoZWV0RHJvcGRvd25PcHRpb25zLmZpbmQobyA9PiBvLmVsZW1lbnQudmFsdWUgPT09IHZhbCk/LnNoZWV0O1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2hlZXQgJiYgdGhpcy5tb2RlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwuZmV0Y2hTaGVldCh0aGlzLnNlbGVjdGVkU2hlZXQuaWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHVwZGF0ZUJhbGFuY2UoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5tb2RlbCB8fCAhdGhpcy5iYWxhbmNlTGFiZWwgfHwgIXRoaXMuc2VsZWN0ZWRTaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGJhbGFuY2UgPSBhd2FpdCB0aGlzLm1vZGVsLmdldEN1cnJlbnRCYWxhbmNlSG91cnModGhpcy5zZWxlY3RlZFNoZWV0KTtcclxuICAgICAgICBjb25zdCBtb250aEJhbGFuY2UgPSBOdW1iZXJzLnJvdW5kKGJhbGFuY2Uuc2hlZXRzW3RoaXMuc2VsZWN0ZWRTaGVldC5pZC50b1N0cmluZygpXSA/PyAwLCAyKTtcclxuICAgICAgICBjb25zdCB0b3RhbEJhbGFuY2UgPSBOdW1iZXJzLnJvdW5kKGJhbGFuY2UuYmFsYW5jZSwgMik7XHJcbiAgICAgICAgdGhpcy5iYWxhbmNlTGFiZWwuaW5uZXJUZXh0ID0gYEZsZXg6ICR7dG90YWxCYWxhbmNlfSBob3VyJHt0b3RhbEJhbGFuY2UgIT0gMSA/IFwic1wiIDogXCJcIn0gKGN1cnJlbnQgbW9udGg6ICR7bW9udGhCYWxhbmNlfSBob3VyJHttb250aEJhbGFuY2UgIT0gMSA/IFwic1wiIDogXCJcIn0pYDtcclxuXHJcbiAgICAgICAgY29uc3QgZmF2b3JpdGUgPSBhd2FpdCB0aGlzLm1vZGVsLmdldEZhdm9yaXRlZERhdGUoKTtcclxuICAgICAgICBpZiAoZmF2b3JpdGUpIHRoaXMuc2hlZXRDb250YWluZXI/LmNsYXNzTGlzdC5hZGQoXCJ0bC1oYXMtZmF2b3JpdGVcIik7XHJcbiAgICAgICAgZWxzZSB0aGlzLnNoZWV0Q29udGFpbmVyPy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtaGFzLWZhdm9yaXRlXCIpO1xyXG4gICAgfVxyXG5cclxufSIsImV4cG9ydCBjb25zdCBUaW1lbG9nQ3NzID0gYFxyXG4udGwtdG9nZ2xlLWJ0blxyXG57XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xyXG4gICAgZm9udC1zaXplOiAyZW07XHJcbn1cclxuLnRsLWNsb3NlLWJ0blxyXG57XHJcbiAgICBmb250LXNpemU6IDJlbTtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIHJpZ2h0OiA1cHg7XHJcbn1cclxuLnRsLXVpXHJcbntcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIHotaW5kZXg6IDEwMDA7XHJcbiAgICBpbnNldDogMHB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICBvdmVyZmxvdy15OiBzY3JvbGw7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG59ICAgICAgICBcclxuLnRsLWRhdGVcclxue1xyXG4gICAgbWFyZ2luLXRvcDogMTBweDtcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCBncmF5O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG59XHJcbi50bC1zYXZlLXN0YXR1cywgLnRsLWFkZC1lbnRyeS1idG5cclxue1xyXG4gICAgbWFyZ2luLWxlZnQ6IDEwcHg7XHJcbn1cclxuLnRsLWVudHJ5XHJcbntcclxuICAgIG1hcmdpbi10b3A6IDVweDtcclxufVxyXG4udGwtZW50cnkgPiAqXHJcbntcclxuICAgIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbn1cclxuLnRsLWVudHJ5ID4gaW5wdXRbdHlwZT1udW1iZXJdXHJcbntcclxuICAgIHdpZHRoOiA1MHB4O1xyXG59XHJcbi50bC1lbnRyeSA+IGlucHV0W3R5cGU9dGltZV1cclxue1xyXG4gICAgd2lkdGg6IDc1cHg7XHJcbn1cclxuLnRsLXNhdmUtc3RhdHVzXHJcbntcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcbi50bC1zaGVldC1zZWxlY3Rcclxue1xyXG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcclxufVxyXG4udGwtZGF0ZS1sYWJlbFxyXG57XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG4udGwtZGF0ZS1sYWJlbC50bC1kYXRlLWxhYmVsLXdlZWtlbmRcclxue1xyXG4gICAgZm9udC13ZWlnaHQ6IGluaXRpYWw7XHJcbiAgICBmb250LXN0eWxlOiBpdGFsaWM7XHJcbiAgICBjb2xvcjogZ3JheTtcclxufVxyXG4udGwtZW50cnktcmVhc29uIFxyXG57XHJcbiAgICBwYWRkaW5nOiAzcHg7XHJcbn1cclxuLnRsLXJlbW92ZS1lbnRyeS1idG5cclxue1xyXG4gICAgZmxvYXQ6IHJpZ2h0O1xyXG59XHJcbi50bC13ZWVrLXNlcGVyYXRvclxyXG57XHJcbiAgICBtYXJnaW4tdG9wOiA1N3B4O1xyXG59XHJcbi50bC1iYWxhbmNlLWxhYmVsXHJcbntcclxuICAgIG1hcmdpbjogNXB4O1xyXG59XHJcbi50bC11aS1pbm5lclxyXG57XHJcbiAgICBkaXNwbGF5OiB0YWJsZTtcclxuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xyXG4gICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xyXG59XHJcbi50bC11aS1pbm5lciwgLnRsLXdlZWstc2VwZXJhdG9yLCAudGwtZGF0ZVxyXG57XHJcbiAgICBtaW4td2lkdGg6IDY1MHB4O1xyXG59XHJcbi50bC1lbnRyeS1jb21tZW50IHtcclxuICAgIG1hcmdpbi10b3A6IDVweDtcclxuICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuLnRsLWhhcy1jb21tZW50IC50bC1lbnRyeS1jb21tZW50XHJcbntcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG59XHJcbi50bC1zdWNjZXNzXHJcbntcclxuICAgIGNvbG9yOiAjMDJCODc1O1xyXG59XHJcbi50bC13YXJuaW5nXHJcbntcclxuICAgIGNvbG9yOiAjRjBBRjUyO1xyXG59XHJcbi50bC1kYW5nZXJcclxue1xyXG4gICAgY29sb3I6ICNEQTU2NTI7XHJcbn1cclxuLnRsLXN1bS1ob3Vyc1xyXG57XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBtYXJnaW4tdG9wOiAtMjNweDtcclxufVxyXG4udGwtd2Vlay1zdW1cclxue1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgbWFyZ2luLXRvcDogLTU3cHg7XHJcbiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcclxufVxyXG4udGwtc3Rhci1idXR0b25cclxue1xyXG4gICAgYmFja2dyb3VuZDogbm9uZTtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIG1hcmdpbjogMDtcclxuICAgIHBhZGRpbmc6IDA7XHJcbn1cclxuLnRsLXN0YXItYnV0dG9uLnRsLWZhdm9yaXRlXHJcbntcclxuICAgIGNvbG9yOiAjZjFhMDBiO1xyXG4gICAgb3BhY2l0eTogMTtcclxufVxyXG4udGwtcGFzdGUtYnRuIHtcclxuICAgIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcbi50bC1oYXMtZmF2b3JpdGUgLnRsLXBhc3RlLWJ0bjpub3QoLnRsLWhpZGUtZmF2b3JpdGUtYnV0dG9uKVxyXG57XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbn1cclxuLnRsLXNob3ctb24taG92ZXJcclxue1xyXG4gICAgb3BhY2l0eTogMDtcclxufVxyXG4udGwtZGF0ZTpob3ZlciAudGwtc2hvdy1vbi1ob3ZlclxyXG57XHJcbiAgICBvcGFjaXR5OiAxO1xyXG59XHJcbmA7IiwiZXhwb3J0IGNvbnN0IFJlYXNvbkVuaGFuY2VtZW50Q3NzID0gYFxyXG4ucmUtbGFiZWxcclxue1xyXG4gICAgZm9udC1zaXplOiAxLjVlbTtcclxuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbn1cclxuLnJlLXJlYXNvbi1zZWxlY3Rcclxue1xyXG4gICAgcGFkZGluZzogNXB4O1xyXG59XHJcbi5yZS1yZWFzb24tdWlcclxue1xyXG4gICAgei1pbmRleDogMjAwMDtcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIGluc2V0OiAwO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwwLjc1KTtcclxuICAgIHBhZGRpbmctdG9wOiA0NXZoO1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuLnJlLWJ0blxyXG57XHJcbiAgICBwYWRkaW5nOiAwIHZhcigtLWJ1dHRvbi1wYWRkaW5nLXgsIDE1cHgpO1xyXG4gICAgbWluLXdpZHRoOiA4MHB4O1xyXG4gICAgaGVpZ2h0OiB2YXIoLS1idXR0b24tc2l6ZSwgMzBweCk7XHJcbiAgICBmb250LXdlaWdodDogNjAwO1xyXG4gICAgZm9udC1zaXplOiB2YXIoLS1idXR0b24tZm9udC1zaXplLCAxMnB4KTtcclxuICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1ib2R5LWZvbnQtZmFtaWx5KTtcclxuICAgIGJvcmRlcjogMDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgIG1hcmdpbjogNXB4O1xyXG59XHJcbi5yZS1idG4ucmUtcHJpbWFyeVxyXG57XHJcbiAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1iZy10ZXh0LWNvbG9yLCB3aGl0ZSk7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5LTYwMCk7XHJcbn1cclxuLnJlLWJ0bi5yZS1zZWNvbmRhcnlcclxue1xyXG4gICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS1iZy10ZXh0LWNvbG9yLCAjNTM1MzUzKTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNlY29uZGFyeS02MDApO1xyXG59XHJcbi5yZS1ibHVyXHJcbntcclxuICAgIGZpbHRlcjogYmx1cigycHgpO1xyXG59XHJcbi5yZS1zdWJtaXR0aW5nIC5yZS1idG5cclxue1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG4ucmUtc3VibWl0dGluZy10ZXh0XHJcbntcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgICBmb250LXNpemU6IDEuNWVtO1xyXG59XHJcbi5yZS1zdWJtaXR0aW5nIC5yZS1zdWJtaXR0aW5nLXRleHRcclxue1xyXG4gICAgZGlzcGxheTogYmxvY2s7XHJcbn1cclxuYDsiXSwibmFtZXMiOlsiQXBpIiwic3RhdGljIiwibWV0aG9kIiwidXJsIiwiYm9keSIsIlByb21pc2UiLCJyZXNvbHZlIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJyZXN1bHQiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJzdGF0dXMiLCJhbGVydCIsImNvbnNvbGUiLCJsb2ciLCJzZW5kIiwic3RyaW5naWZ5IiwiRGF0ZXMiLCJzdHIiLCJzcGxpdCIsImxlbmd0aCIsInB1c2giLCJEYXRlIiwiam9pbiIsImdldFRpbWUiLCJ0aW1lIiwiaW5jbHVkZVRpbWVzdGFtcCIsImRhdGUiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwidG9TdHJpbmciLCJwYWRTdGFydCIsImdldERhdGUiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJob3VycyIsImhvdXIiLCJNYXRoIiwiZmxvb3IiLCJtaW51dGUiLCJyb3VuZCIsInNldEhvdXJzIiwic2V0RGF0ZSIsImdldERheSIsIndlZWsxIiwicGFyc2VJbnQiLCJIaUJvYiIsImVudHJpZXMiLCJzb21lIiwiZSIsInJlYXNvbklkIiwiZGF0YSIsIm1hcCIsInN0YXJ0IiwiZm9ybWF0Iiwic3RhcnRIb3VyIiwiZW5kIiwibGVuZ3RoSG91cnMiLCJ1bmRlZmluZWQiLCJyZWFzb24iLCJjb21tZW50IiwiZGF0ZVN0ciIsInVzZXJJZCIsInRoaXMiLCJnZXRVc2VySWQiLCJtZXRhZGF0YSIsInRpbWVMb2dFbnRyeVJlYXNvbiIsInZhbHVlcyIsInYiLCJpZCIsInNlcnZlcklkIiwibmFtZSIsInZhbHVlIiwic2hlZXQiLCJ1c2VySW5mbyIsIldhaXQiLCJtcyIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJkZWxlZ2F0ZSIsImhhbmRsZSIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsIlJlYXNvbkVuaGFuY2VtZW50TW9kZSIsIlRpbWVsb2dTYXZlU3RhdHVzIiwiTWF0ZXJpYWxJY29uIiwibGluayIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJyZWwiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJpY29uIiwiZmlsbCIsInNwYW4iLCJjbGFzc05hbWUiLCJpbm5lclRleHQiLCJzdHlsZSIsInZlcnRpY2FsQWxpZ24iLCJmb250U2l6ZSIsImZvbnRWYXJpYXRpb25TZXR0aW5ncyIsIk51bWJlcnMiLCJudW0iLCJkZWNpbWFscyIsImNlaWwiLCJhcnIiLCJ2YWwiLCJpIiwiRXZlbnRIYW5kbGVyIiwiaGFuZGxlcnMiLCJvbiIsImhhbmRsZXIiLCJjb250ZXh0Iiwib2ZmIiwiZmlsdGVyIiwiaCIsImZpcmUiLCJmb3JFYWNoIiwiY2FsbCIsIlRpbWVsb2dNb2RlbCIsInNoZWV0cyIsIm9uRGF0ZVVwZGF0ZWQiLCJvblJlYXNvbnNVcGRhdGVkIiwib25TaGVldFVwZGF0ZWQiLCJvblNoZWV0c1VwZGF0ZWQiLCJvblNhdmVTdGF0dXNVcGRhdGVkIiwic2F2ZUhhbmRsZSIsInNhdmluZyIsImNhbGN1bGF0aW5nRmxleCIsInJlYXNvbnMiLCJpbml0aWFsaXplIiwiZmV0Y2hTaGVldHMiLCJmZXRjaFJlYXNvbnMiLCJTYXZlZCIsImFzeW5jIiwiZW1wbG95ZWVTaGVldHMiLCJjeWNsZVN0YXJ0RGF0ZSIsImN5Y2xlRW5kRGF0ZSIsIm5ld1NoZWV0IiwiZGF0ZXMiLCJsb2NrZWQiLCJob3Vyc1BlckRheSIsInNvcnQiLCJhIiwiYiIsImZpbmQiLCJzIiwiYXR0ZW5kYW5jZSIsInN1bW1hcnkiLCJwb3RlbnRpYWxXb3JraW5nSG91cnMiLCJwb3RlbnRpYWxXb3JraW5nRGF5cyIsImRpcnR5Iiwibm93Iiwid2Vla2VuZCIsImZhdm9yaXRlZCIsImhhc0NvbW1lbnQiLCJmYXZvcml0ZSIsImdldEZhdm9yaXRlZERhdGUiLCJjaGFuZ2VTdGFydEhvdXIiLCJpbmRleCIsImQiLCJxdWV1ZVNhdmUiLCJjaGFuZ2VMZW5ndGhIb3VycyIsImNoYW5nZVJlYXNvbiIsImNoYW5nZUNvbW1lbnQiLCJ0b2dnbGVDb21tZW50Iiwib2xkRmF2b3JpdGUiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiZ2V0SXRlbSIsImZldGNoU2hlZXQiLCJkZWxldGVFbnRyeSIsInNwbGljZSIsIm9yaWdpbmFsRGF0ZSIsIm9yaWdpbmFsU2hlZXQiLCJkYXRlSW5kZXgiLCJpbmRleE9mIiwiZW50cnlJbmRleCIsInNoZWV0SW5kZXgiLCJsYXN0IiwiZmluZExhc3RFbnRyeSIsImluY2x1ZGVzIiwiZW50cnkiLCJjbGVhclRpbWVvdXQiLCJzYXZlIiwiV2FpdGluZyIsInVudGlsIiwiU2F2aW5nIiwic3VibWl0IiwiYmFsYW5jZSIsImNhY2hlS2V5Iiwic2hlZXRCYWxhbmNlIiwicGFyc2VGbG9hdCIsInBvdGVudGlhbEhvdXJzIiwid29ya2VkSG91cnMiLCJzdW0iLCJzaGVldERyb3Bkb3duT3B0aW9ucyIsInNoZWV0RGF0ZXMiLCJ3ZWVrU3VtcyIsInRpbWVsb2ciLCJhZGRCdXR0b24iLCJwYXJlbnQiLCJxdWVyeVNlbGVjdG9yIiwidG9nZ2xlQnV0dG9uIiwiZ2V0IiwidGl0bGUiLCJvbmNsaWNrIiwidG9nZ2xlVmlzaWJsZSIsImNyZWF0ZVVJIiwiY3JlYXRlTW9kZWwiLCJ0aW1lbG9nVUlPdXRlciIsImRpc3BsYXkiLCJvdmVyZmxvdyIsInNoZWV0Q29udGFpbmVyIiwiaW5uZXJIVE1MIiwibW9kZWwiLCJhcHBlbmQiLCJ0aW1lbG9nVUlJbm5lciIsImNsb3NlQnV0dG9uIiwic2hlZXREcm9wZG93bkxhYmVsIiwic2hlZXREcm9wZG93biIsIm9uY2hhbmdlIiwib25TZWxlY3RlZFNoZWV0Q2hhbmdlIiwic2F2ZVN0YXR1cyIsImJhbGFuY2VMYWJlbCIsImdldERhdGVDb250YWluZXIiLCJzZWxlY3RlZFNoZWV0IiwiZGF0ZUNvbnRhaW5lciIsInN0YXJCdXR0b24iLCJwYXN0ZUJ1dHRvbiIsIndlZWtTZXBlcmF0b3IiLCJzZXRGYXZvcml0ZWREYXRlIiwidG9EYXRlU3RyaW5nIiwiY2xhc3NMaXN0IiwiYWRkIiwibmV3RW50cnkiLCJwYXN0ZUZyb21TdGFycmVkIiwiYWRkVG9XZWVrU3VtIiwiZ2V0RW50cnlDb250YWluZXIiLCJlbnRyeUNvbnRhaW5lciIsInAiLCJlbmRIb3VyIiwiY29tbWVudEJ1dHRvbiIsInR5cGUiLCJkaXNhYmxlZCIsInBhcnNlVGltZVRvaG91cnMiLCJlbmRMYWJlbCIsInVwZGF0ZVJlYXNvbnNEcm9wZG93biIsInN1bUhvdXJzIiwic3RlcCIsImR1cmF0aW9uTGFiZWwiLCJyZW1vdmUiLCJwbGFjZWhvbGRlciIsIndlZWtTdW0iLCJlbGVtZW50IiwibWFyZ2luVG9wIiwiZm9ybWF0SG91ciIsInJlbW92ZWRFbnRyaWVzIiwidyIsImRheXMiLCJ0b3RhbEhvdXJzIiwid2Vla051bWJlciIsImdldFdlZWtOdW1iZXJGcm9tRGF0ZSIsInVwZGF0ZUJhbGFuY2UiLCJzZWxlY3QiLCJvcHRpb24iLCJvIiwiZ2V0Q3VycmVudEJhbGFuY2VIb3VycyIsIm1vbnRoQmFsYW5jZSIsInRvdGFsQmFsYW5jZSIsInN1Ym1pdHRpbmciLCJjbG9ja0luQnV0dG9uRmluZGVyIiwicmVhc29uRW5oYW5jZW1lbnRVSSIsImxhYmVsIiwicmVhc29uU2VsZWN0Iiwic2F2ZURlZmF1bHRSZWFzb25WYWx1ZSIsImNhbmNlbEJ1dHRvbiIsImNhbmNlbCIsInN1Ym1pdEJ1dHRvbiIsInN1Ym1pdHRpbmdUZXh0IiwiZmluZFVuZW5oYW5jZWRCdXR0b25zIiwiZW5oYW5jZUNsb2NrSW5CdXR0b24iLCJGaXhMYXRlc3QiLCJGaXhBbGwiLCJhcHBSb290Iiwic2VsZWN0b3IiLCJxdWVyeSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb250YWlucyIsImJ1dHRvbiIsIm1vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwic2hvd1JlYXNvbkZpeGVyIiwibG9hZERlZmF1bHRSZWFzb25WYWx1ZSIsInNldFVJVmlzaWJsZSIsImZpeEFsbCIsImZpeExhdGVzdCIsImxhdGVzdCJdLCJzb3VyY2VSb290IjoiIn0=