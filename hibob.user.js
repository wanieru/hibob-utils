// ==UserScript==
// @name        HiBob Time Utilities
// @version     1.1.4
// @author      Funday Factory
// @description Utilities to make it easier to log time in HiBob
// @match       https://app.hibob.com/*
// @namespace   http://tampermonkey.net/
// @icon        https://www.google.com/s2/favicons?sz=64&domain=hibob.com
// @grant       none
// ==/UserScript==

(()=>{"use strict";class e{static xhr(e,t,n){return new Promise((a=>{let s=new XMLHttpRequest;s.open(e,t),s.setRequestHeader("Accept","application/json"),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(4===s.readyState){let e;try{e=JSON.parse(s.responseText)}catch(t){e={result:s.responseText}}if(200!==s.status){if(e.hasOwnProperty("error")){const t=e.hasOwnProperty("key")?e.key:s.status.toString();alert(`HiBob Utils: Error ${t} - ${e.error}`)}else alert(`HiBob Utils: Error ${s.status} - check the developer console for more information.`);console.log(`HiBob Utils: Error ${s.status}.`),console.log(s)}a({status:s.status,body:e})}},s.send(JSON.stringify(n))}))}}class t{static parse(e){if(!e)return null;const t=e.split("T");return t.length<2&&t.push("00:00"),new Date(t.join("T")).getTime()}static format(e,t){if(!e)return"";const n=new Date(e);return`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}-${n.getDate().toString().padStart(2,"0")}${t?`T${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`:""}`}static formatHour(e){const t=Math.floor(e%24),n=Math.round(60*(e-t));return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}static getWeekNumberFromDate(e){var t=new Date(e);t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)}static parseTimeTohours(e){const t=e.split(":");return parseInt(t[0])+parseInt(t[1])/60}}class n{static async submit(n,a){if(a.some((e=>!e.reasonId)))return console.log("WARNING: SOME ENTRIES HAVE NO REASON SET - NOT SUBMITTING!!",n,a),!1;const s=a.map((e=>{var a;return{start:t.format(n+3600*e.startHour*1e3,!0),end:e.lengthHours?t.format(n+3600*(e.startHour+e.lengthHours)*1e3,!0):void 0,reason:e.reasonId,comment:null!==(a=e.comment)&&void 0!==a?a:void 0}})),o=t.format(n,!1),i=await this.getUserId();return 200===(await e.xhr("POST",`https://app.hibob.com/api/attendance/employees/${i}/attendance/entries?forDate=${o}`,s)).status}static async timelogReasons(){return(await this.metadata()).timeLogEntryReason.values.map((e=>({id:e.serverId,name:e.value})))}static async attendance(t){return(await e.xhr("GET",`https://app.hibob.com/api/employees/attendance/my/sheets/${t}`,{})).body}static async sheets(){const t=await this.getUserId();return(await e.xhr("GET",`https://app.hibob.com/api/employees/${t}/timelog/attendance/sheets`,{})).body}static async metadata(){return(await e.xhr("GET","https://app.hibob.com/api/company/metadata/lists/?includeArchived=true",{})).body}static async getUserId(){var e;return"string"!=typeof this.userId&&await this.userInfo(),null!==(e=this.userId)&&void 0!==e?e:""}static async userInfo(){const t=await e.xhr("GET","https://app.hibob.com/api/user",{});return this.userId=t.body.id,t.body}}class a{static for(e){return new Promise((t=>{window.setTimeout((()=>t()),e)}))}static until(e){return new Promise((t=>{const n=window.setInterval((()=>{e()&&(t(),window.clearInterval(n))}),1)}))}}var s,o;!function(e){e[e.FixAll=0]="FixAll",e[e.FixLatest=1]="FixLatest"}(s||(s={}));class i{constructor(){this.handlers=[]}on(e,t){this.handlers.push({handler:e,context:t})}off(e,t){this.handlers=this.handlers.filter((n=>n.handler!==e||n.context!==t))}fire(e){this.handlers.forEach((t=>t.handler.call(t.context,e)))}}class r{static initialize(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200",e.rel="stylesheet",document.head.appendChild(e)}static get(e,t=!1){const n=document.createElement("span");return n.className="material-symbols-outlined",n.innerText=e,n.style.verticalAlign="middle",n.style.fontSize="1.5em",n.style.fontVariationSettings="'FILL' "+(t?1:0),n}}class l{static round(e,t){return Math.round(e*10**t)/10**t}static floor(e,t){return Math.floor(e*10**t)/10**t}static ceil(e,t){return Math.ceil(e*10**t)/10**t}static sum(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}}!function(e){e[e.Waiting=0]="Waiting",e[e.Saving=1]="Saving",e[e.Saved=2]="Saved",e[e.Error=3]="Error"}(o||(o={}));class d{constructor(){this.sheets=[],this.onDateUpdated=new i,this.onReasonsUpdated=new i,this.onSheetUpdated=new i,this.onSheetsUpdated=new i,this.onSaveStatusUpdated=new i,this.saveHandle=-1,this.saving=!1,this.calculatingFlex=!1,this.fetchingSheets=!1,this.reasons=[]}async initialize(){await this.fetchSheets(),await this.fetchReasons(),this.onSaveStatusUpdated.fire(o.Saved)}async fetchSheets(){var e,s;await a.until((()=>!this.fetchingSheets)),this.fetchingSheets=!0,this.sheets=[];const o=await n.sheets();for(const n of o.employeeSheets){const a=null!==(e=t.parse(n.cycleStartDate))&&void 0!==e?e:0,o=null!==(s=t.parse(n.cycleEndDate))&&void 0!==s?s:0,i={id:n.id,status:n.status,start:a,end:o,dates:[],locked:n.locked,hoursPerDay:0};this.sheets.push(i)}this.sheets.sort(((e,t)=>t.start-e.start)),this.onSheetsUpdated.fire(this.sheets),this.fetchingSheets=!1}async fetchReasons(){this.reasons=(await n.metadata()).timeLogEntryReason.values,this.onReasonsUpdated.fire(this.reasons)}async fetchSheet(e){var a;const s=this.sheets.find((t=>t.id===e));if(!s)return;const o=await n.attendance(e);s.hoursPerDay=o.summary.potentialWorkingHours/o.summary.potentialWorkingDays,s.dates=[];for(const e of o.attendance){const n={dirty:!1,date:null!==(a=t.parse(e.date))&&void 0!==a?a:Date.now(),weekend:"WeekendEvent"===e.status,favorited:!1,dateDescription:e.note.description,entries:e.entries.map((n=>{var a,s,o,i,r;return{startHour:l.floor(((null!==(a=t.parse(n.start))&&void 0!==a?a:Date.now())-(null!==(s=t.parse(e.date))&&void 0!==s?s:Date.now()))/36e5,2),lengthHours:l.ceil(((null!==(o=t.parse(n.end))&&void 0!==o?o:Date.now())-(null!==(i=t.parse(n.start))&&void 0!==i?i:Date.now()))/36e5,2),reasonId:n.reason,comment:null!==(r=n.comment)&&void 0!==r?r:null,hasComment:!!n.comment}})).sort(((e,t)=>e.startHour-t.startHour))};s.dates.push(n)}s.dates.sort(((e,t)=>t.date-e.date));const i=await this.getFavoritedDate();i&&i.sheet===s&&(i.date.favorited=!0),this.onSheetUpdated.fire(s)}changeStartHour(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].startHour=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}changeLengthHours(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].lengthHours=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}changeReason(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].reasonId=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}changeComment(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].comment=n,e.entries[t].hasComment=!0,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}toggleComment(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries[t].hasComment=!e.entries[t].hasComment,e.entries[t].comment=e.entries[t].hasComment?"":null,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}async setFavoritedDate(e){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!n)return;const a=await this.getFavoritedDate();a&&(a.date.favorited=!1,this.onDateUpdated.fire(a)),e.favorited=!0,this.onDateUpdated.fire({sheet:n,date:e}),window.localStorage.setItem("tl_favorite",JSON.stringify({date:t.format(e.date,!1)}))}async getFavoritedDate(){const e=window.localStorage.getItem("tl_favorite");if(!e)return null;const n=JSON.parse(e),a=t.parse(n.date);if("number"==typeof a){const e=this.sheets.find((e=>e.start<=a&&e.end>=a));if(e){e.dates.length<1&&await this.fetchSheet(e.id);const t=e.dates.find((e=>e.date===a));if(t)return{sheet:e,date:t}}}return null}deleteEntry(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries.splice(t,1),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}async findLastEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;let n=t.dates.indexOf(e),a=-1;for(let e=this.sheets.indexOf(t);e<this.sheets.length;e++){const t=this.sheets[e];for(t.dates.length<1&&await this.fetchSheet(t.id);n<t.dates.length;n++){const e=t.dates[n];if(e.entries.length>0)return a<0?e.entries[e.entries.length-1]:e.entries[a];a=0}n=0}}async newEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const n=await this.findLastEntry(e);let a=8.5,s=l.round(t.hoursPerDay,2),o="";n&&(e.entries.includes(n)&&(a=n.startHour+n.lengthHours,s=1),o=n.reasonId),e.entries.push({startHour:a,lengthHours:s,reasonId:o,comment:null,hasComment:!1}),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}async pasteFromStarred(e){if(e.entries.length>0)return;const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const n=await this.getFavoritedDate();if(n&&n.date!==e){for(const t of n.date.entries)e.entries.push({startHour:t.startHour,lengthHours:t.lengthHours,reasonId:t.reasonId,comment:t.comment,hasComment:t.hasComment});e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}}queueSave(){window.clearTimeout(this.saveHandle),this.saveHandle=window.setTimeout((()=>this.save()),500),this.onSaveStatusUpdated.fire(o.Waiting)}async save(){await a.until((()=>!this.saving)),this.saving=!0,this.onSaveStatusUpdated.fire(o.Saving);const e=a.for(100);let t=!1;for(const e of this.sheets)for(const a of e.dates)a.dirty&&(await n.submit(a.date,a.entries)?a.dirty=!1:t=!0);await e,this.onSaveStatusUpdated.fire(t?o.Error:o.Saved),this.saving=!1}setAdjustedDateBalances(e){e=[...e].sort(((e,t)=>e.appliedOn-t.appliedOn)),localStorage.setItem("tl_adjusted_date_balances",JSON.stringify(e))}getAdjustedDateBalances(){var e;return JSON.parse(null!==(e=localStorage.getItem("tl_adjusted_date_balances"))&&void 0!==e?e:"[]")}async fixOverdueFlexBalance(){var e;const n=await this.getFlexStatus(),a=this.getAdjustedDateBalances();for(const s of n.overdueDates)a.push({date:s.date,adjustment:-l.round(s.reallocatedBalance,3),appliedOn:null!==(e=t.parse(t.format(Date.now(),!1)))&&void 0!==e?e:0});this.setAdjustedDateBalances(a)}getFlexPolicy(){return{previousDaysIncluded:28,flexWarningThreshold:21}}async clearSheetBalanceCache(){if(this.sheets)for(let e=0;e<this.sheets.length;e++){const t=this.sheets[e];if(!t)continue;const n=`tl_cached_hour_balances_${t.id}`;t.locked&&null!==window.localStorage.getItem(n)&&window.localStorage.removeItem(n)}}async getCachedBalances(){var e;const n={};for(let a=this.sheets.length-1;a>=0;a--){const s=this.sheets[a];if(!s)continue;let o=[];const i=`tl_cached_hour_balances_${s.id}`;if(s.locked&&null!==window.localStorage.getItem(i))o=JSON.parse(null!==(e=window.localStorage.getItem(i))&&void 0!==e?e:"[]");else{if(s.dates.length<1&&await this.fetchSheet(s.id),s.dates.some((e=>e.entries.length>0&&e.entries.some((e=>e.lengthHours>0)))))for(const e of s.dates){const t=e.weekend?0:s.hoursPerDay,n=l.sum(e.entries.map((e=>e.lengthHours)))-t;o.push({date:e.date,balance:n})}s.locked&&s.id>0&&window.localStorage.setItem(i,JSON.stringify(o))}n[s.id.toString()]=o.map((e=>({date:e.date,dateString:t.format(e.date,!1),realBalance:e.balance,reallocatedBalance:l.round(e.balance,3)}))).sort(((e,t)=>e.date-t.date))}return n}async getFlexStatus(){var e,n,s;const o=this.getFlexPolicy(),i=null!==(e=t.parse(t.format(Date.now(),!1)))&&void 0!==e?e:0,r=null!==(n=t.parse(t.format(i-864e5*(o.previousDaysIncluded-1),!1)))&&void 0!==n?n:0,d=null!==(s=t.parse(t.format(i-864e5*(o.flexWarningThreshold-1),!1)))&&void 0!==s?s:0,c=[];let h=0;if(this.sheets){await a.until((()=>!this.calculatingFlex)),this.calculatingFlex=!0;const e=await this.getCachedBalances();for(let t=this.sheets.length-1;t>=0;t--){const n=e[this.sheets[t].id];n&&c.push(...n)}const t=[...this.getAdjustedDateBalances()];for(let e=0;e<c.length;e++){const n=c[e];for(let t=0;t<e&&0!==n.reallocatedBalance;t++){const e=c[t],a=Math.min(Math.abs(n.reallocatedBalance),Math.abs(e.reallocatedBalance));n.reallocatedBalance<0&&e.reallocatedBalance>0?(e.reallocatedBalance-=a,n.reallocatedBalance+=a):n.reallocatedBalance>0&&e.reallocatedBalance<0&&(e.reallocatedBalance+=a,n.reallocatedBalance-=a),e.reallocatedBalance=l.round(e.reallocatedBalance,3)}for(n.reallocatedBalance=l.round(n.reallocatedBalance,3);t.length>0&&t[0].appliedOn<n.date;)this.applyDateAdjustment(t[0],c),t.splice(0,1)}for(const e of t)this.applyDateAdjustment(e,c);console.log(c),h=l.sum(c.map((e=>l.round(e.reallocatedBalance,3)))),this.calculatingFlex=!1}return{balance:h,unbalancedDates:c.filter((e=>0!==e.reallocatedBalance)),overdueDates:c.filter((e=>0!==e.reallocatedBalance&&e.date<=r)),warningDates:c.filter((e=>0!==e.reallocatedBalance&&e.date<=d&&e.date>r))}}applyDateAdjustment(e,t){for(let n=0;n<t.length;n++){const a=t[n];if(a.date===e.date){a.reallocatedBalance+=e.adjustment,a.reallocatedBalance=l.round(a.reallocatedBalance,3);break}}}}r.initialize(),new class{constructor(){this.sheetDropdownOptions=[],this.sheetDates=[],this.weekSums=[],this.reasons=[],this.onDarkModeChange=new i,window.timelog=this,this.addButton()}async addButton(){for(;;){const e=document.querySelector("div.app-content > app-top-bar.app-top-bar > div.actions");if(e){this.toggleButton=document.createElement("button"),this.toggleButton.className="tl-toggle-btn",this.toggleButton.appendChild(r.get("sentiment_very_satisfied")),this.toggleButton.title="HiBob Utilities",this.toggleButton.onclick=()=>this.toggleVisible(),e.appendChild(this.toggleButton),this.createUI(),await this.createModel(),"#tl-ui"===location.hash&&this.toggleVisible(),this.onDarkModeChange.fire(this.isDarkMode());break}await a.for(1)}}toggleVisible(){var e;this.timelogUIOuter&&("none"===this.timelogUIOuter.style.display?(this.timelogUIOuter.style.display="block",location.hash="#tl-ui",document.body.style.overflow="hidden",this.sheetContainer&&(this.sheetContainer.innerHTML=""),null===(e=this.model)||void 0===e||e.fetchSheets()):(this.timelogUIOuter.style.display="none",location.hash="",document.body.style.overflow="initial"))}isDarkMode(){return"true"===localStorage.getItem("tl_dark_mode")}toggleDarkMode(){this.isDarkMode()?localStorage.setItem("tl_dark_mode","false"):localStorage.setItem("tl_dark_mode","true"),this.onDarkModeChange.fire(this.isDarkMode())}createUI(){const e=document.createElement("style");e.innerHTML="\n.tl-toggle-btn\n{\n    border: none;\n    background: none;\n    font-size: 2em;\n}\n.tl-close-btn\n{\n    font-size: 2em;\n    position: absolute;\n    right: 5px;\n}\n.tl-ui\n{\n    position: fixed;\n    z-index: 1000;\n    inset: 0px;\n    background-color: white;\n    overflow-y: scroll;\n    padding: 10px;\n}        \n.tl-date\n{\n    margin-top: 10px;\n    padding: 10px;\n    border: 1px solid gray;\n    border-radius: 5px;\n}\n.tl-save-status, .tl-add-entry-btn\n{\n    margin-left: 10px;\n}\n.tl-entry\n{\n    margin-top: 5px;\n}\n.tl-entry > *\n{\n    margin-left: 5px;\n}\n.tl-entry > input[type=number]\n{\n    width: 50px;\n}\n.tl-entry > input[type=time]\n{\n    width: 75px;\n}\n.tl-save-status\n{\n    font-weight: bold;\n}\n.tl-sheet-select\n{\n    margin-left: 5px;\n}\n.tl-date-label\n{\n    font-weight: bold;\n}\n.tl-date-label.tl-date-label-weekend\n{\n    font-weight: initial;\n    font-style: italic;\n    color: gray;\n}\n.tl-entry-reason \n{\n    padding: 3px;\n}\n.tl-remove-entry-btn\n{\n    float: right;\n}\n.tl-week-seperator\n{\n    margin-top: 57px;\n}\n.tl-balance-label\n{\n    margin: 5px;\n    display: inline-block;\n}\n.tl-balance-help\n{\n    display: inline-block;\n    cursor: help;\n}\n\n.tl-ui-inner\n{\n    display: table;\n    margin-left: auto;\n    margin-right: auto;\n}\n.tl-ui-inner, .tl-week-seperator, .tl-date\n{\n    min-width: 650px;\n}\n.tl-entry-comment {\n    margin-top: 5px;\n    margin-bottom: 15px;\n    width: 100%;\n    display: none;\n}\n.tl-has-comment .tl-entry-comment\n{\n    display: block;\n}\n.tl-success\n{\n    color: #02B875;\n}\n.tl-warning\n{\n    color: #F0AF52;\n}\n.tl-danger\n{\n    color: #DA5652;\n}\n.tl-sum-hours\n{\n    position: absolute;\n    margin-top: -23px;\n}\n.tl-week-sum\n{\n    position: absolute;\n    margin-top: -57px;\n    text-decoration: underline;\n}\n.tl-ui button.tl-star-button, .tl-ui.tl-dark button.tl-star-button\n{\n    background: none;\n    border: none;\n    margin: 0;\n    padding: 0;\n}\n.tl-ui button.tl-star-button.tl-favorite, .tl-ui.tl-dark button.tl-star-button.tl-favorite\n{\n    color: #f1a00b;\n    opacity: 1;\n}\n.tl-paste-btn {\n    margin-left: 5px;\n    display: none;\n}\n.tl-has-favorite .tl-paste-btn:not(.tl-hide-favorite-button)\n{\n    display: inline-block;\n}\n.tl-show-on-hover\n{\n    opacity: 0;\n}\n.tl-date:hover .tl-show-on-hover\n{\n    opacity: 1;\n}\n.tl-no-reason-warning {\n    margin-left: 180px;\n    position: absolute;\n    margin-top: -22px;\n    font-weight: bold;\n    background-color: white;\n    user-select: none;\n    pointer-events: none;\n}\n.tl-no-reason-warning.tl-has-reason\n{\n    display: none;\n}\n.tl-clickable\n{\n    cursor: pointer;\n}\n.tl-dark-mode-btn {\n    position: fixed;\n    bottom: 5px;\n    right: 20px;\n}\n.tl-ui button\n{\n    background-color: #d9d9d9;\n    border: 1px solid gray;\n    border-radius: 5px;\n}\n.tl-ui button:hover\n{\n    background-color: #efebeb;\n}\n\n.tl-ui.tl-dark\n{\n    background-color: #1E1E1E;\n    color: white;\n}\n.tl-ui.tl-dark select, .tl-ui.tl-dark input {\n    color: white;\n    background-color: #252526;\n    border: 1px gray solid;\n    color-scheme: dark;\n}\n.tl-ui.tl-dark button\n{\n    background-color: #333333;\n    border: 1px solid #282828;\n    color: white;\n}\n.tl-ui.tl-dark button:hover\n{\n    background-color: #525252;\n}\n.tl-ui.tl-dark .tl-no-reason-warning\n{\n    background-color: #252526;\n}\n.tl-weekend-description {\n    color: gray;\n    font-style: italic;\n    float: right;\n    margin-top: 2px;\n    display: inline-block;\n    max-width: 400px;\n    overflow: hidden;\n    max-height: 35px;\n}\n.tl-weekend-description.tl-weekend-description-hidden\n{\n    display: none;\n}\n.tl-version-number {\n    position: fixed;\n    bottom: 5px;\n    left: 5px;\n}\n\n.tl-settings {\n    position: fixed;\n    inset: 0;\n    z-index: 100;\n}\n.tl-settings-back {\n    inset: 0;\n    position: absolute;\n    background-color: black;\n    opacity: 0.5;\n    cursor: pointer;\n}\n\n.tl-settings.tl-settings-hidden {\n    display: none;\n}\n\n.tl-settings-version {\n    margin: 5px 10px;\n    border-bottom: 1px solid gray;\n}\n\n.tl-settings-version:last-child {\n    border-bottom: 0;\n}\n\n.tl-settings-title {\n    font-weight: bold;\n    font-size: 1.25em;\n}\n.tl-settings-inner {\n    position: absolute;\n    background-color: white;\n    height: 70vh;\n    width: 90vw;\n    left: 5vw;\n    top: 15vh;\n    border: 1px solid gray;\n    border-radius: 10px;\n    padding: 10px;\n    overflow: auto;\n}\n.tl-settings-version button\n{\n    margin-left: 5px;\n    margin-bottom: 15px;\n}\n\n.tl-dark .tl-settings-inner\n{\n    background-color: #1a1a1a;\n}\n\n.tl-balance-warning\n{\n    font-size: 0.8em;\n    display: inline-block;\n    text-decoration: underline;\n    cursor: help;\n}\n.tl-hidden\n{\n    display: none;\n}\n\n",document.body.appendChild(e),this.timelogUIOuter=document.createElement("div"),this.timelogUIOuter.className="tl-ui",this.timelogUIOuter.style.display="none",document.body.append(this.timelogUIOuter),this.timelogUIInner=document.createElement("div"),this.timelogUIInner.className="tl-ui-inner",this.timelogUIOuter.append(this.timelogUIInner);const t=document.createElement("button");t.className="tl-close-btn",t.appendChild(r.get("close")),t.onclick=()=>this.toggleVisible(),this.timelogUIInner.appendChild(t),this.darkModeButton=document.createElement("button"),this.darkModeButton.className="tl-dark-mode-btn",this.darkModeButton.onclick=()=>this.toggleDarkMode(),this.timelogUIInner.appendChild(this.darkModeButton),this.onDarkModeChange.on((e=>{var t,n;e?null===(t=this.timelogUIOuter)||void 0===t||t.classList.add("tl-dark"):null===(n=this.timelogUIOuter)||void 0===n||n.classList.remove("tl-dark"),this.darkModeButton&&(this.darkModeButton.innerHTML="",this.darkModeButton.append(e?r.get("light_mode"):r.get("dark_mode")))}),this);const n=this.createSettingsWindow();this.timelogUIInner.appendChild(n);const a=document.createElement("div");a.append(r.get("settings",!0)),a.append(" 1.1.4"),a.className="tl-version-number",a.onclick=()=>n.classList.remove("tl-settings-hidden"),a.style.cursor="pointer",a.style.textDecoration="underline",this.timelogUIInner.appendChild(a);const s=document.createElement("span");s.innerText="Sheet:",this.timelogUIInner.appendChild(s),this.sheetDropdown=document.createElement("select"),this.sheetDropdown.className="tl-sheet-select",this.sheetDropdown.onchange=()=>this.onSelectedSheetChange(),this.timelogUIInner.appendChild(this.sheetDropdown),this.saveStatus=document.createElement("span"),this.saveStatus.className="tl-save-status",this.saveStatus.onclick=()=>this.onSaveStatusClick(),this.timelogUIInner.append(this.saveStatus);const o=document.createElement("div");o.className="tl-balance",this.timelogUIInner.append(o),this.balanceLabel=document.createElement("div"),this.balanceLabel.innerText="Balance: ",this.balanceLabel.className="tl-balance-label",o.append(this.balanceLabel),this.balanceWarning=document.createElement("div"),this.balanceWarning.className="tl-balance-warning tl-warning tl-hidden",o.append(this.balanceWarning),this.fixBalanceButton=document.createElement("button"),this.fixBalanceButton.append(r.get("build",!0)),this.fixBalanceButton.className="tl-fix-balance-button tl-hidden",this.fixBalanceButton.append(" Fix"),this.fixBalanceButton.onclick=()=>this.fixBalance(),o.append(this.fixBalanceButton),this.sheetContainer=document.createElement("div"),this.sheetContainer.className="tl-sheet",this.timelogUIInner.appendChild(this.sheetContainer)}createSettingsWindow(){const e=document.createElement("div");e.className="tl-settings tl-settings-hidden";const t=document.createElement("div");t.className="tl-settings-back",e.append(t),t.onclick=()=>e.classList.add("tl-settings-hidden");const n=document.createElement("div");n.className="tl-settings-inner",e.append(n);const a=document.createElement("div");a.className="tl-settings-version",n.append(a);const s=document.createElement("button");s.className="tl-settings-reload-locked-sheets-button",s.append(r.get("cached")),s.append(" Reload Locked Sheets"),s.style.cursor="help",s.title="Recalculates flex balance for all locked sheets.",s.onclick=()=>{var e;return null===(e=this.model)||void 0===e?void 0:e.clearSheetBalanceCache().then((()=>this.updateBalance()))},a.appendChild(s);const o=document.createElement("button");o.className="tl-settings-reset-cancelled-flex-button",o.append(r.get("settings_backup_restore")),o.append(" Reset Cancelled Flex"),o.style.cursor="help",o.title="Resets any flex hour which you're previously cancelled for being overdue.",o.onclick=()=>{var e;null===(e=this.model)||void 0===e||e.setAdjustedDateBalances([]),this.updateBalance()},a.appendChild(o);const i=[{version:"1.1.4 - 03/10/2022",text:["Add a warning when unbalanced flex days are close to expiring.","Add button to cancel old unbalanced flex for extraordinary situations","Add buttons to delete cached data in the settings menu."]},{version:"1.1.3 - 03/10/2022",text:["Fixed how flex hours is calculated.","A warning is showed if you have unbalanced flex days that are older than 28 days."]},{version:"1.1.2 - 03/10/2022",text:["Fixed problem where you couldn't log time on some days, where you were supposed to."]},{version:"1.1.1 - 30/09/2022",text:["Added changelog","Show descriptions on non-working days"]}];for(const e of i){const t=document.createElement("div");t.className="tl-settings-version",n.append(t);const a=document.createElement("div");a.className="tl-settings-title",a.innerText=e.version,t.append(a);const s=document.createElement("ul");s.className="tl-settings-list",t.append(s);for(const t of e.text){const e=document.createElement("li");e.innerText=t,s.append(e)}}return e}async createModel(){this.model&&(this.model.onDateUpdated.off(this.onDateUpdated,this),this.model.onReasonsUpdated.off(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.off(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.off(this.onSheetUpdated,this),this.model.onSheetsUpdated.off(this.onSheetsUpdated,this)),this.model=new d,this.model.onDateUpdated.on(this.onDateUpdated,this),this.model.onReasonsUpdated.on(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.on(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.on(this.onSheetUpdated,this),this.model.onSheetsUpdated.on(this.onSheetsUpdated,this),await this.model.initialize()}getDateContainer(e){if(this.selectedSheet===e.sheet&&this.sheetContainer){let t=this.sheetDates.find((t=>t.date===e.date));if(!t){if(t={date:e.date,parent:document.createElement("div"),title:document.createElement("span"),entries:[],starButton:document.createElement("button"),pasteButton:document.createElement("button"),weekendDescription:document.createElement("div")},this.sheetDates.push(t),t.parent.className="tl-date",this.sheetContainer.appendChild(t.parent),1===new Date(e.date.date).getDay()){const e=document.createElement("div");e.className="tl-week-seperator",this.sheetContainer.appendChild(e)}if(t.parent.append(t.starButton),t.starButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.setFavoritedDate(e.date)},t.starButton.className="tl-star-button tl-show-on-hover",t.starButton.title="Favorite Day",t.title.className="tl-date-label",t.title.innerText=new Date(e.date.date).toDateString(),e.date.weekend&&t.title.classList.add("tl-date-label-weekend"),t.parent.append(t.title),t.weekendDescription.className="tl-weekend-description",t.parent.append(t.weekendDescription),!e.sheet.locked){const n=document.createElement("button");n.appendChild(r.get("add")),n.className="tl-add-entry-btn tl-show-on-hover",n.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.newEntry(e.date)},t.parent.append(n),t.pasteButton=document.createElement("button"),t.pasteButton.appendChild(r.get("switch_access_shortcut_add")),t.pasteButton.title="Paste from Favorite Day",t.pasteButton.className="tl-paste-btn tl-show-on-hover",t.pasteButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.pasteFromStarred(e.date)},t.parent.append(t.pasteButton)}this.addToWeekSum(t)}return t}return null}getEntryContainer(e,n,a){let s=n.entries.find((e=>e.entry===a));if(!s){s={entry:a,parent:document.createElement("div"),startHour:document.createElement("input"),endHour:document.createElement("input"),length:document.createElement("input"),reason:document.createElement("select"),comment:document.createElement("input"),commentButton:document.createElement("button"),noReasonWarning:document.createElement("div")},n.entries.push(s),s.parent.className="tl-entry",n.parent.appendChild(s.parent),s.startHour.type="time",s.startHour.className="tl-entry-start",e.sheet.locked&&(s.startHour.disabled=!0),s.startHour.onchange=()=>{var n,o,i;const r=a.startHour+a.lengthHours;null===(n=this.model)||void 0===n||n.changeStartHour(e.date,e.date.entries.indexOf(a),t.parseTimeTohours(null!==(o=null==s?void 0:s.startHour.value)&&void 0!==o?o:"08:00"));const d=l.round(r-a.startHour,2);null===(i=this.model)||void 0===i||i.changeLengthHours(e.date,e.date.entries.indexOf(a),d)},s.parent.appendChild(s.startHour);const o=document.createElement("span");o.className="tl-end-label",o.innerText="-",s.parent.appendChild(o),s.endHour.type="time",s.endHour.className="tl-entry-end",e.sheet.locked&&(s.endHour.disabled=!0),s.endHour.onchange=()=>{var n;if(null==s?void 0:s.endHour){const o=l.round(t.parseTimeTohours(s.endHour.value)-a.startHour,2);null===(n=this.model)||void 0===n||n.changeLengthHours(e.date,e.date.entries.indexOf(a),o)}},s.parent.appendChild(s.endHour),s.reason.onchange=()=>{var t,n;return null===(t=this.model)||void 0===t?void 0:t.changeReason(e.date,e.date.entries.indexOf(a),null!==(n=null==s?void 0:s.reason.value)&&void 0!==n?n:"")},e.sheet.locked&&(s.reason.disabled=!0),s.reason.className="tl-entry-reason",s.parent.appendChild(s.reason),this.updateReasonsDropdown(s.reason),1===n.entries.length&&(n.sumHours=document.createElement("span"),n.sumHours.className="tl-sum-hours",s.parent.append(n.sumHours)),s.length.type="number",s.length.className="tl-entry-length",s.length.step="0.01",e.sheet.locked&&(s.length.disabled=!0),s.length.onchange=()=>{var t;null===(t=this.model)||void 0===t||t.changeLengthHours(e.date,e.date.entries.indexOf(a),parseFloat((null==s?void 0:s.length.value)||"0"))},s.parent.appendChild(s.length);const i=document.createElement("span");if(i.className="tl-duration-label",i.innerText="hour(s)",s.parent.appendChild(i),!e.sheet.locked){s.commentButton.className="tl-add-comment-btn tl-show-on-hover",s.commentButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.toggleComment(e.date,e.date.entries.indexOf(a))},s.parent.appendChild(s.commentButton);const t=document.createElement("button");t.appendChild(r.get("delete")),t.className="tl-remove-entry-btn tl-show-on-hover",t.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.deleteEntry(e.date,e.date.entries.indexOf(a))},s.parent.appendChild(t)}s.noReasonWarning.append(r.get("warning",!0)),s.noReasonWarning.append(" No reason selected!"),s.noReasonWarning.className="tl-no-reason-warning tl-warning tl-has-reason",s.parent.appendChild(s.noReasonWarning),s.comment.type="text",s.comment.placeholder="Write a note...",s.comment.title="Write a note...",s.comment.className="tl-entry-comment",e.sheet.locked&&(s.comment.disabled=!0),s.comment.onchange=()=>{var t,n;null===(t=this.model)||void 0===t||t.changeComment(e.date,e.date.entries.indexOf(a),null!==(n=null==s?void 0:s.comment.value)&&void 0!==n?n:"")},s.parent.appendChild(s.comment)}return s}addToWeekSum(e){if(this.weekSums.length<1||0===new Date(e.date.date).getDay()){const t={dates:[e],element:document.createElement("div")};t.element.className="tl-week-sum",this.weekSums.push(t),e.parent.appendChild(t.element),e.parent.style.marginTop="38px"}else this.weekSums[this.weekSums.length-1].dates.push(e)}onDateUpdated(e){var n,a,s;if(this.selectedSheet===e.sheet&&this.sheetContainer){let o=this.getDateContainer(e);if(o){for(const a of e.date.entries){let s=this.getEntryContainer(e,o,a);s.startHour.value=t.formatHour(a.startHour),s.length.value=a.lengthHours.toString(),s.endHour.value=t.formatHour(a.startHour+a.lengthHours),s.reason.value=a.reasonId,s.comment.value=null!==(n=a.comment)&&void 0!==n?n:"",a.reasonId?s.noReasonWarning.classList.add("tl-has-reason"):s.noReasonWarning.classList.remove("tl-has-reason"),s.commentButton.title=a.hasComment?"Remove note":"Add note",s.commentButton.innerHTML="",s.commentButton.appendChild(r.get(a.hasComment?"speaker_notes_off":"speaker_notes")),a.hasComment?s.parent.classList.add("tl-has-comment"):s.parent.classList.remove("tl-has-comment")}const i=o.entries.filter((t=>!e.date.entries.find((e=>e===t.entry))));if(o.entries=o.entries.filter((e=>!i.includes(e))),i.forEach((e=>e.parent.remove())),o.sumHours){const t=l.sum(e.date.entries.map((e=>e.lengthHours)));o.sumHours.innerText=`${l.round(t,2)} hour${1===t?"":"s"}`}o.starButton.innerHTML="",o.starButton.disabled=e.date.favorited,o.starButton.classList.remove("tl-favorite"),o.starButton.appendChild(r.get("star",e.date.favorited)),e.date.favorited&&o.starButton.classList.add("tl-favorite"),o.entries.length>0||o.date.favorited?o.pasteButton.classList.add("tl-hide-favorite-button"):o.pasteButton.classList.remove("tl-hide-favorite-button"),o.title.title=null!==(a=e.date.dateDescription)&&void 0!==a?a:"",e.date.weekend&&e.date.entries.length<1?(o.weekendDescription.classList.remove("tl-weekend-description-hidden"),o.weekendDescription.innerText=null!==(s=e.date.dateDescription)&&void 0!==s?s:""):o.weekendDescription.classList.add("tl-weekend-description-hidden")}const i=this.weekSums.find((t=>t.dates.some((t=>t.date===e.date))));if(i){const n=l.sum(i.dates.map((e=>l.sum(e.entries.map((e=>e.entry.lengthHours)))))),a=i.dates.filter((e=>!e.date.weekend)).length,s=e.sheet.hoursPerDay*a,o=t.getWeekNumberFromDate(i.dates[0].date.date);i.element.innerHTML=`<b>Week ${o}</b>: ${l.round(n,2)} / ${l.round(s,2)} hours`}}this.updateBalance()}updateReasonsDropdown(e){e.innerHTML="";for(const t of this.reasons){const n=document.createElement("option");n.value=t.serverId,n.innerText=t.value,e.appendChild(n)}}onReasonsUpdated(e){this.reasons=e;for(const e of this.sheetDates)for(const t of e.entries)this.updateReasonsDropdown(t.reason)}onSaveStatusUpdated(e){this.saveStatus&&(this.saveStatus.innerHTML="",this.saveStatus.classList.remove("tl-success"),this.saveStatus.classList.remove("tl-warning"),this.saveStatus.classList.remove("tl-clickable"),e===o.Saved&&(this.saveStatus.appendChild(r.get("cloud_done",!0)),this.saveStatus.append(" Saved"),this.saveStatus.classList.add("tl-success")),e===o.Waiting&&(this.saveStatus.appendChild(r.get("pending")),this.saveStatus.append(" Pending...")),e===o.Saving&&(this.saveStatus.appendChild(r.get("cloud_upload")),this.saveStatus.append(" Saving...")),e===o.Error&&(this.saveStatus.appendChild(r.get("cloud_off")),this.saveStatus.append(" Failed!"),this.saveStatus.classList.add("tl-warning"),this.saveStatus.classList.add("tl-clickable")))}onSaveStatusClick(){var e,t;(null===(e=this.saveStatus)||void 0===e?void 0:e.classList.contains("tl-clickable"))&&(null===(t=this.model)||void 0===t||t.save())}onSheetUpdated(e){if(this.sheetDropdown&&!this.sheetDropdownOptions.find((t=>t.sheet===e))){const t=document.createElement("option");t.value=e.id.toString(),t.innerText=`${new Date(e.start).toDateString()} - ${new Date(e.end).toDateString()}${e.locked?" (locked)":""}`,this.sheetDropdownOptions.push({sheet:e,element:t}),this.sheetDropdown.appendChild(t)}this.selectedSheet===e&&(this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[],this.weekSums=[]);for(const t of e.dates)this.onDateUpdated({sheet:e,date:t});this.updateBalance()}onSheetsUpdated(e){this.sheetDropdown&&(this.sheetDropdown.innerHTML=""),this.sheetDropdownOptions=[];for(const t of e)this.onSheetUpdated(t);this.onSelectedSheetChange()}onSelectedSheetChange(){var e;if(!this.sheetDropdown)return;this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[];const t=this.sheetDropdown.value;this.selectedSheet=null===(e=this.sheetDropdownOptions.find((e=>e.element.value===t)))||void 0===e?void 0:e.sheet,this.selectedSheet&&this.model&&this.model.fetchSheet(this.selectedSheet.id)}async updateBalance(){var e,n,a,s,o;if(!this.model||!this.balanceLabel||!this.selectedSheet)return;const i=await this.model.getFlexStatus(),d=l.round(i.balance,2);if(this.balanceLabel.innerText=`Flex: ${d} hour${1!=d?"s":""}${0===d?" ðŸ¥³":""}`,null===(e=this.balanceWarning)||void 0===e||e.classList.add("tl-hidden"),null===(n=this.fixBalanceButton)||void 0===n||n.classList.add("tl-hidden"),i.overdueDates.length+i.warningDates.length>0&&this.balanceWarning){const e=this.model.getFlexPolicy();this.balanceWarning.classList.remove("tl-hidden"),this.balanceWarning.innerHTML="",this.balanceWarning.append(r.get("warning",!0)),i.overdueDates.length>0?(null===(a=this.fixBalanceButton)||void 0===a||a.classList.remove("tl-hidden"),this.balanceWarning.append(`You have ${i.overdueDates.length} unbalanced flex date${1===i.overdueDates.length?"":"s"} older than ${e.previousDaysIncluded} days!`),this.balanceWarning.title+=`Overdue dates: ${i.overdueDates.map((e=>t.format(e.date,!1))).join(", ")}`):i.warningDates.length>0&&this.balanceWarning.append(`${i.warningDates.length} unbalanced flex date${1===i.warningDates.length?"":"s"} will soon be older than ${e.previousDaysIncluded} days!`),this.balanceWarning.title="",i.overdueDates.length>0&&(this.balanceWarning.title+=`Overdue dates: ${i.overdueDates.map((e=>t.format(e.date,!1))).join(", ")}`),i.warningDates.length>0&&(this.balanceWarning.title+=`${this.balanceWarning.title.length>0?"\n":""}Soon overdue dates: ${i.warningDates.map((e=>t.format(e.date,!1))).join(", ")}`),this.balanceWarning.append(" "),this.balanceWarning.append(r.get("info",!1))}await this.model.getFavoritedDate()?null===(s=this.sheetContainer)||void 0===s||s.classList.add("tl-has-favorite"):null===(o=this.sheetContainer)||void 0===o||o.classList.remove("tl-has-favorite")}fixBalance(){var e;confirm("Are you sure you want to cancel out all overdue flex time? Please coorindate with a supervisor before using this feature.")&&(null===(e=this.model)||void 0===e||e.fixOverdueFlexBalance(),this.updateBalance())}},new class{constructor(){this.submitting=!1,this.createUI(),this.clockInButtonFinder()}createUI(){const e=document.createElement("style");e.innerHTML="\n.re-label\n{\n    font-size: 1.5em;\n    margin-bottom: 10px;\n}\n.re-reason-select\n{\n    padding: 5px;\n}\n.re-reason-ui\n{\n    z-index: 2000;\n    position: fixed;\n    inset: 0;\n    background-color: rgba(0,0,0,0.75);\n    padding-top: 45vh;\n    text-align: center;\n    color: white;\n    font-weight: bold;\n}\n.re-btn\n{\n    padding: 0 var(--button-padding-x, 15px);\n    min-width: 80px;\n    height: var(--button-size, 30px);\n    font-weight: 600;\n    font-size: var(--button-font-size, 12px);\n    font-family: var(--body-font-family);\n    border: 0;\n    border-radius: 4px;\n    margin: 5px;\n}\n.re-btn.re-primary\n{\n    color: var(--primary-bg-text-color, white);\n    background-color: var(--primary-600);\n}\n.re-btn.re-secondary\n{\n    color: var(--secondary-bg-text-color, #535353);\n    background-color: var(--secondary-600);\n}\n.re-blur\n{\n    filter: blur(2px);\n}\n.re-submitting .re-btn\n{\n    display: none;\n}\n.re-submitting-text\n{\n    display: none;\n    font-size: 1.5em;\n}\n.re-submitting .re-submitting-text\n{\n    display: block;\n}\n",document.body.append(e),this.reasonEnhancementUI=document.createElement("div"),this.reasonEnhancementUI.className="re-reason-ui",this.reasonEnhancementUI.style.display="none",document.body.appendChild(this.reasonEnhancementUI);const t=document.createElement("div");t.innerText="Choose Default Reason",t.className="re-label",this.reasonEnhancementUI.appendChild(t),this.reasonSelect=document.createElement("select"),this.reasonSelect.className="re-reason-select",this.reasonSelect.onchange=()=>this.saveDefaultReasonValue(),this.reasonEnhancementUI.appendChild(this.reasonSelect),this.reasonEnhancementUI.appendChild(document.createElement("br"));const n=document.createElement("button");n.className="re-cancel-btn re-btn re-secondary",n.innerText="Cancel",n.onclick=()=>this.cancel(),this.reasonEnhancementUI.appendChild(n);const a=document.createElement("button");a.className="re-submit-btn re-btn re-primary",a.innerText="Submit",a.onclick=()=>this.submit(),this.reasonEnhancementUI.appendChild(a);const s=document.createElement("div");s.className="re-submitting-text",s.innerText="Submitting...",this.reasonEnhancementUI.appendChild(s)}async clockInButtonFinder(){for(var e;;)this.findUnenhancedButtons("b-button.punch-clock-button, b-button.time-widget-clock-in-btn, b-button.time-widget-clock-out-btn").forEach((e=>this.enhanceClockInButton(e,s.FixLatest))),this.findUnenhancedButtons("b-button.quick-fix-apply-button").forEach((e=>this.enhanceClockInButton(e,s.FixAll))),this.appRoot||(this.appRoot=null!==(e=document.querySelector("app-root"))&&void 0!==e?e:void 0),await a.for(10)}findUnenhancedButtons(e){var t=[],n=document.querySelectorAll(e);for(const e of n)e.classList.contains("re-enhanced")||(e.classList.add("re-enhanced"),t.push(e));return t}enhanceClockInButton(e,t){e.addEventListener("click",(()=>this.showReasonFixer(t)))}saveDefaultReasonValue(){this.reasonSelect&&window.localStorage.setItem("re-last-reason",this.reasonSelect.value)}loadDefaultReasonValue(){var e;this.reasonSelect&&(this.reasonSelect.value=null!==(e=window.localStorage.getItem("re-last-reason"))&&void 0!==e?e:"")}async showReasonFixer(e){if(this.reasonEnhancementUI&&(await a.for(250),this.setUIVisible(!0),this.mode=e,this.reasonSelect)){const e=await n.metadata();this.reasonSelect.innerHTML="";for(const t of e.timeLogEntryReason.values){const e=document.createElement("option");e.value=t.serverId,e.innerText=t.value,this.reasonSelect.appendChild(e)}this.loadDefaultReasonValue()}}cancel(){this.setUIVisible(!1)}setUIVisible(e){this.reasonEnhancementUI&&(this.reasonEnhancementUI.style.display=e?"block":"none"),this.appRoot&&(e?this.appRoot.classList.add("re-blur"):this.appRoot.classList.remove("re-blur"))}async submit(){var e,t;await a.until((()=>!this.submitting)),this.submitting=!0,null===(e=this.reasonEnhancementUI)||void 0===e||e.classList.add("re-submitting"),this.mode===s.FixAll&&await this.fixAll(),this.mode===s.FixLatest&&await this.fixLatest(),this.setUIVisible(!1),null===(t=this.reasonEnhancementUI)||void 0===t||t.classList.remove("re-submitting"),this.submitting=!1}async fixAll(){if(!this.reasonSelect)return;const e=this.reasonSelect.value,a=await n.sheets();for(const s of a.employeeSheets){if(s.locked)continue;const a=await n.attendance(s.id);for(const s of a.attendance)if(s.entries.some((e=>!e.reason))){const a=t.parse(s.date);if("number"!=typeof a)continue;const o=s.entries.map((n=>{var s,o,i,r;return{startHour:((null!==(s=t.parse(n.start))&&void 0!==s?s:Date.now())-a)/36e5,lengthHours:n.end?((null!==(o=t.parse(n.end))&&void 0!==o?o:Date.now())-(null!==(i=t.parse(n.start))&&void 0!==i?i:Date.now()))/36e5:null,reasonId:n.reason||e,comment:null!==(r=n.comment)&&void 0!==r?r:null}}));await n.submit(a,o)}}}async fixLatest(){if(!this.reasonSelect)return;const e=this.reasonSelect.value;let a=null;const s=await n.sheets();for(const e of s.employeeSheets){if(e.locked)continue;const s=await n.attendance(e.id);for(const e of s.attendance){const n=t.parse(e.date);if("number"==typeof n&&(!a||n>a.date)){const s=e.entries.map((e=>{var a,s,o,i;return{startHour:((null!==(a=t.parse(e.start))&&void 0!==a?a:Date.now())-n)/36e5,lengthHours:e.end?((null!==(s=t.parse(e.end))&&void 0!==s?s:Date.now())-(null!==(o=t.parse(e.start))&&void 0!==o?o:Date.now()))/36e5:null,reasonId:e.reason,comment:null!==(i=e.comment)&&void 0!==i?i:null}}));a={date:n,entries:s}}}}if(a){for(const t of a.entries)t.reasonId=t.reasonId||e;await n.submit(a.date,a.entries)}}}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FDM0IsSUFBSyxNQUFNaEQsS0FBU2dELEVBQU9nQixlQUMzQixDQUNJLEdBQUloRSxFQUFNcUUsT0FBUSxTQUNsQixNQUFNTyxRQUFtQnZHLEVBQU11RyxXQUFXNUUsRUFBTUosSUFDaEQsSUFBSyxNQUFNekMsS0FBUXlILEVBQVdBLFdBQzlCLENBQ0ksTUFBTTNILEVBQU9SLEVBQU1aLE1BQU1zQixFQUFLQSxNQUM5QixHQUFvQixpQkFBVEYsS0FDTm9WLEdBQVVwVixFQUFPb1YsRUFBT2xWLE1BQzdCLENBQ0ksTUFBTW1CLEVBQThCbkIsRUFBS21CLFFBQVFLLEtBQUlILEksWUFFakQsTUFBTyxDQUNITSxZQUFpQyxRQUFwQixFQUFBckMsRUFBQSxNQUFZK0IsRUFBRUksY0FBTSxRQUFJOUIsS0FBS21JLE9BQVNoSSxHQUFRLEtBQzNEK0IsWUFBYVIsRUFBRU8sTUFBMEIsUUFBbEIsRUFBQXRDLEVBQUEsTUFBWStCLEVBQUVPLFlBQUksUUFBSWpDLEtBQUttSSxRQUE4QixRQUFwQixFQUFBeEksRUFBQSxNQUFZK0IsRUFBRUksY0FBTSxRQUFJOUIsS0FBS21JLFFBQVUsS0FBZ0IsS0FDbkh4RyxTQUFVRCxFQUFFVSxPQUNaQyxRQUFrQixRQUFULEVBQUFYLEVBQUVXLGVBQU8sUUFBSSxLQUN6QixJQUVMa1QsRUFBUyxDQUFFbFYsS0FBTUYsRUFBTXFCLFFBQVNBLEUsR0FJNUMsR0FBSStULEVBQ0osQ0FDSSxJQUFLLE1BQU1uTCxLQUFTbUwsRUFBTy9ULFFBRXZCNEksRUFBTXpJLFNBQVd5SSxFQUFNekksVUFBWVMsUUFFakNiLEVBQU1tSixPQUFPNkssRUFBT2xWLEtBQU1rVixFQUFPL1QsUSxDQUUvQyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvQXBpLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL0RhdGVzLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL0hpQm9iL0hpQm9iLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL1dhaXQudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvUmVhc29uRW5oYW5jZW1lbnRzL1JlYXNvbnNFbmhhbmNlbWVudHMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVGltZWxvZy9UaW1lbG9nVHlwZXMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvRXZlbnRIYW5kbGVyLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL01hdGVyaWFsSWNvbi50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9VdGlscy9OdW1iZXJzLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ01vZGVsLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ1VJLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ0Nzcy50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9SZWFzb25FbmhhbmNlbWVudHMvUmVhc29uRW5oYW5jZW1lbnRzQ3NzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBBcGlcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyB4aHIobWV0aG9kOiBcIkdFVFwiIHwgXCJQT1NUXCIsIHVybDogc3RyaW5nLCBib2R5OiBvYmplY3QpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHsgc3RhdHVzOiBudW1iZXIsIGJvZHk6IGFueSB9PihyZXNvbHZlID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsKTtcclxuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xyXG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XHJcbiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogeGhyLnJlc3BvbnNlVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyAhPT0gMjAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5oYXNPd25Qcm9wZXJ0eShcImVycm9yXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSByZXN1bHQuaGFzT3duUHJvcGVydHkoXCJrZXlcIikgPyByZXN1bHQua2V5IDogeGhyLnN0YXR1cy50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoYEhpQm9iIFV0aWxzOiBFcnJvciAke2tleX0gLSAke3Jlc3VsdC5lcnJvcn1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBIaUJvYiBVdGlsczogRXJyb3IgJHt4aHIuc3RhdHVzfSAtIGNoZWNrIHRoZSBkZXZlbG9wZXIgY29uc29sZSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgSGlCb2IgVXRpbHM6IEVycm9yICR7eGhyLnN0YXR1c30uYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHhocik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHhoci5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShib2R5KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgRGF0ZXNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBwYXJzZShzdHI6IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICBpZiAoIXN0cikgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgY29uc3Qgc3BsaXQgPSBzdHIuc3BsaXQoXCJUXCIpO1xyXG4gICAgICAgIGlmIChzcGxpdC5sZW5ndGggPCAyKSBzcGxpdC5wdXNoKFwiMDA6MDBcIik7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHNwbGl0LmpvaW4oXCJUXCIpKS5nZXRUaW1lKCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGZvcm1hdCh0aW1lOiBudW1iZXIsIGluY2x1ZGVUaW1lc3RhbXA6IGJvb2xlYW4pXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aW1lKSByZXR1cm4gXCJcIjtcclxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodGltZSk7XHJcbiAgICAgICAgcmV0dXJuIGAke2RhdGUuZ2V0RnVsbFllYXIoKX0tJHsoZGF0ZS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9LSR7ZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9JHtpbmNsdWRlVGltZXN0YW1wID8gYFQke2RhdGUuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX06JHtkYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX1gIDogXCJcIn1gO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBmb3JtYXRIb3VyKGhvdXJzOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgaG91ciA9IE1hdGguZmxvb3IoaG91cnMgJSAyNCk7XHJcbiAgICAgICAgY29uc3QgbWludXRlID0gTWF0aC5yb3VuZCgoaG91cnMgLSBob3VyKSAqIDYwKTtcclxuICAgICAgICByZXR1cm4gYCR7aG91ci50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX06JHttaW51dGUudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9YFxyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRXZWVrTnVtYmVyRnJvbURhdGUodGltZTogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUodGltZSk7XHJcbiAgICAgICAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcclxuICAgICAgICAvLyBUaHVyc2RheSBpbiBjdXJyZW50IHdlZWsgZGVjaWRlcyB0aGUgeWVhci5cclxuICAgICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyAzIC0gKGRhdGUuZ2V0RGF5KCkgKyA2KSAlIDcpO1xyXG4gICAgICAgIC8vIEphbnVhcnkgNCBpcyBhbHdheXMgaW4gd2VlayAxLlxyXG4gICAgICAgIHZhciB3ZWVrMSA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgMCwgNCk7XHJcbiAgICAgICAgLy8gQWRqdXN0IHRvIFRodXJzZGF5IGluIHdlZWsgMSBhbmQgY291bnQgbnVtYmVyIG9mIHdlZWtzIGZyb20gZGF0ZSB0byB3ZWVrMS5cclxuICAgICAgICByZXR1cm4gMSArIE1hdGgucm91bmQoKChkYXRlLmdldFRpbWUoKSAtIHdlZWsxLmdldFRpbWUoKSkgLyA4NjQwMDAwMFxyXG4gICAgICAgICAgICAtIDMgKyAod2VlazEuZ2V0RGF5KCkgKyA2KSAlIDcpIC8gNyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIHBhcnNlVGltZVRvaG91cnModGltZTogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNwbGl0ID0gdGltZS5zcGxpdChcIjpcIik7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHNwbGl0WzBdKSArIHBhcnNlSW50KHNwbGl0WzFdKSAvIDYwO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uL1V0aWxzL0FwaVwiO1xyXG5pbXBvcnQgeyBEYXRlcyB9IGZyb20gXCIuLi9VdGlscy9EYXRlc1wiO1xyXG5pbXBvcnQgeyBIaUJvYkF0dGVuZGFuY2UsIEhpQm9iTWV0YWRhdGEsIEhpQm9iU2hlZXRzLCBIaUJvYlN1Ym1pdEVudHJ5LCBIaUJvYlVzZXIgfSBmcm9tIFwiLi9IaUJvYlR5cGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSGlCb2Jcclxue1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgdXNlcklkOiBzdHJpbmcgfCBudWxsO1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBzdWJtaXQoZGF0ZTogbnVtYmVyLCBlbnRyaWVzOiBIaUJvYlN1Ym1pdEVudHJ5W10pOiBQcm9taXNlPGJvb2xlYW4+XHJcbiAgICB7XHJcbiAgICAgICAgaWYgKGVudHJpZXMuc29tZShlID0+ICFlLnJlYXNvbklkKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiV0FSTklORzogU09NRSBFTlRSSUVTIEhBVkUgTk8gUkVBU09OIFNFVCAtIE5PVCBTVUJNSVRUSU5HISFcIiwgZGF0ZSwgZW50cmllcyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGVudHJpZXMubWFwKGUgPT4geyByZXR1cm4geyBzdGFydDogRGF0ZXMuZm9ybWF0KGRhdGUgKyBlLnN0YXJ0SG91ciAqIDM2MDAgKiAxMDAwLCB0cnVlKSwgZW5kOiBlLmxlbmd0aEhvdXJzID8gRGF0ZXMuZm9ybWF0KGRhdGUgKyAoZS5zdGFydEhvdXIgKyBlLmxlbmd0aEhvdXJzKSAqIDM2MDAgKiAxMDAwLCB0cnVlKSA6IHVuZGVmaW5lZCwgcmVhc29uOiBlLnJlYXNvbklkLCBjb21tZW50OiBlLmNvbW1lbnQgPz8gdW5kZWZpbmVkIH0gfSk7XHJcbiAgICAgICAgY29uc3QgZGF0ZVN0ciA9IERhdGVzLmZvcm1hdChkYXRlLCBmYWxzZSk7XHJcbiAgICAgICAgY29uc3QgdXNlcklkID0gYXdhaXQgdGhpcy5nZXRVc2VySWQoKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiUE9TVFwiLCBgaHR0cHM6Ly9hcHAuaGlib2IuY29tL2FwaS9hdHRlbmRhbmNlL2VtcGxveWVlcy8ke3VzZXJJZH0vYXR0ZW5kYW5jZS9lbnRyaWVzP2ZvckRhdGU9JHtkYXRlU3RyfWAsIGRhdGEpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuc3RhdHVzID09PSAyMDA7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIHRpbWVsb2dSZWFzb25zKCk6IFByb21pc2U8eyBpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcgfVtdPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXdhaXQgdGhpcy5tZXRhZGF0YSgpO1xyXG4gICAgICAgIHJldHVybiBtZXRhZGF0YS50aW1lTG9nRW50cnlSZWFzb24udmFsdWVzLm1hcCh2ID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IHYuc2VydmVySWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiB2LnZhbHVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgYXR0ZW5kYW5jZShzaGVldDogbnVtYmVyKTogUHJvbWlzZTxIaUJvYkF0dGVuZGFuY2U+XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQXBpLnhocihcIkdFVFwiLCBgaHR0cHM6Ly9hcHAuaGlib2IuY29tL2FwaS9lbXBsb3llZXMvYXR0ZW5kYW5jZS9teS9zaGVldHMvJHtzaGVldH1gLCB7fSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5ib2R5O1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBzaGVldHMoKTogUHJvbWlzZTxIaUJvYlNoZWV0cz5cclxuICAgIHtcclxuICAgICAgICBjb25zdCB1c2VySWQgPSBhd2FpdCB0aGlzLmdldFVzZXJJZCgpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFwaS54aHIoXCJHRVRcIiwgYGh0dHBzOi8vYXBwLmhpYm9iLmNvbS9hcGkvZW1wbG95ZWVzLyR7dXNlcklkfS90aW1lbG9nL2F0dGVuZGFuY2Uvc2hlZXRzYCwge30pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuYm9keTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbWV0YWRhdGEoKTogUHJvbWlzZTxIaUJvYk1ldGFkYXRhPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFwaS54aHIoXCJHRVRcIiwgXCJodHRwczovL2FwcC5oaWJvYi5jb20vYXBpL2NvbXBhbnkvbWV0YWRhdGEvbGlzdHMvP2luY2x1ZGVBcmNoaXZlZD10cnVlXCIsIHt9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LmJvZHk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHN0YXRpYyBhc3luYyBnZXRVc2VySWQoKTogUHJvbWlzZTxzdHJpbmc+XHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnVzZXJJZCAhPT0gXCJzdHJpbmdcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXNlckluZm8oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlcklkID8/IFwiXCI7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIHVzZXJJbmZvKCk6IFByb21pc2U8SGlCb2JVc2VyPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFwaS54aHIoXCJHRVRcIiwgXCJodHRwczovL2FwcC5oaWJvYi5jb20vYXBpL3VzZXJcIiwge30pO1xyXG4gICAgICAgIHRoaXMudXNlcklkID0gKHJlc3VsdC5ib2R5IGFzIEhpQm9iVXNlcikuaWQ7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5ib2R5O1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFdhaXRcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBmb3IobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD5cclxuICAgIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4ocmVzb2x2ZSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZSgpLCBtcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIHVudGlsKGRlbGVnYXRlOiAoKSA9PiBib29sZWFuKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPihyZXNvbHZlID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBoYW5kbGUgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRlbGVnYXRlKCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKGhhbmRsZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgSGlCb2IgfSBmcm9tIFwiLi4vSGlCb2IvSGlCb2JcIjtcclxuaW1wb3J0IHsgSGlCb2JTdWJtaXRFbnRyeSB9IGZyb20gXCIuLi9IaUJvYi9IaUJvYlR5cGVzXCI7XHJcbmltcG9ydCB7IERhdGVzIH0gZnJvbSBcIi4uL1V0aWxzL0RhdGVzXCI7XHJcbmltcG9ydCB7IFdhaXQgfSBmcm9tIFwiLi4vVXRpbHMvV2FpdFwiO1xyXG5pbXBvcnQgeyBSZWFzb25FbmhhbmNlbWVudENzcyB9IGZyb20gXCIuL1JlYXNvbkVuaGFuY2VtZW50c0Nzc1wiO1xyXG5cclxuZXhwb3J0IGVudW0gUmVhc29uRW5oYW5jZW1lbnRNb2RlXHJcbntcclxuICAgIEZpeEFsbCxcclxuICAgIEZpeExhdGVzdCxcclxufVxyXG5leHBvcnQgY2xhc3MgUmVhc29uRW5oYW5jZW1lbnRzXHJcbntcclxuICAgIHByaXZhdGUgcmVhc29uRW5oYW5jZW1lbnRVST86IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSByZWFzb25TZWxlY3Q/OiBIVE1MU2VsZWN0RWxlbWVudDtcclxuICAgIHByaXZhdGUgYXBwUm9vdD86IEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHN1Ym1pdHRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICBwcml2YXRlIG1vZGU/OiBSZWFzb25FbmhhbmNlbWVudE1vZGU7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLmNyZWF0ZVVJKCk7XHJcbiAgICAgICAgdGhpcy5jbG9ja0luQnV0dG9uRmluZGVyKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNyZWF0ZVVJKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcclxuICAgICAgICBzdHlsZS5pbm5lckhUTUwgPSBSZWFzb25FbmhhbmNlbWVudENzcztcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChzdHlsZSk7XHJcblxyXG5cclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5jbGFzc05hbWUgPSBcInJlLXJlYXNvbi11aVwiO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkpO1xyXG5cclxuICAgICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgbGFiZWwuaW5uZXJUZXh0ID0gXCJDaG9vc2UgRGVmYXVsdCBSZWFzb25cIjtcclxuICAgICAgICBsYWJlbC5jbGFzc05hbWUgPSBcInJlLWxhYmVsXCI7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKGxhYmVsKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWFzb25TZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xyXG4gICAgICAgIHRoaXMucmVhc29uU2VsZWN0LmNsYXNzTmFtZSA9IFwicmUtcmVhc29uLXNlbGVjdFwiO1xyXG4gICAgICAgIHRoaXMucmVhc29uU2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4gdGhpcy5zYXZlRGVmYXVsdFJlYXNvblZhbHVlKCk7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKHRoaXMucmVhc29uU2VsZWN0KTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmNsYXNzTmFtZSA9IFwicmUtY2FuY2VsLWJ0biByZS1idG4gcmUtc2Vjb25kYXJ5XCI7XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmlubmVyVGV4dCA9IFwiQ2FuY2VsXCJcclxuICAgICAgICBjYW5jZWxCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuY2FuY2VsKCk7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKGNhbmNlbEJ1dHRvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgc3VibWl0QnV0dG9uLmNsYXNzTmFtZSA9IFwicmUtc3VibWl0LWJ0biByZS1idG4gcmUtcHJpbWFyeVwiO1xyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5pbm5lclRleHQgPSBcIlN1Ym1pdFwiXHJcbiAgICAgICAgc3VibWl0QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnN1Ym1pdCgpO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChzdWJtaXRCdXR0b24pO1xyXG5cclxuXHJcbiAgICAgICAgY29uc3Qgc3VibWl0dGluZ1RleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHN1Ym1pdHRpbmdUZXh0LmNsYXNzTmFtZSA9IFwicmUtc3VibWl0dGluZy10ZXh0XCI7XHJcbiAgICAgICAgc3VibWl0dGluZ1RleHQuaW5uZXJUZXh0ID0gXCJTdWJtaXR0aW5nLi4uXCJcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuYXBwZW5kQ2hpbGQoc3VibWl0dGluZ1RleHQpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBjbG9ja0luQnV0dG9uRmluZGVyKClcclxuICAgIHtcclxuICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjbG9ja0luQnV0dG9ucyA9IHRoaXMuZmluZFVuZW5oYW5jZWRCdXR0b25zKFwiYi1idXR0b24ucHVuY2gtY2xvY2stYnV0dG9uLCBiLWJ1dHRvbi50aW1lLXdpZGdldC1jbG9jay1pbi1idG4sIGItYnV0dG9uLnRpbWUtd2lkZ2V0LWNsb2NrLW91dC1idG5cIik7XHJcbiAgICAgICAgICAgIGNsb2NrSW5CdXR0b25zLmZvckVhY2goZSA9PiB0aGlzLmVuaGFuY2VDbG9ja0luQnV0dG9uKGUsIFJlYXNvbkVuaGFuY2VtZW50TW9kZS5GaXhMYXRlc3QpKTtcclxuICAgICAgICAgICAgdmFyIHF1aWNrRml4QnV0dG9uID0gdGhpcy5maW5kVW5lbmhhbmNlZEJ1dHRvbnMoXCJiLWJ1dHRvbi5xdWljay1maXgtYXBwbHktYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICBxdWlja0ZpeEJ1dHRvbi5mb3JFYWNoKGUgPT4gdGhpcy5lbmhhbmNlQ2xvY2tJbkJ1dHRvbihlLCBSZWFzb25FbmhhbmNlbWVudE1vZGUuRml4QWxsKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuYXBwUm9vdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBSb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImFwcC1yb290XCIpID8/IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhd2FpdCBXYWl0LmZvcigxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBmaW5kVW5lbmhhbmNlZEJ1dHRvbnMoc2VsZWN0b3I6IHN0cmluZyk6IEVsZW1lbnRbXVxyXG4gICAge1xyXG4gICAgICAgIHZhciBhcnIgPSBbXSBhcyBFbGVtZW50W107XHJcbiAgICAgICAgdmFyIHF1ZXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XHJcbiAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHF1ZXJ5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInJlLWVuaGFuY2VkXCIpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJyZS1lbmhhbmNlZFwiKTtcclxuICAgICAgICAgICAgICAgIGFyci5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcnI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBlbmhhbmNlQ2xvY2tJbkJ1dHRvbihidXR0b246IEVsZW1lbnQsIG1vZGU6IFJlYXNvbkVuaGFuY2VtZW50TW9kZSlcclxuICAgIHtcclxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuc2hvd1JlYXNvbkZpeGVyKG1vZGUpKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgc2F2ZURlZmF1bHRSZWFzb25WYWx1ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvblNlbGVjdCkgcmV0dXJuO1xyXG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInJlLWxhc3QtcmVhc29uXCIsIHRoaXMucmVhc29uU2VsZWN0LnZhbHVlKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgbG9hZERlZmF1bHRSZWFzb25WYWx1ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvblNlbGVjdCkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMucmVhc29uU2VsZWN0LnZhbHVlID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicmUtbGFzdC1yZWFzb25cIikgPz8gXCJcIjtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgc2hvd1JlYXNvbkZpeGVyKG1vZGU6IFJlYXNvbkVuaGFuY2VtZW50TW9kZSlcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVhc29uRW5oYW5jZW1lbnRVSSkgcmV0dXJuO1xyXG4gICAgICAgIGF3YWl0IFdhaXQuZm9yKDI1MCk7XHJcbiAgICAgICAgdGhpcy5zZXRVSVZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcclxuICAgICAgICBpZiAodGhpcy5yZWFzb25TZWxlY3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCByZWFzb25zID0gYXdhaXQgSGlCb2IubWV0YWRhdGEoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWFzb25TZWxlY3QuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgZm9yIChjb25zdCByZWFzb24gb2YgcmVhc29ucy50aW1lTG9nRW50cnlSZWFzb24udmFsdWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gcmVhc29uLnNlcnZlcklkO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLmlubmVyVGV4dCA9IHJlYXNvbi52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVhc29uU2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5sb2FkRGVmYXVsdFJlYXNvblZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjYW5jZWwoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuc2V0VUlWaXNpYmxlKGZhbHNlKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgc2V0VUlWaXNpYmxlKHZhbHVlOiBib29sZWFuKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICAgICAgZWxzZSB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5hcHBSb290KVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgdGhpcy5hcHBSb290LmNsYXNzTGlzdC5hZGQoXCJyZS1ibHVyXCIpO1xyXG4gICAgICAgICAgICBlbHNlIHRoaXMuYXBwUm9vdC5jbGFzc0xpc3QucmVtb3ZlKFwicmUtYmx1clwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIHN1Ym1pdCgpXHJcbiAgICB7XHJcbiAgICAgICAgYXdhaXQgV2FpdC51bnRpbCgoKSA9PiAhdGhpcy5zdWJtaXR0aW5nKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdWJtaXR0aW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUk/LmNsYXNzTGlzdC5hZGQoXCJyZS1zdWJtaXR0aW5nXCIpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tb2RlID09PSBSZWFzb25FbmhhbmNlbWVudE1vZGUuRml4QWxsKSBhd2FpdCB0aGlzLmZpeEFsbCgpO1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgPT09IFJlYXNvbkVuaGFuY2VtZW50TW9kZS5GaXhMYXRlc3QpIGF3YWl0IHRoaXMuZml4TGF0ZXN0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0VUlWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUk/LmNsYXNzTGlzdC5yZW1vdmUoXCJyZS1zdWJtaXR0aW5nXCIpO1xyXG5cclxuICAgICAgICB0aGlzLnN1Ym1pdHRpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgZml4QWxsKClcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVhc29uU2VsZWN0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgcmVhc29uID0gdGhpcy5yZWFzb25TZWxlY3QudmFsdWU7XHJcbiAgICAgICAgY29uc3Qgc2hlZXRzID0gYXdhaXQgSGlCb2Iuc2hlZXRzKCk7XHJcbiAgICAgICAgZm9yIChjb25zdCBzaGVldCBvZiBzaGVldHMuZW1wbG95ZWVTaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoc2hlZXQubG9ja2VkKSBjb250aW51ZTtcclxuICAgICAgICAgICAgY29uc3QgYXR0ZW5kYW5jZSA9IGF3YWl0IEhpQm9iLmF0dGVuZGFuY2Uoc2hlZXQuaWQpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2YgYXR0ZW5kYW5jZS5hdHRlbmRhbmNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZS5lbnRyaWVzLnNvbWUoZSA9PiAhZS5yZWFzb24pKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBEYXRlcy5wYXJzZShkYXRlLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGltZSAhPT0gXCJudW1iZXJcIikgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW50cmllczogSGlCb2JTdWJtaXRFbnRyeVtdID0gZGF0ZS5lbnRyaWVzLm1hcChlID0+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRIb3VyOiAoKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpIC0gdGltZSkgLyAoMzYwMCAqIDEwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoSG91cnM6IGUuZW5kID8gKChEYXRlcy5wYXJzZShlLmVuZCkgPz8gRGF0ZS5ub3coKSkgLSAoRGF0ZXMucGFyc2UoZS5zdGFydCkgPz8gRGF0ZS5ub3coKSkpIC8gKDM2MDAgKiAxMDAwKSA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb25JZDogZS5yZWFzb24gfHwgcmVhc29uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDogZS5jb21tZW50ID8/IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBIaUJvYi5zdWJtaXQodGltZSwgZW50cmllcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGZpeExhdGVzdCgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvblNlbGVjdCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHJlYXNvbiA9IHRoaXMucmVhc29uU2VsZWN0LnZhbHVlO1xyXG4gICAgICAgIGxldCBsYXRlc3Q6IHsgZGF0ZTogbnVtYmVyLCBlbnRyaWVzOiBIaUJvYlN1Ym1pdEVudHJ5W10gfSB8IG51bGwgPSBudWxsO1xyXG4gICAgICAgIGNvbnN0IHNoZWV0cyA9IGF3YWl0IEhpQm9iLnNoZWV0cygpO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2hlZXQgb2Ygc2hlZXRzLmVtcGxveWVlU2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHNoZWV0LmxvY2tlZCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGF0dGVuZGFuY2UgPSBhd2FpdCBIaUJvYi5hdHRlbmRhbmNlKHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIGF0dGVuZGFuY2UuYXR0ZW5kYW5jZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IERhdGVzLnBhcnNlKGRhdGUuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWUgIT09IFwibnVtYmVyXCIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFsYXRlc3QgfHwgdGltZSA+IGxhdGVzdC5kYXRlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudHJpZXM6IEhpQm9iU3VibWl0RW50cnlbXSA9IGRhdGUuZW50cmllcy5tYXAoZSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0SG91cjogKChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSAtIHRpbWUpIC8gKDM2MDAgKiAxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aEhvdXJzOiBlLmVuZCA/ICgoRGF0ZXMucGFyc2UoZS5lbmQpID8/IERhdGUubm93KCkpIC0gKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpKSAvICgzNjAwICogMTAwMCkgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uSWQ6IGUucmVhc29uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDogZS5jb21tZW50ID8/IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBsYXRlc3QgPSB7IGRhdGU6IHRpbWUsIGVudHJpZXM6IGVudHJpZXMgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGF0ZXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBsYXRlc3QuZW50cmllcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZW50cnkucmVhc29uSWQgPSBlbnRyeS5yZWFzb25JZCB8fCByZWFzb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgSGlCb2Iuc3VibWl0KGxhdGVzdC5kYXRlLCBsYXRlc3QuZW50cmllcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nRW50cnlcclxue1xyXG4gICAgc3RhcnRIb3VyOiBudW1iZXIsXHJcbiAgICBsZW5ndGhIb3VyczogbnVtYmVyLFxyXG4gICAgcmVhc29uSWQ6IHN0cmluZyxcclxuICAgIGNvbW1lbnQ6IHN0cmluZyB8IG51bGwsXHJcbiAgICBoYXNDb21tZW50OiBib29sZWFuXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nRGF0ZVxyXG57XHJcbiAgICBkaXJ0eTogYm9vbGVhbixcclxuICAgIGRhdGU6IG51bWJlclxyXG4gICAgZW50cmllczogVGltZWxvZ0VudHJ5W10sXHJcbiAgICB3ZWVrZW5kOiBib29sZWFuLFxyXG4gICAgZmF2b3JpdGVkOiBib29sZWFuLFxyXG4gICAgZGF0ZURlc2NyaXB0aW9uPzogc3RyaW5nXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nU2hlZXRcclxue1xyXG4gICAgaWQ6IG51bWJlcixcclxuICAgIHN0YXR1czogc3RyaW5nLFxyXG4gICAgc3RhcnQ6IG51bWJlcixcclxuICAgIGVuZDogbnVtYmVyXHJcbiAgICBkYXRlczogVGltZWxvZ0RhdGVbXSxcclxuICAgIGxvY2tlZDogYm9vbGVhbixcclxuICAgIGhvdXJzUGVyRGF5OiBudW1iZXJcclxufVxyXG5leHBvcnQgZW51bSBUaW1lbG9nU2F2ZVN0YXR1c1xyXG57XHJcbiAgICBXYWl0aW5nLFxyXG4gICAgU2F2aW5nLFxyXG4gICAgU2F2ZWQsXHJcbiAgICBFcnJvclxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZUxvZ0Zhdm9yaXRlZERhdGVcclxue1xyXG4gICAgZGF0ZTogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ0ZsZXhEYXRlXHJcbntcclxuICAgIGRhdGU6IG51bWJlcixcclxuICAgIGRhdGVTdHJpbmc6IHN0cmluZyxcclxuICAgIHJlYWxCYWxhbmNlOiBudW1iZXIsXHJcbiAgICByZWFsbG9jYXRlZEJhbGFuY2U6IG51bWJlclxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ0ZsZXhBZGp1c3RtZW50XHJcbntcclxuICAgIGFwcGxpZWRPbjogbnVtYmVyLFxyXG4gICAgZGF0ZTogbnVtYmVyLFxyXG4gICAgYWRqdXN0bWVudDogbnVtYmVyXHJcbn1cclxuXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVsb2dVSURhdGUgXHJcbntcclxuICAgIGRhdGU6IFRpbWVsb2dEYXRlLFxyXG4gICAgcGFyZW50OiBIVE1MRGl2RWxlbWVudCxcclxuICAgIHRpdGxlOiBIVE1MU3BhbkVsZW1lbnQsXHJcbiAgICBlbnRyaWVzOiBUaW1lbG9nVUlFbnRyeUNvbnRhaW5lcltdLFxyXG4gICAgc3VtSG91cnM/OiBIVE1MU3BhbkVsZW1lbnQsXHJcbiAgICBzdGFyQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCxcclxuICAgIHBhc3RlQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCxcclxuICAgIHdlZWtlbmREZXNjcmlwdGlvbjogSFRNTERpdkVsZW1lbnRcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVsb2dVSUVudHJ5Q29udGFpbmVyXHJcbntcclxuICAgIGVudHJ5OiBUaW1lbG9nRW50cnksXHJcbiAgICBwYXJlbnQ6IEhUTUxEaXZFbGVtZW50LFxyXG4gICAgc3RhcnRIb3VyOiBIVE1MSW5wdXRFbGVtZW50LFxyXG4gICAgbGVuZ3RoOiBIVE1MSW5wdXRFbGVtZW50LFxyXG4gICAgcmVhc29uOiBIVE1MU2VsZWN0RWxlbWVudCxcclxuICAgIGVuZEhvdXI6IEhUTUxJbnB1dEVsZW1lbnQsXHJcbiAgICBjb21tZW50OiBIVE1MSW5wdXRFbGVtZW50LFxyXG4gICAgY29tbWVudEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQsXHJcbiAgICBub1JlYXNvbldhcm5pbmc6IEhUTUxEaXZFbGVtZW50XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nVUlXZWVrU3VtXHJcbntcclxuICAgIGRhdGVzOiBUaW1lbG9nVUlEYXRlW10sXHJcbiAgICBlbGVtZW50OiBIVE1MRGl2RWxlbWVudFxyXG59IiwiZXhwb3J0IGNsYXNzIEV2ZW50SGFuZGxlcjxUPlxyXG57XHJcbiAgICBwcml2YXRlIGhhbmRsZXJzOiB7IGhhbmRsZXI6ICh2YWw6IFQpID0+IHZvaWQsIGNvbnRleHQ6IGFueSB9W10gPSBbXTtcclxuICAgIHB1YmxpYyBvbihoYW5kbGVyOiAodmFsOiBUKSA9PiB2b2lkLCBjb250ZXh0OiBhbnkpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycy5wdXNoKHsgaGFuZGxlciwgY29udGV4dCB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvZmYoaGFuZGxlcjogKHZhbDogVCkgPT4gdm9pZCwgY29udGV4dDogYW55KVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmZpbHRlcihoID0+IGguaGFuZGxlciAhPT0gaGFuZGxlciB8fCBoLmNvbnRleHQgIT09IGNvbnRleHQpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGZpcmUodmFsOiBUKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcnMuZm9yRWFjaChoID0+IGguaGFuZGxlci5jYWxsKGguY29udGV4dCwgdmFsKSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgYWJzdHJhY3QgY2xhc3MgTWF0ZXJpYWxJY29uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgaW5pdGlhbGl6ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xyXG4gICAgICAgIGxpbmsuaHJlZiA9IFwiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1NYXRlcmlhbCtTeW1ib2xzK091dGxpbmVkOm9wc3osd2dodCxGSUxMLEdSQURAMjAuLjQ4LDEwMC4uNzAwLDAuLjEsLTUwLi4yMDBcIjtcclxuICAgICAgICBsaW5rLnJlbCA9IFwic3R5bGVzaGVldFwiO1xyXG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluayk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGdldChpY29uOiBzdHJpbmcsIGZpbGw6IGJvb2xlYW4gPSBmYWxzZSlcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSBgbWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZGA7XHJcbiAgICAgICAgc3Bhbi5pbm5lclRleHQgPSBpY29uO1xyXG4gICAgICAgIHNwYW4uc3R5bGUudmVydGljYWxBbGlnbiA9IFwibWlkZGxlXCI7XHJcbiAgICAgICAgc3Bhbi5zdHlsZS5mb250U2l6ZSA9IFwiMS41ZW1cIjtcclxuICAgICAgICBzcGFuLnN0eWxlLmZvbnRWYXJpYXRpb25TZXR0aW5ncyA9IGAnRklMTCcgJHtmaWxsID8gMSA6IDB9YDtcclxuICAgICAgICByZXR1cm4gc3BhbjtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBOdW1iZXJzXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgcm91bmQobnVtOiBudW1iZXIsIGRlY2ltYWxzOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQobnVtICogKDEwICoqIGRlY2ltYWxzKSkgLyAoMTAgKiogZGVjaW1hbHMpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBmbG9vcihudW06IG51bWJlciwgZGVjaW1hbHM6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihudW0gKiAoMTAgKiogZGVjaW1hbHMpKSAvICgxMCAqKiBkZWNpbWFscyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGNlaWwobnVtOiBudW1iZXIsIGRlY2ltYWxzOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguY2VpbChudW0gKiAoMTAgKiogZGVjaW1hbHMpKSAvICgxMCAqKiBkZWNpbWFscyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBzdW0oYXJyOiBudW1iZXJbXSlcclxuICAgIHtcclxuICAgICAgICBsZXQgdmFsID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgdmFsICs9IGFycltpXTtcclxuICAgICAgICByZXR1cm4gdmFsO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgSGlCb2IgfSBmcm9tIFwiLi4vSGlCb2IvSGlCb2JcIjtcclxuaW1wb3J0IHsgSGlCb2JSZWFzb24gfSBmcm9tIFwiLi4vSGlCb2IvSGlCb2JUeXBlc1wiO1xyXG5pbXBvcnQgeyBEYXRlcyB9IGZyb20gXCIuLi9VdGlscy9EYXRlc1wiO1xyXG5pbXBvcnQgeyBFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi4vVXRpbHMvRXZlbnRIYW5kbGVyXCI7XHJcbmltcG9ydCB7IE51bWJlcnMgfSBmcm9tIFwiLi4vVXRpbHMvTnVtYmVyc1wiO1xyXG5pbXBvcnQgeyBXYWl0IH0gZnJvbSBcIi4uL1V0aWxzL1dhaXRcIjtcclxuaW1wb3J0IHsgVGltZWxvZ1NoZWV0LCBUaW1lbG9nRGF0ZSwgVGltZWxvZ1NhdmVTdGF0dXMsIFRpbWVMb2dGYXZvcml0ZWREYXRlLCBUaW1lbG9nRmxleERhdGUsIFRpbWVsb2dGbGV4QWRqdXN0bWVudCB9IGZyb20gXCIuL1RpbWVsb2dUeXBlc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRpbWVsb2dNb2RlbFxyXG57XHJcbiAgICBwdWJsaWMgc2hlZXRzOiBUaW1lbG9nU2hlZXRbXSA9IFtdO1xyXG4gICAgcHVibGljIG9uRGF0ZVVwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPHsgc2hlZXQ6IFRpbWVsb2dTaGVldCwgZGF0ZTogVGltZWxvZ0RhdGUgfT4oKTtcclxuICAgIHB1YmxpYyBvblJlYXNvbnNVcGRhdGVkID0gbmV3IEV2ZW50SGFuZGxlcjxIaUJvYlJlYXNvbltdPigpO1xyXG4gICAgcHVibGljIG9uU2hlZXRVcGRhdGVkID0gbmV3IEV2ZW50SGFuZGxlcjxUaW1lbG9nU2hlZXQ+KCk7XHJcbiAgICBwdWJsaWMgb25TaGVldHNVcGRhdGVkID0gbmV3IEV2ZW50SGFuZGxlcjxUaW1lbG9nU2hlZXRbXT4oKTtcclxuICAgIHB1YmxpYyBvblNhdmVTdGF0dXNVcGRhdGVkID0gbmV3IEV2ZW50SGFuZGxlcjxUaW1lbG9nU2F2ZVN0YXR1cz4oKTtcclxuICAgIHByaXZhdGUgc2F2ZUhhbmRsZTogbnVtYmVyID0gLTE7XHJcbiAgICBwcml2YXRlIHNhdmluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGluZ0ZsZXg6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgZmV0Y2hpbmdTaGVldHMgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgcmVhc29uczogSGlCb2JSZWFzb25bXSA9IFtdO1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBpbml0aWFsaXplKClcclxuICAgIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmZldGNoU2hlZXRzKCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5mZXRjaFJlYXNvbnMoKTtcclxuICAgICAgICB0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQuZmlyZShUaW1lbG9nU2F2ZVN0YXR1cy5TYXZlZCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZmV0Y2hTaGVldHMoKVxyXG4gICAge1xyXG4gICAgICAgIGF3YWl0IFdhaXQudW50aWwoKCkgPT4gIXRoaXMuZmV0Y2hpbmdTaGVldHMpO1xyXG4gICAgICAgIHRoaXMuZmV0Y2hpbmdTaGVldHMgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc2hlZXRzID0gW107XHJcbiAgICAgICAgY29uc3Qgc2hlZXRzID0gYXdhaXQgSGlCb2Iuc2hlZXRzKCk7XHJcbiAgICAgICAgZm9yIChjb25zdCBzaGVldCBvZiBzaGVldHMuZW1wbG95ZWVTaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IERhdGVzLnBhcnNlKHNoZWV0LmN5Y2xlU3RhcnREYXRlKSA/PyAwO1xyXG4gICAgICAgICAgICBjb25zdCBlbmQgPSBEYXRlcy5wYXJzZShzaGVldC5jeWNsZUVuZERhdGUpID8/IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1NoZWV0ID0ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IHNoZWV0LmlkLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBzaGVldC5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICBzdGFydCxcclxuICAgICAgICAgICAgICAgIGVuZCxcclxuICAgICAgICAgICAgICAgIGRhdGVzOiBbXSxcclxuICAgICAgICAgICAgICAgIGxvY2tlZDogc2hlZXQubG9ja2VkLFxyXG4gICAgICAgICAgICAgICAgaG91cnNQZXJEYXk6IDBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5zaGVldHMucHVzaChuZXdTaGVldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2hlZXRzLnNvcnQoKGEsIGIpID0+IGIuc3RhcnQgLSBhLnN0YXJ0KTtcclxuICAgICAgICB0aGlzLm9uU2hlZXRzVXBkYXRlZC5maXJlKHRoaXMuc2hlZXRzKTtcclxuICAgICAgICB0aGlzLmZldGNoaW5nU2hlZXRzID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZmV0Y2hSZWFzb25zKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLnJlYXNvbnMgPSAoYXdhaXQgSGlCb2IubWV0YWRhdGEoKSkudGltZUxvZ0VudHJ5UmVhc29uLnZhbHVlcztcclxuICAgICAgICB0aGlzLm9uUmVhc29uc1VwZGF0ZWQuZmlyZSh0aGlzLnJlYXNvbnMpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGZldGNoU2hlZXQoaWQ6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmlkID09PSBpZCk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGF0dGVuZGFuY2UgPSBhd2FpdCBIaUJvYi5hdHRlbmRhbmNlKGlkKTtcclxuICAgICAgICBzaGVldC5ob3Vyc1BlckRheSA9IGF0dGVuZGFuY2Uuc3VtbWFyeS5wb3RlbnRpYWxXb3JraW5nSG91cnMgLyBhdHRlbmRhbmNlLnN1bW1hcnkucG90ZW50aWFsV29ya2luZ0RheXM7XHJcbiAgICAgICAgc2hlZXQuZGF0ZXMgPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2YgYXR0ZW5kYW5jZS5hdHRlbmRhbmNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgdGltZSA9IERhdGVzLnBhcnNlKGRhdGUuZGF0ZSkgPz8gRGF0ZS5ub3coKVxyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZTogVGltZWxvZ0RhdGUgPSB7XHJcbiAgICAgICAgICAgICAgICBkaXJ0eTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkYXRlOiB0aW1lLFxyXG4gICAgICAgICAgICAgICAgd2Vla2VuZDogZGF0ZS5zdGF0dXMgPT09IFwiV2Vla2VuZEV2ZW50XCIsXHJcbiAgICAgICAgICAgICAgICBmYXZvcml0ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZGF0ZURlc2NyaXB0aW9uOiBkYXRlLm5vdGUuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICBlbnRyaWVzOiBkYXRlLmVudHJpZXMubWFwKGUgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydEhvdXI6IE51bWJlcnMuZmxvb3IoKChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSAtIChEYXRlcy5wYXJzZShkYXRlLmRhdGUpID8/IERhdGUubm93KCkpKSAvICgzNjAwICogMTAwMCksIDIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGhIb3VyczogTnVtYmVycy5jZWlsKCgoRGF0ZXMucGFyc2UoZS5lbmQpID8/IERhdGUubm93KCkpIC0gKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpKSAvICgzNjAwICogMTAwMCksIDIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFzb25JZDogZS5yZWFzb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGUuY29tbWVudCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNDb21tZW50OiAhIWUuY29tbWVudFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KS5zb3J0KChhLCBiKSA9PiBhLnN0YXJ0SG91ciAtIGIuc3RhcnRIb3VyKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBzaGVldC5kYXRlcy5wdXNoKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2hlZXQuZGF0ZXMuc29ydCgoYSwgYikgPT4gYi5kYXRlIC0gYS5kYXRlKTtcclxuICAgICAgICBjb25zdCBmYXZvcml0ZSA9IGF3YWl0IHRoaXMuZ2V0RmF2b3JpdGVkRGF0ZSgpO1xyXG4gICAgICAgIGlmIChmYXZvcml0ZSAmJiBmYXZvcml0ZS5zaGVldCA9PT0gc2hlZXQpXHJcbiAgICAgICAgICAgIGZhdm9yaXRlLmRhdGUuZmF2b3JpdGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm9uU2hlZXRVcGRhdGVkLmZpcmUoc2hlZXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjaGFuZ2VTdGFydEhvdXIoZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIsIGhvdXI6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0uc3RhcnRIb3VyID0gaG91cjtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2hhbmdlTGVuZ3RoSG91cnMoZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5sZW5ndGhIb3VycyA9IGxlbmd0aDtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2hhbmdlUmVhc29uKGRhdGU6IFRpbWVsb2dEYXRlLCBpbmRleDogbnVtYmVyLCByZWFzb246IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0ucmVhc29uSWQgPSByZWFzb247XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGNoYW5nZUNvbW1lbnQoZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIsIGNvbW1lbnQ6IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0uY29tbWVudCA9IGNvbW1lbnQ7XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5oYXNDb21tZW50ID0gdHJ1ZTtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgdG9nZ2xlQ29tbWVudChkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0uaGFzQ29tbWVudCA9ICFkYXRlLmVudHJpZXNbaW5kZXhdLmhhc0NvbW1lbnQ7XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5jb21tZW50ID0gZGF0ZS5lbnRyaWVzW2luZGV4XS5oYXNDb21tZW50ID8gXCJcIiA6IG51bGw7XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIHNldEZhdm9yaXRlZERhdGUoZGF0ZTogVGltZWxvZ0RhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3Qgb2xkRmF2b3JpdGUgPSBhd2FpdCB0aGlzLmdldEZhdm9yaXRlZERhdGUoKTtcclxuICAgICAgICBpZiAob2xkRmF2b3JpdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBvbGRGYXZvcml0ZS5kYXRlLmZhdm9yaXRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZShvbGRGYXZvcml0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkYXRlLmZhdm9yaXRlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldDogc2hlZXQsIGRhdGU6IGRhdGUgfSk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRsX2Zhdm9yaXRlXCIsIEpTT04uc3RyaW5naWZ5KHsgZGF0ZTogRGF0ZXMuZm9ybWF0KGRhdGUuZGF0ZSwgZmFsc2UpIH0gYXMgVGltZUxvZ0Zhdm9yaXRlZERhdGUpKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBnZXRGYXZvcml0ZWREYXRlKCk6IFByb21pc2U8eyBzaGVldDogVGltZWxvZ1NoZWV0LCBkYXRlOiBUaW1lbG9nRGF0ZSB9IHwgbnVsbD5cclxuICAgIHtcclxuICAgICAgICBjb25zdCBzdHIgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0bF9mYXZvcml0ZVwiKTtcclxuICAgICAgICBpZiAoIXN0cikgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgY29uc3QgZmF2b3JpdGU6IFRpbWVMb2dGYXZvcml0ZWREYXRlID0gSlNPTi5wYXJzZShzdHIpO1xyXG4gICAgICAgIGNvbnN0IHRpbWUgPSBEYXRlcy5wYXJzZShmYXZvcml0ZS5kYXRlKTtcclxuICAgICAgICBpZiAodHlwZW9mIHRpbWUgPT09IFwibnVtYmVyXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLnN0YXJ0IDw9IHRpbWUgJiYgcy5lbmQgPj0gdGltZSk7XHJcbiAgICAgICAgICAgIGlmIChzaGVldClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNoZWV0LmRhdGVzLmxlbmd0aCA8IDEpIGF3YWl0IHRoaXMuZmV0Y2hTaGVldChzaGVldC5pZCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlID0gc2hlZXQuZGF0ZXMuZmluZChkID0+IGQuZGF0ZSA9PT0gdGltZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzaGVldDogc2hlZXQsIGRhdGU6IGRhdGUgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVsZXRlRW50cnkoZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGZpbmRMYXN0RW50cnkob3JpZ2luYWxEYXRlOiBUaW1lbG9nRGF0ZSlcclxuICAgIHtcclxuICAgICAgICBjb25zdCBvcmlnaW5hbFNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IG9yaWdpbmFsRGF0ZSkpO1xyXG4gICAgICAgIGlmICghb3JpZ2luYWxTaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGxldCBkYXRlSW5kZXggPSBvcmlnaW5hbFNoZWV0LmRhdGVzLmluZGV4T2Yob3JpZ2luYWxEYXRlKTtcclxuICAgICAgICBsZXQgZW50cnlJbmRleCA9IC0xO1xyXG4gICAgICAgIGZvciAobGV0IHNoZWV0SW5kZXggPSB0aGlzLnNoZWV0cy5pbmRleE9mKG9yaWdpbmFsU2hlZXQpOyBzaGVldEluZGV4IDwgdGhpcy5zaGVldHMubGVuZ3RoOyBzaGVldEluZGV4KyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzW3NoZWV0SW5kZXhdO1xyXG4gICAgICAgICAgICBpZiAoc2hlZXQuZGF0ZXMubGVuZ3RoIDwgMSkgYXdhaXQgdGhpcy5mZXRjaFNoZWV0KHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgZm9yICg7IGRhdGVJbmRleCA8IHNoZWV0LmRhdGVzLmxlbmd0aDsgZGF0ZUluZGV4KyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBzaGVldC5kYXRlc1tkYXRlSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGUuZW50cmllcy5sZW5ndGggPiAwKSByZXR1cm4gZW50cnlJbmRleCA8IDAgPyBkYXRlLmVudHJpZXNbZGF0ZS5lbnRyaWVzLmxlbmd0aCAtIDFdIDogZGF0ZS5lbnRyaWVzW2VudHJ5SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgZW50cnlJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGF0ZUluZGV4ID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgbmV3RW50cnkoZGF0ZTogVGltZWxvZ0RhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBjb25zdCBsYXN0ID0gYXdhaXQgdGhpcy5maW5kTGFzdEVudHJ5KGRhdGUpO1xyXG4gICAgICAgIGxldCBzdGFydEhvdXIgPSA4LjU7XHJcbiAgICAgICAgbGV0IGxlbmd0aEhvdXJzID0gTnVtYmVycy5yb3VuZChzaGVldC5ob3Vyc1BlckRheSwgMik7XHJcbiAgICAgICAgbGV0IHJlYXNvbklkID0gXCJcIjtcclxuICAgICAgICBpZiAobGFzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkYXRlLmVudHJpZXMuaW5jbHVkZXMobGFzdCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0SG91ciA9IGxhc3Quc3RhcnRIb3VyICsgbGFzdC5sZW5ndGhIb3VycztcclxuICAgICAgICAgICAgICAgIGxlbmd0aEhvdXJzID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZWFzb25JZCA9IGxhc3QucmVhc29uSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGUuZW50cmllcy5wdXNoKHtcclxuICAgICAgICAgICAgc3RhcnRIb3VyLFxyXG4gICAgICAgICAgICBsZW5ndGhIb3VycyxcclxuICAgICAgICAgICAgcmVhc29uSWQsXHJcbiAgICAgICAgICAgIGNvbW1lbnQ6IG51bGwsXHJcbiAgICAgICAgICAgIGhhc0NvbW1lbnQ6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIHBhc3RlRnJvbVN0YXJyZWQoZGF0ZTogVGltZWxvZ0RhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKGRhdGUuZW50cmllcy5sZW5ndGggPiAwKSByZXR1cm47XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBjb25zdCBmYXZvcml0ZSA9IGF3YWl0IHRoaXMuZ2V0RmF2b3JpdGVkRGF0ZSgpO1xyXG4gICAgICAgIGlmICghZmF2b3JpdGUgfHwgZmF2b3JpdGUuZGF0ZSA9PT0gZGF0ZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGZhdm9yaXRlLmRhdGUuZW50cmllcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGRhdGUuZW50cmllcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0SG91cjogZW50cnkuc3RhcnRIb3VyLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoSG91cnM6IGVudHJ5Lmxlbmd0aEhvdXJzLFxyXG4gICAgICAgICAgICAgICAgcmVhc29uSWQ6IGVudHJ5LnJlYXNvbklkLFxyXG4gICAgICAgICAgICAgICAgY29tbWVudDogZW50cnkuY29tbWVudCxcclxuICAgICAgICAgICAgICAgIGhhc0NvbW1lbnQ6IGVudHJ5Lmhhc0NvbW1lbnRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcXVldWVTYXZlKClcclxuICAgIHtcclxuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc2F2ZUhhbmRsZSk7XHJcbiAgICAgICAgdGhpcy5zYXZlSGFuZGxlID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4gdGhpcy5zYXZlKCksIDUwMCk7XHJcbiAgICAgICAgdGhpcy5vblNhdmVTdGF0dXNVcGRhdGVkLmZpcmUoVGltZWxvZ1NhdmVTdGF0dXMuV2FpdGluZyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgc2F2ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgYXdhaXQgV2FpdC51bnRpbCgoKSA9PiAhdGhpcy5zYXZpbmcpO1xyXG4gICAgICAgIHRoaXMuc2F2aW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQuZmlyZShUaW1lbG9nU2F2ZVN0YXR1cy5TYXZpbmcpO1xyXG4gICAgICAgIGNvbnN0IG1pbmltdW1XYWl0ID0gV2FpdC5mb3IoMTAwKTtcclxuICAgICAgICBsZXQgZXJyb3IgPSBmYWxzZTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHRoaXMuc2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIHNoZWV0LmRhdGVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZS5kaXJ0eSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBIaUJvYi5zdWJtaXQoZGF0ZS5kYXRlLCBkYXRlLmVudHJpZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlLmRpcnR5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYXdhaXQgbWluaW11bVdhaXQ7XHJcbiAgICAgICAgdGhpcy5vblNhdmVTdGF0dXNVcGRhdGVkLmZpcmUoZXJyb3IgPyBUaW1lbG9nU2F2ZVN0YXR1cy5FcnJvciA6IFRpbWVsb2dTYXZlU3RhdHVzLlNhdmVkKTtcclxuICAgICAgICB0aGlzLnNhdmluZyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldEFkanVzdGVkRGF0ZUJhbGFuY2VzKHZhbHVlOiBUaW1lbG9nRmxleEFkanVzdG1lbnRbXSlcclxuICAgIHtcclxuICAgICAgICB2YWx1ZSA9IFsuLi52YWx1ZV0uc29ydCgoYSwgYikgPT4gYS5hcHBsaWVkT24gLSBiLmFwcGxpZWRPbik7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0bF9hZGp1c3RlZF9kYXRlX2JhbGFuY2VzXCIsIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGdldEFkanVzdGVkRGF0ZUJhbGFuY2VzKCk6IFRpbWVsb2dGbGV4QWRqdXN0bWVudFtdXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0bF9hZGp1c3RlZF9kYXRlX2JhbGFuY2VzXCIpID8/IFwiW11cIik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZml4T3ZlcmR1ZUZsZXhCYWxhbmNlKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBiYWxhbmNlID0gYXdhaXQgdGhpcy5nZXRGbGV4U3RhdHVzKCk7XHJcbiAgICAgICAgY29uc3QgYWRqdXN0bWVudCA9IHRoaXMuZ2V0QWRqdXN0ZWREYXRlQmFsYW5jZXMoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2YgYmFsYW5jZS5vdmVyZHVlRGF0ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhZGp1c3RtZW50LnB1c2goeyBkYXRlOiBkYXRlLmRhdGUsIGFkanVzdG1lbnQ6IC1OdW1iZXJzLnJvdW5kKGRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlLCAzKSwgYXBwbGllZE9uOiBEYXRlcy5wYXJzZShEYXRlcy5mb3JtYXQoRGF0ZS5ub3coKSwgZmFsc2UpKSA/PyAwIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldEFkanVzdGVkRGF0ZUJhbGFuY2VzKGFkanVzdG1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRGbGV4UG9saWN5KClcclxuICAgIHtcclxuICAgICAgICByZXR1cm4geyBwcmV2aW91c0RheXNJbmNsdWRlZDogNyAqIDQsIGZsZXhXYXJuaW5nVGhyZXNob2xkOiA3ICogMyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBjbGVhclNoZWV0QmFsYW5jZUNhY2hlKClcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2hlZXRzKSByZXR1cm47XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNoZWV0cy5sZW5ndGg7IGkrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHNbaV07XHJcbiAgICAgICAgICAgIGlmICghc2hlZXQpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBjb25zdCBjYWNoZUtleSA9IGB0bF9jYWNoZWRfaG91cl9iYWxhbmNlc18ke3NoZWV0LmlkfWA7XHJcbiAgICAgICAgICAgIGlmIChzaGVldC5sb2NrZWQgJiYgd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGNhY2hlS2V5KSAhPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGNhY2hlS2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGdldENhY2hlZEJhbGFuY2VzKCk6IFByb21pc2U8UmVjb3JkPHN0cmluZywgVGltZWxvZ0ZsZXhEYXRlW10+PlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0czogUmVjb3JkPHN0cmluZywgVGltZWxvZ0ZsZXhEYXRlW10+ID0ge307XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnNoZWV0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHNbaV07XHJcbiAgICAgICAgICAgIGlmICghc2hlZXQpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgbGV0IHNoZWV0QmFsYW5jZXM6IHsgZGF0ZTogbnVtYmVyLCBiYWxhbmNlOiBudW1iZXIgfVtdID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gYHRsX2NhY2hlZF9ob3VyX2JhbGFuY2VzXyR7c2hlZXQuaWR9YDtcclxuICAgICAgICAgICAgaWYgKHNoZWV0LmxvY2tlZCAmJiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oY2FjaGVLZXkpICE9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzaGVldEJhbGFuY2VzID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oY2FjaGVLZXkpID8/IFwiW11cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hlZXQuZGF0ZXMubGVuZ3RoIDwgMSkgYXdhaXQgdGhpcy5mZXRjaFNoZWV0KHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgICAgIGlmIChzaGVldC5kYXRlcy5zb21lKGQgPT4gZC5lbnRyaWVzLmxlbmd0aCA+IDAgJiYgZC5lbnRyaWVzLnNvbWUoZSA9PiBlLmxlbmd0aEhvdXJzID4gMCkpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGF5IG9mIHNoZWV0LmRhdGVzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG90ZW50aWFsSG91cnMgPSBkYXkud2Vla2VuZCA/IDAgOiBzaGVldC5ob3Vyc1BlckRheTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29ya2VkSG91cnMgPSBOdW1iZXJzLnN1bShkYXkuZW50cmllcy5tYXAoZSA9PiBlLmxlbmd0aEhvdXJzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhbGFuY2UgPSB3b3JrZWRIb3VycyAtIHBvdGVudGlhbEhvdXJzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGVldEJhbGFuY2VzLnB1c2goeyBkYXRlOiBkYXkuZGF0ZSwgYmFsYW5jZSB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChzaGVldC5sb2NrZWQgJiYgc2hlZXQuaWQgPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShjYWNoZUtleSwgSlNPTi5zdHJpbmdpZnkoc2hlZXRCYWxhbmNlcykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNoZWV0c1tzaGVldC5pZC50b1N0cmluZygpXSA9IHNoZWV0QmFsYW5jZXMubWFwKGQgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiBkLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZVN0cmluZzogRGF0ZXMuZm9ybWF0KGQuZGF0ZSwgZmFsc2UpLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWxCYWxhbmNlOiBkLmJhbGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhbGxvY2F0ZWRCYWxhbmNlOiBOdW1iZXJzLnJvdW5kKGQuYmFsYW5jZSwgMylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkuc29ydCgoYSwgYikgPT4gYS5kYXRlIC0gYi5kYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNoZWV0cztcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBnZXRGbGV4U3RhdHVzKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBwb2xpY3kgPSB0aGlzLmdldEZsZXhQb2xpY3koKTtcclxuXHJcbiAgICAgICAgY29uc3QgY3VycmVudERhdGVUaW1lID0gRGF0ZXMucGFyc2UoRGF0ZXMuZm9ybWF0KERhdGUubm93KCksIGZhbHNlKSkgPz8gMDtcclxuICAgICAgICBjb25zdCBvdmVyZHVlRGF0ZVRpbWUgPSBEYXRlcy5wYXJzZShEYXRlcy5mb3JtYXQoY3VycmVudERhdGVUaW1lIC0gKDEwMDAgKiA2MCAqIDYwICogMjQgKiAocG9saWN5LnByZXZpb3VzRGF5c0luY2x1ZGVkIC0gMSkpLCBmYWxzZSkpID8/IDA7XHJcbiAgICAgICAgY29uc3Qgd2FybmluZ0RhdGVUaW1lID0gRGF0ZXMucGFyc2UoRGF0ZXMuZm9ybWF0KGN1cnJlbnREYXRlVGltZSAtICgxMDAwICogNjAgKiA2MCAqIDI0ICogKHBvbGljeS5mbGV4V2FybmluZ1RocmVzaG9sZCAtIDEpKSwgZmFsc2UpKSA/PyAwO1xyXG5cclxuICAgICAgICBjb25zdCBhbGxEYXRlczogVGltZWxvZ0ZsZXhEYXRlW10gPSBbXTtcclxuICAgICAgICBsZXQgYmFsYW5jZTogbnVtYmVyID0gMDtcclxuICAgICAgICBpZiAoISF0aGlzLnNoZWV0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGF3YWl0IFdhaXQudW50aWwoKCkgPT4gIXRoaXMuY2FsY3VsYXRpbmdGbGV4KTtcclxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGluZ0ZsZXggPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2hlZXRzID0gYXdhaXQgdGhpcy5nZXRDYWNoZWRCYWxhbmNlcygpO1xyXG5cclxuICAgICAgICAgICAgLy9DYWxjdWxhdGUgcmVtYWluaW5nIGJhbGFuY2VzIC8gY2FuY2VsbGVkIG91dCBiYWxhbmNlc1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5zaGVldHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNoZWV0ID0gc2hlZXRzW3RoaXMuc2hlZXRzW2ldLmlkXTtcclxuICAgICAgICAgICAgICAgIGlmIChzaGVldCkgYWxsRGF0ZXMucHVzaCguLi5zaGVldCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vQWRqdXN0bWVudHMgYXBwbGllZCB0byBcImZvcmdldFwiIGFib3V0IHByZXZpb3VzIHVuYmFsYW5jZWQgZmxleFxyXG4gICAgICAgICAgICBjb25zdCBhZGp1c3RtZW50cyA9IFsuLi50aGlzLmdldEFkanVzdGVkRGF0ZUJhbGFuY2VzKCldO1xyXG5cclxuICAgICAgICAgICAgLy9SdW4gdGhlIHJlYWxsb2NhdGlvbiBhbGdvcml0aG1cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxEYXRlcy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGFsbERhdGVzW2ldO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlID09PSAwKSBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2RGF0ZSA9IGFsbERhdGVzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IE1hdGgubWluKE1hdGguYWJzKGRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlKSwgTWF0aC5hYnMocHJldkRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlIDwgMCAmJiBwcmV2RGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldkRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlIC09IGFtb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgKz0gYW1vdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSA+IDAgJiYgcHJldkRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlIDwgMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZEYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSArPSBhbW91bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlIC09IGFtb3VudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldkRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlID0gTnVtYmVycy5yb3VuZChwcmV2RGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UsIDMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgPSBOdW1iZXJzLnJvdW5kKGRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlLCAzKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChhZGp1c3RtZW50cy5sZW5ndGggPiAwICYmIGFkanVzdG1lbnRzWzBdLmFwcGxpZWRPbiA8IGRhdGUuZGF0ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5RGF0ZUFkanVzdG1lbnQoYWRqdXN0bWVudHNbMF0sIGFsbERhdGVzKTtcclxuICAgICAgICAgICAgICAgICAgICBhZGp1c3RtZW50cy5zcGxpY2UoMCwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChjb25zdCBhZGp1c3RtZW50IG9mIGFkanVzdG1lbnRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5RGF0ZUFkanVzdG1lbnQoYWRqdXN0bWVudCwgYWxsRGF0ZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFsbERhdGVzKTtcclxuICAgICAgICAgICAgYmFsYW5jZSA9IE51bWJlcnMuc3VtKGFsbERhdGVzLm1hcChkID0+IE51bWJlcnMucm91bmQoZC5yZWFsbG9jYXRlZEJhbGFuY2UsIDMpKSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0aW5nRmxleCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBiYWxhbmNlLFxyXG4gICAgICAgICAgICB1bmJhbGFuY2VkRGF0ZXM6IGFsbERhdGVzLmZpbHRlcihkID0+IGQucmVhbGxvY2F0ZWRCYWxhbmNlICE9PSAwKSxcclxuICAgICAgICAgICAgb3ZlcmR1ZURhdGVzOiBhbGxEYXRlcy5maWx0ZXIoZCA9PiBkLnJlYWxsb2NhdGVkQmFsYW5jZSAhPT0gMCAmJiBkLmRhdGUgPD0gb3ZlcmR1ZURhdGVUaW1lKSxcclxuICAgICAgICAgICAgd2FybmluZ0RhdGVzOiBhbGxEYXRlcy5maWx0ZXIoZCA9PiBkLnJlYWxsb2NhdGVkQmFsYW5jZSAhPT0gMCAmJiBkLmRhdGUgPD0gd2FybmluZ0RhdGVUaW1lICYmIGQuZGF0ZSA+IG92ZXJkdWVEYXRlVGltZSlcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhcHBseURhdGVBZGp1c3RtZW50KGFkanVzdG1lbnQ6IFRpbWVsb2dGbGV4QWRqdXN0bWVudCwgYWxsRGF0ZXM6IFRpbWVsb2dGbGV4RGF0ZVtdKVxyXG4gICAge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsRGF0ZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBhZGp1c3RlZERhdGUgPSBhbGxEYXRlc1tpXTtcclxuICAgICAgICAgICAgaWYgKGFkanVzdGVkRGF0ZS5kYXRlID09PSBhZGp1c3RtZW50LmRhdGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGFkanVzdGVkRGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgKz0gYWRqdXN0bWVudC5hZGp1c3RtZW50O1xyXG4gICAgICAgICAgICAgICAgYWRqdXN0ZWREYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSA9IE51bWJlcnMucm91bmQoYWRqdXN0ZWREYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSwgMyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBSZWFzb25FbmhhbmNlbWVudHMgfSBmcm9tIFwiLi9SZWFzb25FbmhhbmNlbWVudHMvUmVhc29uc0VuaGFuY2VtZW50c1wiO1xyXG5pbXBvcnQgeyBUaW1lbG9nVUkgfSBmcm9tIFwiLi9UaW1lbG9nL1RpbWVsb2dVSVwiO1xyXG5pbXBvcnQgeyBNYXRlcmlhbEljb24gfSBmcm9tIFwiLi9VdGlscy9NYXRlcmlhbEljb25cIjtcclxuXHJcblxyXG5NYXRlcmlhbEljb24uaW5pdGlhbGl6ZSgpO1xyXG5uZXcgVGltZWxvZ1VJKCk7XHJcbm5ldyBSZWFzb25FbmhhbmNlbWVudHMoKTsiLCJpbXBvcnQgeyBIaUJvYlJlYXNvbiB9IGZyb20gXCIuLi9IaUJvYi9IaUJvYlR5cGVzXCI7XHJcbmltcG9ydCB7IERhdGVzIH0gZnJvbSBcIi4uL1V0aWxzL0RhdGVzXCI7XHJcbmltcG9ydCB7IEV2ZW50SGFuZGxlciB9IGZyb20gXCIuLi9VdGlscy9FdmVudEhhbmRsZXJcIjtcclxuaW1wb3J0IHsgTWF0ZXJpYWxJY29uIH0gZnJvbSBcIi4uL1V0aWxzL01hdGVyaWFsSWNvblwiO1xyXG5pbXBvcnQgeyBOdW1iZXJzIH0gZnJvbSBcIi4uL1V0aWxzL051bWJlcnNcIjtcclxuaW1wb3J0IHsgV2FpdCB9IGZyb20gXCIuLi9VdGlscy9XYWl0XCI7XHJcbmltcG9ydCB7IFRpbWVsb2dDc3MgfSBmcm9tIFwiLi9UaW1lbG9nQ3NzXCI7XHJcbmltcG9ydCB7IFRpbWVsb2dNb2RlbCB9IGZyb20gXCIuL1RpbWVsb2dNb2RlbFwiO1xyXG5pbXBvcnQgeyBUaW1lbG9nRGF0ZSwgVGltZWxvZ0VudHJ5LCBUaW1lbG9nU2F2ZVN0YXR1cywgVGltZWxvZ1NoZWV0LCBUaW1lbG9nVUlEYXRlIGFzIFRpbWVsb2dVSURhdGVDb250YWluZXIsIFRpbWVsb2dVSVdlZWtTdW0gfSBmcm9tIFwiLi9UaW1lbG9nVHlwZXNcIjtcclxuXHJcbmRlY2xhcmUgdmFyIEhJQk9CX1VUSUxTX1ZFUjogc3RyaW5nO1xyXG5kZWNsYXJlIHZhciBISUJPQl9VVElMU19DSEFOR0VMT0c6IHsgdmVyc2lvbjogc3RyaW5nLCB0ZXh0OiBzdHJpbmdbXSB9W107XHJcblxyXG5leHBvcnQgY2xhc3MgVGltZWxvZ1VJXHJcbntcclxuICAgIHByaXZhdGUgdGltZWxvZ1VJT3V0ZXI/OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByaXZhdGUgdGltZWxvZ1VJSW5uZXI/OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByaXZhdGUgdG9nZ2xlQnV0dG9uPzogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGRhcmtNb2RlQnV0dG9uPzogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIG1vZGVsPzogVGltZWxvZ01vZGVsO1xyXG5cclxuICAgIHByaXZhdGUgc2hlZXREcm9wZG93bj86IEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBzaGVldERyb3Bkb3duT3B0aW9uczogeyBzaGVldDogVGltZWxvZ1NoZWV0LCBlbGVtZW50OiBIVE1MT3B0aW9uRWxlbWVudCB9W10gPSBbXTtcclxuICAgIHByaXZhdGUgc2VsZWN0ZWRTaGVldD86IFRpbWVsb2dTaGVldDtcclxuXHJcbiAgICBwcml2YXRlIHNoZWV0Q29udGFpbmVyPzogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHNoZWV0RGF0ZXM6IFRpbWVsb2dVSURhdGVDb250YWluZXJbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSB3ZWVrU3VtczogVGltZWxvZ1VJV2Vla1N1bVtdID0gW107XHJcbiAgICBwcml2YXRlIHNhdmVTdGF0dXM/OiBIVE1MU3BhbkVsZW1lbnQ7XHJcblxyXG4gICAgcHJpdmF0ZSBiYWxhbmNlTGFiZWw/OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByaXZhdGUgYmFsYW5jZVdhcm5pbmc/OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByaXZhdGUgZml4QmFsYW5jZUJ1dHRvbj86IEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuICAgIHByaXZhdGUgcmVhc29uczogSGlCb2JSZWFzb25bXSA9IFtdO1xyXG5cclxuICAgIHByaXZhdGUgb25EYXJrTW9kZUNoYW5nZSA9IG5ldyBFdmVudEhhbmRsZXI8Ym9vbGVhbj4oKTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKVxyXG4gICAge1xyXG4gICAgICAgICh3aW5kb3cgYXMgYW55KS50aW1lbG9nID0gdGhpcztcclxuICAgICAgICB0aGlzLmFkZEJ1dHRvbigpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBhZGRCdXR0b24oKVxyXG4gICAge1xyXG4gICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImRpdi5hcHAtY29udGVudCA+IGFwcC10b3AtYmFyLmFwcC10b3AtYmFyID4gZGl2LmFjdGlvbnNcIik7XHJcbiAgICAgICAgICAgIGlmICghcGFyZW50KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBXYWl0LmZvcigxKTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtdG9nZ2xlLWJ0blwiO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwic2VudGltZW50X3Zlcnlfc2F0aXNmaWVkXCIpKTtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24udGl0bGUgPSBcIkhpQm9iIFV0aWxpdGllc1wiO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy50b2dnbGVWaXNpYmxlKCk7XHJcbiAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLnRvZ2dsZUJ1dHRvbik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVVJKCk7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZU1vZGVsKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAobG9jYXRpb24uaGFzaCA9PT0gXCIjdGwtdWlcIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMub25EYXJrTW9kZUNoYW5nZS5maXJlKHRoaXMuaXNEYXJrTW9kZSgpKTtcclxuXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgdG9nZ2xlVmlzaWJsZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRpbWVsb2dVSU91dGVyKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHRoaXMudGltZWxvZ1VJT3V0ZXIuc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVsb2dVSU91dGVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSBcIiN0bC11aVwiO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hlZXRDb250YWluZXIpIHRoaXMuc2hlZXRDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbD8uZmV0Y2hTaGVldHMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSBcIlwiO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJpbml0aWFsXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBpc0RhcmtNb2RlKClcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0bF9kYXJrX21vZGVcIikgPT09IFwidHJ1ZVwiO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSB0b2dnbGVEYXJrTW9kZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEYXJrTW9kZSgpKSBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRsX2RhcmtfbW9kZVwiLCBcImZhbHNlXCIpO1xyXG4gICAgICAgIGVsc2UgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0bF9kYXJrX21vZGVcIiwgXCJ0cnVlXCIpO1xyXG4gICAgICAgIHRoaXMub25EYXJrTW9kZUNoYW5nZS5maXJlKHRoaXMuaXNEYXJrTW9kZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVVJKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcclxuICAgICAgICBzdHlsZS5pbm5lckhUTUwgPSBUaW1lbG9nQ3NzO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3R5bGUpO1xyXG5cclxuICAgICAgICB0aGlzLnRpbWVsb2dVSU91dGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSU91dGVyLmNsYXNzTmFtZSA9IFwidGwtdWlcIjtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSU91dGVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZCh0aGlzLnRpbWVsb2dVSU91dGVyKTtcclxuXHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5jbGFzc05hbWUgPSBcInRsLXVpLWlubmVyXCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlci5hcHBlbmQodGhpcy50aW1lbG9nVUlJbm5lcik7XHJcblxyXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLWNsb3NlLWJ0blwiO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJjbG9zZVwiKSk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMudG9nZ2xlVmlzaWJsZSgpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xyXG5cclxuICAgICAgICB0aGlzLmRhcmtNb2RlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICB0aGlzLmRhcmtNb2RlQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtZGFyay1tb2RlLWJ0blwiO1xyXG4gICAgICAgIHRoaXMuZGFya01vZGVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMudG9nZ2xlRGFya01vZGUoKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZENoaWxkKHRoaXMuZGFya01vZGVCdXR0b24pO1xyXG4gICAgICAgIHRoaXMub25EYXJrTW9kZUNoYW5nZS5vbigoZGFyaykgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkYXJrKSB0aGlzLnRpbWVsb2dVSU91dGVyPy5jbGFzc0xpc3QuYWRkKFwidGwtZGFya1wiKTtcclxuICAgICAgICAgICAgZWxzZSB0aGlzLnRpbWVsb2dVSU91dGVyPy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtZGFya1wiKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGFya01vZGVCdXR0b24pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGFya01vZGVCdXR0b24uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGFya01vZGVCdXR0b24uYXBwZW5kKGRhcmsgPyBNYXRlcmlhbEljb24uZ2V0KFwibGlnaHRfbW9kZVwiKSA6IE1hdGVyaWFsSWNvbi5nZXQoXCJkYXJrX21vZGVcIikpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2V0dGluc1dpbmRvdyA9IHRoaXMuY3JlYXRlU2V0dGluZ3NXaW5kb3coKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZENoaWxkKHNldHRpbnNXaW5kb3cpO1xyXG5cclxuICAgICAgICBjb25zdCBzZXR0aW5nc0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgc2V0dGluZ3NCdXR0b24uYXBwZW5kKE1hdGVyaWFsSWNvbi5nZXQoXCJzZXR0aW5nc1wiLCB0cnVlKSk7XHJcbiAgICAgICAgc2V0dGluZ3NCdXR0b24uYXBwZW5kKFwiIFwiICsgSElCT0JfVVRJTFNfVkVSKTtcclxuICAgICAgICBzZXR0aW5nc0J1dHRvbi5jbGFzc05hbWUgPSBcInRsLXZlcnNpb24tbnVtYmVyXCI7XHJcbiAgICAgICAgc2V0dGluZ3NCdXR0b24ub25jbGljayA9ICgpID0+IHNldHRpbnNXaW5kb3cuY2xhc3NMaXN0LnJlbW92ZShcInRsLXNldHRpbmdzLWhpZGRlblwiKTtcclxuICAgICAgICBzZXR0aW5nc0J1dHRvbi5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcclxuICAgICAgICBzZXR0aW5nc0J1dHRvbi5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9IFwidW5kZXJsaW5lXCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZChzZXR0aW5nc0J1dHRvbik7XHJcblxyXG5cclxuICAgICAgICBjb25zdCBzaGVldERyb3Bkb3duTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICBzaGVldERyb3Bkb3duTGFiZWwuaW5uZXJUZXh0ID0gXCJTaGVldDpcIjtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZENoaWxkKHNoZWV0RHJvcGRvd25MYWJlbCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2hlZXREcm9wZG93biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgdGhpcy5zaGVldERyb3Bkb3duLmNsYXNzTmFtZSA9IFwidGwtc2hlZXQtc2VsZWN0XCI7XHJcbiAgICAgICAgdGhpcy5zaGVldERyb3Bkb3duLm9uY2hhbmdlID0gKCkgPT4gdGhpcy5vblNlbGVjdGVkU2hlZXRDaGFuZ2UoKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZENoaWxkKHRoaXMuc2hlZXREcm9wZG93bik7XHJcblxyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXR1cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc05hbWUgPSBcInRsLXNhdmUtc3RhdHVzXCI7XHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm9uU2F2ZVN0YXR1c0NsaWNrKCk7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmQodGhpcy5zYXZlU3RhdHVzKTtcclxuXHJcbiAgICAgICAgY29uc3QgYmFsYW5jZVBhcmVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgYmFsYW5jZVBhcmVudC5jbGFzc05hbWUgPSBcInRsLWJhbGFuY2VcIjtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZChiYWxhbmNlUGFyZW50KTtcclxuXHJcbiAgICAgICAgdGhpcy5iYWxhbmNlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuYmFsYW5jZUxhYmVsLmlubmVyVGV4dCA9IFwiQmFsYW5jZTogXCI7XHJcbiAgICAgICAgdGhpcy5iYWxhbmNlTGFiZWwuY2xhc3NOYW1lID0gXCJ0bC1iYWxhbmNlLWxhYmVsXCI7XHJcbiAgICAgICAgYmFsYW5jZVBhcmVudC5hcHBlbmQodGhpcy5iYWxhbmNlTGFiZWwpO1xyXG5cclxuICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nLmNsYXNzTmFtZSA9IFwidGwtYmFsYW5jZS13YXJuaW5nIHRsLXdhcm5pbmcgdGwtaGlkZGVuXCI7XHJcbiAgICAgICAgYmFsYW5jZVBhcmVudC5hcHBlbmQodGhpcy5iYWxhbmNlV2FybmluZyk7XHJcblxyXG4gICAgICAgIHRoaXMuZml4QmFsYW5jZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgdGhpcy5maXhCYWxhbmNlQnV0dG9uLmFwcGVuZChNYXRlcmlhbEljb24uZ2V0KFwiYnVpbGRcIiwgdHJ1ZSkpO1xyXG4gICAgICAgIHRoaXMuZml4QmFsYW5jZUJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLWZpeC1iYWxhbmNlLWJ1dHRvbiB0bC1oaWRkZW5cIjtcclxuICAgICAgICB0aGlzLmZpeEJhbGFuY2VCdXR0b24uYXBwZW5kKFwiIEZpeFwiKTtcclxuICAgICAgICB0aGlzLmZpeEJhbGFuY2VCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuZml4QmFsYW5jZSgpO1xyXG4gICAgICAgIGJhbGFuY2VQYXJlbnQuYXBwZW5kKHRoaXMuZml4QmFsYW5jZUJ1dHRvbik7XHJcblxyXG5cclxuXHJcbiAgICAgICAgdGhpcy5zaGVldENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5zaGVldENvbnRhaW5lci5jbGFzc05hbWUgPSBcInRsLXNoZWV0XCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZCh0aGlzLnNoZWV0Q29udGFpbmVyKTtcclxuXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNyZWF0ZVNldHRpbmdzV2luZG93KClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IFwidGwtc2V0dGluZ3MgdGwtc2V0dGluZ3MtaGlkZGVuXCI7XHJcbiAgICAgICAgY29uc3QgYmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgYmFjay5jbGFzc05hbWUgPSBcInRsLXNldHRpbmdzLWJhY2tcIjtcclxuICAgICAgICBlbGVtZW50LmFwcGVuZChiYWNrKTtcclxuICAgICAgICBiYWNrLm9uY2xpY2sgPSAoKSA9PiBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0bC1zZXR0aW5ncy1oaWRkZW5cIik7XHJcblxyXG4gICAgICAgIGNvbnN0IGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBpbm5lci5jbGFzc05hbWUgPSBcInRsLXNldHRpbmdzLWlubmVyXCI7XHJcbiAgICAgICAgZWxlbWVudC5hcHBlbmQoaW5uZXIpO1xyXG5cclxuICAgICAgICBjb25zdCBzZXR0aW5nc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHNldHRpbmdzRWxlbWVudC5jbGFzc05hbWUgPSBcInRsLXNldHRpbmdzLXZlcnNpb25cIjtcclxuICAgICAgICBpbm5lci5hcHBlbmQoc2V0dGluZ3NFbGVtZW50KTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVsb2FkTG9ja2VkU2hlZXRzQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICByZWxvYWRMb2NrZWRTaGVldHNCdXR0b24uY2xhc3NOYW1lID0gXCJ0bC1zZXR0aW5ncy1yZWxvYWQtbG9ja2VkLXNoZWV0cy1idXR0b25cIjtcclxuICAgICAgICByZWxvYWRMb2NrZWRTaGVldHNCdXR0b24uYXBwZW5kKE1hdGVyaWFsSWNvbi5nZXQoXCJjYWNoZWRcIikpO1xyXG4gICAgICAgIHJlbG9hZExvY2tlZFNoZWV0c0J1dHRvbi5hcHBlbmQoXCIgUmVsb2FkIExvY2tlZCBTaGVldHNcIik7XHJcbiAgICAgICAgcmVsb2FkTG9ja2VkU2hlZXRzQnV0dG9uLnN0eWxlLmN1cnNvciA9IFwiaGVscFwiO1xyXG4gICAgICAgIHJlbG9hZExvY2tlZFNoZWV0c0J1dHRvbi50aXRsZSA9IFwiUmVjYWxjdWxhdGVzIGZsZXggYmFsYW5jZSBmb3IgYWxsIGxvY2tlZCBzaGVldHMuXCI7XHJcbiAgICAgICAgcmVsb2FkTG9ja2VkU2hlZXRzQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm1vZGVsPy5jbGVhclNoZWV0QmFsYW5jZUNhY2hlKCkudGhlbigoKSA9PiB0aGlzLnVwZGF0ZUJhbGFuY2UoKSk7XHJcbiAgICAgICAgc2V0dGluZ3NFbGVtZW50LmFwcGVuZENoaWxkKHJlbG9hZExvY2tlZFNoZWV0c0J1dHRvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc2V0Q2FuY2VsbGVkRmxleEhvdXJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICByZXNldENhbmNlbGxlZEZsZXhIb3Vycy5jbGFzc05hbWUgPSBcInRsLXNldHRpbmdzLXJlc2V0LWNhbmNlbGxlZC1mbGV4LWJ1dHRvblwiO1xyXG4gICAgICAgIHJlc2V0Q2FuY2VsbGVkRmxleEhvdXJzLmFwcGVuZChNYXRlcmlhbEljb24uZ2V0KFwic2V0dGluZ3NfYmFja3VwX3Jlc3RvcmVcIikpO1xyXG4gICAgICAgIHJlc2V0Q2FuY2VsbGVkRmxleEhvdXJzLmFwcGVuZChcIiBSZXNldCBDYW5jZWxsZWQgRmxleFwiKTtcclxuICAgICAgICByZXNldENhbmNlbGxlZEZsZXhIb3Vycy5zdHlsZS5jdXJzb3IgPSBcImhlbHBcIjtcclxuICAgICAgICByZXNldENhbmNlbGxlZEZsZXhIb3Vycy50aXRsZSA9IFwiUmVzZXRzIGFueSBmbGV4IGhvdXIgd2hpY2ggeW91J3JlIHByZXZpb3VzbHkgY2FuY2VsbGVkIGZvciBiZWluZyBvdmVyZHVlLlwiO1xyXG4gICAgICAgIHJlc2V0Q2FuY2VsbGVkRmxleEhvdXJzLm9uY2xpY2sgPSAoKSA9PiB7IHRoaXMubW9kZWw/LnNldEFkanVzdGVkRGF0ZUJhbGFuY2VzKFtdKTsgdGhpcy51cGRhdGVCYWxhbmNlKCkgfTtcclxuICAgICAgICBzZXR0aW5nc0VsZW1lbnQuYXBwZW5kQ2hpbGQocmVzZXRDYW5jZWxsZWRGbGV4SG91cnMpO1xyXG5cclxuICAgICAgICBjb25zdCBjaGFuZ2Vsb2cgPSBISUJPQl9VVElMU19DSEFOR0VMT0c7XHJcbiAgICAgICAgZm9yIChjb25zdCB2ZXJzaW9uIG9mIGNoYW5nZWxvZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgdmVyc2lvbkVsZW1lbnQuY2xhc3NOYW1lID0gXCJ0bC1zZXR0aW5ncy12ZXJzaW9uXCI7XHJcbiAgICAgICAgICAgIGlubmVyLmFwcGVuZCh2ZXJzaW9uRWxlbWVudCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb25UaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIHZlcnNpb25UaXRsZS5jbGFzc05hbWUgPSBcInRsLXNldHRpbmdzLXRpdGxlXCI7XHJcbiAgICAgICAgICAgIHZlcnNpb25UaXRsZS5pbm5lclRleHQgPSB2ZXJzaW9uLnZlcnNpb247XHJcbiAgICAgICAgICAgIHZlcnNpb25FbGVtZW50LmFwcGVuZCh2ZXJzaW9uVGl0bGUpO1xyXG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xyXG4gICAgICAgICAgICBsaXN0LmNsYXNzTmFtZSA9IFwidGwtc2V0dGluZ3MtbGlzdFwiO1xyXG4gICAgICAgICAgICB2ZXJzaW9uRWxlbWVudC5hcHBlbmQobGlzdCk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdGV4dCBvZiB2ZXJzaW9uLnRleHQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gICAgICAgICAgICAgICAgdGV4dEVsZW1lbnQuaW5uZXJUZXh0ID0gdGV4dDtcclxuICAgICAgICAgICAgICAgIGxpc3QuYXBwZW5kKHRleHRFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlTW9kZWwoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGVsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5vbkRhdGVVcGRhdGVkLm9mZih0aGlzLm9uRGF0ZVVwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLm9uUmVhc29uc1VwZGF0ZWQub2ZmKHRoaXMub25SZWFzb25zVXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwub25TYXZlU3RhdHVzVXBkYXRlZC5vZmYodGhpcy5vblNhdmVTdGF0dXNVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5vblNoZWV0VXBkYXRlZC5vZmYodGhpcy5vblNoZWV0VXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwub25TaGVldHNVcGRhdGVkLm9mZih0aGlzLm9uU2hlZXRzVXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubW9kZWwgPSBuZXcgVGltZWxvZ01vZGVsKCk7XHJcbiAgICAgICAgdGhpcy5tb2RlbC5vbkRhdGVVcGRhdGVkLm9uKHRoaXMub25EYXRlVXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5tb2RlbC5vblJlYXNvbnNVcGRhdGVkLm9uKHRoaXMub25SZWFzb25zVXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5tb2RlbC5vblNhdmVTdGF0dXNVcGRhdGVkLm9uKHRoaXMub25TYXZlU3RhdHVzVXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5tb2RlbC5vblNoZWV0VXBkYXRlZC5vbih0aGlzLm9uU2hlZXRVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm1vZGVsLm9uU2hlZXRzVXBkYXRlZC5vbih0aGlzLm9uU2hlZXRzVXBkYXRlZCwgdGhpcyk7XHJcblxyXG4gICAgICAgIGF3YWl0IHRoaXMubW9kZWwuaW5pdGlhbGl6ZSgpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXREYXRlQ29udGFpbmVyKGRhdGE6IHsgc2hlZXQ6IFRpbWVsb2dTaGVldCwgZGF0ZTogVGltZWxvZ0RhdGUgfSlcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFNoZWV0ID09PSBkYXRhLnNoZWV0ICYmIHRoaXMuc2hlZXRDb250YWluZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgZGF0ZUNvbnRhaW5lciA9IHRoaXMuc2hlZXREYXRlcy5maW5kKGQgPT4gZC5kYXRlID09PSBkYXRhLmRhdGUpO1xyXG4gICAgICAgICAgICBpZiAoIWRhdGVDb250YWluZXIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIiksXHJcbiAgICAgICAgICAgICAgICAgICAgZW50cmllczogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhckJ1dHRvbjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKSxcclxuICAgICAgICAgICAgICAgICAgICBwYXN0ZUJ1dHRvbjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKSxcclxuICAgICAgICAgICAgICAgICAgICB3ZWVrZW5kRGVzY3JpcHRpb246IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNoZWV0RGF0ZXMucHVzaChkYXRlQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmNsYXNzTmFtZSA9IFwidGwtZGF0ZVwiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaGVldENvbnRhaW5lci5hcHBlbmRDaGlsZChkYXRlQ29udGFpbmVyLnBhcmVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG5ldyBEYXRlKGRhdGEuZGF0ZS5kYXRlKS5nZXREYXkoKSA9PT0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3ZWVrU2VwZXJhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgICAgICAgICB3ZWVrU2VwZXJhdG9yLmNsYXNzTmFtZSA9IFwidGwtd2Vlay1zZXBlcmF0b3JcIjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoZWV0Q29udGFpbmVyLmFwcGVuZENoaWxkKHdlZWtTZXBlcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmFwcGVuZChkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm1vZGVsPy5zZXRGYXZvcml0ZWREYXRlKGRhdGEuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uY2xhc3NOYW1lID0gXCJ0bC1zdGFyLWJ1dHRvbiB0bC1zaG93LW9uLWhvdmVyXCI7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24udGl0bGUgPSBcIkZhdm9yaXRlIERheVwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIudGl0bGUuY2xhc3NOYW1lID0gXCJ0bC1kYXRlLWxhYmVsXCI7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnRpdGxlLmlubmVyVGV4dCA9IG5ldyBEYXRlKGRhdGEuZGF0ZS5kYXRlKS50b0RhdGVTdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGUud2Vla2VuZCkgZGF0ZUNvbnRhaW5lci50aXRsZS5jbGFzc0xpc3QuYWRkKFwidGwtZGF0ZS1sYWJlbC13ZWVrZW5kXCIpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kKGRhdGVDb250YWluZXIudGl0bGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIud2Vla2VuZERlc2NyaXB0aW9uLmNsYXNzTmFtZSA9IFwidGwtd2Vla2VuZC1kZXNjcmlwdGlvblwiO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kKGRhdGVDb250YWluZXIud2Vla2VuZERlc2NyaXB0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEuc2hlZXQubG9ja2VkKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJhZGRcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgYWRkLmNsYXNzTmFtZSA9IFwidGwtYWRkLWVudHJ5LWJ0biB0bC1zaG93LW9uLWhvdmVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm1vZGVsPy5uZXdFbnRyeShkYXRhLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmFwcGVuZChhZGQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJzd2l0Y2hfYWNjZXNzX3Nob3J0Y3V0X2FkZFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLnRpdGxlID0gXCJQYXN0ZSBmcm9tIEZhdm9yaXRlIERheVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24uY2xhc3NOYW1lID0gXCJ0bC1wYXN0ZS1idG4gdGwtc2hvdy1vbi1ob3ZlclwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMubW9kZWw/LnBhc3RlRnJvbVN0YXJyZWQoZGF0YS5kYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmQoZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFRvV2Vla1N1bShkYXRlQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZUNvbnRhaW5lcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGdldEVudHJ5Q29udGFpbmVyKGRhdGE6IHsgc2hlZXQ6IFRpbWVsb2dTaGVldCwgZGF0ZTogVGltZWxvZ0RhdGUgfSwgZGF0ZUNvbnRhaW5lcjogVGltZWxvZ1VJRGF0ZUNvbnRhaW5lciwgZW50cnk6IFRpbWVsb2dFbnRyeSlcclxuICAgIHtcclxuICAgICAgICBsZXQgZW50cnlDb250YWluZXIgPSBkYXRlQ29udGFpbmVyLmVudHJpZXMuZmluZChwID0+IHAuZW50cnkgPT09IGVudHJ5KTtcclxuICAgICAgICBpZiAoIWVudHJ5Q29udGFpbmVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBlbnRyeSxcclxuICAgICAgICAgICAgICAgIHBhcmVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcclxuICAgICAgICAgICAgICAgIHN0YXJ0SG91cjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLFxyXG4gICAgICAgICAgICAgICAgZW5kSG91cjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXHJcbiAgICAgICAgICAgICAgICByZWFzb246IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIiksXHJcbiAgICAgICAgICAgICAgICBjb21tZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXHJcbiAgICAgICAgICAgICAgICBjb21tZW50QnV0dG9uOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpLFxyXG4gICAgICAgICAgICAgICAgbm9SZWFzb25XYXJuaW5nOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGRhdGVDb250YWluZXIuZW50cmllcy5wdXNoKGVudHJ5Q29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5jbGFzc05hbWUgPSBcInRsLWVudHJ5XCI7XHJcbiAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLnBhcmVudCk7XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5zdGFydEhvdXIudHlwZSA9IFwidGltZVwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5zdGFydEhvdXIuY2xhc3NOYW1lID0gXCJ0bC1lbnRyeS1zdGFydFwiO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zaGVldC5sb2NrZWQpIGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91ci5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91ci5vbmNoYW5nZSA9ICgpID0+IFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSBlbnRyeS5zdGFydEhvdXIgKyBlbnRyeS5sZW5ndGhIb3VycztcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWw/LmNoYW5nZVN0YXJ0SG91cihkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpLCBEYXRlcy5wYXJzZVRpbWVUb2hvdXJzKGVudHJ5Q29udGFpbmVyPy5zdGFydEhvdXIudmFsdWUgPz8gXCIwODowMFwiKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBOdW1iZXJzLnJvdW5kKGVuZCAtIGVudHJ5LnN0YXJ0SG91ciwgMik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsPy5jaGFuZ2VMZW5ndGhIb3VycyhkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpLCBsZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5zdGFydEhvdXIpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZW5kTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICAgICAgZW5kTGFiZWwuY2xhc3NOYW1lID0gXCJ0bC1lbmQtbGFiZWxcIlxyXG4gICAgICAgICAgICBlbmRMYWJlbC5pbm5lclRleHQgPSBcIi1cIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVuZExhYmVsKTtcclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmVuZEhvdXIudHlwZSA9IFwidGltZVwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5lbmRIb3VyLmNsYXNzTmFtZSA9IFwidGwtZW50cnktZW5kXCI7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnNoZWV0LmxvY2tlZCkgZW50cnlDb250YWluZXIuZW5kSG91ci5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmVuZEhvdXIub25jaGFuZ2UgPSAoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW50cnlDb250YWluZXI/LmVuZEhvdXIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gTnVtYmVycy5yb3VuZChEYXRlcy5wYXJzZVRpbWVUb2hvdXJzKGVudHJ5Q29udGFpbmVyLmVuZEhvdXIudmFsdWUpIC0gZW50cnkuc3RhcnRIb3VyLCAyKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGVsPy5jaGFuZ2VMZW5ndGhIb3VycyhkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpLCBsZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5lbmRIb3VyKTtcclxuXHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5yZWFzb24ub25jaGFuZ2UgPSAoKSA9PiB0aGlzLm1vZGVsPy5jaGFuZ2VSZWFzb24oZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgZW50cnlDb250YWluZXI/LnJlYXNvbi52YWx1ZSA/PyBcIlwiKTtcclxuICAgICAgICAgICAgaWYgKGRhdGEuc2hlZXQubG9ja2VkKSBlbnRyeUNvbnRhaW5lci5yZWFzb24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5yZWFzb24uY2xhc3NOYW1lID0gXCJ0bC1lbnRyeS1yZWFzb25cIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLnJlYXNvbik7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUmVhc29uc0Ryb3Bkb3duKGVudHJ5Q29udGFpbmVyLnJlYXNvbik7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGF0ZUNvbnRhaW5lci5lbnRyaWVzLmxlbmd0aCA9PT0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdW1Ib3VycyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdW1Ib3Vycy5jbGFzc05hbWUgPSBcInRsLXN1bS1ob3Vyc1wiO1xyXG4gICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZChkYXRlQ29udGFpbmVyLnN1bUhvdXJzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubGVuZ3RoLnR5cGUgPSBcIm51bWJlclwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5sZW5ndGguY2xhc3NOYW1lID0gXCJ0bC1lbnRyeS1sZW5ndGhcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubGVuZ3RoLnN0ZXAgPSBcIjAuMDFcIjtcclxuICAgICAgICAgICAgaWYgKGRhdGEuc2hlZXQubG9ja2VkKSBlbnRyeUNvbnRhaW5lci5sZW5ndGguZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5sZW5ndGgub25jaGFuZ2UgPSAoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsPy5jaGFuZ2VMZW5ndGhIb3VycyhkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpLCBwYXJzZUZsb2F0KGVudHJ5Q29udGFpbmVyPy5sZW5ndGgudmFsdWUgfHwgXCIwXCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICAgICAgZHVyYXRpb25MYWJlbC5jbGFzc05hbWUgPSBcInRsLWR1cmF0aW9uLWxhYmVsXCI7XHJcbiAgICAgICAgICAgIGR1cmF0aW9uTGFiZWwuaW5uZXJUZXh0ID0gXCJob3VyKHMpXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChkdXJhdGlvbkxhYmVsKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghZGF0YS5zaGVldC5sb2NrZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnRCdXR0b24uY2xhc3NOYW1lID0gXCJ0bC1hZGQtY29tbWVudC1idG4gdGwtc2hvdy1vbi1ob3ZlclwiO1xyXG4gICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8udG9nZ2xlQ29tbWVudChkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpKTtcclxuICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZW1vdmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJkZWxldGVcIikpO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlLmNsYXNzTmFtZSA9IFwidGwtcmVtb3ZlLWVudHJ5LWJ0biB0bC1zaG93LW9uLWhvdmVyXCI7XHJcbiAgICAgICAgICAgICAgICByZW1vdmUub25jbGljayA9ICgpID0+IHRoaXMubW9kZWw/LmRlbGV0ZUVudHJ5KGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSkpO1xyXG4gICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKHJlbW92ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLm5vUmVhc29uV2FybmluZy5hcHBlbmQoTWF0ZXJpYWxJY29uLmdldChcIndhcm5pbmdcIiwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5ub1JlYXNvbldhcm5pbmcuYXBwZW5kKFwiIE5vIHJlYXNvbiBzZWxlY3RlZCFcIik7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLm5vUmVhc29uV2FybmluZy5jbGFzc05hbWUgPSBcInRsLW5vLXJlYXNvbi13YXJuaW5nIHRsLXdhcm5pbmcgdGwtaGFzLXJlYXNvblwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIubm9SZWFzb25XYXJuaW5nKTtcclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQudHlwZSA9IFwidGV4dFwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50LnBsYWNlaG9sZGVyID0gXCJXcml0ZSBhIG5vdGUuLi5cIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC50aXRsZSA9IFwiV3JpdGUgYSBub3RlLi4uXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQuY2xhc3NOYW1lID0gXCJ0bC1lbnRyeS1jb21tZW50XCI7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnNoZWV0LmxvY2tlZCkgZW50cnlDb250YWluZXIuY29tbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQub25jaGFuZ2UgPSAoKSA9PiBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbD8uY2hhbmdlQ29tbWVudChkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpLCBlbnRyeUNvbnRhaW5lcj8uY29tbWVudC52YWx1ZSA/PyBcIlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIuY29tbWVudCk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZW50cnlDb250YWluZXI7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFkZFRvV2Vla1N1bShkYXRlOiBUaW1lbG9nVUlEYXRlQ29udGFpbmVyKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLndlZWtTdW1zLmxlbmd0aCA8IDEgfHwgbmV3IERhdGUoZGF0ZS5kYXRlLmRhdGUpLmdldERheSgpID09PSAwKSAvL0lmIHRoaXMgaXMgdGhlIGZpcnN0IGRheSwgb3IgYSBzdW5kYXksIGNyZWF0ZSBhIG5ldyB3ZWVrIGZvciBpdC5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHdlZWtTdW0gPSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlczogW2RhdGVdLFxyXG4gICAgICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB3ZWVrU3VtLmVsZW1lbnQuY2xhc3NOYW1lID0gXCJ0bC13ZWVrLXN1bVwiO1xyXG4gICAgICAgICAgICB0aGlzLndlZWtTdW1zLnB1c2god2Vla1N1bSk7XHJcbiAgICAgICAgICAgIGRhdGUucGFyZW50LmFwcGVuZENoaWxkKHdlZWtTdW0uZWxlbWVudCk7XHJcbiAgICAgICAgICAgIGRhdGUucGFyZW50LnN0eWxlLm1hcmdpblRvcCA9IFwiMzhweFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLndlZWtTdW1zW3RoaXMud2Vla1N1bXMubGVuZ3RoIC0gMV0uZGF0ZXMucHVzaChkYXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uRGF0ZVVwZGF0ZWQoZGF0YTogeyBzaGVldDogVGltZWxvZ1NoZWV0LCBkYXRlOiBUaW1lbG9nRGF0ZSB9KVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2hlZXQgPT09IGRhdGEuc2hlZXQgJiYgdGhpcy5zaGVldENvbnRhaW5lcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCBkYXRlQ29udGFpbmVyID0gdGhpcy5nZXREYXRlQ29udGFpbmVyKGRhdGEpO1xyXG4gICAgICAgICAgICBpZiAoZGF0ZUNvbnRhaW5lcilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBkYXRhLmRhdGUuZW50cmllcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZW50cnlDb250YWluZXIgPSB0aGlzLmdldEVudHJ5Q29udGFpbmVyKGRhdGEsIGRhdGVDb250YWluZXIsIGVudHJ5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuc3RhcnRIb3VyLnZhbHVlID0gRGF0ZXMuZm9ybWF0SG91cihlbnRyeS5zdGFydEhvdXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmxlbmd0aC52YWx1ZSA9IGVudHJ5Lmxlbmd0aEhvdXJzLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuZW5kSG91ci52YWx1ZSA9IERhdGVzLmZvcm1hdEhvdXIoZW50cnkuc3RhcnRIb3VyICsgZW50cnkubGVuZ3RoSG91cnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnJlYXNvbi52YWx1ZSA9IGVudHJ5LnJlYXNvbklkO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQudmFsdWUgPSBlbnRyeS5jb21tZW50ID8/IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIWVudHJ5LnJlYXNvbklkKSBlbnRyeUNvbnRhaW5lci5ub1JlYXNvbldhcm5pbmcuY2xhc3NMaXN0LmFkZChcInRsLWhhcy1yZWFzb25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBlbnRyeUNvbnRhaW5lci5ub1JlYXNvbldhcm5pbmcuY2xhc3NMaXN0LnJlbW92ZShcInRsLWhhcy1yZWFzb25cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnRCdXR0b24udGl0bGUgPSBlbnRyeS5oYXNDb21tZW50ID8gXCJSZW1vdmUgbm90ZVwiIDogXCJBZGQgbm90ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnRCdXR0b24uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoZW50cnkuaGFzQ29tbWVudCA/IFwic3BlYWtlcl9ub3Rlc19vZmZcIiA6IFwic3BlYWtlcl9ub3Rlc1wiKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeS5oYXNDb21tZW50KSBlbnRyeUNvbnRhaW5lci5wYXJlbnQuY2xhc3NMaXN0LmFkZChcInRsLWhhcy1jb21tZW50XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgZW50cnlDb250YWluZXIucGFyZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1oYXMtY29tbWVudFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZWRFbnRyaWVzID0gZGF0ZUNvbnRhaW5lci5lbnRyaWVzLmZpbHRlcihlbnRyeSA9PiAhZGF0YS5kYXRlLmVudHJpZXMuZmluZChlID0+IGUgPT09IGVudHJ5LmVudHJ5KSk7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLmVudHJpZXMgPSBkYXRlQ29udGFpbmVyLmVudHJpZXMuZmlsdGVyKGVudHJ5ID0+ICFyZW1vdmVkRW50cmllcy5pbmNsdWRlcyhlbnRyeSkpO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlZEVudHJpZXMuZm9yRWFjaChlID0+IGUucGFyZW50LnJlbW92ZSgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZUNvbnRhaW5lci5zdW1Ib3VycylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdW0gPSBOdW1iZXJzLnN1bShkYXRhLmRhdGUuZW50cmllcy5tYXAoZSA9PiBlLmxlbmd0aEhvdXJzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdW1Ib3Vycy5pbm5lclRleHQgPSBgJHtOdW1iZXJzLnJvdW5kKHN1bSwgMil9IGhvdXIke3N1bSA9PT0gMSA/IFwiXCIgOiBcInNcIn1gO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmRpc2FibGVkID0gZGF0YS5kYXRlLmZhdm9yaXRlZDtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwidGwtZmF2b3JpdGVcIik7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcInN0YXJcIiwgZGF0YS5kYXRlLmZhdm9yaXRlZCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0ZS5mYXZvcml0ZWQpIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwidGwtZmF2b3JpdGVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGVDb250YWluZXIuZW50cmllcy5sZW5ndGggPiAwIHx8IGRhdGVDb250YWluZXIuZGF0ZS5mYXZvcml0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwidGwtaGlkZS1mYXZvcml0ZS1idXR0b25cIik7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwidGwtaGlkZS1mYXZvcml0ZS1idXR0b25cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci50aXRsZS50aXRsZSA9IGRhdGEuZGF0ZS5kYXRlRGVzY3JpcHRpb24gPz8gXCJcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRlLndlZWtlbmQgJiYgZGF0YS5kYXRlLmVudHJpZXMubGVuZ3RoIDwgMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLndlZWtlbmREZXNjcmlwdGlvbi5jbGFzc0xpc3QucmVtb3ZlKFwidGwtd2Vla2VuZC1kZXNjcmlwdGlvbi1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci53ZWVrZW5kRGVzY3JpcHRpb24uaW5uZXJUZXh0ID0gZGF0YS5kYXRlLmRhdGVEZXNjcmlwdGlvbiA/PyBcIlwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIud2Vla2VuZERlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoXCJ0bC13ZWVrZW5kLWRlc2NyaXB0aW9uLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3Qgd2Vla1N1bSA9IHRoaXMud2Vla1N1bXMuZmluZCh3ID0+IHcuZGF0ZXMuc29tZShkID0+IGQuZGF0ZSA9PT0gZGF0YS5kYXRlKSk7XHJcbiAgICAgICAgICAgIGlmICh3ZWVrU3VtKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdW0gPSBOdW1iZXJzLnN1bSh3ZWVrU3VtLmRhdGVzLm1hcChkID0+IE51bWJlcnMuc3VtKGQuZW50cmllcy5tYXAoZSA9PiBlLmVudHJ5Lmxlbmd0aEhvdXJzKSkpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRheXMgPSB3ZWVrU3VtLmRhdGVzLmZpbHRlcihkID0+ICFkLmRhdGUud2Vla2VuZCkubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdG90YWxIb3VycyA9IGRhdGEuc2hlZXQuaG91cnNQZXJEYXkgKiBkYXlzO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd2Vla051bWJlciA9IERhdGVzLmdldFdlZWtOdW1iZXJGcm9tRGF0ZSh3ZWVrU3VtLmRhdGVzWzBdLmRhdGUuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB3ZWVrU3VtLmVsZW1lbnQuaW5uZXJIVE1MID0gYDxiPldlZWsgJHt3ZWVrTnVtYmVyfTwvYj46ICR7TnVtYmVycy5yb3VuZChzdW0sIDIpfSAvICR7TnVtYmVycy5yb3VuZCh0b3RhbEhvdXJzLCAyKX0gaG91cnNgO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudXBkYXRlQmFsYW5jZSgpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSB1cGRhdGVSZWFzb25zRHJvcGRvd24oc2VsZWN0OiBIVE1MU2VsZWN0RWxlbWVudClcclxuICAgIHtcclxuICAgICAgICBzZWxlY3QuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICBmb3IgKGNvbnN0IHJlYXNvbiBvZiB0aGlzLnJlYXNvbnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSByZWFzb24uc2VydmVySWQ7XHJcbiAgICAgICAgICAgIG9wdGlvbi5pbm5lclRleHQgPSByZWFzb24udmFsdWU7XHJcbiAgICAgICAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgb25SZWFzb25zVXBkYXRlZChyZWFzb25zOiBIaUJvYlJlYXNvbltdKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucmVhc29ucyA9IHJlYXNvbnM7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZGF0ZSBvZiB0aGlzLnNoZWV0RGF0ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGRhdGUuZW50cmllcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSZWFzb25zRHJvcGRvd24oZW50cnkucmVhc29uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgb25TYXZlU3RhdHVzVXBkYXRlZChzdGF0dXM6IFRpbWVsb2dTYXZlU3RhdHVzKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5zYXZlU3RhdHVzKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1zdWNjZXNzXCIpO1xyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtd2FybmluZ1wiKTtcclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NMaXN0LnJlbW92ZShcInRsLWNsaWNrYWJsZVwiKTtcclxuICAgICAgICBpZiAoc3RhdHVzID09PSBUaW1lbG9nU2F2ZVN0YXR1cy5TYXZlZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiY2xvdWRfZG9uZVwiLCB0cnVlKSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmQoXCIgU2F2ZWRcIik7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc0xpc3QuYWRkKFwidGwtc3VjY2Vzc1wiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gVGltZWxvZ1NhdmVTdGF0dXMuV2FpdGluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwicGVuZGluZ1wiKSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmQoXCIgUGVuZGluZy4uLlwiKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RhdHVzID09PSBUaW1lbG9nU2F2ZVN0YXR1cy5TYXZpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImNsb3VkX3VwbG9hZFwiKSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmQoXCIgU2F2aW5nLi4uXCIpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdGF0dXMgPT09IFRpbWVsb2dTYXZlU3RhdHVzLkVycm9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJjbG91ZF9vZmZcIikpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kKFwiIEZhaWxlZCFcIik7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc0xpc3QuYWRkKFwidGwtd2FybmluZ1wiKTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmNsYXNzTGlzdC5hZGQoXCJ0bC1jbGlja2FibGVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBvblNhdmVTdGF0dXNDbGljaygpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNhdmVTdGF0dXM/LmNsYXNzTGlzdC5jb250YWlucyhcInRsLWNsaWNrYWJsZVwiKSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMubW9kZWw/LnNhdmUoKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgb25TaGVldFVwZGF0ZWQoc2hlZXQ6IFRpbWVsb2dTaGVldClcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5zaGVldERyb3Bkb3duICYmICF0aGlzLnNoZWV0RHJvcGRvd25PcHRpb25zLmZpbmQocyA9PiBzLnNoZWV0ID09PSBzaGVldCkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSBzaGVldC5pZC50b1N0cmluZygpO1xyXG4gICAgICAgICAgICBvcHRpb24uaW5uZXJUZXh0ID0gYCR7bmV3IERhdGUoc2hlZXQuc3RhcnQpLnRvRGF0ZVN0cmluZygpfSAtICR7bmV3IERhdGUoc2hlZXQuZW5kKS50b0RhdGVTdHJpbmcoKX0ke3NoZWV0LmxvY2tlZCA/IFwiIChsb2NrZWQpXCIgOiBcIlwifWA7XHJcbiAgICAgICAgICAgIHRoaXMuc2hlZXREcm9wZG93bk9wdGlvbnMucHVzaCh7IHNoZWV0OiBzaGVldCwgZWxlbWVudDogb3B0aW9uIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd24uYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTaGVldCA9PT0gc2hlZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaGVldENvbnRhaW5lcikgdGhpcy5zaGVldENvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0RGF0ZXMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy53ZWVrU3VtcyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2Ygc2hlZXQuZGF0ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51cGRhdGVCYWxhbmNlKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uU2hlZXRzVXBkYXRlZChzaGVldHM6IFRpbWVsb2dTaGVldFtdKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLnNoZWV0RHJvcGRvd24pIHRoaXMuc2hlZXREcm9wZG93bi5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuc2hlZXREcm9wZG93bk9wdGlvbnMgPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHNoZWV0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMub25TaGVldFVwZGF0ZWQoc2hlZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9uU2VsZWN0ZWRTaGVldENoYW5nZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25TZWxlY3RlZFNoZWV0Q2hhbmdlKClcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2hlZXREcm9wZG93bikgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0aGlzLnNoZWV0Q29udGFpbmVyKSB0aGlzLnNoZWV0Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5zaGVldERhdGVzID0gW107XHJcbiAgICAgICAgY29uc3QgdmFsID0gdGhpcy5zaGVldERyb3Bkb3duLnZhbHVlO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTaGVldCA9IHRoaXMuc2hlZXREcm9wZG93bk9wdGlvbnMuZmluZChvID0+IG8uZWxlbWVudC52YWx1ZSA9PT0gdmFsKT8uc2hlZXQ7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTaGVldCAmJiB0aGlzLm1vZGVsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5mZXRjaFNoZWV0KHRoaXMuc2VsZWN0ZWRTaGVldC5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgdXBkYXRlQmFsYW5jZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLm1vZGVsIHx8ICF0aGlzLmJhbGFuY2VMYWJlbCB8fCAhdGhpcy5zZWxlY3RlZFNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgYmFsYW5jZSA9IGF3YWl0IHRoaXMubW9kZWwuZ2V0RmxleFN0YXR1cygpO1xyXG4gICAgICAgIGNvbnN0IHRvdGFsQmFsYW5jZSA9IE51bWJlcnMucm91bmQoYmFsYW5jZS5iYWxhbmNlLCAyKTtcclxuICAgICAgICB0aGlzLmJhbGFuY2VMYWJlbC5pbm5lclRleHQgPSBgRmxleDogJHt0b3RhbEJhbGFuY2V9IGhvdXIke3RvdGFsQmFsYW5jZSAhPSAxID8gXCJzXCIgOiBcIlwifSR7dG90YWxCYWxhbmNlID09PSAwID8gXCIg8J+ls1wiIDogXCJcIn1gO1xyXG5cclxuICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nPy5jbGFzc0xpc3QuYWRkKFwidGwtaGlkZGVuXCIpO1xyXG4gICAgICAgIHRoaXMuZml4QmFsYW5jZUJ1dHRvbj8uY2xhc3NMaXN0LmFkZChcInRsLWhpZGRlblwiKTtcclxuICAgICAgICBpZiAoYmFsYW5jZS5vdmVyZHVlRGF0ZXMubGVuZ3RoICsgYmFsYW5jZS53YXJuaW5nRGF0ZXMubGVuZ3RoID4gMCAmJiB0aGlzLmJhbGFuY2VXYXJuaW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgcG9saWN5ID0gdGhpcy5tb2RlbC5nZXRGbGV4UG9saWN5KCk7XHJcbiAgICAgICAgICAgIHRoaXMuYmFsYW5jZVdhcm5pbmcuY2xhc3NMaXN0LnJlbW92ZShcInRsLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZy5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nLmFwcGVuZChNYXRlcmlhbEljb24uZ2V0KFwid2FybmluZ1wiLCB0cnVlKSk7XHJcbiAgICAgICAgICAgIGlmIChiYWxhbmNlLm92ZXJkdWVEYXRlcy5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpeEJhbGFuY2VCdXR0b24/LmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nLmFwcGVuZChgWW91IGhhdmUgJHtiYWxhbmNlLm92ZXJkdWVEYXRlcy5sZW5ndGh9IHVuYmFsYW5jZWQgZmxleCBkYXRlJHtiYWxhbmNlLm92ZXJkdWVEYXRlcy5sZW5ndGggPT09IDEgPyBcIlwiIDogXCJzXCJ9IG9sZGVyIHRoYW4gJHtwb2xpY3kucHJldmlvdXNEYXlzSW5jbHVkZWR9IGRheXMhYCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nLnRpdGxlICs9IGBPdmVyZHVlIGRhdGVzOiAke2JhbGFuY2Uub3ZlcmR1ZURhdGVzLm1hcChkID0+IERhdGVzLmZvcm1hdChkLmRhdGUsIGZhbHNlKSkuam9pbihcIiwgXCIpfWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoYmFsYW5jZS53YXJuaW5nRGF0ZXMubGVuZ3RoID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZy5hcHBlbmQoYCR7YmFsYW5jZS53YXJuaW5nRGF0ZXMubGVuZ3RofSB1bmJhbGFuY2VkIGZsZXggZGF0ZSR7YmFsYW5jZS53YXJuaW5nRGF0ZXMubGVuZ3RoID09PSAxID8gXCJcIiA6IFwic1wifSB3aWxsIHNvb24gYmUgb2xkZXIgdGhhbiAke3BvbGljeS5wcmV2aW91c0RheXNJbmNsdWRlZH0gZGF5cyFgKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuYmFsYW5jZVdhcm5pbmcudGl0bGUgPSBcIlwiO1xyXG4gICAgICAgICAgICBpZiAoYmFsYW5jZS5vdmVyZHVlRGF0ZXMubGVuZ3RoID4gMCkgdGhpcy5iYWxhbmNlV2FybmluZy50aXRsZSArPSBgT3ZlcmR1ZSBkYXRlczogJHtiYWxhbmNlLm92ZXJkdWVEYXRlcy5tYXAoZCA9PiBEYXRlcy5mb3JtYXQoZC5kYXRlLCBmYWxzZSkpLmpvaW4oXCIsIFwiKX1gO1xyXG4gICAgICAgICAgICBpZiAoYmFsYW5jZS53YXJuaW5nRGF0ZXMubGVuZ3RoID4gMCkgdGhpcy5iYWxhbmNlV2FybmluZy50aXRsZSArPSBgJHt0aGlzLmJhbGFuY2VXYXJuaW5nLnRpdGxlLmxlbmd0aCA+IDAgPyBcIlxcblwiIDogXCJcIn1Tb29uIG92ZXJkdWUgZGF0ZXM6ICR7YmFsYW5jZS53YXJuaW5nRGF0ZXMubWFwKGQgPT4gRGF0ZXMuZm9ybWF0KGQuZGF0ZSwgZmFsc2UpKS5qb2luKFwiLCBcIil9YDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYmFsYW5jZVdhcm5pbmcuYXBwZW5kKFwiIFwiKTtcclxuICAgICAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZy5hcHBlbmQoTWF0ZXJpYWxJY29uLmdldChcImluZm9cIiwgZmFsc2UpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGZhdm9yaXRlID0gYXdhaXQgdGhpcy5tb2RlbC5nZXRGYXZvcml0ZWREYXRlKCk7XHJcbiAgICAgICAgaWYgKGZhdm9yaXRlKSB0aGlzLnNoZWV0Q29udGFpbmVyPy5jbGFzc0xpc3QuYWRkKFwidGwtaGFzLWZhdm9yaXRlXCIpO1xyXG4gICAgICAgIGVsc2UgdGhpcy5zaGVldENvbnRhaW5lcj8uY2xhc3NMaXN0LnJlbW92ZShcInRsLWhhcy1mYXZvcml0ZVwiKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgZml4QmFsYW5jZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCFjb25maXJtKGBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gY2FuY2VsIG91dCBhbGwgb3ZlcmR1ZSBmbGV4IHRpbWU/IFBsZWFzZSBjb29yaW5kYXRlIHdpdGggYSBzdXBlcnZpc29yIGJlZm9yZSB1c2luZyB0aGlzIGZlYXR1cmUuYCkpIHJldHVybjtcclxuICAgICAgICB0aGlzLm1vZGVsPy5maXhPdmVyZHVlRmxleEJhbGFuY2UoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUJhbGFuY2UoKTtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgY29uc3QgVGltZWxvZ0NzcyA9IGBcclxuLnRsLXRvZ2dsZS1idG5cclxue1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgYmFja2dyb3VuZDogbm9uZTtcclxuICAgIGZvbnQtc2l6ZTogMmVtO1xyXG59XHJcbi50bC1jbG9zZS1idG5cclxue1xyXG4gICAgZm9udC1zaXplOiAyZW07XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICByaWdodDogNXB4O1xyXG59XHJcbi50bC11aVxyXG57XHJcbiAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICB6LWluZGV4OiAxMDAwO1xyXG4gICAgaW5zZXQ6IDBweDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gICAgb3ZlcmZsb3cteTogc2Nyb2xsO1xyXG4gICAgcGFkZGluZzogMTBweDtcclxufSAgICAgICAgXHJcbi50bC1kYXRlXHJcbntcclxuICAgIG1hcmdpbi10b3A6IDEwcHg7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgZ3JheTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxufVxyXG4udGwtc2F2ZS1zdGF0dXMsIC50bC1hZGQtZW50cnktYnRuXHJcbntcclxuICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xyXG59XHJcbi50bC1lbnRyeVxyXG57XHJcbiAgICBtYXJnaW4tdG9wOiA1cHg7XHJcbn1cclxuLnRsLWVudHJ5ID4gKlxyXG57XHJcbiAgICBtYXJnaW4tbGVmdDogNXB4O1xyXG59XHJcbi50bC1lbnRyeSA+IGlucHV0W3R5cGU9bnVtYmVyXVxyXG57XHJcbiAgICB3aWR0aDogNTBweDtcclxufVxyXG4udGwtZW50cnkgPiBpbnB1dFt0eXBlPXRpbWVdXHJcbntcclxuICAgIHdpZHRoOiA3NXB4O1xyXG59XHJcbi50bC1zYXZlLXN0YXR1c1xyXG57XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG4udGwtc2hlZXQtc2VsZWN0XHJcbntcclxuICAgIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbn1cclxuLnRsLWRhdGUtbGFiZWxcclxue1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuLnRsLWRhdGUtbGFiZWwudGwtZGF0ZS1sYWJlbC13ZWVrZW5kXHJcbntcclxuICAgIGZvbnQtd2VpZ2h0OiBpbml0aWFsO1xyXG4gICAgZm9udC1zdHlsZTogaXRhbGljO1xyXG4gICAgY29sb3I6IGdyYXk7XHJcbn1cclxuLnRsLWVudHJ5LXJlYXNvbiBcclxue1xyXG4gICAgcGFkZGluZzogM3B4O1xyXG59XHJcbi50bC1yZW1vdmUtZW50cnktYnRuXHJcbntcclxuICAgIGZsb2F0OiByaWdodDtcclxufVxyXG4udGwtd2Vlay1zZXBlcmF0b3Jcclxue1xyXG4gICAgbWFyZ2luLXRvcDogNTdweDtcclxufVxyXG4udGwtYmFsYW5jZS1sYWJlbFxyXG57XHJcbiAgICBtYXJnaW46IDVweDtcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxufVxyXG4udGwtYmFsYW5jZS1oZWxwXHJcbntcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgIGN1cnNvcjogaGVscDtcclxufVxyXG5cclxuLnRsLXVpLWlubmVyXHJcbntcclxuICAgIGRpc3BsYXk6IHRhYmxlO1xyXG4gICAgbWFyZ2luLWxlZnQ6IGF1dG87XHJcbiAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XHJcbn1cclxuLnRsLXVpLWlubmVyLCAudGwtd2Vlay1zZXBlcmF0b3IsIC50bC1kYXRlXHJcbntcclxuICAgIG1pbi13aWR0aDogNjUwcHg7XHJcbn1cclxuLnRsLWVudHJ5LWNvbW1lbnQge1xyXG4gICAgbWFyZ2luLXRvcDogNXB4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTVweDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG4udGwtaGFzLWNvbW1lbnQgLnRsLWVudHJ5LWNvbW1lbnRcclxue1xyXG4gICAgZGlzcGxheTogYmxvY2s7XHJcbn1cclxuLnRsLXN1Y2Nlc3Ncclxue1xyXG4gICAgY29sb3I6ICMwMkI4NzU7XHJcbn1cclxuLnRsLXdhcm5pbmdcclxue1xyXG4gICAgY29sb3I6ICNGMEFGNTI7XHJcbn1cclxuLnRsLWRhbmdlclxyXG57XHJcbiAgICBjb2xvcjogI0RBNTY1MjtcclxufVxyXG4udGwtc3VtLWhvdXJzXHJcbntcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIG1hcmdpbi10b3A6IC0yM3B4O1xyXG59XHJcbi50bC13ZWVrLXN1bVxyXG57XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBtYXJnaW4tdG9wOiAtNTdweDtcclxuICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xyXG59XHJcbi50bC11aSBidXR0b24udGwtc3Rhci1idXR0b24sIC50bC11aS50bC1kYXJrIGJ1dHRvbi50bC1zdGFyLWJ1dHRvblxyXG57XHJcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgbWFyZ2luOiAwO1xyXG4gICAgcGFkZGluZzogMDtcclxufVxyXG4udGwtdWkgYnV0dG9uLnRsLXN0YXItYnV0dG9uLnRsLWZhdm9yaXRlLCAudGwtdWkudGwtZGFyayBidXR0b24udGwtc3Rhci1idXR0b24udGwtZmF2b3JpdGVcclxue1xyXG4gICAgY29sb3I6ICNmMWEwMGI7XHJcbiAgICBvcGFjaXR5OiAxO1xyXG59XHJcbi50bC1wYXN0ZS1idG4ge1xyXG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuLnRsLWhhcy1mYXZvcml0ZSAudGwtcGFzdGUtYnRuOm5vdCgudGwtaGlkZS1mYXZvcml0ZS1idXR0b24pXHJcbntcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxufVxyXG4udGwtc2hvdy1vbi1ob3ZlclxyXG57XHJcbiAgICBvcGFjaXR5OiAwO1xyXG59XHJcbi50bC1kYXRlOmhvdmVyIC50bC1zaG93LW9uLWhvdmVyXHJcbntcclxuICAgIG9wYWNpdHk6IDE7XHJcbn1cclxuLnRsLW5vLXJlYXNvbi13YXJuaW5nIHtcclxuICAgIG1hcmdpbi1sZWZ0OiAxODBweDtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIG1hcmdpbi10b3A6IC0yMnB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIHVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XHJcbn1cclxuLnRsLW5vLXJlYXNvbi13YXJuaW5nLnRsLWhhcy1yZWFzb25cclxue1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG4udGwtY2xpY2thYmxlXHJcbntcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG4udGwtZGFyay1tb2RlLWJ0biB7XHJcbiAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICBib3R0b206IDVweDtcclxuICAgIHJpZ2h0OiAyMHB4O1xyXG59XHJcbi50bC11aSBidXR0b25cclxue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2Q5ZDlkOTtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkIGdyYXk7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbn1cclxuLnRsLXVpIGJ1dHRvbjpob3ZlclxyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWZlYmViO1xyXG59XHJcblxyXG4udGwtdWkudGwtZGFya1xyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMUUxRTFFO1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG59XHJcbi50bC11aS50bC1kYXJrIHNlbGVjdCwgLnRsLXVpLnRsLWRhcmsgaW5wdXQge1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzI1MjUyNjtcclxuICAgIGJvcmRlcjogMXB4IGdyYXkgc29saWQ7XHJcbiAgICBjb2xvci1zY2hlbWU6IGRhcms7XHJcbn1cclxuLnRsLXVpLnRsLWRhcmsgYnV0dG9uXHJcbntcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMzMzMzMzM7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjMjgyODI4O1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG59XHJcbi50bC11aS50bC1kYXJrIGJ1dHRvbjpob3ZlclxyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTI1MjUyO1xyXG59XHJcbi50bC11aS50bC1kYXJrIC50bC1uby1yZWFzb24td2FybmluZ1xyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjUyNTI2O1xyXG59XHJcbi50bC13ZWVrZW5kLWRlc2NyaXB0aW9uIHtcclxuICAgIGNvbG9yOiBncmF5O1xyXG4gICAgZm9udC1zdHlsZTogaXRhbGljO1xyXG4gICAgZmxvYXQ6IHJpZ2h0O1xyXG4gICAgbWFyZ2luLXRvcDogMnB4O1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgbWF4LXdpZHRoOiA0MDBweDtcclxuICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICBtYXgtaGVpZ2h0OiAzNXB4O1xyXG59XHJcbi50bC13ZWVrZW5kLWRlc2NyaXB0aW9uLnRsLXdlZWtlbmQtZGVzY3JpcHRpb24taGlkZGVuXHJcbntcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuLnRsLXZlcnNpb24tbnVtYmVyIHtcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIGJvdHRvbTogNXB4O1xyXG4gICAgbGVmdDogNXB4O1xyXG59XHJcblxyXG4udGwtc2V0dGluZ3Mge1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgaW5zZXQ6IDA7XHJcbiAgICB6LWluZGV4OiAxMDA7XHJcbn1cclxuLnRsLXNldHRpbmdzLWJhY2sge1xyXG4gICAgaW5zZXQ6IDA7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcclxuICAgIG9wYWNpdHk6IDAuNTtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuLnRsLXNldHRpbmdzLnRsLXNldHRpbmdzLWhpZGRlbiB7XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcblxyXG4udGwtc2V0dGluZ3MtdmVyc2lvbiB7XHJcbiAgICBtYXJnaW46IDVweCAxMHB4O1xyXG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIGdyYXk7XHJcbn1cclxuXHJcbi50bC1zZXR0aW5ncy12ZXJzaW9uOmxhc3QtY2hpbGQge1xyXG4gICAgYm9yZGVyLWJvdHRvbTogMDtcclxufVxyXG5cclxuLnRsLXNldHRpbmdzLXRpdGxlIHtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgZm9udC1zaXplOiAxLjI1ZW07XHJcbn1cclxuLnRsLXNldHRpbmdzLWlubmVyIHtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gICAgaGVpZ2h0OiA3MHZoO1xyXG4gICAgd2lkdGg6IDkwdnc7XHJcbiAgICBsZWZ0OiA1dnc7XHJcbiAgICB0b3A6IDE1dmg7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCBncmF5O1xyXG4gICAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICBvdmVyZmxvdzogYXV0bztcclxufVxyXG4udGwtc2V0dGluZ3MtdmVyc2lvbiBidXR0b25cclxue1xyXG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcclxuICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XHJcbn1cclxuXHJcbi50bC1kYXJrIC50bC1zZXR0aW5ncy1pbm5lclxyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWExYTFhO1xyXG59XHJcblxyXG4udGwtYmFsYW5jZS13YXJuaW5nXHJcbntcclxuICAgIGZvbnQtc2l6ZTogMC44ZW07XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcclxuICAgIGN1cnNvcjogaGVscDtcclxufVxyXG4udGwtaGlkZGVuXHJcbntcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuXHJcbmA7IiwiZXhwb3J0IGNvbnN0IFJlYXNvbkVuaGFuY2VtZW50Q3NzID0gYFxyXG4ucmUtbGFiZWxcclxue1xyXG4gICAgZm9udC1zaXplOiAxLjVlbTtcclxuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbn1cclxuLnJlLXJlYXNvbi1zZWxlY3Rcclxue1xyXG4gICAgcGFkZGluZzogNXB4O1xyXG59XHJcbi5yZS1yZWFzb24tdWlcclxue1xyXG4gICAgei1pbmRleDogMjAwMDtcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIGluc2V0OiAwO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwwLjc1KTtcclxuICAgIHBhZGRpbmctdG9wOiA0NXZoO1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuLnJlLWJ0blxyXG57XHJcbiAgICBwYWRkaW5nOiAwIHZhcigtLWJ1dHRvbi1wYWRkaW5nLXgsIDE1cHgpO1xyXG4gICAgbWluLXdpZHRoOiA4MHB4O1xyXG4gICAgaGVpZ2h0OiB2YXIoLS1idXR0b24tc2l6ZSwgMzBweCk7XHJcbiAgICBmb250LXdlaWdodDogNjAwO1xyXG4gICAgZm9udC1zaXplOiB2YXIoLS1idXR0b24tZm9udC1zaXplLCAxMnB4KTtcclxuICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1ib2R5LWZvbnQtZmFtaWx5KTtcclxuICAgIGJvcmRlcjogMDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgIG1hcmdpbjogNXB4O1xyXG59XHJcbi5yZS1idG4ucmUtcHJpbWFyeVxyXG57XHJcbiAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1iZy10ZXh0LWNvbG9yLCB3aGl0ZSk7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5LTYwMCk7XHJcbn1cclxuLnJlLWJ0bi5yZS1zZWNvbmRhcnlcclxue1xyXG4gICAgY29sb3I6IHZhcigtLXNlY29uZGFyeS1iZy10ZXh0LWNvbG9yLCAjNTM1MzUzKTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNlY29uZGFyeS02MDApO1xyXG59XHJcbi5yZS1ibHVyXHJcbntcclxuICAgIGZpbHRlcjogYmx1cigycHgpO1xyXG59XHJcbi5yZS1zdWJtaXR0aW5nIC5yZS1idG5cclxue1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG4ucmUtc3VibWl0dGluZy10ZXh0XHJcbntcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgICBmb250LXNpemU6IDEuNWVtO1xyXG59XHJcbi5yZS1zdWJtaXR0aW5nIC5yZS1zdWJtaXR0aW5nLXRleHRcclxue1xyXG4gICAgZGlzcGxheTogYmxvY2s7XHJcbn1cclxuYDsiXSwibmFtZXMiOlsiQXBpIiwic3RhdGljIiwibWV0aG9kIiwidXJsIiwiYm9keSIsIlByb21pc2UiLCJyZXNvbHZlIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJyZXN1bHQiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJzdGF0dXMiLCJoYXNPd25Qcm9wZXJ0eSIsImtleSIsInRvU3RyaW5nIiwiYWxlcnQiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJzZW5kIiwic3RyaW5naWZ5IiwiRGF0ZXMiLCJzdHIiLCJzcGxpdCIsImxlbmd0aCIsInB1c2giLCJEYXRlIiwiam9pbiIsImdldFRpbWUiLCJ0aW1lIiwiaW5jbHVkZVRpbWVzdGFtcCIsImRhdGUiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwicGFkU3RhcnQiLCJnZXREYXRlIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiaG91cnMiLCJob3VyIiwiTWF0aCIsImZsb29yIiwibWludXRlIiwicm91bmQiLCJzZXRIb3VycyIsInNldERhdGUiLCJnZXREYXkiLCJ3ZWVrMSIsInBhcnNlSW50IiwiSGlCb2IiLCJlbnRyaWVzIiwic29tZSIsImUiLCJyZWFzb25JZCIsImRhdGEiLCJtYXAiLCJzdGFydCIsImZvcm1hdCIsInN0YXJ0SG91ciIsImVuZCIsImxlbmd0aEhvdXJzIiwidW5kZWZpbmVkIiwicmVhc29uIiwiY29tbWVudCIsImRhdGVTdHIiLCJ1c2VySWQiLCJ0aGlzIiwiZ2V0VXNlcklkIiwibWV0YWRhdGEiLCJ0aW1lTG9nRW50cnlSZWFzb24iLCJ2YWx1ZXMiLCJ2IiwiaWQiLCJzZXJ2ZXJJZCIsIm5hbWUiLCJ2YWx1ZSIsInNoZWV0IiwidXNlckluZm8iLCJXYWl0IiwibXMiLCJ3aW5kb3ciLCJzZXRUaW1lb3V0IiwiZGVsZWdhdGUiLCJoYW5kbGUiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJSZWFzb25FbmhhbmNlbWVudE1vZGUiLCJUaW1lbG9nU2F2ZVN0YXR1cyIsIkV2ZW50SGFuZGxlciIsImhhbmRsZXJzIiwib24iLCJoYW5kbGVyIiwiY29udGV4dCIsIm9mZiIsImZpbHRlciIsImgiLCJmaXJlIiwidmFsIiwiZm9yRWFjaCIsImNhbGwiLCJNYXRlcmlhbEljb24iLCJsaW5rIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaHJlZiIsInJlbCIsImhlYWQiLCJhcHBlbmRDaGlsZCIsImljb24iLCJmaWxsIiwic3BhbiIsImNsYXNzTmFtZSIsImlubmVyVGV4dCIsInN0eWxlIiwidmVydGljYWxBbGlnbiIsImZvbnRTaXplIiwiZm9udFZhcmlhdGlvblNldHRpbmdzIiwiTnVtYmVycyIsIm51bSIsImRlY2ltYWxzIiwiY2VpbCIsImFyciIsImkiLCJUaW1lbG9nTW9kZWwiLCJzaGVldHMiLCJvbkRhdGVVcGRhdGVkIiwib25SZWFzb25zVXBkYXRlZCIsIm9uU2hlZXRVcGRhdGVkIiwib25TaGVldHNVcGRhdGVkIiwib25TYXZlU3RhdHVzVXBkYXRlZCIsInNhdmVIYW5kbGUiLCJzYXZpbmciLCJjYWxjdWxhdGluZ0ZsZXgiLCJmZXRjaGluZ1NoZWV0cyIsInJlYXNvbnMiLCJhc3luYyIsImZldGNoU2hlZXRzIiwiZmV0Y2hSZWFzb25zIiwiU2F2ZWQiLCJ1bnRpbCIsImVtcGxveWVlU2hlZXRzIiwiY3ljbGVTdGFydERhdGUiLCJjeWNsZUVuZERhdGUiLCJuZXdTaGVldCIsImRhdGVzIiwibG9ja2VkIiwiaG91cnNQZXJEYXkiLCJzb3J0IiwiYSIsImIiLCJmaW5kIiwicyIsImF0dGVuZGFuY2UiLCJzdW1tYXJ5IiwicG90ZW50aWFsV29ya2luZ0hvdXJzIiwicG90ZW50aWFsV29ya2luZ0RheXMiLCJkaXJ0eSIsIm5vdyIsIndlZWtlbmQiLCJmYXZvcml0ZWQiLCJkYXRlRGVzY3JpcHRpb24iLCJub3RlIiwiZGVzY3JpcHRpb24iLCJoYXNDb21tZW50IiwiZmF2b3JpdGUiLCJnZXRGYXZvcml0ZWREYXRlIiwiY2hhbmdlU3RhcnRIb3VyIiwiaW5kZXgiLCJkIiwicXVldWVTYXZlIiwiY2hhbmdlTGVuZ3RoSG91cnMiLCJjaGFuZ2VSZWFzb24iLCJjaGFuZ2VDb21tZW50IiwidG9nZ2xlQ29tbWVudCIsIm9sZEZhdm9yaXRlIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImdldEl0ZW0iLCJmZXRjaFNoZWV0IiwiZGVsZXRlRW50cnkiLCJzcGxpY2UiLCJvcmlnaW5hbERhdGUiLCJvcmlnaW5hbFNoZWV0IiwiZGF0ZUluZGV4IiwiaW5kZXhPZiIsImVudHJ5SW5kZXgiLCJzaGVldEluZGV4IiwibGFzdCIsImZpbmRMYXN0RW50cnkiLCJpbmNsdWRlcyIsImVudHJ5IiwiY2xlYXJUaW1lb3V0Iiwic2F2ZSIsIldhaXRpbmciLCJTYXZpbmciLCJtaW5pbXVtV2FpdCIsInN1Ym1pdCIsIkVycm9yIiwic2V0QWRqdXN0ZWREYXRlQmFsYW5jZXMiLCJhcHBsaWVkT24iLCJnZXRBZGp1c3RlZERhdGVCYWxhbmNlcyIsImJhbGFuY2UiLCJnZXRGbGV4U3RhdHVzIiwiYWRqdXN0bWVudCIsIm92ZXJkdWVEYXRlcyIsInJlYWxsb2NhdGVkQmFsYW5jZSIsImdldEZsZXhQb2xpY3kiLCJwcmV2aW91c0RheXNJbmNsdWRlZCIsImZsZXhXYXJuaW5nVGhyZXNob2xkIiwiY2FjaGVLZXkiLCJyZW1vdmVJdGVtIiwic2hlZXRCYWxhbmNlcyIsImRheSIsInBvdGVudGlhbEhvdXJzIiwic3VtIiwiZGF0ZVN0cmluZyIsInJlYWxCYWxhbmNlIiwicG9saWN5IiwiY3VycmVudERhdGVUaW1lIiwib3ZlcmR1ZURhdGVUaW1lIiwid2FybmluZ0RhdGVUaW1lIiwiYWxsRGF0ZXMiLCJnZXRDYWNoZWRCYWxhbmNlcyIsImFkanVzdG1lbnRzIiwiaiIsInByZXZEYXRlIiwiYW1vdW50IiwibWluIiwiYWJzIiwiYXBwbHlEYXRlQWRqdXN0bWVudCIsInVuYmFsYW5jZWREYXRlcyIsIndhcm5pbmdEYXRlcyIsImFkanVzdGVkRGF0ZSIsImluaXRpYWxpemUiLCJzaGVldERyb3Bkb3duT3B0aW9ucyIsInNoZWV0RGF0ZXMiLCJ3ZWVrU3VtcyIsIm9uRGFya01vZGVDaGFuZ2UiLCJ0aW1lbG9nIiwiYWRkQnV0dG9uIiwicGFyZW50IiwicXVlcnlTZWxlY3RvciIsInRvZ2dsZUJ1dHRvbiIsImdldCIsInRpdGxlIiwib25jbGljayIsInRvZ2dsZVZpc2libGUiLCJjcmVhdGVVSSIsImNyZWF0ZU1vZGVsIiwibG9jYXRpb24iLCJoYXNoIiwiaXNEYXJrTW9kZSIsInRpbWVsb2dVSU91dGVyIiwiZGlzcGxheSIsIm92ZXJmbG93Iiwic2hlZXRDb250YWluZXIiLCJpbm5lckhUTUwiLCJtb2RlbCIsInRvZ2dsZURhcmtNb2RlIiwiYXBwZW5kIiwidGltZWxvZ1VJSW5uZXIiLCJjbG9zZUJ1dHRvbiIsImRhcmtNb2RlQnV0dG9uIiwiZGFyayIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInNldHRpbnNXaW5kb3ciLCJjcmVhdGVTZXR0aW5nc1dpbmRvdyIsInNldHRpbmdzQnV0dG9uIiwiY3Vyc29yIiwidGV4dERlY29yYXRpb24iLCJzaGVldERyb3Bkb3duTGFiZWwiLCJzaGVldERyb3Bkb3duIiwib25jaGFuZ2UiLCJvblNlbGVjdGVkU2hlZXRDaGFuZ2UiLCJzYXZlU3RhdHVzIiwib25TYXZlU3RhdHVzQ2xpY2siLCJiYWxhbmNlUGFyZW50IiwiYmFsYW5jZUxhYmVsIiwiYmFsYW5jZVdhcm5pbmciLCJmaXhCYWxhbmNlQnV0dG9uIiwiZml4QmFsYW5jZSIsImVsZW1lbnQiLCJiYWNrIiwiaW5uZXIiLCJzZXR0aW5nc0VsZW1lbnQiLCJyZWxvYWRMb2NrZWRTaGVldHNCdXR0b24iLCJjbGVhclNoZWV0QmFsYW5jZUNhY2hlIiwidGhlbiIsInVwZGF0ZUJhbGFuY2UiLCJyZXNldENhbmNlbGxlZEZsZXhIb3VycyIsImNoYW5nZWxvZyIsInZlcnNpb24iLCJ2ZXJzaW9uRWxlbWVudCIsInZlcnNpb25UaXRsZSIsImxpc3QiLCJ0ZXh0IiwidGV4dEVsZW1lbnQiLCJnZXREYXRlQ29udGFpbmVyIiwic2VsZWN0ZWRTaGVldCIsImRhdGVDb250YWluZXIiLCJzdGFyQnV0dG9uIiwicGFzdGVCdXR0b24iLCJ3ZWVrZW5kRGVzY3JpcHRpb24iLCJ3ZWVrU2VwZXJhdG9yIiwic2V0RmF2b3JpdGVkRGF0ZSIsInRvRGF0ZVN0cmluZyIsIm5ld0VudHJ5IiwicGFzdGVGcm9tU3RhcnJlZCIsImFkZFRvV2Vla1N1bSIsImdldEVudHJ5Q29udGFpbmVyIiwiZW50cnlDb250YWluZXIiLCJwIiwiZW5kSG91ciIsImNvbW1lbnRCdXR0b24iLCJub1JlYXNvbldhcm5pbmciLCJ0eXBlIiwiZGlzYWJsZWQiLCJwYXJzZVRpbWVUb2hvdXJzIiwiZW5kTGFiZWwiLCJ1cGRhdGVSZWFzb25zRHJvcGRvd24iLCJzdW1Ib3VycyIsInN0ZXAiLCJwYXJzZUZsb2F0IiwiZHVyYXRpb25MYWJlbCIsInBsYWNlaG9sZGVyIiwid2Vla1N1bSIsIm1hcmdpblRvcCIsImZvcm1hdEhvdXIiLCJyZW1vdmVkRW50cmllcyIsInciLCJkYXlzIiwidG90YWxIb3VycyIsIndlZWtOdW1iZXIiLCJnZXRXZWVrTnVtYmVyRnJvbURhdGUiLCJzZWxlY3QiLCJvcHRpb24iLCJjb250YWlucyIsIm8iLCJ0b3RhbEJhbGFuY2UiLCJjb25maXJtIiwiZml4T3ZlcmR1ZUZsZXhCYWxhbmNlIiwic3VibWl0dGluZyIsImNsb2NrSW5CdXR0b25GaW5kZXIiLCJyZWFzb25FbmhhbmNlbWVudFVJIiwibGFiZWwiLCJyZWFzb25TZWxlY3QiLCJzYXZlRGVmYXVsdFJlYXNvblZhbHVlIiwiY2FuY2VsQnV0dG9uIiwiY2FuY2VsIiwic3VibWl0QnV0dG9uIiwic3VibWl0dGluZ1RleHQiLCJmaW5kVW5lbmhhbmNlZEJ1dHRvbnMiLCJlbmhhbmNlQ2xvY2tJbkJ1dHRvbiIsIkZpeExhdGVzdCIsIkZpeEFsbCIsImFwcFJvb3QiLCJzZWxlY3RvciIsInF1ZXJ5IiwicXVlcnlTZWxlY3RvckFsbCIsImJ1dHRvbiIsIm1vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwic2hvd1JlYXNvbkZpeGVyIiwibG9hZERlZmF1bHRSZWFzb25WYWx1ZSIsInNldFVJVmlzaWJsZSIsImZpeEFsbCIsImZpeExhdGVzdCIsImxhdGVzdCJdLCJzb3VyY2VSb290IjoiIn0=