// ==UserScript==
// @name        HiBob Time Utilities
// @version     1.1.11
// @author      Funday Factory
// @description Utilities to make it easier to log time in HiBob
// @match       https://app.hibob.com/*
// @namespace   http://tampermonkey.net/
// @icon        https://www.google.com/s2/favicons?sz=64&domain=hibob.com
// @grant       none
// ==/UserScript==

(()=>{"use strict";class e{static parse(e){if(!e)return null;const t=e.split("T");return t.length<2&&t.push("00:00"),new Date(t.join("T")).getTime()}static format(e,t){if(!e)return"";const n=new Date(e);return`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}-${n.getDate().toString().padStart(2,"0")}${t?`T${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`:""}`}static formatHour(e){const t=Math.floor(e%24),n=Math.round(60*(e-t));return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}static getWeekNumberFromDate(e){var t=new Date(e);t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)}static parseTimeTohours(e){const t=e.split(":");return parseInt(t[0])+parseInt(t[1])/60}}class t{constructor(){this.handlers=[]}on(e,t){this.handlers.push({handler:e,context:t})}off(e,t){this.handlers=this.handlers.filter((n=>n.handler!==e||n.context!==t))}fire(e){this.handlers.forEach((t=>t.handler.call(t.context,e)))}}class n{static round(e,t){return Math.round(e*10**t)/10**t}static floor(e,t){return Math.floor(e*10**t)/10**t}static ceil(e,t){return Math.ceil(e*10**t)/10**t}static sum(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}}class a{static scale(e){return e*this.scaling.scale}static unscale(e){return e/this.scaling.scale}static getUnitName(e=null){return null===e?this.scaling.unitGeneral:1===e?this.scaling.unitSingular:this.scaling.unitPlural}static format(e){return`${n.round(this.scale(e),2)} ${this.getUnitName(e)}`}}a.scaling={unitGeneral:"hour(s)",unitPlural:"hours",unitSingular:"hour",scale:1};class s{static initialize(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200",e.rel="stylesheet",document.head.appendChild(e)}static get(e,t=!1){const n=document.createElement("span");return n.className="material-symbols-outlined",n.innerText=e,n.style.verticalAlign="middle",n.style.fontSize="1.5em",n.style.fontVariationSettings="'FILL' "+(t?1:0),n}}class o{static for(e){return new Promise((t=>{window.setTimeout((()=>t()),e)}))}static until(e){return new Promise((t=>{const n=window.setInterval((()=>{e()&&(t(),window.clearInterval(n))}),1)}))}}class i{static xhr(e,t,n){return new Promise((a=>{let s=new XMLHttpRequest;s.open(e,t),s.setRequestHeader("Accept","application/json"),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(4===s.readyState){let e;try{e=JSON.parse(s.responseText)}catch(t){e={result:s.responseText}}if(200!==s.status){if(e.hasOwnProperty("error")){const t=e.hasOwnProperty("key")?e.key:s.status.toString();alert(`HiBob Utils: Error ${t} - ${e.error}`)}else alert(`HiBob Utils: Error ${s.status} - check the developer console for more information.`);console.log(`HiBob Utils: Error ${s.status}.`),console.log(s)}a({status:s.status,body:e})}},s.send(JSON.stringify(n))}))}}class r{static async submit(t,n){if(n.some((e=>!e.reasonId)))return console.log("WARNING: SOME ENTRIES HAVE NO REASON SET - NOT SUBMITTING!!",t,n),!1;const a=n.map((n=>{var a;return{start:e.format(t+3600*n.startHour*1e3,!0),end:"number"==typeof n.lengthHours?e.format(t+3600*(n.startHour+n.lengthHours)*1e3,!0):void 0,reason:n.reasonId,comment:null!==(a=n.comment)&&void 0!==a?a:void 0}})),s=e.format(t,!1),o=await this.getUserId();return 200===(await i.xhr("POST",`https://app.hibob.com/api/attendance/employees/${o}/attendance/entries?forDate=${s}`,a)).status}static async timelogReasons(){return(await this.metadata()).timeLogEntryReason.values.map((e=>({id:e.serverId,name:e.value})))}static async attendance(e){return(await i.xhr("GET",`https://app.hibob.com/api/employees/attendance/my/sheets/${e}`,{})).body}static async sheets(){const e=await this.getUserId();return(await i.xhr("GET",`https://app.hibob.com/api/employees/${e}/timelog/attendance/sheets`,{})).body}static async metadata(){return(await i.xhr("GET","https://app.hibob.com/api/company/metadata/lists/?includeArchived=true",{})).body}static async getUserId(){var e;return"string"!=typeof this.userId&&await this.userInfo(),null!==(e=this.userId)&&void 0!==e?e:""}static async userInfo(){const e=await i.xhr("GET","https://app.hibob.com/api/user",{});return this.userId=e.body.id,e.body}}var l,d;!function(e){e[e.Waiting=0]="Waiting",e[e.Saving=1]="Saving",e[e.Saved=2]="Saved",e[e.Error=3]="Error"}(l||(l={}));class c{constructor(){this.sheets=[],this.onDateUpdated=new t,this.onReasonsUpdated=new t,this.onSheetUpdated=new t,this.onSheetsUpdated=new t,this.onSaveStatusUpdated=new t,this.saveHandle=-1,this.saving=!1,this.calculatingFlex=!1,this.fetchingSheets=!1,this.reasons=[]}async initialize(){await this.fetchSheets(),await this.fetchReasons(),this.onSaveStatusUpdated.fire(l.Saved)}async fetchSheets(){var t,n;await o.until((()=>!this.fetchingSheets)),this.fetchingSheets=!0,this.sheets=[];const a=await r.sheets();for(const s of a.employeeSheets){const a=null!==(t=e.parse(s.cycleStartDate))&&void 0!==t?t:0,o=null!==(n=e.parse(s.cycleEndDate))&&void 0!==n?n:0,i={id:s.id,status:s.status,start:a,end:o,dates:[],locked:s.locked,hoursPerDay:0};this.sheets.push(i)}this.sheets.sort(((e,t)=>t.start-e.start)),this.onSheetsUpdated.fire(this.sheets),this.fetchingSheets=!1}async fetchReasons(){this.reasons=(await r.metadata()).timeLogEntryReason.values,this.onReasonsUpdated.fire(this.reasons)}async fetchSheet(t){var a;const s=this.sheets.find((e=>e.id===t));if(!s)return;const o=await r.attendance(t);s.hoursPerDay=o.summary.potentialWorkingHours/o.summary.potentialWorkingDays,s.dates=[];for(const t of o.attendance){const o={dirty:!1,date:null!==(a=e.parse(t.date))&&void 0!==a?a:Date.now(),nonWorkingDay:"WeekendEvent"===t.status||"ApproveTimeoffRequest"===t.status,hoursToWork:s.hoursPerDay,favorited:!1,dateDescription:t.note.description,entries:t.entries.map((a=>{var s,o,i,r,l;return{startHour:n.floor(((null!==(s=e.parse(a.start))&&void 0!==s?s:Date.now())-(null!==(o=e.parse(t.date))&&void 0!==o?o:Date.now()))/36e5,2),lengthHours:n.ceil(((null!==(i=e.parse(a.end))&&void 0!==i?i:Date.now())-(null!==(r=e.parse(a.start))&&void 0!==r?r:Date.now()))/36e5,2),reasonId:a.reason,comment:null!==(l=a.comment)&&void 0!==l?l:null,hasComment:!!a.comment}})).sort(((e,t)=>e.startHour-t.startHour))};"number"==typeof t.paidTimeoffSeconds&&t.paidTimeoffSeconds>0?o.hoursToWork-=t.paidTimeoffSeconds/3600:o.nonWorkingDay&&(o.hoursToWork=0),s.dates.push(o)}s.dates.sort(((e,t)=>t.date-e.date));const i=await this.getFavoritedDate();i&&i.sheet===s&&(i.date.favorited=!0),this.onSheetUpdated.fire(s)}changeStartHour(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].startHour=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}changeLengthHours(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].lengthHours=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}changeReason(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].reasonId=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}changeComment(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].comment=n,e.entries[t].hasComment=!0,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}toggleComment(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries[t].hasComment=!e.entries[t].hasComment,e.entries[t].comment=e.entries[t].hasComment?"":null,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}async setFavoritedDate(t){const n=this.sheets.find((e=>e.dates.some((e=>e===t))));if(!n)return;const a=await this.getFavoritedDate();a&&(a.date.favorited=!1,this.onDateUpdated.fire(a)),t.favorited=!0,this.onDateUpdated.fire({sheet:n,date:t}),window.localStorage.setItem("tl_favorite",JSON.stringify({date:e.format(t.date,!1)}))}async getFavoritedDate(){const t=window.localStorage.getItem("tl_favorite");if(!t)return null;const n=JSON.parse(t),a=e.parse(n.date);if("number"==typeof a){const e=this.sheets.find((e=>e.start<=a&&e.end>=a));if(e){e.dates.length<1&&await this.fetchSheet(e.id);const t=e.dates.find((e=>e.date===a));if(t)return{sheet:e,date:t}}}return null}deleteEntry(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries.splice(t,1),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}async findLastEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;let n=t.dates.indexOf(e),a=-1;for(let e=this.sheets.indexOf(t);e<this.sheets.length;e++){const t=this.sheets[e];for(t.dates.length<1&&await this.fetchSheet(t.id);n<t.dates.length;n++){const e=t.dates[n];if(e.entries.length>0)return a<0?e.entries[e.entries.length-1]:e.entries[a];a=0}n=0}}async newEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const a=await this.findLastEntry(e);let s=8.5,o=n.round(t.hoursPerDay,2),i="";a&&(e.entries.includes(a)&&(s=a.startHour+a.lengthHours,o=1),i=a.reasonId),e.entries.push({startHour:s,lengthHours:o,reasonId:i,comment:null,hasComment:!1}),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}async pasteFromStarred(e){if(e.entries.length>0)return;const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const n=await this.getFavoritedDate();if(n&&n.date!==e){for(const t of n.date.entries)e.entries.push({startHour:t.startHour,lengthHours:t.lengthHours,reasonId:t.reasonId,comment:t.comment,hasComment:t.hasComment});e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}}queueSave(){window.clearTimeout(this.saveHandle),this.saveHandle=window.setTimeout((()=>this.save()),500),this.onSaveStatusUpdated.fire(l.Waiting)}async save(){await o.until((()=>!this.saving)),this.saving=!0,this.onSaveStatusUpdated.fire(l.Saving);const e=o.for(100);let t=!1;for(const e of this.sheets)for(const n of e.dates)n.dirty&&(await r.submit(n.date,n.entries)?n.dirty=!1:t=!0);await e,this.onSaveStatusUpdated.fire(t?l.Error:l.Saved),this.saving=!1}getFlexPolicy(){return{previousDaysIncluded:28,flexWarningThreshold:21}}async clearSheetBalanceCache(){if(!this.sheets)return;const e=await r.getUserId();for(let t=0;t<this.sheets.length;t++){const n=this.sheets[t];if(!n)continue;const a=`tl_cached_hour_balances_${e}_${n.id}`;n.locked&&null!==window.localStorage.getItem(a)&&window.localStorage.removeItem(a)}}async getCachedBalances(){var t;const a={},s=await r.getUserId();for(let o=this.sheets.length-1;o>=0;o--){const i=this.sheets[o];if(!i)continue;let r=[];const l=`tl_cached_hour_balances_${s}_${i.id}`;if(i.locked&&null!==window.localStorage.getItem(l))r=JSON.parse(null!==(t=window.localStorage.getItem(l))&&void 0!==t?t:"[]");else{if(i.dates.length<1&&await this.fetchSheet(i.id),i.dates.some((e=>e.entries.length>0&&e.entries.some((e=>e.lengthHours>0)))))for(const e of i.dates){const t=n.sum(e.entries.map((e=>e.lengthHours)))-e.hoursToWork;r.push({date:e.date,balance:t})}i.locked&&i.id>0&&window.localStorage.setItem(l,JSON.stringify(r))}a[i.id.toString()]=r.map((t=>({date:t.date,dateString:e.format(t.date,!1),realBalance:t.balance,reallocatedBalance:n.round(t.balance,3)}))).sort(((e,t)=>e.date-t.date))}return a}async getFlexStatus(){var t,a,s;const i=this.getFlexPolicy(),r=null!==(t=e.parse(e.format(Date.now(),!1)))&&void 0!==t?t:0,l=null!==(a=e.parse(e.format(r-864e5*(i.previousDaysIncluded-1),!1)))&&void 0!==a?a:0,d=null!==(s=e.parse(e.format(r-864e5*(i.flexWarningThreshold-1),!1)))&&void 0!==s?s:0,c=[];let h=0;if(this.sheets){await o.until((()=>!this.calculatingFlex)),this.calculatingFlex=!0;const e=await this.getCachedBalances();for(let t=this.sheets.length-1;t>=0;t--){const n=e[this.sheets[t].id];n&&c.push(...n)}for(let e=0;e<c.length;e++){const t=c[e];for(let a=0;a<e&&0!==t.reallocatedBalance;a++){const e=c[a],s=Math.min(Math.abs(t.reallocatedBalance),Math.abs(e.reallocatedBalance));t.reallocatedBalance<0&&e.reallocatedBalance>0?(e.reallocatedBalance-=s,t.reallocatedBalance+=s):t.reallocatedBalance>0&&e.reallocatedBalance<0&&(e.reallocatedBalance+=s,t.reallocatedBalance-=s),e.reallocatedBalance=n.round(e.reallocatedBalance,3)}t.reallocatedBalance=n.round(t.reallocatedBalance,3)}h=n.sum(c.map((e=>n.round(e.reallocatedBalance,3)))),this.calculatingFlex=!1}return{balance:h,unbalancedDates:c.filter((e=>0!==e.reallocatedBalance)),overdueDates:c.filter((e=>0!==e.reallocatedBalance&&e.date<=l)),warningDates:c.filter((e=>0!==e.reallocatedBalance&&e.date<=d&&e.date>l))}}}class h{}h.buttons=[{className:"tl-settings-reload-locked-sheets-button",icon:"cached",text:"Reload Locked Sheets",title:"Recalculates flex balance for all locked sheets.",onClick:e=>{var t;return null===(t=e.model)||void 0===t?void 0:t.clearSheetBalanceCache().then((()=>e.updateBalance()))}}];class u{constructor(){this.sheetDropdownOptions=[],this.sheetDates=[],this.weekSums=[],this.reasons=[],this.onDarkModeChange=new t,window.timelog=this,this.addButton()}async addButton(){for(;;){const e=document.querySelector("div.app-content > app-top-bar.app-top-bar > div.actions");if(e){this.toggleButton=document.createElement("button"),this.toggleButton.className="tl-toggle-btn",this.toggleButton.appendChild(s.get("sentiment_very_satisfied")),this.toggleButton.title="HiBob Utilities",this.toggleButton.onclick=()=>this.toggleVisible(),e.appendChild(this.toggleButton),this.createUI(),await this.createModel(),"#tl-ui"===location.hash&&this.toggleVisible(),this.onDarkModeChange.fire(this.isDarkMode());break}await o.for(1)}}toggleVisible(){var e;this.timelogUIOuter&&("none"===this.timelogUIOuter.style.display?(this.timelogUIOuter.style.display="block",location.hash="#tl-ui",document.body.style.overflow="hidden",this.sheetContainer&&(this.sheetContainer.innerHTML=""),null===(e=this.model)||void 0===e||e.fetchSheets(),u.onShow.fire(this)):(this.timelogUIOuter.style.display="none",location.hash="",document.body.style.overflow="initial"))}isDarkMode(){return"true"===localStorage.getItem("tl_dark_mode")}toggleDarkMode(){this.isDarkMode()?localStorage.setItem("tl_dark_mode","false"):localStorage.setItem("tl_dark_mode","true"),this.onDarkModeChange.fire(this.isDarkMode())}createUI(){const e=document.createElement("style");e.innerHTML="\n.tl-toggle-btn\n{\n    border: none;\n    background: none;\n    font-size: 2em;\n}\n.tl-close-btn\n{\n    font-size: 2em;\n    position: absolute;\n    right: 5px;\n}\n.tl-ui\n{\n    position: fixed;\n    z-index: 1000;\n    inset: 0px;\n    background-color: white;\n    overflow-y: scroll;\n    padding: 10px;\n}        \n.tl-date\n{\n    margin-top: 10px;\n    padding: 10px;\n    border: 1px solid gray;\n    border-radius: 5px;\n}\n.tl-save-status, .tl-add-entry-btn\n{\n    margin-left: 10px;\n}\n.tl-entry\n{\n    margin-top: 5px;\n}\n.tl-entry > *\n{\n    margin-left: 5px;\n}\n.tl-entry > input[type=number]\n{\n    width: 50px;\n}\n.tl-entry > input[type=time]\n{\n    width: 75px;\n}\n.tl-save-status\n{\n    font-weight: bold;\n}\n.tl-sheet-select\n{\n    margin-left: 5px;\n}\n.tl-date-label\n{\n    font-weight: bold;\n}\n.tl-date-label.tl-date-label-weekend\n{\n    font-weight: initial;\n    font-style: italic;\n    color: gray;\n}\n.tl-entry-reason \n{\n    padding: 3px;\n}\n.tl-remove-entry-btn\n{\n    float: right;\n}\n.tl-week-seperator\n{\n    margin-top: 57px;\n}\n.tl-balance-label\n{\n    margin: 5px;\n    display: inline-block;\n}\n.tl-balance-help\n{\n    display: inline-block;\n    cursor: help;\n}\n\n.tl-ui-inner\n{\n    display: table;\n    margin-left: auto;\n    margin-right: auto;\n}\n.tl-ui-inner, .tl-week-seperator, .tl-date\n{\n    min-width: 650px;\n}\n.tl-entry-comment {\n    margin-top: 5px;\n    margin-bottom: 15px;\n    width: 100%;\n    display: none;\n}\n.tl-has-comment .tl-entry-comment\n{\n    display: block;\n}\n.tl-success\n{\n    color: #02B875;\n}\n.tl-warning\n{\n    color: #F0AF52;\n}\n.tl-danger\n{\n    color: #DA5652;\n}\n.tl-sum-hours\n{\n    position: absolute;\n    margin-top: -23px;\n}\n.tl-week-sum\n{\n    position: absolute;\n    margin-top: -57px;\n    text-decoration: underline;\n}\n.tl-ui button.tl-star-button, .tl-ui.tl-dark button.tl-star-button\n{\n    background: none;\n    border: none;\n    margin: 0;\n    padding: 0;\n}\n.tl-ui button.tl-star-button.tl-favorite, .tl-ui.tl-dark button.tl-star-button.tl-favorite\n{\n    color: #f1a00b;\n    opacity: 1;\n}\n.tl-paste-btn {\n    margin-left: 5px;\n    display: none;\n}\n.tl-has-favorite .tl-paste-btn:not(.tl-hide-favorite-button)\n{\n    display: inline-block;\n}\n.tl-show-on-hover\n{\n    opacity: 0;\n}\n.tl-date:hover .tl-show-on-hover\n{\n    opacity: 1;\n}\n.tl-no-reason-warning {\n    margin-left: 180px;\n    position: absolute;\n    margin-top: -22px;\n    font-weight: bold;\n    background-color: white;\n    user-select: none;\n    pointer-events: none;\n}\n.tl-no-reason-warning.tl-has-reason\n{\n    display: none;\n}\n.tl-clickable\n{\n    cursor: pointer;\n}\n.tl-dark-mode-btn {\n    position: fixed;\n    bottom: 5px;\n    right: 20px;\n}\n.tl-ui button\n{\n    background-color: #d9d9d9;\n    border: 1px solid gray;\n    border-radius: 5px;\n}\n.tl-ui button:hover\n{\n    background-color: #efebeb;\n}\n\n.tl-ui.tl-dark\n{\n    background-color: #1E1E1E;\n    color: white;\n}\n.tl-ui.tl-dark select, .tl-ui.tl-dark input {\n    color: white;\n    background-color: #252526;\n    border: 1px gray solid;\n    color-scheme: dark;\n}\n.tl-ui.tl-dark button\n{\n    background-color: #333333;\n    border: 1px solid #282828;\n    color: white;\n}\n.tl-ui.tl-dark button:hover\n{\n    background-color: #525252;\n}\n.tl-ui.tl-dark .tl-no-reason-warning\n{\n    background-color: #252526;\n}\n.tl-weekend-description {\n    color: gray;\n    font-style: italic;\n    float: right;\n    margin-top: 2px;\n    display: inline-block;\n    max-width: 400px;\n    overflow: hidden;\n    max-height: 35px;\n}\n.tl-weekend-description.tl-weekend-description-hidden\n{\n    display: none;\n}\n.tl-version-number {\n    position: fixed;\n    bottom: 5px;\n    left: 5px;\n}\n\n.tl-settings {\n    position: fixed;\n    inset: 0;\n    z-index: 100;\n}\n.tl-settings-back {\n    inset: 0;\n    position: absolute;\n    background-color: black;\n    opacity: 0.5;\n    cursor: pointer;\n}\n\n.tl-settings.tl-settings-hidden {\n    display: none;\n}\n\n.tl-settings-version {\n    margin: 5px 10px;\n    border-bottom: 1px solid gray;\n}\n\n.tl-settings-version:last-child {\n    border-bottom: 0;\n}\n\n.tl-settings-title {\n    font-weight: bold;\n    font-size: 1.25em;\n}\n.tl-settings-inner {\n    position: absolute;\n    background-color: white;\n    height: 70vh;\n    width: 90vw;\n    left: 5vw;\n    top: 15vh;\n    border: 1px solid gray;\n    border-radius: 10px;\n    padding: 10px;\n    overflow: auto;\n}\n.tl-settings-version button\n{\n    margin-left: 5px;\n    margin-bottom: 15px;\n}\n\n.tl-dark .tl-settings-inner\n{\n    background-color: #1a1a1a;\n}\n\n.tl-balance-warning\n{\n    font-size: 0.8em;\n    display: inline-block;\n    text-decoration: underline;\n    cursor: help;\n}\n.tl-hidden\n{\n    display: none;\n}\n\n.tl-no-entries-warning\n{\n    float: right;\n    font-weight: bold;\n}\n\n",document.body.appendChild(e),this.timelogUIOuter=document.createElement("div"),this.timelogUIOuter.className="tl-ui",this.timelogUIOuter.style.display="none",document.body.append(this.timelogUIOuter),this.timelogUIInner=document.createElement("div"),this.timelogUIInner.className="tl-ui-inner",this.timelogUIOuter.append(this.timelogUIInner);const t=document.createElement("button");t.className="tl-close-btn",t.appendChild(s.get("close")),t.onclick=()=>this.toggleVisible(),this.timelogUIInner.appendChild(t),this.darkModeButton=document.createElement("button"),this.darkModeButton.className="tl-dark-mode-btn",this.darkModeButton.onclick=()=>this.toggleDarkMode(),this.timelogUIInner.appendChild(this.darkModeButton),this.onDarkModeChange.on((e=>{var t,n;e?null===(t=this.timelogUIOuter)||void 0===t||t.classList.add("tl-dark"):null===(n=this.timelogUIOuter)||void 0===n||n.classList.remove("tl-dark"),this.darkModeButton&&(this.darkModeButton.innerHTML="",this.darkModeButton.append(e?s.get("light_mode"):s.get("dark_mode")))}),this);const n=this.createSettingsWindow();this.timelogUIInner.appendChild(n);const a=document.createElement("div");a.append(s.get("settings",!0)),a.append(" 1.1.11"),a.className="tl-version-number",a.onclick=()=>n.classList.remove("tl-settings-hidden"),a.style.cursor="pointer",a.style.textDecoration="underline",this.timelogUIInner.appendChild(a);const o=document.createElement("span");o.innerText="Sheet:",this.timelogUIInner.appendChild(o),this.sheetDropdown=document.createElement("select"),this.sheetDropdown.className="tl-sheet-select",this.sheetDropdown.onchange=()=>this.onSelectedSheetChange(),this.timelogUIInner.appendChild(this.sheetDropdown),this.saveStatus=document.createElement("span"),this.saveStatus.className="tl-save-status",this.saveStatus.onclick=()=>this.onSaveStatusClick(),this.timelogUIInner.append(this.saveStatus);const i=document.createElement("div");i.className="tl-balance",this.timelogUIInner.append(i),this.balanceLabel=document.createElement("div"),this.balanceLabel.innerText="Balance: ",this.balanceLabel.className="tl-balance-label",i.append(this.balanceLabel),this.balanceWarning=document.createElement("div"),this.balanceWarning.className="tl-balance-warning tl-warning tl-hidden",i.append(this.balanceWarning),this.sheetContainer=document.createElement("div"),this.sheetContainer.className="tl-sheet",this.timelogUIInner.appendChild(this.sheetContainer)}createSettingsWindow(){const e=document.createElement("div");e.className="tl-settings tl-settings-hidden";const t=document.createElement("div");t.className="tl-settings-back",e.append(t),t.onclick=()=>e.classList.add("tl-settings-hidden");const n=document.createElement("div");n.className="tl-settings-inner",e.append(n);const a=document.createElement("div");a.className="tl-settings-version",n.append(a);for(const e of h.buttons){const t=document.createElement("button");t.className=e.className,t.append(s.get(e.icon)),t.append(e.text),e.title&&(t.style.cursor="help"),t.title=e.title,t.onclick=()=>e.onClick(this),a.appendChild(t)}const o=[{version:"1.1.11 - 21/01/2023",text:["Change expected hours to work on a day to show as a warning on empty days with expected hours."]},{version:"1.1.10 - 20/01/2023",text:["Show expected hours to work on a given day."]},{version:"1.1.9 - 04/11/2022",text:["Fix problem where changing user on HiBob would cause problems due to caching"]},{version:"1.1.8 - 04/11/2022",text:["Fixed issue where you couldn't make an entry have a length of 0 hours","On the warning of flex becoming too old, show how many hours are left to be flexed on that day"]},{version:"1.1.7 - 02/11/2022",text:['Removed the option to "fix" old flex, as this solution would break when switching devices.',"Please talk to HR if you need to clear time logged before october.","To fix old flex hours without taking time off, please talk to HR or Finance about a solution."]},{version:"1.1.6 - 26/10/2022",text:["Holidays are now shown in the alternative timelog UI","Holidays are considered in the flex time calculation."]},{version:"1.1.4 - 03/10/2022",text:["Added a warning when unbalanced flex days are close to expiring.","Added button to cancel old unbalanced flex for extraordinary situations","Added buttons to delete cached data in the settings menu."]},{version:"1.1.3 - 03/10/2022",text:["Fixed how flex hours is calculated.","A warning is shown if you have unbalanced flex days that are older than 28 days."]},{version:"1.1.2 - 03/10/2022",text:["Fixed problem where you couldn't log time on some days, where you were supposed to."]},{version:"1.1.1 - 30/09/2022",text:["Added changelog","Show descriptions on non-working days"]}];for(const e of o){const t=document.createElement("div");t.className="tl-settings-version",n.append(t);const a=document.createElement("div");a.className="tl-settings-title",a.innerText=e.version,t.append(a);const s=document.createElement("ul");s.className="tl-settings-list",t.append(s);for(const t of e.text){const e=document.createElement("li");e.innerText=t,s.append(e)}}return e}async createModel(){this.model&&(this.model.onDateUpdated.off(this.onDateUpdated,this),this.model.onReasonsUpdated.off(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.off(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.off(this.onSheetUpdated,this),this.model.onSheetsUpdated.off(this.onSheetsUpdated,this)),this.model=new c,this.model.onDateUpdated.on(this.onDateUpdated,this),this.model.onReasonsUpdated.on(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.on(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.on(this.onSheetUpdated,this),this.model.onSheetsUpdated.on(this.onSheetsUpdated,this),await this.model.initialize()}getDateContainer(e){if(this.selectedSheet===e.sheet&&this.sheetContainer){let t=this.sheetDates.find((t=>t.date===e.date));if(!t){if(t={date:e.date,parent:document.createElement("div"),title:document.createElement("span"),entries:[],starButton:document.createElement("button"),pasteButton:document.createElement("button"),weekendDescription:document.createElement("div"),noEntriesWarning:document.createElement("div")},this.sheetDates.push(t),t.parent.className="tl-date",this.sheetContainer.appendChild(t.parent),1===new Date(e.date.date).getDay()){const e=document.createElement("div");e.className="tl-week-seperator",this.sheetContainer.appendChild(e)}if(t.parent.append(t.starButton),t.starButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.setFavoritedDate(e.date)},t.starButton.className="tl-star-button tl-show-on-hover",t.starButton.title="Favorite Day",t.title.className="tl-date-label",t.title.innerText=new Date(e.date.date).toDateString(),e.date.nonWorkingDay&&t.title.classList.add("tl-date-label-weekend"),t.parent.append(t.title),t.weekendDescription.className="tl-weekend-description",t.parent.append(t.weekendDescription),t.noEntriesWarning.className="tl-no-entries-warning",t.parent.append(t.noEntriesWarning),!e.sheet.locked){const n=document.createElement("button");n.appendChild(s.get("add")),n.className="tl-add-entry-btn tl-show-on-hover",n.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.newEntry(e.date)},t.parent.append(n),t.pasteButton=document.createElement("button"),t.pasteButton.appendChild(s.get("switch_access_shortcut_add")),t.pasteButton.title="Paste from Favorite Day",t.pasteButton.className="tl-paste-btn tl-show-on-hover",t.pasteButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.pasteFromStarred(e.date)},t.parent.append(t.pasteButton)}this.addToWeekSum(t)}return t}return null}getEntryContainer(t,o,i){let r=o.entries.find((e=>e.entry===i));if(!r){r={entry:i,parent:document.createElement("div"),startHour:document.createElement("input"),endHour:document.createElement("input"),length:document.createElement("input"),reason:document.createElement("select"),comment:document.createElement("input"),commentButton:document.createElement("button"),noReasonWarning:document.createElement("div")},o.entries.push(r),r.parent.className="tl-entry",o.parent.appendChild(r.parent),r.startHour.type="time",r.startHour.className="tl-entry-start",t.sheet.locked&&(r.startHour.disabled=!0),r.startHour.onchange=()=>{var a,s,o;const l=i.startHour+i.lengthHours;null===(a=this.model)||void 0===a||a.changeStartHour(t.date,t.date.entries.indexOf(i),e.parseTimeTohours(null!==(s=null==r?void 0:r.startHour.value)&&void 0!==s?s:"08:00"));const d=n.round(l-i.startHour,2);null===(o=this.model)||void 0===o||o.changeLengthHours(t.date,t.date.entries.indexOf(i),d)},r.parent.appendChild(r.startHour);const l=document.createElement("span");l.className="tl-end-label",l.innerText="-",r.parent.appendChild(l),r.endHour.type="time",r.endHour.className="tl-entry-end",t.sheet.locked&&(r.endHour.disabled=!0),r.endHour.onchange=()=>{var a;if(null==r?void 0:r.endHour){const s=n.round(e.parseTimeTohours(r.endHour.value)-i.startHour,2);null===(a=this.model)||void 0===a||a.changeLengthHours(t.date,t.date.entries.indexOf(i),s)}},r.parent.appendChild(r.endHour),r.reason.onchange=()=>{var e,n;return null===(e=this.model)||void 0===e?void 0:e.changeReason(t.date,t.date.entries.indexOf(i),null!==(n=null==r?void 0:r.reason.value)&&void 0!==n?n:"")},t.sheet.locked&&(r.reason.disabled=!0),r.reason.className="tl-entry-reason",r.parent.appendChild(r.reason),this.updateReasonsDropdown(r.reason),1===o.entries.length&&(o.sumHours=document.createElement("span"),o.sumHours.className="tl-sum-hours",r.parent.append(o.sumHours)),r.length.type="number",r.length.className="tl-entry-length",r.length.step="0.01",t.sheet.locked&&(r.length.disabled=!0),r.length.onchange=()=>{var e;null===(e=this.model)||void 0===e||e.changeLengthHours(t.date,t.date.entries.indexOf(i),a.unscale(parseFloat((null==r?void 0:r.length.value)||"0")))},r.parent.appendChild(r.length);const d=document.createElement("span");if(d.className="tl-duration-label",d.innerText=a.getUnitName(),r.parent.appendChild(d),!t.sheet.locked){r.commentButton.className="tl-add-comment-btn tl-show-on-hover",r.commentButton.onclick=()=>{var e;return null===(e=this.model)||void 0===e?void 0:e.toggleComment(t.date,t.date.entries.indexOf(i))},r.parent.appendChild(r.commentButton);const e=document.createElement("button");e.appendChild(s.get("delete")),e.className="tl-remove-entry-btn tl-show-on-hover",e.onclick=()=>{var e;return null===(e=this.model)||void 0===e?void 0:e.deleteEntry(t.date,t.date.entries.indexOf(i))},r.parent.appendChild(e)}r.noReasonWarning.append(s.get("warning",!0)),r.noReasonWarning.append(" No reason selected!"),r.noReasonWarning.className="tl-no-reason-warning tl-warning tl-has-reason",r.parent.appendChild(r.noReasonWarning),r.comment.type="text",r.comment.placeholder="Write a note...",r.comment.title="Write a note...",r.comment.className="tl-entry-comment",t.sheet.locked&&(r.comment.disabled=!0),r.comment.onchange=()=>{var e,n;null===(e=this.model)||void 0===e||e.changeComment(t.date,t.date.entries.indexOf(i),null!==(n=null==r?void 0:r.comment.value)&&void 0!==n?n:"")},r.parent.appendChild(r.comment)}return r}addToWeekSum(e){if(this.weekSums.length<1||0===new Date(e.date.date).getDay()){const t={dates:[e],element:document.createElement("div")};t.element.className="tl-week-sum",this.weekSums.push(t),e.parent.appendChild(t.element),e.parent.style.marginTop="38px"}else this.weekSums[this.weekSums.length-1].dates.push(e)}onDateUpdated(t){var o,i,r;if(this.selectedSheet===t.sheet&&this.sheetContainer){let l=this.getDateContainer(t);if(l){for(const i of t.date.entries){let r=this.getEntryContainer(t,l,i);r.startHour.value=e.formatHour(i.startHour),r.length.value=n.round(a.scale(i.lengthHours),2).toString(),r.endHour.value=e.formatHour(i.startHour+i.lengthHours),r.reason.value=i.reasonId,r.comment.value=null!==(o=i.comment)&&void 0!==o?o:"",i.reasonId?r.noReasonWarning.classList.add("tl-has-reason"):r.noReasonWarning.classList.remove("tl-has-reason"),r.commentButton.title=i.hasComment?"Remove note":"Add note",r.commentButton.innerHTML="",r.commentButton.appendChild(s.get(i.hasComment?"speaker_notes_off":"speaker_notes")),i.hasComment?r.parent.classList.add("tl-has-comment"):r.parent.classList.remove("tl-has-comment")}const d=l.entries.filter((e=>!t.date.entries.find((t=>t===e.entry))));if(l.entries=l.entries.filter((e=>!d.includes(e))),d.forEach((e=>e.parent.remove())),l.sumHours){const e=n.sum(t.date.entries.map((e=>e.lengthHours)));l.sumHours.innerText=`${a.format(n.round(e,2))}`}if(l.starButton.innerHTML="",l.starButton.disabled=t.date.favorited,l.starButton.classList.remove("tl-favorite"),l.starButton.appendChild(s.get("star",t.date.favorited)),t.date.favorited&&l.starButton.classList.add("tl-favorite"),l.entries.length>0||l.date.favorited?l.pasteButton.classList.add("tl-hide-favorite-button"):l.pasteButton.classList.remove("tl-hide-favorite-button"),l.title.title=null!==(i=t.date.dateDescription)&&void 0!==i?i:"",t.date.nonWorkingDay&&t.date.entries.length<1?(l.weekendDescription.classList.remove("tl-weekend-description-hidden"),l.weekendDescription.innerText=null!==(r=t.date.dateDescription)&&void 0!==r?r:""):l.weekendDescription.classList.add("tl-weekend-description-hidden"),l.date.hoursToWork>0&&l.entries.length<1){l.noEntriesWarning.classList.remove("tl-hidden"),l.noEntriesWarning.classList.add("tl-warning");const e=n.sum(t.date.entries.map((e=>e.lengthHours)));l.noEntriesWarning.innerHTML="",l.noEntriesWarning.append(s.get("warning",!0)),l.noEntriesWarning.append(` ${n.round(a.scale(e),2)} / ${a.format(n.round(l.date.hoursToWork,2))}`)}else l.noEntriesWarning.classList.add("tl-hidden")}const d=this.weekSums.find((e=>e.dates.some((e=>e.date===t.date))));if(d){const t=n.sum(d.dates.map((e=>n.sum(e.entries.map((e=>e.entry.lengthHours)))))),s=n.sum(d.dates.map((e=>e.date.hoursToWork))),o=e.getWeekNumberFromDate(d.dates[0].date.date);d.element.innerHTML=`<b>Week ${o}</b>: ${n.round(a.scale(t),2)} / ${a.format(n.round(s,2))}`}}this.updateBalance()}updateReasonsDropdown(e){e.innerHTML="";for(const t of this.reasons){const n=document.createElement("option");n.value=t.serverId,n.innerText=t.value,e.appendChild(n)}}onReasonsUpdated(e){this.reasons=e;for(const e of this.sheetDates)for(const t of e.entries)this.updateReasonsDropdown(t.reason)}onSaveStatusUpdated(e){this.saveStatus&&(this.saveStatus.innerHTML="",this.saveStatus.classList.remove("tl-success"),this.saveStatus.classList.remove("tl-warning"),this.saveStatus.classList.remove("tl-clickable"),e===l.Saved&&(this.saveStatus.appendChild(s.get("cloud_done",!0)),this.saveStatus.append(" Saved"),this.saveStatus.classList.add("tl-success")),e===l.Waiting&&(this.saveStatus.appendChild(s.get("pending")),this.saveStatus.append(" Pending...")),e===l.Saving&&(this.saveStatus.appendChild(s.get("cloud_upload")),this.saveStatus.append(" Saving...")),e===l.Error&&(this.saveStatus.appendChild(s.get("cloud_off")),this.saveStatus.append(" Failed!"),this.saveStatus.classList.add("tl-warning"),this.saveStatus.classList.add("tl-clickable")))}onSaveStatusClick(){var e,t;(null===(e=this.saveStatus)||void 0===e?void 0:e.classList.contains("tl-clickable"))&&(null===(t=this.model)||void 0===t||t.save())}onSheetUpdated(e){if(this.sheetDropdown&&!this.sheetDropdownOptions.find((t=>t.sheet===e))){const t=document.createElement("option");t.value=e.id.toString(),t.innerText=`${new Date(e.start).toDateString()} - ${new Date(e.end).toDateString()}${e.locked?" (locked)":""}`,this.sheetDropdownOptions.push({sheet:e,element:t}),this.sheetDropdown.appendChild(t)}this.selectedSheet===e&&(this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[],this.weekSums=[]);for(const t of e.dates)this.onDateUpdated({sheet:e,date:t});this.updateBalance()}onSheetsUpdated(e){this.sheetDropdown&&(this.sheetDropdown.innerHTML=""),this.sheetDropdownOptions=[];for(const t of e)this.onSheetUpdated(t);this.onSelectedSheetChange()}onSelectedSheetChange(){var e;if(!this.sheetDropdown)return;this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[];const t=this.sheetDropdown.value;this.selectedSheet=null===(e=this.sheetDropdownOptions.find((e=>e.element.value===t)))||void 0===e?void 0:e.sheet,this.selectedSheet&&this.model&&this.model.fetchSheet(this.selectedSheet.id)}async updateBalance(){var t,o,i;if(!this.model||!this.balanceLabel||!this.selectedSheet)return;const r=await this.model.getFlexStatus(),l=n.round(r.balance,2);if(this.balanceLabel.innerText=`Flex: ${a.format(l)}${0===l?" 🥳":""}`,null===(t=this.balanceWarning)||void 0===t||t.classList.add("tl-hidden"),r.overdueDates.length+r.warningDates.length>0&&this.balanceWarning){const t=this.model.getFlexPolicy();this.balanceWarning.classList.remove("tl-hidden"),this.balanceWarning.innerHTML="",this.balanceWarning.append(s.get("warning",!0)),r.overdueDates.length>0?(this.balanceWarning.append(`You have ${r.overdueDates.length} unbalanced flex date${1===r.overdueDates.length?"":"s"} older than ${t.previousDaysIncluded} days!`),this.balanceWarning.title+=`Overdue dates: ${r.overdueDates.map((t=>e.format(t.date,!1))).join(", ")}`):r.warningDates.length>0&&this.balanceWarning.append(`${r.warningDates.length} unbalanced flex date${1===r.warningDates.length?"":"s"} will soon be older than ${t.previousDaysIncluded} days!`),this.balanceWarning.title="",r.overdueDates.length>0&&(this.balanceWarning.title+=`Overdue dates: ${r.overdueDates.map((t=>`${e.format(t.date,!1)} (${t.reallocatedBalance}h)`)).join(", ")}`),r.warningDates.length>0&&(this.balanceWarning.title+=`${this.balanceWarning.title.length>0?"\n":""}Soon overdue dates: ${r.warningDates.map((t=>`${e.format(t.date,!1)} (${t.reallocatedBalance}h)`)).join(", ")}`),this.balanceWarning.append(" "),this.balanceWarning.append(s.get("info",!1))}await this.model.getFavoritedDate()?null===(o=this.sheetContainer)||void 0===o||o.classList.add("tl-has-favorite"):null===(i=this.sheetContainer)||void 0===i||i.classList.remove("tl-has-favorite")}}u.onShow=new t,function(e){e[e.FixAll=0]="FixAll",e[e.FixLatest=1]="FixLatest"}(d||(d={})),class{static setAprilFoolsOptOut(e){window.localStorage.setItem("tl_april_fools_opt_out",JSON.stringify(e))}static getAprilFoolsOptOut(){var e;return JSON.parse(null!==(e=window.localStorage.getItem("tl_april_fools_opt_out"))&&void 0!==e?e:"false")}static setHasSeenPopup(e){window.localStorage.setItem("tl_april_fools_popup",JSON.stringify(e))}static hasSeenPopup(){var e;return JSON.parse(null!==(e=window.localStorage.getItem("tl_april_fools_popup"))&&void 0!==e?e:"false")}static isAprilFools(){if("#tl-aprilfools"===window.location.hash)return!0;const e=new Date,t=e.getFullYear();let n,a=4,s=1,o=[6,7];for(;s<1&&(s=31,a--),n=new Date(`${t}/${a}/${s}`),o.includes(n.getDay());)s--;let i=n.getTime()+864e5;return e.getTime()<=i&&e.getTime()>=n.getTime()}static init(){this.isAprilFools()?(h.buttons.push({className:"",icon:"bolt",text:"Opt out of Teralightmeters",title:"April fools!",onClick:()=>{this.setAprilFoolsOptOut(!this.getAprilFoolsOptOut()),location.reload()}}),this.getAprilFoolsOptOut()||(a.scaling={unitGeneral:"teralightmeter(s)",unitPlural:"teralightmeters",unitSingular:"teralightmeter",scale:this.hour2TeralightmeterScaling()}),u.onShow.on((e=>this.showAprilFoolsPopup(e)),this)):(this.setAprilFoolsOptOut(!1),this.setHasSeenPopup(!1))}static showAprilFoolsPopup(e){var t;if(this.hasSeenPopup())return;const n=document.createElement("div");n.className="tl-settings",n.style.cursor="pointer";const a=document.createElement("div");a.className="tl-settings-back",n.append(a);const s=()=>{n.remove(),this.setHasSeenPopup(!0)};a.onclick=()=>s(),n.onclick=()=>s();const o=document.createElement("div");o.className="tl-settings-inner",n.append(o);const i=document.createElement("div");i.className="tl-settings-version",o.append(i);const r=(new Date).getMonth()<3;i.innerHTML=`<h1>Introducing: the Teralightmeter!</h1>\n        <h3>All hours logged will now be measured in a new time unit: the Teralightmeter - the time it takes for light to travel 1 000 000 000 000 meters!</h3>\n        <h3>This feature was made exclusively for your benefit, in no way related to ${r?"an upcoming date.":"today's date."}</h3>\n        <h3>We hope you enjoy 😉📅</h3>`,null===(t=e.timelogUIInner)||void 0===t||t.appendChild(n)}static hour2TeralightmeterScaling(){return 1.0792528488}}.init(),s.initialize(),new u,new class{constructor(){this.submitting=!1,this.createUI(),this.clockInButtonFinder()}createUI(){const e=document.createElement("style");e.innerHTML="\n.re-label\n{\n    font-size: 1.5em;\n    margin-bottom: 10px;\n}\n.re-reason-select\n{\n    padding: 5px;\n}\n.re-reason-ui\n{\n    z-index: 2000;\n    position: fixed;\n    inset: 0;\n    background-color: rgba(0,0,0,0.75);\n    padding-top: 45vh;\n    text-align: center;\n    color: white;\n    font-weight: bold;\n}\n.re-btn\n{\n    padding: 0 var(--button-padding-x, 15px);\n    min-width: 80px;\n    height: var(--button-size, 30px);\n    font-weight: 600;\n    font-size: var(--button-font-size, 12px);\n    font-family: var(--body-font-family);\n    border: 0;\n    border-radius: 4px;\n    margin: 5px;\n}\n.re-btn.re-primary\n{\n    color: var(--primary-bg-text-color, white);\n    background-color: var(--primary-600);\n}\n.re-btn.re-secondary\n{\n    color: var(--secondary-bg-text-color, #535353);\n    background-color: var(--secondary-600);\n}\n.re-blur\n{\n    filter: blur(2px);\n}\n.re-submitting .re-btn\n{\n    display: none;\n}\n.re-submitting-text\n{\n    display: none;\n    font-size: 1.5em;\n}\n.re-submitting .re-submitting-text\n{\n    display: block;\n}\n",document.body.append(e),this.reasonEnhancementUI=document.createElement("div"),this.reasonEnhancementUI.className="re-reason-ui",this.reasonEnhancementUI.style.display="none",document.body.appendChild(this.reasonEnhancementUI);const t=document.createElement("div");t.innerText="Choose Default Reason",t.className="re-label",this.reasonEnhancementUI.appendChild(t),this.reasonSelect=document.createElement("select"),this.reasonSelect.className="re-reason-select",this.reasonSelect.onchange=()=>this.saveDefaultReasonValue(),this.reasonEnhancementUI.appendChild(this.reasonSelect),this.reasonEnhancementUI.appendChild(document.createElement("br"));const n=document.createElement("button");n.className="re-cancel-btn re-btn re-secondary",n.innerText="Cancel",n.onclick=()=>this.cancel(),this.reasonEnhancementUI.appendChild(n);const a=document.createElement("button");a.className="re-submit-btn re-btn re-primary",a.innerText="Submit",a.onclick=()=>this.submit(),this.reasonEnhancementUI.appendChild(a);const s=document.createElement("div");s.className="re-submitting-text",s.innerText="Submitting...",this.reasonEnhancementUI.appendChild(s)}async clockInButtonFinder(){for(var e;;)this.findUnenhancedButtons("b-button.punch-clock-button, b-button.time-widget-clock-in-btn, b-button.time-widget-clock-out-btn").forEach((e=>this.enhanceClockInButton(e,d.FixLatest))),this.findUnenhancedButtons("b-button.quick-fix-apply-button").forEach((e=>this.enhanceClockInButton(e,d.FixAll))),this.appRoot||(this.appRoot=null!==(e=document.querySelector("app-root"))&&void 0!==e?e:void 0),await o.for(10)}findUnenhancedButtons(e){var t=[],n=document.querySelectorAll(e);for(const e of n)e.classList.contains("re-enhanced")||(e.classList.add("re-enhanced"),t.push(e));return t}enhanceClockInButton(e,t){e.addEventListener("click",(()=>this.showReasonFixer(t)))}saveDefaultReasonValue(){this.reasonSelect&&window.localStorage.setItem("re-last-reason",this.reasonSelect.value)}loadDefaultReasonValue(){var e;this.reasonSelect&&(this.reasonSelect.value=null!==(e=window.localStorage.getItem("re-last-reason"))&&void 0!==e?e:"")}async showReasonFixer(e){if(this.reasonEnhancementUI&&(await o.for(250),this.setUIVisible(!0),this.mode=e,this.reasonSelect)){const e=await r.metadata();this.reasonSelect.innerHTML="";for(const t of e.timeLogEntryReason.values){const e=document.createElement("option");e.value=t.serverId,e.innerText=t.value,this.reasonSelect.appendChild(e)}this.loadDefaultReasonValue()}}cancel(){this.setUIVisible(!1)}setUIVisible(e){this.reasonEnhancementUI&&(this.reasonEnhancementUI.style.display=e?"block":"none"),this.appRoot&&(e?this.appRoot.classList.add("re-blur"):this.appRoot.classList.remove("re-blur"))}async submit(){var e,t;await o.until((()=>!this.submitting)),this.submitting=!0,null===(e=this.reasonEnhancementUI)||void 0===e||e.classList.add("re-submitting"),this.mode===d.FixAll&&await this.fixAll(),this.mode===d.FixLatest&&await this.fixLatest(),this.setUIVisible(!1),null===(t=this.reasonEnhancementUI)||void 0===t||t.classList.remove("re-submitting"),this.submitting=!1}async fixAll(){if(!this.reasonSelect)return;const t=this.reasonSelect.value,n=await r.sheets();for(const a of n.employeeSheets){if(a.locked)continue;const n=await r.attendance(a.id);for(const a of n.attendance)if(a.entries.some((e=>!e.reason))){const n=e.parse(a.date);if("number"!=typeof n)continue;const s=a.entries.map((a=>{var s,o,i,r;return{startHour:((null!==(s=e.parse(a.start))&&void 0!==s?s:Date.now())-n)/36e5,lengthHours:a.end?((null!==(o=e.parse(a.end))&&void 0!==o?o:Date.now())-(null!==(i=e.parse(a.start))&&void 0!==i?i:Date.now()))/36e5:null,reasonId:a.reason||t,comment:null!==(r=a.comment)&&void 0!==r?r:null}}));await r.submit(n,s)}}}async fixLatest(){if(!this.reasonSelect)return;const t=this.reasonSelect.value;let n=null;const a=await r.sheets();for(const t of a.employeeSheets){if(t.locked)continue;const a=await r.attendance(t.id);for(const t of a.attendance){const a=e.parse(t.date);if("number"==typeof a&&(!n||a>n.date)){const s=t.entries.map((t=>{var n,s,o,i;return{startHour:((null!==(n=e.parse(t.start))&&void 0!==n?n:Date.now())-a)/36e5,lengthHours:t.end?((null!==(s=e.parse(t.end))&&void 0!==s?s:Date.now())-(null!==(o=e.parse(t.start))&&void 0!==o?o:Date.now()))/36e5:null,reasonId:t.reason,comment:null!==(i=t.comment)&&void 0!==i?i:null}}));n={date:a,entries:s}}}}if(n){for(const e of n.entries)e.reasonId=e.reasonId||t;await r.submit(n.date,n.entries)}}}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlib2IudXNlci5qcyIsIm1hcHBpbmdzIjoibUJBQU8sTUFBTUEsRUFFRkMsYUFBYUMsR0FFaEIsSUFBS0EsRUFBSyxPQUFPLEtBQ2pCLE1BQU1DLEVBQVFELEVBQUlDLE1BQU0sS0FFeEIsT0FESUEsRUFBTUMsT0FBUyxHQUFHRCxFQUFNRSxLQUFLLFNBQzFCLElBQUlDLEtBQUtILEVBQU1JLEtBQUssTUFBTUMsU0FDckMsQ0FDT1AsY0FBY1EsRUFBY0MsR0FFL0IsSUFBS0QsRUFBTSxNQUFPLEdBQ2xCLE1BQU1FLEVBQU8sSUFBSUwsS0FBS0csR0FDdEIsTUFBTyxHQUFHRSxFQUFLQyxrQkFBa0JELEVBQUtFLFdBQWEsR0FBR0MsV0FBV0MsU0FBUyxFQUFHLFFBQVFKLEVBQUtLLFVBQVVGLFdBQVdDLFNBQVMsRUFBRyxPQUFPTCxFQUFtQixJQUFJQyxFQUFLTSxXQUFXSCxXQUFXQyxTQUFTLEVBQUcsUUFBUUosRUFBS08sYUFBYUosV0FBV0MsU0FBUyxFQUFHLE9BQVMsSUFDOVAsQ0FDT2Qsa0JBQWtCa0IsR0FFckIsTUFBTUMsRUFBT0MsS0FBS0MsTUFBTUgsRUFBUSxJQUMxQkksRUFBU0YsS0FBS0csTUFBdUIsSUFBaEJMLEVBQVFDLElBQ25DLE1BQU8sR0FBR0EsRUFBS04sV0FBV0MsU0FBUyxFQUFHLFFBQVFRLEVBQU9ULFdBQVdDLFNBQVMsRUFBRyxNQUNoRixDQUNPZCw2QkFBNkJRLEdBRWhDLElBQUlFLEVBQU8sSUFBSUwsS0FBS0csR0FDcEJFLEVBQUtjLFNBQVMsRUFBRyxFQUFHLEVBQUcsR0FFdkJkLEVBQUtlLFFBQVFmLEVBQUtLLFVBQVksR0FBS0wsRUFBS2dCLFNBQVcsR0FBSyxHQUV4RCxJQUFJQyxFQUFRLElBQUl0QixLQUFLSyxFQUFLQyxjQUFlLEVBQUcsR0FFNUMsT0FBTyxFQUFJUyxLQUFLRyxRQUFRYixFQUFLSCxVQUFZb0IsRUFBTXBCLFdBQWEsTUFDdEQsR0FBS29CLEVBQU1ELFNBQVcsR0FBSyxHQUFLLEVBQzFDLENBQ08xQix3QkFBd0JRLEdBRTNCLE1BQU1OLEVBQVFNLEVBQUtOLE1BQU0sS0FDekIsT0FBTzBCLFNBQVMxQixFQUFNLElBQU0wQixTQUFTMUIsRUFBTSxJQUFNLEVBQ3JELEVDckNHLE1BQU0yQixFQUFiLGNBRVksS0FBQUMsU0FBMEQsRUFhdEUsQ0FaV0MsR0FBR0MsRUFBMkJDLEdBRWpDQyxLQUFLSixTQUFTMUIsS0FBSyxDQUFFNEIsVUFBU0MsV0FDbEMsQ0FDT0UsSUFBSUgsRUFBMkJDLEdBRWxDQyxLQUFLSixTQUFXSSxLQUFLSixTQUFTTSxRQUFPQyxHQUFLQSxFQUFFTCxVQUFZQSxHQUFXSyxFQUFFSixVQUFZQSxHQUNyRixDQUNPSyxLQUFLQyxHQUVSTCxLQUFLSixTQUFTVSxTQUFRSCxHQUFLQSxFQUFFTCxRQUFRUyxLQUFLSixFQUFFSixRQUFTTSxJQUN6RCxFQ2RHLE1BQU1HLEVBRUYxQyxhQUFhMkMsRUFBYUMsR0FFN0IsT0FBT3hCLEtBQUtHLE1BQU1vQixFQUFPLElBQU1DLEdBQWMsSUFBTUEsQ0FDdkQsQ0FDTzVDLGFBQWEyQyxFQUFhQyxHQUU3QixPQUFPeEIsS0FBS0MsTUFBTXNCLEVBQU8sSUFBTUMsR0FBYyxJQUFNQSxDQUN2RCxDQUNPNUMsWUFBWTJDLEVBQWFDLEdBRTVCLE9BQU94QixLQUFLeUIsS0FBS0YsRUFBTyxJQUFNQyxHQUFjLElBQU1BLENBQ3RELENBRU81QyxXQUFXOEMsR0FFZCxJQUFJUCxFQUFNLEVBQ1YsSUFBSyxJQUFJUSxFQUFJLEVBQUdBLEVBQUlELEVBQUkzQyxPQUFRNEMsSUFBS1IsR0FBT08sRUFBSUMsR0FDaEQsT0FBT1IsQ0FDWCxFQ2xCRyxNQUFNUyxFQVFGaEQsYUFBYWtCLEdBRWhCLE9BQU9BLEVBQVFnQixLQUFLZSxRQUFRQyxLQUNoQyxDQUNPbEQsZUFBZW1ELEdBRWxCLE9BQU9BLEVBQVNqQixLQUFLZSxRQUFRQyxLQUNqQyxDQUNPbEQsbUJBQW1Ca0IsRUFBdUIsTUFFN0MsT0FBYyxPQUFWQSxFQUF1QmdCLEtBQUtlLFFBQVFHLFlBQzFCLElBQVZsQyxFQUFvQmdCLEtBQUtlLFFBQVFJLGFBQzlCbkIsS0FBS2UsUUFBUUssVUFDeEIsQ0FDT3RELGNBQWNrQixHQUVqQixNQUFPLEdBQUd3QixFQUFRbkIsTUFBTVcsS0FBS2dCLE1BQU1oQyxHQUFRLE1BQU1nQixLQUFLcUIsWUFBWXJDLElBQ3RFLEVBdkJjLEVBQUErQixRQUFVLENBQ3BCRyxZQUFhLFVBQ2JFLFdBQVksUUFDWkQsYUFBYyxPQUNkSCxNQUFPLEdDUlIsTUFBZU0sRUFFWHhELG9CQUVILE1BQU15RCxFQUFPQyxTQUFTQyxjQUFjLFFBQ3BDRixFQUFLRyxLQUFPLHVIQUNaSCxFQUFLSSxJQUFNLGFBQ1hILFNBQVNJLEtBQUtDLFlBQVlOLEVBQzlCLENBQ096RCxXQUFXZ0UsRUFBY0MsR0FBZ0IsR0FFNUMsTUFBTUMsRUFBT1IsU0FBU0MsY0FBYyxRQU1wQyxPQUxBTyxFQUFLQyxVQUFZLDRCQUNqQkQsRUFBS0UsVUFBWUosRUFDakJFLEVBQUtHLE1BQU1DLGNBQWdCLFNBQzNCSixFQUFLRyxNQUFNRSxTQUFXLFFBQ3RCTCxFQUFLRyxNQUFNRyxzQkFBd0IsV0FBVVAsRUFBTyxFQUFJLEdBQ2pEQyxDQUNYLEVDbEJHLE1BQU1PLEVBRUZ6RSxXQUFXMEUsR0FFZCxPQUFPLElBQUlDLFNBQWNDLElBRXJCQyxPQUFPQyxZQUFXLElBQU1GLEtBQVdGLEVBQUcsR0FFOUMsQ0FDTzFFLGFBQWErRSxHQUVoQixPQUFPLElBQUlKLFNBQWNDLElBRXJCLE1BQU1JLEVBQVNILE9BQU9JLGFBQVksS0FFMUJGLE1BRUFILElBQ0FDLE9BQU9LLGNBQWNGLEcsR0FFMUIsRUFBRSxHQUViLEVDdEJHLE1BQU1HLEVBRUZuRixXQUFXb0YsRUFBd0JDLEVBQWFDLEdBRW5ELE9BQU8sSUFBSVgsU0FBdUNDLElBRTlDLElBQUlXLEVBQU0sSUFBSUMsZUFDZEQsRUFBSUUsS0FBS0wsRUFBUUMsR0FDakJFLEVBQUlHLGlCQUFpQixTQUFVLG9CQUMvQkgsRUFBSUcsaUJBQWlCLGVBQWdCLG9CQUNyQ0gsRUFBSUksbUJBQXFCLEtBRXJCLEdBQXVCLElBQW5CSixFQUFJSyxXQUNSLENBQ0ksSUFBSUMsRUFDSixJQUVJQSxFQUFTQyxLQUFLQyxNQUFNUixFQUFJUyxhLENBQzFCLFNBQ0VILEVBQVMsQ0FDTEEsT0FBUU4sRUFBSVMsYSxDQUdwQixHQUFtQixNQUFmVCxFQUFJVSxPQUNSLENBQ0ksR0FBSUosRUFBT0ssZUFBZSxTQUMxQixDQUNJLE1BQU1DLEVBQU1OLEVBQU9LLGVBQWUsT0FBU0wsRUFBT00sSUFBTVosRUFBSVUsT0FBT3BGLFdBQ25FdUYsTUFBTSxzQkFBc0JELE9BQVNOLEVBQU9RLFEsTUFJNUNELE1BQU0sc0JBQXNCYixFQUFJVSw4REFFcENLLFFBQVFDLElBQUksc0JBQXNCaEIsRUFBSVUsV0FDdENLLFFBQVFDLElBQUloQixFLENBRWhCWCxFQUFRLENBQ0pxQixPQUFRVixFQUFJVSxPQUNaWCxLQUFNTyxHLEdBSWxCTixFQUFJaUIsS0FBS1YsS0FBS1csVUFBVW5CLEdBQU0sR0FFdEMsRUN6Q0csTUFBTW9CLEVBR0YxRyxvQkFBb0JVLEVBQWNpRyxHQUVyQyxHQUFJQSxFQUFRQyxNQUFLQyxJQUFNQSxFQUFFQyxXQUdyQixPQURBUixRQUFRQyxJQUFJLDhEQUErRDdGLEVBQU1pRyxJQUMxRSxFQUVYLE1BQU1JLEVBQU9KLEVBQVFLLEtBQUlILElBQU8sSUFBSCxFQUFHLE1BQU8sQ0FBRUksTUFBT2xILEVBQU1tSCxPQUFPeEcsRUFBcUIsS0FBZG1HLEVBQUVNLFVBQW1CLEtBQU0sR0FBT0MsSUFBOEIsaUJBQWxCUCxFQUFFUSxZQUEyQnRILEVBQU1tSCxPQUFPeEcsRUFBdUMsTUFBL0JtRyxFQUFFTSxVQUFZTixFQUFFUSxhQUFzQixLQUFNLFFBQVFDLEVBQVdDLE9BQVFWLEVBQUVDLFNBQVVVLFFBQWtCLFFBQVQsRUFBQVgsRUFBRVcsZUFBTyxhQUFJRixFQUFXLElBQ2xSRyxFQUFVMUgsRUFBTW1ILE9BQU94RyxHQUFNLEdBQzdCZ0gsUUFBZXhGLEtBQUt5RixZQUUxQixPQUF5QixhQURKeEMsRUFBSUksSUFBSSxPQUFRLGtEQUFrRG1DLGdDQUFxQ0QsSUFBV1YsSUFDekhkLE1BQ2xCLENBQ09qRyw4QkFHSCxhQUR1QmtDLEtBQUswRixZQUNaQyxtQkFBbUJDLE9BQU9kLEtBQUllLElBRW5DLENBQ0hDLEdBQUlELEVBQUVFLFNBQ05DLEtBQU1ILEVBQUVJLFNBR3BCLENBQ09uSSx3QkFBd0JvSSxHQUczQixhQURxQmpELEVBQUlJLElBQUksTUFBTyw0REFBNEQ2QyxJQUFTLENBQUMsSUFDNUY5QyxJQUNsQixDQUNPdEYsc0JBRUgsTUFBTTBILFFBQWV4RixLQUFLeUYsWUFFMUIsYUFEcUJ4QyxFQUFJSSxJQUFJLE1BQU8sdUNBQXVDbUMsOEJBQW9DLENBQUMsSUFDbEdwQyxJQUNsQixDQUNPdEYsd0JBR0gsYUFEcUJtRixFQUFJSSxJQUFJLE1BQU8seUVBQTBFLENBQUMsSUFDakdELElBQ2xCLENBQ090Rix5QixNQU1ILE1BSjJCLGlCQUFoQmtDLEtBQUt3RixjQUVOeEYsS0FBS21HLFdBRUcsUUFBWCxFQUFBbkcsS0FBS3dGLGNBQU0sUUFBSSxFQUMxQixDQUNPMUgsd0JBRUgsTUFBTTZGLFFBQWVWLEVBQUlJLElBQUksTUFBTyxpQ0FBa0MsQ0FBQyxHQUV2RSxPQURBckQsS0FBS3dGLE9BQVU3QixFQUFPUCxLQUFtQjBDLEdBQ2xDbkMsRUFBT1AsSUFDbEIsRUNoQ0osSUFBWWdELEVDdEJBQyxHRHNCWixTQUFZRCxHQUVSLHlCQUNBLHVCQUNBLHFCQUNBLG9CQUNILENBTkQsQ0FBWUEsSUFBQUEsRUFBaUIsS0VwQnRCLE1BQU1FLEVBYVQsY0FYTyxLQUFBQyxPQUF5QixHQUN6QixLQUFBQyxjQUFnQixJQUFJN0csRUFDcEIsS0FBQThHLGlCQUFtQixJQUFJOUcsRUFDdkIsS0FBQStHLGVBQWlCLElBQUkvRyxFQUNyQixLQUFBZ0gsZ0JBQWtCLElBQUloSCxFQUN0QixLQUFBaUgsb0JBQXNCLElBQUlqSCxFQUN6QixLQUFBa0gsWUFBc0IsRUFDdEIsS0FBQUMsUUFBa0IsRUFDbEIsS0FBQUMsaUJBQTJCLEVBQzNCLEtBQUFDLGdCQUFpQixFQUNqQixLQUFBQyxRQUF5QixFQUdqQyxDQUNPQyx5QkFFR2xILEtBQUttSCxvQkFDTG5ILEtBQUtvSCxlQUNYcEgsS0FBSzRHLG9CQUFvQnhHLEtBQUtnRyxFQUFrQmlCLE1BQ3BELENBQ09ILG9CLGNBRUczRSxFQUFLK0UsT0FBTSxLQUFPdEgsS0FBS2dILGlCQUM3QmhILEtBQUtnSCxnQkFBaUIsRUFDdEJoSCxLQUFLdUcsT0FBUyxHQUNkLE1BQU1BLFFBQWUvQixFQUFNK0IsU0FDM0IsSUFBSyxNQUFNTCxLQUFTSyxFQUFPZ0IsZUFDM0IsQ0FDSSxNQUFNeEMsRUFBeUMsUUFBakMsRUFBQWxILEVBQUEsTUFBWXFJLEVBQU1zQix1QkFBZSxRQUFJLEVBQzdDdEMsRUFBcUMsUUFBL0IsRUFBQXJILEVBQUEsTUFBWXFJLEVBQU11QixxQkFBYSxRQUFJLEVBQ3pDQyxFQUFXLENBQ2I1QixHQUFJSSxFQUFNSixHQUNWL0IsT0FBUW1DLEVBQU1uQyxPQUNkZ0IsUUFDQUcsTUFDQXlDLE1BQU8sR0FDUEMsT0FBUTFCLEVBQU0wQixPQUNkQyxZQUFhLEdBRWpCN0gsS0FBS3VHLE9BQU9ySSxLQUFLd0osRSxDQUVyQjFILEtBQUt1RyxPQUFPdUIsTUFBSyxDQUFDQyxFQUFHQyxJQUFNQSxFQUFFakQsTUFBUWdELEVBQUVoRCxRQUN2Qy9FLEtBQUsyRyxnQkFBZ0J2RyxLQUFLSixLQUFLdUcsUUFDL0J2RyxLQUFLZ0gsZ0JBQWlCLENBQzFCLENBQ09FLHFCQUVIbEgsS0FBS2lILGVBQWlCekMsRUFBTWtCLFlBQVlDLG1CQUFtQkMsT0FDM0Q1RixLQUFLeUcsaUJBQWlCckcsS0FBS0osS0FBS2lILFFBQ3BDLENBQ09DLGlCQUFpQnBCLEcsTUFFcEIsTUFBTUksRUFBUWxHLEtBQUt1RyxPQUFPMEIsTUFBS0MsR0FBS0EsRUFBRXBDLEtBQU9BLElBQzdDLElBQUtJLEVBQU8sT0FDWixNQUFNaUMsUUFBbUIzRCxFQUFNMkQsV0FBV3JDLEdBQzFDSSxFQUFNMkIsWUFBY00sRUFBV0MsUUFBUUMsc0JBQXdCRixFQUFXQyxRQUFRRSxxQkFDbEZwQyxFQUFNeUIsTUFBUSxHQUNkLElBQUssTUFBTW5KLEtBQVEySixFQUFXQSxXQUM5QixDQUNJLE1BQ01sQyxFQUFxQixDQUN2QnNDLE9BQU8sRUFDUC9KLEtBSCtCLFFBQXRCLEVBQUFYLEVBQUEsTUFBWVcsRUFBS0EsYUFBSyxRQUFJTCxLQUFLcUssTUFJeENDLGNBQStCLGlCQUFoQmpLLEVBQUt1RixRQUE2QywwQkFBaEJ2RixFQUFLdUYsT0FDdEQyRSxZQUFheEMsRUFBTTJCLFlBQ25CYyxXQUFXLEVBQ1hDLGdCQUFpQnBLLEVBQUtxSyxLQUFLQyxZQUMzQnJFLFFBQVNqRyxFQUFLaUcsUUFBUUssS0FBSUgsSSxjQUV0QixNQUFPLENBQ0hNLFVBQVd6RSxFQUFRckIsUUFBNEIsUUFBcEIsRUFBQXRCLEVBQUEsTUFBWThHLEVBQUVJLGNBQU0sUUFBSTVHLEtBQUtxSyxRQUFnQyxRQUF0QixFQUFBM0ssRUFBQSxNQUFZVyxFQUFLQSxhQUFLLFFBQUlMLEtBQUtxSyxRQUFVLEtBQWUsR0FDMUhyRCxZQUFhM0UsRUFBUUcsT0FBeUIsUUFBbEIsRUFBQTlDLEVBQUEsTUFBWThHLEVBQUVPLFlBQUksUUFBSS9HLEtBQUtxSyxRQUE4QixRQUFwQixFQUFBM0ssRUFBQSxNQUFZOEcsRUFBRUksY0FBTSxRQUFJNUcsS0FBS3FLLFFBQVUsS0FBZSxHQUN2SDVELFNBQVVELEVBQUVVLE9BQ1pDLFFBQWtCLFFBQVQsRUFBQVgsRUFBRVcsZUFBTyxRQUFJLEtBQ3RCeUQsYUFBY3BFLEVBQUVXLFFBQ25CLElBQ0Z3QyxNQUFLLENBQUNDLEVBQUdDLElBQU1ELEVBQUU5QyxVQUFZK0MsRUFBRS9DLGFBRUMsaUJBQTVCekcsRUFBS3dLLG9CQUFtQ3hLLEVBQUt3SyxtQkFBcUIsRUFBRy9DLEVBQU15QyxhQUFnQmxLLEVBQUt3SyxtQkFBcUIsS0FDdkgvQyxFQUFNd0MsZ0JBQWV4QyxFQUFNeUMsWUFBYyxHQUNsRHhDLEVBQU15QixNQUFNekosS0FBSytILEUsQ0FFckJDLEVBQU15QixNQUFNRyxNQUFLLENBQUNDLEVBQUdDLElBQU1BLEVBQUV4SixLQUFPdUosRUFBRXZKLE9BQ3RDLE1BQU15SyxRQUFpQmpKLEtBQUtrSixtQkFDeEJELEdBQVlBLEVBQVMvQyxRQUFVQSxJQUMvQitDLEVBQVN6SyxLQUFLbUssV0FBWSxHQUM5QjNJLEtBQUswRyxlQUFldEcsS0FBSzhGLEVBQzdCLENBRU9pRCxnQkFBZ0IzSyxFQUFtQjRLLEVBQWVuSyxHQUVyRCxNQUFNaUgsRUFBUWxHLEtBQUt1RyxPQUFPMEIsTUFBS0MsR0FBS0EsRUFBRVAsTUFBTWpELE1BQUsyRSxHQUFLQSxJQUFNN0ssTUFDdkQwSCxJQUNMMUgsRUFBS2lHLFFBQVEyRSxHQUFPbkUsVUFBWWhHLEVBQ2hDVCxFQUFLK0osT0FBUSxFQUNidkksS0FBS3NKLFlBQ0x0SixLQUFLd0csY0FBY3BHLEtBQUssQ0FBRThGLFFBQU8xSCxTQUNyQyxDQUNPK0ssa0JBQWtCL0ssRUFBbUI0SyxFQUFlbkwsR0FFdkQsTUFBTWlJLEVBQVFsRyxLQUFLdUcsT0FBTzBCLE1BQUtDLEdBQUtBLEVBQUVQLE1BQU1qRCxNQUFLMkUsR0FBS0EsSUFBTTdLLE1BQ3ZEMEgsSUFDTDFILEVBQUtpRyxRQUFRMkUsR0FBT2pFLFlBQWNsSCxFQUNsQ08sRUFBSytKLE9BQVEsRUFDYnZJLEtBQUtzSixZQUNMdEosS0FBS3dHLGNBQWNwRyxLQUFLLENBQUU4RixRQUFPMUgsU0FDckMsQ0FDT2dMLGFBQWFoTCxFQUFtQjRLLEVBQWUvRCxHQUVsRCxNQUFNYSxFQUFRbEcsS0FBS3VHLE9BQU8wQixNQUFLQyxHQUFLQSxFQUFFUCxNQUFNakQsTUFBSzJFLEdBQUtBLElBQU03SyxNQUN2RDBILElBQ0wxSCxFQUFLaUcsUUFBUTJFLEdBQU94RSxTQUFXUyxFQUMvQjdHLEVBQUsrSixPQUFRLEVBQ2J2SSxLQUFLc0osWUFDTHRKLEtBQUt3RyxjQUFjcEcsS0FBSyxDQUFFOEYsUUFBTzFILFNBQ3JDLENBQ09pTCxjQUFjakwsRUFBbUI0SyxFQUFlOUQsR0FFbkQsTUFBTVksRUFBUWxHLEtBQUt1RyxPQUFPMEIsTUFBS0MsR0FBS0EsRUFBRVAsTUFBTWpELE1BQUsyRSxHQUFLQSxJQUFNN0ssTUFDdkQwSCxJQUNMMUgsRUFBS2lHLFFBQVEyRSxHQUFPOUQsUUFBVUEsRUFDOUI5RyxFQUFLaUcsUUFBUTJFLEdBQU9MLFlBQWEsRUFDakN2SyxFQUFLK0osT0FBUSxFQUNidkksS0FBS3NKLFlBQ0x0SixLQUFLd0csY0FBY3BHLEtBQUssQ0FBRThGLFFBQU8xSCxTQUNyQyxDQUNPa0wsY0FBY2xMLEVBQW1CNEssR0FFcEMsTUFBTWxELEVBQVFsRyxLQUFLdUcsT0FBTzBCLE1BQUtDLEdBQUtBLEVBQUVQLE1BQU1qRCxNQUFLMkUsR0FBS0EsSUFBTTdLLE1BQ3ZEMEgsSUFDTDFILEVBQUtpRyxRQUFRMkUsR0FBT0wsWUFBY3ZLLEVBQUtpRyxRQUFRMkUsR0FBT0wsV0FDdER2SyxFQUFLaUcsUUFBUTJFLEdBQU85RCxRQUFVOUcsRUFBS2lHLFFBQVEyRSxHQUFPTCxXQUFhLEdBQUssS0FDcEV2SyxFQUFLK0osT0FBUSxFQUNidkksS0FBS3NKLFlBQ0x0SixLQUFLd0csY0FBY3BHLEtBQUssQ0FBRThGLFFBQU8xSCxTQUNyQyxDQUNPMEksdUJBQXVCMUksR0FFMUIsTUFBTTBILEVBQVFsRyxLQUFLdUcsT0FBTzBCLE1BQUtDLEdBQUtBLEVBQUVQLE1BQU1qRCxNQUFLMkUsR0FBS0EsSUFBTTdLLE1BQzVELElBQUswSCxFQUFPLE9BRVosTUFBTXlELFFBQW9CM0osS0FBS2tKLG1CQUMzQlMsSUFFQUEsRUFBWW5MLEtBQUttSyxXQUFZLEVBQzdCM0ksS0FBS3dHLGNBQWNwRyxLQUFLdUosSUFHNUJuTCxFQUFLbUssV0FBWSxFQUNqQjNJLEtBQUt3RyxjQUFjcEcsS0FBSyxDQUFFOEYsTUFBT0EsRUFBTzFILEtBQU1BLElBRTlDbUUsT0FBT2lILGFBQWFDLFFBQVEsY0FBZWpHLEtBQUtXLFVBQVUsQ0FBRS9GLEtBQU1YLEVBQU1tSCxPQUFPeEcsRUFBS0EsTUFBTSxLQUM5RixDQUNPMEkseUJBRUgsTUFBTW5KLEVBQU00RSxPQUFPaUgsYUFBYUUsUUFBUSxlQUN4QyxJQUFLL0wsRUFBSyxPQUFPLEtBQ2pCLE1BQU1rTCxFQUFpQ3JGLEtBQUtDLE1BQU05RixHQUM1Q08sRUFBT1QsRUFBTWdHLE1BQU1vRixFQUFTekssTUFDbEMsR0FBb0IsaUJBQVRGLEVBQ1gsQ0FDSSxNQUFNNEgsRUFBUWxHLEtBQUt1RyxPQUFPMEIsTUFBS0MsR0FBS0EsRUFBRW5ELE9BQVN6RyxHQUFRNEosRUFBRWhELEtBQU81RyxJQUNoRSxHQUFJNEgsRUFDSixDQUNRQSxFQUFNeUIsTUFBTTFKLE9BQVMsU0FBUytCLEtBQUsrSixXQUFXN0QsRUFBTUosSUFDeEQsTUFBTXRILEVBQU8wSCxFQUFNeUIsTUFBTU0sTUFBS29CLEdBQUtBLEVBQUU3SyxPQUFTRixJQUM5QyxHQUFJRSxFQUNBLE1BQU8sQ0FBRTBILE1BQU9BLEVBQU8xSCxLQUFNQSxFLEVBR3pDLE9BQU8sSUFDWCxDQUVPd0wsWUFBWXhMLEVBQW1CNEssR0FFbEMsTUFBTWxELEVBQVFsRyxLQUFLdUcsT0FBTzBCLE1BQUtDLEdBQUtBLEVBQUVQLE1BQU1qRCxNQUFLMkUsR0FBS0EsSUFBTTdLLE1BQ3ZEMEgsSUFDTDFILEVBQUtpRyxRQUFRd0YsT0FBT2IsRUFBTyxHQUMzQjVLLEVBQUsrSixPQUFRLEVBQ2J2SSxLQUFLc0osWUFDTHRKLEtBQUt3RyxjQUFjcEcsS0FBSyxDQUFFOEYsUUFBTzFILFNBQ3JDLENBQ1EwSSxvQkFBb0JnRCxHQUV4QixNQUFNQyxFQUFnQm5LLEtBQUt1RyxPQUFPMEIsTUFBS0MsR0FBS0EsRUFBRVAsTUFBTWpELE1BQUsyRSxHQUFLQSxJQUFNYSxNQUNwRSxJQUFLQyxFQUFlLE9BQ3BCLElBQUlDLEVBQVlELEVBQWN4QyxNQUFNMEMsUUFBUUgsR0FDeENJLEdBQWMsRUFDbEIsSUFBSyxJQUFJQyxFQUFhdkssS0FBS3VHLE9BQU84RCxRQUFRRixHQUFnQkksRUFBYXZLLEtBQUt1RyxPQUFPdEksT0FBUXNNLElBQzNGLENBQ0ksTUFBTXJFLEVBQVFsRyxLQUFLdUcsT0FBT2dFLEdBRTFCLElBRElyRSxFQUFNeUIsTUFBTTFKLE9BQVMsU0FBUytCLEtBQUsrSixXQUFXN0QsRUFBTUosSUFDakRzRSxFQUFZbEUsRUFBTXlCLE1BQU0xSixPQUFRbU0sSUFDdkMsQ0FDSSxNQUFNNUwsRUFBTzBILEVBQU15QixNQUFNeUMsR0FDekIsR0FBSTVMLEVBQUtpRyxRQUFReEcsT0FBUyxFQUFHLE9BQU9xTSxFQUFhLEVBQUk5TCxFQUFLaUcsUUFBUWpHLEVBQUtpRyxRQUFReEcsT0FBUyxHQUFLTyxFQUFLaUcsUUFBUTZGLEdBQzFHQSxFQUFhLEMsQ0FFakJGLEVBQVksQyxDQUVwQixDQUNPbEQsZUFBZTFJLEdBRWxCLE1BQU0wSCxFQUFRbEcsS0FBS3VHLE9BQU8wQixNQUFLQyxHQUFLQSxFQUFFUCxNQUFNakQsTUFBSzJFLEdBQUtBLElBQU03SyxNQUM1RCxJQUFLMEgsRUFBTyxPQUNaLE1BQU1zRSxRQUFheEssS0FBS3lLLGNBQWNqTSxHQUN0QyxJQUFJeUcsRUFBWSxJQUNaRSxFQUFjM0UsRUFBUW5CLE1BQU02RyxFQUFNMkIsWUFBYSxHQUMvQ2pELEVBQVcsR0FDWDRGLElBRUloTSxFQUFLaUcsUUFBUWlHLFNBQVNGLEtBRXRCdkYsRUFBWXVGLEVBQUt2RixVQUFZdUYsRUFBS3JGLFlBQ2xDQSxFQUFjLEdBRWxCUCxFQUFXNEYsRUFBSzVGLFVBRXBCcEcsRUFBS2lHLFFBQVF2RyxLQUFLLENBQ2QrRyxZQUNBRSxjQUNBUCxXQUNBVSxRQUFTLEtBQ1R5RCxZQUFZLElBRWhCdkssRUFBSytKLE9BQVEsRUFDYnZJLEtBQUtzSixZQUNMdEosS0FBS3dHLGNBQWNwRyxLQUFLLENBQUU4RixRQUFPMUgsUUFDckMsQ0FDTzBJLHVCQUF1QjFJLEdBRTFCLEdBQUlBLEVBQUtpRyxRQUFReEcsT0FBUyxFQUFHLE9BQzdCLE1BQU1pSSxFQUFRbEcsS0FBS3VHLE9BQU8wQixNQUFLQyxHQUFLQSxFQUFFUCxNQUFNakQsTUFBSzJFLEdBQUtBLElBQU03SyxNQUM1RCxJQUFLMEgsRUFBTyxPQUNaLE1BQU0rQyxRQUFpQmpKLEtBQUtrSixtQkFDNUIsR0FBS0QsR0FBWUEsRUFBU3pLLE9BQVNBLEVBQW5DLENBRUEsSUFBSyxNQUFNbU0sS0FBUzFCLEVBQVN6SyxLQUFLaUcsUUFFOUJqRyxFQUFLaUcsUUFBUXZHLEtBQUssQ0FDZCtHLFVBQVcwRixFQUFNMUYsVUFDakJFLFlBQWF3RixFQUFNeEYsWUFDbkJQLFNBQVUrRixFQUFNL0YsU0FDaEJVLFFBQVNxRixFQUFNckYsUUFDZnlELFdBQVk0QixFQUFNNUIsYUFHMUJ2SyxFQUFLK0osT0FBUSxFQUNidkksS0FBS3NKLFlBQ0x0SixLQUFLd0csY0FBY3BHLEtBQUssQ0FBRThGLFFBQU8xSCxRQWRjLENBZW5ELENBRU84SyxZQUVIM0csT0FBT2lJLGFBQWE1SyxLQUFLNkcsWUFDekI3RyxLQUFLNkcsV0FBYWxFLE9BQU9DLFlBQVcsSUFBTTVDLEtBQUs2SyxRQUFRLEtBQ3ZEN0ssS0FBSzRHLG9CQUFvQnhHLEtBQUtnRyxFQUFrQjBFLFFBQ3BELENBQ081RCxtQkFFRzNFLEVBQUsrRSxPQUFNLEtBQU90SCxLQUFLOEcsU0FDN0I5RyxLQUFLOEcsUUFBUyxFQUNkOUcsS0FBSzRHLG9CQUFvQnhHLEtBQUtnRyxFQUFrQjJFLFFBQ2hELE1BQU1DLEVBQWN6SSxFQUFBLElBQVMsS0FDN0IsSUFBSTRCLEdBQVEsRUFDWixJQUFLLE1BQU0rQixLQUFTbEcsS0FBS3VHLE9BRXJCLElBQUssTUFBTS9ILEtBQVEwSCxFQUFNeUIsTUFFakJuSixFQUFLK0osY0FFZ0IvRCxFQUFNeUcsT0FBT3pNLEVBQUtBLEtBQU1BLEVBQUtpRyxTQUc5Q2pHLEVBQUsrSixPQUFRLEVBSWJwRSxHQUFRLFNBS2xCNkcsRUFDTmhMLEtBQUs0RyxvQkFBb0J4RyxLQUFLK0QsRUFBUWlDLEVBQWtCOEUsTUFBUTlFLEVBQWtCaUIsT0FDbEZySCxLQUFLOEcsUUFBUyxDQUNsQixDQUVPcUUsZ0JBRUgsTUFBTyxDQUFFQyxxQkFBc0IsR0FBT0MscUJBQXNCLEdBQ2hFLENBRU9uRSwrQkFFSCxJQUFLbEgsS0FBS3VHLE9BQVEsT0FDbEIsTUFBTWYsUUFBZWhCLEVBQU1pQixZQUMzQixJQUFLLElBQUk1RSxFQUFJLEVBQUdBLEVBQUliLEtBQUt1RyxPQUFPdEksT0FBUTRDLElBQ3hDLENBQ0ksTUFBTXFGLEVBQVFsRyxLQUFLdUcsT0FBTzFGLEdBQzFCLElBQUtxRixFQUFPLFNBQ1osTUFBTW9GLEVBQVcsMkJBQTJCOUYsS0FBVVUsRUFBTUosS0FDeERJLEVBQU0wQixRQUFvRCxPQUExQ2pGLE9BQU9pSCxhQUFhRSxRQUFRd0IsSUFFNUMzSSxPQUFPaUgsYUFBYTJCLFdBQVdELEUsQ0FHM0MsQ0FFUXBFLDBCLE1BRUosTUFBTVgsRUFBNEMsQ0FBQyxFQUM3Q2YsUUFBZWhCLEVBQU1pQixZQUMzQixJQUFLLElBQUk1RSxFQUFJYixLQUFLdUcsT0FBT3RJLE9BQVMsRUFBRzRDLEdBQUssRUFBR0EsSUFDN0MsQ0FDSSxNQUFNcUYsRUFBUWxHLEtBQUt1RyxPQUFPMUYsR0FDMUIsSUFBS3FGLEVBQU8sU0FFWixJQUFJc0YsRUFBcUQsR0FDekQsTUFBTUYsRUFBVywyQkFBMkI5RixLQUFVVSxFQUFNSixLQUM1RCxHQUFJSSxFQUFNMEIsUUFBb0QsT0FBMUNqRixPQUFPaUgsYUFBYUUsUUFBUXdCLEdBRTVDRSxFQUFnQjVILEtBQUtDLE1BQTJDLFFBQXJDLEVBQUFsQixPQUFPaUgsYUFBYUUsUUFBUXdCLFVBQVMsUUFBSSxVQUd4RSxDQUVJLEdBRElwRixFQUFNeUIsTUFBTTFKLE9BQVMsU0FBUytCLEtBQUsrSixXQUFXN0QsRUFBTUosSUFDcERJLEVBQU15QixNQUFNakQsTUFBSzJFLEdBQUtBLEVBQUU1RSxRQUFReEcsT0FBUyxHQUFLb0wsRUFBRTVFLFFBQVFDLE1BQUtDLEdBQUtBLEVBQUVRLFlBQWMsTUFFbEYsSUFBSyxNQUFNc0csS0FBT3ZGLEVBQU15QixNQUN4QixDQUNJLE1BQ00rRCxFQURjbEwsRUFBUW1MLElBQUlGLEVBQUloSCxRQUFRSyxLQUFJSCxHQUFLQSxFQUFFUSxlQUN6QnNHLEVBQUkvQyxZQUNsQzhDLEVBQWN0TixLQUFLLENBQUVNLEtBQU1pTixFQUFJak4sS0FBTWtOLFcsQ0FHekN4RixFQUFNMEIsUUFBVTFCLEVBQU1KLEdBQUssR0FFM0JuRCxPQUFPaUgsYUFBYUMsUUFBUXlCLEVBQVUxSCxLQUFLVyxVQUFVaUgsRyxDQUc3RGpGLEVBQU9MLEVBQU1KLEdBQUduSCxZQUFjNk0sRUFBYzFHLEtBQUl1RSxJQUVyQyxDQUNIN0ssS0FBTTZLLEVBQUU3SyxLQUNSb04sV0FBWS9OLEVBQU1tSCxPQUFPcUUsRUFBRTdLLE1BQU0sR0FDakNxTixZQUFheEMsRUFBRXFDLFFBQ2ZJLG1CQUFvQnRMLEVBQVFuQixNQUFNZ0ssRUFBRXFDLFFBQVMsT0FFbEQ1RCxNQUFLLENBQUNDLEVBQUdDLElBQU1ELEVBQUV2SixLQUFPd0osRUFBRXhKLE0sQ0FFakMsT0FBTytILENBQ1gsQ0FDT1csc0IsVUFFSCxNQUFNNkUsRUFBUy9MLEtBQUttTCxnQkFFZGEsRUFBOEQsUUFBNUMsRUFBQW5PLEVBQUEsTUFBWUEsRUFBTW1ILE9BQU83RyxLQUFLcUssT0FBTyxXQUFPLFFBQUksRUFDbEV5RCxFQUErSCxRQUE3RyxFQUFBcE8sRUFBQSxNQUFZQSxFQUFNbUgsT0FBT2dILEVBQW1CLE9BQXVCRCxFQUFPWCxxQkFBdUIsSUFBSyxXQUFPLFFBQUksRUFDbkljLEVBQStILFFBQTdHLEVBQUFyTyxFQUFBLE1BQVlBLEVBQU1tSCxPQUFPZ0gsRUFBbUIsT0FBdUJELEVBQU9WLHFCQUF1QixJQUFLLFdBQU8sUUFBSSxFQUVuSWMsRUFBOEIsR0FDcEMsSUFBSVQsRUFBa0IsRUFDdEIsR0FBTTFMLEtBQUt1RyxPQUNYLE9BQ1VoRSxFQUFLK0UsT0FBTSxLQUFPdEgsS0FBSytHLGtCQUM3Qi9HLEtBQUsrRyxpQkFBa0IsRUFFdkIsTUFBTVIsUUFBZXZHLEtBQUtvTSxvQkFHMUIsSUFBSyxJQUFJdkwsRUFBSWIsS0FBS3VHLE9BQU90SSxPQUFTLEVBQUc0QyxHQUFLLEVBQUdBLElBQzdDLENBQ0ksTUFBTXFGLEVBQVFLLEVBQU92RyxLQUFLdUcsT0FBTzFGLEdBQUdpRixJQUNoQ0ksR0FBT2lHLEVBQVNqTyxRQUFRZ0ksRSxDQUloQyxJQUFLLElBQUlyRixFQUFJLEVBQUdBLEVBQUlzTCxFQUFTbE8sT0FBUTRDLElBQ3JDLENBQ0ksTUFBTXJDLEVBQU8yTixFQUFTdEwsR0FDdEIsSUFBSyxJQUFJd0wsRUFBSSxFQUFHQSxFQUFJeEwsR0FFZ0IsSUFBNUJyQyxFQUFLc04sbUJBRlVPLElBQ3ZCLENBRUksTUFBTUMsRUFBV0gsRUFBU0UsR0FDcEJFLEVBQVNyTixLQUFLc04sSUFBSXROLEtBQUt1TixJQUFJak8sRUFBS3NOLG9CQUFxQjVNLEtBQUt1TixJQUFJSCxFQUFTUixxQkFDekV0TixFQUFLc04sbUJBQXFCLEdBQUtRLEVBQVNSLG1CQUFxQixHQUU3RFEsRUFBU1Isb0JBQXNCUyxFQUMvQi9OLEVBQUtzTixvQkFBc0JTLEdBRXRCL04sRUFBS3NOLG1CQUFxQixHQUFLUSxFQUFTUixtQkFBcUIsSUFFbEVRLEVBQVNSLG9CQUFzQlMsRUFDL0IvTixFQUFLc04sb0JBQXNCUyxHQUUvQkQsRUFBU1IsbUJBQXFCdEwsRUFBUW5CLE1BQU1pTixFQUFTUixtQkFBb0IsRSxDQUU3RXROLEVBQUtzTixtQkFBcUJ0TCxFQUFRbkIsTUFBTWIsRUFBS3NOLG1CQUFvQixFLENBRXJFSixFQUFVbEwsRUFBUW1MLElBQUlRLEVBQVNySCxLQUFJdUUsR0FBSzdJLEVBQVFuQixNQUFNZ0ssRUFBRXlDLG1CQUFvQixNQUU1RTlMLEtBQUsrRyxpQkFBa0IsQyxDQUUzQixNQUFPLENBQ0gyRSxVQUNBZ0IsZ0JBQWlCUCxFQUFTak0sUUFBT21KLEdBQThCLElBQXpCQSxFQUFFeUMscUJBQ3hDYSxhQUFjUixFQUFTak0sUUFBT21KLEdBQThCLElBQXpCQSxFQUFFeUMsb0JBQTRCekMsRUFBRTdLLE1BQVF5TixJQUMzRVcsYUFBY1QsRUFBU2pNLFFBQU9tSixHQUE4QixJQUF6QkEsRUFBRXlDLG9CQUE0QnpDLEVBQUU3SyxNQUFRME4sR0FBbUI3QyxFQUFFN0ssS0FBT3lOLElBRS9HLEVDbGFHLE1BQU1ZLEdBRUssRUFBQUMsUUFBVSxDQUNwQixDQUNJN0ssVUFBVywwQ0FDWEgsS0FBTSxTQUNOaUwsS0FBTSx1QkFDTkMsTUFBTyxtREFDUEMsUUFBU0MsSUFBSyxNQUFDLE9BQVEsUUFBUixFQUFBQSxFQUFHQyxhQUFLLGVBQUVDLHlCQUF5QkMsTUFBSyxJQUFNSCxFQUFHSSxpQkFBZ0IsSUNLckYsTUFBTUMsRUEyQlQsY0FqQlEsS0FBQUMscUJBQThFLEdBSTlFLEtBQUFDLFdBQXVDLEdBQ3ZDLEtBQUFDLFNBQStCLEdBTS9CLEtBQUF6RyxRQUF5QixHQUV6QixLQUFBMEcsaUJBQW1CLElBQUloTyxFQU0xQmdELE9BQWVpTCxRQUFVNU4sS0FDMUJBLEtBQUs2TixXQUNULENBQ1EzRyxrQkFFSixPQUNBLENBQ0ksTUFBTTRHLEVBQVN0TSxTQUFTdU0sY0FBYywyREFDdEMsR0FBS0QsRUFBTCxDQU1BOU4sS0FBS2dPLGFBQWV4TSxTQUFTQyxjQUFjLFVBQzNDekIsS0FBS2dPLGFBQWEvTCxVQUFZLGdCQUM5QmpDLEtBQUtnTyxhQUFhbk0sWUFBWVAsRUFBYTJNLElBQUksNkJBQy9Dak8sS0FBS2dPLGFBQWFoQixNQUFRLGtCQUMxQmhOLEtBQUtnTyxhQUFhRSxRQUFVLElBQU1sTyxLQUFLbU8sZ0JBQ3ZDTCxFQUFPak0sWUFBWTdCLEtBQUtnTyxjQUV4QmhPLEtBQUtvTyxpQkFFQ3BPLEtBQUtxTyxjQUVXLFdBQWxCQyxTQUFTQyxNQUVUdk8sS0FBS21PLGdCQUdUbk8sS0FBSzJOLGlCQUFpQnZOLEtBQUtKLEtBQUt3TyxjQUVoQyxLLE9BdEJVak0sRUFBQSxJQUFTLEUsQ0F3QjNCLENBQ1E0TCxnQixNQUVDbk8sS0FBS3lPLGlCQUNnQyxTQUF0Q3pPLEtBQUt5TyxlQUFldE0sTUFBTXVNLFNBRTFCMU8sS0FBS3lPLGVBQWV0TSxNQUFNdU0sUUFBVSxRQUNwQ0osU0FBU0MsS0FBTyxTQUNoQi9NLFNBQVM0QixLQUFLakIsTUFBTXdNLFNBQVcsU0FDM0IzTyxLQUFLNE8saUJBQWdCNU8sS0FBSzRPLGVBQWVDLFVBQVksSUFDL0MsUUFBVixFQUFBN08sS0FBS21OLGFBQUssU0FBRWhHLGNBQ1pvRyxFQUFVdUIsT0FBTzFPLEtBQUtKLFFBSXRCQSxLQUFLeU8sZUFBZXRNLE1BQU11TSxRQUFVLE9BQ3BDSixTQUFTQyxLQUFPLEdBQ2hCL00sU0FBUzRCLEtBQUtqQixNQUFNd00sU0FBVyxXQUV2QyxDQUNRSCxhQUVKLE1BQWdELFNBQXpDNUUsYUFBYUUsUUFBUSxlQUNoQyxDQUNRaUYsaUJBRUEvTyxLQUFLd08sYUFBYzVFLGFBQWFDLFFBQVEsZUFBZ0IsU0FDdkRELGFBQWFDLFFBQVEsZUFBZ0IsUUFDMUM3SixLQUFLMk4saUJBQWlCdk4sS0FBS0osS0FBS3dPLGFBQ3BDLENBRVFKLFdBRUosTUFBTWpNLEVBQVFYLFNBQVNDLGNBQWMsU0FDckNVLEVBQU0wTSxVQ2hIWSwyMkpEaUhsQnJOLFNBQVM0QixLQUFLdkIsWUFBWU0sR0FFMUJuQyxLQUFLeU8sZUFBaUJqTixTQUFTQyxjQUFjLE9BQzdDekIsS0FBS3lPLGVBQWV4TSxVQUFZLFFBQ2hDakMsS0FBS3lPLGVBQWV0TSxNQUFNdU0sUUFBVSxPQUNwQ2xOLFNBQVM0QixLQUFLNEwsT0FBT2hQLEtBQUt5TyxnQkFFMUJ6TyxLQUFLaVAsZUFBaUJ6TixTQUFTQyxjQUFjLE9BQzdDekIsS0FBS2lQLGVBQWVoTixVQUFZLGNBQ2hDakMsS0FBS3lPLGVBQWVPLE9BQU9oUCxLQUFLaVAsZ0JBRWhDLE1BQU1DLEVBQWMxTixTQUFTQyxjQUFjLFVBQzNDeU4sRUFBWWpOLFVBQVksZUFDeEJpTixFQUFZck4sWUFBWVAsRUFBYTJNLElBQUksVUFDekNpQixFQUFZaEIsUUFBVSxJQUFNbE8sS0FBS21PLGdCQUNqQ25PLEtBQUtpUCxlQUFlcE4sWUFBWXFOLEdBRWhDbFAsS0FBS21QLGVBQWlCM04sU0FBU0MsY0FBYyxVQUM3Q3pCLEtBQUttUCxlQUFlbE4sVUFBWSxtQkFDaENqQyxLQUFLbVAsZUFBZWpCLFFBQVUsSUFBTWxPLEtBQUsrTyxpQkFDekMvTyxLQUFLaVAsZUFBZXBOLFlBQVk3QixLQUFLbVAsZ0JBQ3JDblAsS0FBSzJOLGlCQUFpQjlOLElBQUl1UCxJLFFBRWxCQSxFQUF5QixRQUFuQixFQUFBcFAsS0FBS3lPLHNCQUFjLFNBQUVZLFVBQVVDLElBQUksV0FDckIsUUFBbkIsRUFBQXRQLEtBQUt5TyxzQkFBYyxTQUFFWSxVQUFVRSxPQUFPLFdBQ3ZDdlAsS0FBS21QLGlCQUVMblAsS0FBS21QLGVBQWVOLFVBQVksR0FDaEM3TyxLQUFLbVAsZUFBZUgsT0FBT0ksRUFBTzlOLEVBQWEyTSxJQUFJLGNBQWdCM00sRUFBYTJNLElBQUksYyxHQUV6RmpPLE1BRUgsTUFBTXdQLEVBQWdCeFAsS0FBS3lQLHVCQUMzQnpQLEtBQUtpUCxlQUFlcE4sWUFBWTJOLEdBRWhDLE1BQU1FLEVBQWlCbE8sU0FBU0MsY0FBYyxPQUM5Q2lPLEVBQWVWLE9BQU8xTixFQUFhMk0sSUFBSSxZQUFZLElBQ25EeUIsRUFBZVYsT0FBTyxXQUN0QlUsRUFBZXpOLFVBQVksb0JBQzNCeU4sRUFBZXhCLFFBQVUsSUFBTXNCLEVBQWNILFVBQVVFLE9BQU8sc0JBQzlERyxFQUFldk4sTUFBTXdOLE9BQVMsVUFDOUJELEVBQWV2TixNQUFNeU4sZUFBaUIsWUFDdEM1UCxLQUFLaVAsZUFBZXBOLFlBQVk2TixHQUdoQyxNQUFNRyxFQUFxQnJPLFNBQVNDLGNBQWMsUUFDbERvTyxFQUFtQjNOLFVBQVksU0FDL0JsQyxLQUFLaVAsZUFBZXBOLFlBQVlnTyxHQUVoQzdQLEtBQUs4UCxjQUFnQnRPLFNBQVNDLGNBQWMsVUFDNUN6QixLQUFLOFAsY0FBYzdOLFVBQVksa0JBQy9CakMsS0FBSzhQLGNBQWNDLFNBQVcsSUFBTS9QLEtBQUtnUSx3QkFDekNoUSxLQUFLaVAsZUFBZXBOLFlBQVk3QixLQUFLOFAsZUFFckM5UCxLQUFLaVEsV0FBYXpPLFNBQVNDLGNBQWMsUUFDekN6QixLQUFLaVEsV0FBV2hPLFVBQVksaUJBQzVCakMsS0FBS2lRLFdBQVcvQixRQUFVLElBQU1sTyxLQUFLa1Esb0JBQ3JDbFEsS0FBS2lQLGVBQWVELE9BQU9oUCxLQUFLaVEsWUFFaEMsTUFBTUUsRUFBZ0IzTyxTQUFTQyxjQUFjLE9BQzdDME8sRUFBY2xPLFVBQVksYUFDMUJqQyxLQUFLaVAsZUFBZUQsT0FBT21CLEdBRTNCblEsS0FBS29RLGFBQWU1TyxTQUFTQyxjQUFjLE9BQzNDekIsS0FBS29RLGFBQWFsTyxVQUFZLFlBQzlCbEMsS0FBS29RLGFBQWFuTyxVQUFZLG1CQUM5QmtPLEVBQWNuQixPQUFPaFAsS0FBS29RLGNBRTFCcFEsS0FBS3FRLGVBQWlCN08sU0FBU0MsY0FBYyxPQUM3Q3pCLEtBQUtxUSxlQUFlcE8sVUFBWSwwQ0FDaENrTyxFQUFjbkIsT0FBT2hQLEtBQUtxUSxnQkFFMUJyUSxLQUFLNE8sZUFBaUJwTixTQUFTQyxjQUFjLE9BQzdDekIsS0FBSzRPLGVBQWUzTSxVQUFZLFdBQ2hDakMsS0FBS2lQLGVBQWVwTixZQUFZN0IsS0FBSzRPLGVBRXpDLENBQ1FhLHVCQUVKLE1BQU1hLEVBQVU5TyxTQUFTQyxjQUFjLE9BQ3ZDNk8sRUFBUXJPLFVBQVksaUNBQ3BCLE1BQU1zTyxFQUFPL08sU0FBU0MsY0FBYyxPQUNwQzhPLEVBQUt0TyxVQUFZLG1CQUNqQnFPLEVBQVF0QixPQUFPdUIsR0FDZkEsRUFBS3JDLFFBQVUsSUFBTW9DLEVBQVFqQixVQUFVQyxJQUFJLHNCQUUzQyxNQUFNa0IsRUFBUWhQLFNBQVNDLGNBQWMsT0FDckMrTyxFQUFNdk8sVUFBWSxvQkFDbEJxTyxFQUFRdEIsT0FBT3dCLEdBRWYsTUFBTUMsRUFBa0JqUCxTQUFTQyxjQUFjLE9BQy9DZ1AsRUFBZ0J4TyxVQUFZLHNCQUM1QnVPLEVBQU14QixPQUFPeUIsR0FFYixJQUFLLE1BQU1DLEtBQVU3RCxFQUF5QkMsUUFDOUMsQ0FDSSxNQUFNd0QsRUFBVTlPLFNBQVNDLGNBQWMsVUFDdkM2TyxFQUFRck8sVUFBWXlPLEVBQU96TyxVQUMzQnFPLEVBQVF0QixPQUFPMU4sRUFBYTJNLElBQUl5QyxFQUFPNU8sT0FDdkN3TyxFQUFRdEIsT0FBTzBCLEVBQU8zRCxNQUNsQjJELEVBQU8xRCxRQUFPc0QsRUFBUW5PLE1BQU13TixPQUFTLFFBQ3pDVyxFQUFRdEQsTUFBUTBELEVBQU8xRCxNQUN2QnNELEVBQVFwQyxRQUFVLElBQU13QyxFQUFPekQsUUFBUWpOLE1BQ3ZDeVEsRUFBZ0I1TyxZQUFZeU8sRSxDQUdoQyxNQUFNSyxFQUFZLDBrREFDbEIsSUFBSyxNQUFNQyxLQUFXRCxFQUN0QixDQUNJLE1BQU1FLEVBQWlCclAsU0FBU0MsY0FBYyxPQUM5Q29QLEVBQWU1TyxVQUFZLHNCQUMzQnVPLEVBQU14QixPQUFPNkIsR0FDYixNQUFNQyxFQUFldFAsU0FBU0MsY0FBYyxPQUM1Q3FQLEVBQWE3TyxVQUFZLG9CQUN6QjZPLEVBQWE1TyxVQUFZME8sRUFBUUEsUUFDakNDLEVBQWU3QixPQUFPOEIsR0FDdEIsTUFBTUMsRUFBT3ZQLFNBQVNDLGNBQWMsTUFDcENzUCxFQUFLOU8sVUFBWSxtQkFDakI0TyxFQUFlN0IsT0FBTytCLEdBQ3RCLElBQUssTUFBTWhFLEtBQVE2RCxFQUFRN0QsS0FDM0IsQ0FDSSxNQUFNaUUsRUFBY3hQLFNBQVNDLGNBQWMsTUFDM0N1UCxFQUFZOU8sVUFBWTZLLEVBQ3hCZ0UsRUFBSy9CLE9BQU9nQyxFLEVBR3BCLE9BQU9WLENBQ1gsQ0FDUXBKLG9CQUVBbEgsS0FBS21OLFFBRUxuTixLQUFLbU4sTUFBTTNHLGNBQWN2RyxJQUFJRCxLQUFLd0csY0FBZXhHLE1BQ2pEQSxLQUFLbU4sTUFBTTFHLGlCQUFpQnhHLElBQUlELEtBQUt5RyxpQkFBa0J6RyxNQUN2REEsS0FBS21OLE1BQU12RyxvQkFBb0IzRyxJQUFJRCxLQUFLNEcsb0JBQXFCNUcsTUFDN0RBLEtBQUttTixNQUFNekcsZUFBZXpHLElBQUlELEtBQUswRyxlQUFnQjFHLE1BQ25EQSxLQUFLbU4sTUFBTXhHLGdCQUFnQjFHLElBQUlELEtBQUsyRyxnQkFBaUIzRyxPQUV6REEsS0FBS21OLE1BQVEsSUFBSTdHLEVBQ2pCdEcsS0FBS21OLE1BQU0zRyxjQUFjM0csR0FBR0csS0FBS3dHLGNBQWV4RyxNQUNoREEsS0FBS21OLE1BQU0xRyxpQkFBaUI1RyxHQUFHRyxLQUFLeUcsaUJBQWtCekcsTUFDdERBLEtBQUttTixNQUFNdkcsb0JBQW9CL0csR0FBR0csS0FBSzRHLG9CQUFxQjVHLE1BQzVEQSxLQUFLbU4sTUFBTXpHLGVBQWU3RyxHQUFHRyxLQUFLMEcsZUFBZ0IxRyxNQUNsREEsS0FBS21OLE1BQU14RyxnQkFBZ0I5RyxHQUFHRyxLQUFLMkcsZ0JBQWlCM0csWUFFOUNBLEtBQUttTixNQUFNOEQsWUFDckIsQ0FDUUMsaUJBQWlCck0sR0FFckIsR0FBSTdFLEtBQUttUixnQkFBa0J0TSxFQUFLcUIsT0FBU2xHLEtBQUs0TyxlQUM5QyxDQUNJLElBQUl3QyxFQUFnQnBSLEtBQUt5TixXQUFXeEYsTUFBS29CLEdBQUtBLEVBQUU3SyxPQUFTcUcsRUFBS3JHLE9BQzlELElBQUs0UyxFQUNMLENBZUksR0FkQUEsRUFBZ0IsQ0FDWjVTLEtBQU1xRyxFQUFLckcsS0FDWHNQLE9BQVF0TSxTQUFTQyxjQUFjLE9BQy9CdUwsTUFBT3hMLFNBQVNDLGNBQWMsUUFDOUJnRCxRQUFTLEdBQ1Q0TSxXQUFZN1AsU0FBU0MsY0FBYyxVQUNuQzZQLFlBQWE5UCxTQUFTQyxjQUFjLFVBQ3BDOFAsbUJBQW9CL1AsU0FBU0MsY0FBYyxPQUMzQytQLGlCQUFrQmhRLFNBQVNDLGNBQWMsUUFFN0N6QixLQUFLeU4sV0FBV3ZQLEtBQUtrVCxHQUNyQkEsRUFBY3RELE9BQU83TCxVQUFZLFVBQ2pDakMsS0FBSzRPLGVBQWUvTSxZQUFZdVAsRUFBY3RELFFBRUosSUFBdEMsSUFBSTNQLEtBQUswRyxFQUFLckcsS0FBS0EsTUFBTWdCLFNBQzdCLENBQ0ksTUFBTWlTLEVBQWdCalEsU0FBU0MsY0FBYyxPQUM3Q2dRLEVBQWN4UCxVQUFZLG9CQUMxQmpDLEtBQUs0TyxlQUFlL00sWUFBWTRQLEUsQ0FtQnBDLEdBaEJBTCxFQUFjdEQsT0FBT2tCLE9BQU9vQyxFQUFjQyxZQUMxQ0QsRUFBY0MsV0FBV25ELFFBQVUsS0FBSyxNQUFDLE9BQVUsUUFBVixFQUFBbE8sS0FBS21OLGFBQUssZUFBRXVFLGlCQUFpQjdNLEVBQUtyRyxLQUFLLEVBQ2hGNFMsRUFBY0MsV0FBV3BQLFVBQVksa0NBQ3JDbVAsRUFBY0MsV0FBV3JFLE1BQVEsZUFFakNvRSxFQUFjcEUsTUFBTS9LLFVBQVksZ0JBQ2hDbVAsRUFBY3BFLE1BQU05SyxVQUFZLElBQUkvRCxLQUFLMEcsRUFBS3JHLEtBQUtBLE1BQU1tVCxlQUNyRDlNLEVBQUtyRyxLQUFLaUssZUFBZTJJLEVBQWNwRSxNQUFNcUMsVUFBVUMsSUFBSSx5QkFDL0Q4QixFQUFjdEQsT0FBT2tCLE9BQU9vQyxFQUFjcEUsT0FFMUNvRSxFQUFjRyxtQkFBbUJ0UCxVQUFZLHlCQUM3Q21QLEVBQWN0RCxPQUFPa0IsT0FBT29DLEVBQWNHLG9CQUUxQ0gsRUFBY0ksaUJBQWlCdlAsVUFBWSx3QkFDM0NtUCxFQUFjdEQsT0FBT2tCLE9BQU9vQyxFQUFjSSxtQkFFckMzTSxFQUFLcUIsTUFBTTBCLE9BQ2hCLENBQ0ksTUFBTTBILEVBQU05TixTQUFTQyxjQUFjLFVBQ25DNk4sRUFBSXpOLFlBQVlQLEVBQWEyTSxJQUFJLFFBQ2pDcUIsRUFBSXJOLFVBQVksb0NBQ2hCcU4sRUFBSXBCLFFBQVUsS0FBSyxNQUFDLE9BQVUsUUFBVixFQUFBbE8sS0FBS21OLGFBQUssZUFBRXlFLFNBQVMvTSxFQUFLckcsS0FBSyxFQUNuRDRTLEVBQWN0RCxPQUFPa0IsT0FBT00sR0FFNUI4QixFQUFjRSxZQUFjOVAsU0FBU0MsY0FBYyxVQUNuRDJQLEVBQWNFLFlBQVl6UCxZQUFZUCxFQUFhMk0sSUFBSSwrQkFDdkRtRCxFQUFjRSxZQUFZdEUsTUFBUSwwQkFDbENvRSxFQUFjRSxZQUFZclAsVUFBWSxnQ0FDdENtUCxFQUFjRSxZQUFZcEQsUUFBVSxLQUFLLE1BQUMsT0FBVSxRQUFWLEVBQUFsTyxLQUFLbU4sYUFBSyxlQUFFMEUsaUJBQWlCaE4sRUFBS3JHLEtBQUssRUFDakY0UyxFQUFjdEQsT0FBT2tCLE9BQU9vQyxFQUFjRSxZLENBRTlDdFIsS0FBSzhSLGFBQWFWLEUsQ0FFdEIsT0FBT0EsQyxDQUVYLE9BQU8sSUFDWCxDQUNRVyxrQkFBa0JsTixFQUFrRHVNLEVBQXVDekcsR0FFL0csSUFBSXFILEVBQWlCWixFQUFjM00sUUFBUXdELE1BQUtnSyxHQUFLQSxFQUFFdEgsUUFBVUEsSUFDakUsSUFBS3FILEVBQ0wsQ0FDSUEsRUFBaUIsQ0FDYnJILFFBQ0FtRCxPQUFRdE0sU0FBU0MsY0FBYyxPQUMvQndELFVBQVd6RCxTQUFTQyxjQUFjLFNBQ2xDeVEsUUFBUzFRLFNBQVNDLGNBQWMsU0FDaEN4RCxPQUFRdUQsU0FBU0MsY0FBYyxTQUMvQjRELE9BQVE3RCxTQUFTQyxjQUFjLFVBQy9CNkQsUUFBUzlELFNBQVNDLGNBQWMsU0FDaEMwUSxjQUFlM1EsU0FBU0MsY0FBYyxVQUN0QzJRLGdCQUFpQjVRLFNBQVNDLGNBQWMsUUFFNUMyUCxFQUFjM00sUUFBUXZHLEtBQUs4VCxHQUUzQkEsRUFBZWxFLE9BQU83TCxVQUFZLFdBQ2xDbVAsRUFBY3RELE9BQU9qTSxZQUFZbVEsRUFBZWxFLFFBRWhEa0UsRUFBZS9NLFVBQVVvTixLQUFPLE9BQ2hDTCxFQUFlL00sVUFBVWhELFVBQVksaUJBQ2pDNEMsRUFBS3FCLE1BQU0wQixTQUFRb0ssRUFBZS9NLFVBQVVxTixVQUFXLEdBQzNETixFQUFlL00sVUFBVThLLFNBQVcsSyxVQUVoQyxNQUFNN0ssRUFBTXlGLEVBQU0xRixVQUFZMEYsRUFBTXhGLFlBQzFCLFFBQVYsRUFBQW5GLEtBQUttTixhQUFLLFNBQUVoRSxnQkFBZ0J0RSxFQUFLckcsS0FBTXFHLEVBQUtyRyxLQUFLaUcsUUFBUTRGLFFBQVFNLEdBQVE5TSxFQUFNMFUsaUJBQWdELFFBQS9CLEVBQUFQLGFBQWMsRUFBZEEsRUFBZ0IvTSxVQUFVZ0IsYUFBSyxRQUFJLFVBQ25JLE1BQU1oSSxFQUFTdUMsRUFBUW5CLE1BQU02RixFQUFNeUYsRUFBTTFGLFVBQVcsR0FDMUMsUUFBVixFQUFBakYsS0FBS21OLGFBQUssU0FBRTVELGtCQUFrQjFFLEVBQUtyRyxLQUFNcUcsRUFBS3JHLEtBQUtpRyxRQUFRNEYsUUFBUU0sR0FBUTFNLEVBQU8sRUFFdEYrVCxFQUFlbEUsT0FBT2pNLFlBQVltUSxFQUFlL00sV0FFakQsTUFBTXVOLEVBQVdoUixTQUFTQyxjQUFjLFFBQ3hDK1EsRUFBU3ZRLFVBQVksZUFDckJ1USxFQUFTdFEsVUFBWSxJQUNyQjhQLEVBQWVsRSxPQUFPak0sWUFBWTJRLEdBRWxDUixFQUFlRSxRQUFRRyxLQUFPLE9BQzlCTCxFQUFlRSxRQUFRalEsVUFBWSxlQUMvQjRDLEVBQUtxQixNQUFNMEIsU0FBUW9LLEVBQWVFLFFBQVFJLFVBQVcsR0FDekROLEVBQWVFLFFBQVFuQyxTQUFXLEssTUFFOUIsR0FBSWlDLGFBQWMsRUFBZEEsRUFBZ0JFLFFBQ3BCLENBQ0ksTUFBTWpVLEVBQVN1QyxFQUFRbkIsTUFBTXhCLEVBQU0wVSxpQkFBaUJQLEVBQWVFLFFBQVFqTSxPQUFTMEUsRUFBTTFGLFVBQVcsR0FDM0YsUUFBVixFQUFBakYsS0FBS21OLGFBQUssU0FBRTVELGtCQUFrQjFFLEVBQUtyRyxLQUFNcUcsRUFBS3JHLEtBQUtpRyxRQUFRNEYsUUFBUU0sR0FBUTFNLEUsR0FHbkYrVCxFQUFlbEUsT0FBT2pNLFlBQVltUSxFQUFlRSxTQUdqREYsRUFBZTNNLE9BQU8wSyxTQUFXLEtBQUssUUFBQyxPQUFVLFFBQVYsRUFBQS9QLEtBQUttTixhQUFLLGVBQUUzRCxhQUFhM0UsRUFBS3JHLEtBQU1xRyxFQUFLckcsS0FBS2lHLFFBQVE0RixRQUFRTSxHQUFvQyxRQUE1QixFQUFBcUgsYUFBYyxFQUFkQSxFQUFnQjNNLE9BQU9ZLGFBQUssUUFBSSxHQUFHLEVBQzVJcEIsRUFBS3FCLE1BQU0wQixTQUFRb0ssRUFBZTNNLE9BQU9pTixVQUFXLEdBQ3hETixFQUFlM00sT0FBT3BELFVBQVksa0JBQ2xDK1AsRUFBZWxFLE9BQU9qTSxZQUFZbVEsRUFBZTNNLFFBQ2pEckYsS0FBS3lTLHNCQUFzQlQsRUFBZTNNLFFBRUwsSUFBakMrTCxFQUFjM00sUUFBUXhHLFNBRXRCbVQsRUFBY3NCLFNBQVdsUixTQUFTQyxjQUFjLFFBQ2hEMlAsRUFBY3NCLFNBQVN6USxVQUFZLGVBQ25DK1AsRUFBZWxFLE9BQU9rQixPQUFPb0MsRUFBY3NCLFdBRy9DVixFQUFlL1QsT0FBT29VLEtBQU8sU0FDN0JMLEVBQWUvVCxPQUFPZ0UsVUFBWSxrQkFDbEMrUCxFQUFlL1QsT0FBTzBVLEtBQU8sT0FDekI5TixFQUFLcUIsTUFBTTBCLFNBQVFvSyxFQUFlL1QsT0FBT3FVLFVBQVcsR0FDeEROLEVBQWUvVCxPQUFPOFIsU0FBVyxLLE1BRW5CLFFBQVYsRUFBQS9QLEtBQUttTixhQUFLLFNBQUU1RCxrQkFBa0IxRSxFQUFLckcsS0FBTXFHLEVBQUtyRyxLQUFLaUcsUUFBUTRGLFFBQVFNLEdBQVE3SixFQUFZOFIsUUFBUUMsWUFBV2IsYUFBYyxFQUFkQSxFQUFnQi9ULE9BQU9nSSxRQUFTLE1BQU0sRUFFcEorTCxFQUFlbEUsT0FBT2pNLFlBQVltUSxFQUFlL1QsUUFFakQsTUFBTTZVLEVBQWdCdFIsU0FBU0MsY0FBYyxRQUs3QyxHQUpBcVIsRUFBYzdRLFVBQVksb0JBQzFCNlEsRUFBYzVRLFVBQVlwQixFQUFZTyxjQUN0QzJRLEVBQWVsRSxPQUFPak0sWUFBWWlSLElBRTdCak8sRUFBS3FCLE1BQU0wQixPQUNoQixDQUNJb0ssRUFBZUcsY0FBY2xRLFVBQVksc0NBQ3pDK1AsRUFBZUcsY0FBY2pFLFFBQVUsS0FBSyxNQUFDLE9BQVUsUUFBVixFQUFBbE8sS0FBS21OLGFBQUssZUFBRXpELGNBQWM3RSxFQUFLckcsS0FBTXFHLEVBQUtyRyxLQUFLaUcsUUFBUTRGLFFBQVFNLEdBQU8sRUFDbkhxSCxFQUFlbEUsT0FBT2pNLFlBQVltUSxFQUFlRyxlQUVqRCxNQUFNNUMsRUFBUy9OLFNBQVNDLGNBQWMsVUFDdEM4TixFQUFPMU4sWUFBWVAsRUFBYTJNLElBQUksV0FDcENzQixFQUFPdE4sVUFBWSx1Q0FDbkJzTixFQUFPckIsUUFBVSxLQUFLLE1BQUMsT0FBVSxRQUFWLEVBQUFsTyxLQUFLbU4sYUFBSyxlQUFFbkQsWUFBWW5GLEVBQUtyRyxLQUFNcUcsRUFBS3JHLEtBQUtpRyxRQUFRNEYsUUFBUU0sR0FBTyxFQUMzRnFILEVBQWVsRSxPQUFPak0sWUFBWTBOLEUsQ0FHdEN5QyxFQUFlSSxnQkFBZ0JwRCxPQUFPMU4sRUFBYTJNLElBQUksV0FBVyxJQUNsRStELEVBQWVJLGdCQUFnQnBELE9BQU8sd0JBQ3RDZ0QsRUFBZUksZ0JBQWdCblEsVUFBWSxnREFDM0MrUCxFQUFlbEUsT0FBT2pNLFlBQVltUSxFQUFlSSxpQkFFakRKLEVBQWUxTSxRQUFRK00sS0FBTyxPQUM5QkwsRUFBZTFNLFFBQVF5TixZQUFjLGtCQUNyQ2YsRUFBZTFNLFFBQVEwSCxNQUFRLGtCQUMvQmdGLEVBQWUxTSxRQUFRckQsVUFBWSxtQkFDL0I0QyxFQUFLcUIsTUFBTTBCLFNBQVFvSyxFQUFlMU0sUUFBUWdOLFVBQVcsR0FDekROLEVBQWUxTSxRQUFReUssU0FBVyxLLFFBRXBCLFFBQVYsRUFBQS9QLEtBQUttTixhQUFLLFNBQUUxRCxjQUFjNUUsRUFBS3JHLEtBQU1xRyxFQUFLckcsS0FBS2lHLFFBQVE0RixRQUFRTSxHQUFxQyxRQUE3QixFQUFBcUgsYUFBYyxFQUFkQSxFQUFnQjFNLFFBQVFXLGFBQUssUUFBSSxHQUFHLEVBRS9HK0wsRUFBZWxFLE9BQU9qTSxZQUFZbVEsRUFBZTFNLFEsQ0FHckQsT0FBTzBNLENBQ1gsQ0FDUUYsYUFBYXRULEdBRWpCLEdBQUl3QixLQUFLME4sU0FBU3pQLE9BQVMsR0FBMkMsSUFBdEMsSUFBSUUsS0FBS0ssRUFBS0EsS0FBS0EsTUFBTWdCLFNBQ3pELENBQ0ksTUFBTXdULEVBQVUsQ0FDWnJMLE1BQU8sQ0FBQ25KLEdBQ1I4UixRQUFTOU8sU0FBU0MsY0FBYyxRQUVwQ3VSLEVBQVExQyxRQUFRck8sVUFBWSxjQUM1QmpDLEtBQUswTixTQUFTeFAsS0FBSzhVLEdBQ25CeFUsRUFBS3NQLE9BQU9qTSxZQUFZbVIsRUFBUTFDLFNBQ2hDOVIsRUFBS3NQLE9BQU8zTCxNQUFNOFEsVUFBWSxNLE1BSTlCalQsS0FBSzBOLFNBQVMxTixLQUFLME4sU0FBU3pQLE9BQVMsR0FBRzBKLE1BQU16SixLQUFLTSxFQUUzRCxDQUNRZ0ksY0FBYzNCLEcsVUFFbEIsR0FBSTdFLEtBQUttUixnQkFBa0J0TSxFQUFLcUIsT0FBU2xHLEtBQUs0TyxlQUM5QyxDQUNJLElBQUl3QyxFQUFnQnBSLEtBQUtrUixpQkFBaUJyTSxHQUMxQyxHQUFJdU0sRUFDSixDQUNJLElBQUssTUFBTXpHLEtBQVM5RixFQUFLckcsS0FBS2lHLFFBQzlCLENBQ0ksSUFBSXVOLEVBQWlCaFMsS0FBSytSLGtCQUFrQmxOLEVBQU11TSxFQUFlekcsR0FFakVxSCxFQUFlL00sVUFBVWdCLE1BQVFwSSxFQUFNcVYsV0FBV3ZJLEVBQU0xRixXQUN4RCtNLEVBQWUvVCxPQUFPZ0ksTUFBUXpGLEVBQVFuQixNQUFNeUIsRUFBWUUsTUFBTTJKLEVBQU14RixhQUFjLEdBQUd4RyxXQUNyRnFULEVBQWVFLFFBQVFqTSxNQUFRcEksRUFBTXFWLFdBQVd2SSxFQUFNMUYsVUFBWTBGLEVBQU14RixhQUN4RTZNLEVBQWUzTSxPQUFPWSxNQUFRMEUsRUFBTS9GLFNBQ3BDb04sRUFBZTFNLFFBQVFXLE1BQXFCLFFBQWIsRUFBQTBFLEVBQU1yRixlQUFPLFFBQUksR0FFMUNxRixFQUFNL0YsU0FBVW9OLEVBQWVJLGdCQUFnQi9DLFVBQVVDLElBQUksaUJBQzlEMEMsRUFBZUksZ0JBQWdCL0MsVUFBVUUsT0FBTyxpQkFFckR5QyxFQUFlRyxjQUFjbkYsTUFBUXJDLEVBQU01QixXQUFhLGNBQWdCLFdBQ3hFaUosRUFBZUcsY0FBY3RELFVBQVksR0FDekNtRCxFQUFlRyxjQUFjdFEsWUFBWVAsRUFBYTJNLElBQUl0RCxFQUFNNUIsV0FBYSxvQkFBc0Isa0JBRS9GNEIsRUFBTTVCLFdBQVlpSixFQUFlbEUsT0FBT3VCLFVBQVVDLElBQUksa0JBQ3JEMEMsRUFBZWxFLE9BQU91QixVQUFVRSxPQUFPLGlCLENBRWhELE1BQU00RCxFQUFpQi9CLEVBQWMzTSxRQUFRdkUsUUFBT3lLLElBQVU5RixFQUFLckcsS0FBS2lHLFFBQVF3RCxNQUFLdEQsR0FBS0EsSUFBTWdHLEVBQU1BLFVBSXRHLEdBSEF5RyxFQUFjM00sUUFBVTJNLEVBQWMzTSxRQUFRdkUsUUFBT3lLLElBQVV3SSxFQUFlekksU0FBU0MsS0FDdkZ3SSxFQUFlN1MsU0FBUXFFLEdBQUtBLEVBQUVtSixPQUFPeUIsV0FFakM2QixFQUFjc0IsU0FDbEIsQ0FDSSxNQUFNL0csRUFBTW5MLEVBQVFtTCxJQUFJOUcsRUFBS3JHLEtBQUtpRyxRQUFRSyxLQUFJSCxHQUFLQSxFQUFFUSxlQUNyRGlNLEVBQWNzQixTQUFTeFEsVUFBWSxHQUFHcEIsRUFBWWtFLE9BQU94RSxFQUFRbkIsTUFBTXNNLEVBQUssSyxDQXdCaEYsR0FyQkF5RixFQUFjQyxXQUFXeEMsVUFBWSxHQUNyQ3VDLEVBQWNDLFdBQVdpQixTQUFXek4sRUFBS3JHLEtBQUttSyxVQUM5Q3lJLEVBQWNDLFdBQVdoQyxVQUFVRSxPQUFPLGVBQzFDNkIsRUFBY0MsV0FBV3hQLFlBQVlQLEVBQWEyTSxJQUFJLE9BQVFwSixFQUFLckcsS0FBS21LLFlBQ3BFOUQsRUFBS3JHLEtBQUttSyxXQUFXeUksRUFBY0MsV0FBV2hDLFVBQVVDLElBQUksZUFFNUQ4QixFQUFjM00sUUFBUXhHLE9BQVMsR0FBS21ULEVBQWM1UyxLQUFLbUssVUFDdkR5SSxFQUFjRSxZQUFZakMsVUFBVUMsSUFBSSwyQkFFeEM4QixFQUFjRSxZQUFZakMsVUFBVUUsT0FBTywyQkFFL0M2QixFQUFjcEUsTUFBTUEsTUFBaUMsUUFBekIsRUFBQW5JLEVBQUtyRyxLQUFLb0ssdUJBQWUsUUFBSSxHQUVyRC9ELEVBQUtyRyxLQUFLaUssZUFBaUI1RCxFQUFLckcsS0FBS2lHLFFBQVF4RyxPQUFTLEdBRXREbVQsRUFBY0csbUJBQW1CbEMsVUFBVUUsT0FBTyxpQ0FDbEQ2QixFQUFjRyxtQkFBbUJyUCxVQUFxQyxRQUF6QixFQUFBMkMsRUFBS3JHLEtBQUtvSyx1QkFBZSxRQUFJLElBRzFFd0ksRUFBY0csbUJBQW1CbEMsVUFBVUMsSUFBSSxpQ0FFL0M4QixFQUFjNVMsS0FBS2tLLFlBQWMsR0FBSzBJLEVBQWMzTSxRQUFReEcsT0FBUyxFQUN6RSxDQUNJbVQsRUFBY0ksaUJBQWlCbkMsVUFBVUUsT0FBTyxhQUNoRDZCLEVBQWNJLGlCQUFpQm5DLFVBQVVDLElBQUksY0FDN0MsTUFBTTNELEVBQU1uTCxFQUFRbUwsSUFBSTlHLEVBQUtyRyxLQUFLaUcsUUFBUUssS0FBSUgsR0FBS0EsRUFBRVEsZUFDckRpTSxFQUFjSSxpQkFBaUIzQyxVQUFZLEdBQzNDdUMsRUFBY0ksaUJBQWlCeEMsT0FBTzFOLEVBQWEyTSxJQUFJLFdBQVcsSUFDbEVtRCxFQUFjSSxpQkFBaUJ4QyxPQUFPLElBQUl4TyxFQUFRbkIsTUFBTXlCLEVBQVlFLE1BQU0ySyxHQUFNLFFBQVE3SyxFQUFZa0UsT0FBT3hFLEVBQVFuQixNQUFNK1IsRUFBYzVTLEtBQUtrSyxZQUFhLE0sTUFJekowSSxFQUFjSSxpQkFBaUJuQyxVQUFVQyxJQUFJLFksQ0FJckQsTUFBTTBELEVBQVVoVCxLQUFLME4sU0FBU3pGLE1BQUttTCxHQUFLQSxFQUFFekwsTUFBTWpELE1BQUsyRSxHQUFLQSxFQUFFN0ssT0FBU3FHLEVBQUtyRyxTQUMxRSxHQUFJd1UsRUFDSixDQUNJLE1BQU1ySCxFQUFNbkwsRUFBUW1MLElBQUlxSCxFQUFRckwsTUFBTTdDLEtBQUl1RSxHQUFLN0ksRUFBUW1MLElBQUl0QyxFQUFFNUUsUUFBUUssS0FBSUgsR0FBS0EsRUFBRWdHLE1BQU14RixrQkFDaEZrTyxFQUFhN1MsRUFBUW1MLElBQUlxSCxFQUFRckwsTUFBTTdDLEtBQUl1RSxHQUFLQSxFQUFFN0ssS0FBS2tLLGVBQ3ZENEssRUFBYXpWLEVBQU0wVixzQkFBc0JQLEVBQVFyTCxNQUFNLEdBQUduSixLQUFLQSxNQUNyRXdVLEVBQVExQyxRQUFRekIsVUFBWSxXQUFXeUUsVUFBbUI5UyxFQUFRbkIsTUFBTXlCLEVBQVlFLE1BQU0ySyxHQUFNLFFBQVE3SyxFQUFZa0UsT0FBT3hFLEVBQVFuQixNQUFNZ1UsRUFBWSxLLEVBRzdKclQsS0FBS3NOLGVBQ1QsQ0FDUW1GLHNCQUFzQmUsR0FFMUJBLEVBQU8zRSxVQUFZLEdBQ25CLElBQUssTUFBTXhKLEtBQVVyRixLQUFLaUgsUUFDMUIsQ0FDSSxNQUFNd00sRUFBU2pTLFNBQVNDLGNBQWMsVUFDdENnUyxFQUFPeE4sTUFBUVosRUFBT1UsU0FDdEIwTixFQUFPdlIsVUFBWW1ELEVBQU9ZLE1BQzFCdU4sRUFBTzNSLFlBQVk0UixFLENBRTNCLENBQ1FoTixpQkFBaUJRLEdBRXJCakgsS0FBS2lILFFBQVVBLEVBRWYsSUFBSyxNQUFNekksS0FBUXdCLEtBQUt5TixXQUVwQixJQUFLLE1BQU05QyxLQUFTbk0sRUFBS2lHLFFBRXJCekUsS0FBS3lTLHNCQUFzQjlILEVBQU10RixPQUc3QyxDQUNRdUIsb0JBQW9CN0MsR0FFbkIvRCxLQUFLaVEsYUFDVmpRLEtBQUtpUSxXQUFXcEIsVUFBWSxHQUM1QjdPLEtBQUtpUSxXQUFXWixVQUFVRSxPQUFPLGNBQ2pDdlAsS0FBS2lRLFdBQVdaLFVBQVVFLE9BQU8sY0FDakN2UCxLQUFLaVEsV0FBV1osVUFBVUUsT0FBTyxnQkFDN0J4TCxJQUFXcUMsRUFBa0JpQixRQUU3QnJILEtBQUtpUSxXQUFXcE8sWUFBWVAsRUFBYTJNLElBQUksY0FBYyxJQUMzRGpPLEtBQUtpUSxXQUFXakIsT0FBTyxVQUN2QmhQLEtBQUtpUSxXQUFXWixVQUFVQyxJQUFJLGVBRTlCdkwsSUFBV3FDLEVBQWtCMEUsVUFFN0I5SyxLQUFLaVEsV0FBV3BPLFlBQVlQLEVBQWEyTSxJQUFJLFlBQzdDak8sS0FBS2lRLFdBQVdqQixPQUFPLGdCQUV2QmpMLElBQVdxQyxFQUFrQjJFLFNBRTdCL0ssS0FBS2lRLFdBQVdwTyxZQUFZUCxFQUFhMk0sSUFBSSxpQkFDN0NqTyxLQUFLaVEsV0FBV2pCLE9BQU8sZUFFdkJqTCxJQUFXcUMsRUFBa0I4RSxRQUU3QmxMLEtBQUtpUSxXQUFXcE8sWUFBWVAsRUFBYTJNLElBQUksY0FDN0NqTyxLQUFLaVEsV0FBV2pCLE9BQU8sWUFDdkJoUCxLQUFLaVEsV0FBV1osVUFBVUMsSUFBSSxjQUM5QnRQLEtBQUtpUSxXQUFXWixVQUFVQyxJQUFJLGlCQUV0QyxDQUNRWSxvQixTQUVnQixRQUFmLEVBQUFsUSxLQUFLaVEsa0JBQVUsZUFBRVosVUFBVXFFLFNBQVMsbUJBQy9CLFFBQVYsRUFBQTFULEtBQUttTixhQUFLLFNBQUV0QyxPQUNoQixDQUNRbkUsZUFBZVIsR0FFbkIsR0FBSWxHLEtBQUs4UCxnQkFBa0I5UCxLQUFLd04scUJBQXFCdkYsTUFBS0MsR0FBS0EsRUFBRWhDLFFBQVVBLElBQzNFLENBQ0ksTUFBTXVOLEVBQVNqUyxTQUFTQyxjQUFjLFVBQ3RDZ1MsRUFBT3hOLE1BQVFDLEVBQU1KLEdBQUduSCxXQUN4QjhVLEVBQU92UixVQUFZLEdBQUcsSUFBSS9ELEtBQUsrSCxFQUFNbkIsT0FBTzRNLG9CQUFvQixJQUFJeFQsS0FBSytILEVBQU1oQixLQUFLeU0saUJBQWlCekwsRUFBTTBCLE9BQVMsWUFBYyxLQUNsSTVILEtBQUt3TixxQkFBcUJ0UCxLQUFLLENBQUVnSSxNQUFPQSxFQUFPb0ssUUFBU21ELElBQ3hEelQsS0FBSzhQLGNBQWNqTyxZQUFZNFIsRSxDQUUvQnpULEtBQUttUixnQkFBa0JqTCxJQUVuQmxHLEtBQUs0TyxpQkFBZ0I1TyxLQUFLNE8sZUFBZUMsVUFBWSxJQUN6RDdPLEtBQUt5TixXQUFhLEdBQ2xCek4sS0FBSzBOLFNBQVcsSUFFcEIsSUFBSyxNQUFNbFAsS0FBUTBILEVBQU15QixNQUVyQjNILEtBQUt3RyxjQUFjLENBQUVOLFFBQU8xSCxTQUVoQ3dCLEtBQUtzTixlQUNULENBQ1EzRyxnQkFBZ0JKLEdBRWhCdkcsS0FBSzhQLGdCQUFlOVAsS0FBSzhQLGNBQWNqQixVQUFZLElBQ3ZEN08sS0FBS3dOLHFCQUF1QixHQUM1QixJQUFLLE1BQU10SCxLQUFTSyxFQUVoQnZHLEtBQUswRyxlQUFlUixHQUV4QmxHLEtBQUtnUSx1QkFDVCxDQUVRQSx3QixNQUVKLElBQUtoUSxLQUFLOFAsY0FBZSxPQUNyQjlQLEtBQUs0TyxpQkFBZ0I1TyxLQUFLNE8sZUFBZUMsVUFBWSxJQUN6RDdPLEtBQUt5TixXQUFhLEdBQ2xCLE1BQU1wTixFQUFNTCxLQUFLOFAsY0FBYzdKLE1BQy9CakcsS0FBS21SLGNBQTRFLFFBQTVELEVBQUFuUixLQUFLd04scUJBQXFCdkYsTUFBSzBMLEdBQUtBLEVBQUVyRCxRQUFRckssUUFBVTVGLFdBQUksZUFBRTZGLE1BQy9FbEcsS0FBS21SLGVBQWlCblIsS0FBS21OLE9BRTNCbk4sS0FBS21OLE1BQU1wRCxXQUFXL0osS0FBS21SLGNBQWNyTCxHQUVqRCxDQUVPb0Isc0IsVUFFSCxJQUFLbEgsS0FBS21OLFFBQVVuTixLQUFLb1EsZUFBaUJwUSxLQUFLbVIsY0FBZSxPQUM5RCxNQUFNekYsUUFBZ0IxTCxLQUFLbU4sTUFBTXlHLGdCQUMzQkMsRUFBZXJULEVBQVFuQixNQUFNcU0sRUFBUUEsUUFBUyxHQUlwRCxHQUhBMUwsS0FBS29RLGFBQWFsTyxVQUFZLFNBQVNwQixFQUFZa0UsT0FBTzZPLEtBQWlDLElBQWpCQSxFQUFxQixNQUFRLEtBRXBGLFFBQW5CLEVBQUE3VCxLQUFLcVEsc0JBQWMsU0FBRWhCLFVBQVVDLElBQUksYUFDL0I1RCxFQUFRaUIsYUFBYTFPLE9BQVN5TixFQUFRa0IsYUFBYTNPLE9BQVMsR0FBSytCLEtBQUtxUSxlQUMxRSxDQUNJLE1BQU10RSxFQUFTL0wsS0FBS21OLE1BQU1oQyxnQkFDMUJuTCxLQUFLcVEsZUFBZWhCLFVBQVVFLE9BQU8sYUFDckN2UCxLQUFLcVEsZUFBZXhCLFVBQVksR0FDaEM3TyxLQUFLcVEsZUFBZXJCLE9BQU8xTixFQUFhMk0sSUFBSSxXQUFXLElBQ25EdkMsRUFBUWlCLGFBQWExTyxPQUFTLEdBRTlCK0IsS0FBS3FRLGVBQWVyQixPQUFPLFlBQVl0RCxFQUFRaUIsYUFBYTFPLDhCQUE4RCxJQUFoQ3lOLEVBQVFpQixhQUFhMU8sT0FBZSxHQUFLLGtCQUFrQjhOLEVBQU9YLDhCQUM1SnBMLEtBQUtxUSxlQUFlckQsT0FBUyxrQkFBa0J0QixFQUFRaUIsYUFBYTdILEtBQUl1RSxHQUFLeEwsRUFBTW1ILE9BQU9xRSxFQUFFN0ssTUFBTSxLQUFRSixLQUFLLFNBRTFHc04sRUFBUWtCLGFBQWEzTyxPQUFTLEdBRW5DK0IsS0FBS3FRLGVBQWVyQixPQUFPLEdBQUd0RCxFQUFRa0IsYUFBYTNPLDhCQUE4RCxJQUFoQ3lOLEVBQVFrQixhQUFhM08sT0FBZSxHQUFLLCtCQUErQjhOLEVBQU9YLDhCQUlwS3BMLEtBQUtxUSxlQUFlckQsTUFBUSxHQUN4QnRCLEVBQVFpQixhQUFhMU8sT0FBUyxJQUFHK0IsS0FBS3FRLGVBQWVyRCxPQUFTLGtCQUFrQnRCLEVBQVFpQixhQUFhN0gsS0FBSXVFLEdBQUssR0FBR3hMLEVBQU1tSCxPQUFPcUUsRUFBRTdLLE1BQU0sT0FBVzZLLEVBQUV5Qyx5QkFBd0IxTixLQUFLLFNBQ2hMc04sRUFBUWtCLGFBQWEzTyxPQUFTLElBQUcrQixLQUFLcVEsZUFBZXJELE9BQVMsR0FBR2hOLEtBQUtxUSxlQUFlckQsTUFBTS9PLE9BQVMsRUFBSSxLQUFPLHlCQUF5QnlOLEVBQVFrQixhQUFhOUgsS0FBSXVFLEdBQUssR0FBR3hMLEVBQU1tSCxPQUFPcUUsRUFBRTdLLE1BQU0sT0FBVzZLLEVBQUV5Qyx5QkFBd0IxTixLQUFLLFNBRTVPNEIsS0FBS3FRLGVBQWVyQixPQUFPLEtBQzNCaFAsS0FBS3FRLGVBQWVyQixPQUFPMU4sRUFBYTJNLElBQUksUUFBUSxHLE9BR2pDak8sS0FBS21OLE1BQU1qRSxtQkFDRCxRQUFuQixFQUFBbEosS0FBSzRPLHNCQUFjLFNBQUVTLFVBQVVDLElBQUksbUJBQ3pCLFFBQW5CLEVBQUF0UCxLQUFLNE8sc0JBQWMsU0FBRVMsVUFBVUUsT0FBTyxrQkFDL0MsRUFob0JjLEVBQUFULE9BQWtDLElBQUluUCxFSGxDeEQsU0FBWTBHLEdBRVIsdUJBQ0EsNEJBQ0gsQ0FKRCxDQUFZQSxJQUFBQSxFQUFxQixLS0QxQixNQUVJdkksMkJBQTJCZ1csR0FFOUJuUixPQUFPaUgsYUFBYUMsUUFBUSx5QkFBMEJqRyxLQUFLVyxVQUFVdVAsR0FDekUsQ0FDT2hXLDZCLE1BRUgsT0FBTzhGLEtBQUtDLE1BQTJELFFBQXJELEVBQUFsQixPQUFPaUgsYUFBYUUsUUFBUSxpQ0FBeUIsUUFBSSxRQUMvRSxDQUVPaE0sdUJBQXVCbUksR0FFMUJ0RCxPQUFPaUgsYUFBYUMsUUFBUSx1QkFBd0JqRyxLQUFLVyxVQUFVMEIsR0FDdkUsQ0FDT25JLHNCLE1BRUgsT0FBTzhGLEtBQUtDLE1BQXlELFFBQW5ELEVBQUFsQixPQUFPaUgsYUFBYUUsUUFBUSwrQkFBdUIsUUFBSSxRQUM3RSxDQUVRaE0sc0JBRUosR0FBNkIsbUJBQXpCNkUsT0FBTzJMLFNBQVNDLEtBQTJCLE9BQU8sRUFFdEQsTUFBTS9GLEVBQU0sSUFBSXJLLEtBQ1Y0VixFQUFPdkwsRUFBSS9KLGNBQ2pCLElBRUl1VixFQUZBQyxFQUFRLEVBQ1J4SSxFQUFNLEVBRU55SSxFQUFjLENBQUMsRUFBRyxHQUN0QixLQUVRekksRUFBTSxJQUVOQSxFQUFNLEdBQ053SSxLQUVKRCxFQUFhLElBQUk3VixLQUFLLEdBQUc0VixLQUFRRSxLQUFTeEksS0FDckN5SSxFQUFZeEosU0FBU3NKLEVBQVd4VSxXQUNyQ2lNLElBRUosSUFBSTBJLEVBQWdCSCxFQUFXM1YsVUFBWSxNQUMzQyxPQUFPbUssRUFBSW5LLFdBQWE4VixHQUFpQjNMLEVBQUluSyxXQUFhMlYsRUFBVzNWLFNBQ3pFLENBQ09QLGNBRUNrQyxLQUFLb1UsZ0JBRUx2SCxFQUF5QkMsUUFBUTVPLEtBQUssQ0FDbEMrRCxVQUFXLEdBQ1hILEtBQU0sT0FDTmlMLEtBQU0sNkJBQ05DLE1BQU8sZUFDUEMsUUFBUyxLQUFRak4sS0FBS3FVLHFCQUFxQnJVLEtBQUtzVSx1QkFBd0JoRyxTQUFTaUcsUUFBUSxJQUV4RnZVLEtBQUtzVSx3QkFFTnhULEVBQVlDLFFBQVUsQ0FDbEJHLFlBQWEsb0JBQ2JFLFdBQVksa0JBQ1pELGFBQWMsaUJBQ2RILE1BQU9oQixLQUFLd1UsK0JBSXBCakgsRUFBVXVCLE9BQU9qUCxJQUFJcU4sR0FBT2xOLEtBQUt5VSxvQkFBb0J2SCxJQUFLbE4sUUFJMURBLEtBQUtxVSxxQkFBb0IsR0FDekJyVSxLQUFLMFUsaUJBQWdCLEdBRTdCLENBQ1E1VywyQkFBMkJvUCxHLE1BRS9CLEdBQUlsTixLQUFLMlUsZUFBZ0IsT0FFekIsTUFBTXJFLEVBQVU5TyxTQUFTQyxjQUFjLE9BQ3ZDNk8sRUFBUXJPLFVBQVksY0FDcEJxTyxFQUFRbk8sTUFBTXdOLE9BQVMsVUFDdkIsTUFBTVksRUFBTy9PLFNBQVNDLGNBQWMsT0FDcEM4TyxFQUFLdE8sVUFBWSxtQkFDakJxTyxFQUFRdEIsT0FBT3VCLEdBQ2YsTUFBTXFFLEVBQVUsS0FFWnRFLEVBQVFmLFNBQ1J2UCxLQUFLMFUsaUJBQWdCLEVBQUssRUFFOUJuRSxFQUFLckMsUUFBVSxJQUFNMEcsSUFDckJ0RSxFQUFRcEMsUUFBVSxJQUFNMEcsSUFFeEIsTUFBTXBFLEVBQVFoUCxTQUFTQyxjQUFjLE9BQ3JDK08sRUFBTXZPLFVBQVksb0JBQ2xCcU8sRUFBUXRCLE9BQU93QixHQUVmLE1BQU1xRSxFQUFlclQsU0FBU0MsY0FBYyxPQUM1Q29ULEVBQWE1UyxVQUFZLHNCQUN6QnVPLEVBQU14QixPQUFPNkYsR0FFYixNQUFNQyxHQUFvQixJQUFJM1csTUFBT08sV0FBYSxFQUNsRG1XLEVBQWFoRyxVQUFZLG9TQUVzRGlHLEVBQW9CLG9CQUFzQixnRUFHeEcsUUFBakIsRUFBQTVILEVBQUcrQixzQkFBYyxTQUFFcE4sWUFBWXlPLEVBQ25DLENBQ094UyxvQ0FNSCxPQUFPLFlBQ1gsR0NsSE9pWCxPQUNYelQsRUFBYTJQLGFBQ2IsSUFBSTFELEVBQ0osSU5HTyxNQVNILGNBSlEsS0FBQXlILFlBQWEsRUFNakJoVixLQUFLb08sV0FDTHBPLEtBQUtpVixxQkFDVCxDQUNRN0csV0FFSixNQUFNak0sRUFBUVgsU0FBU0MsY0FBYyxTQUNyQ1UsRUFBTTBNLFVPNUJzQixna0NQNkI1QnJOLFNBQVM0QixLQUFLNEwsT0FBTzdNLEdBR3JCbkMsS0FBS2tWLG9CQUFzQjFULFNBQVNDLGNBQWMsT0FDbER6QixLQUFLa1Ysb0JBQW9CalQsVUFBWSxlQUNyQ2pDLEtBQUtrVixvQkFBb0IvUyxNQUFNdU0sUUFBVSxPQUN6Q2xOLFNBQVM0QixLQUFLdkIsWUFBWTdCLEtBQUtrVixxQkFFL0IsTUFBTUMsRUFBUTNULFNBQVNDLGNBQWMsT0FDckMwVCxFQUFNalQsVUFBWSx3QkFDbEJpVCxFQUFNbFQsVUFBWSxXQUNsQmpDLEtBQUtrVixvQkFBb0JyVCxZQUFZc1QsR0FFckNuVixLQUFLb1YsYUFBZTVULFNBQVNDLGNBQWMsVUFDM0N6QixLQUFLb1YsYUFBYW5ULFVBQVksbUJBQzlCakMsS0FBS29WLGFBQWFyRixTQUFXLElBQU0vUCxLQUFLcVYseUJBQ3hDclYsS0FBS2tWLG9CQUFvQnJULFlBQVk3QixLQUFLb1YsY0FFMUNwVixLQUFLa1Ysb0JBQW9CclQsWUFBWUwsU0FBU0MsY0FBYyxPQUU1RCxNQUFNNlQsRUFBZTlULFNBQVNDLGNBQWMsVUFDNUM2VCxFQUFhclQsVUFBWSxvQ0FDekJxVCxFQUFhcFQsVUFBWSxTQUN6Qm9ULEVBQWFwSCxRQUFVLElBQU1sTyxLQUFLdVYsU0FDbEN2VixLQUFLa1Ysb0JBQW9CclQsWUFBWXlULEdBRXJDLE1BQU1FLEVBQWVoVSxTQUFTQyxjQUFjLFVBQzVDK1QsRUFBYXZULFVBQVksa0NBQ3pCdVQsRUFBYXRULFVBQVksU0FDekJzVCxFQUFhdEgsUUFBVSxJQUFNbE8sS0FBS2lMLFNBQ2xDakwsS0FBS2tWLG9CQUFvQnJULFlBQVkyVCxHQUdyQyxNQUFNQyxFQUFpQmpVLFNBQVNDLGNBQWMsT0FDOUNnVSxFQUFleFQsVUFBWSxxQkFDM0J3VCxFQUFldlQsVUFBWSxnQkFDM0JsQyxLQUFLa1Ysb0JBQW9CclQsWUFBWTRULEVBQ3pDLENBQ1F2Tyw0QkFFSixJLFFBRXlCbEgsS0FBSzBWLHNCQUFzQixzR0FDakNwVixTQUFRcUUsR0FBSzNFLEtBQUsyVixxQkFBcUJoUixFQUFHMEIsRUFBc0J1UCxhQUMxRDVWLEtBQUswVixzQkFBc0IsbUNBQ2pDcFYsU0FBUXFFLEdBQUszRSxLQUFLMlYscUJBQXFCaFIsRUFBRzBCLEVBQXNCd1AsVUFFMUU3VixLQUFLOFYsVUFFTjlWLEtBQUs4VixRQUE0QyxRQUFsQyxFQUFBdFUsU0FBU3VNLGNBQWMsbUJBQVcsYUFBSTNJLFNBRW5EN0MsRUFBQSxJQUFTLEdBRXZCLENBQ1FtVCxzQkFBc0JLLEdBRTFCLElBQUluVixFQUFNLEdBQ05vVixFQUFReFUsU0FBU3lVLGlCQUFpQkYsR0FDdEMsSUFBSyxNQUFNekYsS0FBVzBGLEVBRWIxRixFQUFRakIsVUFBVXFFLFNBQVMsaUJBRTVCcEQsRUFBUWpCLFVBQVVDLElBQUksZUFDdEIxTyxFQUFJMUMsS0FBS29TLElBR2pCLE9BQU8xUCxDQUNYLENBRVErVSxxQkFBcUJqRixFQUFpQndGLEdBRTFDeEYsRUFBT3lGLGlCQUFpQixTQUFTLElBQU1uVyxLQUFLb1csZ0JBQWdCRixJQUNoRSxDQUNRYix5QkFFQ3JWLEtBQUtvVixjQUNWelMsT0FBT2lILGFBQWFDLFFBQVEsaUJBQWtCN0osS0FBS29WLGFBQWFuUCxNQUNwRSxDQUNRb1EseUIsTUFFQ3JXLEtBQUtvVixlQUNWcFYsS0FBS29WLGFBQWFuUCxNQUFxRCxRQUE3QyxFQUFBdEQsT0FBT2lILGFBQWFFLFFBQVEseUJBQWlCLFFBQUksR0FDL0UsQ0FDUTVDLHNCQUFzQmdQLEdBRTFCLEdBQUtsVyxLQUFLa1YsNEJBQ0ozUyxFQUFBLElBQVMsS0FDZnZDLEtBQUtzVyxjQUFhLEdBQ2xCdFcsS0FBS2tXLEtBQU9BLEVBQ1JsVyxLQUFLb1YsY0FDVCxDQUNJLE1BQU1uTyxRQUFnQnpDLEVBQU1rQixXQUM1QjFGLEtBQUtvVixhQUFhdkcsVUFBWSxHQUM5QixJQUFLLE1BQU14SixLQUFVNEIsRUFBUXRCLG1CQUFtQkMsT0FDaEQsQ0FDSSxNQUFNNk4sRUFBU2pTLFNBQVNDLGNBQWMsVUFDdENnUyxFQUFPeE4sTUFBUVosRUFBT1UsU0FDdEIwTixFQUFPdlIsVUFBWW1ELEVBQU9ZLE1BQzFCakcsS0FBS29WLGFBQWF2VCxZQUFZNFIsRSxDQUVsQ3pULEtBQUtxVyx3QixDQUViLENBQ1FkLFNBRUp2VixLQUFLc1csY0FBYSxFQUN0QixDQUNRQSxhQUFhclEsR0FFYmpHLEtBQUtrVixzQkFHTWxWLEtBQUtrVixvQkFBb0IvUyxNQUFNdU0sUUFBdEN6SSxFQUFnRCxRQUNOLFFBRTlDakcsS0FBSzhWLFVBR0Q3UCxFQUFPakcsS0FBSzhWLFFBQVF6RyxVQUFVQyxJQUFJLFdBQ2pDdFAsS0FBSzhWLFFBQVF6RyxVQUFVRSxPQUFPLFdBRTNDLENBQ1FySSxlLGNBRUUzRSxFQUFLK0UsT0FBTSxLQUFPdEgsS0FBS2dWLGFBRTdCaFYsS0FBS2dWLFlBQWEsRUFDTSxRQUF4QixFQUFBaFYsS0FBS2tWLDJCQUFtQixTQUFFN0YsVUFBVUMsSUFBSSxpQkFFcEN0UCxLQUFLa1csT0FBUzdQLEVBQXNCd1AsY0FBYzdWLEtBQUt1VyxTQUN2RHZXLEtBQUtrVyxPQUFTN1AsRUFBc0J1UCxpQkFBaUI1VixLQUFLd1csWUFFOUR4VyxLQUFLc1csY0FBYSxHQUNNLFFBQXhCLEVBQUF0VyxLQUFLa1YsMkJBQW1CLFNBQUU3RixVQUFVRSxPQUFPLGlCQUUzQ3ZQLEtBQUtnVixZQUFhLENBQ3RCLENBQ1E5TixlQUVKLElBQUtsSCxLQUFLb1YsYUFBYyxPQUN4QixNQUFNL1AsRUFBU3JGLEtBQUtvVixhQUFhblAsTUFDM0JNLFFBQWUvQixFQUFNK0IsU0FDM0IsSUFBSyxNQUFNTCxLQUFTSyxFQUFPZ0IsZUFDM0IsQ0FDSSxHQUFJckIsRUFBTTBCLE9BQVEsU0FDbEIsTUFBTU8sUUFBbUIzRCxFQUFNMkQsV0FBV2pDLEVBQU1KLElBQ2hELElBQUssTUFBTXRILEtBQVEySixFQUFXQSxXQUUxQixHQUFJM0osRUFBS2lHLFFBQVFDLE1BQUtDLElBQU1BLEVBQUVVLFNBQzlCLENBQ0ksTUFBTS9HLEVBQU9ULEVBQU1nRyxNQUFNckYsRUFBS0EsTUFDOUIsR0FBb0IsaUJBQVRGLEVBQW1CLFNBQzlCLE1BQU1tRyxFQUE4QmpHLEVBQUtpRyxRQUFRSyxLQUFJSCxJLFlBRWpELE1BQU8sQ0FDSE0sWUFBaUMsUUFBcEIsRUFBQXBILEVBQUEsTUFBWThHLEVBQUVJLGNBQU0sUUFBSTVHLEtBQUtxSyxPQUFTbEssR0FBUSxLQUMzRDZHLFlBQWFSLEVBQUVPLE1BQTBCLFFBQWxCLEVBQUFySCxFQUFBLE1BQVk4RyxFQUFFTyxZQUFJLFFBQUkvRyxLQUFLcUssUUFBOEIsUUFBcEIsRUFBQTNLLEVBQUEsTUFBWThHLEVBQUVJLGNBQU0sUUFBSTVHLEtBQUtxSyxRQUFVLEtBQWdCLEtBQ25INUQsU0FBVUQsRUFBRVUsUUFBVUEsRUFDdEJDLFFBQWtCLFFBQVQsRUFBQVgsRUFBRVcsZUFBTyxRQUFJLEtBQ3pCLFVBRUNkLEVBQU15RyxPQUFPM00sRUFBTW1HLEUsRUFJekMsQ0FDUXlDLGtCQUVKLElBQUtsSCxLQUFLb1YsYUFBYyxPQUN4QixNQUFNL1AsRUFBU3JGLEtBQUtvVixhQUFhblAsTUFDakMsSUFBSXdRLEVBQStELEtBQ25FLE1BQU1sUSxRQUFlL0IsRUFBTStCLFNBQzNCLElBQUssTUFBTUwsS0FBU0ssRUFBT2dCLGVBQzNCLENBQ0ksR0FBSXJCLEVBQU0wQixPQUFRLFNBQ2xCLE1BQU1PLFFBQW1CM0QsRUFBTTJELFdBQVdqQyxFQUFNSixJQUNoRCxJQUFLLE1BQU10SCxLQUFRMkosRUFBV0EsV0FDOUIsQ0FDSSxNQUFNN0osRUFBT1QsRUFBTWdHLE1BQU1yRixFQUFLQSxNQUM5QixHQUFvQixpQkFBVEYsS0FDTm1ZLEdBQVVuWSxFQUFPbVksRUFBT2pZLE1BQzdCLENBQ0ksTUFBTWlHLEVBQThCakcsRUFBS2lHLFFBQVFLLEtBQUlILEksWUFFakQsTUFBTyxDQUNITSxZQUFpQyxRQUFwQixFQUFBcEgsRUFBQSxNQUFZOEcsRUFBRUksY0FBTSxRQUFJNUcsS0FBS3FLLE9BQVNsSyxHQUFRLEtBQzNENkcsWUFBYVIsRUFBRU8sTUFBMEIsUUFBbEIsRUFBQXJILEVBQUEsTUFBWThHLEVBQUVPLFlBQUksUUFBSS9HLEtBQUtxSyxRQUE4QixRQUFwQixFQUFBM0ssRUFBQSxNQUFZOEcsRUFBRUksY0FBTSxRQUFJNUcsS0FBS3FLLFFBQVUsS0FBZ0IsS0FDbkg1RCxTQUFVRCxFQUFFVSxPQUNaQyxRQUFrQixRQUFULEVBQUFYLEVBQUVXLGVBQU8sUUFBSSxLQUN6QixJQUVMbVIsRUFBUyxDQUFFalksS0FBTUYsRUFBTW1HLFFBQVNBLEUsR0FJNUMsR0FBSWdTLEVBQ0osQ0FDSSxJQUFLLE1BQU05TCxLQUFTOEwsRUFBT2hTLFFBRXZCa0csRUFBTS9GLFNBQVcrRixFQUFNL0YsVUFBWVMsUUFFakNiLEVBQU15RyxPQUFPd0wsRUFBT2pZLEtBQU1pWSxFQUFPaFMsUSxDQUUvQyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvRGF0ZXMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvRXZlbnRIYW5kbGVyLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL051bWJlcnMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvSG91clNjYWxpbmcudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvTWF0ZXJpYWxJY29uLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL1dhaXQudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvQXBpLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL0hpQm9iL0hpQm9iLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ1R5cGVzLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1JlYXNvbkVuaGFuY2VtZW50cy9SZWFzb25zRW5oYW5jZW1lbnRzLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ01vZGVsLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ1VJU2V0dGluZ3NCdXR0b25zLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ1VJLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ0Nzcy50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9GdW4vQXByaWxGb29scy50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9SZWFzb25FbmhhbmNlbWVudHMvUmVhc29uRW5oYW5jZW1lbnRzQ3NzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBEYXRlc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIHBhcnNlKHN0cjogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghc3RyKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBjb25zdCBzcGxpdCA9IHN0ci5zcGxpdChcIlRcIik7XHJcbiAgICAgICAgaWYgKHNwbGl0Lmxlbmd0aCA8IDIpIHNwbGl0LnB1c2goXCIwMDowMFwiKTtcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUoc3BsaXQuam9pbihcIlRcIikpLmdldFRpbWUoKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgZm9ybWF0KHRpbWU6IG51bWJlciwgaW5jbHVkZVRpbWVzdGFtcDogYm9vbGVhbilcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRpbWUpIHJldHVybiBcIlwiO1xyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0aW1lKTtcclxuICAgICAgICByZXR1cm4gYCR7ZGF0ZS5nZXRGdWxsWWVhcigpfS0keyhkYXRlLmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX0tJHtkYXRlLmdldERhdGUoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX0ke2luY2x1ZGVUaW1lc3RhbXAgPyBgVCR7ZGF0ZS5nZXRIb3VycygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfToke2RhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfWAgOiBcIlwifWA7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGZvcm1hdEhvdXIoaG91cnM6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBjb25zdCBob3VyID0gTWF0aC5mbG9vcihob3VycyAlIDI0KTtcclxuICAgICAgICBjb25zdCBtaW51dGUgPSBNYXRoLnJvdW5kKChob3VycyAtIGhvdXIpICogNjApO1xyXG4gICAgICAgIHJldHVybiBgJHtob3VyLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfToke21pbnV0ZS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX1gXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFdlZWtOdW1iZXJGcm9tRGF0ZSh0aW1lOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh0aW1lKTtcclxuICAgICAgICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xyXG4gICAgICAgIC8vIFRodXJzZGF5IGluIGN1cnJlbnQgd2VlayBkZWNpZGVzIHRoZSB5ZWFyLlxyXG4gICAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIDMgLSAoZGF0ZS5nZXREYXkoKSArIDYpICUgNyk7XHJcbiAgICAgICAgLy8gSmFudWFyeSA0IGlzIGFsd2F5cyBpbiB3ZWVrIDEuXHJcbiAgICAgICAgdmFyIHdlZWsxID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCAwLCA0KTtcclxuICAgICAgICAvLyBBZGp1c3QgdG8gVGh1cnNkYXkgaW4gd2VlayAxIGFuZCBjb3VudCBudW1iZXIgb2Ygd2Vla3MgZnJvbSBkYXRlIHRvIHdlZWsxLlxyXG4gICAgICAgIHJldHVybiAxICsgTWF0aC5yb3VuZCgoKGRhdGUuZ2V0VGltZSgpIC0gd2VlazEuZ2V0VGltZSgpKSAvIDg2NDAwMDAwXHJcbiAgICAgICAgICAgIC0gMyArICh3ZWVrMS5nZXREYXkoKSArIDYpICUgNykgLyA3KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgcGFyc2VUaW1lVG9ob3Vycyh0aW1lOiBzdHJpbmcpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc3BsaXQgPSB0aW1lLnNwbGl0KFwiOlwiKTtcclxuICAgICAgICByZXR1cm4gcGFyc2VJbnQoc3BsaXRbMF0pICsgcGFyc2VJbnQoc3BsaXRbMV0pIC8gNjA7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgRXZlbnRIYW5kbGVyPFQ+XHJcbntcclxuICAgIHByaXZhdGUgaGFuZGxlcnM6IHsgaGFuZGxlcjogKHZhbDogVCkgPT4gdm9pZCwgY29udGV4dDogYW55IH1bXSA9IFtdO1xyXG4gICAgcHVibGljIG9uKGhhbmRsZXI6ICh2YWw6IFQpID0+IHZvaWQsIGNvbnRleHQ6IGFueSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLmhhbmRsZXJzLnB1c2goeyBoYW5kbGVyLCBjb250ZXh0IH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG9mZihoYW5kbGVyOiAodmFsOiBUKSA9PiB2b2lkLCBjb250ZXh0OiBhbnkpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZmlsdGVyKGggPT4gaC5oYW5kbGVyICE9PSBoYW5kbGVyIHx8IGguY29udGV4dCAhPT0gY29udGV4dCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZmlyZSh2YWw6IFQpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycy5mb3JFYWNoKGggPT4gaC5oYW5kbGVyLmNhbGwoaC5jb250ZXh0LCB2YWwpKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBOdW1iZXJzXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgcm91bmQobnVtOiBudW1iZXIsIGRlY2ltYWxzOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQobnVtICogKDEwICoqIGRlY2ltYWxzKSkgLyAoMTAgKiogZGVjaW1hbHMpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBmbG9vcihudW06IG51bWJlciwgZGVjaW1hbHM6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihudW0gKiAoMTAgKiogZGVjaW1hbHMpKSAvICgxMCAqKiBkZWNpbWFscyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGNlaWwobnVtOiBudW1iZXIsIGRlY2ltYWxzOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguY2VpbChudW0gKiAoMTAgKiogZGVjaW1hbHMpKSAvICgxMCAqKiBkZWNpbWFscyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBzdW0oYXJyOiBudW1iZXJbXSlcclxuICAgIHtcclxuICAgICAgICBsZXQgdmFsID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgdmFsICs9IGFycltpXTtcclxuICAgICAgICByZXR1cm4gdmFsO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgTnVtYmVycyB9IGZyb20gXCIuL051bWJlcnNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBIb3VyU2NhbGluZ1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIHNjYWxpbmcgPSB7XHJcbiAgICAgICAgdW5pdEdlbmVyYWw6IFwiaG91cihzKVwiLFxyXG4gICAgICAgIHVuaXRQbHVyYWw6IFwiaG91cnNcIixcclxuICAgICAgICB1bml0U2luZ3VsYXI6IFwiaG91clwiLFxyXG4gICAgICAgIHNjYWxlOiAxXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIHNjYWxlKGhvdXJzOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIGhvdXJzICogdGhpcy5zY2FsaW5nLnNjYWxlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyB1bnNjYWxlKHNjYWxlZDogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBzY2FsZWQgLyB0aGlzLnNjYWxpbmcuc2NhbGU7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFVuaXROYW1lKGhvdXJzOiBudW1iZXIgfCBudWxsID0gbnVsbClcclxuICAgIHtcclxuICAgICAgICBpZiAoaG91cnMgPT09IG51bGwpIHJldHVybiB0aGlzLnNjYWxpbmcudW5pdEdlbmVyYWw7XHJcbiAgICAgICAgaWYgKGhvdXJzID09PSAxKSByZXR1cm4gdGhpcy5zY2FsaW5nLnVuaXRTaW5ndWxhcjtcclxuICAgICAgICByZXR1cm4gdGhpcy5zY2FsaW5nLnVuaXRQbHVyYWw7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGZvcm1hdChob3VyczogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBgJHtOdW1iZXJzLnJvdW5kKHRoaXMuc2NhbGUoaG91cnMpLCAyKX0gJHt0aGlzLmdldFVuaXROYW1lKGhvdXJzKX1gO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGFic3RyYWN0IGNsYXNzIE1hdGVyaWFsSWNvblxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGluaXRpYWxpemUoKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcclxuICAgICAgICBsaW5rLmhyZWYgPSBcImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9TWF0ZXJpYWwrU3ltYm9scytPdXRsaW5lZDpvcHN6LHdnaHQsRklMTCxHUkFEQDIwLi40OCwxMDAuLjcwMCwwLi4xLC01MC4uMjAwXCI7XHJcbiAgICAgICAgbGluay5yZWwgPSBcInN0eWxlc2hlZXRcIjtcclxuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGxpbmspO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBnZXQoaWNvbjogc3RyaW5nLCBmaWxsOiBib29sZWFuID0gZmFsc2UpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgIHNwYW4uY2xhc3NOYW1lID0gYG1hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWRgO1xyXG4gICAgICAgIHNwYW4uaW5uZXJUZXh0ID0gaWNvbjtcclxuICAgICAgICBzcGFuLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSBcIm1pZGRsZVwiO1xyXG4gICAgICAgIHNwYW4uc3R5bGUuZm9udFNpemUgPSBcIjEuNWVtXCI7XHJcbiAgICAgICAgc3Bhbi5zdHlsZS5mb250VmFyaWF0aW9uU2V0dGluZ3MgPSBgJ0ZJTEwnICR7ZmlsbCA/IDEgOiAwfWA7XHJcbiAgICAgICAgcmV0dXJuIHNwYW47XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgV2FpdFxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGZvcihtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPlxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPihyZXNvbHZlID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiByZXNvbHZlKCksIG1zKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgdW50aWwoZGVsZWdhdGU6ICgpID0+IGJvb2xlYW4pXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KHJlc29sdmUgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZSA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVsZWdhdGUoKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoaGFuZGxlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgQXBpXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgeGhyKG1ldGhvZDogXCJHRVRcIiB8IFwiUE9TVFwiLCB1cmw6IHN0cmluZywgYm9keTogb2JqZWN0KVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx7IHN0YXR1czogbnVtYmVyLCBib2R5OiBhbnkgfT4ocmVzb2x2ZSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB4aHIub3BlbihtZXRob2QsIHVybCk7XHJcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcclxuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xyXG4gICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHhoci5yZXNwb25zZVRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgIT09IDIwMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuaGFzT3duUHJvcGVydHkoXCJlcnJvclwiKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gcmVzdWx0Lmhhc093blByb3BlcnR5KFwia2V5XCIpID8gcmVzdWx0LmtleSA6IHhoci5zdGF0dXMudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBIaUJvYiBVdGlsczogRXJyb3IgJHtrZXl9IC0gJHtyZXN1bHQuZXJyb3J9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChgSGlCb2IgVXRpbHM6IEVycm9yICR7eGhyLnN0YXR1c30gLSBjaGVjayB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgZm9yIG1vcmUgaW5mb3JtYXRpb24uYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEhpQm9iIFV0aWxzOiBFcnJvciAke3hoci5zdGF0dXN9LmApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh4aHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB4aHIuc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiByZXN1bHRcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkoYm9keSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uL1V0aWxzL0FwaVwiO1xyXG5pbXBvcnQgeyBEYXRlcyB9IGZyb20gXCIuLi9VdGlscy9EYXRlc1wiO1xyXG5pbXBvcnQgeyBIaUJvYkF0dGVuZGFuY2UsIEhpQm9iTWV0YWRhdGEsIEhpQm9iU2hlZXRzLCBIaUJvYlN1Ym1pdEVudHJ5LCBIaUJvYlVzZXIgfSBmcm9tIFwiLi9IaUJvYlR5cGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSGlCb2Jcclxue1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgdXNlcklkOiBzdHJpbmcgfCBudWxsO1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBzdWJtaXQoZGF0ZTogbnVtYmVyLCBlbnRyaWVzOiBIaUJvYlN1Ym1pdEVudHJ5W10pOiBQcm9taXNlPGJvb2xlYW4+XHJcbiAgICB7XHJcbiAgICAgICAgaWYgKGVudHJpZXMuc29tZShlID0+ICFlLnJlYXNvbklkKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiV0FSTklORzogU09NRSBFTlRSSUVTIEhBVkUgTk8gUkVBU09OIFNFVCAtIE5PVCBTVUJNSVRUSU5HISFcIiwgZGF0ZSwgZW50cmllcyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGVudHJpZXMubWFwKGUgPT4geyByZXR1cm4geyBzdGFydDogRGF0ZXMuZm9ybWF0KGRhdGUgKyBlLnN0YXJ0SG91ciAqIDM2MDAgKiAxMDAwLCB0cnVlKSwgZW5kOiB0eXBlb2YgZS5sZW5ndGhIb3VycyA9PT0gXCJudW1iZXJcIiA/IERhdGVzLmZvcm1hdChkYXRlICsgKGUuc3RhcnRIb3VyICsgZS5sZW5ndGhIb3VycykgKiAzNjAwICogMTAwMCwgdHJ1ZSkgOiB1bmRlZmluZWQsIHJlYXNvbjogZS5yZWFzb25JZCwgY29tbWVudDogZS5jb21tZW50ID8/IHVuZGVmaW5lZCB9IH0pO1xyXG4gICAgICAgIGNvbnN0IGRhdGVTdHIgPSBEYXRlcy5mb3JtYXQoZGF0ZSwgZmFsc2UpO1xyXG4gICAgICAgIGNvbnN0IHVzZXJJZCA9IGF3YWl0IHRoaXMuZ2V0VXNlcklkKCk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQXBpLnhocihcIlBPU1RcIiwgYGh0dHBzOi8vYXBwLmhpYm9iLmNvbS9hcGkvYXR0ZW5kYW5jZS9lbXBsb3llZXMvJHt1c2VySWR9L2F0dGVuZGFuY2UvZW50cmllcz9mb3JEYXRlPSR7ZGF0ZVN0cn1gLCBkYXRhKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LnN0YXR1cyA9PT0gMjAwO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyB0aW1lbG9nUmVhc29ucygpOiBQcm9taXNlPHsgaWQ6IHN0cmluZywgbmFtZTogc3RyaW5nIH1bXT5cclxuICAgIHtcclxuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IHRoaXMubWV0YWRhdGEoKTtcclxuICAgICAgICByZXR1cm4gbWV0YWRhdGEudGltZUxvZ0VudHJ5UmVhc29uLnZhbHVlcy5tYXAodiA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGlkOiB2LnNlcnZlcklkLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogdi52YWx1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGF0dGVuZGFuY2Uoc2hlZXQ6IG51bWJlcik6IFByb21pc2U8SGlCb2JBdHRlbmRhbmNlPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFwaS54aHIoXCJHRVRcIiwgYGh0dHBzOi8vYXBwLmhpYm9iLmNvbS9hcGkvZW1wbG95ZWVzL2F0dGVuZGFuY2UvbXkvc2hlZXRzLyR7c2hlZXR9YCwge30pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuYm9keTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgc2hlZXRzKCk6IFByb21pc2U8SGlCb2JTaGVldHM+XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgdXNlcklkID0gYXdhaXQgdGhpcy5nZXRVc2VySWQoKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiR0VUXCIsIGBodHRwczovL2FwcC5oaWJvYi5jb20vYXBpL2VtcGxveWVlcy8ke3VzZXJJZH0vdGltZWxvZy9hdHRlbmRhbmNlL3NoZWV0c2AsIHt9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LmJvZHk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIG1ldGFkYXRhKCk6IFByb21pc2U8SGlCb2JNZXRhZGF0YT5cclxuICAgIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiR0VUXCIsIFwiaHR0cHM6Ly9hcHAuaGlib2IuY29tL2FwaS9jb21wYW55L21ldGFkYXRhL2xpc3RzLz9pbmNsdWRlQXJjaGl2ZWQ9dHJ1ZVwiLCB7fSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5ib2R5O1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRVc2VySWQoKTogUHJvbWlzZTxzdHJpbmc+XHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnVzZXJJZCAhPT0gXCJzdHJpbmdcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXNlckluZm8oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlcklkID8/IFwiXCI7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIHVzZXJJbmZvKCk6IFByb21pc2U8SGlCb2JVc2VyPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFwaS54aHIoXCJHRVRcIiwgXCJodHRwczovL2FwcC5oaWJvYi5jb20vYXBpL3VzZXJcIiwge30pO1xyXG4gICAgICAgIHRoaXMudXNlcklkID0gKHJlc3VsdC5ib2R5IGFzIEhpQm9iVXNlcikuaWQ7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5ib2R5O1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nRW50cnlcclxue1xyXG4gICAgc3RhcnRIb3VyOiBudW1iZXIsXHJcbiAgICBsZW5ndGhIb3VyczogbnVtYmVyLFxyXG4gICAgcmVhc29uSWQ6IHN0cmluZyxcclxuICAgIGNvbW1lbnQ6IHN0cmluZyB8IG51bGwsXHJcbiAgICBoYXNDb21tZW50OiBib29sZWFuXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nRGF0ZVxyXG57XHJcbiAgICBkaXJ0eTogYm9vbGVhbixcclxuICAgIGRhdGU6IG51bWJlclxyXG4gICAgZW50cmllczogVGltZWxvZ0VudHJ5W10sXHJcbiAgICBub25Xb3JraW5nRGF5OiBib29sZWFuLFxyXG4gICAgaG91cnNUb1dvcms6IG51bWJlclxyXG4gICAgZmF2b3JpdGVkOiBib29sZWFuLFxyXG4gICAgZGF0ZURlc2NyaXB0aW9uPzogc3RyaW5nXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nU2hlZXRcclxue1xyXG4gICAgaWQ6IG51bWJlcixcclxuICAgIHN0YXR1czogc3RyaW5nLFxyXG4gICAgc3RhcnQ6IG51bWJlcixcclxuICAgIGVuZDogbnVtYmVyXHJcbiAgICBkYXRlczogVGltZWxvZ0RhdGVbXSxcclxuICAgIGxvY2tlZDogYm9vbGVhbixcclxuICAgIGhvdXJzUGVyRGF5OiBudW1iZXJcclxufVxyXG5leHBvcnQgZW51bSBUaW1lbG9nU2F2ZVN0YXR1c1xyXG57XHJcbiAgICBXYWl0aW5nLFxyXG4gICAgU2F2aW5nLFxyXG4gICAgU2F2ZWQsXHJcbiAgICBFcnJvclxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZUxvZ0Zhdm9yaXRlZERhdGVcclxue1xyXG4gICAgZGF0ZTogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ0ZsZXhEYXRlXHJcbntcclxuICAgIGRhdGU6IG51bWJlcixcclxuICAgIGRhdGVTdHJpbmc6IHN0cmluZyxcclxuICAgIHJlYWxCYWxhbmNlOiBudW1iZXIsXHJcbiAgICByZWFsbG9jYXRlZEJhbGFuY2U6IG51bWJlclxyXG59XHJcblxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nVUlEYXRlIFxyXG57XHJcbiAgICBkYXRlOiBUaW1lbG9nRGF0ZSxcclxuICAgIHBhcmVudDogSFRNTERpdkVsZW1lbnQsXHJcbiAgICB0aXRsZTogSFRNTFNwYW5FbGVtZW50LFxyXG4gICAgZW50cmllczogVGltZWxvZ1VJRW50cnlDb250YWluZXJbXSxcclxuICAgIHN1bUhvdXJzPzogSFRNTFNwYW5FbGVtZW50LFxyXG4gICAgc3RhckJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQsXHJcbiAgICBwYXN0ZUJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQsXHJcbiAgICB3ZWVrZW5kRGVzY3JpcHRpb246IEhUTUxEaXZFbGVtZW50LFxyXG4gICAgbm9FbnRyaWVzV2FybmluZzogSFRNTERpdkVsZW1lbnQsXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nVUlFbnRyeUNvbnRhaW5lclxyXG57XHJcbiAgICBlbnRyeTogVGltZWxvZ0VudHJ5LFxyXG4gICAgcGFyZW50OiBIVE1MRGl2RWxlbWVudCxcclxuICAgIHN0YXJ0SG91cjogSFRNTElucHV0RWxlbWVudCxcclxuICAgIGxlbmd0aDogSFRNTElucHV0RWxlbWVudCxcclxuICAgIHJlYXNvbjogSFRNTFNlbGVjdEVsZW1lbnQsXHJcbiAgICBlbmRIb3VyOiBIVE1MSW5wdXRFbGVtZW50LFxyXG4gICAgY29tbWVudDogSFRNTElucHV0RWxlbWVudCxcclxuICAgIGNvbW1lbnRCdXR0b246IEhUTUxCdXR0b25FbGVtZW50LFxyXG4gICAgbm9SZWFzb25XYXJuaW5nOiBIVE1MRGl2RWxlbWVudFxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ1VJV2Vla1N1bVxyXG57XHJcbiAgICBkYXRlczogVGltZWxvZ1VJRGF0ZVtdLFxyXG4gICAgZWxlbWVudDogSFRNTERpdkVsZW1lbnRcclxufSIsImltcG9ydCB7IEhpQm9iIH0gZnJvbSBcIi4uL0hpQm9iL0hpQm9iXCI7XHJcbmltcG9ydCB7IEhpQm9iU3VibWl0RW50cnkgfSBmcm9tIFwiLi4vSGlCb2IvSGlCb2JUeXBlc1wiO1xyXG5pbXBvcnQgeyBEYXRlcyB9IGZyb20gXCIuLi9VdGlscy9EYXRlc1wiO1xyXG5pbXBvcnQgeyBXYWl0IH0gZnJvbSBcIi4uL1V0aWxzL1dhaXRcIjtcclxuaW1wb3J0IHsgUmVhc29uRW5oYW5jZW1lbnRDc3MgfSBmcm9tIFwiLi9SZWFzb25FbmhhbmNlbWVudHNDc3NcIjtcclxuXHJcbmV4cG9ydCBlbnVtIFJlYXNvbkVuaGFuY2VtZW50TW9kZVxyXG57XHJcbiAgICBGaXhBbGwsXHJcbiAgICBGaXhMYXRlc3QsXHJcbn1cclxuZXhwb3J0IGNsYXNzIFJlYXNvbkVuaGFuY2VtZW50c1xyXG57XHJcbiAgICBwcml2YXRlIHJlYXNvbkVuaGFuY2VtZW50VUk/OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByaXZhdGUgcmVhc29uU2VsZWN0PzogSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGFwcFJvb3Q/OiBFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBzdWJtaXR0aW5nID0gZmFsc2U7XHJcblxyXG4gICAgcHJpdmF0ZSBtb2RlPzogUmVhc29uRW5oYW5jZW1lbnRNb2RlO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVVSSgpO1xyXG4gICAgICAgIHRoaXMuY2xvY2tJbkJ1dHRvbkZpbmRlcigpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjcmVhdGVVSSgpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgICAgc3R5bGUuaW5uZXJIVE1MID0gUmVhc29uRW5oYW5jZW1lbnRDc3M7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQoc3R5bGUpO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuY2xhc3NOYW1lID0gXCJyZS1yZWFzb24tdWlcIjtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5yZWFzb25FbmhhbmNlbWVudFVJKTtcclxuXHJcbiAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGxhYmVsLmlubmVyVGV4dCA9IFwiQ2hvb3NlIERlZmF1bHQgUmVhc29uXCI7XHJcbiAgICAgICAgbGFiZWwuY2xhc3NOYW1lID0gXCJyZS1sYWJlbFwiO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChsYWJlbCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVhc29uU2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcclxuICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC5jbGFzc05hbWUgPSBcInJlLXJlYXNvbi1zZWxlY3RcIjtcclxuICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHRoaXMuc2F2ZURlZmF1bHRSZWFzb25WYWx1ZSgpO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZCh0aGlzLnJlYXNvblNlbGVjdCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIikpO1xyXG5cclxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5jbGFzc05hbWUgPSBcInJlLWNhbmNlbC1idG4gcmUtYnRuIHJlLXNlY29uZGFyeVwiO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5pbm5lclRleHQgPSBcIkNhbmNlbFwiXHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNhbmNlbCgpO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChjYW5jZWxCdXR0b24pO1xyXG5cclxuICAgICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5jbGFzc05hbWUgPSBcInJlLXN1Ym1pdC1idG4gcmUtYnRuIHJlLXByaW1hcnlcIjtcclxuICAgICAgICBzdWJtaXRCdXR0b24uaW5uZXJUZXh0ID0gXCJTdWJtaXRcIlxyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zdWJtaXQoKTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuYXBwZW5kQ2hpbGQoc3VibWl0QnV0dG9uKTtcclxuXHJcblxyXG4gICAgICAgIGNvbnN0IHN1Ym1pdHRpbmdUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBzdWJtaXR0aW5nVGV4dC5jbGFzc05hbWUgPSBcInJlLXN1Ym1pdHRpbmctdGV4dFwiO1xyXG4gICAgICAgIHN1Ym1pdHRpbmdUZXh0LmlubmVyVGV4dCA9IFwiU3VibWl0dGluZy4uLlwiXHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKHN1Ym1pdHRpbmdUZXh0KTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgY2xvY2tJbkJ1dHRvbkZpbmRlcigpXHJcbiAgICB7XHJcbiAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2xvY2tJbkJ1dHRvbnMgPSB0aGlzLmZpbmRVbmVuaGFuY2VkQnV0dG9ucyhcImItYnV0dG9uLnB1bmNoLWNsb2NrLWJ1dHRvbiwgYi1idXR0b24udGltZS13aWRnZXQtY2xvY2staW4tYnRuLCBiLWJ1dHRvbi50aW1lLXdpZGdldC1jbG9jay1vdXQtYnRuXCIpO1xyXG4gICAgICAgICAgICBjbG9ja0luQnV0dG9ucy5mb3JFYWNoKGUgPT4gdGhpcy5lbmhhbmNlQ2xvY2tJbkJ1dHRvbihlLCBSZWFzb25FbmhhbmNlbWVudE1vZGUuRml4TGF0ZXN0KSk7XHJcbiAgICAgICAgICAgIHZhciBxdWlja0ZpeEJ1dHRvbiA9IHRoaXMuZmluZFVuZW5oYW5jZWRCdXR0b25zKFwiYi1idXR0b24ucXVpY2stZml4LWFwcGx5LWJ1dHRvblwiKTtcclxuICAgICAgICAgICAgcXVpY2tGaXhCdXR0b24uZm9yRWFjaChlID0+IHRoaXMuZW5oYW5jZUNsb2NrSW5CdXR0b24oZSwgUmVhc29uRW5oYW5jZW1lbnRNb2RlLkZpeEFsbCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmFwcFJvb3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwUm9vdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJhcHAtcm9vdFwiKSA/PyB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgV2FpdC5mb3IoMTApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgZmluZFVuZW5oYW5jZWRCdXR0b25zKHNlbGVjdG9yOiBzdHJpbmcpOiBFbGVtZW50W11cclxuICAgIHtcclxuICAgICAgICB2YXIgYXJyID0gW10gYXMgRWxlbWVudFtdO1xyXG4gICAgICAgIHZhciBxdWVyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xyXG4gICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBxdWVyeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJyZS1lbmhhbmNlZFwiKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicmUtZW5oYW5jZWRcIik7XHJcbiAgICAgICAgICAgICAgICBhcnIucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZW5oYW5jZUNsb2NrSW5CdXR0b24oYnV0dG9uOiBFbGVtZW50LCBtb2RlOiBSZWFzb25FbmhhbmNlbWVudE1vZGUpXHJcbiAgICB7XHJcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnNob3dSZWFzb25GaXhlcihtb2RlKSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHNhdmVEZWZhdWx0UmVhc29uVmFsdWUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFzb25TZWxlY3QpIHJldHVybjtcclxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJyZS1sYXN0LXJlYXNvblwiLCB0aGlzLnJlYXNvblNlbGVjdC52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGxvYWREZWZhdWx0UmVhc29uVmFsdWUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFzb25TZWxlY3QpIHJldHVybjtcclxuICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC52YWx1ZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInJlLWxhc3QtcmVhc29uXCIpID8/IFwiXCI7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIHNob3dSZWFzb25GaXhlcihtb2RlOiBSZWFzb25FbmhhbmNlbWVudE1vZGUpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkpIHJldHVybjtcclxuICAgICAgICBhd2FpdCBXYWl0LmZvcigyNTApO1xyXG4gICAgICAgIHRoaXMuc2V0VUlWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XHJcbiAgICAgICAgaWYgKHRoaXMucmVhc29uU2VsZWN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgcmVhc29ucyA9IGF3YWl0IEhpQm9iLm1ldGFkYXRhKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVhc29uU2VsZWN0LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVhc29uIG9mIHJlYXNvbnMudGltZUxvZ0VudHJ5UmVhc29uLnZhbHVlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IHJlYXNvbi5zZXJ2ZXJJZDtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi5pbm5lclRleHQgPSByZWFzb24udmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubG9hZERlZmF1bHRSZWFzb25WYWx1ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgY2FuY2VsKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLnNldFVJVmlzaWJsZShmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHNldFVJVmlzaWJsZSh2YWx1ZTogYm9vbGVhbilcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5yZWFzb25FbmhhbmNlbWVudFVJKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGVsc2UgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuYXBwUm9vdClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHRoaXMuYXBwUm9vdC5jbGFzc0xpc3QuYWRkKFwicmUtYmx1clwiKTtcclxuICAgICAgICAgICAgZWxzZSB0aGlzLmFwcFJvb3QuY2xhc3NMaXN0LnJlbW92ZShcInJlLWJsdXJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBzdWJtaXQoKVxyXG4gICAge1xyXG4gICAgICAgIGF3YWl0IFdhaXQudW50aWwoKCkgPT4gIXRoaXMuc3VibWl0dGluZyk7XHJcblxyXG4gICAgICAgIHRoaXMuc3VibWl0dGluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJPy5jbGFzc0xpc3QuYWRkKFwicmUtc3VibWl0dGluZ1wiKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gUmVhc29uRW5oYW5jZW1lbnRNb2RlLkZpeEFsbCkgYXdhaXQgdGhpcy5maXhBbGwoKTtcclxuICAgICAgICBpZiAodGhpcy5tb2RlID09PSBSZWFzb25FbmhhbmNlbWVudE1vZGUuRml4TGF0ZXN0KSBhd2FpdCB0aGlzLmZpeExhdGVzdCgpO1xyXG5cclxuICAgICAgICB0aGlzLnNldFVJVmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJPy5jbGFzc0xpc3QucmVtb3ZlKFwicmUtc3VibWl0dGluZ1wiKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdWJtaXR0aW5nID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGZpeEFsbCgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvblNlbGVjdCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHJlYXNvbiA9IHRoaXMucmVhc29uU2VsZWN0LnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IHNoZWV0cyA9IGF3YWl0IEhpQm9iLnNoZWV0cygpO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2hlZXQgb2Ygc2hlZXRzLmVtcGxveWVlU2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHNoZWV0LmxvY2tlZCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGF0dGVuZGFuY2UgPSBhd2FpdCBIaUJvYi5hdHRlbmRhbmNlKHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIGF0dGVuZGFuY2UuYXR0ZW5kYW5jZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGUuZW50cmllcy5zb21lKGUgPT4gIWUucmVhc29uKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lID0gRGF0ZXMucGFyc2UoZGF0ZS5kYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWUgIT09IFwibnVtYmVyXCIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudHJpZXM6IEhpQm9iU3VibWl0RW50cnlbXSA9IGRhdGUuZW50cmllcy5tYXAoZSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0SG91cjogKChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSAtIHRpbWUpIC8gKDM2MDAgKiAxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aEhvdXJzOiBlLmVuZCA/ICgoRGF0ZXMucGFyc2UoZS5lbmQpID8/IERhdGUubm93KCkpIC0gKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpKSAvICgzNjAwICogMTAwMCkgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uSWQ6IGUucmVhc29uIHx8IHJlYXNvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGUuY29tbWVudCA/PyBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgSGlCb2Iuc3VibWl0KHRpbWUsIGVudHJpZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBmaXhMYXRlc3QoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFzb25TZWxlY3QpIHJldHVybjtcclxuICAgICAgICBjb25zdCByZWFzb24gPSB0aGlzLnJlYXNvblNlbGVjdC52YWx1ZTtcclxuICAgICAgICBsZXQgbGF0ZXN0OiB7IGRhdGU6IG51bWJlciwgZW50cmllczogSGlCb2JTdWJtaXRFbnRyeVtdIH0gfCBudWxsID0gbnVsbDtcclxuICAgICAgICBjb25zdCBzaGVldHMgPSBhd2FpdCBIaUJvYi5zaGVldHMoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHNoZWV0cy5lbXBsb3llZVNoZWV0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzaGVldC5sb2NrZWQpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBjb25zdCBhdHRlbmRhbmNlID0gYXdhaXQgSGlCb2IuYXR0ZW5kYW5jZShzaGVldC5pZCk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZGF0ZSBvZiBhdHRlbmRhbmNlLmF0dGVuZGFuY2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBEYXRlcy5wYXJzZShkYXRlLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lICE9PSBcIm51bWJlclwiKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGlmICghbGF0ZXN0IHx8IHRpbWUgPiBsYXRlc3QuZGF0ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRyaWVzOiBIaUJvYlN1Ym1pdEVudHJ5W10gPSBkYXRlLmVudHJpZXMubWFwKGUgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydEhvdXI6ICgoRGF0ZXMucGFyc2UoZS5zdGFydCkgPz8gRGF0ZS5ub3coKSkgLSB0aW1lKSAvICgzNjAwICogMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGhIb3VyczogZS5lbmQgPyAoKERhdGVzLnBhcnNlKGUuZW5kKSA/PyBEYXRlLm5vdygpKSAtIChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSkgLyAoMzYwMCAqIDEwMDApIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbklkOiBlLnJlYXNvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGUuY29tbWVudCA/PyBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF0ZXN0ID0geyBkYXRlOiB0aW1lLCBlbnRyaWVzOiBlbnRyaWVzIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxhdGVzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgbGF0ZXN0LmVudHJpZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVudHJ5LnJlYXNvbklkID0gZW50cnkucmVhc29uSWQgfHwgcmVhc29uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGF3YWl0IEhpQm9iLnN1Ym1pdChsYXRlc3QuZGF0ZSwgbGF0ZXN0LmVudHJpZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IEhpQm9iIH0gZnJvbSBcIi4uL0hpQm9iL0hpQm9iXCI7XHJcbmltcG9ydCB7IEhpQm9iUmVhc29uIH0gZnJvbSBcIi4uL0hpQm9iL0hpQm9iVHlwZXNcIjtcclxuaW1wb3J0IHsgRGF0ZXMgfSBmcm9tIFwiLi4vVXRpbHMvRGF0ZXNcIjtcclxuaW1wb3J0IHsgRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4uL1V0aWxzL0V2ZW50SGFuZGxlclwiO1xyXG5pbXBvcnQgeyBOdW1iZXJzIH0gZnJvbSBcIi4uL1V0aWxzL051bWJlcnNcIjtcclxuaW1wb3J0IHsgV2FpdCB9IGZyb20gXCIuLi9VdGlscy9XYWl0XCI7XHJcbmltcG9ydCB7IFRpbWVsb2dTaGVldCwgVGltZWxvZ0RhdGUsIFRpbWVsb2dTYXZlU3RhdHVzLCBUaW1lTG9nRmF2b3JpdGVkRGF0ZSwgVGltZWxvZ0ZsZXhEYXRlIH0gZnJvbSBcIi4vVGltZWxvZ1R5cGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVGltZWxvZ01vZGVsXHJcbntcclxuICAgIHB1YmxpYyBzaGVldHM6IFRpbWVsb2dTaGVldFtdID0gW107XHJcbiAgICBwdWJsaWMgb25EYXRlVXBkYXRlZCA9IG5ldyBFdmVudEhhbmRsZXI8eyBzaGVldDogVGltZWxvZ1NoZWV0LCBkYXRlOiBUaW1lbG9nRGF0ZSB9PigpO1xyXG4gICAgcHVibGljIG9uUmVhc29uc1VwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPEhpQm9iUmVhc29uW10+KCk7XHJcbiAgICBwdWJsaWMgb25TaGVldFVwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPFRpbWVsb2dTaGVldD4oKTtcclxuICAgIHB1YmxpYyBvblNoZWV0c1VwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPFRpbWVsb2dTaGVldFtdPigpO1xyXG4gICAgcHVibGljIG9uU2F2ZVN0YXR1c1VwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPFRpbWVsb2dTYXZlU3RhdHVzPigpO1xyXG4gICAgcHJpdmF0ZSBzYXZlSGFuZGxlOiBudW1iZXIgPSAtMTtcclxuICAgIHByaXZhdGUgc2F2aW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGNhbGN1bGF0aW5nRmxleDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBmZXRjaGluZ1NoZWV0cyA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSByZWFzb25zOiBIaUJvYlJlYXNvbltdID0gW107XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKVxyXG4gICAge1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGluaXRpYWxpemUoKVxyXG4gICAge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hTaGVldHMoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmZldGNoUmVhc29ucygpO1xyXG4gICAgICAgIHRoaXMub25TYXZlU3RhdHVzVXBkYXRlZC5maXJlKFRpbWVsb2dTYXZlU3RhdHVzLlNhdmVkKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBmZXRjaFNoZWV0cygpXHJcbiAgICB7XHJcbiAgICAgICAgYXdhaXQgV2FpdC51bnRpbCgoKSA9PiAhdGhpcy5mZXRjaGluZ1NoZWV0cyk7XHJcbiAgICAgICAgdGhpcy5mZXRjaGluZ1NoZWV0cyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zaGVldHMgPSBbXTtcclxuICAgICAgICBjb25zdCBzaGVldHMgPSBhd2FpdCBIaUJvYi5zaGVldHMoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHNoZWV0cy5lbXBsb3llZVNoZWV0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZXMucGFyc2Uoc2hlZXQuY3ljbGVTdGFydERhdGUpID8/IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IERhdGVzLnBhcnNlKHNoZWV0LmN5Y2xlRW5kRGF0ZSkgPz8gMDtcclxuICAgICAgICAgICAgY29uc3QgbmV3U2hlZXQgPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogc2hlZXQuaWQsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHNoZWV0LnN0YXR1cyxcclxuICAgICAgICAgICAgICAgIHN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgZW5kLFxyXG4gICAgICAgICAgICAgICAgZGF0ZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgbG9ja2VkOiBzaGVldC5sb2NrZWQsXHJcbiAgICAgICAgICAgICAgICBob3Vyc1BlckRheTogMFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0cy5wdXNoKG5ld1NoZWV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaGVldHMuc29ydCgoYSwgYikgPT4gYi5zdGFydCAtIGEuc3RhcnQpO1xyXG4gICAgICAgIHRoaXMub25TaGVldHNVcGRhdGVkLmZpcmUodGhpcy5zaGVldHMpO1xyXG4gICAgICAgIHRoaXMuZmV0Y2hpbmdTaGVldHMgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBmZXRjaFJlYXNvbnMoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucmVhc29ucyA9IChhd2FpdCBIaUJvYi5tZXRhZGF0YSgpKS50aW1lTG9nRW50cnlSZWFzb24udmFsdWVzO1xyXG4gICAgICAgIHRoaXMub25SZWFzb25zVXBkYXRlZC5maXJlKHRoaXMucmVhc29ucyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZmV0Y2hTaGVldChpZDogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuaWQgPT09IGlkKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgYXR0ZW5kYW5jZSA9IGF3YWl0IEhpQm9iLmF0dGVuZGFuY2UoaWQpO1xyXG4gICAgICAgIHNoZWV0LmhvdXJzUGVyRGF5ID0gYXR0ZW5kYW5jZS5zdW1tYXJ5LnBvdGVudGlhbFdvcmtpbmdIb3VycyAvIGF0dGVuZGFuY2Uuc3VtbWFyeS5wb3RlbnRpYWxXb3JraW5nRGF5cztcclxuICAgICAgICBzaGVldC5kYXRlcyA9IFtdO1xyXG4gICAgICAgIGZvciAoY29uc3QgZGF0ZSBvZiBhdHRlbmRhbmNlLmF0dGVuZGFuY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCB0aW1lID0gRGF0ZXMucGFyc2UoZGF0ZS5kYXRlKSA/PyBEYXRlLm5vdygpXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlOiBUaW1lbG9nRGF0ZSA9IHtcclxuICAgICAgICAgICAgICAgIGRpcnR5OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGRhdGU6IHRpbWUsXHJcbiAgICAgICAgICAgICAgICBub25Xb3JraW5nRGF5OiBkYXRlLnN0YXR1cyA9PT0gXCJXZWVrZW5kRXZlbnRcIiB8fCBkYXRlLnN0YXR1cyA9PT0gXCJBcHByb3ZlVGltZW9mZlJlcXVlc3RcIixcclxuICAgICAgICAgICAgICAgIGhvdXJzVG9Xb3JrOiBzaGVldC5ob3Vyc1BlckRheSxcclxuICAgICAgICAgICAgICAgIGZhdm9yaXRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkYXRlRGVzY3JpcHRpb246IGRhdGUubm90ZS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgIGVudHJpZXM6IGRhdGUuZW50cmllcy5tYXAoZSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0SG91cjogTnVtYmVycy5mbG9vcigoKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpIC0gKERhdGVzLnBhcnNlKGRhdGUuZGF0ZSkgPz8gRGF0ZS5ub3coKSkpIC8gKDM2MDAgKiAxMDAwKSwgMiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aEhvdXJzOiBOdW1iZXJzLmNlaWwoKChEYXRlcy5wYXJzZShlLmVuZCkgPz8gRGF0ZS5ub3coKSkgLSAoRGF0ZXMucGFyc2UoZS5zdGFydCkgPz8gRGF0ZS5ub3coKSkpIC8gKDM2MDAgKiAxMDAwKSwgMiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbklkOiBlLnJlYXNvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDogZS5jb21tZW50ID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NvbW1lbnQ6ICEhZS5jb21tZW50XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pLnNvcnQoKGEsIGIpID0+IGEuc3RhcnRIb3VyIC0gYi5zdGFydEhvdXIpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0ZS5wYWlkVGltZW9mZlNlY29uZHMgPT09IFwibnVtYmVyXCIgJiYgZGF0ZS5wYWlkVGltZW9mZlNlY29uZHMgPiAwKSB2YWx1ZS5ob3Vyc1RvV29yayAtPSAoZGF0ZS5wYWlkVGltZW9mZlNlY29uZHMgLyAoNjAgKiA2MCkpO1xyXG4gICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS5ub25Xb3JraW5nRGF5KSB2YWx1ZS5ob3Vyc1RvV29yayA9IDA7XHJcbiAgICAgICAgICAgIHNoZWV0LmRhdGVzLnB1c2godmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzaGVldC5kYXRlcy5zb3J0KChhLCBiKSA9PiBiLmRhdGUgLSBhLmRhdGUpO1xyXG4gICAgICAgIGNvbnN0IGZhdm9yaXRlID0gYXdhaXQgdGhpcy5nZXRGYXZvcml0ZWREYXRlKCk7XHJcbiAgICAgICAgaWYgKGZhdm9yaXRlICYmIGZhdm9yaXRlLnNoZWV0ID09PSBzaGVldClcclxuICAgICAgICAgICAgZmF2b3JpdGUuZGF0ZS5mYXZvcml0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMub25TaGVldFVwZGF0ZWQuZmlyZShzaGVldCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNoYW5nZVN0YXJ0SG91cihkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlciwgaG91cjogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5zdGFydEhvdXIgPSBob3VyO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBjaGFuZ2VMZW5ndGhIb3VycyhkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLmxlbmd0aEhvdXJzID0gbGVuZ3RoO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBjaGFuZ2VSZWFzb24oZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIsIHJlYXNvbjogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5yZWFzb25JZCA9IHJlYXNvbjtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2hhbmdlQ29tbWVudChkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlciwgY29tbWVudDogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5jb21tZW50ID0gY29tbWVudDtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLmhhc0NvbW1lbnQgPSB0cnVlO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyB0b2dnbGVDb21tZW50KGRhdGU6IFRpbWVsb2dEYXRlLCBpbmRleDogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5oYXNDb21tZW50ID0gIWRhdGUuZW50cmllc1tpbmRleF0uaGFzQ29tbWVudDtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLmNvbW1lbnQgPSBkYXRlLmVudHJpZXNbaW5kZXhdLmhhc0NvbW1lbnQgPyBcIlwiIDogbnVsbDtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgc2V0RmF2b3JpdGVkRGF0ZShkYXRlOiBUaW1lbG9nRGF0ZSlcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBvbGRGYXZvcml0ZSA9IGF3YWl0IHRoaXMuZ2V0RmF2b3JpdGVkRGF0ZSgpO1xyXG4gICAgICAgIGlmIChvbGRGYXZvcml0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9sZEZhdm9yaXRlLmRhdGUuZmF2b3JpdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKG9sZEZhdm9yaXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRhdGUuZmF2b3JpdGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0OiBzaGVldCwgZGF0ZTogZGF0ZSB9KTtcclxuXHJcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGxfZmF2b3JpdGVcIiwgSlNPTi5zdHJpbmdpZnkoeyBkYXRlOiBEYXRlcy5mb3JtYXQoZGF0ZS5kYXRlLCBmYWxzZSkgfSBhcyBUaW1lTG9nRmF2b3JpdGVkRGF0ZSkpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGdldEZhdm9yaXRlZERhdGUoKTogUHJvbWlzZTx7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGRhdGU6IFRpbWVsb2dEYXRlIH0gfCBudWxsPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHN0ciA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRsX2Zhdm9yaXRlXCIpO1xyXG4gICAgICAgIGlmICghc3RyKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBjb25zdCBmYXZvcml0ZTogVGltZUxvZ0Zhdm9yaXRlZERhdGUgPSBKU09OLnBhcnNlKHN0cik7XHJcbiAgICAgICAgY29uc3QgdGltZSA9IERhdGVzLnBhcnNlKGZhdm9yaXRlLmRhdGUpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGltZSA9PT0gXCJudW1iZXJcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuc3RhcnQgPD0gdGltZSAmJiBzLmVuZCA+PSB0aW1lKTtcclxuICAgICAgICAgICAgaWYgKHNoZWV0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hlZXQuZGF0ZXMubGVuZ3RoIDwgMSkgYXdhaXQgdGhpcy5mZXRjaFNoZWV0KHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBzaGVldC5kYXRlcy5maW5kKGQgPT4gZC5kYXRlID09PSB0aW1lKTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHNoZWV0OiBzaGVldCwgZGF0ZTogZGF0ZSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZWxldGVFbnRyeShkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGRhdGUuZW50cmllcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgZmluZExhc3RFbnRyeShvcmlnaW5hbERhdGU6IFRpbWVsb2dEYXRlKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsU2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gb3JpZ2luYWxEYXRlKSk7XHJcbiAgICAgICAgaWYgKCFvcmlnaW5hbFNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgbGV0IGRhdGVJbmRleCA9IG9yaWdpbmFsU2hlZXQuZGF0ZXMuaW5kZXhPZihvcmlnaW5hbERhdGUpO1xyXG4gICAgICAgIGxldCBlbnRyeUluZGV4ID0gLTE7XHJcbiAgICAgICAgZm9yIChsZXQgc2hlZXRJbmRleCA9IHRoaXMuc2hlZXRzLmluZGV4T2Yob3JpZ2luYWxTaGVldCk7IHNoZWV0SW5kZXggPCB0aGlzLnNoZWV0cy5sZW5ndGg7IHNoZWV0SW5kZXgrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHNbc2hlZXRJbmRleF07XHJcbiAgICAgICAgICAgIGlmIChzaGVldC5kYXRlcy5sZW5ndGggPCAxKSBhd2FpdCB0aGlzLmZldGNoU2hlZXQoc2hlZXQuaWQpO1xyXG4gICAgICAgICAgICBmb3IgKDsgZGF0ZUluZGV4IDwgc2hlZXQuZGF0ZXMubGVuZ3RoOyBkYXRlSW5kZXgrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IHNoZWV0LmRhdGVzW2RhdGVJbmRleF07XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZS5lbnRyaWVzLmxlbmd0aCA+IDApIHJldHVybiBlbnRyeUluZGV4IDwgMCA/IGRhdGUuZW50cmllc1tkYXRlLmVudHJpZXMubGVuZ3RoIC0gMV0gOiBkYXRlLmVudHJpZXNbZW50cnlJbmRleF07XHJcbiAgICAgICAgICAgICAgICBlbnRyeUluZGV4ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkYXRlSW5kZXggPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBuZXdFbnRyeShkYXRlOiBUaW1lbG9nRGF0ZSlcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGxhc3QgPSBhd2FpdCB0aGlzLmZpbmRMYXN0RW50cnkoZGF0ZSk7XHJcbiAgICAgICAgbGV0IHN0YXJ0SG91ciA9IDguNTtcclxuICAgICAgICBsZXQgbGVuZ3RoSG91cnMgPSBOdW1iZXJzLnJvdW5kKHNoZWV0LmhvdXJzUGVyRGF5LCAyKTtcclxuICAgICAgICBsZXQgcmVhc29uSWQgPSBcIlwiO1xyXG4gICAgICAgIGlmIChsYXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGRhdGUuZW50cmllcy5pbmNsdWRlcyhsYXN0KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RhcnRIb3VyID0gbGFzdC5zdGFydEhvdXIgKyBsYXN0Lmxlbmd0aEhvdXJzO1xyXG4gICAgICAgICAgICAgICAgbGVuZ3RoSG91cnMgPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlYXNvbklkID0gbGFzdC5yZWFzb25JZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzLnB1c2goe1xyXG4gICAgICAgICAgICBzdGFydEhvdXIsXHJcbiAgICAgICAgICAgIGxlbmd0aEhvdXJzLFxyXG4gICAgICAgICAgICByZWFzb25JZCxcclxuICAgICAgICAgICAgY29tbWVudDogbnVsbCxcclxuICAgICAgICAgICAgaGFzQ29tbWVudDogZmFsc2VcclxuICAgICAgICB9KTtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgcGFzdGVGcm9tU3RhcnJlZChkYXRlOiBUaW1lbG9nRGF0ZSlcclxuICAgIHtcclxuICAgICAgICBpZiAoZGF0ZS5lbnRyaWVzLmxlbmd0aCA+IDApIHJldHVybjtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGZhdm9yaXRlID0gYXdhaXQgdGhpcy5nZXRGYXZvcml0ZWREYXRlKCk7XHJcbiAgICAgICAgaWYgKCFmYXZvcml0ZSB8fCBmYXZvcml0ZS5kYXRlID09PSBkYXRlKSByZXR1cm47XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZmF2b3JpdGUuZGF0ZS5lbnRyaWVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZGF0ZS5lbnRyaWVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgc3RhcnRIb3VyOiBlbnRyeS5zdGFydEhvdXIsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGhIb3VyczogZW50cnkubGVuZ3RoSG91cnMsXHJcbiAgICAgICAgICAgICAgICByZWFzb25JZDogZW50cnkucmVhc29uSWQsXHJcbiAgICAgICAgICAgICAgICBjb21tZW50OiBlbnRyeS5jb21tZW50LFxyXG4gICAgICAgICAgICAgICAgaGFzQ29tbWVudDogZW50cnkuaGFzQ29tbWVudFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBxdWV1ZVNhdmUoKVxyXG4gICAge1xyXG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5zYXZlSGFuZGxlKTtcclxuICAgICAgICB0aGlzLnNhdmVIYW5kbGUgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB0aGlzLnNhdmUoKSwgNTAwKTtcclxuICAgICAgICB0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQuZmlyZShUaW1lbG9nU2F2ZVN0YXR1cy5XYWl0aW5nKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBzYXZlKClcclxuICAgIHtcclxuICAgICAgICBhd2FpdCBXYWl0LnVudGlsKCgpID0+ICF0aGlzLnNhdmluZyk7XHJcbiAgICAgICAgdGhpcy5zYXZpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMub25TYXZlU3RhdHVzVXBkYXRlZC5maXJlKFRpbWVsb2dTYXZlU3RhdHVzLlNhdmluZyk7XHJcbiAgICAgICAgY29uc3QgbWluaW11bVdhaXQgPSBXYWl0LmZvcigxMDApO1xyXG4gICAgICAgIGxldCBlcnJvciA9IGZhbHNlO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2hlZXQgb2YgdGhpcy5zaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2Ygc2hlZXQuZGF0ZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRlLmRpcnR5KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEhpQm9iLnN1Ym1pdChkYXRlLmRhdGUsIGRhdGUuZW50cmllcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUuZGlydHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBhd2FpdCBtaW5pbXVtV2FpdDtcclxuICAgICAgICB0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQuZmlyZShlcnJvciA/IFRpbWVsb2dTYXZlU3RhdHVzLkVycm9yIDogVGltZWxvZ1NhdmVTdGF0dXMuU2F2ZWQpO1xyXG4gICAgICAgIHRoaXMuc2F2aW5nID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEZsZXhQb2xpY3koKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB7IHByZXZpb3VzRGF5c0luY2x1ZGVkOiA3ICogNCwgZmxleFdhcm5pbmdUaHJlc2hvbGQ6IDcgKiAzIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGNsZWFyU2hlZXRCYWxhbmNlQ2FjaGUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5zaGVldHMpIHJldHVybjtcclxuICAgICAgICBjb25zdCB1c2VySWQgPSBhd2FpdCBIaUJvYi5nZXRVc2VySWQoKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2hlZXRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0c1tpXTtcclxuICAgICAgICAgICAgaWYgKCFzaGVldCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gYHRsX2NhY2hlZF9ob3VyX2JhbGFuY2VzXyR7dXNlcklkfV8ke3NoZWV0LmlkfWA7XHJcbiAgICAgICAgICAgIGlmIChzaGVldC5sb2NrZWQgJiYgd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGNhY2hlS2V5KSAhPT0gbnVsbClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGNhY2hlS2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGdldENhY2hlZEJhbGFuY2VzKCk6IFByb21pc2U8UmVjb3JkPHN0cmluZywgVGltZWxvZ0ZsZXhEYXRlW10+PlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0czogUmVjb3JkPHN0cmluZywgVGltZWxvZ0ZsZXhEYXRlW10+ID0ge307XHJcbiAgICAgICAgY29uc3QgdXNlcklkID0gYXdhaXQgSGlCb2IuZ2V0VXNlcklkKCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuc2hlZXRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0c1tpXTtcclxuICAgICAgICAgICAgaWYgKCFzaGVldCkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICBsZXQgc2hlZXRCYWxhbmNlczogeyBkYXRlOiBudW1iZXIsIGJhbGFuY2U6IG51bWJlciB9W10gPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgY2FjaGVLZXkgPSBgdGxfY2FjaGVkX2hvdXJfYmFsYW5jZXNfJHt1c2VySWR9XyR7c2hlZXQuaWR9YDtcclxuICAgICAgICAgICAgaWYgKHNoZWV0LmxvY2tlZCAmJiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oY2FjaGVLZXkpICE9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzaGVldEJhbGFuY2VzID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oY2FjaGVLZXkpID8/IFwiW11cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hlZXQuZGF0ZXMubGVuZ3RoIDwgMSkgYXdhaXQgdGhpcy5mZXRjaFNoZWV0KHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgICAgIGlmIChzaGVldC5kYXRlcy5zb21lKGQgPT4gZC5lbnRyaWVzLmxlbmd0aCA+IDAgJiYgZC5lbnRyaWVzLnNvbWUoZSA9PiBlLmxlbmd0aEhvdXJzID4gMCkpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGF5IG9mIHNoZWV0LmRhdGVzKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29ya2VkSG91cnMgPSBOdW1iZXJzLnN1bShkYXkuZW50cmllcy5tYXAoZSA9PiBlLmxlbmd0aEhvdXJzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhbGFuY2UgPSB3b3JrZWRIb3VycyAtIGRheS5ob3Vyc1RvV29yaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hlZXRCYWxhbmNlcy5wdXNoKHsgZGF0ZTogZGF5LmRhdGUsIGJhbGFuY2UgfSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hlZXQubG9ja2VkICYmIHNoZWV0LmlkID4gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oY2FjaGVLZXksIEpTT04uc3RyaW5naWZ5KHNoZWV0QmFsYW5jZXMpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzaGVldHNbc2hlZXQuaWQudG9TdHJpbmcoKV0gPSBzaGVldEJhbGFuY2VzLm1hcChkID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogZC5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVTdHJpbmc6IERhdGVzLmZvcm1hdChkLmRhdGUsIGZhbHNlKSxcclxuICAgICAgICAgICAgICAgICAgICByZWFsQmFsYW5jZTogZC5iYWxhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWxsb2NhdGVkQmFsYW5jZTogTnVtYmVycy5yb3VuZChkLmJhbGFuY2UsIDMpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pLnNvcnQoKGEsIGIpID0+IGEuZGF0ZSAtIGIuZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzaGVldHM7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0RmxleFN0YXR1cygpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgcG9saWN5ID0gdGhpcy5nZXRGbGV4UG9saWN5KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnREYXRlVGltZSA9IERhdGVzLnBhcnNlKERhdGVzLmZvcm1hdChEYXRlLm5vdygpLCBmYWxzZSkpID8/IDA7XHJcbiAgICAgICAgY29uc3Qgb3ZlcmR1ZURhdGVUaW1lID0gRGF0ZXMucGFyc2UoRGF0ZXMuZm9ybWF0KGN1cnJlbnREYXRlVGltZSAtICgxMDAwICogNjAgKiA2MCAqIDI0ICogKHBvbGljeS5wcmV2aW91c0RheXNJbmNsdWRlZCAtIDEpKSwgZmFsc2UpKSA/PyAwO1xyXG4gICAgICAgIGNvbnN0IHdhcm5pbmdEYXRlVGltZSA9IERhdGVzLnBhcnNlKERhdGVzLmZvcm1hdChjdXJyZW50RGF0ZVRpbWUgLSAoMTAwMCAqIDYwICogNjAgKiAyNCAqIChwb2xpY3kuZmxleFdhcm5pbmdUaHJlc2hvbGQgLSAxKSksIGZhbHNlKSkgPz8gMDtcclxuXHJcbiAgICAgICAgY29uc3QgYWxsRGF0ZXM6IFRpbWVsb2dGbGV4RGF0ZVtdID0gW107XHJcbiAgICAgICAgbGV0IGJhbGFuY2U6IG51bWJlciA9IDA7XHJcbiAgICAgICAgaWYgKCEhdGhpcy5zaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhd2FpdCBXYWl0LnVudGlsKCgpID0+ICF0aGlzLmNhbGN1bGF0aW5nRmxleCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRpbmdGbGV4ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNoZWV0cyA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVkQmFsYW5jZXMoKTtcclxuXHJcbiAgICAgICAgICAgIC8vQ2FsY3VsYXRlIHJlbWFpbmluZyBiYWxhbmNlcyAvIGNhbmNlbGxlZCBvdXQgYmFsYW5jZXNcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuc2hlZXRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaGVldCA9IHNoZWV0c1t0aGlzLnNoZWV0c1tpXS5pZF07XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hlZXQpIGFsbERhdGVzLnB1c2goLi4uc2hlZXQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL1J1biB0aGUgcmVhbGxvY2F0aW9uIGFsZ29yaXRobVxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbERhdGVzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlID0gYWxsRGF0ZXNbaV07XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGk7IGorKylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgPT09IDApIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZEYXRlID0gYWxsRGF0ZXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW1vdW50ID0gTWF0aC5taW4oTWF0aC5hYnMoZGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UpLCBNYXRoLmFicyhwcmV2RGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgPCAwICYmIHByZXZEYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2RGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgLT0gYW1vdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSArPSBhbW91bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlID4gMCAmJiBwcmV2RGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgPCAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldkRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlICs9IGFtb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgLT0gYW1vdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwcmV2RGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgPSBOdW1iZXJzLnJvdW5kKHByZXZEYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSwgMyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSA9IE51bWJlcnMucm91bmQoZGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UsIDMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJhbGFuY2UgPSBOdW1iZXJzLnN1bShhbGxEYXRlcy5tYXAoZCA9PiBOdW1iZXJzLnJvdW5kKGQucmVhbGxvY2F0ZWRCYWxhbmNlLCAzKSkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGluZ0ZsZXggPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYmFsYW5jZSxcclxuICAgICAgICAgICAgdW5iYWxhbmNlZERhdGVzOiBhbGxEYXRlcy5maWx0ZXIoZCA9PiBkLnJlYWxsb2NhdGVkQmFsYW5jZSAhPT0gMCksXHJcbiAgICAgICAgICAgIG92ZXJkdWVEYXRlczogYWxsRGF0ZXMuZmlsdGVyKGQgPT4gZC5yZWFsbG9jYXRlZEJhbGFuY2UgIT09IDAgJiYgZC5kYXRlIDw9IG92ZXJkdWVEYXRlVGltZSksXHJcbiAgICAgICAgICAgIHdhcm5pbmdEYXRlczogYWxsRGF0ZXMuZmlsdGVyKGQgPT4gZC5yZWFsbG9jYXRlZEJhbGFuY2UgIT09IDAgJiYgZC5kYXRlIDw9IHdhcm5pbmdEYXRlVGltZSAmJiBkLmRhdGUgPiBvdmVyZHVlRGF0ZVRpbWUpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBUaW1lbG9nVUkgfSBmcm9tIFwiLi9UaW1lbG9nVUlcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUaW1lbG9nVUlTZXR0aW5nc0J1dHRvbnNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBidXR0b25zID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY2xhc3NOYW1lOiBcInRsLXNldHRpbmdzLXJlbG9hZC1sb2NrZWQtc2hlZXRzLWJ1dHRvblwiLFxyXG4gICAgICAgICAgICBpY29uOiBcImNhY2hlZFwiLFxyXG4gICAgICAgICAgICB0ZXh0OiBcIlJlbG9hZCBMb2NrZWQgU2hlZXRzXCIsXHJcbiAgICAgICAgICAgIHRpdGxlOiBcIlJlY2FsY3VsYXRlcyBmbGV4IGJhbGFuY2UgZm9yIGFsbCBsb2NrZWQgc2hlZXRzLlwiLFxyXG4gICAgICAgICAgICBvbkNsaWNrOiB1aSA9PiB1aS5tb2RlbD8uY2xlYXJTaGVldEJhbGFuY2VDYWNoZSgpLnRoZW4oKCkgPT4gdWkudXBkYXRlQmFsYW5jZSgpKVxyXG4gICAgICAgIH1cclxuICAgIF0gYXMge1xyXG4gICAgICAgIGNsYXNzTmFtZTogc3RyaW5nLFxyXG4gICAgICAgIGljb246IHN0cmluZyxcclxuICAgICAgICB0ZXh0OiBzdHJpbmcsXHJcbiAgICAgICAgdGl0bGU6IHN0cmluZ1xyXG4gICAgICAgIG9uQ2xpY2s6ICh1aTogVGltZWxvZ1VJKSA9PiB2b2lkXHJcbiAgICB9W107XHJcbn0iLCJpbXBvcnQgeyBIaUJvYlJlYXNvbiB9IGZyb20gXCIuLi9IaUJvYi9IaUJvYlR5cGVzXCI7XHJcbmltcG9ydCB7IERhdGVzIH0gZnJvbSBcIi4uL1V0aWxzL0RhdGVzXCI7XHJcbmltcG9ydCB7IEV2ZW50SGFuZGxlciB9IGZyb20gXCIuLi9VdGlscy9FdmVudEhhbmRsZXJcIjtcclxuaW1wb3J0IHsgSG91clNjYWxpbmcgfSBmcm9tIFwiLi4vVXRpbHMvSG91clNjYWxpbmdcIjtcclxuaW1wb3J0IHsgTWF0ZXJpYWxJY29uIH0gZnJvbSBcIi4uL1V0aWxzL01hdGVyaWFsSWNvblwiO1xyXG5pbXBvcnQgeyBOdW1iZXJzIH0gZnJvbSBcIi4uL1V0aWxzL051bWJlcnNcIjtcclxuaW1wb3J0IHsgV2FpdCB9IGZyb20gXCIuLi9VdGlscy9XYWl0XCI7XHJcbmltcG9ydCB7IFRpbWVsb2dDc3MgfSBmcm9tIFwiLi9UaW1lbG9nQ3NzXCI7XHJcbmltcG9ydCB7IFRpbWVsb2dNb2RlbCB9IGZyb20gXCIuL1RpbWVsb2dNb2RlbFwiO1xyXG5pbXBvcnQgeyBUaW1lbG9nRGF0ZSwgVGltZWxvZ0VudHJ5LCBUaW1lbG9nU2F2ZVN0YXR1cywgVGltZWxvZ1NoZWV0LCBUaW1lbG9nVUlEYXRlIGFzIFRpbWVsb2dVSURhdGVDb250YWluZXIsIFRpbWVsb2dVSVdlZWtTdW0gfSBmcm9tIFwiLi9UaW1lbG9nVHlwZXNcIjtcclxuaW1wb3J0IHsgVGltZWxvZ1VJU2V0dGluZ3NCdXR0b25zIH0gZnJvbSBcIi4vVGltZWxvZ1VJU2V0dGluZ3NCdXR0b25zXCI7XHJcblxyXG5kZWNsYXJlIHZhciBISUJPQl9VVElMU19WRVI6IHN0cmluZztcclxuZGVjbGFyZSB2YXIgSElCT0JfVVRJTFNfQ0hBTkdFTE9HOiB7IHZlcnNpb246IHN0cmluZywgdGV4dDogc3RyaW5nW10gfVtdO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRpbWVsb2dVSVxyXG57XHJcblxyXG4gICAgcHJpdmF0ZSB0aW1lbG9nVUlPdXRlcj86IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHVibGljIHRpbWVsb2dVSUlubmVyPzogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHRvZ2dsZUJ1dHRvbj86IEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBkYXJrTW9kZUJ1dHRvbj86IEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgcHVibGljIG1vZGVsPzogVGltZWxvZ01vZGVsO1xyXG5cclxuICAgIHByaXZhdGUgc2hlZXREcm9wZG93bj86IEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBzaGVldERyb3Bkb3duT3B0aW9uczogeyBzaGVldDogVGltZWxvZ1NoZWV0LCBlbGVtZW50OiBIVE1MT3B0aW9uRWxlbWVudCB9W10gPSBbXTtcclxuICAgIHByaXZhdGUgc2VsZWN0ZWRTaGVldD86IFRpbWVsb2dTaGVldDtcclxuXHJcbiAgICBwcml2YXRlIHNoZWV0Q29udGFpbmVyPzogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHNoZWV0RGF0ZXM6IFRpbWVsb2dVSURhdGVDb250YWluZXJbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSB3ZWVrU3VtczogVGltZWxvZ1VJV2Vla1N1bVtdID0gW107XHJcbiAgICBwcml2YXRlIHNhdmVTdGF0dXM/OiBIVE1MU3BhbkVsZW1lbnQ7XHJcblxyXG4gICAgcHJpdmF0ZSBiYWxhbmNlTGFiZWw/OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByaXZhdGUgYmFsYW5jZVdhcm5pbmc/OiBIVE1MRGl2RWxlbWVudDtcclxuXHJcbiAgICBwcml2YXRlIHJlYXNvbnM6IEhpQm9iUmVhc29uW10gPSBbXTtcclxuXHJcbiAgICBwcml2YXRlIG9uRGFya01vZGVDaGFuZ2UgPSBuZXcgRXZlbnRIYW5kbGVyPGJvb2xlYW4+KCk7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBvblNob3c6IEV2ZW50SGFuZGxlcjxUaW1lbG9nVUk+ID0gbmV3IEV2ZW50SGFuZGxlcigpO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpXHJcbiAgICB7XHJcbiAgICAgICAgKHdpbmRvdyBhcyBhbnkpLnRpbWVsb2cgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuYWRkQnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGFkZEJ1dHRvbigpXHJcbiAgICB7XHJcbiAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZGl2LmFwcC1jb250ZW50ID4gYXBwLXRvcC1iYXIuYXBwLXRvcC1iYXIgPiBkaXYuYWN0aW9uc1wiKTtcclxuICAgICAgICAgICAgaWYgKCFwYXJlbnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IFdhaXQuZm9yKDEpO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24uY2xhc3NOYW1lID0gXCJ0bC10b2dnbGUtYnRuXCI7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJzZW50aW1lbnRfdmVyeV9zYXRpc2ZpZWRcIikpO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi50aXRsZSA9IFwiSGlCb2IgVXRpbGl0aWVzXCI7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnRvZ2dsZVZpc2libGUoKTtcclxuICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKHRoaXMudG9nZ2xlQnV0dG9uKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlVUkoKTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlTW9kZWwoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbi5oYXNoID09PSBcIiN0bC11aVwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVZpc2libGUoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5vbkRhcmtNb2RlQ2hhbmdlLmZpcmUodGhpcy5pc0RhcmtNb2RlKCkpO1xyXG5cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSB0b2dnbGVWaXNpYmxlKClcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMudGltZWxvZ1VJT3V0ZXIpIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy50aW1lbG9nVUlPdXRlci5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICAgICAgbG9jYXRpb24uaGFzaCA9IFwiI3RsLXVpXCI7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaGVldENvbnRhaW5lcikgdGhpcy5zaGVldENvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsPy5mZXRjaFNoZWV0cygpO1xyXG4gICAgICAgICAgICBUaW1lbG9nVUkub25TaG93LmZpcmUodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5oYXNoID0gXCJcIjtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaW5pdGlhbFwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgaXNEYXJrTW9kZSgpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGxfZGFya19tb2RlXCIpID09PSBcInRydWVcIjtcclxuICAgIH1cclxuICAgIHByaXZhdGUgdG9nZ2xlRGFya01vZGUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGFya01vZGUoKSkgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0bF9kYXJrX21vZGVcIiwgXCJmYWxzZVwiKTtcclxuICAgICAgICBlbHNlIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGxfZGFya19tb2RlXCIsIFwidHJ1ZVwiKTtcclxuICAgICAgICB0aGlzLm9uRGFya01vZGVDaGFuZ2UuZmlyZSh0aGlzLmlzRGFya01vZGUoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVVSSgpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgICAgc3R5bGUuaW5uZXJIVE1MID0gVGltZWxvZ0NzcztcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHN0eWxlKTtcclxuXHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlci5jbGFzc05hbWUgPSBcInRsLXVpXCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQodGhpcy50aW1lbG9nVUlPdXRlcik7XHJcblxyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuY2xhc3NOYW1lID0gXCJ0bC11aS1pbm5lclwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIuYXBwZW5kKHRoaXMudGltZWxvZ1VJSW5uZXIpO1xyXG5cclxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uY2xhc3NOYW1lID0gXCJ0bC1jbG9zZS1idG5cIjtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiY2xvc2VcIikpO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnRvZ2dsZVZpc2libGUoKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKTtcclxuXHJcbiAgICAgICAgdGhpcy5kYXJrTW9kZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgdGhpcy5kYXJrTW9kZUJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLWRhcmstbW9kZS1idG5cIjtcclxuICAgICAgICB0aGlzLmRhcmtNb2RlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnRvZ2dsZURhcmtNb2RlKCk7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZCh0aGlzLmRhcmtNb2RlQnV0dG9uKTtcclxuICAgICAgICB0aGlzLm9uRGFya01vZGVDaGFuZ2Uub24oKGRhcmspID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZGFyaykgdGhpcy50aW1lbG9nVUlPdXRlcj8uY2xhc3NMaXN0LmFkZChcInRsLWRhcmtcIik7XHJcbiAgICAgICAgICAgIGVsc2UgdGhpcy50aW1lbG9nVUlPdXRlcj8uY2xhc3NMaXN0LnJlbW92ZShcInRsLWRhcmtcIik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhcmtNb2RlQnV0dG9uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhcmtNb2RlQnV0dG9uLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhcmtNb2RlQnV0dG9uLmFwcGVuZChkYXJrID8gTWF0ZXJpYWxJY29uLmdldChcImxpZ2h0X21vZGVcIikgOiBNYXRlcmlhbEljb24uZ2V0KFwiZGFya19tb2RlXCIpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNldHRpbnNXaW5kb3cgPSB0aGlzLmNyZWF0ZVNldHRpbmdzV2luZG93KCk7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZChzZXR0aW5zV2luZG93KTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2V0dGluZ3NCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHNldHRpbmdzQnV0dG9uLmFwcGVuZChNYXRlcmlhbEljb24uZ2V0KFwic2V0dGluZ3NcIiwgdHJ1ZSkpO1xyXG4gICAgICAgIHNldHRpbmdzQnV0dG9uLmFwcGVuZChcIiBcIiArIEhJQk9CX1VUSUxTX1ZFUik7XHJcbiAgICAgICAgc2V0dGluZ3NCdXR0b24uY2xhc3NOYW1lID0gXCJ0bC12ZXJzaW9uLW51bWJlclwiO1xyXG4gICAgICAgIHNldHRpbmdzQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBzZXR0aW5zV2luZG93LmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1zZXR0aW5ncy1oaWRkZW5cIik7XHJcbiAgICAgICAgc2V0dGluZ3NCdXR0b24uc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XHJcbiAgICAgICAgc2V0dGluZ3NCdXR0b24uc3R5bGUudGV4dERlY29yYXRpb24gPSBcInVuZGVybGluZVwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQoc2V0dGluZ3NCdXR0b24pO1xyXG5cclxuXHJcbiAgICAgICAgY29uc3Qgc2hlZXREcm9wZG93bkxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgc2hlZXREcm9wZG93bkxhYmVsLmlubmVyVGV4dCA9IFwiU2hlZXQ6XCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZChzaGVldERyb3Bkb3duTGFiZWwpO1xyXG5cclxuICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xyXG4gICAgICAgIHRoaXMuc2hlZXREcm9wZG93bi5jbGFzc05hbWUgPSBcInRsLXNoZWV0LXNlbGVjdFwiO1xyXG4gICAgICAgIHRoaXMuc2hlZXREcm9wZG93bi5vbmNoYW5nZSA9ICgpID0+IHRoaXMub25TZWxlY3RlZFNoZWV0Q2hhbmdlKCk7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZCh0aGlzLnNoZWV0RHJvcGRvd24pO1xyXG5cclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NOYW1lID0gXCJ0bC1zYXZlLXN0YXR1c1wiO1xyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5vbmNsaWNrID0gKCkgPT4gdGhpcy5vblNhdmVTdGF0dXNDbGljaygpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kKHRoaXMuc2F2ZVN0YXR1cyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJhbGFuY2VQYXJlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGJhbGFuY2VQYXJlbnQuY2xhc3NOYW1lID0gXCJ0bC1iYWxhbmNlXCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmQoYmFsYW5jZVBhcmVudCk7XHJcblxyXG4gICAgICAgIHRoaXMuYmFsYW5jZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLmJhbGFuY2VMYWJlbC5pbm5lclRleHQgPSBcIkJhbGFuY2U6IFwiO1xyXG4gICAgICAgIHRoaXMuYmFsYW5jZUxhYmVsLmNsYXNzTmFtZSA9IFwidGwtYmFsYW5jZS1sYWJlbFwiO1xyXG4gICAgICAgIGJhbGFuY2VQYXJlbnQuYXBwZW5kKHRoaXMuYmFsYW5jZUxhYmVsKTtcclxuXHJcbiAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZy5jbGFzc05hbWUgPSBcInRsLWJhbGFuY2Utd2FybmluZyB0bC13YXJuaW5nIHRsLWhpZGRlblwiO1xyXG4gICAgICAgIGJhbGFuY2VQYXJlbnQuYXBwZW5kKHRoaXMuYmFsYW5jZVdhcm5pbmcpO1xyXG5cclxuICAgICAgICB0aGlzLnNoZWV0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLnNoZWV0Q29udGFpbmVyLmNsYXNzTmFtZSA9IFwidGwtc2hlZXRcIjtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZENoaWxkKHRoaXMuc2hlZXRDb250YWluZXIpO1xyXG5cclxuICAgIH1cclxuICAgIHByaXZhdGUgY3JlYXRlU2V0dGluZ3NXaW5kb3coKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gXCJ0bC1zZXR0aW5ncyB0bC1zZXR0aW5ncy1oaWRkZW5cIjtcclxuICAgICAgICBjb25zdCBiYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBiYWNrLmNsYXNzTmFtZSA9IFwidGwtc2V0dGluZ3MtYmFja1wiO1xyXG4gICAgICAgIGVsZW1lbnQuYXBwZW5kKGJhY2spO1xyXG4gICAgICAgIGJhY2sub25jbGljayA9ICgpID0+IGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRsLXNldHRpbmdzLWhpZGRlblwiKTtcclxuXHJcbiAgICAgICAgY29uc3QgaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGlubmVyLmNsYXNzTmFtZSA9IFwidGwtc2V0dGluZ3MtaW5uZXJcIjtcclxuICAgICAgICBlbGVtZW50LmFwcGVuZChpbm5lcik7XHJcblxyXG4gICAgICAgIGNvbnN0IHNldHRpbmdzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgc2V0dGluZ3NFbGVtZW50LmNsYXNzTmFtZSA9IFwidGwtc2V0dGluZ3MtdmVyc2lvblwiO1xyXG4gICAgICAgIGlubmVyLmFwcGVuZChzZXR0aW5nc0VsZW1lbnQpO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiBUaW1lbG9nVUlTZXR0aW5nc0J1dHRvbnMuYnV0dG9ucylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGJ1dHRvbi5jbGFzc05hbWU7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kKE1hdGVyaWFsSWNvbi5nZXQoYnV0dG9uLmljb24pKTtcclxuICAgICAgICAgICAgZWxlbWVudC5hcHBlbmQoYnV0dG9uLnRleHQpO1xyXG4gICAgICAgICAgICBpZiAoYnV0dG9uLnRpdGxlKSBlbGVtZW50LnN0eWxlLmN1cnNvciA9IFwiaGVscFwiO1xyXG4gICAgICAgICAgICBlbGVtZW50LnRpdGxlID0gYnV0dG9uLnRpdGxlO1xyXG4gICAgICAgICAgICBlbGVtZW50Lm9uY2xpY2sgPSAoKSA9PiBidXR0b24ub25DbGljayh0aGlzKTtcclxuICAgICAgICAgICAgc2V0dGluZ3NFbGVtZW50LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY2hhbmdlbG9nID0gSElCT0JfVVRJTFNfQ0hBTkdFTE9HO1xyXG4gICAgICAgIGZvciAoY29uc3QgdmVyc2lvbiBvZiBjaGFuZ2Vsb2cpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCB2ZXJzaW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIHZlcnNpb25FbGVtZW50LmNsYXNzTmFtZSA9IFwidGwtc2V0dGluZ3MtdmVyc2lvblwiO1xyXG4gICAgICAgICAgICBpbm5lci5hcHBlbmQodmVyc2lvbkVsZW1lbnQpO1xyXG4gICAgICAgICAgICBjb25zdCB2ZXJzaW9uVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICB2ZXJzaW9uVGl0bGUuY2xhc3NOYW1lID0gXCJ0bC1zZXR0aW5ncy10aXRsZVwiO1xyXG4gICAgICAgICAgICB2ZXJzaW9uVGl0bGUuaW5uZXJUZXh0ID0gdmVyc2lvbi52ZXJzaW9uO1xyXG4gICAgICAgICAgICB2ZXJzaW9uRWxlbWVudC5hcHBlbmQodmVyc2lvblRpdGxlKTtcclxuICAgICAgICAgICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKTtcclxuICAgICAgICAgICAgbGlzdC5jbGFzc05hbWUgPSBcInRsLXNldHRpbmdzLWxpc3RcIjtcclxuICAgICAgICAgICAgdmVyc2lvbkVsZW1lbnQuYXBwZW5kKGxpc3QpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRleHQgb2YgdmVyc2lvbi50ZXh0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICAgICAgICAgIHRleHRFbGVtZW50LmlubmVyVGV4dCA9IHRleHQ7XHJcbiAgICAgICAgICAgICAgICBsaXN0LmFwcGVuZCh0ZXh0RWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGNyZWF0ZU1vZGVsKClcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5tb2RlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwub25EYXRlVXBkYXRlZC5vZmYodGhpcy5vbkRhdGVVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5vblJlYXNvbnNVcGRhdGVkLm9mZih0aGlzLm9uUmVhc29uc1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLm9uU2F2ZVN0YXR1c1VwZGF0ZWQub2ZmKHRoaXMub25TYXZlU3RhdHVzVXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwub25TaGVldFVwZGF0ZWQub2ZmKHRoaXMub25TaGVldFVwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLm9uU2hlZXRzVXBkYXRlZC5vZmYodGhpcy5vblNoZWV0c1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1vZGVsID0gbmV3IFRpbWVsb2dNb2RlbCgpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25EYXRlVXBkYXRlZC5vbih0aGlzLm9uRGF0ZVVwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25SZWFzb25zVXBkYXRlZC5vbih0aGlzLm9uUmVhc29uc1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25TYXZlU3RhdHVzVXBkYXRlZC5vbih0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25TaGVldFVwZGF0ZWQub24odGhpcy5vblNoZWV0VXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5tb2RlbC5vblNoZWV0c1VwZGF0ZWQub24odGhpcy5vblNoZWV0c1VwZGF0ZWQsIHRoaXMpO1xyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLm1vZGVsLmluaXRpYWxpemUoKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0RGF0ZUNvbnRhaW5lcihkYXRhOiB7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGRhdGU6IFRpbWVsb2dEYXRlIH0pXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTaGVldCA9PT0gZGF0YS5zaGVldCAmJiB0aGlzLnNoZWV0Q29udGFpbmVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IGRhdGVDb250YWluZXIgPSB0aGlzLnNoZWV0RGF0ZXMuZmluZChkID0+IGQuZGF0ZSA9PT0gZGF0YS5kYXRlKTtcclxuICAgICAgICAgICAgaWYgKCFkYXRlQ29udGFpbmVyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJpZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJCdXR0b246IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksXHJcbiAgICAgICAgICAgICAgICAgICAgcGFzdGVCdXR0b246IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksXHJcbiAgICAgICAgICAgICAgICAgICAgd2Vla2VuZERlc2NyaXB0aW9uOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5vRW50cmllc1dhcm5pbmc6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNoZWV0RGF0ZXMucHVzaChkYXRlQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmNsYXNzTmFtZSA9IFwidGwtZGF0ZVwiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaGVldENvbnRhaW5lci5hcHBlbmRDaGlsZChkYXRlQ29udGFpbmVyLnBhcmVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG5ldyBEYXRlKGRhdGEuZGF0ZS5kYXRlKS5nZXREYXkoKSA9PT0gMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3ZWVrU2VwZXJhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgICAgICAgICB3ZWVrU2VwZXJhdG9yLmNsYXNzTmFtZSA9IFwidGwtd2Vlay1zZXBlcmF0b3JcIjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoZWV0Q29udGFpbmVyLmFwcGVuZENoaWxkKHdlZWtTZXBlcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmFwcGVuZChkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm1vZGVsPy5zZXRGYXZvcml0ZWREYXRlKGRhdGEuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uY2xhc3NOYW1lID0gXCJ0bC1zdGFyLWJ1dHRvbiB0bC1zaG93LW9uLWhvdmVyXCI7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24udGl0bGUgPSBcIkZhdm9yaXRlIERheVwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIudGl0bGUuY2xhc3NOYW1lID0gXCJ0bC1kYXRlLWxhYmVsXCI7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnRpdGxlLmlubmVyVGV4dCA9IG5ldyBEYXRlKGRhdGEuZGF0ZS5kYXRlKS50b0RhdGVTdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGUubm9uV29ya2luZ0RheSkgZGF0ZUNvbnRhaW5lci50aXRsZS5jbGFzc0xpc3QuYWRkKFwidGwtZGF0ZS1sYWJlbC13ZWVrZW5kXCIpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kKGRhdGVDb250YWluZXIudGl0bGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIud2Vla2VuZERlc2NyaXB0aW9uLmNsYXNzTmFtZSA9IFwidGwtd2Vla2VuZC1kZXNjcmlwdGlvblwiO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kKGRhdGVDb250YWluZXIud2Vla2VuZERlc2NyaXB0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLm5vRW50cmllc1dhcm5pbmcuY2xhc3NOYW1lID0gXCJ0bC1uby1lbnRyaWVzLXdhcm5pbmdcIjtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmFwcGVuZChkYXRlQ29udGFpbmVyLm5vRW50cmllc1dhcm5pbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghZGF0YS5zaGVldC5sb2NrZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICBhZGQuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImFkZFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBhZGQuY2xhc3NOYW1lID0gXCJ0bC1hZGQtZW50cnktYnRuIHRsLXNob3ctb24taG92ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICBhZGQub25jbGljayA9ICgpID0+IHRoaXMubW9kZWw/Lm5ld0VudHJ5KGRhdGEuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kKGFkZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24uYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcInN3aXRjaF9hY2Nlc3Nfc2hvcnRjdXRfYWRkXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24udGl0bGUgPSBcIlBhc3RlIGZyb20gRmF2b3JpdGUgRGF5XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLXBhc3RlLWJ0biB0bC1zaG93LW9uLWhvdmVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8ucGFzdGVGcm9tU3RhcnJlZChkYXRhLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmFwcGVuZChkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkVG9XZWVrU3VtKGRhdGVDb250YWluZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlQ29udGFpbmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0RW50cnlDb250YWluZXIoZGF0YTogeyBzaGVldDogVGltZWxvZ1NoZWV0LCBkYXRlOiBUaW1lbG9nRGF0ZSB9LCBkYXRlQ29udGFpbmVyOiBUaW1lbG9nVUlEYXRlQ29udGFpbmVyLCBlbnRyeTogVGltZWxvZ0VudHJ5KVxyXG4gICAge1xyXG4gICAgICAgIGxldCBlbnRyeUNvbnRhaW5lciA9IGRhdGVDb250YWluZXIuZW50cmllcy5maW5kKHAgPT4gcC5lbnRyeSA9PT0gZW50cnkpO1xyXG4gICAgICAgIGlmICghZW50cnlDb250YWluZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lciA9IHtcclxuICAgICAgICAgICAgICAgIGVudHJ5LFxyXG4gICAgICAgICAgICAgICAgcGFyZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxyXG4gICAgICAgICAgICAgICAgc3RhcnRIb3VyOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXHJcbiAgICAgICAgICAgICAgICBlbmRIb3VyOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXHJcbiAgICAgICAgICAgICAgICBsZW5ndGg6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcclxuICAgICAgICAgICAgICAgIHJlYXNvbjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKSxcclxuICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcclxuICAgICAgICAgICAgICAgIGNvbW1lbnRCdXR0b246IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksXHJcbiAgICAgICAgICAgICAgICBub1JlYXNvbldhcm5pbmc6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5lbnRyaWVzLnB1c2goZW50cnlDb250YWluZXIpO1xyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmNsYXNzTmFtZSA9IFwidGwtZW50cnlcIjtcclxuICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIucGFyZW50KTtcclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91ci50eXBlID0gXCJ0aW1lXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91ci5jbGFzc05hbWUgPSBcInRsLWVudHJ5LXN0YXJ0XCI7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnNoZWV0LmxvY2tlZCkgZW50cnlDb250YWluZXIuc3RhcnRIb3VyLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuc3RhcnRIb3VyLm9uY2hhbmdlID0gKCkgPT4gXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IGVudHJ5LnN0YXJ0SG91ciArIGVudHJ5Lmxlbmd0aEhvdXJzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbD8uY2hhbmdlU3RhcnRIb3VyKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIERhdGVzLnBhcnNlVGltZVRvaG91cnMoZW50cnlDb250YWluZXI/LnN0YXJ0SG91ci52YWx1ZSA/PyBcIjA4OjAwXCIpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IE51bWJlcnMucm91bmQoZW5kIC0gZW50cnkuc3RhcnRIb3VyLCAyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWw/LmNoYW5nZUxlbmd0aEhvdXJzKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIGxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91cik7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBlbmRMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgICAgICBlbmRMYWJlbC5jbGFzc05hbWUgPSBcInRsLWVuZC1sYWJlbFwiXHJcbiAgICAgICAgICAgIGVuZExhYmVsLmlubmVyVGV4dCA9IFwiLVwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW5kTGFiZWwpO1xyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuZW5kSG91ci50eXBlID0gXCJ0aW1lXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmVuZEhvdXIuY2xhc3NOYW1lID0gXCJ0bC1lbnRyeS1lbmRcIjtcclxuICAgICAgICAgICAgaWYgKGRhdGEuc2hlZXQubG9ja2VkKSBlbnRyeUNvbnRhaW5lci5lbmRIb3VyLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuZW5kSG91ci5vbmNoYW5nZSA9ICgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChlbnRyeUNvbnRhaW5lcj8uZW5kSG91cilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBOdW1iZXJzLnJvdW5kKERhdGVzLnBhcnNlVGltZVRvaG91cnMoZW50cnlDb250YWluZXIuZW5kSG91ci52YWx1ZSkgLSBlbnRyeS5zdGFydEhvdXIsIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZWw/LmNoYW5nZUxlbmd0aEhvdXJzKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIGxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLmVuZEhvdXIpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnJlYXNvbi5vbmNoYW5nZSA9ICgpID0+IHRoaXMubW9kZWw/LmNoYW5nZVJlYXNvbihkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpLCBlbnRyeUNvbnRhaW5lcj8ucmVhc29uLnZhbHVlID8/IFwiXCIpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zaGVldC5sb2NrZWQpIGVudHJ5Q29udGFpbmVyLnJlYXNvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnJlYXNvbi5jbGFzc05hbWUgPSBcInRsLWVudHJ5LXJlYXNvblwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIucmVhc29uKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVSZWFzb25zRHJvcGRvd24oZW50cnlDb250YWluZXIucmVhc29uKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkYXRlQ29udGFpbmVyLmVudHJpZXMubGVuZ3RoID09PSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN1bUhvdXJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN1bUhvdXJzLmNsYXNzTmFtZSA9IFwidGwtc3VtLWhvdXJzXCI7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kKGRhdGVDb250YWluZXIuc3VtSG91cnMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5sZW5ndGgudHlwZSA9IFwibnVtYmVyXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmxlbmd0aC5jbGFzc05hbWUgPSBcInRsLWVudHJ5LWxlbmd0aFwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5sZW5ndGguc3RlcCA9IFwiMC4wMVwiO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zaGVldC5sb2NrZWQpIGVudHJ5Q29udGFpbmVyLmxlbmd0aC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmxlbmd0aC5vbmNoYW5nZSA9ICgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWw/LmNoYW5nZUxlbmd0aEhvdXJzKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIEhvdXJTY2FsaW5nLnVuc2NhbGUocGFyc2VGbG9hdChlbnRyeUNvbnRhaW5lcj8ubGVuZ3RoLnZhbHVlIHx8IFwiMFwiKSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZHVyYXRpb25MYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgICAgICBkdXJhdGlvbkxhYmVsLmNsYXNzTmFtZSA9IFwidGwtZHVyYXRpb24tbGFiZWxcIjtcclxuICAgICAgICAgICAgZHVyYXRpb25MYWJlbC5pbm5lclRleHQgPSBIb3VyU2NhbGluZy5nZXRVbml0TmFtZSgpO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZHVyYXRpb25MYWJlbCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWRhdGEuc2hlZXQubG9ja2VkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtYWRkLWNvbW1lbnQtYnRuIHRsLXNob3ctb24taG92ZXJcIjtcclxuICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnRCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMubW9kZWw/LnRvZ2dsZUNvbW1lbnQoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSk7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZS5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiZGVsZXRlXCIpKTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZS5jbGFzc05hbWUgPSBcInRsLXJlbW92ZS1lbnRyeS1idG4gdGwtc2hvdy1vbi1ob3ZlclwiO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm1vZGVsPy5kZWxldGVFbnRyeShkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpKTtcclxuICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChyZW1vdmUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5ub1JlYXNvbldhcm5pbmcuYXBwZW5kKE1hdGVyaWFsSWNvbi5nZXQoXCJ3YXJuaW5nXCIsIHRydWUpKTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubm9SZWFzb25XYXJuaW5nLmFwcGVuZChcIiBObyByZWFzb24gc2VsZWN0ZWQhXCIpO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5ub1JlYXNvbldhcm5pbmcuY2xhc3NOYW1lID0gXCJ0bC1uby1yZWFzb24td2FybmluZyB0bC13YXJuaW5nIHRsLWhhcy1yZWFzb25cIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLm5vUmVhc29uV2FybmluZyk7XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50LnR5cGUgPSBcInRleHRcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC5wbGFjZWhvbGRlciA9IFwiV3JpdGUgYSBub3RlLi4uXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQudGl0bGUgPSBcIldyaXRlIGEgbm90ZS4uLlwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50LmNsYXNzTmFtZSA9IFwidGwtZW50cnktY29tbWVudFwiO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zaGVldC5sb2NrZWQpIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50Lm9uY2hhbmdlID0gKCkgPT4gXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWw/LmNoYW5nZUNvbW1lbnQoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgZW50cnlDb250YWluZXI/LmNvbW1lbnQudmFsdWUgPz8gXCJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLmNvbW1lbnQpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVudHJ5Q29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhZGRUb1dlZWtTdW0oZGF0ZTogVGltZWxvZ1VJRGF0ZUNvbnRhaW5lcilcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy53ZWVrU3Vtcy5sZW5ndGggPCAxIHx8IG5ldyBEYXRlKGRhdGUuZGF0ZS5kYXRlKS5nZXREYXkoKSA9PT0gMCkgLy9JZiB0aGlzIGlzIHRoZSBmaXJzdCBkYXksIG9yIGEgc3VuZGF5LCBjcmVhdGUgYSBuZXcgd2VlayBmb3IgaXQuXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCB3ZWVrU3VtID0ge1xyXG4gICAgICAgICAgICAgICAgZGF0ZXM6IFtkYXRlXSxcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgd2Vla1N1bS5lbGVtZW50LmNsYXNzTmFtZSA9IFwidGwtd2Vlay1zdW1cIjtcclxuICAgICAgICAgICAgdGhpcy53ZWVrU3Vtcy5wdXNoKHdlZWtTdW0pO1xyXG4gICAgICAgICAgICBkYXRlLnBhcmVudC5hcHBlbmRDaGlsZCh3ZWVrU3VtLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICBkYXRlLnBhcmVudC5zdHlsZS5tYXJnaW5Ub3AgPSBcIjM4cHhcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy53ZWVrU3Vtc1t0aGlzLndlZWtTdW1zLmxlbmd0aCAtIDFdLmRhdGVzLnB1c2goZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBvbkRhdGVVcGRhdGVkKGRhdGE6IHsgc2hlZXQ6IFRpbWVsb2dTaGVldCwgZGF0ZTogVGltZWxvZ0RhdGUgfSlcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFNoZWV0ID09PSBkYXRhLnNoZWV0ICYmIHRoaXMuc2hlZXRDb250YWluZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgZGF0ZUNvbnRhaW5lciA9IHRoaXMuZ2V0RGF0ZUNvbnRhaW5lcihkYXRhKTtcclxuICAgICAgICAgICAgaWYgKGRhdGVDb250YWluZXIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZGF0YS5kYXRlLmVudHJpZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVudHJ5Q29udGFpbmVyID0gdGhpcy5nZXRFbnRyeUNvbnRhaW5lcihkYXRhLCBkYXRlQ29udGFpbmVyLCBlbnRyeSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91ci52YWx1ZSA9IERhdGVzLmZvcm1hdEhvdXIoZW50cnkuc3RhcnRIb3VyKTtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5sZW5ndGgudmFsdWUgPSBOdW1iZXJzLnJvdW5kKEhvdXJTY2FsaW5nLnNjYWxlKGVudHJ5Lmxlbmd0aEhvdXJzKSwgMikudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5lbmRIb3VyLnZhbHVlID0gRGF0ZXMuZm9ybWF0SG91cihlbnRyeS5zdGFydEhvdXIgKyBlbnRyeS5sZW5ndGhIb3Vycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIucmVhc29uLnZhbHVlID0gZW50cnkucmVhc29uSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC52YWx1ZSA9IGVudHJ5LmNvbW1lbnQgPz8gXCJcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZW50cnkucmVhc29uSWQpIGVudHJ5Q29udGFpbmVyLm5vUmVhc29uV2FybmluZy5jbGFzc0xpc3QuYWRkKFwidGwtaGFzLXJlYXNvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGVudHJ5Q29udGFpbmVyLm5vUmVhc29uV2FybmluZy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtaGFzLXJlYXNvblwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbi50aXRsZSA9IGVudHJ5Lmhhc0NvbW1lbnQgPyBcIlJlbW92ZSBub3RlXCIgOiBcIkFkZCBub3RlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbi5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnRCdXR0b24uYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChlbnRyeS5oYXNDb21tZW50ID8gXCJzcGVha2VyX25vdGVzX29mZlwiIDogXCJzcGVha2VyX25vdGVzXCIpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5Lmhhc0NvbW1lbnQpIGVudHJ5Q29udGFpbmVyLnBhcmVudC5jbGFzc0xpc3QuYWRkKFwidGwtaGFzLWNvbW1lbnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBlbnRyeUNvbnRhaW5lci5wYXJlbnQuY2xhc3NMaXN0LnJlbW92ZShcInRsLWhhcy1jb21tZW50XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlZEVudHJpZXMgPSBkYXRlQ29udGFpbmVyLmVudHJpZXMuZmlsdGVyKGVudHJ5ID0+ICFkYXRhLmRhdGUuZW50cmllcy5maW5kKGUgPT4gZSA9PT0gZW50cnkuZW50cnkpKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuZW50cmllcyA9IGRhdGVDb250YWluZXIuZW50cmllcy5maWx0ZXIoZW50cnkgPT4gIXJlbW92ZWRFbnRyaWVzLmluY2x1ZGVzKGVudHJ5KSk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVkRW50cmllcy5mb3JFYWNoKGUgPT4gZS5wYXJlbnQucmVtb3ZlKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkYXRlQ29udGFpbmVyLnN1bUhvdXJzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1bSA9IE51bWJlcnMuc3VtKGRhdGEuZGF0ZS5lbnRyaWVzLm1hcChlID0+IGUubGVuZ3RoSG91cnMpKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN1bUhvdXJzLmlubmVyVGV4dCA9IGAke0hvdXJTY2FsaW5nLmZvcm1hdChOdW1iZXJzLnJvdW5kKHN1bSwgMikpfWA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uZGlzYWJsZWQgPSBkYXRhLmRhdGUuZmF2b3JpdGVkO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1mYXZvcml0ZVwiKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwic3RhclwiLCBkYXRhLmRhdGUuZmF2b3JpdGVkKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRlLmZhdm9yaXRlZCkgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJ0bC1mYXZvcml0ZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZUNvbnRhaW5lci5lbnRyaWVzLmxlbmd0aCA+IDAgfHwgZGF0ZUNvbnRhaW5lci5kYXRlLmZhdm9yaXRlZClcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJ0bC1oaWRlLWZhdm9yaXRlLWJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1oaWRlLWZhdm9yaXRlLWJ1dHRvblwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnRpdGxlLnRpdGxlID0gZGF0YS5kYXRlLmRhdGVEZXNjcmlwdGlvbiA/PyBcIlwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGUubm9uV29ya2luZ0RheSAmJiBkYXRhLmRhdGUuZW50cmllcy5sZW5ndGggPCAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIud2Vla2VuZERlc2NyaXB0aW9uLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC13ZWVrZW5kLWRlc2NyaXB0aW9uLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLndlZWtlbmREZXNjcmlwdGlvbi5pbm5lclRleHQgPSBkYXRhLmRhdGUuZGF0ZURlc2NyaXB0aW9uID8/IFwiXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci53ZWVrZW5kRGVzY3JpcHRpb24uY2xhc3NMaXN0LmFkZChcInRsLXdlZWtlbmQtZGVzY3JpcHRpb24taGlkZGVuXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkYXRlQ29udGFpbmVyLmRhdGUuaG91cnNUb1dvcmsgPiAwICYmIGRhdGVDb250YWluZXIuZW50cmllcy5sZW5ndGggPCAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIubm9FbnRyaWVzV2FybmluZy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIubm9FbnRyaWVzV2FybmluZy5jbGFzc0xpc3QuYWRkKFwidGwtd2FybmluZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdW0gPSBOdW1iZXJzLnN1bShkYXRhLmRhdGUuZW50cmllcy5tYXAoZSA9PiBlLmxlbmd0aEhvdXJzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5ub0VudHJpZXNXYXJuaW5nLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5ub0VudHJpZXNXYXJuaW5nLmFwcGVuZChNYXRlcmlhbEljb24uZ2V0KFwid2FybmluZ1wiLCB0cnVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5ub0VudHJpZXNXYXJuaW5nLmFwcGVuZChgICR7TnVtYmVycy5yb3VuZChIb3VyU2NhbGluZy5zY2FsZShzdW0pLCAyKX0gLyAke0hvdXJTY2FsaW5nLmZvcm1hdChOdW1iZXJzLnJvdW5kKGRhdGVDb250YWluZXIuZGF0ZS5ob3Vyc1RvV29yaywgMikpfWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIubm9FbnRyaWVzV2FybmluZy5jbGFzc0xpc3QuYWRkKFwidGwtaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCB3ZWVrU3VtID0gdGhpcy53ZWVrU3Vtcy5maW5kKHcgPT4gdy5kYXRlcy5zb21lKGQgPT4gZC5kYXRlID09PSBkYXRhLmRhdGUpKTtcclxuICAgICAgICAgICAgaWYgKHdlZWtTdW0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN1bSA9IE51bWJlcnMuc3VtKHdlZWtTdW0uZGF0ZXMubWFwKGQgPT4gTnVtYmVycy5zdW0oZC5lbnRyaWVzLm1hcChlID0+IGUuZW50cnkubGVuZ3RoSG91cnMpKSkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdG90YWxIb3VycyA9IE51bWJlcnMuc3VtKHdlZWtTdW0uZGF0ZXMubWFwKGQgPT4gZC5kYXRlLmhvdXJzVG9Xb3JrKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB3ZWVrTnVtYmVyID0gRGF0ZXMuZ2V0V2Vla051bWJlckZyb21EYXRlKHdlZWtTdW0uZGF0ZXNbMF0uZGF0ZS5kYXRlKTtcclxuICAgICAgICAgICAgICAgIHdlZWtTdW0uZWxlbWVudC5pbm5lckhUTUwgPSBgPGI+V2VlayAke3dlZWtOdW1iZXJ9PC9iPjogJHtOdW1iZXJzLnJvdW5kKEhvdXJTY2FsaW5nLnNjYWxlKHN1bSksIDIpfSAvICR7SG91clNjYWxpbmcuZm9ybWF0KE51bWJlcnMucm91bmQodG90YWxIb3VycywgMikpfWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51cGRhdGVCYWxhbmNlKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHVwZGF0ZVJlYXNvbnNEcm9wZG93bihzZWxlY3Q6IEhUTUxTZWxlY3RFbGVtZW50KVxyXG4gICAge1xyXG4gICAgICAgIHNlbGVjdC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIGZvciAoY29uc3QgcmVhc29uIG9mIHRoaXMucmVhc29ucylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IHJlYXNvbi5zZXJ2ZXJJZDtcclxuICAgICAgICAgICAgb3B0aW9uLmlubmVyVGV4dCA9IHJlYXNvbi52YWx1ZTtcclxuICAgICAgICAgICAgc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBvblJlYXNvbnNVcGRhdGVkKHJlYXNvbnM6IEhpQm9iUmVhc29uW10pXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5yZWFzb25zID0gcmVhc29ucztcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIHRoaXMuc2hlZXREYXRlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZGF0ZS5lbnRyaWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVJlYXNvbnNEcm9wZG93bihlbnRyeS5yZWFzb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBvblNhdmVTdGF0dXNVcGRhdGVkKHN0YXR1czogVGltZWxvZ1NhdmVTdGF0dXMpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNhdmVTdGF0dXMpIHJldHVybjtcclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NMaXN0LnJlbW92ZShcInRsLXN1Y2Nlc3NcIik7XHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC13YXJuaW5nXCIpO1xyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtY2xpY2thYmxlXCIpO1xyXG4gICAgICAgIGlmIChzdGF0dXMgPT09IFRpbWVsb2dTYXZlU3RhdHVzLlNhdmVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJjbG91ZF9kb25lXCIsIHRydWUpKTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZChcIiBTYXZlZFwiKTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmNsYXNzTGlzdC5hZGQoXCJ0bC1zdWNjZXNzXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RhdHVzID09PSBUaW1lbG9nU2F2ZVN0YXR1cy5XYWl0aW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJwZW5kaW5nXCIpKTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZChcIiBQZW5kaW5nLi4uXCIpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdGF0dXMgPT09IFRpbWVsb2dTYXZlU3RhdHVzLlNhdmluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiY2xvdWRfdXBsb2FkXCIpKTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZChcIiBTYXZpbmcuLi5cIilcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gVGltZWxvZ1NhdmVTdGF0dXMuRXJyb3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImNsb3VkX29mZlwiKSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmQoXCIgRmFpbGVkIVwiKTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmNsYXNzTGlzdC5hZGQoXCJ0bC13YXJuaW5nXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NMaXN0LmFkZChcInRsLWNsaWNrYWJsZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uU2F2ZVN0YXR1c0NsaWNrKClcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2F2ZVN0YXR1cz8uY2xhc3NMaXN0LmNvbnRhaW5zKFwidGwtY2xpY2thYmxlXCIpKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5tb2RlbD8uc2F2ZSgpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBvblNoZWV0VXBkYXRlZChzaGVldDogVGltZWxvZ1NoZWV0KVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLnNoZWV0RHJvcGRvd24gJiYgIXRoaXMuc2hlZXREcm9wZG93bk9wdGlvbnMuZmluZChzID0+IHMuc2hlZXQgPT09IHNoZWV0KSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IHNoZWV0LmlkLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIG9wdGlvbi5pbm5lclRleHQgPSBgJHtuZXcgRGF0ZShzaGVldC5zdGFydCkudG9EYXRlU3RyaW5nKCl9IC0gJHtuZXcgRGF0ZShzaGVldC5lbmQpLnRvRGF0ZVN0cmluZygpfSR7c2hlZXQubG9ja2VkID8gXCIgKGxvY2tlZClcIiA6IFwiXCJ9YDtcclxuICAgICAgICAgICAgdGhpcy5zaGVldERyb3Bkb3duT3B0aW9ucy5wdXNoKHsgc2hlZXQ6IHNoZWV0LCBlbGVtZW50OiBvcHRpb24gfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hlZXREcm9wZG93bi5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFNoZWV0ID09PSBzaGVldClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNoZWV0Q29udGFpbmVyKSB0aGlzLnNoZWV0Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgIHRoaXMuc2hlZXREYXRlcyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLndlZWtTdW1zID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoY29uc3QgZGF0ZSBvZiBzaGVldC5kYXRlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMub25EYXRlVXBkYXRlZCh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVwZGF0ZUJhbGFuY2UoKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgb25TaGVldHNVcGRhdGVkKHNoZWV0czogVGltZWxvZ1NoZWV0W10pXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hlZXREcm9wZG93bikgdGhpcy5zaGVldERyb3Bkb3duLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5zaGVldERyb3Bkb3duT3B0aW9ucyA9IFtdO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2hlZXQgb2Ygc2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5vblNoZWV0VXBkYXRlZChzaGVldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub25TZWxlY3RlZFNoZWV0Q2hhbmdlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvblNlbGVjdGVkU2hlZXRDaGFuZ2UoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5zaGVldERyb3Bkb3duKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHRoaXMuc2hlZXRDb250YWluZXIpIHRoaXMuc2hlZXRDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICB0aGlzLnNoZWV0RGF0ZXMgPSBbXTtcclxuICAgICAgICBjb25zdCB2YWwgPSB0aGlzLnNoZWV0RHJvcGRvd24udmFsdWU7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFNoZWV0ID0gdGhpcy5zaGVldERyb3Bkb3duT3B0aW9ucy5maW5kKG8gPT4gby5lbGVtZW50LnZhbHVlID09PSB2YWwpPy5zaGVldDtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFNoZWV0ICYmIHRoaXMubW9kZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLmZldGNoU2hlZXQodGhpcy5zZWxlY3RlZFNoZWV0LmlkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHVwZGF0ZUJhbGFuY2UoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5tb2RlbCB8fCAhdGhpcy5iYWxhbmNlTGFiZWwgfHwgIXRoaXMuc2VsZWN0ZWRTaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGJhbGFuY2UgPSBhd2FpdCB0aGlzLm1vZGVsLmdldEZsZXhTdGF0dXMoKTtcclxuICAgICAgICBjb25zdCB0b3RhbEJhbGFuY2UgPSBOdW1iZXJzLnJvdW5kKGJhbGFuY2UuYmFsYW5jZSwgMik7XHJcbiAgICAgICAgdGhpcy5iYWxhbmNlTGFiZWwuaW5uZXJUZXh0ID0gYEZsZXg6ICR7SG91clNjYWxpbmcuZm9ybWF0KHRvdGFsQmFsYW5jZSl9JHt0b3RhbEJhbGFuY2UgPT09IDAgPyBcIiDwn6WzXCIgOiBcIlwifWA7XHJcblxyXG4gICAgICAgIHRoaXMuYmFsYW5jZVdhcm5pbmc/LmNsYXNzTGlzdC5hZGQoXCJ0bC1oaWRkZW5cIik7XHJcbiAgICAgICAgaWYgKGJhbGFuY2Uub3ZlcmR1ZURhdGVzLmxlbmd0aCArIGJhbGFuY2Uud2FybmluZ0RhdGVzLmxlbmd0aCA+IDAgJiYgdGhpcy5iYWxhbmNlV2FybmluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvbGljeSA9IHRoaXMubW9kZWwuZ2V0RmxleFBvbGljeSgpO1xyXG4gICAgICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgIHRoaXMuYmFsYW5jZVdhcm5pbmcuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZy5hcHBlbmQoTWF0ZXJpYWxJY29uLmdldChcIndhcm5pbmdcIiwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICBpZiAoYmFsYW5jZS5vdmVyZHVlRGF0ZXMubGVuZ3RoID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZy5hcHBlbmQoYFlvdSBoYXZlICR7YmFsYW5jZS5vdmVyZHVlRGF0ZXMubGVuZ3RofSB1bmJhbGFuY2VkIGZsZXggZGF0ZSR7YmFsYW5jZS5vdmVyZHVlRGF0ZXMubGVuZ3RoID09PSAxID8gXCJcIiA6IFwic1wifSBvbGRlciB0aGFuICR7cG9saWN5LnByZXZpb3VzRGF5c0luY2x1ZGVkfSBkYXlzIWApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZy50aXRsZSArPSBgT3ZlcmR1ZSBkYXRlczogJHtiYWxhbmNlLm92ZXJkdWVEYXRlcy5tYXAoZCA9PiBEYXRlcy5mb3JtYXQoZC5kYXRlLCBmYWxzZSkpLmpvaW4oXCIsIFwiKX1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGJhbGFuY2Uud2FybmluZ0RhdGVzLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFsYW5jZVdhcm5pbmcuYXBwZW5kKGAke2JhbGFuY2Uud2FybmluZ0RhdGVzLmxlbmd0aH0gdW5iYWxhbmNlZCBmbGV4IGRhdGUke2JhbGFuY2Uud2FybmluZ0RhdGVzLmxlbmd0aCA9PT0gMSA/IFwiXCIgOiBcInNcIn0gd2lsbCBzb29uIGJlIG9sZGVyIHRoYW4gJHtwb2xpY3kucHJldmlvdXNEYXlzSW5jbHVkZWR9IGRheXMhYCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nLnRpdGxlID0gXCJcIjtcclxuICAgICAgICAgICAgaWYgKGJhbGFuY2Uub3ZlcmR1ZURhdGVzLmxlbmd0aCA+IDApIHRoaXMuYmFsYW5jZVdhcm5pbmcudGl0bGUgKz0gYE92ZXJkdWUgZGF0ZXM6ICR7YmFsYW5jZS5vdmVyZHVlRGF0ZXMubWFwKGQgPT4gYCR7RGF0ZXMuZm9ybWF0KGQuZGF0ZSwgZmFsc2UpfSAoJHtkLnJlYWxsb2NhdGVkQmFsYW5jZX1oKWApLmpvaW4oXCIsIFwiKX1gO1xyXG4gICAgICAgICAgICBpZiAoYmFsYW5jZS53YXJuaW5nRGF0ZXMubGVuZ3RoID4gMCkgdGhpcy5iYWxhbmNlV2FybmluZy50aXRsZSArPSBgJHt0aGlzLmJhbGFuY2VXYXJuaW5nLnRpdGxlLmxlbmd0aCA+IDAgPyBcIlxcblwiIDogXCJcIn1Tb29uIG92ZXJkdWUgZGF0ZXM6ICR7YmFsYW5jZS53YXJuaW5nRGF0ZXMubWFwKGQgPT4gYCR7RGF0ZXMuZm9ybWF0KGQuZGF0ZSwgZmFsc2UpfSAoJHtkLnJlYWxsb2NhdGVkQmFsYW5jZX1oKWApLmpvaW4oXCIsIFwiKX1gO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZy5hcHBlbmQoXCIgXCIpO1xyXG4gICAgICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nLmFwcGVuZChNYXRlcmlhbEljb24uZ2V0KFwiaW5mb1wiLCBmYWxzZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZmF2b3JpdGUgPSBhd2FpdCB0aGlzLm1vZGVsLmdldEZhdm9yaXRlZERhdGUoKTtcclxuICAgICAgICBpZiAoZmF2b3JpdGUpIHRoaXMuc2hlZXRDb250YWluZXI/LmNsYXNzTGlzdC5hZGQoXCJ0bC1oYXMtZmF2b3JpdGVcIik7XHJcbiAgICAgICAgZWxzZSB0aGlzLnNoZWV0Q29udGFpbmVyPy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtaGFzLWZhdm9yaXRlXCIpO1xyXG4gICAgfVxyXG5cclxufSIsImV4cG9ydCBjb25zdCBUaW1lbG9nQ3NzID0gYFxyXG4udGwtdG9nZ2xlLWJ0blxyXG57XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xyXG4gICAgZm9udC1zaXplOiAyZW07XHJcbn1cclxuLnRsLWNsb3NlLWJ0blxyXG57XHJcbiAgICBmb250LXNpemU6IDJlbTtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIHJpZ2h0OiA1cHg7XHJcbn1cclxuLnRsLXVpXHJcbntcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIHotaW5kZXg6IDEwMDA7XHJcbiAgICBpbnNldDogMHB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICBvdmVyZmxvdy15OiBzY3JvbGw7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG59ICAgICAgICBcclxuLnRsLWRhdGVcclxue1xyXG4gICAgbWFyZ2luLXRvcDogMTBweDtcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCBncmF5O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG59XHJcbi50bC1zYXZlLXN0YXR1cywgLnRsLWFkZC1lbnRyeS1idG5cclxue1xyXG4gICAgbWFyZ2luLWxlZnQ6IDEwcHg7XHJcbn1cclxuLnRsLWVudHJ5XHJcbntcclxuICAgIG1hcmdpbi10b3A6IDVweDtcclxufVxyXG4udGwtZW50cnkgPiAqXHJcbntcclxuICAgIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbn1cclxuLnRsLWVudHJ5ID4gaW5wdXRbdHlwZT1udW1iZXJdXHJcbntcclxuICAgIHdpZHRoOiA1MHB4O1xyXG59XHJcbi50bC1lbnRyeSA+IGlucHV0W3R5cGU9dGltZV1cclxue1xyXG4gICAgd2lkdGg6IDc1cHg7XHJcbn1cclxuLnRsLXNhdmUtc3RhdHVzXHJcbntcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcbi50bC1zaGVldC1zZWxlY3Rcclxue1xyXG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcclxufVxyXG4udGwtZGF0ZS1sYWJlbFxyXG57XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG4udGwtZGF0ZS1sYWJlbC50bC1kYXRlLWxhYmVsLXdlZWtlbmRcclxue1xyXG4gICAgZm9udC13ZWlnaHQ6IGluaXRpYWw7XHJcbiAgICBmb250LXN0eWxlOiBpdGFsaWM7XHJcbiAgICBjb2xvcjogZ3JheTtcclxufVxyXG4udGwtZW50cnktcmVhc29uIFxyXG57XHJcbiAgICBwYWRkaW5nOiAzcHg7XHJcbn1cclxuLnRsLXJlbW92ZS1lbnRyeS1idG5cclxue1xyXG4gICAgZmxvYXQ6IHJpZ2h0O1xyXG59XHJcbi50bC13ZWVrLXNlcGVyYXRvclxyXG57XHJcbiAgICBtYXJnaW4tdG9wOiA1N3B4O1xyXG59XHJcbi50bC1iYWxhbmNlLWxhYmVsXHJcbntcclxuICAgIG1hcmdpbjogNXB4O1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG59XHJcbi50bC1iYWxhbmNlLWhlbHBcclxue1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgY3Vyc29yOiBoZWxwO1xyXG59XHJcblxyXG4udGwtdWktaW5uZXJcclxue1xyXG4gICAgZGlzcGxheTogdGFibGU7XHJcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcclxuICAgIG1hcmdpbi1yaWdodDogYXV0bztcclxufVxyXG4udGwtdWktaW5uZXIsIC50bC13ZWVrLXNlcGVyYXRvciwgLnRsLWRhdGVcclxue1xyXG4gICAgbWluLXdpZHRoOiA2NTBweDtcclxufVxyXG4udGwtZW50cnktY29tbWVudCB7XHJcbiAgICBtYXJnaW4tdG9wOiA1cHg7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcbi50bC1oYXMtY29tbWVudCAudGwtZW50cnktY29tbWVudFxyXG57XHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxufVxyXG4udGwtc3VjY2Vzc1xyXG57XHJcbiAgICBjb2xvcjogIzAyQjg3NTtcclxufVxyXG4udGwtd2FybmluZ1xyXG57XHJcbiAgICBjb2xvcjogI0YwQUY1MjtcclxufVxyXG4udGwtZGFuZ2VyXHJcbntcclxuICAgIGNvbG9yOiAjREE1NjUyO1xyXG59XHJcbi50bC1zdW0taG91cnNcclxue1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgbWFyZ2luLXRvcDogLTIzcHg7XHJcbn1cclxuLnRsLXdlZWstc3VtXHJcbntcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIG1hcmdpbi10b3A6IC01N3B4O1xyXG4gICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XHJcbn1cclxuLnRsLXVpIGJ1dHRvbi50bC1zdGFyLWJ1dHRvbiwgLnRsLXVpLnRsLWRhcmsgYnV0dG9uLnRsLXN0YXItYnV0dG9uXHJcbntcclxuICAgIGJhY2tncm91bmQ6IG5vbmU7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBtYXJnaW46IDA7XHJcbiAgICBwYWRkaW5nOiAwO1xyXG59XHJcbi50bC11aSBidXR0b24udGwtc3Rhci1idXR0b24udGwtZmF2b3JpdGUsIC50bC11aS50bC1kYXJrIGJ1dHRvbi50bC1zdGFyLWJ1dHRvbi50bC1mYXZvcml0ZVxyXG57XHJcbiAgICBjb2xvcjogI2YxYTAwYjtcclxuICAgIG9wYWNpdHk6IDE7XHJcbn1cclxuLnRsLXBhc3RlLWJ0biB7XHJcbiAgICBtYXJnaW4tbGVmdDogNXB4O1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG4udGwtaGFzLWZhdm9yaXRlIC50bC1wYXN0ZS1idG46bm90KC50bC1oaWRlLWZhdm9yaXRlLWJ1dHRvbilcclxue1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG59XHJcbi50bC1zaG93LW9uLWhvdmVyXHJcbntcclxuICAgIG9wYWNpdHk6IDA7XHJcbn1cclxuLnRsLWRhdGU6aG92ZXIgLnRsLXNob3ctb24taG92ZXJcclxue1xyXG4gICAgb3BhY2l0eTogMTtcclxufVxyXG4udGwtbm8tcmVhc29uLXdhcm5pbmcge1xyXG4gICAgbWFyZ2luLWxlZnQ6IDE4MHB4O1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgbWFyZ2luLXRvcDogLTIycHg7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxufVxyXG4udGwtbm8tcmVhc29uLXdhcm5pbmcudGwtaGFzLXJlYXNvblxyXG57XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcbi50bC1jbGlja2FibGVcclxue1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcbi50bC1kYXJrLW1vZGUtYnRuIHtcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIGJvdHRvbTogNXB4O1xyXG4gICAgcmlnaHQ6IDIwcHg7XHJcbn1cclxuLnRsLXVpIGJ1dHRvblxyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDlkOWQ5O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgZ3JheTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxufVxyXG4udGwtdWkgYnV0dG9uOmhvdmVyXHJcbntcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNlZmViZWI7XHJcbn1cclxuXHJcbi50bC11aS50bC1kYXJrXHJcbntcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMxRTFFMUU7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbn1cclxuLnRsLXVpLnRsLWRhcmsgc2VsZWN0LCAudGwtdWkudGwtZGFyayBpbnB1dCB7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjUyNTI2O1xyXG4gICAgYm9yZGVyOiAxcHggZ3JheSBzb2xpZDtcclxuICAgIGNvbG9yLXNjaGVtZTogZGFyaztcclxufVxyXG4udGwtdWkudGwtZGFyayBidXR0b25cclxue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzMzMzMzMztcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICMyODI4Mjg7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbn1cclxuLnRsLXVpLnRsLWRhcmsgYnV0dG9uOmhvdmVyXHJcbntcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM1MjUyNTI7XHJcbn1cclxuLnRsLXVpLnRsLWRhcmsgLnRsLW5vLXJlYXNvbi13YXJuaW5nXHJcbntcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMyNTI1MjY7XHJcbn1cclxuLnRsLXdlZWtlbmQtZGVzY3JpcHRpb24ge1xyXG4gICAgY29sb3I6IGdyYXk7XHJcbiAgICBmb250LXN0eWxlOiBpdGFsaWM7XHJcbiAgICBmbG9hdDogcmlnaHQ7XHJcbiAgICBtYXJnaW4tdG9wOiAycHg7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICBtYXgtd2lkdGg6IDQwMHB4O1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgIG1heC1oZWlnaHQ6IDM1cHg7XHJcbn1cclxuLnRsLXdlZWtlbmQtZGVzY3JpcHRpb24udGwtd2Vla2VuZC1kZXNjcmlwdGlvbi1oaWRkZW5cclxue1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG4udGwtdmVyc2lvbi1udW1iZXIge1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgYm90dG9tOiA1cHg7XHJcbiAgICBsZWZ0OiA1cHg7XHJcbn1cclxuXHJcbi50bC1zZXR0aW5ncyB7XHJcbiAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICBpbnNldDogMDtcclxuICAgIHotaW5kZXg6IDEwMDtcclxufVxyXG4udGwtc2V0dGluZ3MtYmFjayB7XHJcbiAgICBpbnNldDogMDtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xyXG4gICAgb3BhY2l0eTogMC41O1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4udGwtc2V0dGluZ3MudGwtc2V0dGluZ3MtaGlkZGVuIHtcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuXHJcbi50bC1zZXR0aW5ncy12ZXJzaW9uIHtcclxuICAgIG1hcmdpbjogNXB4IDEwcHg7XHJcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgZ3JheTtcclxufVxyXG5cclxuLnRsLXNldHRpbmdzLXZlcnNpb246bGFzdC1jaGlsZCB7XHJcbiAgICBib3JkZXItYm90dG9tOiAwO1xyXG59XHJcblxyXG4udGwtc2V0dGluZ3MtdGl0bGUge1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICBmb250LXNpemU6IDEuMjVlbTtcclxufVxyXG4udGwtc2V0dGluZ3MtaW5uZXIge1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICBoZWlnaHQ6IDcwdmg7XHJcbiAgICB3aWR0aDogOTB2dztcclxuICAgIGxlZnQ6IDV2dztcclxuICAgIHRvcDogMTV2aDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkIGdyYXk7XHJcbiAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgcGFkZGluZzogMTBweDtcclxuICAgIG92ZXJmbG93OiBhdXRvO1xyXG59XHJcbi50bC1zZXR0aW5ncy12ZXJzaW9uIGJ1dHRvblxyXG57XHJcbiAgICBtYXJnaW4tbGVmdDogNXB4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTVweDtcclxufVxyXG5cclxuLnRsLWRhcmsgLnRsLXNldHRpbmdzLWlubmVyXHJcbntcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMxYTFhMWE7XHJcbn1cclxuXHJcbi50bC1iYWxhbmNlLXdhcm5pbmdcclxue1xyXG4gICAgZm9udC1zaXplOiAwLjhlbTtcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xyXG4gICAgY3Vyc29yOiBoZWxwO1xyXG59XHJcbi50bC1oaWRkZW5cclxue1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG5cclxuLnRsLW5vLWVudHJpZXMtd2FybmluZ1xyXG57XHJcbiAgICBmbG9hdDogcmlnaHQ7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG5cclxuYDsiLCJpbXBvcnQgeyBUaW1lbG9nVUkgfSBmcm9tIFwiLi4vVGltZWxvZy9UaW1lbG9nVUlcIjtcclxuaW1wb3J0IHsgVGltZWxvZ1VJU2V0dGluZ3NCdXR0b25zIH0gZnJvbSBcIi4uL1RpbWVsb2cvVGltZWxvZ1VJU2V0dGluZ3NCdXR0b25zXCI7XHJcbmltcG9ydCB7IEhvdXJTY2FsaW5nIH0gZnJvbSBcIi4uL1V0aWxzL0hvdXJTY2FsaW5nXCI7XHJcbmltcG9ydCB7IE1hdGVyaWFsSWNvbiB9IGZyb20gXCIuLi9VdGlscy9NYXRlcmlhbEljb25cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBBcHJpbEZvb2xzXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgc2V0QXByaWxGb29sc09wdE91dChvcHRPdXQ6IGJvb2xlYW4pXHJcbiAgICB7XHJcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGxfYXByaWxfZm9vbHNfb3B0X291dFwiLCBKU09OLnN0cmluZ2lmeShvcHRPdXQpKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0QXByaWxGb29sc09wdE91dCgpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGxfYXByaWxfZm9vbHNfb3B0X291dFwiKSA/PyBcImZhbHNlXCIpIGFzIGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBzZXRIYXNTZWVuUG9wdXAodmFsdWU6IGJvb2xlYW4pXHJcbiAgICB7XHJcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGxfYXByaWxfZm9vbHNfcG9wdXBcIiwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgaGFzU2VlblBvcHVwKClcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0bF9hcHJpbF9mb29sc19wb3B1cFwiKSA/PyBcImZhbHNlXCIpIGFzIGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaXNBcHJpbEZvb2xzKClcclxuICAgIHtcclxuICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhhc2ggPT09IFwiI3RsLWFwcmlsZm9vbHNcIikgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgY29uc3QgeWVhciA9IG5vdy5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIGxldCBtb250aCA9IDQ7XHJcbiAgICAgICAgbGV0IGRheSA9IDE7XHJcbiAgICAgICAgbGV0IGFwcmlsRm9vbHM6IERhdGUgfCBudWxsO1xyXG4gICAgICAgIGxldCB3ZWVrZW5kRGF5cyA9IFs2LCA3XTtcclxuICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkYXkgPCAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkYXkgPSAzMTtcclxuICAgICAgICAgICAgICAgIG1vbnRoLS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXByaWxGb29scyA9IG5ldyBEYXRlKGAke3llYXJ9LyR7bW9udGh9LyR7ZGF5fWApO1xyXG4gICAgICAgICAgICBpZiAoIXdlZWtlbmREYXlzLmluY2x1ZGVzKGFwcmlsRm9vbHMuZ2V0RGF5KCkpKSBicmVhaztcclxuICAgICAgICAgICAgZGF5LS07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhcHJpbEZvb2xzRW5kID0gYXByaWxGb29scy5nZXRUaW1lKCkgKyAoMTAwMCAqIDYwICogNjAgKiAyNCk7XHJcbiAgICAgICAgcmV0dXJuIG5vdy5nZXRUaW1lKCkgPD0gYXByaWxGb29sc0VuZCAmJiBub3cuZ2V0VGltZSgpID49IGFwcmlsRm9vbHMuZ2V0VGltZSgpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBpbml0KClcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5pc0FwcmlsRm9vbHMoKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRpbWVsb2dVSVNldHRpbmdzQnV0dG9ucy5idXR0b25zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgaWNvbjogXCJib2x0XCIsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIk9wdCBvdXQgb2YgVGVyYWxpZ2h0bWV0ZXJzXCIsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJBcHJpbCBmb29scyFcIixcclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHsgdGhpcy5zZXRBcHJpbEZvb2xzT3B0T3V0KCF0aGlzLmdldEFwcmlsRm9vbHNPcHRPdXQoKSk7IGxvY2F0aW9uLnJlbG9hZCgpIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmdldEFwcmlsRm9vbHNPcHRPdXQoKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgSG91clNjYWxpbmcuc2NhbGluZyA9IHtcclxuICAgICAgICAgICAgICAgICAgICB1bml0R2VuZXJhbDogXCJ0ZXJhbGlnaHRtZXRlcihzKVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHVuaXRQbHVyYWw6IFwidGVyYWxpZ2h0bWV0ZXJzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdW5pdFNpbmd1bGFyOiBcInRlcmFsaWdodG1ldGVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IHRoaXMuaG91cjJUZXJhbGlnaHRtZXRlclNjYWxpbmcoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBUaW1lbG9nVUkub25TaG93Lm9uKCh1aSkgPT4gdGhpcy5zaG93QXByaWxGb29sc1BvcHVwKHVpKSwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QXByaWxGb29sc09wdE91dChmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0SGFzU2VlblBvcHVwKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHN0YXRpYyBzaG93QXByaWxGb29sc1BvcHVwKHVpOiBUaW1lbG9nVUkpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFzU2VlblBvcHVwKCkpIHJldHVybjtcclxuICAgICAgICAvL0p1c3QgZ29ubmEgdXNlIHRoZSBzZXR0aW5ncyBDU1MgZm9yIHRoaXMuLi5cclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IFwidGwtc2V0dGluZ3NcIjtcclxuICAgICAgICBlbGVtZW50LnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xyXG4gICAgICAgIGNvbnN0IGJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGJhY2suY2xhc3NOYW1lID0gXCJ0bC1zZXR0aW5ncy1iYWNrXCI7XHJcbiAgICAgICAgZWxlbWVudC5hcHBlbmQoYmFjayk7XHJcbiAgICAgICAgY29uc3QgZGlzbWlzcyA9ICgpID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEhhc1NlZW5Qb3B1cCh0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYmFjay5vbmNsaWNrID0gKCkgPT4gZGlzbWlzcygpO1xyXG4gICAgICAgIGVsZW1lbnQub25jbGljayA9ICgpID0+IGRpc21pc3MoKTtcclxuXHJcbiAgICAgICAgY29uc3QgaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGlubmVyLmNsYXNzTmFtZSA9IFwidGwtc2V0dGluZ3MtaW5uZXJcIjtcclxuICAgICAgICBlbGVtZW50LmFwcGVuZChpbm5lcik7XHJcblxyXG4gICAgICAgIGNvbnN0IHBvcHVwRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgcG9wdXBFbGVtZW50LmNsYXNzTmFtZSA9IFwidGwtc2V0dGluZ3MtdmVyc2lvblwiO1xyXG4gICAgICAgIGlubmVyLmFwcGVuZChwb3B1cEVsZW1lbnQpO1xyXG5cclxuICAgICAgICBjb25zdCBpc0Vhcmx5QXByaWxGb29scyA9IG5ldyBEYXRlKCkuZ2V0TW9udGgoKSA8IDM7IC8vQXByaWwgaXMgMC1pbmRleCBtb250aCAzLlxyXG4gICAgICAgIHBvcHVwRWxlbWVudC5pbm5lckhUTUwgPSBgPGgxPkludHJvZHVjaW5nOiB0aGUgVGVyYWxpZ2h0bWV0ZXIhPC9oMT5cclxuICAgICAgICA8aDM+QWxsIGhvdXJzIGxvZ2dlZCB3aWxsIG5vdyBiZSBtZWFzdXJlZCBpbiBhIG5ldyB0aW1lIHVuaXQ6IHRoZSBUZXJhbGlnaHRtZXRlciAtIHRoZSB0aW1lIGl0IHRha2VzIGZvciBsaWdodCB0byB0cmF2ZWwgMSAwMDAgMDAwIDAwMCAwMDAgbWV0ZXJzITwvaDM+XHJcbiAgICAgICAgPGgzPlRoaXMgZmVhdHVyZSB3YXMgbWFkZSBleGNsdXNpdmVseSBmb3IgeW91ciBiZW5lZml0LCBpbiBubyB3YXkgcmVsYXRlZCB0byAke2lzRWFybHlBcHJpbEZvb2xzID8gYGFuIHVwY29taW5nIGRhdGUuYCA6IGB0b2RheSdzIGRhdGUuYH08L2gzPlxyXG4gICAgICAgIDxoMz5XZSBob3BlIHlvdSBlbmpveSDwn5iJ8J+ThTwvaDM+YDtcclxuXHJcbiAgICAgICAgdWkudGltZWxvZ1VJSW5uZXI/LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBob3VyMlRlcmFsaWdodG1ldGVyU2NhbGluZygpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgbGlnaHRNZXRlcnNQZXJNcyA9IDI5OTc5Mi40NTg7XHJcbiAgICAgICAgY29uc3QgbGlnaHRNZXRlck1zID0gMSAvIGxpZ2h0TWV0ZXJzUGVyTXM7XHJcbiAgICAgICAgY29uc3QgdGVyYUxpZ2h0TWV0ZXJzTXMgPSBsaWdodE1ldGVyTXMgKiAxMDAwICogMTAwMCAqIDEwMDAgKiAxMDAwO1xyXG4gICAgICAgIGNvbnN0IHRlcmFMaWdodE1ldGVyc0hvdXJzID0gdGVyYUxpZ2h0TWV0ZXJzTXMgLyAoMTAwMCAqIDYwICogNjApXHJcbiAgICAgICAgcmV0dXJuIDEgLyB0ZXJhTGlnaHRNZXRlcnNIb3VycztcclxuICAgIH1cclxufSIsImltcG9ydCB7IEFwcmlsRm9vbHMgfSBmcm9tIFwiLi9GdW4vQXByaWxGb29sc1wiO1xyXG5pbXBvcnQgeyBSZWFzb25FbmhhbmNlbWVudHMgfSBmcm9tIFwiLi9SZWFzb25FbmhhbmNlbWVudHMvUmVhc29uc0VuaGFuY2VtZW50c1wiO1xyXG5pbXBvcnQgeyBUaW1lbG9nVUkgfSBmcm9tIFwiLi9UaW1lbG9nL1RpbWVsb2dVSVwiO1xyXG5pbXBvcnQgeyBNYXRlcmlhbEljb24gfSBmcm9tIFwiLi9VdGlscy9NYXRlcmlhbEljb25cIjtcclxuXHJcbkFwcmlsRm9vbHMuaW5pdCgpO1xyXG5NYXRlcmlhbEljb24uaW5pdGlhbGl6ZSgpO1xyXG5uZXcgVGltZWxvZ1VJKCk7XHJcbm5ldyBSZWFzb25FbmhhbmNlbWVudHMoKTsiLCJleHBvcnQgY29uc3QgUmVhc29uRW5oYW5jZW1lbnRDc3MgPSBgXHJcbi5yZS1sYWJlbFxyXG57XHJcbiAgICBmb250LXNpemU6IDEuNWVtO1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxufVxyXG4ucmUtcmVhc29uLXNlbGVjdFxyXG57XHJcbiAgICBwYWRkaW5nOiA1cHg7XHJcbn1cclxuLnJlLXJlYXNvbi11aVxyXG57XHJcbiAgICB6LWluZGV4OiAyMDAwO1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgaW5zZXQ6IDA7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDAuNzUpO1xyXG4gICAgcGFkZGluZy10b3A6IDQ1dmg7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG4ucmUtYnRuXHJcbntcclxuICAgIHBhZGRpbmc6IDAgdmFyKC0tYnV0dG9uLXBhZGRpbmcteCwgMTVweCk7XHJcbiAgICBtaW4td2lkdGg6IDgwcHg7XHJcbiAgICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1zaXplLCAzMHB4KTtcclxuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgICBmb250LXNpemU6IHZhcigtLWJ1dHRvbi1mb250LXNpemUsIDEycHgpO1xyXG4gICAgZm9udC1mYW1pbHk6IHZhcigtLWJvZHktZm9udC1mYW1pbHkpO1xyXG4gICAgYm9yZGVyOiAwO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgbWFyZ2luOiA1cHg7XHJcbn1cclxuLnJlLWJ0bi5yZS1wcmltYXJ5XHJcbntcclxuICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5LWJnLXRleHQtY29sb3IsIHdoaXRlKTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktNjAwKTtcclxufVxyXG4ucmUtYnRuLnJlLXNlY29uZGFyeVxyXG57XHJcbiAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LWJnLXRleHQtY29sb3IsICM1MzUzNTMpO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2Vjb25kYXJ5LTYwMCk7XHJcbn1cclxuLnJlLWJsdXJcclxue1xyXG4gICAgZmlsdGVyOiBibHVyKDJweCk7XHJcbn1cclxuLnJlLXN1Ym1pdHRpbmcgLnJlLWJ0blxyXG57XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcbi5yZS1zdWJtaXR0aW5nLXRleHRcclxue1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxuICAgIGZvbnQtc2l6ZTogMS41ZW07XHJcbn1cclxuLnJlLXN1Ym1pdHRpbmcgLnJlLXN1Ym1pdHRpbmctdGV4dFxyXG57XHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxufVxyXG5gOyJdLCJuYW1lcyI6WyJEYXRlcyIsInN0YXRpYyIsInN0ciIsInNwbGl0IiwibGVuZ3RoIiwicHVzaCIsIkRhdGUiLCJqb2luIiwiZ2V0VGltZSIsInRpbWUiLCJpbmNsdWRlVGltZXN0YW1wIiwiZGF0ZSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJ0b1N0cmluZyIsInBhZFN0YXJ0IiwiZ2V0RGF0ZSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImhvdXJzIiwiaG91ciIsIk1hdGgiLCJmbG9vciIsIm1pbnV0ZSIsInJvdW5kIiwic2V0SG91cnMiLCJzZXREYXRlIiwiZ2V0RGF5Iiwid2VlazEiLCJwYXJzZUludCIsIkV2ZW50SGFuZGxlciIsImhhbmRsZXJzIiwib24iLCJoYW5kbGVyIiwiY29udGV4dCIsInRoaXMiLCJvZmYiLCJmaWx0ZXIiLCJoIiwiZmlyZSIsInZhbCIsImZvckVhY2giLCJjYWxsIiwiTnVtYmVycyIsIm51bSIsImRlY2ltYWxzIiwiY2VpbCIsImFyciIsImkiLCJIb3VyU2NhbGluZyIsInNjYWxpbmciLCJzY2FsZSIsInNjYWxlZCIsInVuaXRHZW5lcmFsIiwidW5pdFNpbmd1bGFyIiwidW5pdFBsdXJhbCIsImdldFVuaXROYW1lIiwiTWF0ZXJpYWxJY29uIiwibGluayIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJyZWwiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJpY29uIiwiZmlsbCIsInNwYW4iLCJjbGFzc05hbWUiLCJpbm5lclRleHQiLCJzdHlsZSIsInZlcnRpY2FsQWxpZ24iLCJmb250U2l6ZSIsImZvbnRWYXJpYXRpb25TZXR0aW5ncyIsIldhaXQiLCJtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwid2luZG93Iiwic2V0VGltZW91dCIsImRlbGVnYXRlIiwiaGFuZGxlIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiQXBpIiwibWV0aG9kIiwidXJsIiwiYm9keSIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwicmVzdWx0IiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0Iiwic3RhdHVzIiwiaGFzT3duUHJvcGVydHkiLCJrZXkiLCJhbGVydCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsInNlbmQiLCJzdHJpbmdpZnkiLCJIaUJvYiIsImVudHJpZXMiLCJzb21lIiwiZSIsInJlYXNvbklkIiwiZGF0YSIsIm1hcCIsInN0YXJ0IiwiZm9ybWF0Iiwic3RhcnRIb3VyIiwiZW5kIiwibGVuZ3RoSG91cnMiLCJ1bmRlZmluZWQiLCJyZWFzb24iLCJjb21tZW50IiwiZGF0ZVN0ciIsInVzZXJJZCIsImdldFVzZXJJZCIsIm1ldGFkYXRhIiwidGltZUxvZ0VudHJ5UmVhc29uIiwidmFsdWVzIiwidiIsImlkIiwic2VydmVySWQiLCJuYW1lIiwidmFsdWUiLCJzaGVldCIsInVzZXJJbmZvIiwiVGltZWxvZ1NhdmVTdGF0dXMiLCJSZWFzb25FbmhhbmNlbWVudE1vZGUiLCJUaW1lbG9nTW9kZWwiLCJzaGVldHMiLCJvbkRhdGVVcGRhdGVkIiwib25SZWFzb25zVXBkYXRlZCIsIm9uU2hlZXRVcGRhdGVkIiwib25TaGVldHNVcGRhdGVkIiwib25TYXZlU3RhdHVzVXBkYXRlZCIsInNhdmVIYW5kbGUiLCJzYXZpbmciLCJjYWxjdWxhdGluZ0ZsZXgiLCJmZXRjaGluZ1NoZWV0cyIsInJlYXNvbnMiLCJhc3luYyIsImZldGNoU2hlZXRzIiwiZmV0Y2hSZWFzb25zIiwiU2F2ZWQiLCJ1bnRpbCIsImVtcGxveWVlU2hlZXRzIiwiY3ljbGVTdGFydERhdGUiLCJjeWNsZUVuZERhdGUiLCJuZXdTaGVldCIsImRhdGVzIiwibG9ja2VkIiwiaG91cnNQZXJEYXkiLCJzb3J0IiwiYSIsImIiLCJmaW5kIiwicyIsImF0dGVuZGFuY2UiLCJzdW1tYXJ5IiwicG90ZW50aWFsV29ya2luZ0hvdXJzIiwicG90ZW50aWFsV29ya2luZ0RheXMiLCJkaXJ0eSIsIm5vdyIsIm5vbldvcmtpbmdEYXkiLCJob3Vyc1RvV29yayIsImZhdm9yaXRlZCIsImRhdGVEZXNjcmlwdGlvbiIsIm5vdGUiLCJkZXNjcmlwdGlvbiIsImhhc0NvbW1lbnQiLCJwYWlkVGltZW9mZlNlY29uZHMiLCJmYXZvcml0ZSIsImdldEZhdm9yaXRlZERhdGUiLCJjaGFuZ2VTdGFydEhvdXIiLCJpbmRleCIsImQiLCJxdWV1ZVNhdmUiLCJjaGFuZ2VMZW5ndGhIb3VycyIsImNoYW5nZVJlYXNvbiIsImNoYW5nZUNvbW1lbnQiLCJ0b2dnbGVDb21tZW50Iiwib2xkRmF2b3JpdGUiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiZ2V0SXRlbSIsImZldGNoU2hlZXQiLCJkZWxldGVFbnRyeSIsInNwbGljZSIsIm9yaWdpbmFsRGF0ZSIsIm9yaWdpbmFsU2hlZXQiLCJkYXRlSW5kZXgiLCJpbmRleE9mIiwiZW50cnlJbmRleCIsInNoZWV0SW5kZXgiLCJsYXN0IiwiZmluZExhc3RFbnRyeSIsImluY2x1ZGVzIiwiZW50cnkiLCJjbGVhclRpbWVvdXQiLCJzYXZlIiwiV2FpdGluZyIsIlNhdmluZyIsIm1pbmltdW1XYWl0Iiwic3VibWl0IiwiRXJyb3IiLCJnZXRGbGV4UG9saWN5IiwicHJldmlvdXNEYXlzSW5jbHVkZWQiLCJmbGV4V2FybmluZ1RocmVzaG9sZCIsImNhY2hlS2V5IiwicmVtb3ZlSXRlbSIsInNoZWV0QmFsYW5jZXMiLCJkYXkiLCJiYWxhbmNlIiwic3VtIiwiZGF0ZVN0cmluZyIsInJlYWxCYWxhbmNlIiwicmVhbGxvY2F0ZWRCYWxhbmNlIiwicG9saWN5IiwiY3VycmVudERhdGVUaW1lIiwib3ZlcmR1ZURhdGVUaW1lIiwid2FybmluZ0RhdGVUaW1lIiwiYWxsRGF0ZXMiLCJnZXRDYWNoZWRCYWxhbmNlcyIsImoiLCJwcmV2RGF0ZSIsImFtb3VudCIsIm1pbiIsImFicyIsInVuYmFsYW5jZWREYXRlcyIsIm92ZXJkdWVEYXRlcyIsIndhcm5pbmdEYXRlcyIsIlRpbWVsb2dVSVNldHRpbmdzQnV0dG9ucyIsImJ1dHRvbnMiLCJ0ZXh0IiwidGl0bGUiLCJvbkNsaWNrIiwidWkiLCJtb2RlbCIsImNsZWFyU2hlZXRCYWxhbmNlQ2FjaGUiLCJ0aGVuIiwidXBkYXRlQmFsYW5jZSIsIlRpbWVsb2dVSSIsInNoZWV0RHJvcGRvd25PcHRpb25zIiwic2hlZXREYXRlcyIsIndlZWtTdW1zIiwib25EYXJrTW9kZUNoYW5nZSIsInRpbWVsb2ciLCJhZGRCdXR0b24iLCJwYXJlbnQiLCJxdWVyeVNlbGVjdG9yIiwidG9nZ2xlQnV0dG9uIiwiZ2V0Iiwib25jbGljayIsInRvZ2dsZVZpc2libGUiLCJjcmVhdGVVSSIsImNyZWF0ZU1vZGVsIiwibG9jYXRpb24iLCJoYXNoIiwiaXNEYXJrTW9kZSIsInRpbWVsb2dVSU91dGVyIiwiZGlzcGxheSIsIm92ZXJmbG93Iiwic2hlZXRDb250YWluZXIiLCJpbm5lckhUTUwiLCJvblNob3ciLCJ0b2dnbGVEYXJrTW9kZSIsImFwcGVuZCIsInRpbWVsb2dVSUlubmVyIiwiY2xvc2VCdXR0b24iLCJkYXJrTW9kZUJ1dHRvbiIsImRhcmsiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJzZXR0aW5zV2luZG93IiwiY3JlYXRlU2V0dGluZ3NXaW5kb3ciLCJzZXR0aW5nc0J1dHRvbiIsImN1cnNvciIsInRleHREZWNvcmF0aW9uIiwic2hlZXREcm9wZG93bkxhYmVsIiwic2hlZXREcm9wZG93biIsIm9uY2hhbmdlIiwib25TZWxlY3RlZFNoZWV0Q2hhbmdlIiwic2F2ZVN0YXR1cyIsIm9uU2F2ZVN0YXR1c0NsaWNrIiwiYmFsYW5jZVBhcmVudCIsImJhbGFuY2VMYWJlbCIsImJhbGFuY2VXYXJuaW5nIiwiZWxlbWVudCIsImJhY2siLCJpbm5lciIsInNldHRpbmdzRWxlbWVudCIsImJ1dHRvbiIsImNoYW5nZWxvZyIsInZlcnNpb24iLCJ2ZXJzaW9uRWxlbWVudCIsInZlcnNpb25UaXRsZSIsImxpc3QiLCJ0ZXh0RWxlbWVudCIsImluaXRpYWxpemUiLCJnZXREYXRlQ29udGFpbmVyIiwic2VsZWN0ZWRTaGVldCIsImRhdGVDb250YWluZXIiLCJzdGFyQnV0dG9uIiwicGFzdGVCdXR0b24iLCJ3ZWVrZW5kRGVzY3JpcHRpb24iLCJub0VudHJpZXNXYXJuaW5nIiwid2Vla1NlcGVyYXRvciIsInNldEZhdm9yaXRlZERhdGUiLCJ0b0RhdGVTdHJpbmciLCJuZXdFbnRyeSIsInBhc3RlRnJvbVN0YXJyZWQiLCJhZGRUb1dlZWtTdW0iLCJnZXRFbnRyeUNvbnRhaW5lciIsImVudHJ5Q29udGFpbmVyIiwicCIsImVuZEhvdXIiLCJjb21tZW50QnV0dG9uIiwibm9SZWFzb25XYXJuaW5nIiwidHlwZSIsImRpc2FibGVkIiwicGFyc2VUaW1lVG9ob3VycyIsImVuZExhYmVsIiwidXBkYXRlUmVhc29uc0Ryb3Bkb3duIiwic3VtSG91cnMiLCJzdGVwIiwidW5zY2FsZSIsInBhcnNlRmxvYXQiLCJkdXJhdGlvbkxhYmVsIiwicGxhY2Vob2xkZXIiLCJ3ZWVrU3VtIiwibWFyZ2luVG9wIiwiZm9ybWF0SG91ciIsInJlbW92ZWRFbnRyaWVzIiwidyIsInRvdGFsSG91cnMiLCJ3ZWVrTnVtYmVyIiwiZ2V0V2Vla051bWJlckZyb21EYXRlIiwic2VsZWN0Iiwib3B0aW9uIiwiY29udGFpbnMiLCJvIiwiZ2V0RmxleFN0YXR1cyIsInRvdGFsQmFsYW5jZSIsIm9wdE91dCIsInllYXIiLCJhcHJpbEZvb2xzIiwibW9udGgiLCJ3ZWVrZW5kRGF5cyIsImFwcmlsRm9vbHNFbmQiLCJpc0FwcmlsRm9vbHMiLCJzZXRBcHJpbEZvb2xzT3B0T3V0IiwiZ2V0QXByaWxGb29sc09wdE91dCIsInJlbG9hZCIsImhvdXIyVGVyYWxpZ2h0bWV0ZXJTY2FsaW5nIiwic2hvd0FwcmlsRm9vbHNQb3B1cCIsInNldEhhc1NlZW5Qb3B1cCIsImhhc1NlZW5Qb3B1cCIsImRpc21pc3MiLCJwb3B1cEVsZW1lbnQiLCJpc0Vhcmx5QXByaWxGb29scyIsImluaXQiLCJzdWJtaXR0aW5nIiwiY2xvY2tJbkJ1dHRvbkZpbmRlciIsInJlYXNvbkVuaGFuY2VtZW50VUkiLCJsYWJlbCIsInJlYXNvblNlbGVjdCIsInNhdmVEZWZhdWx0UmVhc29uVmFsdWUiLCJjYW5jZWxCdXR0b24iLCJjYW5jZWwiLCJzdWJtaXRCdXR0b24iLCJzdWJtaXR0aW5nVGV4dCIsImZpbmRVbmVuaGFuY2VkQnV0dG9ucyIsImVuaGFuY2VDbG9ja0luQnV0dG9uIiwiRml4TGF0ZXN0IiwiRml4QWxsIiwiYXBwUm9vdCIsInNlbGVjdG9yIiwicXVlcnkiLCJxdWVyeVNlbGVjdG9yQWxsIiwibW9kZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzaG93UmVhc29uRml4ZXIiLCJsb2FkRGVmYXVsdFJlYXNvblZhbHVlIiwic2V0VUlWaXNpYmxlIiwiZml4QWxsIiwiZml4TGF0ZXN0IiwibGF0ZXN0Il0sInNvdXJjZVJvb3QiOiIifQ==