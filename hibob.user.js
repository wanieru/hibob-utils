// ==UserScript==
// @name        HiBob Time Utilities
// @version     1.1.1
// @author      Funday Factory
// @description Utilities to make it easier to log time in HiBob
// @match       https://app.hibob.com/*
// @namespace   http://tampermonkey.net/
// @icon        https://www.google.com/s2/favicons?sz=64&domain=hibob.com
// @grant       none
// ==/UserScript==

(()=>{"use strict";class e{static xhr(e,t,n){return new Promise((s=>{let a=new XMLHttpRequest;a.open(e,t),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Content-Type","application/json"),a.onreadystatechange=()=>{if(4===a.readyState){let e;try{e=JSON.parse(a.responseText)}catch(t){e={result:a.responseText}}if(200!==a.status){if(e.hasOwnProperty("error")){const t=e.hasOwnProperty("key")?e.key:a.status.toString();alert(`HiBob Utils: Error ${t} - ${e.error}`)}else alert(`HiBob Utils: Error ${a.status} - check the developer console for more information.`);console.log(`HiBob Utils: Error ${a.status}.`),console.log(a)}s({status:a.status,body:e})}},a.send(JSON.stringify(n))}))}}class t{static parse(e){if(!e)return null;const t=e.split("T");return t.length<2&&t.push("00:00"),new Date(t.join("T")).getTime()}static format(e,t){if(!e)return"";const n=new Date(e);return`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}-${n.getDate().toString().padStart(2,"0")}${t?`T${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`:""}`}static formatHour(e){const t=Math.floor(e%24),n=Math.round(60*(e-t));return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}static getWeekNumberFromDate(e){var t=new Date(e);t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)}static parseTimeTohours(e){const t=e.split(":");return parseInt(t[0])+parseInt(t[1])/60}}class n{static async submit(n,s){if(s.some((e=>!e.reasonId)))return console.log("WARNING: SOME ENTRIES HAVE NO REASON SET - NOT SUBMITTING!!",n,s),!1;const a=s.map((e=>{var s;return{start:t.format(n+3600*e.startHour*1e3,!0),end:e.lengthHours?t.format(n+3600*(e.startHour+e.lengthHours)*1e3,!0):void 0,reason:e.reasonId,comment:null!==(s=e.comment)&&void 0!==s?s:void 0}})),o=t.format(n,!1),i=await this.getUserId();return 200===(await e.xhr("POST",`https://app.hibob.com/api/attendance/employees/${i}/attendance/entries?forDate=${o}`,a)).status}static async timelogReasons(){return(await this.metadata()).timeLogEntryReason.values.map((e=>({id:e.serverId,name:e.value})))}static async attendance(t){return(await e.xhr("GET",`https://app.hibob.com/api/employees/attendance/my/sheets/${t}`,{})).body}static async sheets(){const t=await this.getUserId();return(await e.xhr("GET",`https://app.hibob.com/api/employees/${t}/timelog/attendance/sheets`,{})).body}static async metadata(){return(await e.xhr("GET","https://app.hibob.com/api/company/metadata/lists/?includeArchived=true",{})).body}static async getUserId(){var e;return"string"!=typeof this.userId&&await this.userInfo(),null!==(e=this.userId)&&void 0!==e?e:""}static async userInfo(){const t=await e.xhr("GET","https://app.hibob.com/api/user",{});return this.userId=t.body.id,t.body}}class s{static for(e){return new Promise((t=>{window.setTimeout((()=>t()),e)}))}static until(e){return new Promise((t=>{const n=window.setInterval((()=>{e()&&(t(),window.clearInterval(n))}),1)}))}}var a,o;!function(e){e[e.FixAll=0]="FixAll",e[e.FixLatest=1]="FixLatest"}(a||(a={}));class i{constructor(){this.handlers=[]}on(e,t){this.handlers.push({handler:e,context:t})}off(e,t){this.handlers=this.handlers.filter((n=>n.handler!==e||n.context!==t))}fire(e){this.handlers.forEach((t=>t.handler.call(t.context,e)))}}class r{static initialize(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200",e.rel="stylesheet",document.head.appendChild(e)}static get(e,t=!1){const n=document.createElement("span");return n.className="material-symbols-outlined",n.innerText=e,n.style.verticalAlign="middle",n.style.fontSize="1.5em",n.style.fontVariationSettings="'FILL' "+(t?1:0),n}}class l{static round(e,t){return Math.round(e*10**t)/10**t}static floor(e,t){return Math.floor(e*10**t)/10**t}static ceil(e,t){return Math.ceil(e*10**t)/10**t}static sum(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}}!function(e){e[e.Waiting=0]="Waiting",e[e.Saving=1]="Saving",e[e.Saved=2]="Saved",e[e.Error=3]="Error"}(o||(o={}));class d{constructor(){this.sheets=[],this.onDateUpdated=new i,this.onReasonsUpdated=new i,this.onSheetUpdated=new i,this.onSheetsUpdated=new i,this.onSaveStatusUpdated=new i,this.saveHandle=-1,this.saving=!1,this.calculatingFlex=!1,this.fetchingSheets=!1,this.reasons=[]}async initialize(){await this.fetchSheets(),await this.fetchReasons(),this.onSaveStatusUpdated.fire(o.Saved)}async fetchSheets(){var e,a;await s.until((()=>!this.fetchingSheets)),this.fetchingSheets=!0,this.sheets=[];const o=await n.sheets();for(const n of o.employeeSheets){const s=null!==(e=t.parse(n.cycleStartDate))&&void 0!==e?e:0,o=null!==(a=t.parse(n.cycleEndDate))&&void 0!==a?a:0,i={id:n.id,status:n.status,start:s,end:o,dates:[],locked:n.locked,hoursPerDay:0};this.sheets.push(i)}this.sheets.sort(((e,t)=>t.start-e.start)),this.onSheetsUpdated.fire(this.sheets),this.fetchingSheets=!1}async fetchReasons(){this.reasons=(await n.metadata()).timeLogEntryReason.values,this.onReasonsUpdated.fire(this.reasons)}async fetchSheet(e){var s;const a=this.sheets.find((t=>t.id===e));if(!a)return;const o=await n.attendance(e);a.hoursPerDay=o.summary.potentialWorkingHours/o.summary.potentialWorkingDays,a.dates=[];for(const e of o.attendance){const n={dirty:!1,date:null!==(s=t.parse(e.date))&&void 0!==s?s:Date.now(),weekend:"WeekendEvent"===e.status,favorited:!1,timeoffRequired:e.note.isTimeoffRequired,dateDescription:e.note.description,entries:e.entries.map((n=>{var s,a,o,i,r;return{startHour:l.floor(((null!==(s=t.parse(n.start))&&void 0!==s?s:Date.now())-(null!==(a=t.parse(e.date))&&void 0!==a?a:Date.now()))/36e5,2),lengthHours:l.ceil(((null!==(o=t.parse(n.end))&&void 0!==o?o:Date.now())-(null!==(i=t.parse(n.start))&&void 0!==i?i:Date.now()))/36e5,2),reasonId:n.reason,comment:null!==(r=n.comment)&&void 0!==r?r:null,hasComment:!!n.comment}})).sort(((e,t)=>e.startHour-t.startHour))};a.dates.push(n)}a.dates.sort(((e,t)=>t.date-e.date));const i=await this.getFavoritedDate();i&&i.sheet===a&&(i.date.favorited=!0),this.onSheetUpdated.fire(a)}changeStartHour(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].startHour=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}changeLengthHours(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].lengthHours=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}changeReason(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].reasonId=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}changeComment(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].comment=n,e.entries[t].hasComment=!0,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}toggleComment(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries[t].hasComment=!e.entries[t].hasComment,e.entries[t].comment=e.entries[t].hasComment?"":null,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}async setFavoritedDate(e){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!n)return;const s=await this.getFavoritedDate();s&&(s.date.favorited=!1,this.onDateUpdated.fire(s)),e.favorited=!0,this.onDateUpdated.fire({sheet:n,date:e}),window.localStorage.setItem("tl_favorite",JSON.stringify({date:t.format(e.date,!1)}))}async getFavoritedDate(){const e=window.localStorage.getItem("tl_favorite");if(!e)return null;const n=JSON.parse(e),s=t.parse(n.date);if("number"==typeof s){const e=this.sheets.find((e=>e.start<=s&&e.end>=s));if(e){e.dates.length<1&&await this.fetchSheet(e.id);const t=e.dates.find((e=>e.date===s));if(t)return{sheet:e,date:t}}}return null}deleteEntry(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries.splice(t,1),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}async findLastEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;let n=t.dates.indexOf(e),s=-1;for(let e=this.sheets.indexOf(t);e<this.sheets.length;e++){const t=this.sheets[e];for(t.dates.length<1&&await this.fetchSheet(t.id);n<t.dates.length;n++){const e=t.dates[n];if(e.entries.length>0)return s<0?e.entries[e.entries.length-1]:e.entries[s];s=0}n=0}}async newEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const n=await this.findLastEntry(e);let s=8.5,a=l.round(t.hoursPerDay,2),o="";n&&(e.entries.includes(n)&&(s=n.startHour+n.lengthHours,a=1),o=n.reasonId),e.entries.push({startHour:s,lengthHours:a,reasonId:o,comment:null,hasComment:!1}),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}async pasteFromStarred(e){if(e.entries.length>0)return;const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const n=await this.getFavoritedDate();if(n&&n.date!==e){for(const t of n.date.entries)e.entries.push({startHour:t.startHour,lengthHours:t.lengthHours,reasonId:t.reasonId,comment:t.comment,hasComment:t.hasComment});e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}}queueSave(){window.clearTimeout(this.saveHandle),this.saveHandle=window.setTimeout((()=>this.save()),500),this.onSaveStatusUpdated.fire(o.Waiting)}async save(){await s.until((()=>!this.saving)),this.saving=!0,this.onSaveStatusUpdated.fire(o.Saving);const e=s.for(100);let t=!1;for(const e of this.sheets)for(const s of e.dates)s.dirty&&(await n.submit(s.date,s.entries)?s.dirty=!1:t=!0);await e,this.onSaveStatusUpdated.fire(t?o.Error:o.Saved),this.saving=!1}static getBalanceCalculationDescription(){return"Flex hours is calculated using the hours worked in the previous 28 days."}async getCurrentBalanceHours(){var e,n,a;const o=null!==(e=t.parse(t.format(Date.now(),!1)))&&void 0!==e?e:0,i=null!==(n=t.parse(t.format(o-23328e5,!1)))&&void 0!==n?n:0,r={};let d=0;if(this.sheets){await s.until((()=>!this.calculatingFlex)),this.calculatingFlex=!0;for(let e=this.sheets.length-1;e>=0;e--){const t=this.sheets[e];if(!t)continue;let n=[];const s=`tl_cached_hour_balances_${t.id}`;if(t.locked&&null!==window.localStorage.getItem(s))n=JSON.parse(null!==(a=window.localStorage.getItem(s))&&void 0!==a?a:"[]");else{if(t.dates.length<1&&await this.fetchSheet(t.id),t.dates.some((e=>e.entries.length>0&&e.entries.some((e=>e.lengthHours>0)))))for(const e of t.dates){const s=e.weekend?0:t.hoursPerDay,a=l.sum(e.entries.map((e=>e.lengthHours)))-s;n.push({date:e.date,balance:a})}t.locked&&t.id>0&&window.localStorage.setItem(s,JSON.stringify(n))}d+=l.sum(n.filter((e=>e.date>=i&&e.date<=o)).map((e=>e.balance))),r[t.id.toString()]=l.sum(n.map((e=>e.balance)))}this.calculatingFlex=!1}return{sheets:r,balance:d}}}r.initialize(),new class{constructor(){this.sheetDropdownOptions=[],this.sheetDates=[],this.weekSums=[],this.reasons=[],this.onDarkModeChange=new i,window.timelog=this,this.addButton()}async addButton(){for(;;){const e=document.querySelector("div.app-content > app-top-bar.app-top-bar > div.actions");if(e){this.toggleButton=document.createElement("button"),this.toggleButton.className="tl-toggle-btn",this.toggleButton.appendChild(r.get("sentiment_very_satisfied")),this.toggleButton.title="HiBob Utilities",this.toggleButton.onclick=()=>this.toggleVisible(),e.appendChild(this.toggleButton),this.createUI(),await this.createModel(),"#tl-ui"===location.hash&&this.toggleVisible(),this.onDarkModeChange.fire(this.isDarkMode());break}await s.for(1)}}toggleVisible(){var e;this.timelogUIOuter&&("none"===this.timelogUIOuter.style.display?(this.timelogUIOuter.style.display="block",location.hash="#tl-ui",document.body.style.overflow="hidden",this.sheetContainer&&(this.sheetContainer.innerHTML=""),null===(e=this.model)||void 0===e||e.fetchSheets()):(this.timelogUIOuter.style.display="none",location.hash="",document.body.style.overflow="initial"))}isDarkMode(){return"true"===localStorage.getItem("tl_dark_mode")}toggleDarkMode(){this.isDarkMode()?localStorage.setItem("tl_dark_mode","false"):localStorage.setItem("tl_dark_mode","true"),this.onDarkModeChange.fire(this.isDarkMode())}createUI(){const e=document.createElement("style");e.innerHTML="\n.tl-toggle-btn\n{\n    border: none;\n    background: none;\n    font-size: 2em;\n}\n.tl-close-btn\n{\n    font-size: 2em;\n    position: absolute;\n    right: 5px;\n}\n.tl-ui\n{\n    position: fixed;\n    z-index: 1000;\n    inset: 0px;\n    background-color: white;\n    overflow-y: scroll;\n    padding: 10px;\n}        \n.tl-date\n{\n    margin-top: 10px;\n    padding: 10px;\n    border: 1px solid gray;\n    border-radius: 5px;\n}\n.tl-save-status, .tl-add-entry-btn\n{\n    margin-left: 10px;\n}\n.tl-entry\n{\n    margin-top: 5px;\n}\n.tl-entry > *\n{\n    margin-left: 5px;\n}\n.tl-entry > input[type=number]\n{\n    width: 50px;\n}\n.tl-entry > input[type=time]\n{\n    width: 75px;\n}\n.tl-save-status\n{\n    font-weight: bold;\n}\n.tl-sheet-select\n{\n    margin-left: 5px;\n}\n.tl-date-label\n{\n    font-weight: bold;\n}\n.tl-date-label.tl-date-label-weekend\n{\n    font-weight: initial;\n    font-style: italic;\n    color: gray;\n}\n.tl-entry-reason \n{\n    padding: 3px;\n}\n.tl-remove-entry-btn\n{\n    float: right;\n}\n.tl-week-seperator\n{\n    margin-top: 57px;\n}\n.tl-balance-label\n{\n    margin: 5px;\n    display: inline-block;\n}\n.tl-balance-help\n{\n    display: inline-block;\n    cursor: help;\n}\n\n.tl-ui-inner\n{\n    display: table;\n    margin-left: auto;\n    margin-right: auto;\n}\n.tl-ui-inner, .tl-week-seperator, .tl-date\n{\n    min-width: 650px;\n}\n.tl-entry-comment {\n    margin-top: 5px;\n    margin-bottom: 15px;\n    width: 100%;\n    display: none;\n}\n.tl-has-comment .tl-entry-comment\n{\n    display: block;\n}\n.tl-success\n{\n    color: #02B875;\n}\n.tl-warning\n{\n    color: #F0AF52;\n}\n.tl-danger\n{\n    color: #DA5652;\n}\n.tl-sum-hours\n{\n    position: absolute;\n    margin-top: -23px;\n}\n.tl-week-sum\n{\n    position: absolute;\n    margin-top: -57px;\n    text-decoration: underline;\n}\n.tl-ui button.tl-star-button, .tl-ui.tl-dark button.tl-star-button\n{\n    background: none;\n    border: none;\n    margin: 0;\n    padding: 0;\n}\n.tl-ui button.tl-star-button.tl-favorite, .tl-ui.tl-dark button.tl-star-button.tl-favorite\n{\n    color: #f1a00b;\n    opacity: 1;\n}\n.tl-paste-btn {\n    margin-left: 5px;\n    display: none;\n}\n.tl-has-favorite .tl-paste-btn:not(.tl-hide-favorite-button)\n{\n    display: inline-block;\n}\n.tl-show-on-hover\n{\n    opacity: 0;\n}\n.tl-date:hover .tl-show-on-hover\n{\n    opacity: 1;\n}\n.tl-no-reason-warning {\n    margin-left: 180px;\n    position: absolute;\n    margin-top: -22px;\n    font-weight: bold;\n    background-color: white;\n    user-select: none;\n    pointer-events: none;\n}\n.tl-no-reason-warning.tl-has-reason\n{\n    display: none;\n}\n.tl-clickable\n{\n    cursor: pointer;\n}\n.tl-dark-mode-btn {\n    position: fixed;\n    bottom: 5px;\n    right: 20px;\n}\n.tl-ui button\n{\n    background-color: #d9d9d9;\n    border: 1px solid gray;\n    border-radius: 5px;\n}\n.tl-ui button:hover\n{\n    background-color: #efebeb;\n}\n\n.tl-ui.tl-dark\n{\n    background-color: #1E1E1E;\n    color: white;\n}\n.tl-ui.tl-dark select, .tl-ui.tl-dark input {\n    color: white;\n    background-color: #252526;\n    border: 1px gray solid;\n    color-scheme: dark;\n}\n.tl-ui.tl-dark button\n{\n    background-color: #333333;\n    border: 1px solid #282828;\n    color: white;\n}\n.tl-ui.tl-dark button:hover\n{\n    background-color: #525252;\n}\n.tl-ui.tl-dark .tl-no-reason-warning\n{\n    background-color: #252526;\n}\n.tl-weekend-description {\n    color: gray;\n    font-style: italic;\n    float: right;\n    margin-top: 2px;\n    display: inline-block;\n    max-width: 400px;\n    overflow: hidden;\n    max-height: 35px;\n}\n.tl-weekend-description.tl-weekend-description-hidden\n{\n    display: none;\n}\n.tl-version-number {\n    position: fixed;\n    bottom: 5px;\n    left: 5px;\n}\n\n.tl-changelog {\n    position: fixed;\n    inset: 0;\n    z-index: 100;\n}\n.tl-changelog-back {\n    inset: 0;\n    position: absolute;\n    background-color: black;\n    opacity: 0.5;\n    cursor: pointer;\n}\n\n.tl-changelog.tl-changelog-hidden {\n    display: none;\n}\n\n.tl-changelog-version {\n    margin: 5px 10px;\n    border-bottom: 1px solid gray;\n}\n\n.tl-changelog-version:last-child {\n    border-bottom: 0;\n}\n\n.tl-changelog-title {\n    font-weight: bold;\n    font-size: 1.25em;\n}\n.tl-changelog-inner {\n    position: absolute;\n    background-color: white;\n    height: 70vh;\n    width: 90vw;\n    left: 5vw;\n    top: 15vh;\n    border: 1px solid gray;\n    border-radius: 10px;\n    padding: 10px;\n    overflow: auto;\n}\n.tl-dark .tl-changelog-inner\n{\n    background-color: #1a1a1a;\n}\n\n",document.body.appendChild(e),this.timelogUIOuter=document.createElement("div"),this.timelogUIOuter.className="tl-ui",this.timelogUIOuter.style.display="none",document.body.append(this.timelogUIOuter),this.timelogUIInner=document.createElement("div"),this.timelogUIInner.className="tl-ui-inner",this.timelogUIOuter.append(this.timelogUIInner);const t=document.createElement("button");t.className="tl-close-btn",t.appendChild(r.get("close")),t.onclick=()=>this.toggleVisible(),this.timelogUIInner.appendChild(t),this.darkModeButton=document.createElement("button"),this.darkModeButton.className="tl-dark-mode-btn",this.darkModeButton.onclick=()=>this.toggleDarkMode(),this.timelogUIInner.appendChild(this.darkModeButton),this.onDarkModeChange.on((e=>{var t,n;e?null===(t=this.timelogUIOuter)||void 0===t||t.classList.add("tl-dark"):null===(n=this.timelogUIOuter)||void 0===n||n.classList.remove("tl-dark"),this.darkModeButton&&(this.darkModeButton.innerHTML="",this.darkModeButton.append(e?r.get("light_mode"):r.get("dark_mode")))}),this);const n=document.createElement("div");if(n.innerText="1.1.1",n.className="tl-version-number",this.timelogUIInner.appendChild(n),[{version:"1.1.1 - 30/09/2022",text:["Added changelog","Show descriptions on non-working days"]}].length>0){const e=this.createChangelogElement();this.timelogUIInner.appendChild(e),n.onclick=()=>e.classList.remove("tl-changelog-hidden"),n.style.cursor="pointer",n.style.textDecoration="underline"}const s=document.createElement("span");s.innerText="Sheetasfasf:",this.timelogUIInner.appendChild(s),this.sheetDropdown=document.createElement("select"),this.sheetDropdown.className="tl-sheet-select",this.sheetDropdown.onchange=()=>this.onSelectedSheetChange(),this.timelogUIInner.appendChild(this.sheetDropdown),this.saveStatus=document.createElement("span"),this.saveStatus.className="tl-save-status",this.saveStatus.onclick=()=>this.onSaveStatusClick(),this.timelogUIInner.append(this.saveStatus);const a=document.createElement("div");a.className="tl-balance",this.timelogUIInner.append(a),this.balanceLabel=document.createElement("div"),this.balanceLabel.innerText="Balance: ",this.balanceLabel.className="tl-balance-label",a.append(this.balanceLabel);const o=document.createElement("div");o.append(r.get("help")),o.className="tl-balance-help",o.title=d.getBalanceCalculationDescription(),a.append(o),this.sheetContainer=document.createElement("div"),this.sheetContainer.className="tl-sheet",this.timelogUIInner.appendChild(this.sheetContainer)}createChangelogElement(){const e=document.createElement("div");e.className="tl-changelog tl-changelog-hidden";const t=document.createElement("div");t.className="tl-changelog-back",e.append(t),t.onclick=()=>e.classList.add("tl-changelog-hidden");const n=document.createElement("div");n.className="tl-changelog-inner",e.append(n);const s=[{version:"1.1.1 - 30/09/2022",text:["Added changelog","Show descriptions on non-working days"]}];for(const e of s){const t=document.createElement("div");t.className="tl-changelog-version",n.append(t);const s=document.createElement("div");s.className="tl-changelog-title",s.innerText=e.version,t.append(s);const a=document.createElement("ul");a.className="tl-changelog-list",t.append(a);for(const t of e.text){const e=document.createElement("li");e.innerText=t,a.append(e)}}return e}async createModel(){this.model&&(this.model.onDateUpdated.off(this.onDateUpdated,this),this.model.onReasonsUpdated.off(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.off(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.off(this.onSheetUpdated,this),this.model.onSheetsUpdated.off(this.onSheetsUpdated,this)),this.model=new d,this.model.onDateUpdated.on(this.onDateUpdated,this),this.model.onReasonsUpdated.on(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.on(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.on(this.onSheetUpdated,this),this.model.onSheetsUpdated.on(this.onSheetsUpdated,this),await this.model.initialize()}getDateContainer(e){if(this.selectedSheet===e.sheet&&this.sheetContainer){let t=this.sheetDates.find((t=>t.date===e.date));if(!t){if(t={date:e.date,parent:document.createElement("div"),title:document.createElement("span"),entries:[],starButton:document.createElement("button"),pasteButton:document.createElement("button"),weekendDescription:document.createElement("div")},this.sheetDates.push(t),t.parent.className="tl-date",this.sheetContainer.appendChild(t.parent),1===new Date(e.date.date).getDay()){const e=document.createElement("div");e.className="tl-week-seperator",this.sheetContainer.appendChild(e)}if(t.parent.append(t.starButton),t.starButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.setFavoritedDate(e.date)},t.starButton.className="tl-star-button tl-show-on-hover",t.starButton.title="Favorite Day",t.title.className="tl-date-label",t.title.innerText=new Date(e.date.date).toDateString(),e.date.weekend&&t.title.classList.add("tl-date-label-weekend"),t.parent.append(t.title),t.weekendDescription.className="tl-weekend-description",t.parent.append(t.weekendDescription),!e.sheet.locked&&!e.date.timeoffRequired){const n=document.createElement("button");n.appendChild(r.get("add")),n.className="tl-add-entry-btn tl-show-on-hover",n.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.newEntry(e.date)},t.parent.append(n),t.pasteButton=document.createElement("button"),t.pasteButton.appendChild(r.get("switch_access_shortcut_add")),t.pasteButton.title="Paste from Favorite Day",t.pasteButton.className="tl-paste-btn tl-show-on-hover",t.pasteButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.pasteFromStarred(e.date)},t.parent.append(t.pasteButton)}this.addToWeekSum(t)}return t}return null}getEntryContainer(e,n,s){let a=n.entries.find((e=>e.entry===s));if(!a){a={entry:s,parent:document.createElement("div"),startHour:document.createElement("input"),endHour:document.createElement("input"),length:document.createElement("input"),reason:document.createElement("select"),comment:document.createElement("input"),commentButton:document.createElement("button"),noReasonWarning:document.createElement("div")},n.entries.push(a),a.parent.className="tl-entry",n.parent.appendChild(a.parent),a.startHour.type="time",a.startHour.className="tl-entry-start",e.sheet.locked&&(a.startHour.disabled=!0),a.startHour.onchange=()=>{var n,o,i;const r=s.startHour+s.lengthHours;null===(n=this.model)||void 0===n||n.changeStartHour(e.date,e.date.entries.indexOf(s),t.parseTimeTohours(null!==(o=null==a?void 0:a.startHour.value)&&void 0!==o?o:"08:00"));const d=l.round(r-s.startHour,2);null===(i=this.model)||void 0===i||i.changeLengthHours(e.date,e.date.entries.indexOf(s),d)},a.parent.appendChild(a.startHour);const o=document.createElement("span");o.className="tl-end-label",o.innerText="-",a.parent.appendChild(o),a.endHour.type="time",a.endHour.className="tl-entry-end",e.sheet.locked&&(a.endHour.disabled=!0),a.endHour.onchange=()=>{var n;if(null==a?void 0:a.endHour){const o=l.round(t.parseTimeTohours(a.endHour.value)-s.startHour,2);null===(n=this.model)||void 0===n||n.changeLengthHours(e.date,e.date.entries.indexOf(s),o)}},a.parent.appendChild(a.endHour),a.reason.onchange=()=>{var t,n;return null===(t=this.model)||void 0===t?void 0:t.changeReason(e.date,e.date.entries.indexOf(s),null!==(n=null==a?void 0:a.reason.value)&&void 0!==n?n:"")},e.sheet.locked&&(a.reason.disabled=!0),a.reason.className="tl-entry-reason",a.parent.appendChild(a.reason),this.updateReasonsDropdown(a.reason),1===n.entries.length&&(n.sumHours=document.createElement("span"),n.sumHours.className="tl-sum-hours",a.parent.append(n.sumHours)),a.length.type="number",a.length.className="tl-entry-length",a.length.step="0.01",e.sheet.locked&&(a.length.disabled=!0),a.length.onchange=()=>{var t;null===(t=this.model)||void 0===t||t.changeLengthHours(e.date,e.date.entries.indexOf(s),parseFloat((null==a?void 0:a.length.value)||"0"))},a.parent.appendChild(a.length);const i=document.createElement("span");if(i.className="tl-duration-label",i.innerText="hour(s)",a.parent.appendChild(i),!e.sheet.locked){a.commentButton.className="tl-add-comment-btn tl-show-on-hover",a.commentButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.toggleComment(e.date,e.date.entries.indexOf(s))},a.parent.appendChild(a.commentButton);const t=document.createElement("button");t.appendChild(r.get("delete")),t.className="tl-remove-entry-btn tl-show-on-hover",t.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.deleteEntry(e.date,e.date.entries.indexOf(s))},a.parent.appendChild(t)}a.noReasonWarning.append(r.get("warning",!0)),a.noReasonWarning.append(" No reason selected!"),a.noReasonWarning.className="tl-no-reason-warning tl-warning tl-has-reason",a.parent.appendChild(a.noReasonWarning),a.comment.type="text",a.comment.placeholder="Write a note...",a.comment.title="Write a note...",a.comment.className="tl-entry-comment",e.sheet.locked&&(a.comment.disabled=!0),a.comment.onchange=()=>{var t,n;null===(t=this.model)||void 0===t||t.changeComment(e.date,e.date.entries.indexOf(s),null!==(n=null==a?void 0:a.comment.value)&&void 0!==n?n:"")},a.parent.appendChild(a.comment)}return a}addToWeekSum(e){if(this.weekSums.length<1||0===new Date(e.date.date).getDay()){const t={dates:[e],element:document.createElement("div")};t.element.className="tl-week-sum",this.weekSums.push(t),e.parent.appendChild(t.element),e.parent.style.marginTop="38px"}else this.weekSums[this.weekSums.length-1].dates.push(e)}onDateUpdated(e){var n,s,a;if(this.selectedSheet===e.sheet&&this.sheetContainer){let o=this.getDateContainer(e);if(o){for(const s of e.date.entries){let a=this.getEntryContainer(e,o,s);a.startHour.value=t.formatHour(s.startHour),a.length.value=s.lengthHours.toString(),a.endHour.value=t.formatHour(s.startHour+s.lengthHours),a.reason.value=s.reasonId,a.comment.value=null!==(n=s.comment)&&void 0!==n?n:"",s.reasonId?a.noReasonWarning.classList.add("tl-has-reason"):a.noReasonWarning.classList.remove("tl-has-reason"),a.commentButton.title=s.hasComment?"Remove note":"Add note",a.commentButton.innerHTML="",a.commentButton.appendChild(r.get(s.hasComment?"speaker_notes_off":"speaker_notes")),s.hasComment?a.parent.classList.add("tl-has-comment"):a.parent.classList.remove("tl-has-comment")}const i=o.entries.filter((t=>!e.date.entries.find((e=>e===t.entry))));if(o.entries=o.entries.filter((e=>!i.includes(e))),i.forEach((e=>e.parent.remove())),o.sumHours){const t=l.sum(e.date.entries.map((e=>e.lengthHours)));o.sumHours.innerText=`${l.round(t,2)} hour${1===t?"":"s"}`}o.starButton.innerHTML="",o.starButton.disabled=e.date.favorited,o.starButton.classList.remove("tl-favorite"),o.starButton.appendChild(r.get("star",e.date.favorited)),e.date.favorited&&o.starButton.classList.add("tl-favorite"),o.entries.length>0||o.date.favorited?o.pasteButton.classList.add("tl-hide-favorite-button"):o.pasteButton.classList.remove("tl-hide-favorite-button"),o.title.title=null!==(s=e.date.dateDescription)&&void 0!==s?s:"",e.date.weekend&&e.date.entries.length<1||e.date.timeoffRequired?(o.weekendDescription.classList.remove("tl-weekend-description-hidden"),o.weekendDescription.innerText=null!==(a=e.date.dateDescription)&&void 0!==a?a:""):o.weekendDescription.classList.add("tl-weekend-description-hidden")}const i=this.weekSums.find((t=>t.dates.some((t=>t.date===e.date))));if(i){const n=l.sum(i.dates.map((e=>l.sum(e.entries.map((e=>e.entry.lengthHours)))))),s=i.dates.filter((e=>!e.date.weekend)).length,a=e.sheet.hoursPerDay*s,o=t.getWeekNumberFromDate(i.dates[0].date.date);i.element.innerHTML=`<b>Week ${o}</b>: ${l.round(n,2)} / ${l.round(a,2)} hours`}}this.updateBalance()}updateReasonsDropdown(e){e.innerHTML="";for(const t of this.reasons){const n=document.createElement("option");n.value=t.serverId,n.innerText=t.value,e.appendChild(n)}}onReasonsUpdated(e){this.reasons=e;for(const e of this.sheetDates)for(const t of e.entries)this.updateReasonsDropdown(t.reason)}onSaveStatusUpdated(e){this.saveStatus&&(this.saveStatus.innerHTML="",this.saveStatus.classList.remove("tl-success"),this.saveStatus.classList.remove("tl-warning"),this.saveStatus.classList.remove("tl-clickable"),e===o.Saved&&(this.saveStatus.appendChild(r.get("cloud_done",!0)),this.saveStatus.append(" Saved"),this.saveStatus.classList.add("tl-success")),e===o.Waiting&&(this.saveStatus.appendChild(r.get("pending")),this.saveStatus.append(" Pending...")),e===o.Saving&&(this.saveStatus.appendChild(r.get("cloud_upload")),this.saveStatus.append(" Saving...")),e===o.Error&&(this.saveStatus.appendChild(r.get("cloud_off")),this.saveStatus.append(" Failed!"),this.saveStatus.classList.add("tl-warning"),this.saveStatus.classList.add("tl-clickable")))}onSaveStatusClick(){var e,t;(null===(e=this.saveStatus)||void 0===e?void 0:e.classList.contains("tl-clickable"))&&(null===(t=this.model)||void 0===t||t.save())}onSheetUpdated(e){if(this.sheetDropdown&&!this.sheetDropdownOptions.find((t=>t.sheet===e))){const t=document.createElement("option");t.value=e.id.toString(),t.innerText=`${new Date(e.start).toDateString()} - ${new Date(e.end).toDateString()}${e.locked?" (locked)":""}`,this.sheetDropdownOptions.push({sheet:e,element:t}),this.sheetDropdown.appendChild(t)}this.selectedSheet===e&&(this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[],this.weekSums=[]);for(const t of e.dates)this.onDateUpdated({sheet:e,date:t});this.updateBalance()}onSheetsUpdated(e){this.sheetDropdown&&(this.sheetDropdown.innerHTML=""),this.sheetDropdownOptions=[];for(const t of e)this.onSheetUpdated(t);this.onSelectedSheetChange()}onSelectedSheetChange(){var e;if(!this.sheetDropdown)return;this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[];const t=this.sheetDropdown.value;this.selectedSheet=null===(e=this.sheetDropdownOptions.find((e=>e.element.value===t)))||void 0===e?void 0:e.sheet,this.selectedSheet&&this.model&&this.model.fetchSheet(this.selectedSheet.id)}async updateBalance(){var e,t,n;if(!this.model||!this.balanceLabel||!this.selectedSheet)return;const s=await this.model.getCurrentBalanceHours(),a=l.round(null!==(e=s.sheets[this.selectedSheet.id.toString()])&&void 0!==e?e:0,2),o=l.round(s.balance,2);this.balanceLabel.innerText=`Flex: ${o} hour${1!=o?"s":""} (current month: ${a} hour${1!=a?"s":""})`,await this.model.getFavoritedDate()?null===(t=this.sheetContainer)||void 0===t||t.classList.add("tl-has-favorite"):null===(n=this.sheetContainer)||void 0===n||n.classList.remove("tl-has-favorite")}},new class{constructor(){this.submitting=!1,this.createUI(),this.clockInButtonFinder()}createUI(){const e=document.createElement("style");e.innerHTML="\n.re-label\n{\n    font-size: 1.5em;\n    margin-bottom: 10px;\n}\n.re-reason-select\n{\n    padding: 5px;\n}\n.re-reason-ui\n{\n    z-index: 2000;\n    position: fixed;\n    inset: 0;\n    background-color: rgba(0,0,0,0.75);\n    padding-top: 45vh;\n    text-align: center;\n    color: white;\n    font-weight: bold;\n}\n.re-btn\n{\n    padding: 0 var(--button-padding-x, 15px);\n    min-width: 80px;\n    height: var(--button-size, 30px);\n    font-weight: 600;\n    font-size: var(--button-font-size, 12px);\n    font-family: var(--body-font-family);\n    border: 0;\n    border-radius: 4px;\n    margin: 5px;\n}\n.re-btn.re-primary\n{\n    color: var(--primary-bg-text-color, white);\n    background-color: var(--primary-600);\n}\n.re-btn.re-secondary\n{\n    color: var(--secondary-bg-text-color, #535353);\n    background-color: var(--secondary-600);\n}\n.re-blur\n{\n    filter: blur(2px);\n}\n.re-submitting .re-btn\n{\n    display: none;\n}\n.re-submitting-text\n{\n    display: none;\n    font-size: 1.5em;\n}\n.re-submitting .re-submitting-text\n{\n    display: block;\n}\n",document.body.append(e),this.reasonEnhancementUI=document.createElement("div"),this.reasonEnhancementUI.className="re-reason-ui",this.reasonEnhancementUI.style.display="none",document.body.appendChild(this.reasonEnhancementUI);const t=document.createElement("div");t.innerText="Choose Default Reason",t.className="re-label",this.reasonEnhancementUI.appendChild(t),this.reasonSelect=document.createElement("select"),this.reasonSelect.className="re-reason-select",this.reasonSelect.onchange=()=>this.saveDefaultReasonValue(),this.reasonEnhancementUI.appendChild(this.reasonSelect),this.reasonEnhancementUI.appendChild(document.createElement("br"));const n=document.createElement("button");n.className="re-cancel-btn re-btn re-secondary",n.innerText="Cancel",n.onclick=()=>this.cancel(),this.reasonEnhancementUI.appendChild(n);const s=document.createElement("button");s.className="re-submit-btn re-btn re-primary",s.innerText="Submit",s.onclick=()=>this.submit(),this.reasonEnhancementUI.appendChild(s);const a=document.createElement("div");a.className="re-submitting-text",a.innerText="Submitting...",this.reasonEnhancementUI.appendChild(a)}async clockInButtonFinder(){for(var e;;)this.findUnenhancedButtons("b-button.punch-clock-button, b-button.time-widget-clock-in-btn, b-button.time-widget-clock-out-btn").forEach((e=>this.enhanceClockInButton(e,a.FixLatest))),this.findUnenhancedButtons("b-button.quick-fix-apply-button").forEach((e=>this.enhanceClockInButton(e,a.FixAll))),this.appRoot||(this.appRoot=null!==(e=document.querySelector("app-root"))&&void 0!==e?e:void 0),await s.for(10)}findUnenhancedButtons(e){var t=[],n=document.querySelectorAll(e);for(const e of n)e.classList.contains("re-enhanced")||(e.classList.add("re-enhanced"),t.push(e));return t}enhanceClockInButton(e,t){e.addEventListener("click",(()=>this.showReasonFixer(t)))}saveDefaultReasonValue(){this.reasonSelect&&window.localStorage.setItem("re-last-reason",this.reasonSelect.value)}loadDefaultReasonValue(){var e;this.reasonSelect&&(this.reasonSelect.value=null!==(e=window.localStorage.getItem("re-last-reason"))&&void 0!==e?e:"")}async showReasonFixer(e){if(this.reasonEnhancementUI&&(await s.for(250),this.setUIVisible(!0),this.mode=e,this.reasonSelect)){const e=await n.metadata();this.reasonSelect.innerHTML="";for(const t of e.timeLogEntryReason.values){const e=document.createElement("option");e.value=t.serverId,e.innerText=t.value,this.reasonSelect.appendChild(e)}this.loadDefaultReasonValue()}}cancel(){this.setUIVisible(!1)}setUIVisible(e){this.reasonEnhancementUI&&(this.reasonEnhancementUI.style.display=e?"block":"none"),this.appRoot&&(e?this.appRoot.classList.add("re-blur"):this.appRoot.classList.remove("re-blur"))}async submit(){var e,t;await s.until((()=>!this.submitting)),this.submitting=!0,null===(e=this.reasonEnhancementUI)||void 0===e||e.classList.add("re-submitting"),this.mode===a.FixAll&&await this.fixAll(),this.mode===a.FixLatest&&await this.fixLatest(),this.setUIVisible(!1),null===(t=this.reasonEnhancementUI)||void 0===t||t.classList.remove("re-submitting"),this.submitting=!1}async fixAll(){if(!this.reasonSelect)return;const e=this.reasonSelect.value,s=await n.sheets();for(const a of s.employeeSheets){if(a.locked)continue;const s=await n.attendance(a.id);for(const a of s.attendance)if(a.entries.some((e=>!e.reason))){const s=t.parse(a.date);if("number"!=typeof s)continue;const o=a.entries.map((n=>{var a,o,i,r;return{startHour:((null!==(a=t.parse(n.start))&&void 0!==a?a:Date.now())-s)/36e5,lengthHours:n.end?((null!==(o=t.parse(n.end))&&void 0!==o?o:Date.now())-(null!==(i=t.parse(n.start))&&void 0!==i?i:Date.now()))/36e5:null,reasonId:n.reason||e,comment:null!==(r=n.comment)&&void 0!==r?r:null}}));await n.submit(s,o)}}}async fixLatest(){if(!this.reasonSelect)return;const e=this.reasonSelect.value;let s=null;const a=await n.sheets();for(const e of a.employeeSheets){if(e.locked)continue;const a=await n.attendance(e.id);for(const e of a.attendance){const n=t.parse(e.date);if("number"==typeof n&&(!s||n>s.date)){const a=e.entries.map((e=>{var s,a,o,i;return{startHour:((null!==(s=t.parse(e.start))&&void 0!==s?s:Date.now())-n)/36e5,lengthHours:e.end?((null!==(a=t.parse(e.end))&&void 0!==a?a:Date.now())-(null!==(o=t.parse(e.start))&&void 0!==o?o:Date.now()))/36e5:null,reasonId:e.reason,comment:null!==(i=e.comment)&&void 0!==i?i:null}}));s={date:n,entries:a}}}}if(s){for(const t of s.entries)t.reasonId=t.reasonId||e;await n.submit(s.date,s.entries)}}}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TTNJLFNBQVcySSxFQUFNM0ksVUFBWVMsUUFFakNiLEVBQU1xSixPQUFPMkksRUFBT2xULEtBQU1rVCxFQUFPL1IsUSxDQUUvQyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvQXBpLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL0RhdGVzLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL0hpQm9iL0hpQm9iLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL1dhaXQudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvUmVhc29uRW5oYW5jZW1lbnRzL1JlYXNvbnNFbmhhbmNlbWVudHMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVGltZWxvZy9UaW1lbG9nVHlwZXMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvRXZlbnRIYW5kbGVyLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL01hdGVyaWFsSWNvbi50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9VdGlscy9OdW1iZXJzLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ01vZGVsLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ1VJLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ0Nzcy50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9SZWFzb25FbmhhbmNlbWVudHMvUmVhc29uRW5oYW5jZW1lbnRzQ3NzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBBcGlcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyB4aHIobWV0aG9kOiBcIkdFVFwiIHwgXCJQT1NUXCIsIHVybDogc3RyaW5nLCBib2R5OiBvYmplY3QpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHsgc3RhdHVzOiBudW1iZXIsIGJvZHk6IGFueSB9PihyZXNvbHZlID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsKTtcclxuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xyXG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XHJcbiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogeGhyLnJlc3BvbnNlVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyAhPT0gMjAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5oYXNPd25Qcm9wZXJ0eShcImVycm9yXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSByZXN1bHQuaGFzT3duUHJvcGVydHkoXCJrZXlcIikgPyByZXN1bHQua2V5IDogeGhyLnN0YXR1cy50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoYEhpQm9iIFV0aWxzOiBFcnJvciAke2tleX0gLSAke3Jlc3VsdC5lcnJvcn1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBIaUJvYiBVdGlsczogRXJyb3IgJHt4aHIuc3RhdHVzfSAtIGNoZWNrIHRoZSBkZXZlbG9wZXIgY29uc29sZSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgSGlCb2IgVXRpbHM6IEVycm9yICR7eGhyLnN0YXR1c30uYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHhocik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHhoci5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShib2R5KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgRGF0ZXNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBwYXJzZShzdHI6IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICBpZiAoIXN0cikgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgY29uc3Qgc3BsaXQgPSBzdHIuc3BsaXQoXCJUXCIpO1xyXG4gICAgICAgIGlmIChzcGxpdC5sZW5ndGggPCAyKSBzcGxpdC5wdXNoKFwiMDA6MDBcIik7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHNwbGl0LmpvaW4oXCJUXCIpKS5nZXRUaW1lKCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGZvcm1hdCh0aW1lOiBudW1iZXIsIGluY2x1ZGVUaW1lc3RhbXA6IGJvb2xlYW4pXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aW1lKSByZXR1cm4gXCJcIjtcclxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodGltZSk7XHJcbiAgICAgICAgcmV0dXJuIGAke2RhdGUuZ2V0RnVsbFllYXIoKX0tJHsoZGF0ZS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9LSR7ZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9JHtpbmNsdWRlVGltZXN0YW1wID8gYFQke2RhdGUuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX06JHtkYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX1gIDogXCJcIn1gO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBmb3JtYXRIb3VyKGhvdXJzOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgaG91ciA9IE1hdGguZmxvb3IoaG91cnMgJSAyNCk7XHJcbiAgICAgICAgY29uc3QgbWludXRlID0gTWF0aC5yb3VuZCgoaG91cnMgLSBob3VyKSAqIDYwKTtcclxuICAgICAgICByZXR1cm4gYCR7aG91ci50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX06JHttaW51dGUudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9YFxyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRXZWVrTnVtYmVyRnJvbURhdGUodGltZTogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUodGltZSk7XHJcbiAgICAgICAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcclxuICAgICAgICAvLyBUaHVyc2RheSBpbiBjdXJyZW50IHdlZWsgZGVjaWRlcyB0aGUgeWVhci5cclxuICAgICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyAzIC0gKGRhdGUuZ2V0RGF5KCkgKyA2KSAlIDcpO1xyXG4gICAgICAgIC8vIEphbnVhcnkgNCBpcyBhbHdheXMgaW4gd2VlayAxLlxyXG4gICAgICAgIHZhciB3ZWVrMSA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgMCwgNCk7XHJcbiAgICAgICAgLy8gQWRqdXN0IHRvIFRodXJzZGF5IGluIHdlZWsgMSBhbmQgY291bnQgbnVtYmVyIG9mIHdlZWtzIGZyb20gZGF0ZSB0byB3ZWVrMS5cclxuICAgICAgICByZXR1cm4gMSArIE1hdGgucm91bmQoKChkYXRlLmdldFRpbWUoKSAtIHdlZWsxLmdldFRpbWUoKSkgLyA4NjQwMDAwMFxyXG4gICAgICAgICAgICAtIDMgKyAod2VlazEuZ2V0RGF5KCkgKyA2KSAlIDcpIC8gNyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIHBhcnNlVGltZVRvaG91cnModGltZTogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNwbGl0ID0gdGltZS5zcGxpdChcIjpcIik7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHNwbGl0WzBdKSArIHBhcnNlSW50KHNwbGl0WzFdKSAvIDYwO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uL1V0aWxzL0FwaVwiO1xyXG5pbXBvcnQgeyBEYXRlcyB9IGZyb20gXCIuLi9VdGlscy9EYXRlc1wiO1xyXG5pbXBvcnQgeyBIaUJvYkF0dGVuZGFuY2UsIEhpQm9iTWV0YWRhdGEsIEhpQm9iU2hlZXRzLCBIaUJvYlN1Ym1pdEVudHJ5LCBIaUJvYlVzZXIgfSBmcm9tIFwiLi9IaUJvYlR5cGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSGlCb2Jcclxue1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgdXNlcklkOiBzdHJpbmcgfCBudWxsO1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBzdWJtaXQoZGF0ZTogbnVtYmVyLCBlbnRyaWVzOiBIaUJvYlN1Ym1pdEVudHJ5W10pOiBQcm9taXNlPGJvb2xlYW4+XHJcbiAgICB7XHJcbiAgICAgICAgaWYgKGVudHJpZXMuc29tZShlID0+ICFlLnJlYXNvbklkKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiV0FSTklORzogU09NRSBFTlRSSUVTIEhBVkUgTk8gUkVBU09OIFNFVCAtIE5PVCBTVUJNSVRUSU5HISFcIiwgZGF0ZSwgZW50cmllcyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGVudHJpZXMubWFwKGUgPT4geyByZXR1cm4geyBzdGFydDogRGF0ZXMuZm9ybWF0KGRhdGUgKyBlLnN0YXJ0SG91ciAqIDM2MDAgKiAxMDAwLCB0cnVlKSwgZW5kOiBlLmxlbmd0aEhvdXJzID8gRGF0ZXMuZm9ybWF0KGRhdGUgKyAoZS5zdGFydEhvdXIgKyBlLmxlbmd0aEhvdXJzKSAqIDM2MDAgKiAxMDAwLCB0cnVlKSA6IHVuZGVmaW5lZCwgcmVhc29uOiBlLnJlYXNvbklkLCBjb21tZW50OiBlLmNvbW1lbnQgPz8gdW5kZWZpbmVkIH0gfSk7XHJcbiAgICAgICAgY29uc3QgZGF0ZVN0ciA9IERhdGVzLmZvcm1hdChkYXRlLCBmYWxzZSk7XHJcbiAgICAgICAgY29uc3QgdXNlcklkID0gYXdhaXQgdGhpcy5nZXRVc2VySWQoKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiUE9TVFwiLCBgaHR0cHM6Ly9hcHAuaGlib2IuY29tL2FwaS9hdHRlbmRhbmNlL2VtcGxveWVlcy8ke3VzZXJJZH0vYXR0ZW5kYW5jZS9lbnRyaWVzP2ZvckRhdGU9JHtkYXRlU3RyfWAsIGRhdGEpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuc3RhdHVzID09PSAyMDA7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIHRpbWVsb2dSZWFzb25zKCk6IFByb21pc2U8eyBpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcgfVtdPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXdhaXQgdGhpcy5tZXRhZGF0YSgpO1xyXG4gICAgICAgIHJldHVybiBtZXRhZGF0YS50aW1lTG9nRW50cnlSZWFzb24udmFsdWVzLm1hcCh2ID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IHYuc2VydmVySWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiB2LnZhbHVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgYXR0ZW5kYW5jZShzaGVldDogbnVtYmVyKTogUHJvbWlzZTxIaUJvYkF0dGVuZGFuY2U+XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQXBpLnhocihcIkdFVFwiLCBgaHR0cHM6Ly9hcHAuaGlib2IuY29tL2FwaS9lbXBsb3llZXMvYXR0ZW5kYW5jZS9teS9zaGVldHMvJHtzaGVldH1gLCB7fSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5ib2R5O1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBzaGVldHMoKTogUHJvbWlzZTxIaUJvYlNoZWV0cz5cclxuICAgIHtcclxuICAgICAgICBjb25zdCB1c2VySWQgPSBhd2FpdCB0aGlzLmdldFVzZXJJZCgpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFwaS54aHIoXCJHRVRcIiwgYGh0dHBzOi8vYXBwLmhpYm9iLmNvbS9hcGkvZW1wbG95ZWVzLyR7dXNlcklkfS90aW1lbG9nL2F0dGVuZGFuY2Uvc2hlZXRzYCwge30pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuYm9keTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbWV0YWRhdGEoKTogUHJvbWlzZTxIaUJvYk1ldGFkYXRhPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFwaS54aHIoXCJHRVRcIiwgXCJodHRwczovL2FwcC5oaWJvYi5jb20vYXBpL2NvbXBhbnkvbWV0YWRhdGEvbGlzdHMvP2luY2x1ZGVBcmNoaXZlZD10cnVlXCIsIHt9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LmJvZHk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHN0YXRpYyBhc3luYyBnZXRVc2VySWQoKTogUHJvbWlzZTxzdHJpbmc+XHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnVzZXJJZCAhPT0gXCJzdHJpbmdcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXNlckluZm8oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlcklkID8/IFwiXCI7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIHVzZXJJbmZvKCk6IFByb21pc2U8SGlCb2JVc2VyPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFwaS54aHIoXCJHRVRcIiwgXCJodHRwczovL2FwcC5oaWJvYi5jb20vYXBpL3VzZXJcIiwge30pO1xyXG4gICAgICAgIHRoaXMudXNlcklkID0gKHJlc3VsdC5ib2R5IGFzIEhpQm9iVXNlcikuaWQ7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5ib2R5O1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFdhaXRcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBmb3IobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD5cclxuICAgIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4ocmVzb2x2ZSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZSgpLCBtcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIHVudGlsKGRlbGVnYXRlOiAoKSA9PiBib29sZWFuKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPihyZXNvbHZlID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBoYW5kbGUgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRlbGVnYXRlKCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKGhhbmRsZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgSGlCb2IgfSBmcm9tIFwiLi4vSGlCb2IvSGlCb2JcIjtcclxuaW1wb3J0IHsgSGlCb2JTdWJtaXRFbnRyeSB9IGZyb20gXCIuLi9IaUJvYi9IaUJvYlR5cGVzXCI7XHJcbmltcG9ydCB7IERhdGVzIH0gZnJvbSBcIi4uL1V0aWxzL0RhdGVzXCI7XHJcbmltcG9ydCB7IFdhaXQgfSBmcm9tIFwiLi4vVXRpbHMvV2FpdFwiO1xyXG5pbXBvcnQgeyBSZWFzb25FbmhhbmNlbWVudENzcyB9IGZyb20gXCIuL1JlYXNvbkVuaGFuY2VtZW50c0Nzc1wiO1xyXG5cclxuZXhwb3J0IGVudW0gUmVhc29uRW5oYW5jZW1lbnRNb2RlXHJcbntcclxuICAgIEZpeEFsbCxcclxuICAgIEZpeExhdGVzdCxcclxufVxyXG5leHBvcnQgY2xhc3MgUmVhc29uRW5oYW5jZW1lbnRzXHJcbntcclxuICAgIHByaXZhdGUgcmVhc29uRW5oYW5jZW1lbnRVST86IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSByZWFzb25TZWxlY3Q/OiBIVE1MU2VsZWN0RWxlbWVudDtcclxuICAgIHByaXZhdGUgYXBwUm9vdD86IEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHN1Ym1pdHRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICBwcml2YXRlIG1vZGU/OiBSZWFzb25FbmhhbmNlbWVudE1vZGU7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLmNyZWF0ZVVJKCk7XHJcbiAgICAgICAgdGhpcy5jbG9ja0luQnV0dG9uRmluZGVyKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNyZWF0ZVVJKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcclxuICAgICAgICBzdHlsZS5pbm5lckhUTUwgPSBSZWFzb25FbmhhbmNlbWVudENzcztcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChzdHlsZSk7XHJcblxyXG5cclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5jbGFzc05hbWUgPSBcInJlLXJlYXNvbi11aVwiO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkpO1xyXG5cclxuICAgICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgbGFiZWwuaW5uZXJUZXh0ID0gXCJDaG9vc2UgRGVmYXVsdCBSZWFzb25cIjtcclxuICAgICAgICBsYWJlbC5jbGFzc05hbWUgPSBcInJlLWxhYmVsXCI7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKGxhYmVsKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWFzb25TZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xyXG4gICAgICAgIHRoaXMucmVhc29uU2VsZWN0LmNsYXNzTmFtZSA9IFwicmUtcmVhc29uLXNlbGVjdFwiO1xyXG4gICAgICAgIHRoaXMucmVhc29uU2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4gdGhpcy5zYXZlRGVmYXVsdFJlYXNvblZhbHVlKCk7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKHRoaXMucmVhc29uU2VsZWN0KTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmNsYXNzTmFtZSA9IFwicmUtY2FuY2VsLWJ0biByZS1idG4gcmUtc2Vjb25kYXJ5XCI7XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmlubmVyVGV4dCA9IFwiQ2FuY2VsXCJcclxuICAgICAgICBjYW5jZWxCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuY2FuY2VsKCk7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKGNhbmNlbEJ1dHRvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgc3VibWl0QnV0dG9uLmNsYXNzTmFtZSA9IFwicmUtc3VibWl0LWJ0biByZS1idG4gcmUtcHJpbWFyeVwiO1xyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5pbm5lclRleHQgPSBcIlN1Ym1pdFwiXHJcbiAgICAgICAgc3VibWl0QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnN1Ym1pdCgpO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChzdWJtaXRCdXR0b24pO1xyXG5cclxuXHJcbiAgICAgICAgY29uc3Qgc3VibWl0dGluZ1RleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHN1Ym1pdHRpbmdUZXh0LmNsYXNzTmFtZSA9IFwicmUtc3VibWl0dGluZy10ZXh0XCI7XHJcbiAgICAgICAgc3VibWl0dGluZ1RleHQuaW5uZXJUZXh0ID0gXCJTdWJtaXR0aW5nLi4uXCJcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuYXBwZW5kQ2hpbGQoc3VibWl0dGluZ1RleHQpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBjbG9ja0luQnV0dG9uRmluZGVyKClcclxuICAgIHtcclxuICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjbG9ja0luQnV0dG9ucyA9IHRoaXMuZmluZFVuZW5oYW5jZWRCdXR0b25zKFwiYi1idXR0b24ucHVuY2gtY2xvY2stYnV0dG9uLCBiLWJ1dHRvbi50aW1lLXdpZGdldC1jbG9jay1pbi1idG4sIGItYnV0dG9uLnRpbWUtd2lkZ2V0LWNsb2NrLW91dC1idG5cIik7XHJcbiAgICAgICAgICAgIGNsb2NrSW5CdXR0b25zLmZvckVhY2goZSA9PiB0aGlzLmVuaGFuY2VDbG9ja0luQnV0dG9uKGUsIFJlYXNvbkVuaGFuY2VtZW50TW9kZS5GaXhMYXRlc3QpKTtcclxuICAgICAgICAgICAgdmFyIHF1aWNrRml4QnV0dG9uID0gdGhpcy5maW5kVW5lbmhhbmNlZEJ1dHRvbnMoXCJiLWJ1dHRvbi5xdWljay1maXgtYXBwbHktYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICBxdWlja0ZpeEJ1dHRvbi5mb3JFYWNoKGUgPT4gdGhpcy5lbmhhbmNlQ2xvY2tJbkJ1dHRvbihlLCBSZWFzb25FbmhhbmNlbWVudE1vZGUuRml4QWxsKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuYXBwUm9vdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBSb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImFwcC1yb290XCIpID8/IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhd2FpdCBXYWl0LmZvcigxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBmaW5kVW5lbmhhbmNlZEJ1dHRvbnMoc2VsZWN0b3I6IHN0cmluZyk6IEVsZW1lbnRbXVxyXG4gICAge1xyXG4gICAgICAgIHZhciBhcnIgPSBbXSBhcyBFbGVtZW50W107XHJcbiAgICAgICAgdmFyIHF1ZXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XHJcbiAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHF1ZXJ5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInJlLWVuaGFuY2VkXCIpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJyZS1lbmhhbmNlZFwiKTtcclxuICAgICAgICAgICAgICAgIGFyci5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcnI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBlbmhhbmNlQ2xvY2tJbkJ1dHRvbihidXR0b246IEVsZW1lbnQsIG1vZGU6IFJlYXNvbkVuaGFuY2VtZW50TW9kZSlcclxuICAgIHtcclxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuc2hvd1JlYXNvbkZpeGVyKG1vZGUpKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgc2F2ZURlZmF1bHRSZWFzb25WYWx1ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvblNlbGVjdCkgcmV0dXJuO1xyXG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInJlLWxhc3QtcmVhc29uXCIsIHRoaXMucmVhc29uU2VsZWN0LnZhbHVlKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgbG9hZERlZmF1bHRSZWFzb25WYWx1ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvblNlbGVjdCkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMucmVhc29uU2VsZWN0LnZhbHVlID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicmUtbGFzdC1yZWFzb25cIikgPz8gXCJcIjtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgc2hvd1JlYXNvbkZpeGVyKG1vZGU6IFJlYXNvbkVuaGFuY2VtZW50TW9kZSlcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVhc29uRW5oYW5jZW1lbnRVSSkgcmV0dXJuO1xyXG4gICAgICAgIGF3YWl0IFdhaXQuZm9yKDI1MCk7XHJcbiAgICAgICAgdGhpcy5zZXRVSVZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcclxuICAgICAgICBpZiAodGhpcy5yZWFzb25TZWxlY3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCByZWFzb25zID0gYXdhaXQgSGlCb2IubWV0YWRhdGEoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWFzb25TZWxlY3QuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgZm9yIChjb25zdCByZWFzb24gb2YgcmVhc29ucy50aW1lTG9nRW50cnlSZWFzb24udmFsdWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gcmVhc29uLnNlcnZlcklkO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLmlubmVyVGV4dCA9IHJlYXNvbi52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVhc29uU2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5sb2FkRGVmYXVsdFJlYXNvblZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjYW5jZWwoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuc2V0VUlWaXNpYmxlKGZhbHNlKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgc2V0VUlWaXNpYmxlKHZhbHVlOiBib29sZWFuKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICAgICAgZWxzZSB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5hcHBSb290KVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgdGhpcy5hcHBSb290LmNsYXNzTGlzdC5hZGQoXCJyZS1ibHVyXCIpO1xyXG4gICAgICAgICAgICBlbHNlIHRoaXMuYXBwUm9vdC5jbGFzc0xpc3QucmVtb3ZlKFwicmUtYmx1clwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIHN1Ym1pdCgpXHJcbiAgICB7XHJcbiAgICAgICAgYXdhaXQgV2FpdC51bnRpbCgoKSA9PiAhdGhpcy5zdWJtaXR0aW5nKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdWJtaXR0aW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUk/LmNsYXNzTGlzdC5hZGQoXCJyZS1zdWJtaXR0aW5nXCIpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tb2RlID09PSBSZWFzb25FbmhhbmNlbWVudE1vZGUuRml4QWxsKSBhd2FpdCB0aGlzLmZpeEFsbCgpO1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgPT09IFJlYXNvbkVuaGFuY2VtZW50TW9kZS5GaXhMYXRlc3QpIGF3YWl0IHRoaXMuZml4TGF0ZXN0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0VUlWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUk/LmNsYXNzTGlzdC5yZW1vdmUoXCJyZS1zdWJtaXR0aW5nXCIpO1xyXG5cclxuICAgICAgICB0aGlzLnN1Ym1pdHRpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgZml4QWxsKClcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVhc29uU2VsZWN0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgcmVhc29uID0gdGhpcy5yZWFzb25TZWxlY3QudmFsdWU7XHJcbiAgICAgICAgY29uc3Qgc2hlZXRzID0gYXdhaXQgSGlCb2Iuc2hlZXRzKCk7XHJcbiAgICAgICAgZm9yIChjb25zdCBzaGVldCBvZiBzaGVldHMuZW1wbG95ZWVTaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoc2hlZXQubG9ja2VkKSBjb250aW51ZTtcclxuICAgICAgICAgICAgY29uc3QgYXR0ZW5kYW5jZSA9IGF3YWl0IEhpQm9iLmF0dGVuZGFuY2Uoc2hlZXQuaWQpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2YgYXR0ZW5kYW5jZS5hdHRlbmRhbmNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZS5lbnRyaWVzLnNvbWUoZSA9PiAhZS5yZWFzb24pKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBEYXRlcy5wYXJzZShkYXRlLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGltZSAhPT0gXCJudW1iZXJcIikgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW50cmllczogSGlCb2JTdWJtaXRFbnRyeVtdID0gZGF0ZS5lbnRyaWVzLm1hcChlID0+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRIb3VyOiAoKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpIC0gdGltZSkgLyAoMzYwMCAqIDEwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoSG91cnM6IGUuZW5kID8gKChEYXRlcy5wYXJzZShlLmVuZCkgPz8gRGF0ZS5ub3coKSkgLSAoRGF0ZXMucGFyc2UoZS5zdGFydCkgPz8gRGF0ZS5ub3coKSkpIC8gKDM2MDAgKiAxMDAwKSA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb25JZDogZS5yZWFzb24gfHwgcmVhc29uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDogZS5jb21tZW50ID8/IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBIaUJvYi5zdWJtaXQodGltZSwgZW50cmllcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGZpeExhdGVzdCgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvblNlbGVjdCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHJlYXNvbiA9IHRoaXMucmVhc29uU2VsZWN0LnZhbHVlO1xyXG4gICAgICAgIGxldCBsYXRlc3Q6IHsgZGF0ZTogbnVtYmVyLCBlbnRyaWVzOiBIaUJvYlN1Ym1pdEVudHJ5W10gfSB8IG51bGwgPSBudWxsO1xyXG4gICAgICAgIGNvbnN0IHNoZWV0cyA9IGF3YWl0IEhpQm9iLnNoZWV0cygpO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2hlZXQgb2Ygc2hlZXRzLmVtcGxveWVlU2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHNoZWV0LmxvY2tlZCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGF0dGVuZGFuY2UgPSBhd2FpdCBIaUJvYi5hdHRlbmRhbmNlKHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIGF0dGVuZGFuY2UuYXR0ZW5kYW5jZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IERhdGVzLnBhcnNlKGRhdGUuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWUgIT09IFwibnVtYmVyXCIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFsYXRlc3QgfHwgdGltZSA+IGxhdGVzdC5kYXRlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudHJpZXM6IEhpQm9iU3VibWl0RW50cnlbXSA9IGRhdGUuZW50cmllcy5tYXAoZSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0SG91cjogKChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSAtIHRpbWUpIC8gKDM2MDAgKiAxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aEhvdXJzOiBlLmVuZCA/ICgoRGF0ZXMucGFyc2UoZS5lbmQpID8/IERhdGUubm93KCkpIC0gKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpKSAvICgzNjAwICogMTAwMCkgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uSWQ6IGUucmVhc29uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDogZS5jb21tZW50ID8/IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBsYXRlc3QgPSB7IGRhdGU6IHRpbWUsIGVudHJpZXM6IGVudHJpZXMgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGF0ZXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBsYXRlc3QuZW50cmllcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZW50cnkucmVhc29uSWQgPSBlbnRyeS5yZWFzb25JZCB8fCByZWFzb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgSGlCb2Iuc3VibWl0KGxhdGVzdC5kYXRlLCBsYXRlc3QuZW50cmllcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nRW50cnlcclxue1xyXG4gICAgc3RhcnRIb3VyOiBudW1iZXIsXHJcbiAgICBsZW5ndGhIb3VyczogbnVtYmVyLFxyXG4gICAgcmVhc29uSWQ6IHN0cmluZyxcclxuICAgIGNvbW1lbnQ6IHN0cmluZyB8IG51bGwsXHJcbiAgICBoYXNDb21tZW50OiBib29sZWFuXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nRGF0ZVxyXG57XHJcbiAgICBkaXJ0eTogYm9vbGVhbixcclxuICAgIGRhdGU6IG51bWJlclxyXG4gICAgZW50cmllczogVGltZWxvZ0VudHJ5W10sXHJcbiAgICB3ZWVrZW5kOiBib29sZWFuLFxyXG4gICAgZmF2b3JpdGVkOiBib29sZWFuLFxyXG4gICAgdGltZW9mZlJlcXVpcmVkOiBib29sZWFuLFxyXG4gICAgZGF0ZURlc2NyaXB0aW9uPzogc3RyaW5nXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nU2hlZXRcclxue1xyXG4gICAgaWQ6IG51bWJlcixcclxuICAgIHN0YXR1czogc3RyaW5nLFxyXG4gICAgc3RhcnQ6IG51bWJlcixcclxuICAgIGVuZDogbnVtYmVyXHJcbiAgICBkYXRlczogVGltZWxvZ0RhdGVbXSxcclxuICAgIGxvY2tlZDogYm9vbGVhbixcclxuICAgIGhvdXJzUGVyRGF5OiBudW1iZXJcclxufVxyXG5leHBvcnQgZW51bSBUaW1lbG9nU2F2ZVN0YXR1c1xyXG57XHJcbiAgICBXYWl0aW5nLFxyXG4gICAgU2F2aW5nLFxyXG4gICAgU2F2ZWQsXHJcbiAgICBFcnJvclxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZUxvZ0Zhdm9yaXRlZERhdGVcclxue1xyXG4gICAgZGF0ZTogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ1VJRGF0ZSBcclxue1xyXG4gICAgZGF0ZTogVGltZWxvZ0RhdGUsXHJcbiAgICBwYXJlbnQ6IEhUTUxEaXZFbGVtZW50LFxyXG4gICAgdGl0bGU6IEhUTUxTcGFuRWxlbWVudCxcclxuICAgIGVudHJpZXM6IFRpbWVsb2dVSUVudHJ5Q29udGFpbmVyW10sXHJcbiAgICBzdW1Ib3Vycz86IEhUTUxTcGFuRWxlbWVudCxcclxuICAgIHN0YXJCdXR0b246IEhUTUxCdXR0b25FbGVtZW50LFxyXG4gICAgcGFzdGVCdXR0b246IEhUTUxCdXR0b25FbGVtZW50LFxyXG4gICAgd2Vla2VuZERlc2NyaXB0aW9uOiBIVE1MRGl2RWxlbWVudFxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ1VJRW50cnlDb250YWluZXJcclxue1xyXG4gICAgZW50cnk6IFRpbWVsb2dFbnRyeSxcclxuICAgIHBhcmVudDogSFRNTERpdkVsZW1lbnQsXHJcbiAgICBzdGFydEhvdXI6IEhUTUxJbnB1dEVsZW1lbnQsXHJcbiAgICBsZW5ndGg6IEhUTUxJbnB1dEVsZW1lbnQsXHJcbiAgICByZWFzb246IEhUTUxTZWxlY3RFbGVtZW50LFxyXG4gICAgZW5kSG91cjogSFRNTElucHV0RWxlbWVudCxcclxuICAgIGNvbW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQsXHJcbiAgICBjb21tZW50QnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCxcclxuICAgIG5vUmVhc29uV2FybmluZzogSFRNTERpdkVsZW1lbnRcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVsb2dVSVdlZWtTdW1cclxue1xyXG4gICAgZGF0ZXM6IFRpbWVsb2dVSURhdGVbXSxcclxuICAgIGVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50XHJcbn0iLCJleHBvcnQgY2xhc3MgRXZlbnRIYW5kbGVyPFQ+XHJcbntcclxuICAgIHByaXZhdGUgaGFuZGxlcnM6IHsgaGFuZGxlcjogKHZhbDogVCkgPT4gdm9pZCwgY29udGV4dDogYW55IH1bXSA9IFtdO1xyXG4gICAgcHVibGljIG9uKGhhbmRsZXI6ICh2YWw6IFQpID0+IHZvaWQsIGNvbnRleHQ6IGFueSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLmhhbmRsZXJzLnB1c2goeyBoYW5kbGVyLCBjb250ZXh0IH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG9mZihoYW5kbGVyOiAodmFsOiBUKSA9PiB2b2lkLCBjb250ZXh0OiBhbnkpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZmlsdGVyKGggPT4gaC5oYW5kbGVyICE9PSBoYW5kbGVyIHx8IGguY29udGV4dCAhPT0gY29udGV4dCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZmlyZSh2YWw6IFQpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycy5mb3JFYWNoKGggPT4gaC5oYW5kbGVyLmNhbGwoaC5jb250ZXh0LCB2YWwpKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBhYnN0cmFjdCBjbGFzcyBNYXRlcmlhbEljb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBpbml0aWFsaXplKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcbiAgICAgICAgbGluay5ocmVmID0gXCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PU1hdGVyaWFsK1N5bWJvbHMrT3V0bGluZWQ6b3Bzeix3Z2h0LEZJTEwsR1JBREAyMC4uNDgsMTAwLi43MDAsMC4uMSwtNTAuLjIwMFwiO1xyXG4gICAgICAgIGxpbmsucmVsID0gXCJzdHlsZXNoZWV0XCI7XHJcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0KGljb246IHN0cmluZywgZmlsbDogYm9vbGVhbiA9IGZhbHNlKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICBzcGFuLmNsYXNzTmFtZSA9IGBtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkYDtcclxuICAgICAgICBzcGFuLmlubmVyVGV4dCA9IGljb247XHJcbiAgICAgICAgc3Bhbi5zdHlsZS52ZXJ0aWNhbEFsaWduID0gXCJtaWRkbGVcIjtcclxuICAgICAgICBzcGFuLnN0eWxlLmZvbnRTaXplID0gXCIxLjVlbVwiO1xyXG4gICAgICAgIHNwYW4uc3R5bGUuZm9udFZhcmlhdGlvblNldHRpbmdzID0gYCdGSUxMJyAke2ZpbGwgPyAxIDogMH1gO1xyXG4gICAgICAgIHJldHVybiBzcGFuO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIE51bWJlcnNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyByb3VuZChudW06IG51bWJlciwgZGVjaW1hbHM6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChudW0gKiAoMTAgKiogZGVjaW1hbHMpKSAvICgxMCAqKiBkZWNpbWFscyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGZsb29yKG51bTogbnVtYmVyLCBkZWNpbWFsczogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKG51bSAqICgxMCAqKiBkZWNpbWFscykpIC8gKDEwICoqIGRlY2ltYWxzKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgY2VpbChudW06IG51bWJlciwgZGVjaW1hbHM6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKG51bSAqICgxMCAqKiBkZWNpbWFscykpIC8gKDEwICoqIGRlY2ltYWxzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHN1bShhcnI6IG51bWJlcltdKVxyXG4gICAge1xyXG4gICAgICAgIGxldCB2YWwgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB2YWwgKz0gYXJyW2ldO1xyXG4gICAgICAgIHJldHVybiB2YWw7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBIaUJvYiB9IGZyb20gXCIuLi9IaUJvYi9IaUJvYlwiO1xyXG5pbXBvcnQgeyBIaUJvYlJlYXNvbiB9IGZyb20gXCIuLi9IaUJvYi9IaUJvYlR5cGVzXCI7XHJcbmltcG9ydCB7IERhdGVzIH0gZnJvbSBcIi4uL1V0aWxzL0RhdGVzXCI7XHJcbmltcG9ydCB7IEV2ZW50SGFuZGxlciB9IGZyb20gXCIuLi9VdGlscy9FdmVudEhhbmRsZXJcIjtcclxuaW1wb3J0IHsgTnVtYmVycyB9IGZyb20gXCIuLi9VdGlscy9OdW1iZXJzXCI7XHJcbmltcG9ydCB7IFdhaXQgfSBmcm9tIFwiLi4vVXRpbHMvV2FpdFwiO1xyXG5pbXBvcnQgeyBUaW1lbG9nU2hlZXQsIFRpbWVsb2dEYXRlLCBUaW1lbG9nU2F2ZVN0YXR1cywgVGltZUxvZ0Zhdm9yaXRlZERhdGUgfSBmcm9tIFwiLi9UaW1lbG9nVHlwZXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUaW1lbG9nTW9kZWxcclxue1xyXG4gICAgcHVibGljIHNoZWV0czogVGltZWxvZ1NoZWV0W10gPSBbXTtcclxuICAgIHB1YmxpYyBvbkRhdGVVcGRhdGVkID0gbmV3IEV2ZW50SGFuZGxlcjx7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGRhdGU6IFRpbWVsb2dEYXRlIH0+KCk7XHJcbiAgICBwdWJsaWMgb25SZWFzb25zVXBkYXRlZCA9IG5ldyBFdmVudEhhbmRsZXI8SGlCb2JSZWFzb25bXT4oKTtcclxuICAgIHB1YmxpYyBvblNoZWV0VXBkYXRlZCA9IG5ldyBFdmVudEhhbmRsZXI8VGltZWxvZ1NoZWV0PigpO1xyXG4gICAgcHVibGljIG9uU2hlZXRzVXBkYXRlZCA9IG5ldyBFdmVudEhhbmRsZXI8VGltZWxvZ1NoZWV0W10+KCk7XHJcbiAgICBwdWJsaWMgb25TYXZlU3RhdHVzVXBkYXRlZCA9IG5ldyBFdmVudEhhbmRsZXI8VGltZWxvZ1NhdmVTdGF0dXM+KCk7XHJcbiAgICBwcml2YXRlIHNhdmVIYW5kbGU6IG51bWJlciA9IC0xO1xyXG4gICAgcHJpdmF0ZSBzYXZpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgY2FsY3VsYXRpbmdGbGV4OiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGZldGNoaW5nU2hlZXRzID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIHJlYXNvbnM6IEhpQm9iUmVhc29uW10gPSBbXTtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpXHJcbiAgICB7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgaW5pdGlhbGl6ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5mZXRjaFNoZWV0cygpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hSZWFzb25zKCk7XHJcbiAgICAgICAgdGhpcy5vblNhdmVTdGF0dXNVcGRhdGVkLmZpcmUoVGltZWxvZ1NhdmVTdGF0dXMuU2F2ZWQpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGZldGNoU2hlZXRzKClcclxuICAgIHtcclxuICAgICAgICBhd2FpdCBXYWl0LnVudGlsKCgpID0+ICF0aGlzLmZldGNoaW5nU2hlZXRzKTtcclxuICAgICAgICB0aGlzLmZldGNoaW5nU2hlZXRzID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNoZWV0cyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNoZWV0cyA9IGF3YWl0IEhpQm9iLnNoZWV0cygpO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2hlZXQgb2Ygc2hlZXRzLmVtcGxveWVlU2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBEYXRlcy5wYXJzZShzaGVldC5jeWNsZVN0YXJ0RGF0ZSkgPz8gMDtcclxuICAgICAgICAgICAgY29uc3QgZW5kID0gRGF0ZXMucGFyc2Uoc2hlZXQuY3ljbGVFbmREYXRlKSA/PyAwO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdTaGVldCA9IHtcclxuICAgICAgICAgICAgICAgIGlkOiBzaGVldC5pZCxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogc2hlZXQuc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgc3RhcnQsXHJcbiAgICAgICAgICAgICAgICBlbmQsXHJcbiAgICAgICAgICAgICAgICBkYXRlczogW10sXHJcbiAgICAgICAgICAgICAgICBsb2NrZWQ6IHNoZWV0LmxvY2tlZCxcclxuICAgICAgICAgICAgICAgIGhvdXJzUGVyRGF5OiAwXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuc2hlZXRzLnB1c2gobmV3U2hlZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNoZWV0cy5zb3J0KChhLCBiKSA9PiBiLnN0YXJ0IC0gYS5zdGFydCk7XHJcbiAgICAgICAgdGhpcy5vblNoZWV0c1VwZGF0ZWQuZmlyZSh0aGlzLnNoZWV0cyk7XHJcbiAgICAgICAgdGhpcy5mZXRjaGluZ1NoZWV0cyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGZldGNoUmVhc29ucygpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5yZWFzb25zID0gKGF3YWl0IEhpQm9iLm1ldGFkYXRhKCkpLnRpbWVMb2dFbnRyeVJlYXNvbi52YWx1ZXM7XHJcbiAgICAgICAgdGhpcy5vblJlYXNvbnNVcGRhdGVkLmZpcmUodGhpcy5yZWFzb25zKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBmZXRjaFNoZWV0KGlkOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5pZCA9PT0gaWQpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBjb25zdCBhdHRlbmRhbmNlID0gYXdhaXQgSGlCb2IuYXR0ZW5kYW5jZShpZCk7XHJcbiAgICAgICAgc2hlZXQuaG91cnNQZXJEYXkgPSBhdHRlbmRhbmNlLnN1bW1hcnkucG90ZW50aWFsV29ya2luZ0hvdXJzIC8gYXR0ZW5kYW5jZS5zdW1tYXJ5LnBvdGVudGlhbFdvcmtpbmdEYXlzO1xyXG4gICAgICAgIHNoZWV0LmRhdGVzID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIGF0dGVuZGFuY2UuYXR0ZW5kYW5jZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBEYXRlcy5wYXJzZShkYXRlLmRhdGUpID8/IERhdGUubm93KClcclxuICAgICAgICAgICAgY29uc3QgdmFsdWU6IFRpbWVsb2dEYXRlID0ge1xyXG4gICAgICAgICAgICAgICAgZGlydHk6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZGF0ZTogdGltZSxcclxuICAgICAgICAgICAgICAgIHdlZWtlbmQ6IGRhdGUuc3RhdHVzID09PSBcIldlZWtlbmRFdmVudFwiLFxyXG4gICAgICAgICAgICAgICAgZmF2b3JpdGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHRpbWVvZmZSZXF1aXJlZDogZGF0ZS5ub3RlLmlzVGltZW9mZlJlcXVpcmVkLFxyXG4gICAgICAgICAgICAgICAgZGF0ZURlc2NyaXB0aW9uOiBkYXRlLm5vdGUuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICBlbnRyaWVzOiBkYXRlLmVudHJpZXMubWFwKGUgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydEhvdXI6IE51bWJlcnMuZmxvb3IoKChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSAtIChEYXRlcy5wYXJzZShkYXRlLmRhdGUpID8/IERhdGUubm93KCkpKSAvICgzNjAwICogMTAwMCksIDIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGhIb3VyczogTnVtYmVycy5jZWlsKCgoRGF0ZXMucGFyc2UoZS5lbmQpID8/IERhdGUubm93KCkpIC0gKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpKSAvICgzNjAwICogMTAwMCksIDIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFzb25JZDogZS5yZWFzb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGUuY29tbWVudCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNDb21tZW50OiAhIWUuY29tbWVudFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KS5zb3J0KChhLCBiKSA9PiBhLnN0YXJ0SG91ciAtIGIuc3RhcnRIb3VyKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBzaGVldC5kYXRlcy5wdXNoKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2hlZXQuZGF0ZXMuc29ydCgoYSwgYikgPT4gYi5kYXRlIC0gYS5kYXRlKTtcclxuICAgICAgICBjb25zdCBmYXZvcml0ZSA9IGF3YWl0IHRoaXMuZ2V0RmF2b3JpdGVkRGF0ZSgpO1xyXG4gICAgICAgIGlmIChmYXZvcml0ZSAmJiBmYXZvcml0ZS5zaGVldCA9PT0gc2hlZXQpXHJcbiAgICAgICAgICAgIGZhdm9yaXRlLmRhdGUuZmF2b3JpdGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm9uU2hlZXRVcGRhdGVkLmZpcmUoc2hlZXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjaGFuZ2VTdGFydEhvdXIoZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIsIGhvdXI6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0uc3RhcnRIb3VyID0gaG91cjtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2hhbmdlTGVuZ3RoSG91cnMoZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5sZW5ndGhIb3VycyA9IGxlbmd0aDtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2hhbmdlUmVhc29uKGRhdGU6IFRpbWVsb2dEYXRlLCBpbmRleDogbnVtYmVyLCByZWFzb246IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0ucmVhc29uSWQgPSByZWFzb247XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGNoYW5nZUNvbW1lbnQoZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIsIGNvbW1lbnQ6IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0uY29tbWVudCA9IGNvbW1lbnQ7XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5oYXNDb21tZW50ID0gdHJ1ZTtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgdG9nZ2xlQ29tbWVudChkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0uaGFzQ29tbWVudCA9ICFkYXRlLmVudHJpZXNbaW5kZXhdLmhhc0NvbW1lbnQ7XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5jb21tZW50ID0gZGF0ZS5lbnRyaWVzW2luZGV4XS5oYXNDb21tZW50ID8gXCJcIiA6IG51bGw7XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIHNldEZhdm9yaXRlZERhdGUoZGF0ZTogVGltZWxvZ0RhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3Qgb2xkRmF2b3JpdGUgPSBhd2FpdCB0aGlzLmdldEZhdm9yaXRlZERhdGUoKTtcclxuICAgICAgICBpZiAob2xkRmF2b3JpdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBvbGRGYXZvcml0ZS5kYXRlLmZhdm9yaXRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZShvbGRGYXZvcml0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkYXRlLmZhdm9yaXRlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldDogc2hlZXQsIGRhdGU6IGRhdGUgfSk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRsX2Zhdm9yaXRlXCIsIEpTT04uc3RyaW5naWZ5KHsgZGF0ZTogRGF0ZXMuZm9ybWF0KGRhdGUuZGF0ZSwgZmFsc2UpIH0gYXMgVGltZUxvZ0Zhdm9yaXRlZERhdGUpKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBnZXRGYXZvcml0ZWREYXRlKCk6IFByb21pc2U8eyBzaGVldDogVGltZWxvZ1NoZWV0LCBkYXRlOiBUaW1lbG9nRGF0ZSB9IHwgbnVsbD5cclxuICAgIHtcclxuICAgICAgICBjb25zdCBzdHIgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0bF9mYXZvcml0ZVwiKTtcclxuICAgICAgICBpZiAoIXN0cikgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgY29uc3QgZmF2b3JpdGU6IFRpbWVMb2dGYXZvcml0ZWREYXRlID0gSlNPTi5wYXJzZShzdHIpO1xyXG4gICAgICAgIGNvbnN0IHRpbWUgPSBEYXRlcy5wYXJzZShmYXZvcml0ZS5kYXRlKTtcclxuICAgICAgICBpZiAodHlwZW9mIHRpbWUgPT09IFwibnVtYmVyXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLnN0YXJ0IDw9IHRpbWUgJiYgcy5lbmQgPj0gdGltZSk7XHJcbiAgICAgICAgICAgIGlmIChzaGVldClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNoZWV0LmRhdGVzLmxlbmd0aCA8IDEpIGF3YWl0IHRoaXMuZmV0Y2hTaGVldChzaGVldC5pZCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlID0gc2hlZXQuZGF0ZXMuZmluZChkID0+IGQuZGF0ZSA9PT0gdGltZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzaGVldDogc2hlZXQsIGRhdGU6IGRhdGUgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVsZXRlRW50cnkoZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGZpbmRMYXN0RW50cnkob3JpZ2luYWxEYXRlOiBUaW1lbG9nRGF0ZSlcclxuICAgIHtcclxuICAgICAgICBjb25zdCBvcmlnaW5hbFNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IG9yaWdpbmFsRGF0ZSkpO1xyXG4gICAgICAgIGlmICghb3JpZ2luYWxTaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGxldCBkYXRlSW5kZXggPSBvcmlnaW5hbFNoZWV0LmRhdGVzLmluZGV4T2Yob3JpZ2luYWxEYXRlKTtcclxuICAgICAgICBsZXQgZW50cnlJbmRleCA9IC0xO1xyXG4gICAgICAgIGZvciAobGV0IHNoZWV0SW5kZXggPSB0aGlzLnNoZWV0cy5pbmRleE9mKG9yaWdpbmFsU2hlZXQpOyBzaGVldEluZGV4IDwgdGhpcy5zaGVldHMubGVuZ3RoOyBzaGVldEluZGV4KyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzW3NoZWV0SW5kZXhdO1xyXG4gICAgICAgICAgICBpZiAoc2hlZXQuZGF0ZXMubGVuZ3RoIDwgMSkgYXdhaXQgdGhpcy5mZXRjaFNoZWV0KHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgZm9yICg7IGRhdGVJbmRleCA8IHNoZWV0LmRhdGVzLmxlbmd0aDsgZGF0ZUluZGV4KyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBzaGVldC5kYXRlc1tkYXRlSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGUuZW50cmllcy5sZW5ndGggPiAwKSByZXR1cm4gZW50cnlJbmRleCA8IDAgPyBkYXRlLmVudHJpZXNbZGF0ZS5lbnRyaWVzLmxlbmd0aCAtIDFdIDogZGF0ZS5lbnRyaWVzW2VudHJ5SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgZW50cnlJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGF0ZUluZGV4ID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgbmV3RW50cnkoZGF0ZTogVGltZWxvZ0RhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBjb25zdCBsYXN0ID0gYXdhaXQgdGhpcy5maW5kTGFzdEVudHJ5KGRhdGUpO1xyXG4gICAgICAgIGxldCBzdGFydEhvdXIgPSA4LjU7XHJcbiAgICAgICAgbGV0IGxlbmd0aEhvdXJzID0gTnVtYmVycy5yb3VuZChzaGVldC5ob3Vyc1BlckRheSwgMik7XHJcbiAgICAgICAgbGV0IHJlYXNvbklkID0gXCJcIjtcclxuICAgICAgICBpZiAobGFzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkYXRlLmVudHJpZXMuaW5jbHVkZXMobGFzdCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0SG91ciA9IGxhc3Quc3RhcnRIb3VyICsgbGFzdC5sZW5ndGhIb3VycztcclxuICAgICAgICAgICAgICAgIGxlbmd0aEhvdXJzID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZWFzb25JZCA9IGxhc3QucmVhc29uSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGUuZW50cmllcy5wdXNoKHtcclxuICAgICAgICAgICAgc3RhcnRIb3VyLFxyXG4gICAgICAgICAgICBsZW5ndGhIb3VycyxcclxuICAgICAgICAgICAgcmVhc29uSWQsXHJcbiAgICAgICAgICAgIGNvbW1lbnQ6IG51bGwsXHJcbiAgICAgICAgICAgIGhhc0NvbW1lbnQ6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIHBhc3RlRnJvbVN0YXJyZWQoZGF0ZTogVGltZWxvZ0RhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKGRhdGUuZW50cmllcy5sZW5ndGggPiAwKSByZXR1cm47XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBjb25zdCBmYXZvcml0ZSA9IGF3YWl0IHRoaXMuZ2V0RmF2b3JpdGVkRGF0ZSgpO1xyXG4gICAgICAgIGlmICghZmF2b3JpdGUgfHwgZmF2b3JpdGUuZGF0ZSA9PT0gZGF0ZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGZhdm9yaXRlLmRhdGUuZW50cmllcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGRhdGUuZW50cmllcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0SG91cjogZW50cnkuc3RhcnRIb3VyLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoSG91cnM6IGVudHJ5Lmxlbmd0aEhvdXJzLFxyXG4gICAgICAgICAgICAgICAgcmVhc29uSWQ6IGVudHJ5LnJlYXNvbklkLFxyXG4gICAgICAgICAgICAgICAgY29tbWVudDogZW50cnkuY29tbWVudCxcclxuICAgICAgICAgICAgICAgIGhhc0NvbW1lbnQ6IGVudHJ5Lmhhc0NvbW1lbnRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcXVldWVTYXZlKClcclxuICAgIHtcclxuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc2F2ZUhhbmRsZSk7XHJcbiAgICAgICAgdGhpcy5zYXZlSGFuZGxlID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4gdGhpcy5zYXZlKCksIDUwMCk7XHJcbiAgICAgICAgdGhpcy5vblNhdmVTdGF0dXNVcGRhdGVkLmZpcmUoVGltZWxvZ1NhdmVTdGF0dXMuV2FpdGluZyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgc2F2ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgYXdhaXQgV2FpdC51bnRpbCgoKSA9PiAhdGhpcy5zYXZpbmcpO1xyXG4gICAgICAgIHRoaXMuc2F2aW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQuZmlyZShUaW1lbG9nU2F2ZVN0YXR1cy5TYXZpbmcpO1xyXG4gICAgICAgIGNvbnN0IG1pbmltdW1XYWl0ID0gV2FpdC5mb3IoMTAwKTtcclxuICAgICAgICBsZXQgZXJyb3IgPSBmYWxzZTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHRoaXMuc2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIHNoZWV0LmRhdGVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZS5kaXJ0eSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBIaUJvYi5zdWJtaXQoZGF0ZS5kYXRlLCBkYXRlLmVudHJpZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlLmRpcnR5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYXdhaXQgbWluaW11bVdhaXQ7XHJcbiAgICAgICAgdGhpcy5vblNhdmVTdGF0dXNVcGRhdGVkLmZpcmUoZXJyb3IgPyBUaW1lbG9nU2F2ZVN0YXR1cy5FcnJvciA6IFRpbWVsb2dTYXZlU3RhdHVzLlNhdmVkKTtcclxuICAgICAgICB0aGlzLnNhdmluZyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRCYWxhbmNlQ2FsY3VsYXRpb25EZXNjcmlwdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIGBGbGV4IGhvdXJzIGlzIGNhbGN1bGF0ZWQgdXNpbmcgdGhlIGhvdXJzIHdvcmtlZCBpbiB0aGUgcHJldmlvdXMgMjggZGF5cy5gO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGdldEN1cnJlbnRCYWxhbmNlSG91cnMoKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHByZXZpb3VzRGF5c0luY2x1ZGVkID0gNyAqIDQ7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnREYXRlVGltZSA9IERhdGVzLnBhcnNlKERhdGVzLmZvcm1hdChEYXRlLm5vdygpLCBmYWxzZSkpID8/IDA7XHJcbiAgICAgICAgY29uc3QgcGFzdERhdGVUaW1lID0gRGF0ZXMucGFyc2UoRGF0ZXMuZm9ybWF0KGN1cnJlbnREYXRlVGltZSAtICgxMDAwICogNjAgKiA2MCAqIDI0ICogKHByZXZpb3VzRGF5c0luY2x1ZGVkIC0gMSkpLCBmYWxzZSkpID8/IDA7XHJcblxyXG4gICAgICAgIGNvbnN0IHNoZWV0czogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xyXG4gICAgICAgIGxldCBiYWxhbmNlOiBudW1iZXIgPSAwO1xyXG4gICAgICAgIGlmICghIXRoaXMuc2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYXdhaXQgV2FpdC51bnRpbCgoKSA9PiAhdGhpcy5jYWxjdWxhdGluZ0ZsZXgpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0aW5nRmxleCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5zaGVldHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNoZWV0KSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgc2hlZXRCYWxhbmNlczogeyBkYXRlOiBudW1iZXIsIGJhbGFuY2U6IG51bWJlciB9W10gPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gYHRsX2NhY2hlZF9ob3VyX2JhbGFuY2VzXyR7c2hlZXQuaWR9YDtcclxuICAgICAgICAgICAgICAgIGlmIChzaGVldC5sb2NrZWQgJiYgd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGNhY2hlS2V5KSAhPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzaGVldEJhbGFuY2VzID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oY2FjaGVLZXkpID8/IFwiW11cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoZWV0LmRhdGVzLmxlbmd0aCA8IDEpIGF3YWl0IHRoaXMuZmV0Y2hTaGVldChzaGVldC5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoZWV0LmRhdGVzLnNvbWUoZCA9PiBkLmVudHJpZXMubGVuZ3RoID4gMCAmJiBkLmVudHJpZXMuc29tZShlID0+IGUubGVuZ3RoSG91cnMgPiAwKSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRheSBvZiBzaGVldC5kYXRlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG90ZW50aWFsSG91cnMgPSBkYXkud2Vla2VuZCA/IDAgOiBzaGVldC5ob3Vyc1BlckRheTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtlZEhvdXJzID0gTnVtYmVycy5zdW0oZGF5LmVudHJpZXMubWFwKGUgPT4gZS5sZW5ndGhIb3VycykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFsYW5jZSA9IHdvcmtlZEhvdXJzIC0gcG90ZW50aWFsSG91cnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGVldEJhbGFuY2VzLnB1c2goeyBkYXRlOiBkYXkuZGF0ZSwgYmFsYW5jZSB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaGVldC5sb2NrZWQgJiYgc2hlZXQuaWQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGNhY2hlS2V5LCBKU09OLnN0cmluZ2lmeShzaGVldEJhbGFuY2VzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYmFsYW5jZSArPSBOdW1iZXJzLnN1bShzaGVldEJhbGFuY2VzLmZpbHRlcihiID0+IGIuZGF0ZSA+PSBwYXN0RGF0ZVRpbWUgJiYgYi5kYXRlIDw9IGN1cnJlbnREYXRlVGltZSkubWFwKGIgPT4gYi5iYWxhbmNlKSk7XHJcbiAgICAgICAgICAgICAgICBzaGVldHNbc2hlZXQuaWQudG9TdHJpbmcoKV0gPSBOdW1iZXJzLnN1bShzaGVldEJhbGFuY2VzLm1hcChiID0+IGIuYmFsYW5jZSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0aW5nRmxleCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBzaGVldHMsIGJhbGFuY2UgfTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBSZWFzb25FbmhhbmNlbWVudHMgfSBmcm9tIFwiLi9SZWFzb25FbmhhbmNlbWVudHMvUmVhc29uc0VuaGFuY2VtZW50c1wiO1xyXG5pbXBvcnQgeyBUaW1lbG9nVUkgfSBmcm9tIFwiLi9UaW1lbG9nL1RpbWVsb2dVSVwiO1xyXG5pbXBvcnQgeyBNYXRlcmlhbEljb24gfSBmcm9tIFwiLi9VdGlscy9NYXRlcmlhbEljb25cIjtcclxuXHJcblxyXG5NYXRlcmlhbEljb24uaW5pdGlhbGl6ZSgpO1xyXG5uZXcgVGltZWxvZ1VJKCk7XHJcbm5ldyBSZWFzb25FbmhhbmNlbWVudHMoKTsiLCJpbXBvcnQgeyBIaUJvYlJlYXNvbiB9IGZyb20gXCIuLi9IaUJvYi9IaUJvYlR5cGVzXCI7XHJcbmltcG9ydCB7IERhdGVzIH0gZnJvbSBcIi4uL1V0aWxzL0RhdGVzXCI7XHJcbmltcG9ydCB7IEV2ZW50SGFuZGxlciB9IGZyb20gXCIuLi9VdGlscy9FdmVudEhhbmRsZXJcIjtcclxuaW1wb3J0IHsgTWF0ZXJpYWxJY29uIH0gZnJvbSBcIi4uL1V0aWxzL01hdGVyaWFsSWNvblwiO1xyXG5pbXBvcnQgeyBOdW1iZXJzIH0gZnJvbSBcIi4uL1V0aWxzL051bWJlcnNcIjtcclxuaW1wb3J0IHsgV2FpdCB9IGZyb20gXCIuLi9VdGlscy9XYWl0XCI7XHJcbmltcG9ydCB7IFRpbWVsb2dDc3MgfSBmcm9tIFwiLi9UaW1lbG9nQ3NzXCI7XHJcbmltcG9ydCB7IFRpbWVsb2dNb2RlbCB9IGZyb20gXCIuL1RpbWVsb2dNb2RlbFwiO1xyXG5pbXBvcnQgeyBUaW1lbG9nRGF0ZSwgVGltZWxvZ0VudHJ5LCBUaW1lbG9nU2F2ZVN0YXR1cywgVGltZWxvZ1NoZWV0LCBUaW1lbG9nVUlEYXRlIGFzIFRpbWVsb2dVSURhdGVDb250YWluZXIsIFRpbWVsb2dVSVdlZWtTdW0gfSBmcm9tIFwiLi9UaW1lbG9nVHlwZXNcIjtcclxuXHJcbmRlY2xhcmUgdmFyIEhJQk9CX1VUSUxTX1ZFUjogc3RyaW5nO1xyXG5kZWNsYXJlIHZhciBISUJPQl9VVElMU19DSEFOR0VMT0c6IHsgdmVyc2lvbjogc3RyaW5nLCB0ZXh0OiBzdHJpbmdbXSB9W107XHJcblxyXG5leHBvcnQgY2xhc3MgVGltZWxvZ1VJXHJcbntcclxuICAgIHByaXZhdGUgdGltZWxvZ1VJT3V0ZXI/OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByaXZhdGUgdGltZWxvZ1VJSW5uZXI/OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByaXZhdGUgdG9nZ2xlQnV0dG9uPzogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGRhcmtNb2RlQnV0dG9uPzogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIG1vZGVsPzogVGltZWxvZ01vZGVsO1xyXG5cclxuICAgIHByaXZhdGUgc2hlZXREcm9wZG93bj86IEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBzaGVldERyb3Bkb3duT3B0aW9uczogeyBzaGVldDogVGltZWxvZ1NoZWV0LCBlbGVtZW50OiBIVE1MT3B0aW9uRWxlbWVudCB9W10gPSBbXTtcclxuICAgIHByaXZhdGUgc2VsZWN0ZWRTaGVldD86IFRpbWVsb2dTaGVldDtcclxuXHJcbiAgICBwcml2YXRlIHNoZWV0Q29udGFpbmVyPzogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHNoZWV0RGF0ZXM6IFRpbWVsb2dVSURhdGVDb250YWluZXJbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSB3ZWVrU3VtczogVGltZWxvZ1VJV2Vla1N1bVtdID0gW107XHJcbiAgICBwcml2YXRlIHNhdmVTdGF0dXM/OiBIVE1MU3BhbkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGJhbGFuY2VMYWJlbD86IEhUTUxEaXZFbGVtZW50O1xyXG5cclxuICAgIHByaXZhdGUgcmVhc29uczogSGlCb2JSZWFzb25bXSA9IFtdO1xyXG5cclxuICAgIHByaXZhdGUgb25EYXJrTW9kZUNoYW5nZSA9IG5ldyBFdmVudEhhbmRsZXI8Ym9vbGVhbj4oKTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKVxyXG4gICAge1xyXG4gICAgICAgICh3aW5kb3cgYXMgYW55KS50aW1lbG9nID0gdGhpcztcclxuICAgICAgICB0aGlzLmFkZEJ1dHRvbigpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBhZGRCdXR0b24oKVxyXG4gICAge1xyXG4gICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImRpdi5hcHAtY29udGVudCA+IGFwcC10b3AtYmFyLmFwcC10b3AtYmFyID4gZGl2LmFjdGlvbnNcIik7XHJcbiAgICAgICAgICAgIGlmICghcGFyZW50KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBXYWl0LmZvcigxKTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtdG9nZ2xlLWJ0blwiO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwic2VudGltZW50X3Zlcnlfc2F0aXNmaWVkXCIpKTtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24udGl0bGUgPSBcIkhpQm9iIFV0aWxpdGllc1wiO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy50b2dnbGVWaXNpYmxlKCk7XHJcbiAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLnRvZ2dsZUJ1dHRvbik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVVJKCk7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZU1vZGVsKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAobG9jYXRpb24uaGFzaCA9PT0gXCIjdGwtdWlcIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVWaXNpYmxlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMub25EYXJrTW9kZUNoYW5nZS5maXJlKHRoaXMuaXNEYXJrTW9kZSgpKTtcclxuXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgdG9nZ2xlVmlzaWJsZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRpbWVsb2dVSU91dGVyKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHRoaXMudGltZWxvZ1VJT3V0ZXIuc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVsb2dVSU91dGVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSBcIiN0bC11aVwiO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hlZXRDb250YWluZXIpIHRoaXMuc2hlZXRDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbD8uZmV0Y2hTaGVldHMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSBcIlwiO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJpbml0aWFsXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBpc0RhcmtNb2RlKClcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0bF9kYXJrX21vZGVcIikgPT09IFwidHJ1ZVwiO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSB0b2dnbGVEYXJrTW9kZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEYXJrTW9kZSgpKSBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRsX2RhcmtfbW9kZVwiLCBcImZhbHNlXCIpO1xyXG4gICAgICAgIGVsc2UgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0bF9kYXJrX21vZGVcIiwgXCJ0cnVlXCIpO1xyXG4gICAgICAgIHRoaXMub25EYXJrTW9kZUNoYW5nZS5maXJlKHRoaXMuaXNEYXJrTW9kZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVVJKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcclxuICAgICAgICBzdHlsZS5pbm5lckhUTUwgPSBUaW1lbG9nQ3NzO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3R5bGUpO1xyXG5cclxuICAgICAgICB0aGlzLnRpbWVsb2dVSU91dGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSU91dGVyLmNsYXNzTmFtZSA9IFwidGwtdWlcIjtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSU91dGVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZCh0aGlzLnRpbWVsb2dVSU91dGVyKTtcclxuXHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5jbGFzc05hbWUgPSBcInRsLXVpLWlubmVyXCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlci5hcHBlbmQodGhpcy50aW1lbG9nVUlJbm5lcik7XHJcblxyXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLWNsb3NlLWJ0blwiO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJjbG9zZVwiKSk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMudG9nZ2xlVmlzaWJsZSgpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xyXG5cclxuICAgICAgICB0aGlzLmRhcmtNb2RlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICB0aGlzLmRhcmtNb2RlQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtZGFyay1tb2RlLWJ0blwiO1xyXG4gICAgICAgIHRoaXMuZGFya01vZGVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMudG9nZ2xlRGFya01vZGUoKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZENoaWxkKHRoaXMuZGFya01vZGVCdXR0b24pO1xyXG4gICAgICAgIHRoaXMub25EYXJrTW9kZUNoYW5nZS5vbigoZGFyaykgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkYXJrKSB0aGlzLnRpbWVsb2dVSU91dGVyPy5jbGFzc0xpc3QuYWRkKFwidGwtZGFya1wiKTtcclxuICAgICAgICAgICAgZWxzZSB0aGlzLnRpbWVsb2dVSU91dGVyPy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtZGFya1wiKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGFya01vZGVCdXR0b24pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGFya01vZGVCdXR0b24uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGFya01vZGVCdXR0b24uYXBwZW5kKGRhcmsgPyBNYXRlcmlhbEljb24uZ2V0KFwibGlnaHRfbW9kZVwiKSA6IE1hdGVyaWFsSWNvbi5nZXQoXCJkYXJrX21vZGVcIikpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzKTtcclxuXHJcbiAgICAgICAgY29uc3QgdmVyc2lvbk51bWJlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdmVyc2lvbk51bWJlci5pbm5lclRleHQgPSBISUJPQl9VVElMU19WRVI7XHJcbiAgICAgICAgdmVyc2lvbk51bWJlci5jbGFzc05hbWUgPSBcInRsLXZlcnNpb24tbnVtYmVyXCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZCh2ZXJzaW9uTnVtYmVyKTtcclxuXHJcbiAgICAgICAgaWYgKEhJQk9CX1VUSUxTX0NIQU5HRUxPRy5sZW5ndGggPiAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgY2hhbmdlbG9nID0gdGhpcy5jcmVhdGVDaGFuZ2Vsb2dFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQoY2hhbmdlbG9nKTtcclxuICAgICAgICAgICAgdmVyc2lvbk51bWJlci5vbmNsaWNrID0gKCkgPT4gY2hhbmdlbG9nLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1jaGFuZ2Vsb2ctaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICB2ZXJzaW9uTnVtYmVyLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xyXG4gICAgICAgICAgICB2ZXJzaW9uTnVtYmVyLnN0eWxlLnRleHREZWNvcmF0aW9uID0gXCJ1bmRlcmxpbmVcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNoZWV0RHJvcGRvd25MYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgIHNoZWV0RHJvcGRvd25MYWJlbC5pbm5lclRleHQgPSBcIlNoZWV0YXNmYXNmOlwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQoc2hlZXREcm9wZG93bkxhYmVsKTtcclxuXHJcbiAgICAgICAgdGhpcy5zaGVldERyb3Bkb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcclxuICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd24uY2xhc3NOYW1lID0gXCJ0bC1zaGVldC1zZWxlY3RcIjtcclxuICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd24ub25jaGFuZ2UgPSAoKSA9PiB0aGlzLm9uU2VsZWN0ZWRTaGVldENoYW5nZSgpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQodGhpcy5zaGVldERyb3Bkb3duKTtcclxuXHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmNsYXNzTmFtZSA9IFwidGwtc2F2ZS1zdGF0dXNcIjtcclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMub25jbGljayA9ICgpID0+IHRoaXMub25TYXZlU3RhdHVzQ2xpY2soKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZCh0aGlzLnNhdmVTdGF0dXMpO1xyXG5cclxuICAgICAgICBjb25zdCBiYWxhbmNlUGFyZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBiYWxhbmNlUGFyZW50LmNsYXNzTmFtZSA9IFwidGwtYmFsYW5jZVwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kKGJhbGFuY2VQYXJlbnQpO1xyXG5cclxuICAgICAgICB0aGlzLmJhbGFuY2VMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5iYWxhbmNlTGFiZWwuaW5uZXJUZXh0ID0gXCJCYWxhbmNlOiBcIjtcclxuICAgICAgICB0aGlzLmJhbGFuY2VMYWJlbC5jbGFzc05hbWUgPSBcInRsLWJhbGFuY2UtbGFiZWxcIjtcclxuICAgICAgICBiYWxhbmNlUGFyZW50LmFwcGVuZCh0aGlzLmJhbGFuY2VMYWJlbCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJhbGFuY2VIZWxwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBiYWxhbmNlSGVscC5hcHBlbmQoTWF0ZXJpYWxJY29uLmdldChcImhlbHBcIikpO1xyXG4gICAgICAgIGJhbGFuY2VIZWxwLmNsYXNzTmFtZSA9IFwidGwtYmFsYW5jZS1oZWxwXCI7XHJcbiAgICAgICAgYmFsYW5jZUhlbHAudGl0bGUgPSBUaW1lbG9nTW9kZWwuZ2V0QmFsYW5jZUNhbGN1bGF0aW9uRGVzY3JpcHRpb24oKTtcclxuICAgICAgICBiYWxhbmNlUGFyZW50LmFwcGVuZChiYWxhbmNlSGVscCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2hlZXRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuc2hlZXRDb250YWluZXIuY2xhc3NOYW1lID0gXCJ0bC1zaGVldFwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQodGhpcy5zaGVldENvbnRhaW5lcik7XHJcblxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjcmVhdGVDaGFuZ2Vsb2dFbGVtZW50KClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IFwidGwtY2hhbmdlbG9nIHRsLWNoYW5nZWxvZy1oaWRkZW5cIjtcclxuICAgICAgICBjb25zdCBiYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBiYWNrLmNsYXNzTmFtZSA9IFwidGwtY2hhbmdlbG9nLWJhY2tcIjtcclxuICAgICAgICBlbGVtZW50LmFwcGVuZChiYWNrKTtcclxuICAgICAgICBiYWNrLm9uY2xpY2sgPSAoKSA9PiBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0bC1jaGFuZ2Vsb2ctaGlkZGVuXCIpO1xyXG5cclxuICAgICAgICBjb25zdCBpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgaW5uZXIuY2xhc3NOYW1lID0gXCJ0bC1jaGFuZ2Vsb2ctaW5uZXJcIjtcclxuICAgICAgICBlbGVtZW50LmFwcGVuZChpbm5lcik7XHJcblxyXG4gICAgICAgIGNvbnN0IGNoYW5nZWxvZyA9IEhJQk9CX1VUSUxTX0NIQU5HRUxPRztcclxuICAgICAgICBmb3IgKGNvbnN0IHZlcnNpb24gb2YgY2hhbmdlbG9nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgdmVyc2lvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICB2ZXJzaW9uRWxlbWVudC5jbGFzc05hbWUgPSBcInRsLWNoYW5nZWxvZy12ZXJzaW9uXCI7XHJcbiAgICAgICAgICAgIGlubmVyLmFwcGVuZCh2ZXJzaW9uRWxlbWVudCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb25UaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIHZlcnNpb25UaXRsZS5jbGFzc05hbWUgPSBcInRsLWNoYW5nZWxvZy10aXRsZVwiO1xyXG4gICAgICAgICAgICB2ZXJzaW9uVGl0bGUuaW5uZXJUZXh0ID0gdmVyc2lvbi52ZXJzaW9uO1xyXG4gICAgICAgICAgICB2ZXJzaW9uRWxlbWVudC5hcHBlbmQodmVyc2lvblRpdGxlKTtcclxuICAgICAgICAgICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKTtcclxuICAgICAgICAgICAgbGlzdC5jbGFzc05hbWUgPSBcInRsLWNoYW5nZWxvZy1saXN0XCI7XHJcbiAgICAgICAgICAgIHZlcnNpb25FbGVtZW50LmFwcGVuZChsaXN0KTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCB0ZXh0IG9mIHZlcnNpb24udGV4dClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICAgICAgICAgICAgICB0ZXh0RWxlbWVudC5pbm5lclRleHQgPSB0ZXh0O1xyXG4gICAgICAgICAgICAgICAgbGlzdC5hcHBlbmQodGV4dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVNb2RlbCgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMubW9kZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLm9uRGF0ZVVwZGF0ZWQub2ZmKHRoaXMub25EYXRlVXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwub25SZWFzb25zVXBkYXRlZC5vZmYodGhpcy5vblJlYXNvbnNVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5vblNhdmVTdGF0dXNVcGRhdGVkLm9mZih0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLm9uU2hlZXRVcGRhdGVkLm9mZih0aGlzLm9uU2hlZXRVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5vblNoZWV0c1VwZGF0ZWQub2ZmKHRoaXMub25TaGVldHNVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG5ldyBUaW1lbG9nTW9kZWwoKTtcclxuICAgICAgICB0aGlzLm1vZGVsLm9uRGF0ZVVwZGF0ZWQub24odGhpcy5vbkRhdGVVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm1vZGVsLm9uUmVhc29uc1VwZGF0ZWQub24odGhpcy5vblJlYXNvbnNVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm1vZGVsLm9uU2F2ZVN0YXR1c1VwZGF0ZWQub24odGhpcy5vblNhdmVTdGF0dXNVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm1vZGVsLm9uU2hlZXRVcGRhdGVkLm9uKHRoaXMub25TaGVldFVwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25TaGVldHNVcGRhdGVkLm9uKHRoaXMub25TaGVldHNVcGRhdGVkLCB0aGlzKTtcclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5tb2RlbC5pbml0aWFsaXplKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGdldERhdGVDb250YWluZXIoZGF0YTogeyBzaGVldDogVGltZWxvZ1NoZWV0LCBkYXRlOiBUaW1lbG9nRGF0ZSB9KVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2hlZXQgPT09IGRhdGEuc2hlZXQgJiYgdGhpcy5zaGVldENvbnRhaW5lcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCBkYXRlQ29udGFpbmVyID0gdGhpcy5zaGVldERhdGVzLmZpbmQoZCA9PiBkLmRhdGUgPT09IGRhdGEuZGF0ZSk7XHJcbiAgICAgICAgICAgIGlmICghZGF0ZUNvbnRhaW5lcilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lciA9IHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRhLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSxcclxuICAgICAgICAgICAgICAgICAgICBlbnRyaWVzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBzdGFyQnV0dG9uOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhc3RlQnV0dG9uOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHdlZWtlbmREZXNjcmlwdGlvbjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hlZXREYXRlcy5wdXNoKGRhdGVDb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuY2xhc3NOYW1lID0gXCJ0bC1kYXRlXCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNoZWV0Q29udGFpbmVyLmFwcGVuZENoaWxkKGRhdGVDb250YWluZXIucGFyZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobmV3IERhdGUoZGF0YS5kYXRlLmRhdGUpLmdldERheSgpID09PSAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdlZWtTZXBlcmF0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdlZWtTZXBlcmF0b3IuY2xhc3NOYW1lID0gXCJ0bC13ZWVrLXNlcGVyYXRvclwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hlZXRDb250YWluZXIuYXBwZW5kQ2hpbGQod2Vla1NlcGVyYXRvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kKGRhdGVDb250YWluZXIuc3RhckJ1dHRvbik7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMubW9kZWw/LnNldEZhdm9yaXRlZERhdGUoZGF0YS5kYXRlKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLXN0YXItYnV0dG9uIHRsLXNob3ctb24taG92ZXJcIjtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi50aXRsZSA9IFwiRmF2b3JpdGUgRGF5XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci50aXRsZS5jbGFzc05hbWUgPSBcInRsLWRhdGUtbGFiZWxcIjtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIudGl0bGUuaW5uZXJUZXh0ID0gbmV3IERhdGUoZGF0YS5kYXRlLmRhdGUpLnRvRGF0ZVN0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0ZS53ZWVrZW5kKSBkYXRlQ29udGFpbmVyLnRpdGxlLmNsYXNzTGlzdC5hZGQoXCJ0bC1kYXRlLWxhYmVsLXdlZWtlbmRcIik7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmQoZGF0ZUNvbnRhaW5lci50aXRsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci53ZWVrZW5kRGVzY3JpcHRpb24uY2xhc3NOYW1lID0gXCJ0bC13ZWVrZW5kLWRlc2NyaXB0aW9uXCI7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmQoZGF0ZUNvbnRhaW5lci53ZWVrZW5kRGVzY3JpcHRpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghZGF0YS5zaGVldC5sb2NrZWQgJiYgIWRhdGEuZGF0ZS50aW1lb2ZmUmVxdWlyZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICBhZGQuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImFkZFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBhZGQuY2xhc3NOYW1lID0gXCJ0bC1hZGQtZW50cnktYnRuIHRsLXNob3ctb24taG92ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICBhZGQub25jbGljayA9ICgpID0+IHRoaXMubW9kZWw/Lm5ld0VudHJ5KGRhdGEuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kKGFkZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24uYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcInN3aXRjaF9hY2Nlc3Nfc2hvcnRjdXRfYWRkXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24udGl0bGUgPSBcIlBhc3RlIGZyb20gRmF2b3JpdGUgRGF5XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLXBhc3RlLWJ0biB0bC1zaG93LW9uLWhvdmVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8ucGFzdGVGcm9tU3RhcnJlZChkYXRhLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmFwcGVuZChkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkVG9XZWVrU3VtKGRhdGVDb250YWluZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlQ29udGFpbmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0RW50cnlDb250YWluZXIoZGF0YTogeyBzaGVldDogVGltZWxvZ1NoZWV0LCBkYXRlOiBUaW1lbG9nRGF0ZSB9LCBkYXRlQ29udGFpbmVyOiBUaW1lbG9nVUlEYXRlQ29udGFpbmVyLCBlbnRyeTogVGltZWxvZ0VudHJ5KVxyXG4gICAge1xyXG4gICAgICAgIGxldCBlbnRyeUNvbnRhaW5lciA9IGRhdGVDb250YWluZXIuZW50cmllcy5maW5kKHAgPT4gcC5lbnRyeSA9PT0gZW50cnkpO1xyXG4gICAgICAgIGlmICghZW50cnlDb250YWluZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lciA9IHtcclxuICAgICAgICAgICAgICAgIGVudHJ5LFxyXG4gICAgICAgICAgICAgICAgcGFyZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxyXG4gICAgICAgICAgICAgICAgc3RhcnRIb3VyOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXHJcbiAgICAgICAgICAgICAgICBlbmRIb3VyOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXHJcbiAgICAgICAgICAgICAgICBsZW5ndGg6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcclxuICAgICAgICAgICAgICAgIHJlYXNvbjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKSxcclxuICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcclxuICAgICAgICAgICAgICAgIGNvbW1lbnRCdXR0b246IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksXHJcbiAgICAgICAgICAgICAgICBub1JlYXNvbldhcm5pbmc6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5lbnRyaWVzLnB1c2goZW50cnlDb250YWluZXIpO1xyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmNsYXNzTmFtZSA9IFwidGwtZW50cnlcIjtcclxuICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIucGFyZW50KTtcclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91ci50eXBlID0gXCJ0aW1lXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91ci5jbGFzc05hbWUgPSBcInRsLWVudHJ5LXN0YXJ0XCI7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnNoZWV0LmxvY2tlZCkgZW50cnlDb250YWluZXIuc3RhcnRIb3VyLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuc3RhcnRIb3VyLm9uY2hhbmdlID0gKCkgPT4gXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IGVudHJ5LnN0YXJ0SG91ciArIGVudHJ5Lmxlbmd0aEhvdXJzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbD8uY2hhbmdlU3RhcnRIb3VyKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIERhdGVzLnBhcnNlVGltZVRvaG91cnMoZW50cnlDb250YWluZXI/LnN0YXJ0SG91ci52YWx1ZSA/PyBcIjA4OjAwXCIpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IE51bWJlcnMucm91bmQoZW5kIC0gZW50cnkuc3RhcnRIb3VyLCAyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWw/LmNoYW5nZUxlbmd0aEhvdXJzKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIGxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91cik7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBlbmRMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgICAgICBlbmRMYWJlbC5jbGFzc05hbWUgPSBcInRsLWVuZC1sYWJlbFwiXHJcbiAgICAgICAgICAgIGVuZExhYmVsLmlubmVyVGV4dCA9IFwiLVwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW5kTGFiZWwpO1xyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuZW5kSG91ci50eXBlID0gXCJ0aW1lXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmVuZEhvdXIuY2xhc3NOYW1lID0gXCJ0bC1lbnRyeS1lbmRcIjtcclxuICAgICAgICAgICAgaWYgKGRhdGEuc2hlZXQubG9ja2VkKSBlbnRyeUNvbnRhaW5lci5lbmRIb3VyLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuZW5kSG91ci5vbmNoYW5nZSA9ICgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChlbnRyeUNvbnRhaW5lcj8uZW5kSG91cilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBOdW1iZXJzLnJvdW5kKERhdGVzLnBhcnNlVGltZVRvaG91cnMoZW50cnlDb250YWluZXIuZW5kSG91ci52YWx1ZSkgLSBlbnRyeS5zdGFydEhvdXIsIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZWw/LmNoYW5nZUxlbmd0aEhvdXJzKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIGxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLmVuZEhvdXIpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnJlYXNvbi5vbmNoYW5nZSA9ICgpID0+IHRoaXMubW9kZWw/LmNoYW5nZVJlYXNvbihkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpLCBlbnRyeUNvbnRhaW5lcj8ucmVhc29uLnZhbHVlID8/IFwiXCIpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zaGVldC5sb2NrZWQpIGVudHJ5Q29udGFpbmVyLnJlYXNvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnJlYXNvbi5jbGFzc05hbWUgPSBcInRsLWVudHJ5LXJlYXNvblwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIucmVhc29uKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVSZWFzb25zRHJvcGRvd24oZW50cnlDb250YWluZXIucmVhc29uKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkYXRlQ29udGFpbmVyLmVudHJpZXMubGVuZ3RoID09PSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN1bUhvdXJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN1bUhvdXJzLmNsYXNzTmFtZSA9IFwidGwtc3VtLWhvdXJzXCI7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kKGRhdGVDb250YWluZXIuc3VtSG91cnMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5sZW5ndGgudHlwZSA9IFwibnVtYmVyXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmxlbmd0aC5jbGFzc05hbWUgPSBcInRsLWVudHJ5LWxlbmd0aFwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5sZW5ndGguc3RlcCA9IFwiMC4wMVwiO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zaGVldC5sb2NrZWQpIGVudHJ5Q29udGFpbmVyLmxlbmd0aC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmxlbmd0aC5vbmNoYW5nZSA9ICgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWw/LmNoYW5nZUxlbmd0aEhvdXJzKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIHBhcnNlRmxvYXQoZW50cnlDb250YWluZXI/Lmxlbmd0aC52YWx1ZSB8fCBcIjBcIikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZHVyYXRpb25MYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgICAgICBkdXJhdGlvbkxhYmVsLmNsYXNzTmFtZSA9IFwidGwtZHVyYXRpb24tbGFiZWxcIjtcclxuICAgICAgICAgICAgZHVyYXRpb25MYWJlbC5pbm5lclRleHQgPSBcImhvdXIocylcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGR1cmF0aW9uTGFiZWwpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFkYXRhLnNoZWV0LmxvY2tlZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLWFkZC1jb21tZW50LWJ0biB0bC1zaG93LW9uLWhvdmVyXCI7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm1vZGVsPy50b2dnbGVDb21tZW50KGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSkpO1xyXG4gICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLmNvbW1lbnRCdXR0b24pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgICAgICByZW1vdmUuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImRlbGV0ZVwiKSk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmUuY2xhc3NOYW1lID0gXCJ0bC1yZW1vdmUtZW50cnktYnRuIHRsLXNob3ctb24taG92ZXJcIjtcclxuICAgICAgICAgICAgICAgIHJlbW92ZS5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8uZGVsZXRlRW50cnkoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSk7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQocmVtb3ZlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubm9SZWFzb25XYXJuaW5nLmFwcGVuZChNYXRlcmlhbEljb24uZ2V0KFwid2FybmluZ1wiLCB0cnVlKSk7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLm5vUmVhc29uV2FybmluZy5hcHBlbmQoXCIgTm8gcmVhc29uIHNlbGVjdGVkIVwiKTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubm9SZWFzb25XYXJuaW5nLmNsYXNzTmFtZSA9IFwidGwtbm8tcmVhc29uLXdhcm5pbmcgdGwtd2FybmluZyB0bC1oYXMtcmVhc29uXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5ub1JlYXNvbldhcm5pbmcpO1xyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC50eXBlID0gXCJ0ZXh0XCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQucGxhY2Vob2xkZXIgPSBcIldyaXRlIGEgbm90ZS4uLlwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50LnRpdGxlID0gXCJXcml0ZSBhIG5vdGUuLi5cIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC5jbGFzc05hbWUgPSBcInRsLWVudHJ5LWNvbW1lbnRcIjtcclxuICAgICAgICAgICAgaWYgKGRhdGEuc2hlZXQubG9ja2VkKSBlbnRyeUNvbnRhaW5lci5jb21tZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC5vbmNoYW5nZSA9ICgpID0+IFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsPy5jaGFuZ2VDb21tZW50KGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIGVudHJ5Q29udGFpbmVyPy5jb21tZW50LnZhbHVlID8/IFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5jb21tZW50KTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlbnRyeUNvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYWRkVG9XZWVrU3VtKGRhdGU6IFRpbWVsb2dVSURhdGVDb250YWluZXIpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMud2Vla1N1bXMubGVuZ3RoIDwgMSB8fCBuZXcgRGF0ZShkYXRlLmRhdGUuZGF0ZSkuZ2V0RGF5KCkgPT09IDApIC8vSWYgdGhpcyBpcyB0aGUgZmlyc3QgZGF5LCBvciBhIHN1bmRheSwgY3JlYXRlIGEgbmV3IHdlZWsgZm9yIGl0LlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgd2Vla1N1bSA9IHtcclxuICAgICAgICAgICAgICAgIGRhdGVzOiBbZGF0ZV0sXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHdlZWtTdW0uZWxlbWVudC5jbGFzc05hbWUgPSBcInRsLXdlZWstc3VtXCI7XHJcbiAgICAgICAgICAgIHRoaXMud2Vla1N1bXMucHVzaCh3ZWVrU3VtKTtcclxuICAgICAgICAgICAgZGF0ZS5wYXJlbnQuYXBwZW5kQ2hpbGQod2Vla1N1bS5lbGVtZW50KTtcclxuICAgICAgICAgICAgZGF0ZS5wYXJlbnQuc3R5bGUubWFyZ2luVG9wID0gXCIzOHB4XCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMud2Vla1N1bXNbdGhpcy53ZWVrU3Vtcy5sZW5ndGggLSAxXS5kYXRlcy5wdXNoKGRhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgb25EYXRlVXBkYXRlZChkYXRhOiB7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGRhdGU6IFRpbWVsb2dEYXRlIH0pXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTaGVldCA9PT0gZGF0YS5zaGVldCAmJiB0aGlzLnNoZWV0Q29udGFpbmVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IGRhdGVDb250YWluZXIgPSB0aGlzLmdldERhdGVDb250YWluZXIoZGF0YSk7XHJcbiAgICAgICAgICAgIGlmIChkYXRlQ29udGFpbmVyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGRhdGEuZGF0ZS5lbnRyaWVzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBlbnRyeUNvbnRhaW5lciA9IHRoaXMuZ2V0RW50cnlDb250YWluZXIoZGF0YSwgZGF0ZUNvbnRhaW5lciwgZW50cnkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5zdGFydEhvdXIudmFsdWUgPSBEYXRlcy5mb3JtYXRIb3VyKGVudHJ5LnN0YXJ0SG91cik7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIubGVuZ3RoLnZhbHVlID0gZW50cnkubGVuZ3RoSG91cnMudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5lbmRIb3VyLnZhbHVlID0gRGF0ZXMuZm9ybWF0SG91cihlbnRyeS5zdGFydEhvdXIgKyBlbnRyeS5sZW5ndGhIb3Vycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIucmVhc29uLnZhbHVlID0gZW50cnkucmVhc29uSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC52YWx1ZSA9IGVudHJ5LmNvbW1lbnQgPz8gXCJcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZW50cnkucmVhc29uSWQpIGVudHJ5Q29udGFpbmVyLm5vUmVhc29uV2FybmluZy5jbGFzc0xpc3QuYWRkKFwidGwtaGFzLXJlYXNvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGVudHJ5Q29udGFpbmVyLm5vUmVhc29uV2FybmluZy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtaGFzLXJlYXNvblwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbi50aXRsZSA9IGVudHJ5Lmhhc0NvbW1lbnQgPyBcIlJlbW92ZSBub3RlXCIgOiBcIkFkZCBub3RlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbi5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnRCdXR0b24uYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChlbnRyeS5oYXNDb21tZW50ID8gXCJzcGVha2VyX25vdGVzX29mZlwiIDogXCJzcGVha2VyX25vdGVzXCIpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5Lmhhc0NvbW1lbnQpIGVudHJ5Q29udGFpbmVyLnBhcmVudC5jbGFzc0xpc3QuYWRkKFwidGwtaGFzLWNvbW1lbnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBlbnRyeUNvbnRhaW5lci5wYXJlbnQuY2xhc3NMaXN0LnJlbW92ZShcInRsLWhhcy1jb21tZW50XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlZEVudHJpZXMgPSBkYXRlQ29udGFpbmVyLmVudHJpZXMuZmlsdGVyKGVudHJ5ID0+ICFkYXRhLmRhdGUuZW50cmllcy5maW5kKGUgPT4gZSA9PT0gZW50cnkuZW50cnkpKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuZW50cmllcyA9IGRhdGVDb250YWluZXIuZW50cmllcy5maWx0ZXIoZW50cnkgPT4gIXJlbW92ZWRFbnRyaWVzLmluY2x1ZGVzKGVudHJ5KSk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVkRW50cmllcy5mb3JFYWNoKGUgPT4gZS5wYXJlbnQucmVtb3ZlKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkYXRlQ29udGFpbmVyLnN1bUhvdXJzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1bSA9IE51bWJlcnMuc3VtKGRhdGEuZGF0ZS5lbnRyaWVzLm1hcChlID0+IGUubGVuZ3RoSG91cnMpKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN1bUhvdXJzLmlubmVyVGV4dCA9IGAke051bWJlcnMucm91bmQoc3VtLCAyKX0gaG91ciR7c3VtID09PSAxID8gXCJcIiA6IFwic1wifWA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uZGlzYWJsZWQgPSBkYXRhLmRhdGUuZmF2b3JpdGVkO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1mYXZvcml0ZVwiKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwic3RhclwiLCBkYXRhLmRhdGUuZmF2b3JpdGVkKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRlLmZhdm9yaXRlZCkgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJ0bC1mYXZvcml0ZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZUNvbnRhaW5lci5lbnRyaWVzLmxlbmd0aCA+IDAgfHwgZGF0ZUNvbnRhaW5lci5kYXRlLmZhdm9yaXRlZClcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJ0bC1oaWRlLWZhdm9yaXRlLWJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1oaWRlLWZhdm9yaXRlLWJ1dHRvblwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnRpdGxlLnRpdGxlID0gZGF0YS5kYXRlLmRhdGVEZXNjcmlwdGlvbiA/PyBcIlwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGUud2Vla2VuZCAmJiBkYXRhLmRhdGUuZW50cmllcy5sZW5ndGggPCAxIHx8IGRhdGEuZGF0ZS50aW1lb2ZmUmVxdWlyZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci53ZWVrZW5kRGVzY3JpcHRpb24uY2xhc3NMaXN0LnJlbW92ZShcInRsLXdlZWtlbmQtZGVzY3JpcHRpb24taGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIud2Vla2VuZERlc2NyaXB0aW9uLmlubmVyVGV4dCA9IGRhdGEuZGF0ZS5kYXRlRGVzY3JpcHRpb24gPz8gXCJcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLndlZWtlbmREZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKFwidGwtd2Vla2VuZC1kZXNjcmlwdGlvbi1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHdlZWtTdW0gPSB0aGlzLndlZWtTdW1zLmZpbmQodyA9PiB3LmRhdGVzLnNvbWUoZCA9PiBkLmRhdGUgPT09IGRhdGEuZGF0ZSkpO1xyXG4gICAgICAgICAgICBpZiAod2Vla1N1bSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3VtID0gTnVtYmVycy5zdW0od2Vla1N1bS5kYXRlcy5tYXAoZCA9PiBOdW1iZXJzLnN1bShkLmVudHJpZXMubWFwKGUgPT4gZS5lbnRyeS5sZW5ndGhIb3VycykpKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXlzID0gd2Vla1N1bS5kYXRlcy5maWx0ZXIoZCA9PiAhZC5kYXRlLndlZWtlbmQpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsSG91cnMgPSBkYXRhLnNoZWV0LmhvdXJzUGVyRGF5ICogZGF5cztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdlZWtOdW1iZXIgPSBEYXRlcy5nZXRXZWVrTnVtYmVyRnJvbURhdGUod2Vla1N1bS5kYXRlc1swXS5kYXRlLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgd2Vla1N1bS5lbGVtZW50LmlubmVySFRNTCA9IGA8Yj5XZWVrICR7d2Vla051bWJlcn08L2I+OiAke051bWJlcnMucm91bmQoc3VtLCAyKX0gLyAke051bWJlcnMucm91bmQodG90YWxIb3VycywgMil9IGhvdXJzYDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVwZGF0ZUJhbGFuY2UoKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgdXBkYXRlUmVhc29uc0Ryb3Bkb3duKHNlbGVjdDogSFRNTFNlbGVjdEVsZW1lbnQpXHJcbiAgICB7XHJcbiAgICAgICAgc2VsZWN0LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgZm9yIChjb25zdCByZWFzb24gb2YgdGhpcy5yZWFzb25zKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gcmVhc29uLnNlcnZlcklkO1xyXG4gICAgICAgICAgICBvcHRpb24uaW5uZXJUZXh0ID0gcmVhc29uLnZhbHVlO1xyXG4gICAgICAgICAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uUmVhc29uc1VwZGF0ZWQocmVhc29uczogSGlCb2JSZWFzb25bXSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLnJlYXNvbnMgPSByZWFzb25zO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2YgdGhpcy5zaGVldERhdGVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBkYXRlLmVudHJpZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUmVhc29uc0Ryb3Bkb3duKGVudHJ5LnJlYXNvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uU2F2ZVN0YXR1c1VwZGF0ZWQoc3RhdHVzOiBUaW1lbG9nU2F2ZVN0YXR1cylcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2F2ZVN0YXR1cykgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtc3VjY2Vzc1wiKTtcclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NMaXN0LnJlbW92ZShcInRsLXdhcm5pbmdcIik7XHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1jbGlja2FibGVcIik7XHJcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gVGltZWxvZ1NhdmVTdGF0dXMuU2F2ZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImNsb3VkX2RvbmVcIiwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kKFwiIFNhdmVkXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NMaXN0LmFkZChcInRsLXN1Y2Nlc3NcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdGF0dXMgPT09IFRpbWVsb2dTYXZlU3RhdHVzLldhaXRpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcInBlbmRpbmdcIikpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kKFwiIFBlbmRpbmcuLi5cIilcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gVGltZWxvZ1NhdmVTdGF0dXMuU2F2aW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJjbG91ZF91cGxvYWRcIikpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kKFwiIFNhdmluZy4uLlwiKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RhdHVzID09PSBUaW1lbG9nU2F2ZVN0YXR1cy5FcnJvcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiY2xvdWRfb2ZmXCIpKTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZChcIiBGYWlsZWQhXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NMaXN0LmFkZChcInRsLXdhcm5pbmdcIik7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc0xpc3QuYWRkKFwidGwtY2xpY2thYmxlXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgb25TYXZlU3RhdHVzQ2xpY2soKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5zYXZlU3RhdHVzPy5jbGFzc0xpc3QuY29udGFpbnMoXCJ0bC1jbGlja2FibGVcIikpIHJldHVybjtcclxuICAgICAgICB0aGlzLm1vZGVsPy5zYXZlKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uU2hlZXRVcGRhdGVkKHNoZWV0OiBUaW1lbG9nU2hlZXQpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hlZXREcm9wZG93biAmJiAhdGhpcy5zaGVldERyb3Bkb3duT3B0aW9ucy5maW5kKHMgPT4gcy5zaGVldCA9PT0gc2hlZXQpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gc2hlZXQuaWQudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgb3B0aW9uLmlubmVyVGV4dCA9IGAke25ldyBEYXRlKHNoZWV0LnN0YXJ0KS50b0RhdGVTdHJpbmcoKX0gLSAke25ldyBEYXRlKHNoZWV0LmVuZCkudG9EYXRlU3RyaW5nKCl9JHtzaGVldC5sb2NrZWQgPyBcIiAobG9ja2VkKVwiIDogXCJcIn1gO1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd25PcHRpb25zLnB1c2goeyBzaGVldDogc2hlZXQsIGVsZW1lbnQ6IG9wdGlvbiB9KTtcclxuICAgICAgICAgICAgdGhpcy5zaGVldERyb3Bkb3duLmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2hlZXQgPT09IHNoZWV0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hlZXRDb250YWluZXIpIHRoaXMuc2hlZXRDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgdGhpcy5zaGVldERhdGVzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMud2Vla1N1bXMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIHNoZWV0LmRhdGVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudXBkYXRlQmFsYW5jZSgpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBvblNoZWV0c1VwZGF0ZWQoc2hlZXRzOiBUaW1lbG9nU2hlZXRbXSlcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5zaGVldERyb3Bkb3duKSB0aGlzLnNoZWV0RHJvcGRvd24uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd25PcHRpb25zID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBzaGVldCBvZiBzaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm9uU2hlZXRVcGRhdGVkKHNoZWV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vblNlbGVjdGVkU2hlZXRDaGFuZ2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uU2VsZWN0ZWRTaGVldENoYW5nZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNoZWV0RHJvcGRvd24pIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5zaGVldENvbnRhaW5lcikgdGhpcy5zaGVldENvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuc2hlZXREYXRlcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHZhbCA9IHRoaXMuc2hlZXREcm9wZG93bi52YWx1ZTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkU2hlZXQgPSB0aGlzLnNoZWV0RHJvcGRvd25PcHRpb25zLmZpbmQobyA9PiBvLmVsZW1lbnQudmFsdWUgPT09IHZhbCk/LnNoZWV0O1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2hlZXQgJiYgdGhpcy5tb2RlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwuZmV0Y2hTaGVldCh0aGlzLnNlbGVjdGVkU2hlZXQuaWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHVwZGF0ZUJhbGFuY2UoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5tb2RlbCB8fCAhdGhpcy5iYWxhbmNlTGFiZWwgfHwgIXRoaXMuc2VsZWN0ZWRTaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGJhbGFuY2UgPSBhd2FpdCB0aGlzLm1vZGVsLmdldEN1cnJlbnRCYWxhbmNlSG91cnMoKTtcclxuICAgICAgICBjb25zdCBtb250aEJhbGFuY2UgPSBOdW1iZXJzLnJvdW5kKGJhbGFuY2Uuc2hlZXRzW3RoaXMuc2VsZWN0ZWRTaGVldC5pZC50b1N0cmluZygpXSA/PyAwLCAyKTtcclxuICAgICAgICBjb25zdCB0b3RhbEJhbGFuY2UgPSBOdW1iZXJzLnJvdW5kKGJhbGFuY2UuYmFsYW5jZSwgMik7XHJcbiAgICAgICAgdGhpcy5iYWxhbmNlTGFiZWwuaW5uZXJUZXh0ID0gYEZsZXg6ICR7dG90YWxCYWxhbmNlfSBob3VyJHt0b3RhbEJhbGFuY2UgIT0gMSA/IFwic1wiIDogXCJcIn0gKGN1cnJlbnQgbW9udGg6ICR7bW9udGhCYWxhbmNlfSBob3VyJHttb250aEJhbGFuY2UgIT0gMSA/IFwic1wiIDogXCJcIn0pYDtcclxuXHJcbiAgICAgICAgY29uc3QgZmF2b3JpdGUgPSBhd2FpdCB0aGlzLm1vZGVsLmdldEZhdm9yaXRlZERhdGUoKTtcclxuICAgICAgICBpZiAoZmF2b3JpdGUpIHRoaXMuc2hlZXRDb250YWluZXI/LmNsYXNzTGlzdC5hZGQoXCJ0bC1oYXMtZmF2b3JpdGVcIik7XHJcbiAgICAgICAgZWxzZSB0aGlzLnNoZWV0Q29udGFpbmVyPy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtaGFzLWZhdm9yaXRlXCIpO1xyXG4gICAgfVxyXG5cclxufSIsImV4cG9ydCBjb25zdCBUaW1lbG9nQ3NzID0gYFxyXG4udGwtdG9nZ2xlLWJ0blxyXG57XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xyXG4gICAgZm9udC1zaXplOiAyZW07XHJcbn1cclxuLnRsLWNsb3NlLWJ0blxyXG57XHJcbiAgICBmb250LXNpemU6IDJlbTtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIHJpZ2h0OiA1cHg7XHJcbn1cclxuLnRsLXVpXHJcbntcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIHotaW5kZXg6IDEwMDA7XHJcbiAgICBpbnNldDogMHB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICBvdmVyZmxvdy15OiBzY3JvbGw7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG59ICAgICAgICBcclxuLnRsLWRhdGVcclxue1xyXG4gICAgbWFyZ2luLXRvcDogMTBweDtcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCBncmF5O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG59XHJcbi50bC1zYXZlLXN0YXR1cywgLnRsLWFkZC1lbnRyeS1idG5cclxue1xyXG4gICAgbWFyZ2luLWxlZnQ6IDEwcHg7XHJcbn1cclxuLnRsLWVudHJ5XHJcbntcclxuICAgIG1hcmdpbi10b3A6IDVweDtcclxufVxyXG4udGwtZW50cnkgPiAqXHJcbntcclxuICAgIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbn1cclxuLnRsLWVudHJ5ID4gaW5wdXRbdHlwZT1udW1iZXJdXHJcbntcclxuICAgIHdpZHRoOiA1MHB4O1xyXG59XHJcbi50bC1lbnRyeSA+IGlucHV0W3R5cGU9dGltZV1cclxue1xyXG4gICAgd2lkdGg6IDc1cHg7XHJcbn1cclxuLnRsLXNhdmUtc3RhdHVzXHJcbntcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcbi50bC1zaGVldC1zZWxlY3Rcclxue1xyXG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcclxufVxyXG4udGwtZGF0ZS1sYWJlbFxyXG57XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG4udGwtZGF0ZS1sYWJlbC50bC1kYXRlLWxhYmVsLXdlZWtlbmRcclxue1xyXG4gICAgZm9udC13ZWlnaHQ6IGluaXRpYWw7XHJcbiAgICBmb250LXN0eWxlOiBpdGFsaWM7XHJcbiAgICBjb2xvcjogZ3JheTtcclxufVxyXG4udGwtZW50cnktcmVhc29uIFxyXG57XHJcbiAgICBwYWRkaW5nOiAzcHg7XHJcbn1cclxuLnRsLXJlbW92ZS1lbnRyeS1idG5cclxue1xyXG4gICAgZmxvYXQ6IHJpZ2h0O1xyXG59XHJcbi50bC13ZWVrLXNlcGVyYXRvclxyXG57XHJcbiAgICBtYXJnaW4tdG9wOiA1N3B4O1xyXG59XHJcbi50bC1iYWxhbmNlLWxhYmVsXHJcbntcclxuICAgIG1hcmdpbjogNXB4O1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG59XHJcbi50bC1iYWxhbmNlLWhlbHBcclxue1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgY3Vyc29yOiBoZWxwO1xyXG59XHJcblxyXG4udGwtdWktaW5uZXJcclxue1xyXG4gICAgZGlzcGxheTogdGFibGU7XHJcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcclxuICAgIG1hcmdpbi1yaWdodDogYXV0bztcclxufVxyXG4udGwtdWktaW5uZXIsIC50bC13ZWVrLXNlcGVyYXRvciwgLnRsLWRhdGVcclxue1xyXG4gICAgbWluLXdpZHRoOiA2NTBweDtcclxufVxyXG4udGwtZW50cnktY29tbWVudCB7XHJcbiAgICBtYXJnaW4tdG9wOiA1cHg7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcbi50bC1oYXMtY29tbWVudCAudGwtZW50cnktY29tbWVudFxyXG57XHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxufVxyXG4udGwtc3VjY2Vzc1xyXG57XHJcbiAgICBjb2xvcjogIzAyQjg3NTtcclxufVxyXG4udGwtd2FybmluZ1xyXG57XHJcbiAgICBjb2xvcjogI0YwQUY1MjtcclxufVxyXG4udGwtZGFuZ2VyXHJcbntcclxuICAgIGNvbG9yOiAjREE1NjUyO1xyXG59XHJcbi50bC1zdW0taG91cnNcclxue1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgbWFyZ2luLXRvcDogLTIzcHg7XHJcbn1cclxuLnRsLXdlZWstc3VtXHJcbntcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIG1hcmdpbi10b3A6IC01N3B4O1xyXG4gICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XHJcbn1cclxuLnRsLXVpIGJ1dHRvbi50bC1zdGFyLWJ1dHRvbiwgLnRsLXVpLnRsLWRhcmsgYnV0dG9uLnRsLXN0YXItYnV0dG9uXHJcbntcclxuICAgIGJhY2tncm91bmQ6IG5vbmU7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBtYXJnaW46IDA7XHJcbiAgICBwYWRkaW5nOiAwO1xyXG59XHJcbi50bC11aSBidXR0b24udGwtc3Rhci1idXR0b24udGwtZmF2b3JpdGUsIC50bC11aS50bC1kYXJrIGJ1dHRvbi50bC1zdGFyLWJ1dHRvbi50bC1mYXZvcml0ZVxyXG57XHJcbiAgICBjb2xvcjogI2YxYTAwYjtcclxuICAgIG9wYWNpdHk6IDE7XHJcbn1cclxuLnRsLXBhc3RlLWJ0biB7XHJcbiAgICBtYXJnaW4tbGVmdDogNXB4O1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG4udGwtaGFzLWZhdm9yaXRlIC50bC1wYXN0ZS1idG46bm90KC50bC1oaWRlLWZhdm9yaXRlLWJ1dHRvbilcclxue1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG59XHJcbi50bC1zaG93LW9uLWhvdmVyXHJcbntcclxuICAgIG9wYWNpdHk6IDA7XHJcbn1cclxuLnRsLWRhdGU6aG92ZXIgLnRsLXNob3ctb24taG92ZXJcclxue1xyXG4gICAgb3BhY2l0eTogMTtcclxufVxyXG4udGwtbm8tcmVhc29uLXdhcm5pbmcge1xyXG4gICAgbWFyZ2luLWxlZnQ6IDE4MHB4O1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgbWFyZ2luLXRvcDogLTIycHg7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxufVxyXG4udGwtbm8tcmVhc29uLXdhcm5pbmcudGwtaGFzLXJlYXNvblxyXG57XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcbi50bC1jbGlja2FibGVcclxue1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcbi50bC1kYXJrLW1vZGUtYnRuIHtcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIGJvdHRvbTogNXB4O1xyXG4gICAgcmlnaHQ6IDIwcHg7XHJcbn1cclxuLnRsLXVpIGJ1dHRvblxyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDlkOWQ5O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgZ3JheTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxufVxyXG4udGwtdWkgYnV0dG9uOmhvdmVyXHJcbntcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNlZmViZWI7XHJcbn1cclxuXHJcbi50bC11aS50bC1kYXJrXHJcbntcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMxRTFFMUU7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbn1cclxuLnRsLXVpLnRsLWRhcmsgc2VsZWN0LCAudGwtdWkudGwtZGFyayBpbnB1dCB7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjUyNTI2O1xyXG4gICAgYm9yZGVyOiAxcHggZ3JheSBzb2xpZDtcclxuICAgIGNvbG9yLXNjaGVtZTogZGFyaztcclxufVxyXG4udGwtdWkudGwtZGFyayBidXR0b25cclxue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzMzMzMzMztcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICMyODI4Mjg7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbn1cclxuLnRsLXVpLnRsLWRhcmsgYnV0dG9uOmhvdmVyXHJcbntcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM1MjUyNTI7XHJcbn1cclxuLnRsLXVpLnRsLWRhcmsgLnRsLW5vLXJlYXNvbi13YXJuaW5nXHJcbntcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMyNTI1MjY7XHJcbn1cclxuLnRsLXdlZWtlbmQtZGVzY3JpcHRpb24ge1xyXG4gICAgY29sb3I6IGdyYXk7XHJcbiAgICBmb250LXN0eWxlOiBpdGFsaWM7XHJcbiAgICBmbG9hdDogcmlnaHQ7XHJcbiAgICBtYXJnaW4tdG9wOiAycHg7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICBtYXgtd2lkdGg6IDQwMHB4O1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgIG1heC1oZWlnaHQ6IDM1cHg7XHJcbn1cclxuLnRsLXdlZWtlbmQtZGVzY3JpcHRpb24udGwtd2Vla2VuZC1kZXNjcmlwdGlvbi1oaWRkZW5cclxue1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG4udGwtdmVyc2lvbi1udW1iZXIge1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgYm90dG9tOiA1cHg7XHJcbiAgICBsZWZ0OiA1cHg7XHJcbn1cclxuXHJcbi50bC1jaGFuZ2Vsb2cge1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgaW5zZXQ6IDA7XHJcbiAgICB6LWluZGV4OiAxMDA7XHJcbn1cclxuLnRsLWNoYW5nZWxvZy1iYWNrIHtcclxuICAgIGluc2V0OiAwO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XHJcbiAgICBvcGFjaXR5OiAwLjU7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi50bC1jaGFuZ2Vsb2cudGwtY2hhbmdlbG9nLWhpZGRlbiB7XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcblxyXG4udGwtY2hhbmdlbG9nLXZlcnNpb24ge1xyXG4gICAgbWFyZ2luOiA1cHggMTBweDtcclxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBncmF5O1xyXG59XHJcblxyXG4udGwtY2hhbmdlbG9nLXZlcnNpb246bGFzdC1jaGlsZCB7XHJcbiAgICBib3JkZXItYm90dG9tOiAwO1xyXG59XHJcblxyXG4udGwtY2hhbmdlbG9nLXRpdGxlIHtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgZm9udC1zaXplOiAxLjI1ZW07XHJcbn1cclxuLnRsLWNoYW5nZWxvZy1pbm5lciB7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIGhlaWdodDogNzB2aDtcclxuICAgIHdpZHRoOiA5MHZ3O1xyXG4gICAgbGVmdDogNXZ3O1xyXG4gICAgdG9wOiAxNXZoO1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgZ3JheTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgb3ZlcmZsb3c6IGF1dG87XHJcbn1cclxuLnRsLWRhcmsgLnRsLWNoYW5nZWxvZy1pbm5lclxyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWExYTFhO1xyXG59XHJcblxyXG5gOyIsImV4cG9ydCBjb25zdCBSZWFzb25FbmhhbmNlbWVudENzcyA9IGBcclxuLnJlLWxhYmVsXHJcbntcclxuICAgIGZvbnQtc2l6ZTogMS41ZW07XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG59XHJcbi5yZS1yZWFzb24tc2VsZWN0XHJcbntcclxuICAgIHBhZGRpbmc6IDVweDtcclxufVxyXG4ucmUtcmVhc29uLXVpXHJcbntcclxuICAgIHotaW5kZXg6IDIwMDA7XHJcbiAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICBpbnNldDogMDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsMC43NSk7XHJcbiAgICBwYWRkaW5nLXRvcDogNDV2aDtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcbi5yZS1idG5cclxue1xyXG4gICAgcGFkZGluZzogMCB2YXIoLS1idXR0b24tcGFkZGluZy14LCAxNXB4KTtcclxuICAgIG1pbi13aWR0aDogODBweDtcclxuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLXNpemUsIDMwcHgpO1xyXG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICAgIGZvbnQtc2l6ZTogdmFyKC0tYnV0dG9uLWZvbnQtc2l6ZSwgMTJweCk7XHJcbiAgICBmb250LWZhbWlseTogdmFyKC0tYm9keS1mb250LWZhbWlseSk7XHJcbiAgICBib3JkZXI6IDA7XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICBtYXJnaW46IDVweDtcclxufVxyXG4ucmUtYnRuLnJlLXByaW1hcnlcclxue1xyXG4gICAgY29sb3I6IHZhcigtLXByaW1hcnktYmctdGV4dC1jb2xvciwgd2hpdGUpO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS02MDApO1xyXG59XHJcbi5yZS1idG4ucmUtc2Vjb25kYXJ5XHJcbntcclxuICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktYmctdGV4dC1jb2xvciwgIzUzNTM1Myk7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnktNjAwKTtcclxufVxyXG4ucmUtYmx1clxyXG57XHJcbiAgICBmaWx0ZXI6IGJsdXIoMnB4KTtcclxufVxyXG4ucmUtc3VibWl0dGluZyAucmUtYnRuXHJcbntcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuLnJlLXN1Ym1pdHRpbmctdGV4dFxyXG57XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG4gICAgZm9udC1zaXplOiAxLjVlbTtcclxufVxyXG4ucmUtc3VibWl0dGluZyAucmUtc3VibWl0dGluZy10ZXh0XHJcbntcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG59XHJcbmA7Il0sIm5hbWVzIjpbIkFwaSIsInN0YXRpYyIsIm1ldGhvZCIsInVybCIsImJvZHkiLCJQcm9taXNlIiwicmVzb2x2ZSIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwicmVzdWx0IiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0Iiwic3RhdHVzIiwiaGFzT3duUHJvcGVydHkiLCJrZXkiLCJ0b1N0cmluZyIsImFsZXJ0IiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwic2VuZCIsInN0cmluZ2lmeSIsIkRhdGVzIiwic3RyIiwic3BsaXQiLCJsZW5ndGgiLCJwdXNoIiwiRGF0ZSIsImpvaW4iLCJnZXRUaW1lIiwidGltZSIsImluY2x1ZGVUaW1lc3RhbXAiLCJkYXRlIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsInBhZFN0YXJ0IiwiZ2V0RGF0ZSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImhvdXJzIiwiaG91ciIsIk1hdGgiLCJmbG9vciIsIm1pbnV0ZSIsInJvdW5kIiwic2V0SG91cnMiLCJzZXREYXRlIiwiZ2V0RGF5Iiwid2VlazEiLCJwYXJzZUludCIsIkhpQm9iIiwiZW50cmllcyIsInNvbWUiLCJlIiwicmVhc29uSWQiLCJkYXRhIiwibWFwIiwic3RhcnQiLCJmb3JtYXQiLCJzdGFydEhvdXIiLCJlbmQiLCJsZW5ndGhIb3VycyIsInVuZGVmaW5lZCIsInJlYXNvbiIsImNvbW1lbnQiLCJkYXRlU3RyIiwidXNlcklkIiwidGhpcyIsImdldFVzZXJJZCIsIm1ldGFkYXRhIiwidGltZUxvZ0VudHJ5UmVhc29uIiwidmFsdWVzIiwidiIsImlkIiwic2VydmVySWQiLCJuYW1lIiwidmFsdWUiLCJzaGVldCIsInVzZXJJbmZvIiwiV2FpdCIsIm1zIiwid2luZG93Iiwic2V0VGltZW91dCIsImRlbGVnYXRlIiwiaGFuZGxlIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiUmVhc29uRW5oYW5jZW1lbnRNb2RlIiwiVGltZWxvZ1NhdmVTdGF0dXMiLCJFdmVudEhhbmRsZXIiLCJoYW5kbGVycyIsIm9uIiwiaGFuZGxlciIsImNvbnRleHQiLCJvZmYiLCJmaWx0ZXIiLCJoIiwiZmlyZSIsInZhbCIsImZvckVhY2giLCJjYWxsIiwiTWF0ZXJpYWxJY29uIiwibGluayIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJyZWwiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJpY29uIiwiZmlsbCIsInNwYW4iLCJjbGFzc05hbWUiLCJpbm5lclRleHQiLCJzdHlsZSIsInZlcnRpY2FsQWxpZ24iLCJmb250U2l6ZSIsImZvbnRWYXJpYXRpb25TZXR0aW5ncyIsIk51bWJlcnMiLCJudW0iLCJkZWNpbWFscyIsImNlaWwiLCJhcnIiLCJpIiwiVGltZWxvZ01vZGVsIiwic2hlZXRzIiwib25EYXRlVXBkYXRlZCIsIm9uUmVhc29uc1VwZGF0ZWQiLCJvblNoZWV0VXBkYXRlZCIsIm9uU2hlZXRzVXBkYXRlZCIsIm9uU2F2ZVN0YXR1c1VwZGF0ZWQiLCJzYXZlSGFuZGxlIiwic2F2aW5nIiwiY2FsY3VsYXRpbmdGbGV4IiwiZmV0Y2hpbmdTaGVldHMiLCJyZWFzb25zIiwiYXN5bmMiLCJmZXRjaFNoZWV0cyIsImZldGNoUmVhc29ucyIsIlNhdmVkIiwidW50aWwiLCJlbXBsb3llZVNoZWV0cyIsImN5Y2xlU3RhcnREYXRlIiwiY3ljbGVFbmREYXRlIiwibmV3U2hlZXQiLCJkYXRlcyIsImxvY2tlZCIsImhvdXJzUGVyRGF5Iiwic29ydCIsImEiLCJiIiwiZmluZCIsInMiLCJhdHRlbmRhbmNlIiwic3VtbWFyeSIsInBvdGVudGlhbFdvcmtpbmdIb3VycyIsInBvdGVudGlhbFdvcmtpbmdEYXlzIiwiZGlydHkiLCJub3ciLCJ3ZWVrZW5kIiwiZmF2b3JpdGVkIiwidGltZW9mZlJlcXVpcmVkIiwibm90ZSIsImlzVGltZW9mZlJlcXVpcmVkIiwiZGF0ZURlc2NyaXB0aW9uIiwiZGVzY3JpcHRpb24iLCJoYXNDb21tZW50IiwiZmF2b3JpdGUiLCJnZXRGYXZvcml0ZWREYXRlIiwiY2hhbmdlU3RhcnRIb3VyIiwiaW5kZXgiLCJkIiwicXVldWVTYXZlIiwiY2hhbmdlTGVuZ3RoSG91cnMiLCJjaGFuZ2VSZWFzb24iLCJjaGFuZ2VDb21tZW50IiwidG9nZ2xlQ29tbWVudCIsIm9sZEZhdm9yaXRlIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImdldEl0ZW0iLCJmZXRjaFNoZWV0IiwiZGVsZXRlRW50cnkiLCJzcGxpY2UiLCJvcmlnaW5hbERhdGUiLCJvcmlnaW5hbFNoZWV0IiwiZGF0ZUluZGV4IiwiaW5kZXhPZiIsImVudHJ5SW5kZXgiLCJzaGVldEluZGV4IiwibGFzdCIsImZpbmRMYXN0RW50cnkiLCJpbmNsdWRlcyIsImVudHJ5IiwiY2xlYXJUaW1lb3V0Iiwic2F2ZSIsIldhaXRpbmciLCJTYXZpbmciLCJtaW5pbXVtV2FpdCIsInN1Ym1pdCIsIkVycm9yIiwiY3VycmVudERhdGVUaW1lIiwicGFzdERhdGVUaW1lIiwiYmFsYW5jZSIsInNoZWV0QmFsYW5jZXMiLCJjYWNoZUtleSIsImRheSIsInBvdGVudGlhbEhvdXJzIiwic3VtIiwiaW5pdGlhbGl6ZSIsInNoZWV0RHJvcGRvd25PcHRpb25zIiwic2hlZXREYXRlcyIsIndlZWtTdW1zIiwib25EYXJrTW9kZUNoYW5nZSIsInRpbWVsb2ciLCJhZGRCdXR0b24iLCJwYXJlbnQiLCJxdWVyeVNlbGVjdG9yIiwidG9nZ2xlQnV0dG9uIiwiZ2V0IiwidGl0bGUiLCJvbmNsaWNrIiwidG9nZ2xlVmlzaWJsZSIsImNyZWF0ZVVJIiwiY3JlYXRlTW9kZWwiLCJsb2NhdGlvbiIsImhhc2giLCJpc0RhcmtNb2RlIiwidGltZWxvZ1VJT3V0ZXIiLCJkaXNwbGF5Iiwib3ZlcmZsb3ciLCJzaGVldENvbnRhaW5lciIsImlubmVySFRNTCIsIm1vZGVsIiwidG9nZ2xlRGFya01vZGUiLCJhcHBlbmQiLCJ0aW1lbG9nVUlJbm5lciIsImNsb3NlQnV0dG9uIiwiZGFya01vZGVCdXR0b24iLCJkYXJrIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwidmVyc2lvbk51bWJlciIsImNoYW5nZWxvZyIsImNyZWF0ZUNoYW5nZWxvZ0VsZW1lbnQiLCJjdXJzb3IiLCJ0ZXh0RGVjb3JhdGlvbiIsInNoZWV0RHJvcGRvd25MYWJlbCIsInNoZWV0RHJvcGRvd24iLCJvbmNoYW5nZSIsIm9uU2VsZWN0ZWRTaGVldENoYW5nZSIsInNhdmVTdGF0dXMiLCJvblNhdmVTdGF0dXNDbGljayIsImJhbGFuY2VQYXJlbnQiLCJiYWxhbmNlTGFiZWwiLCJiYWxhbmNlSGVscCIsImdldEJhbGFuY2VDYWxjdWxhdGlvbkRlc2NyaXB0aW9uIiwiZWxlbWVudCIsImJhY2siLCJpbm5lciIsInZlcnNpb24iLCJ2ZXJzaW9uRWxlbWVudCIsInZlcnNpb25UaXRsZSIsImxpc3QiLCJ0ZXh0IiwidGV4dEVsZW1lbnQiLCJnZXREYXRlQ29udGFpbmVyIiwic2VsZWN0ZWRTaGVldCIsImRhdGVDb250YWluZXIiLCJzdGFyQnV0dG9uIiwicGFzdGVCdXR0b24iLCJ3ZWVrZW5kRGVzY3JpcHRpb24iLCJ3ZWVrU2VwZXJhdG9yIiwic2V0RmF2b3JpdGVkRGF0ZSIsInRvRGF0ZVN0cmluZyIsIm5ld0VudHJ5IiwicGFzdGVGcm9tU3RhcnJlZCIsImFkZFRvV2Vla1N1bSIsImdldEVudHJ5Q29udGFpbmVyIiwiZW50cnlDb250YWluZXIiLCJwIiwiZW5kSG91ciIsImNvbW1lbnRCdXR0b24iLCJub1JlYXNvbldhcm5pbmciLCJ0eXBlIiwiZGlzYWJsZWQiLCJwYXJzZVRpbWVUb2hvdXJzIiwiZW5kTGFiZWwiLCJ1cGRhdGVSZWFzb25zRHJvcGRvd24iLCJzdW1Ib3VycyIsInN0ZXAiLCJwYXJzZUZsb2F0IiwiZHVyYXRpb25MYWJlbCIsInBsYWNlaG9sZGVyIiwid2Vla1N1bSIsIm1hcmdpblRvcCIsImZvcm1hdEhvdXIiLCJyZW1vdmVkRW50cmllcyIsInciLCJkYXlzIiwidG90YWxIb3VycyIsIndlZWtOdW1iZXIiLCJnZXRXZWVrTnVtYmVyRnJvbURhdGUiLCJ1cGRhdGVCYWxhbmNlIiwic2VsZWN0Iiwib3B0aW9uIiwiY29udGFpbnMiLCJvIiwiZ2V0Q3VycmVudEJhbGFuY2VIb3VycyIsIm1vbnRoQmFsYW5jZSIsInRvdGFsQmFsYW5jZSIsInN1Ym1pdHRpbmciLCJjbG9ja0luQnV0dG9uRmluZGVyIiwicmVhc29uRW5oYW5jZW1lbnRVSSIsImxhYmVsIiwicmVhc29uU2VsZWN0Iiwic2F2ZURlZmF1bHRSZWFzb25WYWx1ZSIsImNhbmNlbEJ1dHRvbiIsImNhbmNlbCIsInN1Ym1pdEJ1dHRvbiIsInN1Ym1pdHRpbmdUZXh0IiwiZmluZFVuZW5oYW5jZWRCdXR0b25zIiwiZW5oYW5jZUNsb2NrSW5CdXR0b24iLCJGaXhMYXRlc3QiLCJGaXhBbGwiLCJhcHBSb290Iiwic2VsZWN0b3IiLCJxdWVyeSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJidXR0b24iLCJtb2RlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNob3dSZWFzb25GaXhlciIsImxvYWREZWZhdWx0UmVhc29uVmFsdWUiLCJzZXRVSVZpc2libGUiLCJmaXhBbGwiLCJmaXhMYXRlc3QiLCJsYXRlc3QiXSwic291cmNlUm9vdCI6IiJ9