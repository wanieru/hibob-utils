// ==UserScript==
// @name        HiBob Time Utilities
// @version     1.1.12
// @author      Funday Factory
// @description Utilities to make it easier to log time in HiBob
// @match       https://app.hibob.com/*
// @namespace   http://tampermonkey.net/
// @icon        https://www.google.com/s2/favicons?sz=64&domain=hibob.com
// @grant       none
// ==/UserScript==

(()=>{"use strict";class e{static parse(e){if(!e)return null;const t=e.split("T");return t.length<2&&t.push("00:00"),new Date(t.join("T")).getTime()}static format(e,t){if(!e)return"";const n=new Date(e);return`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}-${n.getDate().toString().padStart(2,"0")}${t?`T${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`:""}`}static formatHour(e){const t=Math.floor(e%24),n=Math.round(60*(e-t));return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}static getWeekNumberFromDate(e){var t=new Date(e);t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)}static parseTimeTohours(e){const t=e.split(":");return parseInt(t[0])+parseInt(t[1])/60}}class t{constructor(){this.handlers=[]}on(e,t){this.handlers.push({handler:e,context:t})}off(e,t){this.handlers=this.handlers.filter((n=>n.handler!==e||n.context!==t))}fire(e){this.handlers.forEach((t=>t.handler.call(t.context,e)))}}class n{static round(e,t){return Math.round(e*10**t)/10**t}static floor(e,t){return Math.floor(e*10**t)/10**t}static ceil(e,t){return Math.ceil(e*10**t)/10**t}static sum(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}}class a{static scale(e){return e*this.scaling.scale}static unscale(e){return e/this.scaling.scale}static getUnitName(e=null){return null===e?this.scaling.unitGeneral:1===e?this.scaling.unitSingular:this.scaling.unitPlural}static format(e){return`${n.round(this.scale(e),2)} ${this.getUnitName(e)}`}}a.scaling={unitGeneral:"hour(s)",unitPlural:"hours",unitSingular:"hour",scale:1};class s{static initialize(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200",e.rel="stylesheet",document.head.appendChild(e)}static get(e,t=!1){const n=document.createElement("span");return n.className="material-symbols-outlined",n.innerText=e,n.style.verticalAlign="middle",n.style.fontSize="1.5em",n.style.fontVariationSettings="'FILL' "+(t?1:0),n}}class o{static for(e){return new Promise((t=>{window.setTimeout((()=>t()),e)}))}static until(e){return new Promise((t=>{const n=window.setInterval((()=>{e()&&(t(),window.clearInterval(n))}),1)}))}}class i{static xhr(e,t,n){return new Promise((a=>{let s=new XMLHttpRequest;s.open(e,t),s.setRequestHeader("Accept","application/json"),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(4===s.readyState){let e;try{e=JSON.parse(s.responseText)}catch(t){e={result:s.responseText}}if(200!==s.status){if(e.hasOwnProperty("error")){const t=e.hasOwnProperty("key")?e.key:s.status.toString();alert(`HiBob Utils: Error ${t} - ${e.error}`)}else alert(`HiBob Utils: Error ${s.status} - check the developer console for more information.`);console.log(`HiBob Utils: Error ${s.status}.`),console.log(s)}a({status:s.status,body:e})}},s.send(JSON.stringify(n))}))}}class r{static async submit(t,n){if(n.some((e=>!e.reasonId)))return console.log("WARNING: SOME ENTRIES HAVE NO REASON SET - NOT SUBMITTING!!",t,n),!1;const a=n.map((n=>{var a;return{start:e.format(t+3600*n.startHour*1e3,!0),end:"number"==typeof n.lengthHours?e.format(t+3600*(n.startHour+n.lengthHours)*1e3,!0):void 0,reason:n.reasonId,comment:null!==(a=n.comment)&&void 0!==a?a:void 0}})),s=e.format(t,!1),o=await this.getUserId();return 200===(await i.xhr("POST",`https://app.hibob.com/api/attendance/employees/${o}/attendance/entries?forDate=${s}`,a)).status}static async timelogReasons(){return(await this.metadata()).timeLogEntryReason.values.map((e=>({id:e.serverId,name:e.value})))}static async attendance(e){return(await i.xhr("GET",`https://app.hibob.com/api/employees/attendance/my/sheets/${e}`,{})).body}static async sheets(){const e=await this.getUserId();return(await i.xhr("GET",`https://app.hibob.com/api/employees/${e}/timelog/attendance/sheets`,{})).body}static async metadata(){return(await i.xhr("GET","https://app.hibob.com/api/company/metadata/lists/?includeArchived=true",{})).body}static async getUserId(){var e;return"string"!=typeof this.userId&&await this.userInfo(),null!==(e=this.userId)&&void 0!==e?e:""}static async userInfo(){const e=await i.xhr("GET","https://app.hibob.com/api/user",{});return this.userId=e.body.id,e.body}}var l,d;!function(e){e[e.Waiting=0]="Waiting",e[e.Saving=1]="Saving",e[e.Saved=2]="Saved",e[e.Error=3]="Error"}(l||(l={}));class c{constructor(){this.sheets=[],this.onDateUpdated=new t,this.onReasonsUpdated=new t,this.onSheetUpdated=new t,this.onSheetsUpdated=new t,this.onSaveStatusUpdated=new t,this.saveHandle=-1,this.saving=!1,this.calculatingFlex=!1,this.fetchingSheets=!1,this.reasons=[]}async initialize(){await this.fetchSheets(),await this.fetchReasons(),this.onSaveStatusUpdated.fire(l.Saved)}async fetchSheets(){var t,n;await o.until((()=>!this.fetchingSheets)),this.fetchingSheets=!0,this.sheets=[];const a=await r.sheets();for(const s of a.employeeSheets){const a=null!==(t=e.parse(s.cycleStartDate))&&void 0!==t?t:0,o=null!==(n=e.parse(s.cycleEndDate))&&void 0!==n?n:0,i={id:s.id,status:s.status,start:a,end:o,dates:[],locked:s.locked,hoursPerDay:0};this.sheets.push(i)}this.sheets.sort(((e,t)=>t.start-e.start)),this.onSheetsUpdated.fire(this.sheets),this.fetchingSheets=!1}async fetchReasons(){this.reasons=(await r.metadata()).timeLogEntryReason.values,this.onReasonsUpdated.fire(this.reasons)}async fetchSheet(t){var a;const s=this.sheets.find((e=>e.id===t));if(!s)return;const o=await r.attendance(t);s.hoursPerDay=o.summary.potentialWorkingHours/o.summary.potentialWorkingDays,s.dates=[];for(const t of o.attendance){const o={dirty:!1,date:null!==(a=e.parse(t.date))&&void 0!==a?a:Date.now(),nonWorkingDay:"WeekendEvent"===t.status||"ApproveTimeoffRequest"===t.status,hoursToWork:s.hoursPerDay,favorited:!1,dateDescription:t.note.description,entries:t.entries.map((a=>{var s,o,i,r,l;return{startHour:n.floor(((null!==(s=e.parse(a.start))&&void 0!==s?s:Date.now())-(null!==(o=e.parse(t.date))&&void 0!==o?o:Date.now()))/36e5,2),lengthHours:n.ceil(((null!==(i=e.parse(a.end))&&void 0!==i?i:Date.now())-(null!==(r=e.parse(a.start))&&void 0!==r?r:Date.now()))/36e5,2),reasonId:a.reason,comment:null!==(l=a.comment)&&void 0!==l?l:null,hasComment:!!a.comment}})).sort(((e,t)=>e.startHour-t.startHour))};"number"==typeof t.paidTimeoffSeconds&&t.paidTimeoffSeconds>0?o.hoursToWork-=t.paidTimeoffSeconds/3600:o.nonWorkingDay&&(o.hoursToWork=0),s.dates.push(o)}s.dates.sort(((e,t)=>t.date-e.date));const i=await this.getFavoritedDate();i&&i.sheet===s&&(i.date.favorited=!0),this.onSheetUpdated.fire(s)}changeStartHour(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].startHour=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}changeLengthHours(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].lengthHours=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}changeReason(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].reasonId=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}changeComment(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].comment=n,e.entries[t].hasComment=!0,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}toggleComment(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries[t].hasComment=!e.entries[t].hasComment,e.entries[t].comment=e.entries[t].hasComment?"":null,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}async setFavoritedDate(t){const n=this.sheets.find((e=>e.dates.some((e=>e===t))));if(!n)return;const a=await this.getFavoritedDate();a&&(a.date.favorited=!1,this.onDateUpdated.fire(a)),t.favorited=!0,this.onDateUpdated.fire({sheet:n,date:t}),window.localStorage.setItem("tl_favorite",JSON.stringify({date:e.format(t.date,!1)}))}async getFavoritedDate(){const t=window.localStorage.getItem("tl_favorite");if(!t)return null;const n=JSON.parse(t),a=e.parse(n.date);if("number"==typeof a){const e=this.sheets.find((e=>e.start<=a&&e.end>=a));if(e){e.dates.length<1&&await this.fetchSheet(e.id);const t=e.dates.find((e=>e.date===a));if(t)return{sheet:e,date:t}}}return null}deleteEntry(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries.splice(t,1),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}async findLastEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;let n=t.dates.indexOf(e),a=-1;for(let e=this.sheets.indexOf(t);e<this.sheets.length;e++){const t=this.sheets[e];for(t.dates.length<1&&await this.fetchSheet(t.id);n<t.dates.length;n++){const e=t.dates[n];if(e.entries.length>0)return a<0?e.entries[e.entries.length-1]:e.entries[a];a=0}n=0}}async newEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const a=await this.findLastEntry(e);let s=8.5,o=n.round(t.hoursPerDay,2),i="";a&&(e.entries.includes(a)&&(s=a.startHour+a.lengthHours,o=1),i=a.reasonId),e.entries.push({startHour:s,lengthHours:o,reasonId:i,comment:null,hasComment:!1}),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}async pasteFromStarred(e){if(e.entries.length>0)return;const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const n=await this.getFavoritedDate();if(n&&n.date!==e){for(const t of n.date.entries)e.entries.push({startHour:t.startHour,lengthHours:t.lengthHours,reasonId:t.reasonId,comment:t.comment,hasComment:t.hasComment});e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}}queueSave(){window.clearTimeout(this.saveHandle),this.saveHandle=window.setTimeout((()=>this.save()),500),this.onSaveStatusUpdated.fire(l.Waiting)}async save(){await o.until((()=>!this.saving)),this.saving=!0,this.onSaveStatusUpdated.fire(l.Saving);const e=o.for(100);let t=!1;for(const e of this.sheets)for(const n of e.dates)n.dirty&&(await r.submit(n.date,n.entries)?n.dirty=!1:t=!0);await e,this.onSaveStatusUpdated.fire(t?l.Error:l.Saved),this.saving=!1}getFlexPolicy(){return{previousDaysIncluded:28,flexWarningThreshold:21}}async clearSheetBalanceCache(){if(!this.sheets)return;const e=await r.getUserId();for(let t=0;t<this.sheets.length;t++){const n=this.sheets[t];if(!n)continue;const a=`tl_cached_hour_balances_${e}_${n.id}`;n.locked&&null!==window.localStorage.getItem(a)&&window.localStorage.removeItem(a)}}async getCachedBalances(){var t;const a={},s=await r.getUserId();for(let o=this.sheets.length-1;o>=0;o--){const i=this.sheets[o];if(!i)continue;let r=[];const l=`tl_cached_hour_balances_${s}_${i.id}`;if(i.locked&&null!==window.localStorage.getItem(l))r=JSON.parse(null!==(t=window.localStorage.getItem(l))&&void 0!==t?t:"[]");else{if(i.dates.length<1&&await this.fetchSheet(i.id),i.dates.some((e=>e.entries.length>0&&e.entries.some((e=>e.lengthHours>0)))))for(const e of i.dates){const t=n.sum(e.entries.map((e=>e.lengthHours)))-e.hoursToWork;r.push({date:e.date,balance:t})}i.locked&&i.id>0&&window.localStorage.setItem(l,JSON.stringify(r))}a[i.id.toString()]=r.map((t=>({date:t.date,dateString:e.format(t.date,!1),realBalance:t.balance,reallocatedBalance:n.round(t.balance,3)}))).sort(((e,t)=>e.date-t.date))}return a}async getFlexStatus(){var t,a,s;const i=this.getFlexPolicy(),r=null!==(t=e.parse(e.format(Date.now(),!1)))&&void 0!==t?t:0,l=null!==(a=e.parse(e.format(r-864e5*(i.previousDaysIncluded-1),!1)))&&void 0!==a?a:0,d=null!==(s=e.parse(e.format(r-864e5*(i.flexWarningThreshold-1),!1)))&&void 0!==s?s:0,c=[];let h=0;if(this.sheets){await o.until((()=>!this.calculatingFlex)),this.calculatingFlex=!0;const e=await this.getCachedBalances();for(let t=this.sheets.length-1;t>=0;t--){const n=e[this.sheets[t].id];n&&c.push(...n)}for(let e=0;e<c.length;e++){const t=c[e];for(let a=0;a<e&&0!==t.reallocatedBalance;a++){const e=c[a],s=Math.min(Math.abs(t.reallocatedBalance),Math.abs(e.reallocatedBalance));t.reallocatedBalance<0&&e.reallocatedBalance>0?(e.reallocatedBalance-=s,t.reallocatedBalance+=s):t.reallocatedBalance>0&&e.reallocatedBalance<0&&(e.reallocatedBalance+=s,t.reallocatedBalance-=s),e.reallocatedBalance=n.round(e.reallocatedBalance,3)}t.reallocatedBalance=n.round(t.reallocatedBalance,3)}h=n.sum(c.map((e=>n.round(e.reallocatedBalance,3)))),this.calculatingFlex=!1}return{balance:h,unbalancedDates:c.filter((e=>0!==e.reallocatedBalance)),overdueDates:c.filter((e=>0!==e.reallocatedBalance&&e.date<=l)),warningDates:c.filter((e=>0!==e.reallocatedBalance&&e.date<=d&&e.date>l))}}}class h{}h.buttons=[{className:"tl-settings-reload-locked-sheets-button",icon:"cached",text:"Reload Locked Sheets",title:"Recalculates flex balance for all locked sheets.",onClick:e=>{var t;return null===(t=e.model)||void 0===t?void 0:t.clearSheetBalanceCache().then((()=>e.updateBalance()))}}];class u{constructor(){this.sheetDropdownOptions=[],this.sheetDates=[],this.weekSums=[],this.reasons=[],this.onDarkModeChange=new t,window.timelog=this,this.addButton()}async addButton(){for(;;){const e=document.querySelector("div.app-content > app-top-bar.app-top-bar > div.actions");if(e){this.toggleButton=document.createElement("button"),this.toggleButton.className="tl-toggle-btn",this.toggleButton.appendChild(s.get("sentiment_very_satisfied")),this.toggleButton.title="HiBob Utilities",this.toggleButton.onclick=()=>this.toggleVisible(),e.appendChild(this.toggleButton),this.createUI(),await this.createModel(),"#tl-ui"===location.hash&&this.toggleVisible(),this.onDarkModeChange.fire(this.isDarkMode());break}await o.for(1)}}toggleVisible(){var e;this.timelogUIOuter&&("none"===this.timelogUIOuter.style.display?(this.timelogUIOuter.style.display="block",location.hash="#tl-ui",document.body.style.overflow="hidden",this.sheetContainer&&(this.sheetContainer.innerHTML=""),null===(e=this.model)||void 0===e||e.fetchSheets(),u.onShow.fire(this)):(this.timelogUIOuter.style.display="none",location.hash="",document.body.style.overflow="initial"))}isDarkMode(){return"true"===localStorage.getItem("tl_dark_mode")}toggleDarkMode(){this.isDarkMode()?localStorage.setItem("tl_dark_mode","false"):localStorage.setItem("tl_dark_mode","true"),this.onDarkModeChange.fire(this.isDarkMode())}createUI(){const e=document.createElement("style");e.innerHTML="\n.tl-toggle-btn\n{\n    border: none;\n    background: none;\n    font-size: 2em;\n}\n.tl-close-btn\n{\n    font-size: 2em;\n    position: absolute;\n    right: 5px;\n}\n.tl-ui\n{\n    position: fixed;\n    z-index: 1000;\n    inset: 0px;\n    background-color: white;\n    overflow-y: scroll;\n    padding: 10px;\n}        \n.tl-date\n{\n    margin-top: 10px;\n    padding: 10px;\n    border: 1px solid gray;\n    border-radius: 5px;\n}\n.tl-save-status, .tl-add-entry-btn\n{\n    margin-left: 10px;\n}\n.tl-entry\n{\n    margin-top: 5px;\n}\n.tl-entry > *\n{\n    margin-left: 5px;\n}\n.tl-entry > input[type=number]\n{\n    width: 50px;\n}\n.tl-entry > input[type=time]\n{\n    width: 75px;\n}\n.tl-save-status\n{\n    font-weight: bold;\n}\n.tl-sheet-select\n{\n    margin-left: 5px;\n}\n.tl-date-label\n{\n    font-weight: bold;\n}\n.tl-date-label.tl-date-label-weekend\n{\n    font-weight: initial;\n    font-style: italic;\n    color: gray;\n}\n.tl-entry-reason \n{\n    padding: 3px;\n}\n.tl-remove-entry-btn\n{\n    float: right;\n}\n.tl-week-seperator\n{\n    margin-top: 57px;\n}\n.tl-balance-label\n{\n    margin: 5px;\n    display: inline-block;\n}\n.tl-balance-help\n{\n    display: inline-block;\n    cursor: help;\n}\n\n.tl-ui-inner\n{\n    display: table;\n    margin-left: auto;\n    margin-right: auto;\n}\n.tl-ui-inner, .tl-week-seperator, .tl-date\n{\n    min-width: 650px;\n}\n.tl-entry-comment {\n    margin-top: 5px;\n    margin-bottom: 15px;\n    width: 100%;\n    display: none;\n}\n.tl-has-comment .tl-entry-comment\n{\n    display: block;\n}\n.tl-success\n{\n    color: #02B875;\n}\n.tl-warning\n{\n    color: #F0AF52;\n}\n.tl-danger\n{\n    color: #DA5652;\n}\n.tl-sum-hours\n{\n    position: absolute;\n    margin-top: -23px;\n}\n.tl-week-sum\n{\n    position: absolute;\n    margin-top: -57px;\n    text-decoration: underline;\n}\n.tl-ui button.tl-star-button, .tl-ui.tl-dark button.tl-star-button\n{\n    background: none;\n    border: none;\n    margin: 0;\n    padding: 0;\n}\n.tl-ui button.tl-star-button.tl-favorite, .tl-ui.tl-dark button.tl-star-button.tl-favorite\n{\n    color: #f1a00b;\n    opacity: 1;\n}\n.tl-paste-btn {\n    margin-left: 5px;\n    display: none;\n}\n.tl-has-favorite .tl-paste-btn:not(.tl-hide-favorite-button)\n{\n    display: inline-block;\n}\n.tl-show-on-hover\n{\n    opacity: 0;\n}\n.tl-date:hover .tl-show-on-hover\n{\n    opacity: 1;\n}\n.tl-no-reason-warning {\n    margin-left: 180px;\n    position: absolute;\n    margin-top: -22px;\n    font-weight: bold;\n    background-color: white;\n    user-select: none;\n    pointer-events: none;\n}\n.tl-no-reason-warning.tl-has-reason\n{\n    display: none;\n}\n.tl-clickable\n{\n    cursor: pointer;\n}\n.tl-dark-mode-btn {\n    position: fixed;\n    bottom: 5px;\n    right: 20px;\n}\n.tl-ui button\n{\n    background-color: #d9d9d9;\n    border: 1px solid gray;\n    border-radius: 5px;\n}\n.tl-ui button:hover\n{\n    background-color: #efebeb;\n}\n\n.tl-ui.tl-dark\n{\n    background-color: #1E1E1E;\n    color: white;\n}\n.tl-ui.tl-dark select, .tl-ui.tl-dark input {\n    color: white;\n    background-color: #252526;\n    border: 1px gray solid;\n    color-scheme: dark;\n}\n.tl-ui.tl-dark button\n{\n    background-color: #333333;\n    border: 1px solid #282828;\n    color: white;\n}\n.tl-ui.tl-dark button:hover\n{\n    background-color: #525252;\n}\n.tl-ui.tl-dark .tl-no-reason-warning\n{\n    background-color: #252526;\n}\n.tl-weekend-description {\n    color: gray;\n    font-style: italic;\n    float: right;\n    margin-top: 2px;\n    display: inline-block;\n    max-width: 400px;\n    overflow: hidden;\n    max-height: 35px;\n}\n.tl-weekend-description.tl-weekend-description-hidden\n{\n    display: none;\n}\n.tl-version-number {\n    position: fixed;\n    bottom: 5px;\n    left: 5px;\n}\n\n.tl-settings {\n    position: fixed;\n    inset: 0;\n    z-index: 100;\n}\n.tl-settings-back {\n    inset: 0;\n    position: absolute;\n    background-color: black;\n    opacity: 0.5;\n    cursor: pointer;\n}\n\n.tl-settings.tl-settings-hidden {\n    display: none;\n}\n\n.tl-settings-version {\n    margin: 5px 10px;\n    border-bottom: 1px solid gray;\n}\n\n.tl-settings-version:last-child {\n    border-bottom: 0;\n}\n\n.tl-settings-title {\n    font-weight: bold;\n    font-size: 1.25em;\n}\n.tl-settings-inner {\n    position: absolute;\n    background-color: white;\n    height: 70vh;\n    width: 90vw;\n    left: 5vw;\n    top: 15vh;\n    border: 1px solid gray;\n    border-radius: 10px;\n    padding: 10px;\n    overflow: auto;\n}\n.tl-settings-version button\n{\n    margin-left: 5px;\n    margin-bottom: 15px;\n}\n\n.tl-dark .tl-settings-inner\n{\n    background-color: #1a1a1a;\n}\n\n.tl-balance-warning\n{\n    font-size: 0.8em;\n    display: inline-block;\n    text-decoration: underline;\n    cursor: help;\n}\n.tl-hidden\n{\n    display: none;\n}\n\n.tl-no-entries-warning\n{\n    float: right;\n    font-weight: bold;\n}\n\n",document.body.appendChild(e),this.timelogUIOuter=document.createElement("div"),this.timelogUIOuter.className="tl-ui",this.timelogUIOuter.style.display="none",document.body.append(this.timelogUIOuter),this.timelogUIInner=document.createElement("div"),this.timelogUIInner.className="tl-ui-inner",this.timelogUIOuter.append(this.timelogUIInner);const t=document.createElement("button");t.className="tl-close-btn",t.appendChild(s.get("close")),t.onclick=()=>this.toggleVisible(),this.timelogUIInner.appendChild(t),this.darkModeButton=document.createElement("button"),this.darkModeButton.className="tl-dark-mode-btn",this.darkModeButton.onclick=()=>this.toggleDarkMode(),this.timelogUIInner.appendChild(this.darkModeButton),this.onDarkModeChange.on((e=>{var t,n;e?null===(t=this.timelogUIOuter)||void 0===t||t.classList.add("tl-dark"):null===(n=this.timelogUIOuter)||void 0===n||n.classList.remove("tl-dark"),this.darkModeButton&&(this.darkModeButton.innerHTML="",this.darkModeButton.append(e?s.get("light_mode"):s.get("dark_mode")))}),this);const n=this.createSettingsWindow();this.timelogUIInner.appendChild(n);const a=document.createElement("div");a.append(s.get("settings",!0)),a.append(" 1.1.12"),a.className="tl-version-number",a.onclick=()=>n.classList.remove("tl-settings-hidden"),a.style.cursor="pointer",a.style.textDecoration="underline",this.timelogUIInner.appendChild(a);const o=document.createElement("span");o.innerText="Sheet:",this.timelogUIInner.appendChild(o),this.sheetDropdown=document.createElement("select"),this.sheetDropdown.className="tl-sheet-select",this.sheetDropdown.onchange=()=>this.onSelectedSheetChange(),this.timelogUIInner.appendChild(this.sheetDropdown),this.saveStatus=document.createElement("span"),this.saveStatus.className="tl-save-status",this.saveStatus.onclick=()=>this.onSaveStatusClick(),this.timelogUIInner.append(this.saveStatus);const i=document.createElement("div");i.className="tl-balance",this.timelogUIInner.append(i),this.balanceLabel=document.createElement("div"),this.balanceLabel.innerText="Balance: ",this.balanceLabel.className="tl-balance-label",i.append(this.balanceLabel),this.balanceWarning=document.createElement("div"),this.balanceWarning.className="tl-balance-warning tl-warning tl-hidden",i.append(this.balanceWarning),this.sheetContainer=document.createElement("div"),this.sheetContainer.className="tl-sheet",this.timelogUIInner.appendChild(this.sheetContainer)}createSettingsWindow(){const e=document.createElement("div");e.className="tl-settings tl-settings-hidden";const t=document.createElement("div");t.className="tl-settings-back",e.append(t),t.onclick=()=>e.classList.add("tl-settings-hidden");const n=document.createElement("div");n.className="tl-settings-inner",e.append(n);const a=document.createElement("div");a.className="tl-settings-version",n.append(a);for(const e of h.buttons){const t=document.createElement("button");t.className=e.className,t.append(s.get(e.icon)),t.append(e.text),e.title&&(t.style.cursor="help"),t.title=e.title,t.onclick=()=>e.onClick(this),a.appendChild(t)}const o=[{version:"1.1.12 - 31/03/2023",text:["Removed april fools :)"]},{version:"1.1.11 - 21/01/2023",text:["Change expected hours to work on a day to show as a warning on empty days with expected hours."]},{version:"1.1.10 - 20/01/2023",text:["Show expected hours to work on a given day."]},{version:"1.1.9 - 04/11/2022",text:["Fix problem where changing user on HiBob would cause problems due to caching"]},{version:"1.1.8 - 04/11/2022",text:["Fixed issue where you couldn't make an entry have a length of 0 hours","On the warning of flex becoming too old, show how many hours are left to be flexed on that day"]},{version:"1.1.7 - 02/11/2022",text:['Removed the option to "fix" old flex, as this solution would break when switching devices.',"Please talk to HR if you need to clear time logged before october.","To fix old flex hours without taking time off, please talk to HR or Finance about a solution."]},{version:"1.1.6 - 26/10/2022",text:["Holidays are now shown in the alternative timelog UI","Holidays are considered in the flex time calculation."]},{version:"1.1.4 - 03/10/2022",text:["Added a warning when unbalanced flex days are close to expiring.","Added button to cancel old unbalanced flex for extraordinary situations","Added buttons to delete cached data in the settings menu."]},{version:"1.1.3 - 03/10/2022",text:["Fixed how flex hours is calculated.","A warning is shown if you have unbalanced flex days that are older than 28 days."]},{version:"1.1.2 - 03/10/2022",text:["Fixed problem where you couldn't log time on some days, where you were supposed to."]},{version:"1.1.1 - 30/09/2022",text:["Added changelog","Show descriptions on non-working days"]}];for(const e of o){const t=document.createElement("div");t.className="tl-settings-version",n.append(t);const a=document.createElement("div");a.className="tl-settings-title",a.innerText=e.version,t.append(a);const s=document.createElement("ul");s.className="tl-settings-list",t.append(s);for(const t of e.text){const e=document.createElement("li");e.innerText=t,s.append(e)}}return e}async createModel(){this.model&&(this.model.onDateUpdated.off(this.onDateUpdated,this),this.model.onReasonsUpdated.off(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.off(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.off(this.onSheetUpdated,this),this.model.onSheetsUpdated.off(this.onSheetsUpdated,this)),this.model=new c,this.model.onDateUpdated.on(this.onDateUpdated,this),this.model.onReasonsUpdated.on(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.on(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.on(this.onSheetUpdated,this),this.model.onSheetsUpdated.on(this.onSheetsUpdated,this),await this.model.initialize()}getDateContainer(e){if(this.selectedSheet===e.sheet&&this.sheetContainer){let t=this.sheetDates.find((t=>t.date===e.date));if(!t){if(t={date:e.date,parent:document.createElement("div"),title:document.createElement("span"),entries:[],starButton:document.createElement("button"),pasteButton:document.createElement("button"),weekendDescription:document.createElement("div"),noEntriesWarning:document.createElement("div")},this.sheetDates.push(t),t.parent.className="tl-date",this.sheetContainer.appendChild(t.parent),1===new Date(e.date.date).getDay()){const e=document.createElement("div");e.className="tl-week-seperator",this.sheetContainer.appendChild(e)}if(t.parent.append(t.starButton),t.starButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.setFavoritedDate(e.date)},t.starButton.className="tl-star-button tl-show-on-hover",t.starButton.title="Favorite Day",t.title.className="tl-date-label",t.title.innerText=new Date(e.date.date).toDateString(),e.date.nonWorkingDay&&t.title.classList.add("tl-date-label-weekend"),t.parent.append(t.title),t.weekendDescription.className="tl-weekend-description",t.parent.append(t.weekendDescription),t.noEntriesWarning.className="tl-no-entries-warning",t.parent.append(t.noEntriesWarning),!e.sheet.locked){const n=document.createElement("button");n.appendChild(s.get("add")),n.className="tl-add-entry-btn tl-show-on-hover",n.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.newEntry(e.date)},t.parent.append(n),t.pasteButton=document.createElement("button"),t.pasteButton.appendChild(s.get("switch_access_shortcut_add")),t.pasteButton.title="Paste from Favorite Day",t.pasteButton.className="tl-paste-btn tl-show-on-hover",t.pasteButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.pasteFromStarred(e.date)},t.parent.append(t.pasteButton)}this.addToWeekSum(t)}return t}return null}getEntryContainer(t,o,i){let r=o.entries.find((e=>e.entry===i));if(!r){r={entry:i,parent:document.createElement("div"),startHour:document.createElement("input"),endHour:document.createElement("input"),length:document.createElement("input"),reason:document.createElement("select"),comment:document.createElement("input"),commentButton:document.createElement("button"),noReasonWarning:document.createElement("div")},o.entries.push(r),r.parent.className="tl-entry",o.parent.appendChild(r.parent),r.startHour.type="time",r.startHour.className="tl-entry-start",t.sheet.locked&&(r.startHour.disabled=!0),r.startHour.onchange=()=>{var a,s,o;const l=i.startHour+i.lengthHours;null===(a=this.model)||void 0===a||a.changeStartHour(t.date,t.date.entries.indexOf(i),e.parseTimeTohours(null!==(s=null==r?void 0:r.startHour.value)&&void 0!==s?s:"08:00"));const d=n.round(l-i.startHour,2);null===(o=this.model)||void 0===o||o.changeLengthHours(t.date,t.date.entries.indexOf(i),d)},r.parent.appendChild(r.startHour);const l=document.createElement("span");l.className="tl-end-label",l.innerText="-",r.parent.appendChild(l),r.endHour.type="time",r.endHour.className="tl-entry-end",t.sheet.locked&&(r.endHour.disabled=!0),r.endHour.onchange=()=>{var a;if(null==r?void 0:r.endHour){const s=n.round(e.parseTimeTohours(r.endHour.value)-i.startHour,2);null===(a=this.model)||void 0===a||a.changeLengthHours(t.date,t.date.entries.indexOf(i),s)}},r.parent.appendChild(r.endHour),r.reason.onchange=()=>{var e,n;return null===(e=this.model)||void 0===e?void 0:e.changeReason(t.date,t.date.entries.indexOf(i),null!==(n=null==r?void 0:r.reason.value)&&void 0!==n?n:"")},t.sheet.locked&&(r.reason.disabled=!0),r.reason.className="tl-entry-reason",r.parent.appendChild(r.reason),this.updateReasonsDropdown(r.reason),1===o.entries.length&&(o.sumHours=document.createElement("span"),o.sumHours.className="tl-sum-hours",r.parent.append(o.sumHours)),r.length.type="number",r.length.className="tl-entry-length",r.length.step="0.01",t.sheet.locked&&(r.length.disabled=!0),r.length.onchange=()=>{var e;null===(e=this.model)||void 0===e||e.changeLengthHours(t.date,t.date.entries.indexOf(i),a.unscale(parseFloat((null==r?void 0:r.length.value)||"0")))},r.parent.appendChild(r.length);const d=document.createElement("span");if(d.className="tl-duration-label",d.innerText=a.getUnitName(),r.parent.appendChild(d),!t.sheet.locked){r.commentButton.className="tl-add-comment-btn tl-show-on-hover",r.commentButton.onclick=()=>{var e;return null===(e=this.model)||void 0===e?void 0:e.toggleComment(t.date,t.date.entries.indexOf(i))},r.parent.appendChild(r.commentButton);const e=document.createElement("button");e.appendChild(s.get("delete")),e.className="tl-remove-entry-btn tl-show-on-hover",e.onclick=()=>{var e;return null===(e=this.model)||void 0===e?void 0:e.deleteEntry(t.date,t.date.entries.indexOf(i))},r.parent.appendChild(e)}r.noReasonWarning.append(s.get("warning",!0)),r.noReasonWarning.append(" No reason selected!"),r.noReasonWarning.className="tl-no-reason-warning tl-warning tl-has-reason",r.parent.appendChild(r.noReasonWarning),r.comment.type="text",r.comment.placeholder="Write a note...",r.comment.title="Write a note...",r.comment.className="tl-entry-comment",t.sheet.locked&&(r.comment.disabled=!0),r.comment.onchange=()=>{var e,n;null===(e=this.model)||void 0===e||e.changeComment(t.date,t.date.entries.indexOf(i),null!==(n=null==r?void 0:r.comment.value)&&void 0!==n?n:"")},r.parent.appendChild(r.comment)}return r}addToWeekSum(e){if(this.weekSums.length<1||0===new Date(e.date.date).getDay()){const t={dates:[e],element:document.createElement("div")};t.element.className="tl-week-sum",this.weekSums.push(t),e.parent.appendChild(t.element),e.parent.style.marginTop="38px"}else this.weekSums[this.weekSums.length-1].dates.push(e)}onDateUpdated(t){var o,i,r;if(this.selectedSheet===t.sheet&&this.sheetContainer){let l=this.getDateContainer(t);if(l){for(const i of t.date.entries){let r=this.getEntryContainer(t,l,i);r.startHour.value=e.formatHour(i.startHour),r.length.value=n.round(a.scale(i.lengthHours),2).toString(),r.endHour.value=e.formatHour(i.startHour+i.lengthHours),r.reason.value=i.reasonId,r.comment.value=null!==(o=i.comment)&&void 0!==o?o:"",i.reasonId?r.noReasonWarning.classList.add("tl-has-reason"):r.noReasonWarning.classList.remove("tl-has-reason"),r.commentButton.title=i.hasComment?"Remove note":"Add note",r.commentButton.innerHTML="",r.commentButton.appendChild(s.get(i.hasComment?"speaker_notes_off":"speaker_notes")),i.hasComment?r.parent.classList.add("tl-has-comment"):r.parent.classList.remove("tl-has-comment")}const d=l.entries.filter((e=>!t.date.entries.find((t=>t===e.entry))));if(l.entries=l.entries.filter((e=>!d.includes(e))),d.forEach((e=>e.parent.remove())),l.sumHours){const e=n.sum(t.date.entries.map((e=>e.lengthHours)));l.sumHours.innerText=`${a.format(n.round(e,2))}`}if(l.starButton.innerHTML="",l.starButton.disabled=t.date.favorited,l.starButton.classList.remove("tl-favorite"),l.starButton.appendChild(s.get("star",t.date.favorited)),t.date.favorited&&l.starButton.classList.add("tl-favorite"),l.entries.length>0||l.date.favorited?l.pasteButton.classList.add("tl-hide-favorite-button"):l.pasteButton.classList.remove("tl-hide-favorite-button"),l.title.title=null!==(i=t.date.dateDescription)&&void 0!==i?i:"",t.date.nonWorkingDay&&t.date.entries.length<1?(l.weekendDescription.classList.remove("tl-weekend-description-hidden"),l.weekendDescription.innerText=null!==(r=t.date.dateDescription)&&void 0!==r?r:""):l.weekendDescription.classList.add("tl-weekend-description-hidden"),l.date.hoursToWork>0&&l.entries.length<1){l.noEntriesWarning.classList.remove("tl-hidden"),l.noEntriesWarning.classList.add("tl-warning");const e=n.sum(t.date.entries.map((e=>e.lengthHours)));l.noEntriesWarning.innerHTML="",l.noEntriesWarning.append(s.get("warning",!0)),l.noEntriesWarning.append(` ${n.round(a.scale(e),2)} / ${a.format(n.round(l.date.hoursToWork,2))}`)}else l.noEntriesWarning.classList.add("tl-hidden")}const d=this.weekSums.find((e=>e.dates.some((e=>e.date===t.date))));if(d){const t=n.sum(d.dates.map((e=>n.sum(e.entries.map((e=>e.entry.lengthHours)))))),s=n.sum(d.dates.map((e=>e.date.hoursToWork))),o=e.getWeekNumberFromDate(d.dates[0].date.date);d.element.innerHTML=`<b>Week ${o}</b>: ${n.round(a.scale(t),2)} / ${a.format(n.round(s,2))}`}}this.updateBalance()}updateReasonsDropdown(e){e.innerHTML="";for(const t of this.reasons){const n=document.createElement("option");n.value=t.serverId,n.innerText=t.value,e.appendChild(n)}}onReasonsUpdated(e){this.reasons=e;for(const e of this.sheetDates)for(const t of e.entries)this.updateReasonsDropdown(t.reason)}onSaveStatusUpdated(e){this.saveStatus&&(this.saveStatus.innerHTML="",this.saveStatus.classList.remove("tl-success"),this.saveStatus.classList.remove("tl-warning"),this.saveStatus.classList.remove("tl-clickable"),e===l.Saved&&(this.saveStatus.appendChild(s.get("cloud_done",!0)),this.saveStatus.append(" Saved"),this.saveStatus.classList.add("tl-success")),e===l.Waiting&&(this.saveStatus.appendChild(s.get("pending")),this.saveStatus.append(" Pending...")),e===l.Saving&&(this.saveStatus.appendChild(s.get("cloud_upload")),this.saveStatus.append(" Saving...")),e===l.Error&&(this.saveStatus.appendChild(s.get("cloud_off")),this.saveStatus.append(" Failed!"),this.saveStatus.classList.add("tl-warning"),this.saveStatus.classList.add("tl-clickable")))}onSaveStatusClick(){var e,t;(null===(e=this.saveStatus)||void 0===e?void 0:e.classList.contains("tl-clickable"))&&(null===(t=this.model)||void 0===t||t.save())}onSheetUpdated(e){if(this.sheetDropdown&&!this.sheetDropdownOptions.find((t=>t.sheet===e))){const t=document.createElement("option");t.value=e.id.toString(),t.innerText=`${new Date(e.start).toDateString()} - ${new Date(e.end).toDateString()}${e.locked?" (locked)":""}`,this.sheetDropdownOptions.push({sheet:e,element:t}),this.sheetDropdown.appendChild(t)}this.selectedSheet===e&&(this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[],this.weekSums=[]);for(const t of e.dates)this.onDateUpdated({sheet:e,date:t});this.updateBalance()}onSheetsUpdated(e){this.sheetDropdown&&(this.sheetDropdown.innerHTML=""),this.sheetDropdownOptions=[];for(const t of e)this.onSheetUpdated(t);this.onSelectedSheetChange()}onSelectedSheetChange(){var e;if(!this.sheetDropdown)return;this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[];const t=this.sheetDropdown.value;this.selectedSheet=null===(e=this.sheetDropdownOptions.find((e=>e.element.value===t)))||void 0===e?void 0:e.sheet,this.selectedSheet&&this.model&&this.model.fetchSheet(this.selectedSheet.id)}async updateBalance(){var t,o,i;if(!this.model||!this.balanceLabel||!this.selectedSheet)return;const r=await this.model.getFlexStatus(),l=n.round(r.balance,2);if(this.balanceLabel.innerText=`Flex: ${a.format(l)}${0===l?" 🥳":""}`,null===(t=this.balanceWarning)||void 0===t||t.classList.add("tl-hidden"),r.overdueDates.length+r.warningDates.length>0&&this.balanceWarning){const t=this.model.getFlexPolicy();this.balanceWarning.classList.remove("tl-hidden"),this.balanceWarning.innerHTML="",this.balanceWarning.append(s.get("warning",!0)),r.overdueDates.length>0?(this.balanceWarning.append(`You have ${r.overdueDates.length} unbalanced flex date${1===r.overdueDates.length?"":"s"} older than ${t.previousDaysIncluded} days!`),this.balanceWarning.title+=`Overdue dates: ${r.overdueDates.map((t=>e.format(t.date,!1))).join(", ")}`):r.warningDates.length>0&&this.balanceWarning.append(`${r.warningDates.length} unbalanced flex date${1===r.warningDates.length?"":"s"} will soon be older than ${t.previousDaysIncluded} days!`),this.balanceWarning.title="",r.overdueDates.length>0&&(this.balanceWarning.title+=`Overdue dates: ${r.overdueDates.map((t=>`${e.format(t.date,!1)} (${t.reallocatedBalance}h)`)).join(", ")}`),r.warningDates.length>0&&(this.balanceWarning.title+=`${this.balanceWarning.title.length>0?"\n":""}Soon overdue dates: ${r.warningDates.map((t=>`${e.format(t.date,!1)} (${t.reallocatedBalance}h)`)).join(", ")}`),this.balanceWarning.append(" "),this.balanceWarning.append(s.get("info",!1))}await this.model.getFavoritedDate()?null===(o=this.sheetContainer)||void 0===o||o.classList.add("tl-has-favorite"):null===(i=this.sheetContainer)||void 0===i||i.classList.remove("tl-has-favorite")}}u.onShow=new t,function(e){e[e.FixAll=0]="FixAll",e[e.FixLatest=1]="FixLatest"}(d||(d={})),class{static setAprilFoolsOptOut(e){window.localStorage.setItem("tl_april_fools_opt_out",JSON.stringify(e))}static getAprilFoolsOptOut(){var e;return JSON.parse(null!==(e=window.localStorage.getItem("tl_april_fools_opt_out"))&&void 0!==e?e:"false")}static setHasSeenPopup(e){window.localStorage.setItem("tl_april_fools_popup",JSON.stringify(e))}static hasSeenPopup(){var e;return JSON.parse(null!==(e=window.localStorage.getItem("tl_april_fools_popup"))&&void 0!==e?e:"false")}static isAprilFools(){return"#tl-aprilfools"===window.location.hash}static init(){this.isAprilFools()?(h.buttons.push({className:"",icon:"bolt",text:"Opt out of Teralightmeters",title:"April fools!",onClick:()=>{this.setAprilFoolsOptOut(!this.getAprilFoolsOptOut()),location.reload()}}),this.getAprilFoolsOptOut()||(a.scaling={unitGeneral:"teralightmeter(s)",unitPlural:"teralightmeters",unitSingular:"teralightmeter",scale:this.hour2TeralightmeterScaling()}),u.onShow.on((e=>this.showAprilFoolsPopup(e)),this)):(this.setAprilFoolsOptOut(!1),this.setHasSeenPopup(!1))}static showAprilFoolsPopup(e){var t;if(this.hasSeenPopup())return;const n=document.createElement("div");n.className="tl-settings",n.style.cursor="pointer";const a=document.createElement("div");a.className="tl-settings-back",n.append(a);const s=()=>{n.remove(),this.setHasSeenPopup(!0)};a.onclick=()=>s(),n.onclick=()=>s();const o=document.createElement("div");o.className="tl-settings-inner",n.append(o);const i=document.createElement("div");i.className="tl-settings-version",o.append(i);const r=(new Date).getMonth()<3;i.innerHTML=`<h1>Introducing: the Teralightmeter!</h1>\n        <h3>All hours logged will now be measured in a new time unit: the Teralightmeter - the time it takes for light to travel 1 000 000 000 000 meters!</h3>\n        <h3>This feature was made exclusively for your benefit, in no way related to ${r?"an upcoming date.":"today's date."}</h3>\n        <h3>We hope you enjoy 😉📅</h3>`,null===(t=e.timelogUIInner)||void 0===t||t.appendChild(n)}static hour2TeralightmeterScaling(){return 1.0792528488}}.init(),s.initialize(),new u,new class{constructor(){this.submitting=!1,this.createUI(),this.clockInButtonFinder()}createUI(){const e=document.createElement("style");e.innerHTML="\n.re-label\n{\n    font-size: 1.5em;\n    margin-bottom: 10px;\n}\n.re-reason-select\n{\n    padding: 5px;\n}\n.re-reason-ui\n{\n    z-index: 2000;\n    position: fixed;\n    inset: 0;\n    background-color: rgba(0,0,0,0.75);\n    padding-top: 45vh;\n    text-align: center;\n    color: white;\n    font-weight: bold;\n}\n.re-btn\n{\n    padding: 0 var(--button-padding-x, 15px);\n    min-width: 80px;\n    height: var(--button-size, 30px);\n    font-weight: 600;\n    font-size: var(--button-font-size, 12px);\n    font-family: var(--body-font-family);\n    border: 0;\n    border-radius: 4px;\n    margin: 5px;\n}\n.re-btn.re-primary\n{\n    color: var(--primary-bg-text-color, white);\n    background-color: var(--primary-600);\n}\n.re-btn.re-secondary\n{\n    color: var(--secondary-bg-text-color, #535353);\n    background-color: var(--secondary-600);\n}\n.re-blur\n{\n    filter: blur(2px);\n}\n.re-submitting .re-btn\n{\n    display: none;\n}\n.re-submitting-text\n{\n    display: none;\n    font-size: 1.5em;\n}\n.re-submitting .re-submitting-text\n{\n    display: block;\n}\n",document.body.append(e),this.reasonEnhancementUI=document.createElement("div"),this.reasonEnhancementUI.className="re-reason-ui",this.reasonEnhancementUI.style.display="none",document.body.appendChild(this.reasonEnhancementUI);const t=document.createElement("div");t.innerText="Choose Default Reason",t.className="re-label",this.reasonEnhancementUI.appendChild(t),this.reasonSelect=document.createElement("select"),this.reasonSelect.className="re-reason-select",this.reasonSelect.onchange=()=>this.saveDefaultReasonValue(),this.reasonEnhancementUI.appendChild(this.reasonSelect),this.reasonEnhancementUI.appendChild(document.createElement("br"));const n=document.createElement("button");n.className="re-cancel-btn re-btn re-secondary",n.innerText="Cancel",n.onclick=()=>this.cancel(),this.reasonEnhancementUI.appendChild(n);const a=document.createElement("button");a.className="re-submit-btn re-btn re-primary",a.innerText="Submit",a.onclick=()=>this.submit(),this.reasonEnhancementUI.appendChild(a);const s=document.createElement("div");s.className="re-submitting-text",s.innerText="Submitting...",this.reasonEnhancementUI.appendChild(s)}async clockInButtonFinder(){for(var e;;)this.findUnenhancedButtons("b-button.punch-clock-button, b-button.time-widget-clock-in-btn, b-button.time-widget-clock-out-btn").forEach((e=>this.enhanceClockInButton(e,d.FixLatest))),this.findUnenhancedButtons("b-button.quick-fix-apply-button").forEach((e=>this.enhanceClockInButton(e,d.FixAll))),this.appRoot||(this.appRoot=null!==(e=document.querySelector("app-root"))&&void 0!==e?e:void 0),await o.for(10)}findUnenhancedButtons(e){var t=[],n=document.querySelectorAll(e);for(const e of n)e.classList.contains("re-enhanced")||(e.classList.add("re-enhanced"),t.push(e));return t}enhanceClockInButton(e,t){e.addEventListener("click",(()=>this.showReasonFixer(t)))}saveDefaultReasonValue(){this.reasonSelect&&window.localStorage.setItem("re-last-reason",this.reasonSelect.value)}loadDefaultReasonValue(){var e;this.reasonSelect&&(this.reasonSelect.value=null!==(e=window.localStorage.getItem("re-last-reason"))&&void 0!==e?e:"")}async showReasonFixer(e){if(this.reasonEnhancementUI&&(await o.for(250),this.setUIVisible(!0),this.mode=e,this.reasonSelect)){const e=await r.metadata();this.reasonSelect.innerHTML="";for(const t of e.timeLogEntryReason.values){const e=document.createElement("option");e.value=t.serverId,e.innerText=t.value,this.reasonSelect.appendChild(e)}this.loadDefaultReasonValue()}}cancel(){this.setUIVisible(!1)}setUIVisible(e){this.reasonEnhancementUI&&(this.reasonEnhancementUI.style.display=e?"block":"none"),this.appRoot&&(e?this.appRoot.classList.add("re-blur"):this.appRoot.classList.remove("re-blur"))}async submit(){var e,t;await o.until((()=>!this.submitting)),this.submitting=!0,null===(e=this.reasonEnhancementUI)||void 0===e||e.classList.add("re-submitting"),this.mode===d.FixAll&&await this.fixAll(),this.mode===d.FixLatest&&await this.fixLatest(),this.setUIVisible(!1),null===(t=this.reasonEnhancementUI)||void 0===t||t.classList.remove("re-submitting"),this.submitting=!1}async fixAll(){if(!this.reasonSelect)return;const t=this.reasonSelect.value,n=await r.sheets();for(const a of n.employeeSheets){if(a.locked)continue;const n=await r.attendance(a.id);for(const a of n.attendance)if(a.entries.some((e=>!e.reason))){const n=e.parse(a.date);if("number"!=typeof n)continue;const s=a.entries.map((a=>{var s,o,i,r;return{startHour:((null!==(s=e.parse(a.start))&&void 0!==s?s:Date.now())-n)/36e5,lengthHours:a.end?((null!==(o=e.parse(a.end))&&void 0!==o?o:Date.now())-(null!==(i=e.parse(a.start))&&void 0!==i?i:Date.now()))/36e5:null,reasonId:a.reason||t,comment:null!==(r=a.comment)&&void 0!==r?r:null}}));await r.submit(n,s)}}}async fixLatest(){if(!this.reasonSelect)return;const t=this.reasonSelect.value;let n=null;const a=await r.sheets();for(const t of a.employeeSheets){if(t.locked)continue;const a=await r.attendance(t.id);for(const t of a.attendance){const a=e.parse(t.date);if("number"==typeof a&&(!n||a>n.date)){const s=t.entries.map((t=>{var n,s,o,i;return{startHour:((null!==(n=e.parse(t.start))&&void 0!==n?n:Date.now())-a)/36e5,lengthHours:t.end?((null!==(s=e.parse(t.end))&&void 0!==s?s:Date.now())-(null!==(o=e.parse(t.start))&&void 0!==o?o:Date.now()))/36e5:null,reasonId:t.reason,comment:null!==(i=t.comment)&&void 0!==i?i:null}}));n={date:a,entries:s}}}}if(n){for(const e of n.entries)e.reasonId=e.reasonId||t;await r.submit(n.date,n.entries)}}}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNJLElBQUssTUFBTXpMLEtBQVN5TCxFQUFPM1IsUUFFdkJrRyxFQUFNL0YsU0FBVytGLEVBQU0vRixVQUFZUyxRQUVqQ2IsRUFBTXlHLE9BQU9tTCxFQUFPNVgsS0FBTTRYLEVBQU8zUixRLENBRS9DLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9VdGlscy9EYXRlcy50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9VdGlscy9FdmVudEhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvTnVtYmVycy50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9VdGlscy9Ib3VyU2NhbGluZy50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9VdGlscy9NYXRlcmlhbEljb24udHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvV2FpdC50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9VdGlscy9BcGkudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvSGlCb2IvSGlCb2IudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVGltZWxvZy9UaW1lbG9nVHlwZXMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvUmVhc29uRW5oYW5jZW1lbnRzL1JlYXNvbnNFbmhhbmNlbWVudHMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVGltZWxvZy9UaW1lbG9nTW9kZWwudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVGltZWxvZy9UaW1lbG9nVUlTZXR0aW5nc0J1dHRvbnMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVGltZWxvZy9UaW1lbG9nVUkudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVGltZWxvZy9UaW1lbG9nQ3NzLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL0Z1bi9BcHJpbEZvb2xzLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1JlYXNvbkVuaGFuY2VtZW50cy9SZWFzb25FbmhhbmNlbWVudHNDc3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIERhdGVzXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgcGFyc2Uoc3RyOiBzdHJpbmcpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCFzdHIpIHJldHVybiBudWxsO1xyXG4gICAgICAgIGNvbnN0IHNwbGl0ID0gc3RyLnNwbGl0KFwiVFwiKTtcclxuICAgICAgICBpZiAoc3BsaXQubGVuZ3RoIDwgMikgc3BsaXQucHVzaChcIjAwOjAwXCIpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShzcGxpdC5qb2luKFwiVFwiKSkuZ2V0VGltZSgpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBmb3JtYXQodGltZTogbnVtYmVyLCBpbmNsdWRlVGltZXN0YW1wOiBib29sZWFuKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGltZSkgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRpbWUpO1xyXG4gICAgICAgIHJldHVybiBgJHtkYXRlLmdldEZ1bGxZZWFyKCl9LSR7KGRhdGUuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfS0ke2RhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfSR7aW5jbHVkZVRpbWVzdGFtcCA/IGBUJHtkYXRlLmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9OiR7ZGF0ZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9YCA6IFwiXCJ9YDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgZm9ybWF0SG91cihob3VyczogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGhvdXIgPSBNYXRoLmZsb29yKGhvdXJzICUgMjQpO1xyXG4gICAgICAgIGNvbnN0IG1pbnV0ZSA9IE1hdGgucm91bmQoKGhvdXJzIC0gaG91cikgKiA2MCk7XHJcbiAgICAgICAgcmV0dXJuIGAke2hvdXIudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9OiR7bWludXRlLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfWBcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0V2Vla051bWJlckZyb21EYXRlKHRpbWU6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHRpbWUpO1xyXG4gICAgICAgIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XHJcbiAgICAgICAgLy8gVGh1cnNkYXkgaW4gY3VycmVudCB3ZWVrIGRlY2lkZXMgdGhlIHllYXIuXHJcbiAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgMyAtIChkYXRlLmdldERheSgpICsgNikgJSA3KTtcclxuICAgICAgICAvLyBKYW51YXJ5IDQgaXMgYWx3YXlzIGluIHdlZWsgMS5cclxuICAgICAgICB2YXIgd2VlazEgPSBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIDAsIDQpO1xyXG4gICAgICAgIC8vIEFkanVzdCB0byBUaHVyc2RheSBpbiB3ZWVrIDEgYW5kIGNvdW50IG51bWJlciBvZiB3ZWVrcyBmcm9tIGRhdGUgdG8gd2VlazEuXHJcbiAgICAgICAgcmV0dXJuIDEgKyBNYXRoLnJvdW5kKCgoZGF0ZS5nZXRUaW1lKCkgLSB3ZWVrMS5nZXRUaW1lKCkpIC8gODY0MDAwMDBcclxuICAgICAgICAgICAgLSAzICsgKHdlZWsxLmdldERheSgpICsgNikgJSA3KSAvIDcpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBwYXJzZVRpbWVUb2hvdXJzKHRpbWU6IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzcGxpdCA9IHRpbWUuc3BsaXQoXCI6XCIpO1xyXG4gICAgICAgIHJldHVybiBwYXJzZUludChzcGxpdFswXSkgKyBwYXJzZUludChzcGxpdFsxXSkgLyA2MDtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBFdmVudEhhbmRsZXI8VD5cclxue1xyXG4gICAgcHJpdmF0ZSBoYW5kbGVyczogeyBoYW5kbGVyOiAodmFsOiBUKSA9PiB2b2lkLCBjb250ZXh0OiBhbnkgfVtdID0gW107XHJcbiAgICBwdWJsaWMgb24oaGFuZGxlcjogKHZhbDogVCkgPT4gdm9pZCwgY29udGV4dDogYW55KVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcnMucHVzaCh7IGhhbmRsZXIsIGNvbnRleHQgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb2ZmKGhhbmRsZXI6ICh2YWw6IFQpID0+IHZvaWQsIGNvbnRleHQ6IGFueSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLmhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5maWx0ZXIoaCA9PiBoLmhhbmRsZXIgIT09IGhhbmRsZXIgfHwgaC5jb250ZXh0ICE9PSBjb250ZXh0KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBmaXJlKHZhbDogVClcclxuICAgIHtcclxuICAgICAgICB0aGlzLmhhbmRsZXJzLmZvckVhY2goaCA9PiBoLmhhbmRsZXIuY2FsbChoLmNvbnRleHQsIHZhbCkpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIE51bWJlcnNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyByb3VuZChudW06IG51bWJlciwgZGVjaW1hbHM6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChudW0gKiAoMTAgKiogZGVjaW1hbHMpKSAvICgxMCAqKiBkZWNpbWFscyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGZsb29yKG51bTogbnVtYmVyLCBkZWNpbWFsczogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKG51bSAqICgxMCAqKiBkZWNpbWFscykpIC8gKDEwICoqIGRlY2ltYWxzKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgY2VpbChudW06IG51bWJlciwgZGVjaW1hbHM6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKG51bSAqICgxMCAqKiBkZWNpbWFscykpIC8gKDEwICoqIGRlY2ltYWxzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHN1bShhcnI6IG51bWJlcltdKVxyXG4gICAge1xyXG4gICAgICAgIGxldCB2YWwgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB2YWwgKz0gYXJyW2ldO1xyXG4gICAgICAgIHJldHVybiB2YWw7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBOdW1iZXJzIH0gZnJvbSBcIi4vTnVtYmVyc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEhvdXJTY2FsaW5nXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgc2NhbGluZyA9IHtcclxuICAgICAgICB1bml0R2VuZXJhbDogXCJob3VyKHMpXCIsXHJcbiAgICAgICAgdW5pdFBsdXJhbDogXCJob3Vyc1wiLFxyXG4gICAgICAgIHVuaXRTaW5ndWxhcjogXCJob3VyXCIsXHJcbiAgICAgICAgc2NhbGU6IDFcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgc2NhbGUoaG91cnM6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gaG91cnMgKiB0aGlzLnNjYWxpbmcuc2NhbGU7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIHVuc2NhbGUoc2NhbGVkOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHNjYWxlZCAvIHRoaXMuc2NhbGluZy5zY2FsZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0VW5pdE5hbWUoaG91cnM6IG51bWJlciB8IG51bGwgPSBudWxsKVxyXG4gICAge1xyXG4gICAgICAgIGlmIChob3VycyA9PT0gbnVsbCkgcmV0dXJuIHRoaXMuc2NhbGluZy51bml0R2VuZXJhbDtcclxuICAgICAgICBpZiAoaG91cnMgPT09IDEpIHJldHVybiB0aGlzLnNjYWxpbmcudW5pdFNpbmd1bGFyO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNjYWxpbmcudW5pdFBsdXJhbDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgZm9ybWF0KGhvdXJzOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIGAke051bWJlcnMucm91bmQodGhpcy5zY2FsZShob3VycyksIDIpfSAke3RoaXMuZ2V0VW5pdE5hbWUoaG91cnMpfWA7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgYWJzdHJhY3QgY2xhc3MgTWF0ZXJpYWxJY29uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgaW5pdGlhbGl6ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xyXG4gICAgICAgIGxpbmsuaHJlZiA9IFwiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1NYXRlcmlhbCtTeW1ib2xzK091dGxpbmVkOm9wc3osd2dodCxGSUxMLEdSQURAMjAuLjQ4LDEwMC4uNzAwLDAuLjEsLTUwLi4yMDBcIjtcclxuICAgICAgICBsaW5rLnJlbCA9IFwic3R5bGVzaGVldFwiO1xyXG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluayk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGdldChpY29uOiBzdHJpbmcsIGZpbGw6IGJvb2xlYW4gPSBmYWxzZSlcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSBgbWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZGA7XHJcbiAgICAgICAgc3Bhbi5pbm5lclRleHQgPSBpY29uO1xyXG4gICAgICAgIHNwYW4uc3R5bGUudmVydGljYWxBbGlnbiA9IFwibWlkZGxlXCI7XHJcbiAgICAgICAgc3Bhbi5zdHlsZS5mb250U2l6ZSA9IFwiMS41ZW1cIjtcclxuICAgICAgICBzcGFuLnN0eWxlLmZvbnRWYXJpYXRpb25TZXR0aW5ncyA9IGAnRklMTCcgJHtmaWxsID8gMSA6IDB9YDtcclxuICAgICAgICByZXR1cm4gc3BhbjtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBXYWl0XHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgZm9yKG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+XHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KHJlc29sdmUgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoKSwgbXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyB1bnRpbChkZWxlZ2F0ZTogKCkgPT4gYm9vbGVhbilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4ocmVzb2x2ZSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgaGFuZGxlID0gd2luZG93LnNldEludGVydmFsKCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChkZWxlZ2F0ZSgpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChoYW5kbGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAxKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBBcGlcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyB4aHIobWV0aG9kOiBcIkdFVFwiIHwgXCJQT1NUXCIsIHVybDogc3RyaW5nLCBib2R5OiBvYmplY3QpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHsgc3RhdHVzOiBudW1iZXIsIGJvZHk6IGFueSB9PihyZXNvbHZlID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsKTtcclxuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xyXG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XHJcbiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogeGhyLnJlc3BvbnNlVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyAhPT0gMjAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5oYXNPd25Qcm9wZXJ0eShcImVycm9yXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSByZXN1bHQuaGFzT3duUHJvcGVydHkoXCJrZXlcIikgPyByZXN1bHQua2V5IDogeGhyLnN0YXR1cy50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoYEhpQm9iIFV0aWxzOiBFcnJvciAke2tleX0gLSAke3Jlc3VsdC5lcnJvcn1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBIaUJvYiBVdGlsczogRXJyb3IgJHt4aHIuc3RhdHVzfSAtIGNoZWNrIHRoZSBkZXZlbG9wZXIgY29uc29sZSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgSGlCb2IgVXRpbHM6IEVycm9yICR7eGhyLnN0YXR1c30uYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHhocik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHhoci5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShib2R5KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBBcGkgfSBmcm9tIFwiLi4vVXRpbHMvQXBpXCI7XHJcbmltcG9ydCB7IERhdGVzIH0gZnJvbSBcIi4uL1V0aWxzL0RhdGVzXCI7XHJcbmltcG9ydCB7IEhpQm9iQXR0ZW5kYW5jZSwgSGlCb2JNZXRhZGF0YSwgSGlCb2JTaGVldHMsIEhpQm9iU3VibWl0RW50cnksIEhpQm9iVXNlciB9IGZyb20gXCIuL0hpQm9iVHlwZXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBIaUJvYlxyXG57XHJcbiAgICBwcml2YXRlIHN0YXRpYyB1c2VySWQ6IHN0cmluZyB8IG51bGw7XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIHN1Ym1pdChkYXRlOiBudW1iZXIsIGVudHJpZXM6IEhpQm9iU3VibWl0RW50cnlbXSk6IFByb21pc2U8Ym9vbGVhbj5cclxuICAgIHtcclxuICAgICAgICBpZiAoZW50cmllcy5zb21lKGUgPT4gIWUucmVhc29uSWQpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJXQVJOSU5HOiBTT01FIEVOVFJJRVMgSEFWRSBOTyBSRUFTT04gU0VUIC0gTk9UIFNVQk1JVFRJTkchIVwiLCBkYXRlLCBlbnRyaWVzKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBkYXRhID0gZW50cmllcy5tYXAoZSA9PiB7IHJldHVybiB7IHN0YXJ0OiBEYXRlcy5mb3JtYXQoZGF0ZSArIGUuc3RhcnRIb3VyICogMzYwMCAqIDEwMDAsIHRydWUpLCBlbmQ6IHR5cGVvZiBlLmxlbmd0aEhvdXJzID09PSBcIm51bWJlclwiID8gRGF0ZXMuZm9ybWF0KGRhdGUgKyAoZS5zdGFydEhvdXIgKyBlLmxlbmd0aEhvdXJzKSAqIDM2MDAgKiAxMDAwLCB0cnVlKSA6IHVuZGVmaW5lZCwgcmVhc29uOiBlLnJlYXNvbklkLCBjb21tZW50OiBlLmNvbW1lbnQgPz8gdW5kZWZpbmVkIH0gfSk7XHJcbiAgICAgICAgY29uc3QgZGF0ZVN0ciA9IERhdGVzLmZvcm1hdChkYXRlLCBmYWxzZSk7XHJcbiAgICAgICAgY29uc3QgdXNlcklkID0gYXdhaXQgdGhpcy5nZXRVc2VySWQoKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiUE9TVFwiLCBgaHR0cHM6Ly9hcHAuaGlib2IuY29tL2FwaS9hdHRlbmRhbmNlL2VtcGxveWVlcy8ke3VzZXJJZH0vYXR0ZW5kYW5jZS9lbnRyaWVzP2ZvckRhdGU9JHtkYXRlU3RyfWAsIGRhdGEpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuc3RhdHVzID09PSAyMDA7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIHRpbWVsb2dSZWFzb25zKCk6IFByb21pc2U8eyBpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcgfVtdPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXdhaXQgdGhpcy5tZXRhZGF0YSgpO1xyXG4gICAgICAgIHJldHVybiBtZXRhZGF0YS50aW1lTG9nRW50cnlSZWFzb24udmFsdWVzLm1hcCh2ID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IHYuc2VydmVySWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiB2LnZhbHVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgYXR0ZW5kYW5jZShzaGVldDogbnVtYmVyKTogUHJvbWlzZTxIaUJvYkF0dGVuZGFuY2U+XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQXBpLnhocihcIkdFVFwiLCBgaHR0cHM6Ly9hcHAuaGlib2IuY29tL2FwaS9lbXBsb3llZXMvYXR0ZW5kYW5jZS9teS9zaGVldHMvJHtzaGVldH1gLCB7fSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5ib2R5O1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBzaGVldHMoKTogUHJvbWlzZTxIaUJvYlNoZWV0cz5cclxuICAgIHtcclxuICAgICAgICBjb25zdCB1c2VySWQgPSBhd2FpdCB0aGlzLmdldFVzZXJJZCgpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFwaS54aHIoXCJHRVRcIiwgYGh0dHBzOi8vYXBwLmhpYm9iLmNvbS9hcGkvZW1wbG95ZWVzLyR7dXNlcklkfS90aW1lbG9nL2F0dGVuZGFuY2Uvc2hlZXRzYCwge30pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuYm9keTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbWV0YWRhdGEoKTogUHJvbWlzZTxIaUJvYk1ldGFkYXRhPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFwaS54aHIoXCJHRVRcIiwgXCJodHRwczovL2FwcC5oaWJvYi5jb20vYXBpL2NvbXBhbnkvbWV0YWRhdGEvbGlzdHMvP2luY2x1ZGVBcmNoaXZlZD10cnVlXCIsIHt9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LmJvZHk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFVzZXJJZCgpOiBQcm9taXNlPHN0cmluZz5cclxuICAgIHtcclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMudXNlcklkICE9PSBcInN0cmluZ1wiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51c2VySW5mbygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy51c2VySWQgPz8gXCJcIjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgdXNlckluZm8oKTogUHJvbWlzZTxIaUJvYlVzZXI+XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQXBpLnhocihcIkdFVFwiLCBcImh0dHBzOi8vYXBwLmhpYm9iLmNvbS9hcGkvdXNlclwiLCB7fSk7XHJcbiAgICAgICAgdGhpcy51c2VySWQgPSAocmVzdWx0LmJvZHkgYXMgSGlCb2JVc2VyKS5pZDtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LmJvZHk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgaW50ZXJmYWNlIFRpbWVsb2dFbnRyeVxyXG57XHJcbiAgICBzdGFydEhvdXI6IG51bWJlcixcclxuICAgIGxlbmd0aEhvdXJzOiBudW1iZXIsXHJcbiAgICByZWFzb25JZDogc3RyaW5nLFxyXG4gICAgY29tbWVudDogc3RyaW5nIHwgbnVsbCxcclxuICAgIGhhc0NvbW1lbnQ6IGJvb2xlYW5cclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVsb2dEYXRlXHJcbntcclxuICAgIGRpcnR5OiBib29sZWFuLFxyXG4gICAgZGF0ZTogbnVtYmVyXHJcbiAgICBlbnRyaWVzOiBUaW1lbG9nRW50cnlbXSxcclxuICAgIG5vbldvcmtpbmdEYXk6IGJvb2xlYW4sXHJcbiAgICBob3Vyc1RvV29yazogbnVtYmVyXHJcbiAgICBmYXZvcml0ZWQ6IGJvb2xlYW4sXHJcbiAgICBkYXRlRGVzY3JpcHRpb24/OiBzdHJpbmdcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVsb2dTaGVldFxyXG57XHJcbiAgICBpZDogbnVtYmVyLFxyXG4gICAgc3RhdHVzOiBzdHJpbmcsXHJcbiAgICBzdGFydDogbnVtYmVyLFxyXG4gICAgZW5kOiBudW1iZXJcclxuICAgIGRhdGVzOiBUaW1lbG9nRGF0ZVtdLFxyXG4gICAgbG9ja2VkOiBib29sZWFuLFxyXG4gICAgaG91cnNQZXJEYXk6IG51bWJlclxyXG59XHJcbmV4cG9ydCBlbnVtIFRpbWVsb2dTYXZlU3RhdHVzXHJcbntcclxuICAgIFdhaXRpbmcsXHJcbiAgICBTYXZpbmcsXHJcbiAgICBTYXZlZCxcclxuICAgIEVycm9yXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lTG9nRmF2b3JpdGVkRGF0ZVxyXG57XHJcbiAgICBkYXRlOiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nRmxleERhdGVcclxue1xyXG4gICAgZGF0ZTogbnVtYmVyLFxyXG4gICAgZGF0ZVN0cmluZzogc3RyaW5nLFxyXG4gICAgcmVhbEJhbGFuY2U6IG51bWJlcixcclxuICAgIHJlYWxsb2NhdGVkQmFsYW5jZTogbnVtYmVyXHJcbn1cclxuXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVsb2dVSURhdGUgXHJcbntcclxuICAgIGRhdGU6IFRpbWVsb2dEYXRlLFxyXG4gICAgcGFyZW50OiBIVE1MRGl2RWxlbWVudCxcclxuICAgIHRpdGxlOiBIVE1MU3BhbkVsZW1lbnQsXHJcbiAgICBlbnRyaWVzOiBUaW1lbG9nVUlFbnRyeUNvbnRhaW5lcltdLFxyXG4gICAgc3VtSG91cnM/OiBIVE1MU3BhbkVsZW1lbnQsXHJcbiAgICBzdGFyQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCxcclxuICAgIHBhc3RlQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCxcclxuICAgIHdlZWtlbmREZXNjcmlwdGlvbjogSFRNTERpdkVsZW1lbnQsXHJcbiAgICBub0VudHJpZXNXYXJuaW5nOiBIVE1MRGl2RWxlbWVudCxcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVsb2dVSUVudHJ5Q29udGFpbmVyXHJcbntcclxuICAgIGVudHJ5OiBUaW1lbG9nRW50cnksXHJcbiAgICBwYXJlbnQ6IEhUTUxEaXZFbGVtZW50LFxyXG4gICAgc3RhcnRIb3VyOiBIVE1MSW5wdXRFbGVtZW50LFxyXG4gICAgbGVuZ3RoOiBIVE1MSW5wdXRFbGVtZW50LFxyXG4gICAgcmVhc29uOiBIVE1MU2VsZWN0RWxlbWVudCxcclxuICAgIGVuZEhvdXI6IEhUTUxJbnB1dEVsZW1lbnQsXHJcbiAgICBjb21tZW50OiBIVE1MSW5wdXRFbGVtZW50LFxyXG4gICAgY29tbWVudEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQsXHJcbiAgICBub1JlYXNvbldhcm5pbmc6IEhUTUxEaXZFbGVtZW50XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nVUlXZWVrU3VtXHJcbntcclxuICAgIGRhdGVzOiBUaW1lbG9nVUlEYXRlW10sXHJcbiAgICBlbGVtZW50OiBIVE1MRGl2RWxlbWVudFxyXG59IiwiaW1wb3J0IHsgSGlCb2IgfSBmcm9tIFwiLi4vSGlCb2IvSGlCb2JcIjtcclxuaW1wb3J0IHsgSGlCb2JTdWJtaXRFbnRyeSB9IGZyb20gXCIuLi9IaUJvYi9IaUJvYlR5cGVzXCI7XHJcbmltcG9ydCB7IERhdGVzIH0gZnJvbSBcIi4uL1V0aWxzL0RhdGVzXCI7XHJcbmltcG9ydCB7IFdhaXQgfSBmcm9tIFwiLi4vVXRpbHMvV2FpdFwiO1xyXG5pbXBvcnQgeyBSZWFzb25FbmhhbmNlbWVudENzcyB9IGZyb20gXCIuL1JlYXNvbkVuaGFuY2VtZW50c0Nzc1wiO1xyXG5cclxuZXhwb3J0IGVudW0gUmVhc29uRW5oYW5jZW1lbnRNb2RlXHJcbntcclxuICAgIEZpeEFsbCxcclxuICAgIEZpeExhdGVzdCxcclxufVxyXG5leHBvcnQgY2xhc3MgUmVhc29uRW5oYW5jZW1lbnRzXHJcbntcclxuICAgIHByaXZhdGUgcmVhc29uRW5oYW5jZW1lbnRVST86IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSByZWFzb25TZWxlY3Q/OiBIVE1MU2VsZWN0RWxlbWVudDtcclxuICAgIHByaXZhdGUgYXBwUm9vdD86IEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHN1Ym1pdHRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICBwcml2YXRlIG1vZGU/OiBSZWFzb25FbmhhbmNlbWVudE1vZGU7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLmNyZWF0ZVVJKCk7XHJcbiAgICAgICAgdGhpcy5jbG9ja0luQnV0dG9uRmluZGVyKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNyZWF0ZVVJKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcclxuICAgICAgICBzdHlsZS5pbm5lckhUTUwgPSBSZWFzb25FbmhhbmNlbWVudENzcztcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChzdHlsZSk7XHJcblxyXG5cclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5jbGFzc05hbWUgPSBcInJlLXJlYXNvbi11aVwiO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkpO1xyXG5cclxuICAgICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgbGFiZWwuaW5uZXJUZXh0ID0gXCJDaG9vc2UgRGVmYXVsdCBSZWFzb25cIjtcclxuICAgICAgICBsYWJlbC5jbGFzc05hbWUgPSBcInJlLWxhYmVsXCI7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKGxhYmVsKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWFzb25TZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xyXG4gICAgICAgIHRoaXMucmVhc29uU2VsZWN0LmNsYXNzTmFtZSA9IFwicmUtcmVhc29uLXNlbGVjdFwiO1xyXG4gICAgICAgIHRoaXMucmVhc29uU2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4gdGhpcy5zYXZlRGVmYXVsdFJlYXNvblZhbHVlKCk7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKHRoaXMucmVhc29uU2VsZWN0KTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmNsYXNzTmFtZSA9IFwicmUtY2FuY2VsLWJ0biByZS1idG4gcmUtc2Vjb25kYXJ5XCI7XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmlubmVyVGV4dCA9IFwiQ2FuY2VsXCJcclxuICAgICAgICBjYW5jZWxCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuY2FuY2VsKCk7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKGNhbmNlbEJ1dHRvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgc3VibWl0QnV0dG9uLmNsYXNzTmFtZSA9IFwicmUtc3VibWl0LWJ0biByZS1idG4gcmUtcHJpbWFyeVwiO1xyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5pbm5lclRleHQgPSBcIlN1Ym1pdFwiXHJcbiAgICAgICAgc3VibWl0QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnN1Ym1pdCgpO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChzdWJtaXRCdXR0b24pO1xyXG5cclxuXHJcbiAgICAgICAgY29uc3Qgc3VibWl0dGluZ1RleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHN1Ym1pdHRpbmdUZXh0LmNsYXNzTmFtZSA9IFwicmUtc3VibWl0dGluZy10ZXh0XCI7XHJcbiAgICAgICAgc3VibWl0dGluZ1RleHQuaW5uZXJUZXh0ID0gXCJTdWJtaXR0aW5nLi4uXCJcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuYXBwZW5kQ2hpbGQoc3VibWl0dGluZ1RleHQpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBjbG9ja0luQnV0dG9uRmluZGVyKClcclxuICAgIHtcclxuICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjbG9ja0luQnV0dG9ucyA9IHRoaXMuZmluZFVuZW5oYW5jZWRCdXR0b25zKFwiYi1idXR0b24ucHVuY2gtY2xvY2stYnV0dG9uLCBiLWJ1dHRvbi50aW1lLXdpZGdldC1jbG9jay1pbi1idG4sIGItYnV0dG9uLnRpbWUtd2lkZ2V0LWNsb2NrLW91dC1idG5cIik7XHJcbiAgICAgICAgICAgIGNsb2NrSW5CdXR0b25zLmZvckVhY2goZSA9PiB0aGlzLmVuaGFuY2VDbG9ja0luQnV0dG9uKGUsIFJlYXNvbkVuaGFuY2VtZW50TW9kZS5GaXhMYXRlc3QpKTtcclxuICAgICAgICAgICAgdmFyIHF1aWNrRml4QnV0dG9uID0gdGhpcy5maW5kVW5lbmhhbmNlZEJ1dHRvbnMoXCJiLWJ1dHRvbi5xdWljay1maXgtYXBwbHktYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICBxdWlja0ZpeEJ1dHRvbi5mb3JFYWNoKGUgPT4gdGhpcy5lbmhhbmNlQ2xvY2tJbkJ1dHRvbihlLCBSZWFzb25FbmhhbmNlbWVudE1vZGUuRml4QWxsKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuYXBwUm9vdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBSb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImFwcC1yb290XCIpID8/IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhd2FpdCBXYWl0LmZvcigxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBmaW5kVW5lbmhhbmNlZEJ1dHRvbnMoc2VsZWN0b3I6IHN0cmluZyk6IEVsZW1lbnRbXVxyXG4gICAge1xyXG4gICAgICAgIHZhciBhcnIgPSBbXSBhcyBFbGVtZW50W107XHJcbiAgICAgICAgdmFyIHF1ZXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XHJcbiAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHF1ZXJ5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInJlLWVuaGFuY2VkXCIpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJyZS1lbmhhbmNlZFwiKTtcclxuICAgICAgICAgICAgICAgIGFyci5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcnI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBlbmhhbmNlQ2xvY2tJbkJ1dHRvbihidXR0b246IEVsZW1lbnQsIG1vZGU6IFJlYXNvbkVuaGFuY2VtZW50TW9kZSlcclxuICAgIHtcclxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuc2hvd1JlYXNvbkZpeGVyKG1vZGUpKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgc2F2ZURlZmF1bHRSZWFzb25WYWx1ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvblNlbGVjdCkgcmV0dXJuO1xyXG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInJlLWxhc3QtcmVhc29uXCIsIHRoaXMucmVhc29uU2VsZWN0LnZhbHVlKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgbG9hZERlZmF1bHRSZWFzb25WYWx1ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvblNlbGVjdCkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMucmVhc29uU2VsZWN0LnZhbHVlID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicmUtbGFzdC1yZWFzb25cIikgPz8gXCJcIjtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgc2hvd1JlYXNvbkZpeGVyKG1vZGU6IFJlYXNvbkVuaGFuY2VtZW50TW9kZSlcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVhc29uRW5oYW5jZW1lbnRVSSkgcmV0dXJuO1xyXG4gICAgICAgIGF3YWl0IFdhaXQuZm9yKDI1MCk7XHJcbiAgICAgICAgdGhpcy5zZXRVSVZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcclxuICAgICAgICBpZiAodGhpcy5yZWFzb25TZWxlY3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCByZWFzb25zID0gYXdhaXQgSGlCb2IubWV0YWRhdGEoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWFzb25TZWxlY3QuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgZm9yIChjb25zdCByZWFzb24gb2YgcmVhc29ucy50aW1lTG9nRW50cnlSZWFzb24udmFsdWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gcmVhc29uLnNlcnZlcklkO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLmlubmVyVGV4dCA9IHJlYXNvbi52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVhc29uU2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5sb2FkRGVmYXVsdFJlYXNvblZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjYW5jZWwoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuc2V0VUlWaXNpYmxlKGZhbHNlKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgc2V0VUlWaXNpYmxlKHZhbHVlOiBib29sZWFuKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICAgICAgZWxzZSB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5hcHBSb290KVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgdGhpcy5hcHBSb290LmNsYXNzTGlzdC5hZGQoXCJyZS1ibHVyXCIpO1xyXG4gICAgICAgICAgICBlbHNlIHRoaXMuYXBwUm9vdC5jbGFzc0xpc3QucmVtb3ZlKFwicmUtYmx1clwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIHN1Ym1pdCgpXHJcbiAgICB7XHJcbiAgICAgICAgYXdhaXQgV2FpdC51bnRpbCgoKSA9PiAhdGhpcy5zdWJtaXR0aW5nKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdWJtaXR0aW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUk/LmNsYXNzTGlzdC5hZGQoXCJyZS1zdWJtaXR0aW5nXCIpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tb2RlID09PSBSZWFzb25FbmhhbmNlbWVudE1vZGUuRml4QWxsKSBhd2FpdCB0aGlzLmZpeEFsbCgpO1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgPT09IFJlYXNvbkVuaGFuY2VtZW50TW9kZS5GaXhMYXRlc3QpIGF3YWl0IHRoaXMuZml4TGF0ZXN0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0VUlWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUk/LmNsYXNzTGlzdC5yZW1vdmUoXCJyZS1zdWJtaXR0aW5nXCIpO1xyXG5cclxuICAgICAgICB0aGlzLnN1Ym1pdHRpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgZml4QWxsKClcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVhc29uU2VsZWN0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgcmVhc29uID0gdGhpcy5yZWFzb25TZWxlY3QudmFsdWU7XHJcbiAgICAgICAgY29uc3Qgc2hlZXRzID0gYXdhaXQgSGlCb2Iuc2hlZXRzKCk7XHJcbiAgICAgICAgZm9yIChjb25zdCBzaGVldCBvZiBzaGVldHMuZW1wbG95ZWVTaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoc2hlZXQubG9ja2VkKSBjb250aW51ZTtcclxuICAgICAgICAgICAgY29uc3QgYXR0ZW5kYW5jZSA9IGF3YWl0IEhpQm9iLmF0dGVuZGFuY2Uoc2hlZXQuaWQpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2YgYXR0ZW5kYW5jZS5hdHRlbmRhbmNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZS5lbnRyaWVzLnNvbWUoZSA9PiAhZS5yZWFzb24pKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBEYXRlcy5wYXJzZShkYXRlLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGltZSAhPT0gXCJudW1iZXJcIikgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW50cmllczogSGlCb2JTdWJtaXRFbnRyeVtdID0gZGF0ZS5lbnRyaWVzLm1hcChlID0+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRIb3VyOiAoKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpIC0gdGltZSkgLyAoMzYwMCAqIDEwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoSG91cnM6IGUuZW5kID8gKChEYXRlcy5wYXJzZShlLmVuZCkgPz8gRGF0ZS5ub3coKSkgLSAoRGF0ZXMucGFyc2UoZS5zdGFydCkgPz8gRGF0ZS5ub3coKSkpIC8gKDM2MDAgKiAxMDAwKSA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb25JZDogZS5yZWFzb24gfHwgcmVhc29uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDogZS5jb21tZW50ID8/IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBIaUJvYi5zdWJtaXQodGltZSwgZW50cmllcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGZpeExhdGVzdCgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvblNlbGVjdCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHJlYXNvbiA9IHRoaXMucmVhc29uU2VsZWN0LnZhbHVlO1xyXG4gICAgICAgIGxldCBsYXRlc3Q6IHsgZGF0ZTogbnVtYmVyLCBlbnRyaWVzOiBIaUJvYlN1Ym1pdEVudHJ5W10gfSB8IG51bGwgPSBudWxsO1xyXG4gICAgICAgIGNvbnN0IHNoZWV0cyA9IGF3YWl0IEhpQm9iLnNoZWV0cygpO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2hlZXQgb2Ygc2hlZXRzLmVtcGxveWVlU2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHNoZWV0LmxvY2tlZCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGF0dGVuZGFuY2UgPSBhd2FpdCBIaUJvYi5hdHRlbmRhbmNlKHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIGF0dGVuZGFuY2UuYXR0ZW5kYW5jZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IERhdGVzLnBhcnNlKGRhdGUuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWUgIT09IFwibnVtYmVyXCIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFsYXRlc3QgfHwgdGltZSA+IGxhdGVzdC5kYXRlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudHJpZXM6IEhpQm9iU3VibWl0RW50cnlbXSA9IGRhdGUuZW50cmllcy5tYXAoZSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0SG91cjogKChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSAtIHRpbWUpIC8gKDM2MDAgKiAxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aEhvdXJzOiBlLmVuZCA/ICgoRGF0ZXMucGFyc2UoZS5lbmQpID8/IERhdGUubm93KCkpIC0gKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpKSAvICgzNjAwICogMTAwMCkgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uSWQ6IGUucmVhc29uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDogZS5jb21tZW50ID8/IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBsYXRlc3QgPSB7IGRhdGU6IHRpbWUsIGVudHJpZXM6IGVudHJpZXMgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGF0ZXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBsYXRlc3QuZW50cmllcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZW50cnkucmVhc29uSWQgPSBlbnRyeS5yZWFzb25JZCB8fCByZWFzb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgSGlCb2Iuc3VibWl0KGxhdGVzdC5kYXRlLCBsYXRlc3QuZW50cmllcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgSGlCb2IgfSBmcm9tIFwiLi4vSGlCb2IvSGlCb2JcIjtcclxuaW1wb3J0IHsgSGlCb2JSZWFzb24gfSBmcm9tIFwiLi4vSGlCb2IvSGlCb2JUeXBlc1wiO1xyXG5pbXBvcnQgeyBEYXRlcyB9IGZyb20gXCIuLi9VdGlscy9EYXRlc1wiO1xyXG5pbXBvcnQgeyBFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi4vVXRpbHMvRXZlbnRIYW5kbGVyXCI7XHJcbmltcG9ydCB7IE51bWJlcnMgfSBmcm9tIFwiLi4vVXRpbHMvTnVtYmVyc1wiO1xyXG5pbXBvcnQgeyBXYWl0IH0gZnJvbSBcIi4uL1V0aWxzL1dhaXRcIjtcclxuaW1wb3J0IHsgVGltZWxvZ1NoZWV0LCBUaW1lbG9nRGF0ZSwgVGltZWxvZ1NhdmVTdGF0dXMsIFRpbWVMb2dGYXZvcml0ZWREYXRlLCBUaW1lbG9nRmxleERhdGUgfSBmcm9tIFwiLi9UaW1lbG9nVHlwZXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUaW1lbG9nTW9kZWxcclxue1xyXG4gICAgcHVibGljIHNoZWV0czogVGltZWxvZ1NoZWV0W10gPSBbXTtcclxuICAgIHB1YmxpYyBvbkRhdGVVcGRhdGVkID0gbmV3IEV2ZW50SGFuZGxlcjx7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGRhdGU6IFRpbWVsb2dEYXRlIH0+KCk7XHJcbiAgICBwdWJsaWMgb25SZWFzb25zVXBkYXRlZCA9IG5ldyBFdmVudEhhbmRsZXI8SGlCb2JSZWFzb25bXT4oKTtcclxuICAgIHB1YmxpYyBvblNoZWV0VXBkYXRlZCA9IG5ldyBFdmVudEhhbmRsZXI8VGltZWxvZ1NoZWV0PigpO1xyXG4gICAgcHVibGljIG9uU2hlZXRzVXBkYXRlZCA9IG5ldyBFdmVudEhhbmRsZXI8VGltZWxvZ1NoZWV0W10+KCk7XHJcbiAgICBwdWJsaWMgb25TYXZlU3RhdHVzVXBkYXRlZCA9IG5ldyBFdmVudEhhbmRsZXI8VGltZWxvZ1NhdmVTdGF0dXM+KCk7XHJcbiAgICBwcml2YXRlIHNhdmVIYW5kbGU6IG51bWJlciA9IC0xO1xyXG4gICAgcHJpdmF0ZSBzYXZpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgY2FsY3VsYXRpbmdGbGV4OiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGZldGNoaW5nU2hlZXRzID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIHJlYXNvbnM6IEhpQm9iUmVhc29uW10gPSBbXTtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpXHJcbiAgICB7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgaW5pdGlhbGl6ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5mZXRjaFNoZWV0cygpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hSZWFzb25zKCk7XHJcbiAgICAgICAgdGhpcy5vblNhdmVTdGF0dXNVcGRhdGVkLmZpcmUoVGltZWxvZ1NhdmVTdGF0dXMuU2F2ZWQpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGZldGNoU2hlZXRzKClcclxuICAgIHtcclxuICAgICAgICBhd2FpdCBXYWl0LnVudGlsKCgpID0+ICF0aGlzLmZldGNoaW5nU2hlZXRzKTtcclxuICAgICAgICB0aGlzLmZldGNoaW5nU2hlZXRzID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNoZWV0cyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNoZWV0cyA9IGF3YWl0IEhpQm9iLnNoZWV0cygpO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2hlZXQgb2Ygc2hlZXRzLmVtcGxveWVlU2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBEYXRlcy5wYXJzZShzaGVldC5jeWNsZVN0YXJ0RGF0ZSkgPz8gMDtcclxuICAgICAgICAgICAgY29uc3QgZW5kID0gRGF0ZXMucGFyc2Uoc2hlZXQuY3ljbGVFbmREYXRlKSA/PyAwO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdTaGVldCA9IHtcclxuICAgICAgICAgICAgICAgIGlkOiBzaGVldC5pZCxcclxuICAgICAgICAgICAgICAgIHN0YXR1czogc2hlZXQuc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgc3RhcnQsXHJcbiAgICAgICAgICAgICAgICBlbmQsXHJcbiAgICAgICAgICAgICAgICBkYXRlczogW10sXHJcbiAgICAgICAgICAgICAgICBsb2NrZWQ6IHNoZWV0LmxvY2tlZCxcclxuICAgICAgICAgICAgICAgIGhvdXJzUGVyRGF5OiAwXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuc2hlZXRzLnB1c2gobmV3U2hlZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNoZWV0cy5zb3J0KChhLCBiKSA9PiBiLnN0YXJ0IC0gYS5zdGFydCk7XHJcbiAgICAgICAgdGhpcy5vblNoZWV0c1VwZGF0ZWQuZmlyZSh0aGlzLnNoZWV0cyk7XHJcbiAgICAgICAgdGhpcy5mZXRjaGluZ1NoZWV0cyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGZldGNoUmVhc29ucygpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5yZWFzb25zID0gKGF3YWl0IEhpQm9iLm1ldGFkYXRhKCkpLnRpbWVMb2dFbnRyeVJlYXNvbi52YWx1ZXM7XHJcbiAgICAgICAgdGhpcy5vblJlYXNvbnNVcGRhdGVkLmZpcmUodGhpcy5yZWFzb25zKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBmZXRjaFNoZWV0KGlkOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5pZCA9PT0gaWQpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBjb25zdCBhdHRlbmRhbmNlID0gYXdhaXQgSGlCb2IuYXR0ZW5kYW5jZShpZCk7XHJcbiAgICAgICAgc2hlZXQuaG91cnNQZXJEYXkgPSBhdHRlbmRhbmNlLnN1bW1hcnkucG90ZW50aWFsV29ya2luZ0hvdXJzIC8gYXR0ZW5kYW5jZS5zdW1tYXJ5LnBvdGVudGlhbFdvcmtpbmdEYXlzO1xyXG4gICAgICAgIHNoZWV0LmRhdGVzID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIGF0dGVuZGFuY2UuYXR0ZW5kYW5jZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBEYXRlcy5wYXJzZShkYXRlLmRhdGUpID8/IERhdGUubm93KClcclxuICAgICAgICAgICAgY29uc3QgdmFsdWU6IFRpbWVsb2dEYXRlID0ge1xyXG4gICAgICAgICAgICAgICAgZGlydHk6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZGF0ZTogdGltZSxcclxuICAgICAgICAgICAgICAgIG5vbldvcmtpbmdEYXk6IGRhdGUuc3RhdHVzID09PSBcIldlZWtlbmRFdmVudFwiIHx8IGRhdGUuc3RhdHVzID09PSBcIkFwcHJvdmVUaW1lb2ZmUmVxdWVzdFwiLFxyXG4gICAgICAgICAgICAgICAgaG91cnNUb1dvcms6IHNoZWV0LmhvdXJzUGVyRGF5LFxyXG4gICAgICAgICAgICAgICAgZmF2b3JpdGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGRhdGVEZXNjcmlwdGlvbjogZGF0ZS5ub3RlLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgZW50cmllczogZGF0ZS5lbnRyaWVzLm1hcChlID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRIb3VyOiBOdW1iZXJzLmZsb29yKCgoRGF0ZXMucGFyc2UoZS5zdGFydCkgPz8gRGF0ZS5ub3coKSkgLSAoRGF0ZXMucGFyc2UoZGF0ZS5kYXRlKSA/PyBEYXRlLm5vdygpKSkgLyAoMzYwMCAqIDEwMDApLCAyKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoSG91cnM6IE51bWJlcnMuY2VpbCgoKERhdGVzLnBhcnNlKGUuZW5kKSA/PyBEYXRlLm5vdygpKSAtIChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSkgLyAoMzYwMCAqIDEwMDApLCAyKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uSWQ6IGUucmVhc29uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50OiBlLmNvbW1lbnQgPz8gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ29tbWVudDogISFlLmNvbW1lbnRcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSkuc29ydCgoYSwgYikgPT4gYS5zdGFydEhvdXIgLSBiLnN0YXJ0SG91cilcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRlLnBhaWRUaW1lb2ZmU2Vjb25kcyA9PT0gXCJudW1iZXJcIiAmJiBkYXRlLnBhaWRUaW1lb2ZmU2Vjb25kcyA+IDApIHZhbHVlLmhvdXJzVG9Xb3JrIC09IChkYXRlLnBhaWRUaW1lb2ZmU2Vjb25kcyAvICg2MCAqIDYwKSk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlLm5vbldvcmtpbmdEYXkpIHZhbHVlLmhvdXJzVG9Xb3JrID0gMDtcclxuICAgICAgICAgICAgc2hlZXQuZGF0ZXMucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNoZWV0LmRhdGVzLnNvcnQoKGEsIGIpID0+IGIuZGF0ZSAtIGEuZGF0ZSk7XHJcbiAgICAgICAgY29uc3QgZmF2b3JpdGUgPSBhd2FpdCB0aGlzLmdldEZhdm9yaXRlZERhdGUoKTtcclxuICAgICAgICBpZiAoZmF2b3JpdGUgJiYgZmF2b3JpdGUuc2hlZXQgPT09IHNoZWV0KVxyXG4gICAgICAgICAgICBmYXZvcml0ZS5kYXRlLmZhdm9yaXRlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5vblNoZWV0VXBkYXRlZC5maXJlKHNoZWV0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2hhbmdlU3RhcnRIb3VyKGRhdGU6IFRpbWVsb2dEYXRlLCBpbmRleDogbnVtYmVyLCBob3VyOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLnN0YXJ0SG91ciA9IGhvdXI7XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGNoYW5nZUxlbmd0aEhvdXJzKGRhdGU6IFRpbWVsb2dEYXRlLCBpbmRleDogbnVtYmVyLCBsZW5ndGg6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0ubGVuZ3RoSG91cnMgPSBsZW5ndGg7XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGNoYW5nZVJlYXNvbihkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlciwgcmVhc29uOiBzdHJpbmcpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLnJlYXNvbklkID0gcmVhc29uO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBjaGFuZ2VDb21tZW50KGRhdGU6IFRpbWVsb2dEYXRlLCBpbmRleDogbnVtYmVyLCBjb21tZW50OiBzdHJpbmcpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLmNvbW1lbnQgPSBjb21tZW50O1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0uaGFzQ29tbWVudCA9IHRydWU7XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHRvZ2dsZUNvbW1lbnQoZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLmhhc0NvbW1lbnQgPSAhZGF0ZS5lbnRyaWVzW2luZGV4XS5oYXNDb21tZW50O1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0uY29tbWVudCA9IGRhdGUuZW50cmllc1tpbmRleF0uaGFzQ29tbWVudCA/IFwiXCIgOiBudWxsO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBzZXRGYXZvcml0ZWREYXRlKGRhdGU6IFRpbWVsb2dEYXRlKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IG9sZEZhdm9yaXRlID0gYXdhaXQgdGhpcy5nZXRGYXZvcml0ZWREYXRlKCk7XHJcbiAgICAgICAgaWYgKG9sZEZhdm9yaXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgb2xkRmF2b3JpdGUuZGF0ZS5mYXZvcml0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUob2xkRmF2b3JpdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGF0ZS5mYXZvcml0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQ6IHNoZWV0LCBkYXRlOiBkYXRlIH0pO1xyXG5cclxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0bF9mYXZvcml0ZVwiLCBKU09OLnN0cmluZ2lmeSh7IGRhdGU6IERhdGVzLmZvcm1hdChkYXRlLmRhdGUsIGZhbHNlKSB9IGFzIFRpbWVMb2dGYXZvcml0ZWREYXRlKSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0RmF2b3JpdGVkRGF0ZSgpOiBQcm9taXNlPHsgc2hlZXQ6IFRpbWVsb2dTaGVldCwgZGF0ZTogVGltZWxvZ0RhdGUgfSB8IG51bGw+XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc3RyID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGxfZmF2b3JpdGVcIik7XHJcbiAgICAgICAgaWYgKCFzdHIpIHJldHVybiBudWxsO1xyXG4gICAgICAgIGNvbnN0IGZhdm9yaXRlOiBUaW1lTG9nRmF2b3JpdGVkRGF0ZSA9IEpTT04ucGFyc2Uoc3RyKTtcclxuICAgICAgICBjb25zdCB0aW1lID0gRGF0ZXMucGFyc2UoZmF2b3JpdGUuZGF0ZSk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aW1lID09PSBcIm51bWJlclwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5zdGFydCA8PSB0aW1lICYmIHMuZW5kID49IHRpbWUpO1xyXG4gICAgICAgICAgICBpZiAoc2hlZXQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChzaGVldC5kYXRlcy5sZW5ndGggPCAxKSBhd2FpdCB0aGlzLmZldGNoU2hlZXQoc2hlZXQuaWQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IHNoZWV0LmRhdGVzLmZpbmQoZCA9PiBkLmRhdGUgPT09IHRpbWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgc2hlZXQ6IHNoZWV0LCBkYXRlOiBkYXRlIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlbGV0ZUVudHJ5KGRhdGU6IFRpbWVsb2dEYXRlLCBpbmRleDogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBmaW5kTGFzdEVudHJ5KG9yaWdpbmFsRGF0ZTogVGltZWxvZ0RhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxTaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBvcmlnaW5hbERhdGUpKTtcclxuICAgICAgICBpZiAoIW9yaWdpbmFsU2hlZXQpIHJldHVybjtcclxuICAgICAgICBsZXQgZGF0ZUluZGV4ID0gb3JpZ2luYWxTaGVldC5kYXRlcy5pbmRleE9mKG9yaWdpbmFsRGF0ZSk7XHJcbiAgICAgICAgbGV0IGVudHJ5SW5kZXggPSAtMTtcclxuICAgICAgICBmb3IgKGxldCBzaGVldEluZGV4ID0gdGhpcy5zaGVldHMuaW5kZXhPZihvcmlnaW5hbFNoZWV0KTsgc2hlZXRJbmRleCA8IHRoaXMuc2hlZXRzLmxlbmd0aDsgc2hlZXRJbmRleCsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0c1tzaGVldEluZGV4XTtcclxuICAgICAgICAgICAgaWYgKHNoZWV0LmRhdGVzLmxlbmd0aCA8IDEpIGF3YWl0IHRoaXMuZmV0Y2hTaGVldChzaGVldC5pZCk7XHJcbiAgICAgICAgICAgIGZvciAoOyBkYXRlSW5kZXggPCBzaGVldC5kYXRlcy5sZW5ndGg7IGRhdGVJbmRleCsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlID0gc2hlZXQuZGF0ZXNbZGF0ZUluZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRlLmVudHJpZXMubGVuZ3RoID4gMCkgcmV0dXJuIGVudHJ5SW5kZXggPCAwID8gZGF0ZS5lbnRyaWVzW2RhdGUuZW50cmllcy5sZW5ndGggLSAxXSA6IGRhdGUuZW50cmllc1tlbnRyeUluZGV4XTtcclxuICAgICAgICAgICAgICAgIGVudHJ5SW5kZXggPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRhdGVJbmRleCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIG5ld0VudHJ5KGRhdGU6IFRpbWVsb2dEYXRlKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgbGFzdCA9IGF3YWl0IHRoaXMuZmluZExhc3RFbnRyeShkYXRlKTtcclxuICAgICAgICBsZXQgc3RhcnRIb3VyID0gOC41O1xyXG4gICAgICAgIGxldCBsZW5ndGhIb3VycyA9IE51bWJlcnMucm91bmQoc2hlZXQuaG91cnNQZXJEYXksIDIpO1xyXG4gICAgICAgIGxldCByZWFzb25JZCA9IFwiXCI7XHJcbiAgICAgICAgaWYgKGxhc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZGF0ZS5lbnRyaWVzLmluY2x1ZGVzKGxhc3QpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdGFydEhvdXIgPSBsYXN0LnN0YXJ0SG91ciArIGxhc3QubGVuZ3RoSG91cnM7XHJcbiAgICAgICAgICAgICAgICBsZW5ndGhIb3VycyA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVhc29uSWQgPSBsYXN0LnJlYXNvbklkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRlLmVudHJpZXMucHVzaCh7XHJcbiAgICAgICAgICAgIHN0YXJ0SG91cixcclxuICAgICAgICAgICAgbGVuZ3RoSG91cnMsXHJcbiAgICAgICAgICAgIHJlYXNvbklkLFxyXG4gICAgICAgICAgICBjb21tZW50OiBudWxsLFxyXG4gICAgICAgICAgICBoYXNDb21tZW50OiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBwYXN0ZUZyb21TdGFycmVkKGRhdGU6IFRpbWVsb2dEYXRlKVxyXG4gICAge1xyXG4gICAgICAgIGlmIChkYXRlLmVudHJpZXMubGVuZ3RoID4gMCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgZmF2b3JpdGUgPSBhd2FpdCB0aGlzLmdldEZhdm9yaXRlZERhdGUoKTtcclxuICAgICAgICBpZiAoIWZhdm9yaXRlIHx8IGZhdm9yaXRlLmRhdGUgPT09IGRhdGUpIHJldHVybjtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBmYXZvcml0ZS5kYXRlLmVudHJpZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBkYXRlLmVudHJpZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBzdGFydEhvdXI6IGVudHJ5LnN0YXJ0SG91cixcclxuICAgICAgICAgICAgICAgIGxlbmd0aEhvdXJzOiBlbnRyeS5sZW5ndGhIb3VycyxcclxuICAgICAgICAgICAgICAgIHJlYXNvbklkOiBlbnRyeS5yZWFzb25JZCxcclxuICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGVudHJ5LmNvbW1lbnQsXHJcbiAgICAgICAgICAgICAgICBoYXNDb21tZW50OiBlbnRyeS5oYXNDb21tZW50XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHF1ZXVlU2F2ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnNhdmVIYW5kbGUpO1xyXG4gICAgICAgIHRoaXMuc2F2ZUhhbmRsZSA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHRoaXMuc2F2ZSgpLCA1MDApO1xyXG4gICAgICAgIHRoaXMub25TYXZlU3RhdHVzVXBkYXRlZC5maXJlKFRpbWVsb2dTYXZlU3RhdHVzLldhaXRpbmcpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIHNhdmUoKVxyXG4gICAge1xyXG4gICAgICAgIGF3YWl0IFdhaXQudW50aWwoKCkgPT4gIXRoaXMuc2F2aW5nKTtcclxuICAgICAgICB0aGlzLnNhdmluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5vblNhdmVTdGF0dXNVcGRhdGVkLmZpcmUoVGltZWxvZ1NhdmVTdGF0dXMuU2F2aW5nKTtcclxuICAgICAgICBjb25zdCBtaW5pbXVtV2FpdCA9IFdhaXQuZm9yKDEwMCk7XHJcbiAgICAgICAgbGV0IGVycm9yID0gZmFsc2U7XHJcbiAgICAgICAgZm9yIChjb25zdCBzaGVldCBvZiB0aGlzLnNoZWV0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZGF0ZSBvZiBzaGVldC5kYXRlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGUuZGlydHkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgSGlCb2Iuc3VibWl0KGRhdGUuZGF0ZSwgZGF0ZS5lbnRyaWVzKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5kaXJ0eSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IG1pbmltdW1XYWl0O1xyXG4gICAgICAgIHRoaXMub25TYXZlU3RhdHVzVXBkYXRlZC5maXJlKGVycm9yID8gVGltZWxvZ1NhdmVTdGF0dXMuRXJyb3IgOiBUaW1lbG9nU2F2ZVN0YXR1cy5TYXZlZCk7XHJcbiAgICAgICAgdGhpcy5zYXZpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RmxleFBvbGljeSgpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHsgcHJldmlvdXNEYXlzSW5jbHVkZWQ6IDcgKiA0LCBmbGV4V2FybmluZ1RocmVzaG9sZDogNyAqIDMgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgY2xlYXJTaGVldEJhbGFuY2VDYWNoZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNoZWV0cykgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHVzZXJJZCA9IGF3YWl0IEhpQm9iLmdldFVzZXJJZCgpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zaGVldHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzW2ldO1xyXG4gICAgICAgICAgICBpZiAoIXNoZWV0KSBjb250aW51ZTtcclxuICAgICAgICAgICAgY29uc3QgY2FjaGVLZXkgPSBgdGxfY2FjaGVkX2hvdXJfYmFsYW5jZXNfJHt1c2VySWR9XyR7c2hlZXQuaWR9YDtcclxuICAgICAgICAgICAgaWYgKHNoZWV0LmxvY2tlZCAmJiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oY2FjaGVLZXkpICE9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oY2FjaGVLZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgZ2V0Q2FjaGVkQmFsYW5jZXMoKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBUaW1lbG9nRmxleERhdGVbXT4+XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXRzOiBSZWNvcmQ8c3RyaW5nLCBUaW1lbG9nRmxleERhdGVbXT4gPSB7fTtcclxuICAgICAgICBjb25zdCB1c2VySWQgPSBhd2FpdCBIaUJvYi5nZXRVc2VySWQoKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5zaGVldHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzW2ldO1xyXG4gICAgICAgICAgICBpZiAoIXNoZWV0KSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgIGxldCBzaGVldEJhbGFuY2VzOiB7IGRhdGU6IG51bWJlciwgYmFsYW5jZTogbnVtYmVyIH1bXSA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBjYWNoZUtleSA9IGB0bF9jYWNoZWRfaG91cl9iYWxhbmNlc18ke3VzZXJJZH1fJHtzaGVldC5pZH1gO1xyXG4gICAgICAgICAgICBpZiAoc2hlZXQubG9ja2VkICYmIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShjYWNoZUtleSkgIT09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNoZWV0QmFsYW5jZXMgPSBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShjYWNoZUtleSkgPz8gXCJbXVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChzaGVldC5kYXRlcy5sZW5ndGggPCAxKSBhd2FpdCB0aGlzLmZldGNoU2hlZXQoc2hlZXQuaWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNoZWV0LmRhdGVzLnNvbWUoZCA9PiBkLmVudHJpZXMubGVuZ3RoID4gMCAmJiBkLmVudHJpZXMuc29tZShlID0+IGUubGVuZ3RoSG91cnMgPiAwKSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBkYXkgb2Ygc2hlZXQuZGF0ZXMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JrZWRIb3VycyA9IE51bWJlcnMuc3VtKGRheS5lbnRyaWVzLm1hcChlID0+IGUubGVuZ3RoSG91cnMpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFsYW5jZSA9IHdvcmtlZEhvdXJzIC0gZGF5LmhvdXJzVG9Xb3JrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGVldEJhbGFuY2VzLnB1c2goeyBkYXRlOiBkYXkuZGF0ZSwgYmFsYW5jZSB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChzaGVldC5sb2NrZWQgJiYgc2hlZXQuaWQgPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShjYWNoZUtleSwgSlNPTi5zdHJpbmdpZnkoc2hlZXRCYWxhbmNlcykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNoZWV0c1tzaGVldC5pZC50b1N0cmluZygpXSA9IHNoZWV0QmFsYW5jZXMubWFwKGQgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiBkLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZVN0cmluZzogRGF0ZXMuZm9ybWF0KGQuZGF0ZSwgZmFsc2UpLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWxCYWxhbmNlOiBkLmJhbGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhbGxvY2F0ZWRCYWxhbmNlOiBOdW1iZXJzLnJvdW5kKGQuYmFsYW5jZSwgMylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkuc29ydCgoYSwgYikgPT4gYS5kYXRlIC0gYi5kYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNoZWV0cztcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBnZXRGbGV4U3RhdHVzKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBwb2xpY3kgPSB0aGlzLmdldEZsZXhQb2xpY3koKTtcclxuXHJcbiAgICAgICAgY29uc3QgY3VycmVudERhdGVUaW1lID0gRGF0ZXMucGFyc2UoRGF0ZXMuZm9ybWF0KERhdGUubm93KCksIGZhbHNlKSkgPz8gMDtcclxuICAgICAgICBjb25zdCBvdmVyZHVlRGF0ZVRpbWUgPSBEYXRlcy5wYXJzZShEYXRlcy5mb3JtYXQoY3VycmVudERhdGVUaW1lIC0gKDEwMDAgKiA2MCAqIDYwICogMjQgKiAocG9saWN5LnByZXZpb3VzRGF5c0luY2x1ZGVkIC0gMSkpLCBmYWxzZSkpID8/IDA7XHJcbiAgICAgICAgY29uc3Qgd2FybmluZ0RhdGVUaW1lID0gRGF0ZXMucGFyc2UoRGF0ZXMuZm9ybWF0KGN1cnJlbnREYXRlVGltZSAtICgxMDAwICogNjAgKiA2MCAqIDI0ICogKHBvbGljeS5mbGV4V2FybmluZ1RocmVzaG9sZCAtIDEpKSwgZmFsc2UpKSA/PyAwO1xyXG5cclxuICAgICAgICBjb25zdCBhbGxEYXRlczogVGltZWxvZ0ZsZXhEYXRlW10gPSBbXTtcclxuICAgICAgICBsZXQgYmFsYW5jZTogbnVtYmVyID0gMDtcclxuICAgICAgICBpZiAoISF0aGlzLnNoZWV0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGF3YWl0IFdhaXQudW50aWwoKCkgPT4gIXRoaXMuY2FsY3VsYXRpbmdGbGV4KTtcclxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGluZ0ZsZXggPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2hlZXRzID0gYXdhaXQgdGhpcy5nZXRDYWNoZWRCYWxhbmNlcygpO1xyXG5cclxuICAgICAgICAgICAgLy9DYWxjdWxhdGUgcmVtYWluaW5nIGJhbGFuY2VzIC8gY2FuY2VsbGVkIG91dCBiYWxhbmNlc1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5zaGVldHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNoZWV0ID0gc2hlZXRzW3RoaXMuc2hlZXRzW2ldLmlkXTtcclxuICAgICAgICAgICAgICAgIGlmIChzaGVldCkgYWxsRGF0ZXMucHVzaCguLi5zaGVldCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vUnVuIHRoZSByZWFsbG9jYXRpb24gYWxnb3JpdGhtXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsRGF0ZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBhbGxEYXRlc1tpXTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaTsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSA9PT0gMCkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldkRhdGUgPSBhbGxEYXRlc1tqXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbW91bnQgPSBNYXRoLm1pbihNYXRoLmFicyhkYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSksIE1hdGguYWJzKHByZXZEYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSA8IDAgJiYgcHJldkRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlID4gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZEYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSAtPSBhbW91bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlICs9IGFtb3VudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgPiAwICYmIHByZXZEYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2RGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgKz0gYW1vdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSAtPSBhbW91bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHByZXZEYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSA9IE51bWJlcnMucm91bmQocHJldkRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlLCAzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlID0gTnVtYmVycy5yb3VuZChkYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSwgMyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYmFsYW5jZSA9IE51bWJlcnMuc3VtKGFsbERhdGVzLm1hcChkID0+IE51bWJlcnMucm91bmQoZC5yZWFsbG9jYXRlZEJhbGFuY2UsIDMpKSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0aW5nRmxleCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBiYWxhbmNlLFxyXG4gICAgICAgICAgICB1bmJhbGFuY2VkRGF0ZXM6IGFsbERhdGVzLmZpbHRlcihkID0+IGQucmVhbGxvY2F0ZWRCYWxhbmNlICE9PSAwKSxcclxuICAgICAgICAgICAgb3ZlcmR1ZURhdGVzOiBhbGxEYXRlcy5maWx0ZXIoZCA9PiBkLnJlYWxsb2NhdGVkQmFsYW5jZSAhPT0gMCAmJiBkLmRhdGUgPD0gb3ZlcmR1ZURhdGVUaW1lKSxcclxuICAgICAgICAgICAgd2FybmluZ0RhdGVzOiBhbGxEYXRlcy5maWx0ZXIoZCA9PiBkLnJlYWxsb2NhdGVkQmFsYW5jZSAhPT0gMCAmJiBkLmRhdGUgPD0gd2FybmluZ0RhdGVUaW1lICYmIGQuZGF0ZSA+IG92ZXJkdWVEYXRlVGltZSlcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCB7IFRpbWVsb2dVSSB9IGZyb20gXCIuL1RpbWVsb2dVSVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRpbWVsb2dVSVNldHRpbmdzQnV0dG9uc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGJ1dHRvbnMgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjbGFzc05hbWU6IFwidGwtc2V0dGluZ3MtcmVsb2FkLWxvY2tlZC1zaGVldHMtYnV0dG9uXCIsXHJcbiAgICAgICAgICAgIGljb246IFwiY2FjaGVkXCIsXHJcbiAgICAgICAgICAgIHRleHQ6IFwiUmVsb2FkIExvY2tlZCBTaGVldHNcIixcclxuICAgICAgICAgICAgdGl0bGU6IFwiUmVjYWxjdWxhdGVzIGZsZXggYmFsYW5jZSBmb3IgYWxsIGxvY2tlZCBzaGVldHMuXCIsXHJcbiAgICAgICAgICAgIG9uQ2xpY2s6IHVpID0+IHVpLm1vZGVsPy5jbGVhclNoZWV0QmFsYW5jZUNhY2hlKCkudGhlbigoKSA9PiB1aS51cGRhdGVCYWxhbmNlKCkpXHJcbiAgICAgICAgfVxyXG4gICAgXSBhcyB7XHJcbiAgICAgICAgY2xhc3NOYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgaWNvbjogc3RyaW5nLFxyXG4gICAgICAgIHRleHQ6IHN0cmluZyxcclxuICAgICAgICB0aXRsZTogc3RyaW5nXHJcbiAgICAgICAgb25DbGljazogKHVpOiBUaW1lbG9nVUkpID0+IHZvaWRcclxuICAgIH1bXTtcclxufSIsImltcG9ydCB7IEhpQm9iUmVhc29uIH0gZnJvbSBcIi4uL0hpQm9iL0hpQm9iVHlwZXNcIjtcclxuaW1wb3J0IHsgRGF0ZXMgfSBmcm9tIFwiLi4vVXRpbHMvRGF0ZXNcIjtcclxuaW1wb3J0IHsgRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4uL1V0aWxzL0V2ZW50SGFuZGxlclwiO1xyXG5pbXBvcnQgeyBIb3VyU2NhbGluZyB9IGZyb20gXCIuLi9VdGlscy9Ib3VyU2NhbGluZ1wiO1xyXG5pbXBvcnQgeyBNYXRlcmlhbEljb24gfSBmcm9tIFwiLi4vVXRpbHMvTWF0ZXJpYWxJY29uXCI7XHJcbmltcG9ydCB7IE51bWJlcnMgfSBmcm9tIFwiLi4vVXRpbHMvTnVtYmVyc1wiO1xyXG5pbXBvcnQgeyBXYWl0IH0gZnJvbSBcIi4uL1V0aWxzL1dhaXRcIjtcclxuaW1wb3J0IHsgVGltZWxvZ0NzcyB9IGZyb20gXCIuL1RpbWVsb2dDc3NcIjtcclxuaW1wb3J0IHsgVGltZWxvZ01vZGVsIH0gZnJvbSBcIi4vVGltZWxvZ01vZGVsXCI7XHJcbmltcG9ydCB7IFRpbWVsb2dEYXRlLCBUaW1lbG9nRW50cnksIFRpbWVsb2dTYXZlU3RhdHVzLCBUaW1lbG9nU2hlZXQsIFRpbWVsb2dVSURhdGUgYXMgVGltZWxvZ1VJRGF0ZUNvbnRhaW5lciwgVGltZWxvZ1VJV2Vla1N1bSB9IGZyb20gXCIuL1RpbWVsb2dUeXBlc1wiO1xyXG5pbXBvcnQgeyBUaW1lbG9nVUlTZXR0aW5nc0J1dHRvbnMgfSBmcm9tIFwiLi9UaW1lbG9nVUlTZXR0aW5nc0J1dHRvbnNcIjtcclxuXHJcbmRlY2xhcmUgdmFyIEhJQk9CX1VUSUxTX1ZFUjogc3RyaW5nO1xyXG5kZWNsYXJlIHZhciBISUJPQl9VVElMU19DSEFOR0VMT0c6IHsgdmVyc2lvbjogc3RyaW5nLCB0ZXh0OiBzdHJpbmdbXSB9W107XHJcblxyXG5leHBvcnQgY2xhc3MgVGltZWxvZ1VJXHJcbntcclxuXHJcbiAgICBwcml2YXRlIHRpbWVsb2dVSU91dGVyPzogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwdWJsaWMgdGltZWxvZ1VJSW5uZXI/OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByaXZhdGUgdG9nZ2xlQnV0dG9uPzogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGRhcmtNb2RlQnV0dG9uPzogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICBwdWJsaWMgbW9kZWw/OiBUaW1lbG9nTW9kZWw7XHJcblxyXG4gICAgcHJpdmF0ZSBzaGVldERyb3Bkb3duPzogSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHNoZWV0RHJvcGRvd25PcHRpb25zOiB7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGVsZW1lbnQ6IEhUTUxPcHRpb25FbGVtZW50IH1bXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBzZWxlY3RlZFNoZWV0PzogVGltZWxvZ1NoZWV0O1xyXG5cclxuICAgIHByaXZhdGUgc2hlZXRDb250YWluZXI/OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByaXZhdGUgc2hlZXREYXRlczogVGltZWxvZ1VJRGF0ZUNvbnRhaW5lcltdID0gW107XHJcbiAgICBwcml2YXRlIHdlZWtTdW1zOiBUaW1lbG9nVUlXZWVrU3VtW10gPSBbXTtcclxuICAgIHByaXZhdGUgc2F2ZVN0YXR1cz86IEhUTUxTcGFuRWxlbWVudDtcclxuXHJcbiAgICBwcml2YXRlIGJhbGFuY2VMYWJlbD86IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBiYWxhbmNlV2FybmluZz86IEhUTUxEaXZFbGVtZW50O1xyXG5cclxuICAgIHByaXZhdGUgcmVhc29uczogSGlCb2JSZWFzb25bXSA9IFtdO1xyXG5cclxuICAgIHByaXZhdGUgb25EYXJrTW9kZUNoYW5nZSA9IG5ldyBFdmVudEhhbmRsZXI8Ym9vbGVhbj4oKTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIG9uU2hvdzogRXZlbnRIYW5kbGVyPFRpbWVsb2dVST4gPSBuZXcgRXZlbnRIYW5kbGVyKCk7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgICAgICAod2luZG93IGFzIGFueSkudGltZWxvZyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5hZGRCdXR0b24oKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgYWRkQnV0dG9uKClcclxuICAgIHtcclxuICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXYuYXBwLWNvbnRlbnQgPiBhcHAtdG9wLWJhci5hcHAtdG9wLWJhciA+IGRpdi5hY3Rpb25zXCIpO1xyXG4gICAgICAgICAgICBpZiAoIXBhcmVudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgV2FpdC5mb3IoMSk7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLXRvZ2dsZS1idG5cIjtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24uYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcInNlbnRpbWVudF92ZXJ5X3NhdGlzZmllZFwiKSk7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLnRpdGxlID0gXCJIaUJvYiBVdGlsaXRpZXNcIjtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMudG9nZ2xlVmlzaWJsZSgpO1xyXG4gICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy50b2dnbGVCdXR0b24pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVVSSgpO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVNb2RlbCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGxvY2F0aW9uLmhhc2ggPT09IFwiI3RsLXVpXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlVmlzaWJsZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9uRGFya01vZGVDaGFuZ2UuZmlyZSh0aGlzLmlzRGFya01vZGUoKSk7XHJcblxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHRvZ2dsZVZpc2libGUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy50aW1lbG9nVUlPdXRlcikgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVsb2dVSU91dGVyLnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5oYXNoID0gXCIjdGwtdWlcIjtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNoZWV0Q29udGFpbmVyKSB0aGlzLnNoZWV0Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWw/LmZldGNoU2hlZXRzKCk7XHJcbiAgICAgICAgICAgIFRpbWVsb2dVSS5vblNob3cuZmlyZSh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSBcIlwiO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJpbml0aWFsXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBpc0RhcmtNb2RlKClcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0bF9kYXJrX21vZGVcIikgPT09IFwidHJ1ZVwiO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSB0b2dnbGVEYXJrTW9kZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEYXJrTW9kZSgpKSBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRsX2RhcmtfbW9kZVwiLCBcImZhbHNlXCIpO1xyXG4gICAgICAgIGVsc2UgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0bF9kYXJrX21vZGVcIiwgXCJ0cnVlXCIpO1xyXG4gICAgICAgIHRoaXMub25EYXJrTW9kZUNoYW5nZS5maXJlKHRoaXMuaXNEYXJrTW9kZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVVJKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcclxuICAgICAgICBzdHlsZS5pbm5lckhUTUwgPSBUaW1lbG9nQ3NzO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3R5bGUpO1xyXG5cclxuICAgICAgICB0aGlzLnRpbWVsb2dVSU91dGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSU91dGVyLmNsYXNzTmFtZSA9IFwidGwtdWlcIjtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSU91dGVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZCh0aGlzLnRpbWVsb2dVSU91dGVyKTtcclxuXHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5jbGFzc05hbWUgPSBcInRsLXVpLWlubmVyXCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlci5hcHBlbmQodGhpcy50aW1lbG9nVUlJbm5lcik7XHJcblxyXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLWNsb3NlLWJ0blwiO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJjbG9zZVwiKSk7XHJcbiAgICAgICAgY2xvc2VCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMudG9nZ2xlVmlzaWJsZSgpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xyXG5cclxuICAgICAgICB0aGlzLmRhcmtNb2RlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICB0aGlzLmRhcmtNb2RlQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtZGFyay1tb2RlLWJ0blwiO1xyXG4gICAgICAgIHRoaXMuZGFya01vZGVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMudG9nZ2xlRGFya01vZGUoKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZENoaWxkKHRoaXMuZGFya01vZGVCdXR0b24pO1xyXG4gICAgICAgIHRoaXMub25EYXJrTW9kZUNoYW5nZS5vbigoZGFyaykgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkYXJrKSB0aGlzLnRpbWVsb2dVSU91dGVyPy5jbGFzc0xpc3QuYWRkKFwidGwtZGFya1wiKTtcclxuICAgICAgICAgICAgZWxzZSB0aGlzLnRpbWVsb2dVSU91dGVyPy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtZGFya1wiKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGFya01vZGVCdXR0b24pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGFya01vZGVCdXR0b24uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGFya01vZGVCdXR0b24uYXBwZW5kKGRhcmsgPyBNYXRlcmlhbEljb24uZ2V0KFwibGlnaHRfbW9kZVwiKSA6IE1hdGVyaWFsSWNvbi5nZXQoXCJkYXJrX21vZGVcIikpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2V0dGluc1dpbmRvdyA9IHRoaXMuY3JlYXRlU2V0dGluZ3NXaW5kb3coKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZENoaWxkKHNldHRpbnNXaW5kb3cpO1xyXG5cclxuICAgICAgICBjb25zdCBzZXR0aW5nc0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgc2V0dGluZ3NCdXR0b24uYXBwZW5kKE1hdGVyaWFsSWNvbi5nZXQoXCJzZXR0aW5nc1wiLCB0cnVlKSk7XHJcbiAgICAgICAgc2V0dGluZ3NCdXR0b24uYXBwZW5kKFwiIFwiICsgSElCT0JfVVRJTFNfVkVSKTtcclxuICAgICAgICBzZXR0aW5nc0J1dHRvbi5jbGFzc05hbWUgPSBcInRsLXZlcnNpb24tbnVtYmVyXCI7XHJcbiAgICAgICAgc2V0dGluZ3NCdXR0b24ub25jbGljayA9ICgpID0+IHNldHRpbnNXaW5kb3cuY2xhc3NMaXN0LnJlbW92ZShcInRsLXNldHRpbmdzLWhpZGRlblwiKTtcclxuICAgICAgICBzZXR0aW5nc0J1dHRvbi5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcclxuICAgICAgICBzZXR0aW5nc0J1dHRvbi5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9IFwidW5kZXJsaW5lXCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZChzZXR0aW5nc0J1dHRvbik7XHJcblxyXG5cclxuICAgICAgICBjb25zdCBzaGVldERyb3Bkb3duTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICBzaGVldERyb3Bkb3duTGFiZWwuaW5uZXJUZXh0ID0gXCJTaGVldDpcIjtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZENoaWxkKHNoZWV0RHJvcGRvd25MYWJlbCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2hlZXREcm9wZG93biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgdGhpcy5zaGVldERyb3Bkb3duLmNsYXNzTmFtZSA9IFwidGwtc2hlZXQtc2VsZWN0XCI7XHJcbiAgICAgICAgdGhpcy5zaGVldERyb3Bkb3duLm9uY2hhbmdlID0gKCkgPT4gdGhpcy5vblNlbGVjdGVkU2hlZXRDaGFuZ2UoKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZENoaWxkKHRoaXMuc2hlZXREcm9wZG93bik7XHJcblxyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXR1cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc05hbWUgPSBcInRsLXNhdmUtc3RhdHVzXCI7XHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm9uU2F2ZVN0YXR1c0NsaWNrKCk7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmQodGhpcy5zYXZlU3RhdHVzKTtcclxuXHJcbiAgICAgICAgY29uc3QgYmFsYW5jZVBhcmVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgYmFsYW5jZVBhcmVudC5jbGFzc05hbWUgPSBcInRsLWJhbGFuY2VcIjtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZChiYWxhbmNlUGFyZW50KTtcclxuXHJcbiAgICAgICAgdGhpcy5iYWxhbmNlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuYmFsYW5jZUxhYmVsLmlubmVyVGV4dCA9IFwiQmFsYW5jZTogXCI7XHJcbiAgICAgICAgdGhpcy5iYWxhbmNlTGFiZWwuY2xhc3NOYW1lID0gXCJ0bC1iYWxhbmNlLWxhYmVsXCI7XHJcbiAgICAgICAgYmFsYW5jZVBhcmVudC5hcHBlbmQodGhpcy5iYWxhbmNlTGFiZWwpO1xyXG5cclxuICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nLmNsYXNzTmFtZSA9IFwidGwtYmFsYW5jZS13YXJuaW5nIHRsLXdhcm5pbmcgdGwtaGlkZGVuXCI7XHJcbiAgICAgICAgYmFsYW5jZVBhcmVudC5hcHBlbmQodGhpcy5iYWxhbmNlV2FybmluZyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2hlZXRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuc2hlZXRDb250YWluZXIuY2xhc3NOYW1lID0gXCJ0bC1zaGVldFwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQodGhpcy5zaGVldENvbnRhaW5lcik7XHJcblxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjcmVhdGVTZXR0aW5nc1dpbmRvdygpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBcInRsLXNldHRpbmdzIHRsLXNldHRpbmdzLWhpZGRlblwiO1xyXG4gICAgICAgIGNvbnN0IGJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGJhY2suY2xhc3NOYW1lID0gXCJ0bC1zZXR0aW5ncy1iYWNrXCI7XHJcbiAgICAgICAgZWxlbWVudC5hcHBlbmQoYmFjayk7XHJcbiAgICAgICAgYmFjay5vbmNsaWNrID0gKCkgPT4gZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGwtc2V0dGluZ3MtaGlkZGVuXCIpO1xyXG5cclxuICAgICAgICBjb25zdCBpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgaW5uZXIuY2xhc3NOYW1lID0gXCJ0bC1zZXR0aW5ncy1pbm5lclwiO1xyXG4gICAgICAgIGVsZW1lbnQuYXBwZW5kKGlubmVyKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2V0dGluZ3NFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBzZXR0aW5nc0VsZW1lbnQuY2xhc3NOYW1lID0gXCJ0bC1zZXR0aW5ncy12ZXJzaW9uXCI7XHJcbiAgICAgICAgaW5uZXIuYXBwZW5kKHNldHRpbmdzRWxlbWVudCk7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIFRpbWVsb2dVSVNldHRpbmdzQnV0dG9ucy5idXR0b25zKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gYnV0dG9uLmNsYXNzTmFtZTtcclxuICAgICAgICAgICAgZWxlbWVudC5hcHBlbmQoTWF0ZXJpYWxJY29uLmdldChidXR0b24uaWNvbikpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmFwcGVuZChidXR0b24udGV4dCk7XHJcbiAgICAgICAgICAgIGlmIChidXR0b24udGl0bGUpIGVsZW1lbnQuc3R5bGUuY3Vyc29yID0gXCJoZWxwXCI7XHJcbiAgICAgICAgICAgIGVsZW1lbnQudGl0bGUgPSBidXR0b24udGl0bGU7XHJcbiAgICAgICAgICAgIGVsZW1lbnQub25jbGljayA9ICgpID0+IGJ1dHRvbi5vbkNsaWNrKHRoaXMpO1xyXG4gICAgICAgICAgICBzZXR0aW5nc0VsZW1lbnQuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjaGFuZ2Vsb2cgPSBISUJPQl9VVElMU19DSEFOR0VMT0c7XHJcbiAgICAgICAgZm9yIChjb25zdCB2ZXJzaW9uIG9mIGNoYW5nZWxvZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgdmVyc2lvbkVsZW1lbnQuY2xhc3NOYW1lID0gXCJ0bC1zZXR0aW5ncy12ZXJzaW9uXCI7XHJcbiAgICAgICAgICAgIGlubmVyLmFwcGVuZCh2ZXJzaW9uRWxlbWVudCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb25UaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIHZlcnNpb25UaXRsZS5jbGFzc05hbWUgPSBcInRsLXNldHRpbmdzLXRpdGxlXCI7XHJcbiAgICAgICAgICAgIHZlcnNpb25UaXRsZS5pbm5lclRleHQgPSB2ZXJzaW9uLnZlcnNpb247XHJcbiAgICAgICAgICAgIHZlcnNpb25FbGVtZW50LmFwcGVuZCh2ZXJzaW9uVGl0bGUpO1xyXG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xyXG4gICAgICAgICAgICBsaXN0LmNsYXNzTmFtZSA9IFwidGwtc2V0dGluZ3MtbGlzdFwiO1xyXG4gICAgICAgICAgICB2ZXJzaW9uRWxlbWVudC5hcHBlbmQobGlzdCk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdGV4dCBvZiB2ZXJzaW9uLnRleHQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gICAgICAgICAgICAgICAgdGV4dEVsZW1lbnQuaW5uZXJUZXh0ID0gdGV4dDtcclxuICAgICAgICAgICAgICAgIGxpc3QuYXBwZW5kKHRleHRFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlTW9kZWwoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGVsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5vbkRhdGVVcGRhdGVkLm9mZih0aGlzLm9uRGF0ZVVwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLm9uUmVhc29uc1VwZGF0ZWQub2ZmKHRoaXMub25SZWFzb25zVXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwub25TYXZlU3RhdHVzVXBkYXRlZC5vZmYodGhpcy5vblNhdmVTdGF0dXNVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5vblNoZWV0VXBkYXRlZC5vZmYodGhpcy5vblNoZWV0VXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwub25TaGVldHNVcGRhdGVkLm9mZih0aGlzLm9uU2hlZXRzVXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubW9kZWwgPSBuZXcgVGltZWxvZ01vZGVsKCk7XHJcbiAgICAgICAgdGhpcy5tb2RlbC5vbkRhdGVVcGRhdGVkLm9uKHRoaXMub25EYXRlVXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5tb2RlbC5vblJlYXNvbnNVcGRhdGVkLm9uKHRoaXMub25SZWFzb25zVXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5tb2RlbC5vblNhdmVTdGF0dXNVcGRhdGVkLm9uKHRoaXMub25TYXZlU3RhdHVzVXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5tb2RlbC5vblNoZWV0VXBkYXRlZC5vbih0aGlzLm9uU2hlZXRVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm1vZGVsLm9uU2hlZXRzVXBkYXRlZC5vbih0aGlzLm9uU2hlZXRzVXBkYXRlZCwgdGhpcyk7XHJcblxyXG4gICAgICAgIGF3YWl0IHRoaXMubW9kZWwuaW5pdGlhbGl6ZSgpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXREYXRlQ29udGFpbmVyKGRhdGE6IHsgc2hlZXQ6IFRpbWVsb2dTaGVldCwgZGF0ZTogVGltZWxvZ0RhdGUgfSlcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFNoZWV0ID09PSBkYXRhLnNoZWV0ICYmIHRoaXMuc2hlZXRDb250YWluZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgZGF0ZUNvbnRhaW5lciA9IHRoaXMuc2hlZXREYXRlcy5maW5kKGQgPT4gZC5kYXRlID09PSBkYXRhLmRhdGUpO1xyXG4gICAgICAgICAgICBpZiAoIWRhdGVDb250YWluZXIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0YS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIiksXHJcbiAgICAgICAgICAgICAgICAgICAgZW50cmllczogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhckJ1dHRvbjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKSxcclxuICAgICAgICAgICAgICAgICAgICBwYXN0ZUJ1dHRvbjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKSxcclxuICAgICAgICAgICAgICAgICAgICB3ZWVrZW5kRGVzY3JpcHRpb246IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgbm9FbnRyaWVzV2FybmluZzogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hlZXREYXRlcy5wdXNoKGRhdGVDb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuY2xhc3NOYW1lID0gXCJ0bC1kYXRlXCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNoZWV0Q29udGFpbmVyLmFwcGVuZENoaWxkKGRhdGVDb250YWluZXIucGFyZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobmV3IERhdGUoZGF0YS5kYXRlLmRhdGUpLmdldERheSgpID09PSAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdlZWtTZXBlcmF0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdlZWtTZXBlcmF0b3IuY2xhc3NOYW1lID0gXCJ0bC13ZWVrLXNlcGVyYXRvclwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hlZXRDb250YWluZXIuYXBwZW5kQ2hpbGQod2Vla1NlcGVyYXRvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kKGRhdGVDb250YWluZXIuc3RhckJ1dHRvbik7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMubW9kZWw/LnNldEZhdm9yaXRlZERhdGUoZGF0YS5kYXRlKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLXN0YXItYnV0dG9uIHRsLXNob3ctb24taG92ZXJcIjtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi50aXRsZSA9IFwiRmF2b3JpdGUgRGF5XCI7XHJcblxyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci50aXRsZS5jbGFzc05hbWUgPSBcInRsLWRhdGUtbGFiZWxcIjtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIudGl0bGUuaW5uZXJUZXh0ID0gbmV3IERhdGUoZGF0YS5kYXRlLmRhdGUpLnRvRGF0ZVN0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0ZS5ub25Xb3JraW5nRGF5KSBkYXRlQ29udGFpbmVyLnRpdGxlLmNsYXNzTGlzdC5hZGQoXCJ0bC1kYXRlLWxhYmVsLXdlZWtlbmRcIik7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmQoZGF0ZUNvbnRhaW5lci50aXRsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci53ZWVrZW5kRGVzY3JpcHRpb24uY2xhc3NOYW1lID0gXCJ0bC13ZWVrZW5kLWRlc2NyaXB0aW9uXCI7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmQoZGF0ZUNvbnRhaW5lci53ZWVrZW5kRGVzY3JpcHRpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIubm9FbnRyaWVzV2FybmluZy5jbGFzc05hbWUgPSBcInRsLW5vLWVudHJpZXMtd2FybmluZ1wiO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kKGRhdGVDb250YWluZXIubm9FbnRyaWVzV2FybmluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhLnNoZWV0LmxvY2tlZClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZC5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiYWRkXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIGFkZC5jbGFzc05hbWUgPSBcInRsLWFkZC1lbnRyeS1idG4gdGwtc2hvdy1vbi1ob3ZlclwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZC5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8ubmV3RW50cnkoZGF0YS5kYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmQoYWRkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwic3dpdGNoX2FjY2Vzc19zaG9ydGN1dF9hZGRcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi50aXRsZSA9IFwiUGFzdGUgZnJvbSBGYXZvcml0ZSBEYXlcIjtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtcGFzdGUtYnRuIHRsLXNob3ctb24taG92ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm1vZGVsPy5wYXN0ZUZyb21TdGFycmVkKGRhdGEuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kKGRhdGVDb250YWluZXIucGFzdGVCdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRUb1dlZWtTdW0oZGF0ZUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGRhdGVDb250YWluZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXRFbnRyeUNvbnRhaW5lcihkYXRhOiB7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGRhdGU6IFRpbWVsb2dEYXRlIH0sIGRhdGVDb250YWluZXI6IFRpbWVsb2dVSURhdGVDb250YWluZXIsIGVudHJ5OiBUaW1lbG9nRW50cnkpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IGVudHJ5Q29udGFpbmVyID0gZGF0ZUNvbnRhaW5lci5lbnRyaWVzLmZpbmQocCA9PiBwLmVudHJ5ID09PSBlbnRyeSk7XHJcbiAgICAgICAgaWYgKCFlbnRyeUNvbnRhaW5lcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyID0ge1xyXG4gICAgICAgICAgICAgICAgZW50cnksXHJcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXHJcbiAgICAgICAgICAgICAgICBzdGFydEhvdXI6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcclxuICAgICAgICAgICAgICAgIGVuZEhvdXI6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLFxyXG4gICAgICAgICAgICAgICAgcmVhc29uOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpLFxyXG4gICAgICAgICAgICAgICAgY29tbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLFxyXG4gICAgICAgICAgICAgICAgY29tbWVudEJ1dHRvbjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKSxcclxuICAgICAgICAgICAgICAgIG5vUmVhc29uV2FybmluZzogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBkYXRlQ29udGFpbmVyLmVudHJpZXMucHVzaChlbnRyeUNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuY2xhc3NOYW1lID0gXCJ0bC1lbnRyeVwiO1xyXG4gICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5wYXJlbnQpO1xyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuc3RhcnRIb3VyLnR5cGUgPSBcInRpbWVcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuc3RhcnRIb3VyLmNsYXNzTmFtZSA9IFwidGwtZW50cnktc3RhcnRcIjtcclxuICAgICAgICAgICAgaWYgKGRhdGEuc2hlZXQubG9ja2VkKSBlbnRyeUNvbnRhaW5lci5zdGFydEhvdXIuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5zdGFydEhvdXIub25jaGFuZ2UgPSAoKSA9PiBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5kID0gZW50cnkuc3RhcnRIb3VyICsgZW50cnkubGVuZ3RoSG91cnM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsPy5jaGFuZ2VTdGFydEhvdXIoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgRGF0ZXMucGFyc2VUaW1lVG9ob3VycyhlbnRyeUNvbnRhaW5lcj8uc3RhcnRIb3VyLnZhbHVlID8/IFwiMDg6MDBcIikpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gTnVtYmVycy5yb3VuZChlbmQgLSBlbnRyeS5zdGFydEhvdXIsIDIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbD8uY2hhbmdlTGVuZ3RoSG91cnMoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIuc3RhcnRIb3VyKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGVuZExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgICAgIGVuZExhYmVsLmNsYXNzTmFtZSA9IFwidGwtZW5kLWxhYmVsXCJcclxuICAgICAgICAgICAgZW5kTGFiZWwuaW5uZXJUZXh0ID0gXCItXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbmRMYWJlbCk7XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5lbmRIb3VyLnR5cGUgPSBcInRpbWVcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuZW5kSG91ci5jbGFzc05hbWUgPSBcInRsLWVudHJ5LWVuZFwiO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zaGVldC5sb2NrZWQpIGVudHJ5Q29udGFpbmVyLmVuZEhvdXIuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5lbmRIb3VyLm9uY2hhbmdlID0gKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5Q29udGFpbmVyPy5lbmRIb3VyKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IE51bWJlcnMucm91bmQoRGF0ZXMucGFyc2VUaW1lVG9ob3VycyhlbnRyeUNvbnRhaW5lci5lbmRIb3VyLnZhbHVlKSAtIGVudHJ5LnN0YXJ0SG91ciwgMik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbD8uY2hhbmdlTGVuZ3RoSG91cnMoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIuZW5kSG91cik7XHJcblxyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucmVhc29uLm9uY2hhbmdlID0gKCkgPT4gdGhpcy5tb2RlbD8uY2hhbmdlUmVhc29uKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIGVudHJ5Q29udGFpbmVyPy5yZWFzb24udmFsdWUgPz8gXCJcIik7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnNoZWV0LmxvY2tlZCkgZW50cnlDb250YWluZXIucmVhc29uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucmVhc29uLmNsYXNzTmFtZSA9IFwidGwtZW50cnktcmVhc29uXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5yZWFzb24pO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJlYXNvbnNEcm9wZG93bihlbnRyeUNvbnRhaW5lci5yZWFzb24pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRhdGVDb250YWluZXIuZW50cmllcy5sZW5ndGggPT09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3VtSG91cnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3VtSG91cnMuY2xhc3NOYW1lID0gXCJ0bC1zdW0taG91cnNcIjtcclxuICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmQoZGF0ZUNvbnRhaW5lci5zdW1Ib3Vycyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmxlbmd0aC50eXBlID0gXCJudW1iZXJcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubGVuZ3RoLmNsYXNzTmFtZSA9IFwidGwtZW50cnktbGVuZ3RoXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmxlbmd0aC5zdGVwID0gXCIwLjAxXCI7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnNoZWV0LmxvY2tlZCkgZW50cnlDb250YWluZXIubGVuZ3RoLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubGVuZ3RoLm9uY2hhbmdlID0gKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbD8uY2hhbmdlTGVuZ3RoSG91cnMoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgSG91clNjYWxpbmcudW5zY2FsZShwYXJzZUZsb2F0KGVudHJ5Q29udGFpbmVyPy5sZW5ndGgudmFsdWUgfHwgXCIwXCIpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkdXJhdGlvbkxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgICAgIGR1cmF0aW9uTGFiZWwuY2xhc3NOYW1lID0gXCJ0bC1kdXJhdGlvbi1sYWJlbFwiO1xyXG4gICAgICAgICAgICBkdXJhdGlvbkxhYmVsLmlubmVyVGV4dCA9IEhvdXJTY2FsaW5nLmdldFVuaXROYW1lKCk7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChkdXJhdGlvbkxhYmVsKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghZGF0YS5zaGVldC5sb2NrZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnRCdXR0b24uY2xhc3NOYW1lID0gXCJ0bC1hZGQtY29tbWVudC1idG4gdGwtc2hvdy1vbi1ob3ZlclwiO1xyXG4gICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8udG9nZ2xlQ29tbWVudChkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpKTtcclxuICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZW1vdmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJkZWxldGVcIikpO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlLmNsYXNzTmFtZSA9IFwidGwtcmVtb3ZlLWVudHJ5LWJ0biB0bC1zaG93LW9uLWhvdmVyXCI7XHJcbiAgICAgICAgICAgICAgICByZW1vdmUub25jbGljayA9ICgpID0+IHRoaXMubW9kZWw/LmRlbGV0ZUVudHJ5KGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSkpO1xyXG4gICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKHJlbW92ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLm5vUmVhc29uV2FybmluZy5hcHBlbmQoTWF0ZXJpYWxJY29uLmdldChcIndhcm5pbmdcIiwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5ub1JlYXNvbldhcm5pbmcuYXBwZW5kKFwiIE5vIHJlYXNvbiBzZWxlY3RlZCFcIik7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLm5vUmVhc29uV2FybmluZy5jbGFzc05hbWUgPSBcInRsLW5vLXJlYXNvbi13YXJuaW5nIHRsLXdhcm5pbmcgdGwtaGFzLXJlYXNvblwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIubm9SZWFzb25XYXJuaW5nKTtcclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQudHlwZSA9IFwidGV4dFwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50LnBsYWNlaG9sZGVyID0gXCJXcml0ZSBhIG5vdGUuLi5cIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC50aXRsZSA9IFwiV3JpdGUgYSBub3RlLi4uXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQuY2xhc3NOYW1lID0gXCJ0bC1lbnRyeS1jb21tZW50XCI7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnNoZWV0LmxvY2tlZCkgZW50cnlDb250YWluZXIuY29tbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQub25jaGFuZ2UgPSAoKSA9PiBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbD8uY2hhbmdlQ29tbWVudChkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpLCBlbnRyeUNvbnRhaW5lcj8uY29tbWVudC52YWx1ZSA/PyBcIlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIuY29tbWVudCk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZW50cnlDb250YWluZXI7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFkZFRvV2Vla1N1bShkYXRlOiBUaW1lbG9nVUlEYXRlQ29udGFpbmVyKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLndlZWtTdW1zLmxlbmd0aCA8IDEgfHwgbmV3IERhdGUoZGF0ZS5kYXRlLmRhdGUpLmdldERheSgpID09PSAwKSAvL0lmIHRoaXMgaXMgdGhlIGZpcnN0IGRheSwgb3IgYSBzdW5kYXksIGNyZWF0ZSBhIG5ldyB3ZWVrIGZvciBpdC5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHdlZWtTdW0gPSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlczogW2RhdGVdLFxyXG4gICAgICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB3ZWVrU3VtLmVsZW1lbnQuY2xhc3NOYW1lID0gXCJ0bC13ZWVrLXN1bVwiO1xyXG4gICAgICAgICAgICB0aGlzLndlZWtTdW1zLnB1c2god2Vla1N1bSk7XHJcbiAgICAgICAgICAgIGRhdGUucGFyZW50LmFwcGVuZENoaWxkKHdlZWtTdW0uZWxlbWVudCk7XHJcbiAgICAgICAgICAgIGRhdGUucGFyZW50LnN0eWxlLm1hcmdpblRvcCA9IFwiMzhweFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLndlZWtTdW1zW3RoaXMud2Vla1N1bXMubGVuZ3RoIC0gMV0uZGF0ZXMucHVzaChkYXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uRGF0ZVVwZGF0ZWQoZGF0YTogeyBzaGVldDogVGltZWxvZ1NoZWV0LCBkYXRlOiBUaW1lbG9nRGF0ZSB9KVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2hlZXQgPT09IGRhdGEuc2hlZXQgJiYgdGhpcy5zaGVldENvbnRhaW5lcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCBkYXRlQ29udGFpbmVyID0gdGhpcy5nZXREYXRlQ29udGFpbmVyKGRhdGEpO1xyXG4gICAgICAgICAgICBpZiAoZGF0ZUNvbnRhaW5lcilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBkYXRhLmRhdGUuZW50cmllcylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZW50cnlDb250YWluZXIgPSB0aGlzLmdldEVudHJ5Q29udGFpbmVyKGRhdGEsIGRhdGVDb250YWluZXIsIGVudHJ5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuc3RhcnRIb3VyLnZhbHVlID0gRGF0ZXMuZm9ybWF0SG91cihlbnRyeS5zdGFydEhvdXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmxlbmd0aC52YWx1ZSA9IE51bWJlcnMucm91bmQoSG91clNjYWxpbmcuc2NhbGUoZW50cnkubGVuZ3RoSG91cnMpLCAyKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmVuZEhvdXIudmFsdWUgPSBEYXRlcy5mb3JtYXRIb3VyKGVudHJ5LnN0YXJ0SG91ciArIGVudHJ5Lmxlbmd0aEhvdXJzKTtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5yZWFzb24udmFsdWUgPSBlbnRyeS5yZWFzb25JZDtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50LnZhbHVlID0gZW50cnkuY29tbWVudCA/PyBcIlwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoISFlbnRyeS5yZWFzb25JZCkgZW50cnlDb250YWluZXIubm9SZWFzb25XYXJuaW5nLmNsYXNzTGlzdC5hZGQoXCJ0bC1oYXMtcmVhc29uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgZW50cnlDb250YWluZXIubm9SZWFzb25XYXJuaW5nLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1oYXMtcmVhc29uXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uLnRpdGxlID0gZW50cnkuaGFzQ29tbWVudCA/IFwiUmVtb3ZlIG5vdGVcIiA6IFwiQWRkIG5vdGVcIjtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KGVudHJ5Lmhhc0NvbW1lbnQgPyBcInNwZWFrZXJfbm90ZXNfb2ZmXCIgOiBcInNwZWFrZXJfbm90ZXNcIikpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuaGFzQ29tbWVudCkgZW50cnlDb250YWluZXIucGFyZW50LmNsYXNzTGlzdC5hZGQoXCJ0bC1oYXMtY29tbWVudFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGVudHJ5Q29udGFpbmVyLnBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKFwidGwtaGFzLWNvbW1lbnRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZW1vdmVkRW50cmllcyA9IGRhdGVDb250YWluZXIuZW50cmllcy5maWx0ZXIoZW50cnkgPT4gIWRhdGEuZGF0ZS5lbnRyaWVzLmZpbmQoZSA9PiBlID09PSBlbnRyeS5lbnRyeSkpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5lbnRyaWVzID0gZGF0ZUNvbnRhaW5lci5lbnRyaWVzLmZpbHRlcihlbnRyeSA9PiAhcmVtb3ZlZEVudHJpZXMuaW5jbHVkZXMoZW50cnkpKTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZWRFbnRyaWVzLmZvckVhY2goZSA9PiBlLnBhcmVudC5yZW1vdmUoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGVDb250YWluZXIuc3VtSG91cnMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VtID0gTnVtYmVycy5zdW0oZGF0YS5kYXRlLmVudHJpZXMubWFwKGUgPT4gZS5sZW5ndGhIb3VycykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3VtSG91cnMuaW5uZXJUZXh0ID0gYCR7SG91clNjYWxpbmcuZm9ybWF0KE51bWJlcnMucm91bmQoc3VtLCAyKSl9YDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5kaXNhYmxlZCA9IGRhdGEuZGF0ZS5mYXZvcml0ZWQ7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInRsLWZhdm9yaXRlXCIpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJzdGFyXCIsIGRhdGEuZGF0ZS5mYXZvcml0ZWQpKTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGUuZmF2b3JpdGVkKSBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uY2xhc3NMaXN0LmFkZChcInRsLWZhdm9yaXRlXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkYXRlQ29udGFpbmVyLmVudHJpZXMubGVuZ3RoID4gMCB8fCBkYXRlQ29udGFpbmVyLmRhdGUuZmF2b3JpdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24uY2xhc3NMaXN0LmFkZChcInRsLWhpZGUtZmF2b3JpdGUtYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInRsLWhpZGUtZmF2b3JpdGUtYnV0dG9uXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIudGl0bGUudGl0bGUgPSBkYXRhLmRhdGUuZGF0ZURlc2NyaXB0aW9uID8/IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0ZS5ub25Xb3JraW5nRGF5ICYmIGRhdGEuZGF0ZS5lbnRyaWVzLmxlbmd0aCA8IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci53ZWVrZW5kRGVzY3JpcHRpb24uY2xhc3NMaXN0LnJlbW92ZShcInRsLXdlZWtlbmQtZGVzY3JpcHRpb24taGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIud2Vla2VuZERlc2NyaXB0aW9uLmlubmVyVGV4dCA9IGRhdGEuZGF0ZS5kYXRlRGVzY3JpcHRpb24gPz8gXCJcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLndlZWtlbmREZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKFwidGwtd2Vla2VuZC1kZXNjcmlwdGlvbi1oaWRkZW5cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGVDb250YWluZXIuZGF0ZS5ob3Vyc1RvV29yayA+IDAgJiYgZGF0ZUNvbnRhaW5lci5lbnRyaWVzLmxlbmd0aCA8IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5ub0VudHJpZXNXYXJuaW5nLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5ub0VudHJpZXNXYXJuaW5nLmNsYXNzTGlzdC5hZGQoXCJ0bC13YXJuaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1bSA9IE51bWJlcnMuc3VtKGRhdGEuZGF0ZS5lbnRyaWVzLm1hcChlID0+IGUubGVuZ3RoSG91cnMpKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLm5vRW50cmllc1dhcm5pbmcuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLm5vRW50cmllc1dhcm5pbmcuYXBwZW5kKE1hdGVyaWFsSWNvbi5nZXQoXCJ3YXJuaW5nXCIsIHRydWUpKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLm5vRW50cmllc1dhcm5pbmcuYXBwZW5kKGAgJHtOdW1iZXJzLnJvdW5kKEhvdXJTY2FsaW5nLnNjYWxlKHN1bSksIDIpfSAvICR7SG91clNjYWxpbmcuZm9ybWF0KE51bWJlcnMucm91bmQoZGF0ZUNvbnRhaW5lci5kYXRlLmhvdXJzVG9Xb3JrLCAyKSl9YCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5ub0VudHJpZXNXYXJuaW5nLmNsYXNzTGlzdC5hZGQoXCJ0bC1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHdlZWtTdW0gPSB0aGlzLndlZWtTdW1zLmZpbmQodyA9PiB3LmRhdGVzLnNvbWUoZCA9PiBkLmRhdGUgPT09IGRhdGEuZGF0ZSkpO1xyXG4gICAgICAgICAgICBpZiAod2Vla1N1bSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3VtID0gTnVtYmVycy5zdW0od2Vla1N1bS5kYXRlcy5tYXAoZCA9PiBOdW1iZXJzLnN1bShkLmVudHJpZXMubWFwKGUgPT4gZS5lbnRyeS5sZW5ndGhIb3VycykpKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbEhvdXJzID0gTnVtYmVycy5zdW0od2Vla1N1bS5kYXRlcy5tYXAoZCA9PiBkLmRhdGUuaG91cnNUb1dvcmspKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdlZWtOdW1iZXIgPSBEYXRlcy5nZXRXZWVrTnVtYmVyRnJvbURhdGUod2Vla1N1bS5kYXRlc1swXS5kYXRlLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgd2Vla1N1bS5lbGVtZW50LmlubmVySFRNTCA9IGA8Yj5XZWVrICR7d2Vla051bWJlcn08L2I+OiAke051bWJlcnMucm91bmQoSG91clNjYWxpbmcuc2NhbGUoc3VtKSwgMil9IC8gJHtIb3VyU2NhbGluZy5mb3JtYXQoTnVtYmVycy5yb3VuZCh0b3RhbEhvdXJzLCAyKSl9YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVwZGF0ZUJhbGFuY2UoKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgdXBkYXRlUmVhc29uc0Ryb3Bkb3duKHNlbGVjdDogSFRNTFNlbGVjdEVsZW1lbnQpXHJcbiAgICB7XHJcbiAgICAgICAgc2VsZWN0LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgZm9yIChjb25zdCByZWFzb24gb2YgdGhpcy5yZWFzb25zKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gcmVhc29uLnNlcnZlcklkO1xyXG4gICAgICAgICAgICBvcHRpb24uaW5uZXJUZXh0ID0gcmVhc29uLnZhbHVlO1xyXG4gICAgICAgICAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uUmVhc29uc1VwZGF0ZWQocmVhc29uczogSGlCb2JSZWFzb25bXSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLnJlYXNvbnMgPSByZWFzb25zO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2YgdGhpcy5zaGVldERhdGVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBkYXRlLmVudHJpZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUmVhc29uc0Ryb3Bkb3duKGVudHJ5LnJlYXNvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uU2F2ZVN0YXR1c1VwZGF0ZWQoc3RhdHVzOiBUaW1lbG9nU2F2ZVN0YXR1cylcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2F2ZVN0YXR1cykgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtc3VjY2Vzc1wiKTtcclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NMaXN0LnJlbW92ZShcInRsLXdhcm5pbmdcIik7XHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1jbGlja2FibGVcIik7XHJcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gVGltZWxvZ1NhdmVTdGF0dXMuU2F2ZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImNsb3VkX2RvbmVcIiwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kKFwiIFNhdmVkXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NMaXN0LmFkZChcInRsLXN1Y2Nlc3NcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdGF0dXMgPT09IFRpbWVsb2dTYXZlU3RhdHVzLldhaXRpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcInBlbmRpbmdcIikpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kKFwiIFBlbmRpbmcuLi5cIilcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gVGltZWxvZ1NhdmVTdGF0dXMuU2F2aW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJjbG91ZF91cGxvYWRcIikpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kKFwiIFNhdmluZy4uLlwiKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RhdHVzID09PSBUaW1lbG9nU2F2ZVN0YXR1cy5FcnJvcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiY2xvdWRfb2ZmXCIpKTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZChcIiBGYWlsZWQhXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NMaXN0LmFkZChcInRsLXdhcm5pbmdcIik7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc0xpc3QuYWRkKFwidGwtY2xpY2thYmxlXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgb25TYXZlU3RhdHVzQ2xpY2soKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5zYXZlU3RhdHVzPy5jbGFzc0xpc3QuY29udGFpbnMoXCJ0bC1jbGlja2FibGVcIikpIHJldHVybjtcclxuICAgICAgICB0aGlzLm1vZGVsPy5zYXZlKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uU2hlZXRVcGRhdGVkKHNoZWV0OiBUaW1lbG9nU2hlZXQpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hlZXREcm9wZG93biAmJiAhdGhpcy5zaGVldERyb3Bkb3duT3B0aW9ucy5maW5kKHMgPT4gcy5zaGVldCA9PT0gc2hlZXQpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gc2hlZXQuaWQudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgb3B0aW9uLmlubmVyVGV4dCA9IGAke25ldyBEYXRlKHNoZWV0LnN0YXJ0KS50b0RhdGVTdHJpbmcoKX0gLSAke25ldyBEYXRlKHNoZWV0LmVuZCkudG9EYXRlU3RyaW5nKCl9JHtzaGVldC5sb2NrZWQgPyBcIiAobG9ja2VkKVwiIDogXCJcIn1gO1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd25PcHRpb25zLnB1c2goeyBzaGVldDogc2hlZXQsIGVsZW1lbnQ6IG9wdGlvbiB9KTtcclxuICAgICAgICAgICAgdGhpcy5zaGVldERyb3Bkb3duLmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2hlZXQgPT09IHNoZWV0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hlZXRDb250YWluZXIpIHRoaXMuc2hlZXRDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgdGhpcy5zaGVldERhdGVzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMud2Vla1N1bXMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIHNoZWV0LmRhdGVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudXBkYXRlQmFsYW5jZSgpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBvblNoZWV0c1VwZGF0ZWQoc2hlZXRzOiBUaW1lbG9nU2hlZXRbXSlcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5zaGVldERyb3Bkb3duKSB0aGlzLnNoZWV0RHJvcGRvd24uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd25PcHRpb25zID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBzaGVldCBvZiBzaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm9uU2hlZXRVcGRhdGVkKHNoZWV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vblNlbGVjdGVkU2hlZXRDaGFuZ2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uU2VsZWN0ZWRTaGVldENoYW5nZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNoZWV0RHJvcGRvd24pIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5zaGVldENvbnRhaW5lcikgdGhpcy5zaGVldENvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuc2hlZXREYXRlcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHZhbCA9IHRoaXMuc2hlZXREcm9wZG93bi52YWx1ZTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkU2hlZXQgPSB0aGlzLnNoZWV0RHJvcGRvd25PcHRpb25zLmZpbmQobyA9PiBvLmVsZW1lbnQudmFsdWUgPT09IHZhbCk/LnNoZWV0O1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2hlZXQgJiYgdGhpcy5tb2RlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwuZmV0Y2hTaGVldCh0aGlzLnNlbGVjdGVkU2hlZXQuaWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgdXBkYXRlQmFsYW5jZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLm1vZGVsIHx8ICF0aGlzLmJhbGFuY2VMYWJlbCB8fCAhdGhpcy5zZWxlY3RlZFNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgYmFsYW5jZSA9IGF3YWl0IHRoaXMubW9kZWwuZ2V0RmxleFN0YXR1cygpO1xyXG4gICAgICAgIGNvbnN0IHRvdGFsQmFsYW5jZSA9IE51bWJlcnMucm91bmQoYmFsYW5jZS5iYWxhbmNlLCAyKTtcclxuICAgICAgICB0aGlzLmJhbGFuY2VMYWJlbC5pbm5lclRleHQgPSBgRmxleDogJHtIb3VyU2NhbGluZy5mb3JtYXQodG90YWxCYWxhbmNlKX0ke3RvdGFsQmFsYW5jZSA9PT0gMCA/IFwiIPCfpbNcIiA6IFwiXCJ9YDtcclxuXHJcbiAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZz8uY2xhc3NMaXN0LmFkZChcInRsLWhpZGRlblwiKTtcclxuICAgICAgICBpZiAoYmFsYW5jZS5vdmVyZHVlRGF0ZXMubGVuZ3RoICsgYmFsYW5jZS53YXJuaW5nRGF0ZXMubGVuZ3RoID4gMCAmJiB0aGlzLmJhbGFuY2VXYXJuaW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgcG9saWN5ID0gdGhpcy5tb2RlbC5nZXRGbGV4UG9saWN5KCk7XHJcbiAgICAgICAgICAgIHRoaXMuYmFsYW5jZVdhcm5pbmcuY2xhc3NMaXN0LnJlbW92ZShcInRsLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZy5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nLmFwcGVuZChNYXRlcmlhbEljb24uZ2V0KFwid2FybmluZ1wiLCB0cnVlKSk7XHJcbiAgICAgICAgICAgIGlmIChiYWxhbmNlLm92ZXJkdWVEYXRlcy5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nLmFwcGVuZChgWW91IGhhdmUgJHtiYWxhbmNlLm92ZXJkdWVEYXRlcy5sZW5ndGh9IHVuYmFsYW5jZWQgZmxleCBkYXRlJHtiYWxhbmNlLm92ZXJkdWVEYXRlcy5sZW5ndGggPT09IDEgPyBcIlwiIDogXCJzXCJ9IG9sZGVyIHRoYW4gJHtwb2xpY3kucHJldmlvdXNEYXlzSW5jbHVkZWR9IGRheXMhYCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nLnRpdGxlICs9IGBPdmVyZHVlIGRhdGVzOiAke2JhbGFuY2Uub3ZlcmR1ZURhdGVzLm1hcChkID0+IERhdGVzLmZvcm1hdChkLmRhdGUsIGZhbHNlKSkuam9pbihcIiwgXCIpfWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoYmFsYW5jZS53YXJuaW5nRGF0ZXMubGVuZ3RoID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZy5hcHBlbmQoYCR7YmFsYW5jZS53YXJuaW5nRGF0ZXMubGVuZ3RofSB1bmJhbGFuY2VkIGZsZXggZGF0ZSR7YmFsYW5jZS53YXJuaW5nRGF0ZXMubGVuZ3RoID09PSAxID8gXCJcIiA6IFwic1wifSB3aWxsIHNvb24gYmUgb2xkZXIgdGhhbiAke3BvbGljeS5wcmV2aW91c0RheXNJbmNsdWRlZH0gZGF5cyFgKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuYmFsYW5jZVdhcm5pbmcudGl0bGUgPSBcIlwiO1xyXG4gICAgICAgICAgICBpZiAoYmFsYW5jZS5vdmVyZHVlRGF0ZXMubGVuZ3RoID4gMCkgdGhpcy5iYWxhbmNlV2FybmluZy50aXRsZSArPSBgT3ZlcmR1ZSBkYXRlczogJHtiYWxhbmNlLm92ZXJkdWVEYXRlcy5tYXAoZCA9PiBgJHtEYXRlcy5mb3JtYXQoZC5kYXRlLCBmYWxzZSl9ICgke2QucmVhbGxvY2F0ZWRCYWxhbmNlfWgpYCkuam9pbihcIiwgXCIpfWA7XHJcbiAgICAgICAgICAgIGlmIChiYWxhbmNlLndhcm5pbmdEYXRlcy5sZW5ndGggPiAwKSB0aGlzLmJhbGFuY2VXYXJuaW5nLnRpdGxlICs9IGAke3RoaXMuYmFsYW5jZVdhcm5pbmcudGl0bGUubGVuZ3RoID4gMCA/IFwiXFxuXCIgOiBcIlwifVNvb24gb3ZlcmR1ZSBkYXRlczogJHtiYWxhbmNlLndhcm5pbmdEYXRlcy5tYXAoZCA9PiBgJHtEYXRlcy5mb3JtYXQoZC5kYXRlLCBmYWxzZSl9ICgke2QucmVhbGxvY2F0ZWRCYWxhbmNlfWgpYCkuam9pbihcIiwgXCIpfWA7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nLmFwcGVuZChcIiBcIik7XHJcbiAgICAgICAgICAgIHRoaXMuYmFsYW5jZVdhcm5pbmcuYXBwZW5kKE1hdGVyaWFsSWNvbi5nZXQoXCJpbmZvXCIsIGZhbHNlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmYXZvcml0ZSA9IGF3YWl0IHRoaXMubW9kZWwuZ2V0RmF2b3JpdGVkRGF0ZSgpO1xyXG4gICAgICAgIGlmIChmYXZvcml0ZSkgdGhpcy5zaGVldENvbnRhaW5lcj8uY2xhc3NMaXN0LmFkZChcInRsLWhhcy1mYXZvcml0ZVwiKTtcclxuICAgICAgICBlbHNlIHRoaXMuc2hlZXRDb250YWluZXI/LmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1oYXMtZmF2b3JpdGVcIik7XHJcbiAgICB9XHJcblxyXG59IiwiZXhwb3J0IGNvbnN0IFRpbWVsb2dDc3MgPSBgXHJcbi50bC10b2dnbGUtYnRuXHJcbntcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIGJhY2tncm91bmQ6IG5vbmU7XHJcbiAgICBmb250LXNpemU6IDJlbTtcclxufVxyXG4udGwtY2xvc2UtYnRuXHJcbntcclxuICAgIGZvbnQtc2l6ZTogMmVtO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgcmlnaHQ6IDVweDtcclxufVxyXG4udGwtdWlcclxue1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgei1pbmRleDogMTAwMDtcclxuICAgIGluc2V0OiAwcHg7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIG92ZXJmbG93LXk6IHNjcm9sbDtcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbn0gICAgICAgIFxyXG4udGwtZGF0ZVxyXG57XHJcbiAgICBtYXJnaW4tdG9wOiAxMHB4O1xyXG4gICAgcGFkZGluZzogMTBweDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkIGdyYXk7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbn1cclxuLnRsLXNhdmUtc3RhdHVzLCAudGwtYWRkLWVudHJ5LWJ0blxyXG57XHJcbiAgICBtYXJnaW4tbGVmdDogMTBweDtcclxufVxyXG4udGwtZW50cnlcclxue1xyXG4gICAgbWFyZ2luLXRvcDogNXB4O1xyXG59XHJcbi50bC1lbnRyeSA+ICpcclxue1xyXG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcclxufVxyXG4udGwtZW50cnkgPiBpbnB1dFt0eXBlPW51bWJlcl1cclxue1xyXG4gICAgd2lkdGg6IDUwcHg7XHJcbn1cclxuLnRsLWVudHJ5ID4gaW5wdXRbdHlwZT10aW1lXVxyXG57XHJcbiAgICB3aWR0aDogNzVweDtcclxufVxyXG4udGwtc2F2ZS1zdGF0dXNcclxue1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuLnRsLXNoZWV0LXNlbGVjdFxyXG57XHJcbiAgICBtYXJnaW4tbGVmdDogNXB4O1xyXG59XHJcbi50bC1kYXRlLWxhYmVsXHJcbntcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcbi50bC1kYXRlLWxhYmVsLnRsLWRhdGUtbGFiZWwtd2Vla2VuZFxyXG57XHJcbiAgICBmb250LXdlaWdodDogaW5pdGlhbDtcclxuICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcclxuICAgIGNvbG9yOiBncmF5O1xyXG59XHJcbi50bC1lbnRyeS1yZWFzb24gXHJcbntcclxuICAgIHBhZGRpbmc6IDNweDtcclxufVxyXG4udGwtcmVtb3ZlLWVudHJ5LWJ0blxyXG57XHJcbiAgICBmbG9hdDogcmlnaHQ7XHJcbn1cclxuLnRsLXdlZWstc2VwZXJhdG9yXHJcbntcclxuICAgIG1hcmdpbi10b3A6IDU3cHg7XHJcbn1cclxuLnRsLWJhbGFuY2UtbGFiZWxcclxue1xyXG4gICAgbWFyZ2luOiA1cHg7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbn1cclxuLnRsLWJhbGFuY2UtaGVscFxyXG57XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICBjdXJzb3I6IGhlbHA7XHJcbn1cclxuXHJcbi50bC11aS1pbm5lclxyXG57XHJcbiAgICBkaXNwbGF5OiB0YWJsZTtcclxuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xyXG4gICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xyXG59XHJcbi50bC11aS1pbm5lciwgLnRsLXdlZWstc2VwZXJhdG9yLCAudGwtZGF0ZVxyXG57XHJcbiAgICBtaW4td2lkdGg6IDY1MHB4O1xyXG59XHJcbi50bC1lbnRyeS1jb21tZW50IHtcclxuICAgIG1hcmdpbi10b3A6IDVweDtcclxuICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuLnRsLWhhcy1jb21tZW50IC50bC1lbnRyeS1jb21tZW50XHJcbntcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG59XHJcbi50bC1zdWNjZXNzXHJcbntcclxuICAgIGNvbG9yOiAjMDJCODc1O1xyXG59XHJcbi50bC13YXJuaW5nXHJcbntcclxuICAgIGNvbG9yOiAjRjBBRjUyO1xyXG59XHJcbi50bC1kYW5nZXJcclxue1xyXG4gICAgY29sb3I6ICNEQTU2NTI7XHJcbn1cclxuLnRsLXN1bS1ob3Vyc1xyXG57XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBtYXJnaW4tdG9wOiAtMjNweDtcclxufVxyXG4udGwtd2Vlay1zdW1cclxue1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgbWFyZ2luLXRvcDogLTU3cHg7XHJcbiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcclxufVxyXG4udGwtdWkgYnV0dG9uLnRsLXN0YXItYnV0dG9uLCAudGwtdWkudGwtZGFyayBidXR0b24udGwtc3Rhci1idXR0b25cclxue1xyXG4gICAgYmFja2dyb3VuZDogbm9uZTtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIG1hcmdpbjogMDtcclxuICAgIHBhZGRpbmc6IDA7XHJcbn1cclxuLnRsLXVpIGJ1dHRvbi50bC1zdGFyLWJ1dHRvbi50bC1mYXZvcml0ZSwgLnRsLXVpLnRsLWRhcmsgYnV0dG9uLnRsLXN0YXItYnV0dG9uLnRsLWZhdm9yaXRlXHJcbntcclxuICAgIGNvbG9yOiAjZjFhMDBiO1xyXG4gICAgb3BhY2l0eTogMTtcclxufVxyXG4udGwtcGFzdGUtYnRuIHtcclxuICAgIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcbi50bC1oYXMtZmF2b3JpdGUgLnRsLXBhc3RlLWJ0bjpub3QoLnRsLWhpZGUtZmF2b3JpdGUtYnV0dG9uKVxyXG57XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbn1cclxuLnRsLXNob3ctb24taG92ZXJcclxue1xyXG4gICAgb3BhY2l0eTogMDtcclxufVxyXG4udGwtZGF0ZTpob3ZlciAudGwtc2hvdy1vbi1ob3ZlclxyXG57XHJcbiAgICBvcGFjaXR5OiAxO1xyXG59XHJcbi50bC1uby1yZWFzb24td2FybmluZyB7XHJcbiAgICBtYXJnaW4tbGVmdDogMTgwcHg7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBtYXJnaW4tdG9wOiAtMjJweDtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG59XHJcbi50bC1uby1yZWFzb24td2FybmluZy50bC1oYXMtcmVhc29uXHJcbntcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuLnRsLWNsaWNrYWJsZVxyXG57XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuLnRsLWRhcmstbW9kZS1idG4ge1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgYm90dG9tOiA1cHg7XHJcbiAgICByaWdodDogMjBweDtcclxufVxyXG4udGwtdWkgYnV0dG9uXHJcbntcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNkOWQ5ZDk7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCBncmF5O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG59XHJcbi50bC11aSBidXR0b246aG92ZXJcclxue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2VmZWJlYjtcclxufVxyXG5cclxuLnRsLXVpLnRsLWRhcmtcclxue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzFFMUUxRTtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxufVxyXG4udGwtdWkudGwtZGFyayBzZWxlY3QsIC50bC11aS50bC1kYXJrIGlucHV0IHtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMyNTI1MjY7XHJcbiAgICBib3JkZXI6IDFweCBncmF5IHNvbGlkO1xyXG4gICAgY29sb3Itc2NoZW1lOiBkYXJrO1xyXG59XHJcbi50bC11aS50bC1kYXJrIGJ1dHRvblxyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzMzMzO1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgIzI4MjgyODtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxufVxyXG4udGwtdWkudGwtZGFyayBidXR0b246aG92ZXJcclxue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzUyNTI1MjtcclxufVxyXG4udGwtdWkudGwtZGFyayAudGwtbm8tcmVhc29uLXdhcm5pbmdcclxue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzI1MjUyNjtcclxufVxyXG4udGwtd2Vla2VuZC1kZXNjcmlwdGlvbiB7XHJcbiAgICBjb2xvcjogZ3JheTtcclxuICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcclxuICAgIGZsb2F0OiByaWdodDtcclxuICAgIG1hcmdpbi10b3A6IDJweDtcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgIG1heC13aWR0aDogNDAwcHg7XHJcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgbWF4LWhlaWdodDogMzVweDtcclxufVxyXG4udGwtd2Vla2VuZC1kZXNjcmlwdGlvbi50bC13ZWVrZW5kLWRlc2NyaXB0aW9uLWhpZGRlblxyXG57XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcbi50bC12ZXJzaW9uLW51bWJlciB7XHJcbiAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICBib3R0b206IDVweDtcclxuICAgIGxlZnQ6IDVweDtcclxufVxyXG5cclxuLnRsLXNldHRpbmdzIHtcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIGluc2V0OiAwO1xyXG4gICAgei1pbmRleDogMTAwO1xyXG59XHJcbi50bC1zZXR0aW5ncy1iYWNrIHtcclxuICAgIGluc2V0OiAwO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XHJcbiAgICBvcGFjaXR5OiAwLjU7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi50bC1zZXR0aW5ncy50bC1zZXR0aW5ncy1oaWRkZW4ge1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG5cclxuLnRsLXNldHRpbmdzLXZlcnNpb24ge1xyXG4gICAgbWFyZ2luOiA1cHggMTBweDtcclxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBncmF5O1xyXG59XHJcblxyXG4udGwtc2V0dGluZ3MtdmVyc2lvbjpsYXN0LWNoaWxkIHtcclxuICAgIGJvcmRlci1ib3R0b206IDA7XHJcbn1cclxuXHJcbi50bC1zZXR0aW5ncy10aXRsZSB7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgIGZvbnQtc2l6ZTogMS4yNWVtO1xyXG59XHJcbi50bC1zZXR0aW5ncy1pbm5lciB7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIGhlaWdodDogNzB2aDtcclxuICAgIHdpZHRoOiA5MHZ3O1xyXG4gICAgbGVmdDogNXZ3O1xyXG4gICAgdG9wOiAxNXZoO1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgZ3JheTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgb3ZlcmZsb3c6IGF1dG87XHJcbn1cclxuLnRsLXNldHRpbmdzLXZlcnNpb24gYnV0dG9uXHJcbntcclxuICAgIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xyXG59XHJcblxyXG4udGwtZGFyayAudGwtc2V0dGluZ3MtaW5uZXJcclxue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzFhMWExYTtcclxufVxyXG5cclxuLnRsLWJhbGFuY2Utd2FybmluZ1xyXG57XHJcbiAgICBmb250LXNpemU6IDAuOGVtO1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XHJcbiAgICBjdXJzb3I6IGhlbHA7XHJcbn1cclxuLnRsLWhpZGRlblxyXG57XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcblxyXG4udGwtbm8tZW50cmllcy13YXJuaW5nXHJcbntcclxuICAgIGZsb2F0OiByaWdodDtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcblxyXG5gOyIsImltcG9ydCB7IFRpbWVsb2dVSSB9IGZyb20gXCIuLi9UaW1lbG9nL1RpbWVsb2dVSVwiO1xyXG5pbXBvcnQgeyBUaW1lbG9nVUlTZXR0aW5nc0J1dHRvbnMgfSBmcm9tIFwiLi4vVGltZWxvZy9UaW1lbG9nVUlTZXR0aW5nc0J1dHRvbnNcIjtcclxuaW1wb3J0IHsgSG91clNjYWxpbmcgfSBmcm9tIFwiLi4vVXRpbHMvSG91clNjYWxpbmdcIjtcclxuaW1wb3J0IHsgTWF0ZXJpYWxJY29uIH0gZnJvbSBcIi4uL1V0aWxzL01hdGVyaWFsSWNvblwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFwcmlsRm9vbHNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBzZXRBcHJpbEZvb2xzT3B0T3V0KG9wdE91dDogYm9vbGVhbilcclxuICAgIHtcclxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0bF9hcHJpbF9mb29sc19vcHRfb3V0XCIsIEpTT04uc3RyaW5naWZ5KG9wdE91dCkpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRBcHJpbEZvb2xzT3B0T3V0KClcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0bF9hcHJpbF9mb29sc19vcHRfb3V0XCIpID8/IFwiZmFsc2VcIikgYXMgYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHNldEhhc1NlZW5Qb3B1cCh2YWx1ZTogYm9vbGVhbilcclxuICAgIHtcclxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0bF9hcHJpbF9mb29sc19wb3B1cFwiLCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBoYXNTZWVuUG9wdXAoKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRsX2FwcmlsX2Zvb2xzX3BvcHVwXCIpID8/IFwiZmFsc2VcIikgYXMgYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBpc0FwcmlsRm9vbHMoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaGFzaCA9PT0gXCIjdGwtYXByaWxmb29sc1wiKSByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgY29uc3QgeWVhciA9IG5vdy5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIGxldCBtb250aCA9IDQ7XHJcbiAgICAgICAgbGV0IGRheSA9IDE7XHJcbiAgICAgICAgbGV0IGFwcmlsRm9vbHM6IERhdGUgfCBudWxsO1xyXG4gICAgICAgIGxldCB3ZWVrZW5kRGF5cyA9IFs2LCA3XTtcclxuICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkYXkgPCAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkYXkgPSAzMTtcclxuICAgICAgICAgICAgICAgIG1vbnRoLS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXByaWxGb29scyA9IG5ldyBEYXRlKGAke3llYXJ9LyR7bW9udGh9LyR7ZGF5fWApO1xyXG4gICAgICAgICAgICBpZiAoIXdlZWtlbmREYXlzLmluY2x1ZGVzKGFwcmlsRm9vbHMuZ2V0RGF5KCkpKSBicmVhaztcclxuICAgICAgICAgICAgZGF5LS07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhcHJpbEZvb2xzRW5kID0gYXByaWxGb29scy5nZXRUaW1lKCkgKyAoMTAwMCAqIDYwICogNjAgKiAyNCk7XHJcbiAgICAgICAgcmV0dXJuIG5vdy5nZXRUaW1lKCkgPD0gYXByaWxGb29sc0VuZCAmJiBub3cuZ2V0VGltZSgpID49IGFwcmlsRm9vbHMuZ2V0VGltZSgpOyovXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGluaXQoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQXByaWxGb29scygpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVGltZWxvZ1VJU2V0dGluZ3NCdXR0b25zLmJ1dHRvbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBpY29uOiBcImJvbHRcIixcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiT3B0IG91dCBvZiBUZXJhbGlnaHRtZXRlcnNcIixcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIkFwcmlsIGZvb2xzIVwiLFxyXG4gICAgICAgICAgICAgICAgb25DbGljazogKCkgPT4geyB0aGlzLnNldEFwcmlsRm9vbHNPcHRPdXQoIXRoaXMuZ2V0QXByaWxGb29sc09wdE91dCgpKTsgbG9jYXRpb24ucmVsb2FkKCkgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZ2V0QXByaWxGb29sc09wdE91dCgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBIb3VyU2NhbGluZy5zY2FsaW5nID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHVuaXRHZW5lcmFsOiBcInRlcmFsaWdodG1ldGVyKHMpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdW5pdFBsdXJhbDogXCJ0ZXJhbGlnaHRtZXRlcnNcIixcclxuICAgICAgICAgICAgICAgICAgICB1bml0U2luZ3VsYXI6IFwidGVyYWxpZ2h0bWV0ZXJcIixcclxuICAgICAgICAgICAgICAgICAgICBzY2FsZTogdGhpcy5ob3VyMlRlcmFsaWdodG1ldGVyU2NhbGluZygpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFRpbWVsb2dVSS5vblNob3cub24oKHVpKSA9PiB0aGlzLnNob3dBcHJpbEZvb2xzUG9wdXAodWkpLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRBcHJpbEZvb2xzT3B0T3V0KGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRIYXNTZWVuUG9wdXAoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgc3RhdGljIHNob3dBcHJpbEZvb2xzUG9wdXAodWk6IFRpbWVsb2dVSSlcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5oYXNTZWVuUG9wdXAoKSkgcmV0dXJuO1xyXG4gICAgICAgIC8vSnVzdCBnb25uYSB1c2UgdGhlIHNldHRpbmdzIENTUyBmb3IgdGhpcy4uLlxyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gXCJ0bC1zZXR0aW5nc1wiO1xyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XHJcbiAgICAgICAgY29uc3QgYmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgYmFjay5jbGFzc05hbWUgPSBcInRsLXNldHRpbmdzLWJhY2tcIjtcclxuICAgICAgICBlbGVtZW50LmFwcGVuZChiYWNrKTtcclxuICAgICAgICBjb25zdCBkaXNtaXNzID0gKCkgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0SGFzU2VlblBvcHVwKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBiYWNrLm9uY2xpY2sgPSAoKSA9PiBkaXNtaXNzKCk7XHJcbiAgICAgICAgZWxlbWVudC5vbmNsaWNrID0gKCkgPT4gZGlzbWlzcygpO1xyXG5cclxuICAgICAgICBjb25zdCBpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgaW5uZXIuY2xhc3NOYW1lID0gXCJ0bC1zZXR0aW5ncy1pbm5lclwiO1xyXG4gICAgICAgIGVsZW1lbnQuYXBwZW5kKGlubmVyKTtcclxuXHJcbiAgICAgICAgY29uc3QgcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBwb3B1cEVsZW1lbnQuY2xhc3NOYW1lID0gXCJ0bC1zZXR0aW5ncy12ZXJzaW9uXCI7XHJcbiAgICAgICAgaW5uZXIuYXBwZW5kKHBvcHVwRWxlbWVudCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGlzRWFybHlBcHJpbEZvb2xzID0gbmV3IERhdGUoKS5nZXRNb250aCgpIDwgMzsgLy9BcHJpbCBpcyAwLWluZGV4IG1vbnRoIDMuXHJcbiAgICAgICAgcG9wdXBFbGVtZW50LmlubmVySFRNTCA9IGA8aDE+SW50cm9kdWNpbmc6IHRoZSBUZXJhbGlnaHRtZXRlciE8L2gxPlxyXG4gICAgICAgIDxoMz5BbGwgaG91cnMgbG9nZ2VkIHdpbGwgbm93IGJlIG1lYXN1cmVkIGluIGEgbmV3IHRpbWUgdW5pdDogdGhlIFRlcmFsaWdodG1ldGVyIC0gdGhlIHRpbWUgaXQgdGFrZXMgZm9yIGxpZ2h0IHRvIHRyYXZlbCAxIDAwMCAwMDAgMDAwIDAwMCBtZXRlcnMhPC9oMz5cclxuICAgICAgICA8aDM+VGhpcyBmZWF0dXJlIHdhcyBtYWRlIGV4Y2x1c2l2ZWx5IGZvciB5b3VyIGJlbmVmaXQsIGluIG5vIHdheSByZWxhdGVkIHRvICR7aXNFYXJseUFwcmlsRm9vbHMgPyBgYW4gdXBjb21pbmcgZGF0ZS5gIDogYHRvZGF5J3MgZGF0ZS5gfTwvaDM+XHJcbiAgICAgICAgPGgzPldlIGhvcGUgeW91IGVuam95IPCfmInwn5OFPC9oMz5gO1xyXG5cclxuICAgICAgICB1aS50aW1lbG9nVUlJbm5lcj8uYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGhvdXIyVGVyYWxpZ2h0bWV0ZXJTY2FsaW5nKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBsaWdodE1ldGVyc1Blck1zID0gMjk5NzkyLjQ1ODtcclxuICAgICAgICBjb25zdCBsaWdodE1ldGVyTXMgPSAxIC8gbGlnaHRNZXRlcnNQZXJNcztcclxuICAgICAgICBjb25zdCB0ZXJhTGlnaHRNZXRlcnNNcyA9IGxpZ2h0TWV0ZXJNcyAqIDEwMDAgKiAxMDAwICogMTAwMCAqIDEwMDA7XHJcbiAgICAgICAgY29uc3QgdGVyYUxpZ2h0TWV0ZXJzSG91cnMgPSB0ZXJhTGlnaHRNZXRlcnNNcyAvICgxMDAwICogNjAgKiA2MClcclxuICAgICAgICByZXR1cm4gMSAvIHRlcmFMaWdodE1ldGVyc0hvdXJzO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQXByaWxGb29scyB9IGZyb20gXCIuL0Z1bi9BcHJpbEZvb2xzXCI7XHJcbmltcG9ydCB7IFJlYXNvbkVuaGFuY2VtZW50cyB9IGZyb20gXCIuL1JlYXNvbkVuaGFuY2VtZW50cy9SZWFzb25zRW5oYW5jZW1lbnRzXCI7XHJcbmltcG9ydCB7IFRpbWVsb2dVSSB9IGZyb20gXCIuL1RpbWVsb2cvVGltZWxvZ1VJXCI7XHJcbmltcG9ydCB7IE1hdGVyaWFsSWNvbiB9IGZyb20gXCIuL1V0aWxzL01hdGVyaWFsSWNvblwiO1xyXG5cclxuQXByaWxGb29scy5pbml0KCk7XHJcbk1hdGVyaWFsSWNvbi5pbml0aWFsaXplKCk7XHJcbm5ldyBUaW1lbG9nVUkoKTtcclxubmV3IFJlYXNvbkVuaGFuY2VtZW50cygpOyIsImV4cG9ydCBjb25zdCBSZWFzb25FbmhhbmNlbWVudENzcyA9IGBcclxuLnJlLWxhYmVsXHJcbntcclxuICAgIGZvbnQtc2l6ZTogMS41ZW07XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG59XHJcbi5yZS1yZWFzb24tc2VsZWN0XHJcbntcclxuICAgIHBhZGRpbmc6IDVweDtcclxufVxyXG4ucmUtcmVhc29uLXVpXHJcbntcclxuICAgIHotaW5kZXg6IDIwMDA7XHJcbiAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICBpbnNldDogMDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsMC43NSk7XHJcbiAgICBwYWRkaW5nLXRvcDogNDV2aDtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcbi5yZS1idG5cclxue1xyXG4gICAgcGFkZGluZzogMCB2YXIoLS1idXR0b24tcGFkZGluZy14LCAxNXB4KTtcclxuICAgIG1pbi13aWR0aDogODBweDtcclxuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLXNpemUsIDMwcHgpO1xyXG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICAgIGZvbnQtc2l6ZTogdmFyKC0tYnV0dG9uLWZvbnQtc2l6ZSwgMTJweCk7XHJcbiAgICBmb250LWZhbWlseTogdmFyKC0tYm9keS1mb250LWZhbWlseSk7XHJcbiAgICBib3JkZXI6IDA7XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICBtYXJnaW46IDVweDtcclxufVxyXG4ucmUtYnRuLnJlLXByaW1hcnlcclxue1xyXG4gICAgY29sb3I6IHZhcigtLXByaW1hcnktYmctdGV4dC1jb2xvciwgd2hpdGUpO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS02MDApO1xyXG59XHJcbi5yZS1idG4ucmUtc2Vjb25kYXJ5XHJcbntcclxuICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktYmctdGV4dC1jb2xvciwgIzUzNTM1Myk7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnktNjAwKTtcclxufVxyXG4ucmUtYmx1clxyXG57XHJcbiAgICBmaWx0ZXI6IGJsdXIoMnB4KTtcclxufVxyXG4ucmUtc3VibWl0dGluZyAucmUtYnRuXHJcbntcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuLnJlLXN1Ym1pdHRpbmctdGV4dFxyXG57XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG4gICAgZm9udC1zaXplOiAxLjVlbTtcclxufVxyXG4ucmUtc3VibWl0dGluZyAucmUtc3VibWl0dGluZy10ZXh0XHJcbntcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG59XHJcbmA7Il0sIm5hbWVzIjpbIkRhdGVzIiwic3RhdGljIiwic3RyIiwic3BsaXQiLCJsZW5ndGgiLCJwdXNoIiwiRGF0ZSIsImpvaW4iLCJnZXRUaW1lIiwidGltZSIsImluY2x1ZGVUaW1lc3RhbXAiLCJkYXRlIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJnZXREYXRlIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiaG91cnMiLCJob3VyIiwiTWF0aCIsImZsb29yIiwibWludXRlIiwicm91bmQiLCJzZXRIb3VycyIsInNldERhdGUiLCJnZXREYXkiLCJ3ZWVrMSIsInBhcnNlSW50IiwiRXZlbnRIYW5kbGVyIiwiaGFuZGxlcnMiLCJvbiIsImhhbmRsZXIiLCJjb250ZXh0IiwidGhpcyIsIm9mZiIsImZpbHRlciIsImgiLCJmaXJlIiwidmFsIiwiZm9yRWFjaCIsImNhbGwiLCJOdW1iZXJzIiwibnVtIiwiZGVjaW1hbHMiLCJjZWlsIiwiYXJyIiwiaSIsIkhvdXJTY2FsaW5nIiwic2NhbGluZyIsInNjYWxlIiwic2NhbGVkIiwidW5pdEdlbmVyYWwiLCJ1bml0U2luZ3VsYXIiLCJ1bml0UGx1cmFsIiwiZ2V0VW5pdE5hbWUiLCJNYXRlcmlhbEljb24iLCJsaW5rIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaHJlZiIsInJlbCIsImhlYWQiLCJhcHBlbmRDaGlsZCIsImljb24iLCJmaWxsIiwic3BhbiIsImNsYXNzTmFtZSIsImlubmVyVGV4dCIsInN0eWxlIiwidmVydGljYWxBbGlnbiIsImZvbnRTaXplIiwiZm9udFZhcmlhdGlvblNldHRpbmdzIiwiV2FpdCIsIm1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ3aW5kb3ciLCJzZXRUaW1lb3V0IiwiZGVsZWdhdGUiLCJoYW5kbGUiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJBcGkiLCJtZXRob2QiLCJ1cmwiLCJib2R5IiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJyZXN1bHQiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJzdGF0dXMiLCJoYXNPd25Qcm9wZXJ0eSIsImtleSIsImFsZXJ0IiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwic2VuZCIsInN0cmluZ2lmeSIsIkhpQm9iIiwiZW50cmllcyIsInNvbWUiLCJlIiwicmVhc29uSWQiLCJkYXRhIiwibWFwIiwic3RhcnQiLCJmb3JtYXQiLCJzdGFydEhvdXIiLCJlbmQiLCJsZW5ndGhIb3VycyIsInVuZGVmaW5lZCIsInJlYXNvbiIsImNvbW1lbnQiLCJkYXRlU3RyIiwidXNlcklkIiwiZ2V0VXNlcklkIiwibWV0YWRhdGEiLCJ0aW1lTG9nRW50cnlSZWFzb24iLCJ2YWx1ZXMiLCJ2IiwiaWQiLCJzZXJ2ZXJJZCIsIm5hbWUiLCJ2YWx1ZSIsInNoZWV0IiwidXNlckluZm8iLCJUaW1lbG9nU2F2ZVN0YXR1cyIsIlJlYXNvbkVuaGFuY2VtZW50TW9kZSIsIlRpbWVsb2dNb2RlbCIsInNoZWV0cyIsIm9uRGF0ZVVwZGF0ZWQiLCJvblJlYXNvbnNVcGRhdGVkIiwib25TaGVldFVwZGF0ZWQiLCJvblNoZWV0c1VwZGF0ZWQiLCJvblNhdmVTdGF0dXNVcGRhdGVkIiwic2F2ZUhhbmRsZSIsInNhdmluZyIsImNhbGN1bGF0aW5nRmxleCIsImZldGNoaW5nU2hlZXRzIiwicmVhc29ucyIsImFzeW5jIiwiZmV0Y2hTaGVldHMiLCJmZXRjaFJlYXNvbnMiLCJTYXZlZCIsInVudGlsIiwiZW1wbG95ZWVTaGVldHMiLCJjeWNsZVN0YXJ0RGF0ZSIsImN5Y2xlRW5kRGF0ZSIsIm5ld1NoZWV0IiwiZGF0ZXMiLCJsb2NrZWQiLCJob3Vyc1BlckRheSIsInNvcnQiLCJhIiwiYiIsImZpbmQiLCJzIiwiYXR0ZW5kYW5jZSIsInN1bW1hcnkiLCJwb3RlbnRpYWxXb3JraW5nSG91cnMiLCJwb3RlbnRpYWxXb3JraW5nRGF5cyIsImRpcnR5Iiwibm93Iiwibm9uV29ya2luZ0RheSIsImhvdXJzVG9Xb3JrIiwiZmF2b3JpdGVkIiwiZGF0ZURlc2NyaXB0aW9uIiwibm90ZSIsImRlc2NyaXB0aW9uIiwiaGFzQ29tbWVudCIsInBhaWRUaW1lb2ZmU2Vjb25kcyIsImZhdm9yaXRlIiwiZ2V0RmF2b3JpdGVkRGF0ZSIsImNoYW5nZVN0YXJ0SG91ciIsImluZGV4IiwiZCIsInF1ZXVlU2F2ZSIsImNoYW5nZUxlbmd0aEhvdXJzIiwiY2hhbmdlUmVhc29uIiwiY2hhbmdlQ29tbWVudCIsInRvZ2dsZUNvbW1lbnQiLCJvbGRGYXZvcml0ZSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJnZXRJdGVtIiwiZmV0Y2hTaGVldCIsImRlbGV0ZUVudHJ5Iiwic3BsaWNlIiwib3JpZ2luYWxEYXRlIiwib3JpZ2luYWxTaGVldCIsImRhdGVJbmRleCIsImluZGV4T2YiLCJlbnRyeUluZGV4Iiwic2hlZXRJbmRleCIsImxhc3QiLCJmaW5kTGFzdEVudHJ5IiwiaW5jbHVkZXMiLCJlbnRyeSIsImNsZWFyVGltZW91dCIsInNhdmUiLCJXYWl0aW5nIiwiU2F2aW5nIiwibWluaW11bVdhaXQiLCJzdWJtaXQiLCJFcnJvciIsImdldEZsZXhQb2xpY3kiLCJwcmV2aW91c0RheXNJbmNsdWRlZCIsImZsZXhXYXJuaW5nVGhyZXNob2xkIiwiY2FjaGVLZXkiLCJyZW1vdmVJdGVtIiwic2hlZXRCYWxhbmNlcyIsImRheSIsImJhbGFuY2UiLCJzdW0iLCJkYXRlU3RyaW5nIiwicmVhbEJhbGFuY2UiLCJyZWFsbG9jYXRlZEJhbGFuY2UiLCJwb2xpY3kiLCJjdXJyZW50RGF0ZVRpbWUiLCJvdmVyZHVlRGF0ZVRpbWUiLCJ3YXJuaW5nRGF0ZVRpbWUiLCJhbGxEYXRlcyIsImdldENhY2hlZEJhbGFuY2VzIiwiaiIsInByZXZEYXRlIiwiYW1vdW50IiwibWluIiwiYWJzIiwidW5iYWxhbmNlZERhdGVzIiwib3ZlcmR1ZURhdGVzIiwid2FybmluZ0RhdGVzIiwiVGltZWxvZ1VJU2V0dGluZ3NCdXR0b25zIiwiYnV0dG9ucyIsInRleHQiLCJ0aXRsZSIsIm9uQ2xpY2siLCJ1aSIsIm1vZGVsIiwiY2xlYXJTaGVldEJhbGFuY2VDYWNoZSIsInRoZW4iLCJ1cGRhdGVCYWxhbmNlIiwiVGltZWxvZ1VJIiwic2hlZXREcm9wZG93bk9wdGlvbnMiLCJzaGVldERhdGVzIiwid2Vla1N1bXMiLCJvbkRhcmtNb2RlQ2hhbmdlIiwidGltZWxvZyIsImFkZEJ1dHRvbiIsInBhcmVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0b2dnbGVCdXR0b24iLCJnZXQiLCJvbmNsaWNrIiwidG9nZ2xlVmlzaWJsZSIsImNyZWF0ZVVJIiwiY3JlYXRlTW9kZWwiLCJsb2NhdGlvbiIsImhhc2giLCJpc0RhcmtNb2RlIiwidGltZWxvZ1VJT3V0ZXIiLCJkaXNwbGF5Iiwib3ZlcmZsb3ciLCJzaGVldENvbnRhaW5lciIsImlubmVySFRNTCIsIm9uU2hvdyIsInRvZ2dsZURhcmtNb2RlIiwiYXBwZW5kIiwidGltZWxvZ1VJSW5uZXIiLCJjbG9zZUJ1dHRvbiIsImRhcmtNb2RlQnV0dG9uIiwiZGFyayIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInNldHRpbnNXaW5kb3ciLCJjcmVhdGVTZXR0aW5nc1dpbmRvdyIsInNldHRpbmdzQnV0dG9uIiwiY3Vyc29yIiwidGV4dERlY29yYXRpb24iLCJzaGVldERyb3Bkb3duTGFiZWwiLCJzaGVldERyb3Bkb3duIiwib25jaGFuZ2UiLCJvblNlbGVjdGVkU2hlZXRDaGFuZ2UiLCJzYXZlU3RhdHVzIiwib25TYXZlU3RhdHVzQ2xpY2siLCJiYWxhbmNlUGFyZW50IiwiYmFsYW5jZUxhYmVsIiwiYmFsYW5jZVdhcm5pbmciLCJlbGVtZW50IiwiYmFjayIsImlubmVyIiwic2V0dGluZ3NFbGVtZW50IiwiYnV0dG9uIiwiY2hhbmdlbG9nIiwidmVyc2lvbiIsInZlcnNpb25FbGVtZW50IiwidmVyc2lvblRpdGxlIiwibGlzdCIsInRleHRFbGVtZW50IiwiaW5pdGlhbGl6ZSIsImdldERhdGVDb250YWluZXIiLCJzZWxlY3RlZFNoZWV0IiwiZGF0ZUNvbnRhaW5lciIsInN0YXJCdXR0b24iLCJwYXN0ZUJ1dHRvbiIsIndlZWtlbmREZXNjcmlwdGlvbiIsIm5vRW50cmllc1dhcm5pbmciLCJ3ZWVrU2VwZXJhdG9yIiwic2V0RmF2b3JpdGVkRGF0ZSIsInRvRGF0ZVN0cmluZyIsIm5ld0VudHJ5IiwicGFzdGVGcm9tU3RhcnJlZCIsImFkZFRvV2Vla1N1bSIsImdldEVudHJ5Q29udGFpbmVyIiwiZW50cnlDb250YWluZXIiLCJwIiwiZW5kSG91ciIsImNvbW1lbnRCdXR0b24iLCJub1JlYXNvbldhcm5pbmciLCJ0eXBlIiwiZGlzYWJsZWQiLCJwYXJzZVRpbWVUb2hvdXJzIiwiZW5kTGFiZWwiLCJ1cGRhdGVSZWFzb25zRHJvcGRvd24iLCJzdW1Ib3VycyIsInN0ZXAiLCJ1bnNjYWxlIiwicGFyc2VGbG9hdCIsImR1cmF0aW9uTGFiZWwiLCJwbGFjZWhvbGRlciIsIndlZWtTdW0iLCJtYXJnaW5Ub3AiLCJmb3JtYXRIb3VyIiwicmVtb3ZlZEVudHJpZXMiLCJ3IiwidG90YWxIb3VycyIsIndlZWtOdW1iZXIiLCJnZXRXZWVrTnVtYmVyRnJvbURhdGUiLCJzZWxlY3QiLCJvcHRpb24iLCJjb250YWlucyIsIm8iLCJnZXRGbGV4U3RhdHVzIiwidG90YWxCYWxhbmNlIiwib3B0T3V0IiwiaXNBcHJpbEZvb2xzIiwic2V0QXByaWxGb29sc09wdE91dCIsImdldEFwcmlsRm9vbHNPcHRPdXQiLCJyZWxvYWQiLCJob3VyMlRlcmFsaWdodG1ldGVyU2NhbGluZyIsInNob3dBcHJpbEZvb2xzUG9wdXAiLCJzZXRIYXNTZWVuUG9wdXAiLCJoYXNTZWVuUG9wdXAiLCJkaXNtaXNzIiwicG9wdXBFbGVtZW50IiwiaXNFYXJseUFwcmlsRm9vbHMiLCJpbml0Iiwic3VibWl0dGluZyIsImNsb2NrSW5CdXR0b25GaW5kZXIiLCJyZWFzb25FbmhhbmNlbWVudFVJIiwibGFiZWwiLCJyZWFzb25TZWxlY3QiLCJzYXZlRGVmYXVsdFJlYXNvblZhbHVlIiwiY2FuY2VsQnV0dG9uIiwiY2FuY2VsIiwic3VibWl0QnV0dG9uIiwic3VibWl0dGluZ1RleHQiLCJmaW5kVW5lbmhhbmNlZEJ1dHRvbnMiLCJlbmhhbmNlQ2xvY2tJbkJ1dHRvbiIsIkZpeExhdGVzdCIsIkZpeEFsbCIsImFwcFJvb3QiLCJzZWxlY3RvciIsInF1ZXJ5IiwicXVlcnlTZWxlY3RvckFsbCIsIm1vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwic2hvd1JlYXNvbkZpeGVyIiwibG9hZERlZmF1bHRSZWFzb25WYWx1ZSIsInNldFVJVmlzaWJsZSIsImZpeEFsbCIsImZpeExhdGVzdCIsImxhdGVzdCJdLCJzb3VyY2VSb290IjoiIn0=