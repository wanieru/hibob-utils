// ==UserScript==
// @name        HiBob Time Utilities
// @version     1.1.0
// @author      Funday Factory
// @description Utilities to make it easier to log time in HiBob
// @match       https://app.hibob.com/*
// @namespace   http://tampermonkey.net/
// @icon        https://www.google.com/s2/favicons?sz=64&domain=hibob.com
// @grant       none
// ==/UserScript==

(()=>{"use strict";class e{static xhr(e,t,n){return new Promise((s=>{let a=new XMLHttpRequest;a.open(e,t),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Content-Type","application/json"),a.onreadystatechange=()=>{if(4===a.readyState){let e;try{e=JSON.parse(a.responseText)}catch(t){e={result:a.responseText}}if(200!==a.status){if(e.hasOwnProperty("error")){const t=e.hasOwnProperty("key")?e.key:a.status.toString();alert(`HiBob Utils: Error ${t} - ${e.error}`)}else alert(`HiBob Utils: Error ${a.status} - check the developer console for more information.`);console.log(`HiBob Utils: Error ${a.status}.`),console.log(a)}s({status:a.status,body:e})}},a.send(JSON.stringify(n))}))}}class t{static parse(e){if(!e)return null;const t=e.split("T");return t.length<2&&t.push("00:00"),new Date(t.join("T")).getTime()}static format(e,t){if(!e)return"";const n=new Date(e);return`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}-${n.getDate().toString().padStart(2,"0")}${t?`T${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`:""}`}static formatHour(e){const t=Math.floor(e%24),n=Math.round(60*(e-t));return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}static getWeekNumberFromDate(e){var t=new Date(e);t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)}static parseTimeTohours(e){const t=e.split(":");return parseInt(t[0])+parseInt(t[1])/60}}class n{static async submit(n,s){if(s.some((e=>!e.reasonId)))return console.log("WARNING: SOME ENTRIES HAVE NO REASON SET - NOT SUBMITTING!!",n,s),!1;const a=s.map((e=>{var s;return{start:t.format(n+3600*e.startHour*1e3,!0),end:e.lengthHours?t.format(n+3600*(e.startHour+e.lengthHours)*1e3,!0):void 0,reason:e.reasonId,comment:null!==(s=e.comment)&&void 0!==s?s:void 0}})),o=t.format(n,!1),i=await this.getUserId();return 200===(await e.xhr("POST",`https://app.hibob.com/api/attendance/employees/${i}/attendance/entries?forDate=${o}`,a)).status}static async timelogReasons(){return(await this.metadata()).timeLogEntryReason.values.map((e=>({id:e.serverId,name:e.value})))}static async attendance(t){return(await e.xhr("GET",`https://app.hibob.com/api/employees/attendance/my/sheets/${t}`,{})).body}static async sheets(){const t=await this.getUserId();return(await e.xhr("GET",`https://app.hibob.com/api/employees/${t}/timelog/attendance/sheets`,{})).body}static async metadata(){return(await e.xhr("GET","https://app.hibob.com/api/company/metadata/lists/?includeArchived=true",{})).body}static async getUserId(){var e;return"string"!=typeof this.userId&&await this.userInfo(),null!==(e=this.userId)&&void 0!==e?e:""}static async userInfo(){const t=await e.xhr("GET","https://app.hibob.com/api/user",{});return this.userId=t.body.id,t.body}}class s{static for(e){return new Promise((t=>{window.setTimeout((()=>t()),e)}))}static until(e){return new Promise((t=>{const n=window.setInterval((()=>{e()&&(t(),window.clearInterval(n))}),1)}))}}var a,o;!function(e){e[e.FixAll=0]="FixAll",e[e.FixLatest=1]="FixLatest"}(a||(a={}));class i{constructor(){this.handlers=[]}on(e,t){this.handlers.push({handler:e,context:t})}off(e,t){this.handlers=this.handlers.filter((n=>n.handler!==e||n.context!==t))}fire(e){this.handlers.forEach((t=>t.handler.call(t.context,e)))}}class r{static initialize(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200",e.rel="stylesheet",document.head.appendChild(e)}static get(e,t=!1){const n=document.createElement("span");return n.className="material-symbols-outlined",n.innerText=e,n.style.verticalAlign="middle",n.style.fontSize="1.5em",n.style.fontVariationSettings="'FILL' "+(t?1:0),n}}class l{static round(e,t){return Math.round(e*10**t)/10**t}static floor(e,t){return Math.floor(e*10**t)/10**t}static ceil(e,t){return Math.ceil(e*10**t)/10**t}static sum(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}}!function(e){e[e.Waiting=0]="Waiting",e[e.Saving=1]="Saving",e[e.Saved=2]="Saved",e[e.Error=3]="Error"}(o||(o={}));class d{constructor(){this.sheets=[],this.onDateUpdated=new i,this.onReasonsUpdated=new i,this.onSheetUpdated=new i,this.onSheetsUpdated=new i,this.onSaveStatusUpdated=new i,this.saveHandle=-1,this.saving=!1,this.calculatingFlex=!1,this.fetchingSheets=!1,this.reasons=[]}async initialize(){await this.fetchSheets(),await this.fetchReasons(),this.onSaveStatusUpdated.fire(o.Saved)}async fetchSheets(){var e,a;await s.until((()=>!this.fetchingSheets)),this.fetchingSheets=!0,this.sheets=[];const o=await n.sheets();for(const n of o.employeeSheets){const s=null!==(e=t.parse(n.cycleStartDate))&&void 0!==e?e:0,o=null!==(a=t.parse(n.cycleEndDate))&&void 0!==a?a:0,i={id:n.id,status:n.status,start:s,end:o,dates:[],locked:n.locked,hoursPerDay:0};this.sheets.push(i)}this.sheets.sort(((e,t)=>t.start-e.start)),this.onSheetsUpdated.fire(this.sheets),this.fetchingSheets=!1}async fetchReasons(){this.reasons=(await n.metadata()).timeLogEntryReason.values,this.onReasonsUpdated.fire(this.reasons)}async fetchSheet(e){var s;const a=this.sheets.find((t=>t.id===e));if(!a)return;const o=await n.attendance(e);a.hoursPerDay=o.summary.potentialWorkingHours/o.summary.potentialWorkingDays,a.dates=[];for(const e of o.attendance){const n={dirty:!1,date:null!==(s=t.parse(e.date))&&void 0!==s?s:Date.now(),weekend:"WeekendEvent"===e.status,favorited:!1,entries:e.entries.map((n=>{var s,a,o,i,r;return{startHour:l.floor(((null!==(s=t.parse(n.start))&&void 0!==s?s:Date.now())-(null!==(a=t.parse(e.date))&&void 0!==a?a:Date.now()))/36e5,2),lengthHours:l.ceil(((null!==(o=t.parse(n.end))&&void 0!==o?o:Date.now())-(null!==(i=t.parse(n.start))&&void 0!==i?i:Date.now()))/36e5,2),reasonId:n.reason,comment:null!==(r=n.comment)&&void 0!==r?r:null,hasComment:!!n.comment}})).sort(((e,t)=>e.startHour-t.startHour))};a.dates.push(n)}a.dates.sort(((e,t)=>t.date-e.date));const i=await this.getFavoritedDate();i&&i.sheet===a&&(i.date.favorited=!0),this.onSheetUpdated.fire(a)}changeStartHour(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].startHour=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}changeLengthHours(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].lengthHours=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}changeReason(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].reasonId=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}changeComment(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].comment=n,e.entries[t].hasComment=!0,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}toggleComment(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries[t].hasComment=!e.entries[t].hasComment,e.entries[t].comment=e.entries[t].hasComment?"":null,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}async setFavoritedDate(e){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!n)return;const s=await this.getFavoritedDate();s&&(s.date.favorited=!1,this.onDateUpdated.fire(s)),e.favorited=!0,this.onDateUpdated.fire({sheet:n,date:e}),window.localStorage.setItem("tl_favorite",JSON.stringify({date:t.format(e.date,!1)}))}async getFavoritedDate(){const e=window.localStorage.getItem("tl_favorite");if(!e)return null;const n=JSON.parse(e),s=t.parse(n.date);if("number"==typeof s){const e=this.sheets.find((e=>e.start<=s&&e.end>=s));if(e){e.dates.length<1&&await this.fetchSheet(e.id);const t=e.dates.find((e=>e.date===s));if(t)return{sheet:e,date:t}}}return null}deleteEntry(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries.splice(t,1),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}async findLastEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;let n=t.dates.indexOf(e),s=-1;for(let e=this.sheets.indexOf(t);e<this.sheets.length;e++){const t=this.sheets[e];for(t.dates.length<1&&await this.fetchSheet(t.id);n<t.dates.length;n++){const e=t.dates[n];if(e.entries.length>0)return s<0?e.entries[e.entries.length-1]:e.entries[s];s=0}n=0}}async newEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const n=await this.findLastEntry(e);let s=8.5,a=l.round(t.hoursPerDay,2),o="";n&&(e.entries.includes(n)&&(s=n.startHour+n.lengthHours,a=1),o=n.reasonId),e.entries.push({startHour:s,lengthHours:a,reasonId:o,comment:null,hasComment:!1}),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}async pasteFromStarred(e){if(e.entries.length>0)return;const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const n=await this.getFavoritedDate();if(n&&n.date!==e){for(const t of n.date.entries)e.entries.push({startHour:t.startHour,lengthHours:t.lengthHours,reasonId:t.reasonId,comment:t.comment,hasComment:t.hasComment});e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}}queueSave(){window.clearTimeout(this.saveHandle),this.saveHandle=window.setTimeout((()=>this.save()),500),this.onSaveStatusUpdated.fire(o.Waiting)}async save(){await s.until((()=>!this.saving)),this.saving=!0,this.onSaveStatusUpdated.fire(o.Saving);const e=s.for(100);let t=!1;for(const e of this.sheets)for(const s of e.dates)s.dirty&&(await n.submit(s.date,s.entries)?s.dirty=!1:t=!0);await e,this.onSaveStatusUpdated.fire(t?o.Error:o.Saved),this.saving=!1}static getBalanceCalculationDescription(){return"Flex hours is calculated using the hours worked in the previous 28 days."}async getCurrentBalanceHours(){var e,n,a;const o=null!==(e=t.parse(t.format(Date.now(),!1)))&&void 0!==e?e:0,i=null!==(n=t.parse(t.format(o-23328e5,!1)))&&void 0!==n?n:0,r={};let d=0;if(this.sheets){await s.until((()=>!this.calculatingFlex)),this.calculatingFlex=!0;for(let e=this.sheets.length-1;e>=0;e--){const t=this.sheets[e];if(!t)continue;let n=[];const s=`tl_cached_hour_balances_${t.id}`;if(t.locked&&null!==window.localStorage.getItem(s))n=JSON.parse(null!==(a=window.localStorage.getItem(s))&&void 0!==a?a:"[]");else{if(t.dates.length<1&&await this.fetchSheet(t.id),t.dates.some((e=>e.entries.length>0&&e.entries.some((e=>e.lengthHours>0)))))for(const e of t.dates){const s=e.weekend?0:t.hoursPerDay,a=l.sum(e.entries.map((e=>e.lengthHours)))-s;n.push({date:e.date,balance:a})}t.locked&&t.id>0&&window.localStorage.setItem(s,JSON.stringify(n))}d+=l.sum(n.filter((e=>e.date>=i&&e.date<=o)).map((e=>e.balance))),r[t.id.toString()]=l.sum(n.map((e=>e.balance)))}this.calculatingFlex=!1}return{sheets:r,balance:d}}}r.initialize(),new class{constructor(){this.sheetDropdownOptions=[],this.sheetDates=[],this.weekSums=[],this.reasons=[],this.onDarkModeChange=new i,window.timelog=this,this.addButton()}async addButton(){for(;;){const e=document.querySelector("div.app-content > app-top-bar.app-top-bar > div.actions");if(e){this.toggleButton=document.createElement("button"),this.toggleButton.className="tl-toggle-btn",this.toggleButton.appendChild(r.get("sentiment_very_satisfied")),this.toggleButton.title="HiBob Utilities",this.toggleButton.onclick=()=>this.toggleVisible(),e.appendChild(this.toggleButton),this.createUI(),await this.createModel(),"#tl-ui"===location.hash&&this.toggleVisible(),this.onDarkModeChange.fire(this.isDarkMode());break}await s.for(1)}}toggleVisible(){var e;this.timelogUIOuter&&("none"===this.timelogUIOuter.style.display?(this.timelogUIOuter.style.display="block",location.hash="#tl-ui",document.body.style.overflow="hidden",this.sheetContainer&&(this.sheetContainer.innerHTML=""),null===(e=this.model)||void 0===e||e.fetchSheets()):(this.timelogUIOuter.style.display="none",location.hash="",document.body.style.overflow="initial"))}isDarkMode(){return"true"===localStorage.getItem("tl_dark_mode")}toggleDarkMode(){this.isDarkMode()?localStorage.setItem("tl_dark_mode","false"):localStorage.setItem("tl_dark_mode","true"),this.onDarkModeChange.fire(this.isDarkMode())}createUI(){const e=document.createElement("style");e.innerHTML="\n.tl-toggle-btn\n{\n    border: none;\n    background: none;\n    font-size: 2em;\n}\n.tl-close-btn\n{\n    font-size: 2em;\n    position: absolute;\n    right: 5px;\n}\n.tl-ui\n{\n    position: fixed;\n    z-index: 1000;\n    inset: 0px;\n    background-color: white;\n    overflow-y: scroll;\n    padding: 10px;\n}        \n.tl-date\n{\n    margin-top: 10px;\n    padding: 10px;\n    border: 1px solid gray;\n    border-radius: 5px;\n}\n.tl-save-status, .tl-add-entry-btn\n{\n    margin-left: 10px;\n}\n.tl-entry\n{\n    margin-top: 5px;\n}\n.tl-entry > *\n{\n    margin-left: 5px;\n}\n.tl-entry > input[type=number]\n{\n    width: 50px;\n}\n.tl-entry > input[type=time]\n{\n    width: 75px;\n}\n.tl-save-status\n{\n    font-weight: bold;\n}\n.tl-sheet-select\n{\n    margin-left: 5px;\n}\n.tl-date-label\n{\n    font-weight: bold;\n}\n.tl-date-label.tl-date-label-weekend\n{\n    font-weight: initial;\n    font-style: italic;\n    color: gray;\n}\n.tl-entry-reason \n{\n    padding: 3px;\n}\n.tl-remove-entry-btn\n{\n    float: right;\n}\n.tl-week-seperator\n{\n    margin-top: 57px;\n}\n.tl-balance-label\n{\n    margin: 5px;\n    display: inline-block;\n}\n.tl-balance-help\n{\n    display: inline-block;\n    cursor: help;\n}\n\n.tl-ui-inner\n{\n    display: table;\n    margin-left: auto;\n    margin-right: auto;\n}\n.tl-ui-inner, .tl-week-seperator, .tl-date\n{\n    min-width: 650px;\n}\n.tl-entry-comment {\n    margin-top: 5px;\n    margin-bottom: 15px;\n    width: 100%;\n    display: none;\n}\n.tl-has-comment .tl-entry-comment\n{\n    display: block;\n}\n.tl-success\n{\n    color: #02B875;\n}\n.tl-warning\n{\n    color: #F0AF52;\n}\n.tl-danger\n{\n    color: #DA5652;\n}\n.tl-sum-hours\n{\n    position: absolute;\n    margin-top: -23px;\n}\n.tl-week-sum\n{\n    position: absolute;\n    margin-top: -57px;\n    text-decoration: underline;\n}\n.tl-ui button.tl-star-button, .tl-ui.tl-dark button.tl-star-button\n{\n    background: none;\n    border: none;\n    margin: 0;\n    padding: 0;\n}\n.tl-ui button.tl-star-button.tl-favorite, .tl-ui.tl-dark button.tl-star-button.tl-favorite\n{\n    color: #f1a00b;\n    opacity: 1;\n}\n.tl-paste-btn {\n    margin-left: 5px;\n    display: none;\n}\n.tl-has-favorite .tl-paste-btn:not(.tl-hide-favorite-button)\n{\n    display: inline-block;\n}\n.tl-show-on-hover\n{\n    opacity: 0;\n}\n.tl-date:hover .tl-show-on-hover\n{\n    opacity: 1;\n}\n.tl-no-reason-warning {\n    margin-left: 180px;\n    position: absolute;\n    margin-top: -22px;\n    font-weight: bold;\n    background-color: white;\n    user-select: none;\n    pointer-events: none;\n}\n.tl-no-reason-warning.tl-has-reason\n{\n    display: none;\n}\n.tl-clickable\n{\n    cursor: pointer;\n}\n.tl-dark-mode-btn {\n    position: fixed;\n    bottom: 5px;\n    right: 20px;\n}\n.tl-ui button\n{\n    background-color: #d9d9d9;\n    border: 1px solid gray;\n    border-radius: 5px;\n}\n.tl-ui button:hover\n{\n    background-color: #efebeb;\n}\n\n.tl-ui.tl-dark\n{\n    background-color: #1E1E1E;\n    color: white;\n}\n.tl-ui.tl-dark select, .tl-ui.tl-dark input {\n    color: white;\n    background-color: #252526;\n    border: 1px gray solid;\n    color-scheme: dark;\n}\n.tl-ui.tl-dark button\n{\n    background-color: #333333;\n    border: 1px solid #282828;\n    color: white;\n}\n.tl-ui.tl-dark button:hover\n{\n    background-color: #525252;\n}\n.tl-ui.tl-dark .tl-no-reason-warning\n{\n    background-color: #252526;\n}\n\n",document.body.appendChild(e),this.timelogUIOuter=document.createElement("div"),this.timelogUIOuter.className="tl-ui",this.timelogUIOuter.style.display="none",document.body.append(this.timelogUIOuter),this.timelogUIInner=document.createElement("div"),this.timelogUIInner.className="tl-ui-inner",this.timelogUIOuter.append(this.timelogUIInner);const t=document.createElement("button");t.className="tl-close-btn",t.appendChild(r.get("close")),t.onclick=()=>this.toggleVisible(),this.timelogUIInner.appendChild(t),this.darkModeButton=document.createElement("button"),this.darkModeButton.className="tl-dark-mode-btn",this.darkModeButton.onclick=()=>this.toggleDarkMode(),this.timelogUIInner.appendChild(this.darkModeButton),this.onDarkModeChange.on((e=>{var t,n;e?null===(t=this.timelogUIOuter)||void 0===t||t.classList.add("tl-dark"):null===(n=this.timelogUIOuter)||void 0===n||n.classList.remove("tl-dark"),this.darkModeButton&&(this.darkModeButton.innerHTML="",this.darkModeButton.append(e?r.get("light_mode"):r.get("dark_mode")))}),this);const n=document.createElement("span");n.innerText="Sheet:",this.timelogUIInner.appendChild(n),this.sheetDropdown=document.createElement("select"),this.sheetDropdown.className="tl-sheet-select",this.sheetDropdown.onchange=()=>this.onSelectedSheetChange(),this.timelogUIInner.appendChild(this.sheetDropdown),this.saveStatus=document.createElement("span"),this.saveStatus.className="tl-save-status",this.saveStatus.onclick=()=>this.onSaveStatusClick(),this.timelogUIInner.append(this.saveStatus);const s=document.createElement("div");s.className="tl-balance",this.timelogUIInner.append(s),this.balanceLabel=document.createElement("div"),this.balanceLabel.innerText="Balance: ",this.balanceLabel.className="tl-balance-label",s.append(this.balanceLabel);const a=document.createElement("div");a.append(r.get("help")),a.className="tl-balance-help",a.title=d.getBalanceCalculationDescription(),s.append(a),this.sheetContainer=document.createElement("div"),this.sheetContainer.className="tl-sheet",this.timelogUIInner.appendChild(this.sheetContainer)}async createModel(){this.model&&(this.model.onDateUpdated.off(this.onDateUpdated,this),this.model.onReasonsUpdated.off(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.off(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.off(this.onSheetUpdated,this),this.model.onSheetsUpdated.off(this.onSheetsUpdated,this)),this.model=new d,this.model.onDateUpdated.on(this.onDateUpdated,this),this.model.onReasonsUpdated.on(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.on(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.on(this.onSheetUpdated,this),this.model.onSheetsUpdated.on(this.onSheetsUpdated,this),await this.model.initialize()}getDateContainer(e){if(this.selectedSheet===e.sheet&&this.sheetContainer){let t=this.sheetDates.find((t=>t.date===e.date));if(!t){if(t={date:e.date,parent:document.createElement("div"),entries:[],starButton:document.createElement("button"),pasteButton:document.createElement("button")},this.sheetDates.push(t),t.parent.className="tl-date",this.sheetContainer.appendChild(t.parent),1===new Date(e.date.date).getDay()){const e=document.createElement("div");e.className="tl-week-seperator",this.sheetContainer.appendChild(e)}t.parent.append(t.starButton),t.starButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.setFavoritedDate(e.date)},t.starButton.className="tl-star-button tl-show-on-hover",t.starButton.title="Favorite Day";const n=document.createElement("span");if(n.className="tl-date-label",n.innerText=new Date(e.date.date).toDateString(),e.date.weekend&&n.classList.add("tl-date-label-weekend"),t.parent.append(n),!e.sheet.locked){const n=document.createElement("button");n.appendChild(r.get("add")),n.className="tl-add-entry-btn tl-show-on-hover",n.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.newEntry(e.date)},t.parent.append(n),t.pasteButton=document.createElement("button"),t.pasteButton.appendChild(r.get("switch_access_shortcut_add")),t.pasteButton.title="Paste from Favorite Day",t.pasteButton.className="tl-paste-btn tl-show-on-hover",t.pasteButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.pasteFromStarred(e.date)},t.parent.append(t.pasteButton)}this.addToWeekSum(t)}return t}return null}getEntryContainer(e,n,s){let a=n.entries.find((e=>e.entry===s));if(!a){a={entry:s,parent:document.createElement("div"),startHour:document.createElement("input"),endHour:document.createElement("input"),length:document.createElement("input"),reason:document.createElement("select"),comment:document.createElement("input"),commentButton:document.createElement("button"),noReasonWarning:document.createElement("div")},n.entries.push(a),a.parent.className="tl-entry",n.parent.appendChild(a.parent),a.startHour.type="time",a.startHour.className="tl-entry-start",e.sheet.locked&&(a.startHour.disabled=!0),a.startHour.onchange=()=>{var n,o,i;const r=s.startHour+s.lengthHours;null===(n=this.model)||void 0===n||n.changeStartHour(e.date,e.date.entries.indexOf(s),t.parseTimeTohours(null!==(o=null==a?void 0:a.startHour.value)&&void 0!==o?o:"08:00"));const d=l.round(r-s.startHour,2);null===(i=this.model)||void 0===i||i.changeLengthHours(e.date,e.date.entries.indexOf(s),d)},a.parent.appendChild(a.startHour);const o=document.createElement("span");o.className="tl-end-label",o.innerText="-",a.parent.appendChild(o),a.endHour.type="time",a.endHour.className="tl-entry-end",e.sheet.locked&&(a.endHour.disabled=!0),a.endHour.onchange=()=>{var n;if(null==a?void 0:a.endHour){const o=l.round(t.parseTimeTohours(a.endHour.value)-s.startHour,2);null===(n=this.model)||void 0===n||n.changeLengthHours(e.date,e.date.entries.indexOf(s),o)}},a.parent.appendChild(a.endHour),a.reason.onchange=()=>{var t,n;return null===(t=this.model)||void 0===t?void 0:t.changeReason(e.date,e.date.entries.indexOf(s),null!==(n=null==a?void 0:a.reason.value)&&void 0!==n?n:"")},e.sheet.locked&&(a.reason.disabled=!0),a.reason.className="tl-entry-reason",a.parent.appendChild(a.reason),this.updateReasonsDropdown(a.reason),1===n.entries.length&&(n.sumHours=document.createElement("span"),n.sumHours.className="tl-sum-hours",a.parent.append(n.sumHours)),a.length.type="number",a.length.className="tl-entry-length",a.length.step="0.01",e.sheet.locked&&(a.length.disabled=!0),a.length.onchange=()=>{var t;null===(t=this.model)||void 0===t||t.changeLengthHours(e.date,e.date.entries.indexOf(s),parseFloat((null==a?void 0:a.length.value)||"0"))},a.parent.appendChild(a.length);const i=document.createElement("span");if(i.className="tl-duration-label",i.innerText="hour(s)",a.parent.appendChild(i),!e.sheet.locked){a.commentButton.className="tl-add-comment-btn tl-show-on-hover",a.commentButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.toggleComment(e.date,e.date.entries.indexOf(s))},a.parent.appendChild(a.commentButton);const t=document.createElement("button");t.appendChild(r.get("delete")),t.className="tl-remove-entry-btn tl-show-on-hover",t.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.deleteEntry(e.date,e.date.entries.indexOf(s))},a.parent.appendChild(t)}a.noReasonWarning.append(r.get("warning",!0)),a.noReasonWarning.append(" No reason selected!"),a.noReasonWarning.className="tl-no-reason-warning tl-warning tl-has-reason",a.parent.appendChild(a.noReasonWarning),a.comment.type="text",a.comment.placeholder="Write a note...",a.comment.title="Write a note...",a.comment.className="tl-entry-comment",e.sheet.locked&&(a.comment.disabled=!0),a.comment.onchange=()=>{var t,n;null===(t=this.model)||void 0===t||t.changeComment(e.date,e.date.entries.indexOf(s),null!==(n=null==a?void 0:a.comment.value)&&void 0!==n?n:"")},a.parent.appendChild(a.comment)}return a}addToWeekSum(e){if(this.weekSums.length<1||0===new Date(e.date.date).getDay()){const t={dates:[e],element:document.createElement("div")};t.element.className="tl-week-sum",this.weekSums.push(t),e.parent.appendChild(t.element),e.parent.style.marginTop="38px"}else this.weekSums[this.weekSums.length-1].dates.push(e)}onDateUpdated(e){var n;if(this.selectedSheet===e.sheet&&this.sheetContainer){let s=this.getDateContainer(e);if(s){for(const a of e.date.entries){let o=this.getEntryContainer(e,s,a);o.startHour.value=t.formatHour(a.startHour),o.length.value=a.lengthHours.toString(),o.endHour.value=t.formatHour(a.startHour+a.lengthHours),o.reason.value=a.reasonId,o.comment.value=null!==(n=a.comment)&&void 0!==n?n:"",a.reasonId?o.noReasonWarning.classList.add("tl-has-reason"):o.noReasonWarning.classList.remove("tl-has-reason"),o.commentButton.title=a.hasComment?"Remove note":"Add note",o.commentButton.innerHTML="",o.commentButton.appendChild(r.get(a.hasComment?"speaker_notes_off":"speaker_notes")),a.hasComment?o.parent.classList.add("tl-has-comment"):o.parent.classList.remove("tl-has-comment")}const a=s.entries.filter((t=>!e.date.entries.find((e=>e===t.entry))));if(s.entries=s.entries.filter((e=>!a.includes(e))),a.forEach((e=>e.parent.remove())),s.sumHours){const t=l.sum(e.date.entries.map((e=>e.lengthHours)));s.sumHours.innerText=`${l.round(t,2)} hour${1===t?"":"s"}`}s.starButton.innerHTML="",s.starButton.disabled=e.date.favorited,s.starButton.classList.remove("tl-favorite"),s.starButton.appendChild(r.get("star",e.date.favorited)),e.date.favorited&&s.starButton.classList.add("tl-favorite"),s.entries.length>0||s.date.favorited?s.pasteButton.classList.add("tl-hide-favorite-button"):s.pasteButton.classList.remove("tl-hide-favorite-button")}const a=this.weekSums.find((t=>t.dates.some((t=>t.date===e.date))));if(a){const n=l.sum(a.dates.map((e=>l.sum(e.entries.map((e=>e.entry.lengthHours)))))),s=a.dates.filter((e=>!e.date.weekend)).length,o=e.sheet.hoursPerDay*s,i=t.getWeekNumberFromDate(a.dates[0].date.date);a.element.innerHTML=`<b>Week ${i}</b>: ${l.round(n,2)} / ${l.round(o,2)} hours`}}this.updateBalance()}updateReasonsDropdown(e){e.innerHTML="";for(const t of this.reasons){const n=document.createElement("option");n.value=t.serverId,n.innerText=t.value,e.appendChild(n)}}onReasonsUpdated(e){this.reasons=e;for(const e of this.sheetDates)for(const t of e.entries)this.updateReasonsDropdown(t.reason)}onSaveStatusUpdated(e){this.saveStatus&&(this.saveStatus.innerHTML="",this.saveStatus.classList.remove("tl-success"),this.saveStatus.classList.remove("tl-warning"),this.saveStatus.classList.remove("tl-clickable"),e===o.Saved&&(this.saveStatus.appendChild(r.get("cloud_done",!0)),this.saveStatus.append(" Saved"),this.saveStatus.classList.add("tl-success")),e===o.Waiting&&(this.saveStatus.appendChild(r.get("pending")),this.saveStatus.append(" Pending...")),e===o.Saving&&(this.saveStatus.appendChild(r.get("cloud_upload")),this.saveStatus.append(" Saving...")),e===o.Error&&(this.saveStatus.appendChild(r.get("cloud_off")),this.saveStatus.append(" Failed!"),this.saveStatus.classList.add("tl-warning"),this.saveStatus.classList.add("tl-clickable")))}onSaveStatusClick(){var e,t;(null===(e=this.saveStatus)||void 0===e?void 0:e.classList.contains("tl-clickable"))&&(null===(t=this.model)||void 0===t||t.save())}onSheetUpdated(e){if(this.sheetDropdown&&!this.sheetDropdownOptions.find((t=>t.sheet===e))){const t=document.createElement("option");t.value=e.id.toString(),t.innerText=`${new Date(e.start).toDateString()} - ${new Date(e.end).toDateString()}${e.locked?" (locked)":""}`,this.sheetDropdownOptions.push({sheet:e,element:t}),this.sheetDropdown.appendChild(t)}this.selectedSheet===e&&(this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[],this.weekSums=[]);for(const t of e.dates)this.onDateUpdated({sheet:e,date:t});this.updateBalance()}onSheetsUpdated(e){this.sheetDropdown&&(this.sheetDropdown.innerHTML=""),this.sheetDropdownOptions=[];for(const t of e)this.onSheetUpdated(t);this.onSelectedSheetChange()}onSelectedSheetChange(){var e;if(!this.sheetDropdown)return;this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[];const t=this.sheetDropdown.value;this.selectedSheet=null===(e=this.sheetDropdownOptions.find((e=>e.element.value===t)))||void 0===e?void 0:e.sheet,this.selectedSheet&&this.model&&this.model.fetchSheet(this.selectedSheet.id)}async updateBalance(){var e,t,n;if(!this.model||!this.balanceLabel||!this.selectedSheet)return;const s=await this.model.getCurrentBalanceHours(),a=l.round(null!==(e=s.sheets[this.selectedSheet.id.toString()])&&void 0!==e?e:0,2),o=l.round(s.balance,2);this.balanceLabel.innerText=`Flex: ${o} hour${1!=o?"s":""} (current month: ${a} hour${1!=a?"s":""})`,await this.model.getFavoritedDate()?null===(t=this.sheetContainer)||void 0===t||t.classList.add("tl-has-favorite"):null===(n=this.sheetContainer)||void 0===n||n.classList.remove("tl-has-favorite")}},new class{constructor(){this.submitting=!1,this.createUI(),this.clockInButtonFinder()}createUI(){const e=document.createElement("style");e.innerHTML="\n.re-label\n{\n    font-size: 1.5em;\n    margin-bottom: 10px;\n}\n.re-reason-select\n{\n    padding: 5px;\n}\n.re-reason-ui\n{\n    z-index: 2000;\n    position: fixed;\n    inset: 0;\n    background-color: rgba(0,0,0,0.75);\n    padding-top: 45vh;\n    text-align: center;\n    color: white;\n    font-weight: bold;\n}\n.re-btn\n{\n    padding: 0 var(--button-padding-x, 15px);\n    min-width: 80px;\n    height: var(--button-size, 30px);\n    font-weight: 600;\n    font-size: var(--button-font-size, 12px);\n    font-family: var(--body-font-family);\n    border: 0;\n    border-radius: 4px;\n    margin: 5px;\n}\n.re-btn.re-primary\n{\n    color: var(--primary-bg-text-color, white);\n    background-color: var(--primary-600);\n}\n.re-btn.re-secondary\n{\n    color: var(--secondary-bg-text-color, #535353);\n    background-color: var(--secondary-600);\n}\n.re-blur\n{\n    filter: blur(2px);\n}\n.re-submitting .re-btn\n{\n    display: none;\n}\n.re-submitting-text\n{\n    display: none;\n    font-size: 1.5em;\n}\n.re-submitting .re-submitting-text\n{\n    display: block;\n}\n",document.body.append(e),this.reasonEnhancementUI=document.createElement("div"),this.reasonEnhancementUI.className="re-reason-ui",this.reasonEnhancementUI.style.display="none",document.body.appendChild(this.reasonEnhancementUI);const t=document.createElement("div");t.innerText="Choose Default Reason",t.className="re-label",this.reasonEnhancementUI.appendChild(t),this.reasonSelect=document.createElement("select"),this.reasonSelect.className="re-reason-select",this.reasonSelect.onchange=()=>this.saveDefaultReasonValue(),this.reasonEnhancementUI.appendChild(this.reasonSelect),this.reasonEnhancementUI.appendChild(document.createElement("br"));const n=document.createElement("button");n.className="re-cancel-btn re-btn re-secondary",n.innerText="Cancel",n.onclick=()=>this.cancel(),this.reasonEnhancementUI.appendChild(n);const s=document.createElement("button");s.className="re-submit-btn re-btn re-primary",s.innerText="Submit",s.onclick=()=>this.submit(),this.reasonEnhancementUI.appendChild(s);const a=document.createElement("div");a.className="re-submitting-text",a.innerText="Submitting...",this.reasonEnhancementUI.appendChild(a)}async clockInButtonFinder(){for(var e;;)this.findUnenhancedButtons("b-button.punch-clock-button, b-button.time-widget-clock-in-btn, b-button.time-widget-clock-out-btn").forEach((e=>this.enhanceClockInButton(e,a.FixLatest))),this.findUnenhancedButtons("b-button.quick-fix-apply-button").forEach((e=>this.enhanceClockInButton(e,a.FixAll))),this.appRoot||(this.appRoot=null!==(e=document.querySelector("app-root"))&&void 0!==e?e:void 0),await s.for(10)}findUnenhancedButtons(e){var t=[],n=document.querySelectorAll(e);for(const e of n)e.classList.contains("re-enhanced")||(e.classList.add("re-enhanced"),t.push(e));return t}enhanceClockInButton(e,t){e.addEventListener("click",(()=>this.showReasonFixer(t)))}saveDefaultReasonValue(){this.reasonSelect&&window.localStorage.setItem("re-last-reason",this.reasonSelect.value)}loadDefaultReasonValue(){var e;this.reasonSelect&&(this.reasonSelect.value=null!==(e=window.localStorage.getItem("re-last-reason"))&&void 0!==e?e:"")}async showReasonFixer(e){if(this.reasonEnhancementUI&&(await s.for(250),this.setUIVisible(!0),this.mode=e,this.reasonSelect)){const e=await n.metadata();this.reasonSelect.innerHTML="";for(const t of e.timeLogEntryReason.values){const e=document.createElement("option");e.value=t.serverId,e.innerText=t.value,this.reasonSelect.appendChild(e)}this.loadDefaultReasonValue()}}cancel(){this.setUIVisible(!1)}setUIVisible(e){this.reasonEnhancementUI&&(this.reasonEnhancementUI.style.display=e?"block":"none"),this.appRoot&&(e?this.appRoot.classList.add("re-blur"):this.appRoot.classList.remove("re-blur"))}async submit(){var e,t;await s.until((()=>!this.submitting)),this.submitting=!0,null===(e=this.reasonEnhancementUI)||void 0===e||e.classList.add("re-submitting"),this.mode===a.FixAll&&await this.fixAll(),this.mode===a.FixLatest&&await this.fixLatest(),this.setUIVisible(!1),null===(t=this.reasonEnhancementUI)||void 0===t||t.classList.remove("re-submitting"),this.submitting=!1}async fixAll(){if(!this.reasonSelect)return;const e=this.reasonSelect.value,s=await n.sheets();for(const a of s.employeeSheets){if(a.locked)continue;const s=await n.attendance(a.id);for(const a of s.attendance)if(a.entries.some((e=>!e.reason))){const s=t.parse(a.date);if("number"!=typeof s)continue;const o=a.entries.map((n=>{var a,o,i,r;return{startHour:((null!==(a=t.parse(n.start))&&void 0!==a?a:Date.now())-s)/36e5,lengthHours:n.end?((null!==(o=t.parse(n.end))&&void 0!==o?o:Date.now())-(null!==(i=t.parse(n.start))&&void 0!==i?i:Date.now()))/36e5:null,reasonId:n.reason||e,comment:null!==(r=n.comment)&&void 0!==r?r:null}}));await n.submit(s,o)}}}async fixLatest(){if(!this.reasonSelect)return;const e=this.reasonSelect.value;let s=null;const a=await n.sheets();for(const e of a.employeeSheets){if(e.locked)continue;const a=await n.attendance(e.id);for(const e of a.attendance){const n=t.parse(e.date);if("number"==typeof n&&(!s||n>s.date)){const a=e.entries.map((e=>{var s,a,o,i;return{startHour:((null!==(s=t.parse(e.start))&&void 0!==s?s:Date.now())-n)/36e5,lengthHours:e.end?((null!==(a=t.parse(e.end))&&void 0!==a?a:Date.now())-(null!==(o=t.parse(e.start))&&void 0!==o?o:Date.now()))/36e5:null,reasonId:e.reason,comment:null!==(i=e.comment)&&void 0!==i?i:null}}));s={date:n,entries:a}}}}if(s){for(const t of s.entries)t.reasonId=t.reasonId||e;await n.submit(s.date,s.entries)}}}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y0FBTSxRQUFJOUIsS0FBS21JLE9BQVNoSSxHQUFRLEtBQzNEK0IsWUFBYVIsRUFBRU8sTUFBMEIsUUFBbEIsRUFBQXRDLEVBQUEsTUFBWStCLEVBQUVPLFlBQUksUUFBSWpDLEtBQUttSSxRQUE4QixRQUFwQixFQUFBeEksRUFBQSxNQUFZK0IsRUFBRUksY0FBTSxRQUFJOUIsS0FBS21JLFFBQVUsS0FBZ0IsS0FDbkh4RyxTQUFVRCxFQUFFVSxPQUNaQyxRQUFrQixRQUFULEVBQUFYLEVBQUVXLGVBQU8sUUFBSSxLQUN6QixJQUVMK1AsRUFBUyxDQUFFL1IsS0FBTUYsRUFBTXFCLFFBQVNBLEUsR0FJNUMsR0FBSTRRLEVBQ0osQ0FDSSxJQUFLLE1BQU1uSSxLQUFTbUksRUFBTzVRLFFBRXZCeUksRUFBTXRJLFNBQVdzSSxFQUFNdEksVUFBWVMsUUFFakNiLEVBQU1nSixPQUFPNkgsRUFBTy9SLEtBQU0rUixFQUFPNVEsUSxDQUUvQyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvQXBpLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL0RhdGVzLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL0hpQm9iL0hpQm9iLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL1dhaXQudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvUmVhc29uRW5oYW5jZW1lbnRzL1JlYXNvbnNFbmhhbmNlbWVudHMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVGltZWxvZy9UaW1lbG9nVHlwZXMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvRXZlbnRIYW5kbGVyLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL01hdGVyaWFsSWNvbi50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9VdGlscy9OdW1iZXJzLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ01vZGVsLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ1VJLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ0Nzcy50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9SZWFzb25FbmhhbmNlbWVudHMvUmVhc29uRW5oYW5jZW1lbnRzQ3NzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBBcGlcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyB4aHIobWV0aG9kOiBcIkdFVFwiIHwgXCJQT1NUXCIsIHVybDogc3RyaW5nLCBib2R5OiBvYmplY3QpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHsgc3RhdHVzOiBudW1iZXIsIGJvZHk6IGFueSB9PihyZXNvbHZlID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsKTtcclxuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xyXG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XHJcbiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogeGhyLnJlc3BvbnNlVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyAhPT0gMjAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5oYXNPd25Qcm9wZXJ0eShcImVycm9yXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSByZXN1bHQuaGFzT3duUHJvcGVydHkoXCJrZXlcIikgPyByZXN1bHQua2V5IDogeGhyLnN0YXR1cy50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoYEhpQm9iIFV0aWxzOiBFcnJvciAke2tleX0gLSAke3Jlc3VsdC5lcnJvcn1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBIaUJvYiBVdGlsczogRXJyb3IgJHt4aHIuc3RhdHVzfSAtIGNoZWNrIHRoZSBkZXZlbG9wZXIgY29uc29sZSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgSGlCb2IgVXRpbHM6IEVycm9yICR7eGhyLnN0YXR1c30uYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHhocik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHhoci5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShib2R5KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgRGF0ZXNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBwYXJzZShzdHI6IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICBpZiAoIXN0cikgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgY29uc3Qgc3BsaXQgPSBzdHIuc3BsaXQoXCJUXCIpO1xyXG4gICAgICAgIGlmIChzcGxpdC5sZW5ndGggPCAyKSBzcGxpdC5wdXNoKFwiMDA6MDBcIik7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHNwbGl0LmpvaW4oXCJUXCIpKS5nZXRUaW1lKCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGZvcm1hdCh0aW1lOiBudW1iZXIsIGluY2x1ZGVUaW1lc3RhbXA6IGJvb2xlYW4pXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aW1lKSByZXR1cm4gXCJcIjtcclxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodGltZSk7XHJcbiAgICAgICAgcmV0dXJuIGAke2RhdGUuZ2V0RnVsbFllYXIoKX0tJHsoZGF0ZS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9LSR7ZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9JHtpbmNsdWRlVGltZXN0YW1wID8gYFQke2RhdGUuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX06JHtkYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX1gIDogXCJcIn1gO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBmb3JtYXRIb3VyKGhvdXJzOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgaG91ciA9IE1hdGguZmxvb3IoaG91cnMgJSAyNCk7XHJcbiAgICAgICAgY29uc3QgbWludXRlID0gTWF0aC5yb3VuZCgoaG91cnMgLSBob3VyKSAqIDYwKTtcclxuICAgICAgICByZXR1cm4gYCR7aG91ci50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX06JHttaW51dGUudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9YFxyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRXZWVrTnVtYmVyRnJvbURhdGUodGltZTogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUodGltZSk7XHJcbiAgICAgICAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcclxuICAgICAgICAvLyBUaHVyc2RheSBpbiBjdXJyZW50IHdlZWsgZGVjaWRlcyB0aGUgeWVhci5cclxuICAgICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyAzIC0gKGRhdGUuZ2V0RGF5KCkgKyA2KSAlIDcpO1xyXG4gICAgICAgIC8vIEphbnVhcnkgNCBpcyBhbHdheXMgaW4gd2VlayAxLlxyXG4gICAgICAgIHZhciB3ZWVrMSA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgMCwgNCk7XHJcbiAgICAgICAgLy8gQWRqdXN0IHRvIFRodXJzZGF5IGluIHdlZWsgMSBhbmQgY291bnQgbnVtYmVyIG9mIHdlZWtzIGZyb20gZGF0ZSB0byB3ZWVrMS5cclxuICAgICAgICByZXR1cm4gMSArIE1hdGgucm91bmQoKChkYXRlLmdldFRpbWUoKSAtIHdlZWsxLmdldFRpbWUoKSkgLyA4NjQwMDAwMFxyXG4gICAgICAgICAgICAtIDMgKyAod2VlazEuZ2V0RGF5KCkgKyA2KSAlIDcpIC8gNyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIHBhcnNlVGltZVRvaG91cnModGltZTogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNwbGl0ID0gdGltZS5zcGxpdChcIjpcIik7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHNwbGl0WzBdKSArIHBhcnNlSW50KHNwbGl0WzFdKSAvIDYwO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uL1V0aWxzL0FwaVwiO1xyXG5pbXBvcnQgeyBEYXRlcyB9IGZyb20gXCIuLi9VdGlscy9EYXRlc1wiO1xyXG5pbXBvcnQgeyBIaUJvYkF0dGVuZGFuY2UsIEhpQm9iTWV0YWRhdGEsIEhpQm9iU2hlZXRzLCBIaUJvYlN1Ym1pdEVudHJ5LCBIaUJvYlVzZXIgfSBmcm9tIFwiLi9IaUJvYlR5cGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSGlCb2Jcclxue1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgdXNlcklkOiBzdHJpbmcgfCBudWxsO1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBzdWJtaXQoZGF0ZTogbnVtYmVyLCBlbnRyaWVzOiBIaUJvYlN1Ym1pdEVudHJ5W10pOiBQcm9taXNlPGJvb2xlYW4+XHJcbiAgICB7XHJcbiAgICAgICAgaWYgKGVudHJpZXMuc29tZShlID0+ICFlLnJlYXNvbklkKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiV0FSTklORzogU09NRSBFTlRSSUVTIEhBVkUgTk8gUkVBU09OIFNFVCAtIE5PVCBTVUJNSVRUSU5HISFcIiwgZGF0ZSwgZW50cmllcyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGVudHJpZXMubWFwKGUgPT4geyByZXR1cm4geyBzdGFydDogRGF0ZXMuZm9ybWF0KGRhdGUgKyBlLnN0YXJ0SG91ciAqIDM2MDAgKiAxMDAwLCB0cnVlKSwgZW5kOiBlLmxlbmd0aEhvdXJzID8gRGF0ZXMuZm9ybWF0KGRhdGUgKyAoZS5zdGFydEhvdXIgKyBlLmxlbmd0aEhvdXJzKSAqIDM2MDAgKiAxMDAwLCB0cnVlKSA6IHVuZGVmaW5lZCwgcmVhc29uOiBlLnJlYXNvbklkLCBjb21tZW50OiBlLmNvbW1lbnQgPz8gdW5kZWZpbmVkIH0gfSk7XHJcbiAgICAgICAgY29uc3QgZGF0ZVN0ciA9IERhdGVzLmZvcm1hdChkYXRlLCBmYWxzZSk7XHJcbiAgICAgICAgY29uc3QgdXNlcklkID0gYXdhaXQgdGhpcy5nZXRVc2VySWQoKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiUE9TVFwiLCBgaHR0cHM6Ly9hcHAuaGlib2IuY29tL2FwaS9hdHRlbmRhbmNlL2VtcGxveWVlcy8ke3VzZXJJZH0vYXR0ZW5kYW5jZS9lbnRyaWVzP2ZvckRhdGU9JHtkYXRlU3RyfWAsIGRhdGEpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuc3RhdHVzID09PSAyMDA7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIHRpbWVsb2dSZWFzb25zKCk6IFByb21pc2U8eyBpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcgfVtdPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXdhaXQgdGhpcy5tZXRhZGF0YSgpO1xyXG4gICAgICAgIHJldHVybiBtZXRhZGF0YS50aW1lTG9nRW50cnlSZWFzb24udmFsdWVzLm1hcCh2ID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IHYuc2VydmVySWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiB2LnZhbHVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgYXR0ZW5kYW5jZShzaGVldDogbnVtYmVyKTogUHJvbWlzZTxIaUJvYkF0dGVuZGFuY2U+XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQXBpLnhocihcIkdFVFwiLCBgaHR0cHM6Ly9hcHAuaGlib2IuY29tL2FwaS9lbXBsb3llZXMvYXR0ZW5kYW5jZS9teS9zaGVldHMvJHtzaGVldH1gLCB7fSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5ib2R5O1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBzaGVldHMoKTogUHJvbWlzZTxIaUJvYlNoZWV0cz5cclxuICAgIHtcclxuICAgICAgICBjb25zdCB1c2VySWQgPSBhd2FpdCB0aGlzLmdldFVzZXJJZCgpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFwaS54aHIoXCJHRVRcIiwgYGh0dHBzOi8vYXBwLmhpYm9iLmNvbS9hcGkvZW1wbG95ZWVzLyR7dXNlcklkfS90aW1lbG9nL2F0dGVuZGFuY2Uvc2hlZXRzYCwge30pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuYm9keTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbWV0YWRhdGEoKTogUHJvbWlzZTxIaUJvYk1ldGFkYXRhPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFwaS54aHIoXCJHRVRcIiwgXCJodHRwczovL2FwcC5oaWJvYi5jb20vYXBpL2NvbXBhbnkvbWV0YWRhdGEvbGlzdHMvP2luY2x1ZGVBcmNoaXZlZD10cnVlXCIsIHt9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LmJvZHk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHN0YXRpYyBhc3luYyBnZXRVc2VySWQoKTogUHJvbWlzZTxzdHJpbmc+XHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnVzZXJJZCAhPT0gXCJzdHJpbmdcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXNlckluZm8oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlcklkID8/IFwiXCI7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIHVzZXJJbmZvKCk6IFByb21pc2U8SGlCb2JVc2VyPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFwaS54aHIoXCJHRVRcIiwgXCJodHRwczovL2FwcC5oaWJvYi5jb20vYXBpL3VzZXJcIiwge30pO1xyXG4gICAgICAgIHRoaXMudXNlcklkID0gKHJlc3VsdC5ib2R5IGFzIEhpQm9iVXNlcikuaWQ7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5ib2R5O1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFdhaXRcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBmb3IobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD5cclxuICAgIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4ocmVzb2x2ZSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZSgpLCBtcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIHVudGlsKGRlbGVnYXRlOiAoKSA9PiBib29sZWFuKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPihyZXNvbHZlID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBoYW5kbGUgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRlbGVnYXRlKCkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKGhhbmRsZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgSGlCb2IgfSBmcm9tIFwiLi4vSGlCb2IvSGlCb2JcIjtcclxuaW1wb3J0IHsgSGlCb2JTdWJtaXRFbnRyeSB9IGZyb20gXCIuLi9IaUJvYi9IaUJvYlR5cGVzXCI7XHJcbmltcG9ydCB7IERhdGVzIH0gZnJvbSBcIi4uL1V0aWxzL0RhdGVzXCI7XHJcbmltcG9ydCB7IFdhaXQgfSBmcm9tIFwiLi4vVXRpbHMvV2FpdFwiO1xyXG5pbXBvcnQgeyBSZWFzb25FbmhhbmNlbWVudENzcyB9IGZyb20gXCIuL1JlYXNvbkVuaGFuY2VtZW50c0Nzc1wiO1xyXG5cclxuZXhwb3J0IGVudW0gUmVhc29uRW5oYW5jZW1lbnRNb2RlXHJcbntcclxuICAgIEZpeEFsbCxcclxuICAgIEZpeExhdGVzdCxcclxufVxyXG5leHBvcnQgY2xhc3MgUmVhc29uRW5oYW5jZW1lbnRzXHJcbntcclxuICAgIHByaXZhdGUgcmVhc29uRW5oYW5jZW1lbnRVST86IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSByZWFzb25TZWxlY3Q/OiBIVE1MU2VsZWN0RWxlbWVudDtcclxuICAgIHByaXZhdGUgYXBwUm9vdD86IEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHN1Ym1pdHRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICBwcml2YXRlIG1vZGU/OiBSZWFzb25FbmhhbmNlbWVudE1vZGU7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLmNyZWF0ZVVJKCk7XHJcbiAgICAgICAgdGhpcy5jbG9ja0luQnV0dG9uRmluZGVyKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNyZWF0ZVVJKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcclxuICAgICAgICBzdHlsZS5pbm5lckhUTUwgPSBSZWFzb25FbmhhbmNlbWVudENzcztcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChzdHlsZSk7XHJcblxyXG5cclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5jbGFzc05hbWUgPSBcInJlLXJlYXNvbi11aVwiO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkpO1xyXG5cclxuICAgICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgbGFiZWwuaW5uZXJUZXh0ID0gXCJDaG9vc2UgRGVmYXVsdCBSZWFzb25cIjtcclxuICAgICAgICBsYWJlbC5jbGFzc05hbWUgPSBcInJlLWxhYmVsXCI7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKGxhYmVsKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWFzb25TZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xyXG4gICAgICAgIHRoaXMucmVhc29uU2VsZWN0LmNsYXNzTmFtZSA9IFwicmUtcmVhc29uLXNlbGVjdFwiO1xyXG4gICAgICAgIHRoaXMucmVhc29uU2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4gdGhpcy5zYXZlRGVmYXVsdFJlYXNvblZhbHVlKCk7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKHRoaXMucmVhc29uU2VsZWN0KTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmNsYXNzTmFtZSA9IFwicmUtY2FuY2VsLWJ0biByZS1idG4gcmUtc2Vjb25kYXJ5XCI7XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLmlubmVyVGV4dCA9IFwiQ2FuY2VsXCJcclxuICAgICAgICBjYW5jZWxCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuY2FuY2VsKCk7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKGNhbmNlbEJ1dHRvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgc3VibWl0QnV0dG9uLmNsYXNzTmFtZSA9IFwicmUtc3VibWl0LWJ0biByZS1idG4gcmUtcHJpbWFyeVwiO1xyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5pbm5lclRleHQgPSBcIlN1Ym1pdFwiXHJcbiAgICAgICAgc3VibWl0QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnN1Ym1pdCgpO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChzdWJtaXRCdXR0b24pO1xyXG5cclxuXHJcbiAgICAgICAgY29uc3Qgc3VibWl0dGluZ1RleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHN1Ym1pdHRpbmdUZXh0LmNsYXNzTmFtZSA9IFwicmUtc3VibWl0dGluZy10ZXh0XCI7XHJcbiAgICAgICAgc3VibWl0dGluZ1RleHQuaW5uZXJUZXh0ID0gXCJTdWJtaXR0aW5nLi4uXCJcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuYXBwZW5kQ2hpbGQoc3VibWl0dGluZ1RleHQpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBjbG9ja0luQnV0dG9uRmluZGVyKClcclxuICAgIHtcclxuICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjbG9ja0luQnV0dG9ucyA9IHRoaXMuZmluZFVuZW5oYW5jZWRCdXR0b25zKFwiYi1idXR0b24ucHVuY2gtY2xvY2stYnV0dG9uLCBiLWJ1dHRvbi50aW1lLXdpZGdldC1jbG9jay1pbi1idG4sIGItYnV0dG9uLnRpbWUtd2lkZ2V0LWNsb2NrLW91dC1idG5cIik7XHJcbiAgICAgICAgICAgIGNsb2NrSW5CdXR0b25zLmZvckVhY2goZSA9PiB0aGlzLmVuaGFuY2VDbG9ja0luQnV0dG9uKGUsIFJlYXNvbkVuaGFuY2VtZW50TW9kZS5GaXhMYXRlc3QpKTtcclxuICAgICAgICAgICAgdmFyIHF1aWNrRml4QnV0dG9uID0gdGhpcy5maW5kVW5lbmhhbmNlZEJ1dHRvbnMoXCJiLWJ1dHRvbi5xdWljay1maXgtYXBwbHktYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICBxdWlja0ZpeEJ1dHRvbi5mb3JFYWNoKGUgPT4gdGhpcy5lbmhhbmNlQ2xvY2tJbkJ1dHRvbihlLCBSZWFzb25FbmhhbmNlbWVudE1vZGUuRml4QWxsKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuYXBwUm9vdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBSb290ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImFwcC1yb290XCIpID8/IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhd2FpdCBXYWl0LmZvcigxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBmaW5kVW5lbmhhbmNlZEJ1dHRvbnMoc2VsZWN0b3I6IHN0cmluZyk6IEVsZW1lbnRbXVxyXG4gICAge1xyXG4gICAgICAgIHZhciBhcnIgPSBbXSBhcyBFbGVtZW50W107XHJcbiAgICAgICAgdmFyIHF1ZXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XHJcbiAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHF1ZXJ5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInJlLWVuaGFuY2VkXCIpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJyZS1lbmhhbmNlZFwiKTtcclxuICAgICAgICAgICAgICAgIGFyci5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcnI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBlbmhhbmNlQ2xvY2tJbkJ1dHRvbihidXR0b246IEVsZW1lbnQsIG1vZGU6IFJlYXNvbkVuaGFuY2VtZW50TW9kZSlcclxuICAgIHtcclxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuc2hvd1JlYXNvbkZpeGVyKG1vZGUpKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgc2F2ZURlZmF1bHRSZWFzb25WYWx1ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvblNlbGVjdCkgcmV0dXJuO1xyXG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInJlLWxhc3QtcmVhc29uXCIsIHRoaXMucmVhc29uU2VsZWN0LnZhbHVlKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgbG9hZERlZmF1bHRSZWFzb25WYWx1ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvblNlbGVjdCkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMucmVhc29uU2VsZWN0LnZhbHVlID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicmUtbGFzdC1yZWFzb25cIikgPz8gXCJcIjtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgc2hvd1JlYXNvbkZpeGVyKG1vZGU6IFJlYXNvbkVuaGFuY2VtZW50TW9kZSlcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVhc29uRW5oYW5jZW1lbnRVSSkgcmV0dXJuO1xyXG4gICAgICAgIGF3YWl0IFdhaXQuZm9yKDI1MCk7XHJcbiAgICAgICAgdGhpcy5zZXRVSVZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcclxuICAgICAgICBpZiAodGhpcy5yZWFzb25TZWxlY3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCByZWFzb25zID0gYXdhaXQgSGlCb2IubWV0YWRhdGEoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWFzb25TZWxlY3QuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgZm9yIChjb25zdCByZWFzb24gb2YgcmVhc29ucy50aW1lTG9nRW50cnlSZWFzb24udmFsdWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gcmVhc29uLnNlcnZlcklkO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLmlubmVyVGV4dCA9IHJlYXNvbi52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVhc29uU2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5sb2FkRGVmYXVsdFJlYXNvblZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjYW5jZWwoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuc2V0VUlWaXNpYmxlKGZhbHNlKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgc2V0VUlWaXNpYmxlKHZhbHVlOiBib29sZWFuKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICAgICAgZWxzZSB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5hcHBSb290KVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgdGhpcy5hcHBSb290LmNsYXNzTGlzdC5hZGQoXCJyZS1ibHVyXCIpO1xyXG4gICAgICAgICAgICBlbHNlIHRoaXMuYXBwUm9vdC5jbGFzc0xpc3QucmVtb3ZlKFwicmUtYmx1clwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIHN1Ym1pdCgpXHJcbiAgICB7XHJcbiAgICAgICAgYXdhaXQgV2FpdC51bnRpbCgoKSA9PiAhdGhpcy5zdWJtaXR0aW5nKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdWJtaXR0aW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUk/LmNsYXNzTGlzdC5hZGQoXCJyZS1zdWJtaXR0aW5nXCIpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tb2RlID09PSBSZWFzb25FbmhhbmNlbWVudE1vZGUuRml4QWxsKSBhd2FpdCB0aGlzLmZpeEFsbCgpO1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgPT09IFJlYXNvbkVuaGFuY2VtZW50TW9kZS5GaXhMYXRlc3QpIGF3YWl0IHRoaXMuZml4TGF0ZXN0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0VUlWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUk/LmNsYXNzTGlzdC5yZW1vdmUoXCJyZS1zdWJtaXR0aW5nXCIpO1xyXG5cclxuICAgICAgICB0aGlzLnN1Ym1pdHRpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgZml4QWxsKClcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVhc29uU2VsZWN0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgcmVhc29uID0gdGhpcy5yZWFzb25TZWxlY3QudmFsdWU7XHJcbiAgICAgICAgY29uc3Qgc2hlZXRzID0gYXdhaXQgSGlCb2Iuc2hlZXRzKCk7XHJcbiAgICAgICAgZm9yIChjb25zdCBzaGVldCBvZiBzaGVldHMuZW1wbG95ZWVTaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoc2hlZXQubG9ja2VkKSBjb250aW51ZTtcclxuICAgICAgICAgICAgY29uc3QgYXR0ZW5kYW5jZSA9IGF3YWl0IEhpQm9iLmF0dGVuZGFuY2Uoc2hlZXQuaWQpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2YgYXR0ZW5kYW5jZS5hdHRlbmRhbmNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZS5lbnRyaWVzLnNvbWUoZSA9PiAhZS5yZWFzb24pKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBEYXRlcy5wYXJzZShkYXRlLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGltZSAhPT0gXCJudW1iZXJcIikgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW50cmllczogSGlCb2JTdWJtaXRFbnRyeVtdID0gZGF0ZS5lbnRyaWVzLm1hcChlID0+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRIb3VyOiAoKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpIC0gdGltZSkgLyAoMzYwMCAqIDEwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoSG91cnM6IGUuZW5kID8gKChEYXRlcy5wYXJzZShlLmVuZCkgPz8gRGF0ZS5ub3coKSkgLSAoRGF0ZXMucGFyc2UoZS5zdGFydCkgPz8gRGF0ZS5ub3coKSkpIC8gKDM2MDAgKiAxMDAwKSA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb25JZDogZS5yZWFzb24gfHwgcmVhc29uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDogZS5jb21tZW50ID8/IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBIaUJvYi5zdWJtaXQodGltZSwgZW50cmllcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGZpeExhdGVzdCgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvblNlbGVjdCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHJlYXNvbiA9IHRoaXMucmVhc29uU2VsZWN0LnZhbHVlO1xyXG4gICAgICAgIGxldCBsYXRlc3Q6IHsgZGF0ZTogbnVtYmVyLCBlbnRyaWVzOiBIaUJvYlN1Ym1pdEVudHJ5W10gfSB8IG51bGwgPSBudWxsO1xyXG4gICAgICAgIGNvbnN0IHNoZWV0cyA9IGF3YWl0IEhpQm9iLnNoZWV0cygpO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2hlZXQgb2Ygc2hlZXRzLmVtcGxveWVlU2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHNoZWV0LmxvY2tlZCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGF0dGVuZGFuY2UgPSBhd2FpdCBIaUJvYi5hdHRlbmRhbmNlKHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIGF0dGVuZGFuY2UuYXR0ZW5kYW5jZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IERhdGVzLnBhcnNlKGRhdGUuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWUgIT09IFwibnVtYmVyXCIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFsYXRlc3QgfHwgdGltZSA+IGxhdGVzdC5kYXRlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudHJpZXM6IEhpQm9iU3VibWl0RW50cnlbXSA9IGRhdGUuZW50cmllcy5tYXAoZSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0SG91cjogKChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSAtIHRpbWUpIC8gKDM2MDAgKiAxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aEhvdXJzOiBlLmVuZCA/ICgoRGF0ZXMucGFyc2UoZS5lbmQpID8/IERhdGUubm93KCkpIC0gKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpKSAvICgzNjAwICogMTAwMCkgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uSWQ6IGUucmVhc29uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDogZS5jb21tZW50ID8/IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBsYXRlc3QgPSB7IGRhdGU6IHRpbWUsIGVudHJpZXM6IGVudHJpZXMgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGF0ZXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBsYXRlc3QuZW50cmllcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZW50cnkucmVhc29uSWQgPSBlbnRyeS5yZWFzb25JZCB8fCByZWFzb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgSGlCb2Iuc3VibWl0KGxhdGVzdC5kYXRlLCBsYXRlc3QuZW50cmllcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nRW50cnlcclxue1xyXG4gICAgc3RhcnRIb3VyOiBudW1iZXIsXHJcbiAgICBsZW5ndGhIb3VyczogbnVtYmVyLFxyXG4gICAgcmVhc29uSWQ6IHN0cmluZyxcclxuICAgIGNvbW1lbnQ6IHN0cmluZyB8IG51bGwsXHJcbiAgICBoYXNDb21tZW50OiBib29sZWFuXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nRGF0ZVxyXG57XHJcbiAgICBkaXJ0eTogYm9vbGVhbixcclxuICAgIGRhdGU6IG51bWJlclxyXG4gICAgZW50cmllczogVGltZWxvZ0VudHJ5W10sXHJcbiAgICB3ZWVrZW5kOiBib29sZWFuLFxyXG4gICAgZmF2b3JpdGVkOiBib29sZWFuXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nU2hlZXRcclxue1xyXG4gICAgaWQ6IG51bWJlcixcclxuICAgIHN0YXR1czogc3RyaW5nLFxyXG4gICAgc3RhcnQ6IG51bWJlcixcclxuICAgIGVuZDogbnVtYmVyXHJcbiAgICBkYXRlczogVGltZWxvZ0RhdGVbXSxcclxuICAgIGxvY2tlZDogYm9vbGVhbixcclxuICAgIGhvdXJzUGVyRGF5OiBudW1iZXJcclxufVxyXG5leHBvcnQgZW51bSBUaW1lbG9nU2F2ZVN0YXR1c1xyXG57XHJcbiAgICBXYWl0aW5nLFxyXG4gICAgU2F2aW5nLFxyXG4gICAgU2F2ZWQsXHJcbiAgICBFcnJvclxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZUxvZ0Zhdm9yaXRlZERhdGVcclxue1xyXG4gICAgZGF0ZTogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ1VJRGF0ZSBcclxue1xyXG4gICAgZGF0ZTogVGltZWxvZ0RhdGUsXHJcbiAgICBwYXJlbnQ6IEhUTUxEaXZFbGVtZW50LFxyXG4gICAgZW50cmllczogVGltZWxvZ1VJRW50cnlDb250YWluZXJbXSxcclxuICAgIHN1bUhvdXJzPzogSFRNTFNwYW5FbGVtZW50LFxyXG4gICAgc3RhckJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQsXHJcbiAgICBwYXN0ZUJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnRcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVsb2dVSUVudHJ5Q29udGFpbmVyXHJcbntcclxuICAgIGVudHJ5OiBUaW1lbG9nRW50cnksXHJcbiAgICBwYXJlbnQ6IEhUTUxEaXZFbGVtZW50LFxyXG4gICAgc3RhcnRIb3VyOiBIVE1MSW5wdXRFbGVtZW50LFxyXG4gICAgbGVuZ3RoOiBIVE1MSW5wdXRFbGVtZW50LFxyXG4gICAgcmVhc29uOiBIVE1MU2VsZWN0RWxlbWVudCxcclxuICAgIGVuZEhvdXI6IEhUTUxJbnB1dEVsZW1lbnQsXHJcbiAgICBjb21tZW50OiBIVE1MSW5wdXRFbGVtZW50LFxyXG4gICAgY29tbWVudEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQsXHJcbiAgICBub1JlYXNvbldhcm5pbmc6IEhUTUxEaXZFbGVtZW50XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nVUlXZWVrU3VtXHJcbntcclxuICAgIGRhdGVzOiBUaW1lbG9nVUlEYXRlW10sXHJcbiAgICBlbGVtZW50OiBIVE1MRGl2RWxlbWVudFxyXG59IiwiZXhwb3J0IGNsYXNzIEV2ZW50SGFuZGxlcjxUPlxyXG57XHJcbiAgICBwcml2YXRlIGhhbmRsZXJzOiB7IGhhbmRsZXI6ICh2YWw6IFQpID0+IHZvaWQsIGNvbnRleHQ6IGFueSB9W10gPSBbXTtcclxuICAgIHB1YmxpYyBvbihoYW5kbGVyOiAodmFsOiBUKSA9PiB2b2lkLCBjb250ZXh0OiBhbnkpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycy5wdXNoKHsgaGFuZGxlciwgY29udGV4dCB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvZmYoaGFuZGxlcjogKHZhbDogVCkgPT4gdm9pZCwgY29udGV4dDogYW55KVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmZpbHRlcihoID0+IGguaGFuZGxlciAhPT0gaGFuZGxlciB8fCBoLmNvbnRleHQgIT09IGNvbnRleHQpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGZpcmUodmFsOiBUKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcnMuZm9yRWFjaChoID0+IGguaGFuZGxlci5jYWxsKGguY29udGV4dCwgdmFsKSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgYWJzdHJhY3QgY2xhc3MgTWF0ZXJpYWxJY29uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgaW5pdGlhbGl6ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xyXG4gICAgICAgIGxpbmsuaHJlZiA9IFwiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1NYXRlcmlhbCtTeW1ib2xzK091dGxpbmVkOm9wc3osd2dodCxGSUxMLEdSQURAMjAuLjQ4LDEwMC4uNzAwLDAuLjEsLTUwLi4yMDBcIjtcclxuICAgICAgICBsaW5rLnJlbCA9IFwic3R5bGVzaGVldFwiO1xyXG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluayk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGdldChpY29uOiBzdHJpbmcsIGZpbGw6IGJvb2xlYW4gPSBmYWxzZSlcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSBgbWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZGA7XHJcbiAgICAgICAgc3Bhbi5pbm5lclRleHQgPSBpY29uO1xyXG4gICAgICAgIHNwYW4uc3R5bGUudmVydGljYWxBbGlnbiA9IFwibWlkZGxlXCI7XHJcbiAgICAgICAgc3Bhbi5zdHlsZS5mb250U2l6ZSA9IFwiMS41ZW1cIjtcclxuICAgICAgICBzcGFuLnN0eWxlLmZvbnRWYXJpYXRpb25TZXR0aW5ncyA9IGAnRklMTCcgJHtmaWxsID8gMSA6IDB9YDtcclxuICAgICAgICByZXR1cm4gc3BhbjtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBOdW1iZXJzXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgcm91bmQobnVtOiBudW1iZXIsIGRlY2ltYWxzOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQobnVtICogKDEwICoqIGRlY2ltYWxzKSkgLyAoMTAgKiogZGVjaW1hbHMpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBmbG9vcihudW06IG51bWJlciwgZGVjaW1hbHM6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihudW0gKiAoMTAgKiogZGVjaW1hbHMpKSAvICgxMCAqKiBkZWNpbWFscyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGNlaWwobnVtOiBudW1iZXIsIGRlY2ltYWxzOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguY2VpbChudW0gKiAoMTAgKiogZGVjaW1hbHMpKSAvICgxMCAqKiBkZWNpbWFscyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBzdW0oYXJyOiBudW1iZXJbXSlcclxuICAgIHtcclxuICAgICAgICBsZXQgdmFsID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgdmFsICs9IGFycltpXTtcclxuICAgICAgICByZXR1cm4gdmFsO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgSGlCb2IgfSBmcm9tIFwiLi4vSGlCb2IvSGlCb2JcIjtcclxuaW1wb3J0IHsgSGlCb2JSZWFzb24gfSBmcm9tIFwiLi4vSGlCb2IvSGlCb2JUeXBlc1wiO1xyXG5pbXBvcnQgeyBEYXRlcyB9IGZyb20gXCIuLi9VdGlscy9EYXRlc1wiO1xyXG5pbXBvcnQgeyBFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi4vVXRpbHMvRXZlbnRIYW5kbGVyXCI7XHJcbmltcG9ydCB7IE51bWJlcnMgfSBmcm9tIFwiLi4vVXRpbHMvTnVtYmVyc1wiO1xyXG5pbXBvcnQgeyBXYWl0IH0gZnJvbSBcIi4uL1V0aWxzL1dhaXRcIjtcclxuaW1wb3J0IHsgVGltZWxvZ1NoZWV0LCBUaW1lbG9nRGF0ZSwgVGltZWxvZ1NhdmVTdGF0dXMsIFRpbWVMb2dGYXZvcml0ZWREYXRlIH0gZnJvbSBcIi4vVGltZWxvZ1R5cGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVGltZWxvZ01vZGVsXHJcbntcclxuICAgIHB1YmxpYyBzaGVldHM6IFRpbWVsb2dTaGVldFtdID0gW107XHJcbiAgICBwdWJsaWMgb25EYXRlVXBkYXRlZCA9IG5ldyBFdmVudEhhbmRsZXI8eyBzaGVldDogVGltZWxvZ1NoZWV0LCBkYXRlOiBUaW1lbG9nRGF0ZSB9PigpO1xyXG4gICAgcHVibGljIG9uUmVhc29uc1VwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPEhpQm9iUmVhc29uW10+KCk7XHJcbiAgICBwdWJsaWMgb25TaGVldFVwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPFRpbWVsb2dTaGVldD4oKTtcclxuICAgIHB1YmxpYyBvblNoZWV0c1VwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPFRpbWVsb2dTaGVldFtdPigpO1xyXG4gICAgcHVibGljIG9uU2F2ZVN0YXR1c1VwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPFRpbWVsb2dTYXZlU3RhdHVzPigpO1xyXG4gICAgcHJpdmF0ZSBzYXZlSGFuZGxlOiBudW1iZXIgPSAtMTtcclxuICAgIHByaXZhdGUgc2F2aW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGNhbGN1bGF0aW5nRmxleDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBmZXRjaGluZ1NoZWV0cyA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSByZWFzb25zOiBIaUJvYlJlYXNvbltdID0gW107XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKVxyXG4gICAge1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGluaXRpYWxpemUoKVxyXG4gICAge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hTaGVldHMoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmZldGNoUmVhc29ucygpO1xyXG4gICAgICAgIHRoaXMub25TYXZlU3RhdHVzVXBkYXRlZC5maXJlKFRpbWVsb2dTYXZlU3RhdHVzLlNhdmVkKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBmZXRjaFNoZWV0cygpXHJcbiAgICB7XHJcbiAgICAgICAgYXdhaXQgV2FpdC51bnRpbCgoKSA9PiAhdGhpcy5mZXRjaGluZ1NoZWV0cyk7XHJcbiAgICAgICAgdGhpcy5mZXRjaGluZ1NoZWV0cyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zaGVldHMgPSBbXTtcclxuICAgICAgICBjb25zdCBzaGVldHMgPSBhd2FpdCBIaUJvYi5zaGVldHMoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHNoZWV0cy5lbXBsb3llZVNoZWV0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZXMucGFyc2Uoc2hlZXQuY3ljbGVTdGFydERhdGUpID8/IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IERhdGVzLnBhcnNlKHNoZWV0LmN5Y2xlRW5kRGF0ZSkgPz8gMDtcclxuICAgICAgICAgICAgY29uc3QgbmV3U2hlZXQgPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogc2hlZXQuaWQsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHNoZWV0LnN0YXR1cyxcclxuICAgICAgICAgICAgICAgIHN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgZW5kLFxyXG4gICAgICAgICAgICAgICAgZGF0ZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgbG9ja2VkOiBzaGVldC5sb2NrZWQsXHJcbiAgICAgICAgICAgICAgICBob3Vyc1BlckRheTogMFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0cy5wdXNoKG5ld1NoZWV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaGVldHMuc29ydCgoYSwgYikgPT4gYi5zdGFydCAtIGEuc3RhcnQpO1xyXG4gICAgICAgIHRoaXMub25TaGVldHNVcGRhdGVkLmZpcmUodGhpcy5zaGVldHMpO1xyXG4gICAgICAgIHRoaXMuZmV0Y2hpbmdTaGVldHMgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBmZXRjaFJlYXNvbnMoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucmVhc29ucyA9IChhd2FpdCBIaUJvYi5tZXRhZGF0YSgpKS50aW1lTG9nRW50cnlSZWFzb24udmFsdWVzO1xyXG4gICAgICAgIHRoaXMub25SZWFzb25zVXBkYXRlZC5maXJlKHRoaXMucmVhc29ucyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZmV0Y2hTaGVldChpZDogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuaWQgPT09IGlkKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgYXR0ZW5kYW5jZSA9IGF3YWl0IEhpQm9iLmF0dGVuZGFuY2UoaWQpO1xyXG4gICAgICAgIHNoZWV0LmhvdXJzUGVyRGF5ID0gYXR0ZW5kYW5jZS5zdW1tYXJ5LnBvdGVudGlhbFdvcmtpbmdIb3VycyAvIGF0dGVuZGFuY2Uuc3VtbWFyeS5wb3RlbnRpYWxXb3JraW5nRGF5cztcclxuICAgICAgICBzaGVldC5kYXRlcyA9IFtdO1xyXG4gICAgICAgIGZvciAoY29uc3QgZGF0ZSBvZiBhdHRlbmRhbmNlLmF0dGVuZGFuY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCB0aW1lID0gRGF0ZXMucGFyc2UoZGF0ZS5kYXRlKSA/PyBEYXRlLm5vdygpXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlOiBUaW1lbG9nRGF0ZSA9IHtcclxuICAgICAgICAgICAgICAgIGRpcnR5OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGRhdGU6IHRpbWUsXHJcbiAgICAgICAgICAgICAgICB3ZWVrZW5kOiBkYXRlLnN0YXR1cyA9PT0gXCJXZWVrZW5kRXZlbnRcIixcclxuICAgICAgICAgICAgICAgIGZhdm9yaXRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlbnRyaWVzOiBkYXRlLmVudHJpZXMubWFwKGUgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydEhvdXI6IE51bWJlcnMuZmxvb3IoKChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSAtIChEYXRlcy5wYXJzZShkYXRlLmRhdGUpID8/IERhdGUubm93KCkpKSAvICgzNjAwICogMTAwMCksIDIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGhIb3VyczogTnVtYmVycy5jZWlsKCgoRGF0ZXMucGFyc2UoZS5lbmQpID8/IERhdGUubm93KCkpIC0gKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpKSAvICgzNjAwICogMTAwMCksIDIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFzb25JZDogZS5yZWFzb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGUuY29tbWVudCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNDb21tZW50OiAhIWUuY29tbWVudFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KS5zb3J0KChhLCBiKSA9PiBhLnN0YXJ0SG91ciAtIGIuc3RhcnRIb3VyKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBzaGVldC5kYXRlcy5wdXNoKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2hlZXQuZGF0ZXMuc29ydCgoYSwgYikgPT4gYi5kYXRlIC0gYS5kYXRlKTtcclxuICAgICAgICBjb25zdCBmYXZvcml0ZSA9IGF3YWl0IHRoaXMuZ2V0RmF2b3JpdGVkRGF0ZSgpO1xyXG4gICAgICAgIGlmIChmYXZvcml0ZSAmJiBmYXZvcml0ZS5zaGVldCA9PT0gc2hlZXQpXHJcbiAgICAgICAgICAgIGZhdm9yaXRlLmRhdGUuZmF2b3JpdGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm9uU2hlZXRVcGRhdGVkLmZpcmUoc2hlZXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjaGFuZ2VTdGFydEhvdXIoZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIsIGhvdXI6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0uc3RhcnRIb3VyID0gaG91cjtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2hhbmdlTGVuZ3RoSG91cnMoZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5sZW5ndGhIb3VycyA9IGxlbmd0aDtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2hhbmdlUmVhc29uKGRhdGU6IFRpbWVsb2dEYXRlLCBpbmRleDogbnVtYmVyLCByZWFzb246IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0ucmVhc29uSWQgPSByZWFzb247XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGNoYW5nZUNvbW1lbnQoZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIsIGNvbW1lbnQ6IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0uY29tbWVudCA9IGNvbW1lbnQ7XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5oYXNDb21tZW50ID0gdHJ1ZTtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgdG9nZ2xlQ29tbWVudChkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGRhdGUuZW50cmllc1tpbmRleF0uaGFzQ29tbWVudCA9ICFkYXRlLmVudHJpZXNbaW5kZXhdLmhhc0NvbW1lbnQ7XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5jb21tZW50ID0gZGF0ZS5lbnRyaWVzW2luZGV4XS5oYXNDb21tZW50ID8gXCJcIiA6IG51bGw7XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIHNldEZhdm9yaXRlZERhdGUoZGF0ZTogVGltZWxvZ0RhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3Qgb2xkRmF2b3JpdGUgPSBhd2FpdCB0aGlzLmdldEZhdm9yaXRlZERhdGUoKTtcclxuICAgICAgICBpZiAob2xkRmF2b3JpdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBvbGRGYXZvcml0ZS5kYXRlLmZhdm9yaXRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZShvbGRGYXZvcml0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkYXRlLmZhdm9yaXRlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldDogc2hlZXQsIGRhdGU6IGRhdGUgfSk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRsX2Zhdm9yaXRlXCIsIEpTT04uc3RyaW5naWZ5KHsgZGF0ZTogRGF0ZXMuZm9ybWF0KGRhdGUuZGF0ZSwgZmFsc2UpIH0gYXMgVGltZUxvZ0Zhdm9yaXRlZERhdGUpKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBnZXRGYXZvcml0ZWREYXRlKCk6IFByb21pc2U8eyBzaGVldDogVGltZWxvZ1NoZWV0LCBkYXRlOiBUaW1lbG9nRGF0ZSB9IHwgbnVsbD5cclxuICAgIHtcclxuICAgICAgICBjb25zdCBzdHIgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0bF9mYXZvcml0ZVwiKTtcclxuICAgICAgICBpZiAoIXN0cikgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgY29uc3QgZmF2b3JpdGU6IFRpbWVMb2dGYXZvcml0ZWREYXRlID0gSlNPTi5wYXJzZShzdHIpO1xyXG4gICAgICAgIGNvbnN0IHRpbWUgPSBEYXRlcy5wYXJzZShmYXZvcml0ZS5kYXRlKTtcclxuICAgICAgICBpZiAodHlwZW9mIHRpbWUgPT09IFwibnVtYmVyXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLnN0YXJ0IDw9IHRpbWUgJiYgcy5lbmQgPj0gdGltZSk7XHJcbiAgICAgICAgICAgIGlmIChzaGVldClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNoZWV0LmRhdGVzLmxlbmd0aCA8IDEpIGF3YWl0IHRoaXMuZmV0Y2hTaGVldChzaGVldC5pZCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlID0gc2hlZXQuZGF0ZXMuZmluZChkID0+IGQuZGF0ZSA9PT0gdGltZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzaGVldDogc2hlZXQsIGRhdGU6IGRhdGUgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVsZXRlRW50cnkoZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGZpbmRMYXN0RW50cnkob3JpZ2luYWxEYXRlOiBUaW1lbG9nRGF0ZSlcclxuICAgIHtcclxuICAgICAgICBjb25zdCBvcmlnaW5hbFNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IG9yaWdpbmFsRGF0ZSkpO1xyXG4gICAgICAgIGlmICghb3JpZ2luYWxTaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGxldCBkYXRlSW5kZXggPSBvcmlnaW5hbFNoZWV0LmRhdGVzLmluZGV4T2Yob3JpZ2luYWxEYXRlKTtcclxuICAgICAgICBsZXQgZW50cnlJbmRleCA9IC0xO1xyXG4gICAgICAgIGZvciAobGV0IHNoZWV0SW5kZXggPSB0aGlzLnNoZWV0cy5pbmRleE9mKG9yaWdpbmFsU2hlZXQpOyBzaGVldEluZGV4IDwgdGhpcy5zaGVldHMubGVuZ3RoOyBzaGVldEluZGV4KyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzW3NoZWV0SW5kZXhdO1xyXG4gICAgICAgICAgICBpZiAoc2hlZXQuZGF0ZXMubGVuZ3RoIDwgMSkgYXdhaXQgdGhpcy5mZXRjaFNoZWV0KHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgZm9yICg7IGRhdGVJbmRleCA8IHNoZWV0LmRhdGVzLmxlbmd0aDsgZGF0ZUluZGV4KyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBzaGVldC5kYXRlc1tkYXRlSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGUuZW50cmllcy5sZW5ndGggPiAwKSByZXR1cm4gZW50cnlJbmRleCA8IDAgPyBkYXRlLmVudHJpZXNbZGF0ZS5lbnRyaWVzLmxlbmd0aCAtIDFdIDogZGF0ZS5lbnRyaWVzW2VudHJ5SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgZW50cnlJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGF0ZUluZGV4ID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgbmV3RW50cnkoZGF0ZTogVGltZWxvZ0RhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBjb25zdCBsYXN0ID0gYXdhaXQgdGhpcy5maW5kTGFzdEVudHJ5KGRhdGUpO1xyXG4gICAgICAgIGxldCBzdGFydEhvdXIgPSA4LjU7XHJcbiAgICAgICAgbGV0IGxlbmd0aEhvdXJzID0gTnVtYmVycy5yb3VuZChzaGVldC5ob3Vyc1BlckRheSwgMik7XHJcbiAgICAgICAgbGV0IHJlYXNvbklkID0gXCJcIjtcclxuICAgICAgICBpZiAobGFzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChkYXRlLmVudHJpZXMuaW5jbHVkZXMobGFzdCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0SG91ciA9IGxhc3Quc3RhcnRIb3VyICsgbGFzdC5sZW5ndGhIb3VycztcclxuICAgICAgICAgICAgICAgIGxlbmd0aEhvdXJzID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZWFzb25JZCA9IGxhc3QucmVhc29uSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGUuZW50cmllcy5wdXNoKHtcclxuICAgICAgICAgICAgc3RhcnRIb3VyLFxyXG4gICAgICAgICAgICBsZW5ndGhIb3VycyxcclxuICAgICAgICAgICAgcmVhc29uSWQsXHJcbiAgICAgICAgICAgIGNvbW1lbnQ6IG51bGwsXHJcbiAgICAgICAgICAgIGhhc0NvbW1lbnQ6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIHBhc3RlRnJvbVN0YXJyZWQoZGF0ZTogVGltZWxvZ0RhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKGRhdGUuZW50cmllcy5sZW5ndGggPiAwKSByZXR1cm47XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBjb25zdCBmYXZvcml0ZSA9IGF3YWl0IHRoaXMuZ2V0RmF2b3JpdGVkRGF0ZSgpO1xyXG4gICAgICAgIGlmICghZmF2b3JpdGUgfHwgZmF2b3JpdGUuZGF0ZSA9PT0gZGF0ZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGZhdm9yaXRlLmRhdGUuZW50cmllcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGRhdGUuZW50cmllcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0SG91cjogZW50cnkuc3RhcnRIb3VyLFxyXG4gICAgICAgICAgICAgICAgbGVuZ3RoSG91cnM6IGVudHJ5Lmxlbmd0aEhvdXJzLFxyXG4gICAgICAgICAgICAgICAgcmVhc29uSWQ6IGVudHJ5LnJlYXNvbklkLFxyXG4gICAgICAgICAgICAgICAgY29tbWVudDogZW50cnkuY29tbWVudCxcclxuICAgICAgICAgICAgICAgIGhhc0NvbW1lbnQ6IGVudHJ5Lmhhc0NvbW1lbnRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcXVldWVTYXZlKClcclxuICAgIHtcclxuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc2F2ZUhhbmRsZSk7XHJcbiAgICAgICAgdGhpcy5zYXZlSGFuZGxlID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4gdGhpcy5zYXZlKCksIDUwMCk7XHJcbiAgICAgICAgdGhpcy5vblNhdmVTdGF0dXNVcGRhdGVkLmZpcmUoVGltZWxvZ1NhdmVTdGF0dXMuV2FpdGluZyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgc2F2ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgYXdhaXQgV2FpdC51bnRpbCgoKSA9PiAhdGhpcy5zYXZpbmcpO1xyXG4gICAgICAgIHRoaXMuc2F2aW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQuZmlyZShUaW1lbG9nU2F2ZVN0YXR1cy5TYXZpbmcpO1xyXG4gICAgICAgIGNvbnN0IG1pbmltdW1XYWl0ID0gV2FpdC5mb3IoMTAwKTtcclxuICAgICAgICBsZXQgZXJyb3IgPSBmYWxzZTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHRoaXMuc2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIHNoZWV0LmRhdGVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZS5kaXJ0eSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBIaUJvYi5zdWJtaXQoZGF0ZS5kYXRlLCBkYXRlLmVudHJpZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlLmRpcnR5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYXdhaXQgbWluaW11bVdhaXQ7XHJcbiAgICAgICAgdGhpcy5vblNhdmVTdGF0dXNVcGRhdGVkLmZpcmUoZXJyb3IgPyBUaW1lbG9nU2F2ZVN0YXR1cy5FcnJvciA6IFRpbWVsb2dTYXZlU3RhdHVzLlNhdmVkKTtcclxuICAgICAgICB0aGlzLnNhdmluZyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRCYWxhbmNlQ2FsY3VsYXRpb25EZXNjcmlwdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIGBGbGV4IGhvdXJzIGlzIGNhbGN1bGF0ZWQgdXNpbmcgdGhlIGhvdXJzIHdvcmtlZCBpbiB0aGUgcHJldmlvdXMgMjggZGF5cy5gO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGdldEN1cnJlbnRCYWxhbmNlSG91cnMoKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHByZXZpb3VzRGF5c0luY2x1ZGVkID0gNyAqIDQ7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnREYXRlVGltZSA9IERhdGVzLnBhcnNlKERhdGVzLmZvcm1hdChEYXRlLm5vdygpLCBmYWxzZSkpID8/IDA7XHJcbiAgICAgICAgY29uc3QgcGFzdERhdGVUaW1lID0gRGF0ZXMucGFyc2UoRGF0ZXMuZm9ybWF0KGN1cnJlbnREYXRlVGltZSAtICgxMDAwICogNjAgKiA2MCAqIDI0ICogKHByZXZpb3VzRGF5c0luY2x1ZGVkIC0gMSkpLCBmYWxzZSkpID8/IDA7XHJcblxyXG4gICAgICAgIGNvbnN0IHNoZWV0czogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xyXG4gICAgICAgIGxldCBiYWxhbmNlOiBudW1iZXIgPSAwO1xyXG4gICAgICAgIGlmICghIXRoaXMuc2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYXdhaXQgV2FpdC51bnRpbCgoKSA9PiAhdGhpcy5jYWxjdWxhdGluZ0ZsZXgpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0aW5nRmxleCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5zaGVldHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNoZWV0KSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgc2hlZXRCYWxhbmNlczogeyBkYXRlOiBudW1iZXIsIGJhbGFuY2U6IG51bWJlciB9W10gPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gYHRsX2NhY2hlZF9ob3VyX2JhbGFuY2VzXyR7c2hlZXQuaWR9YDtcclxuICAgICAgICAgICAgICAgIGlmIChzaGVldC5sb2NrZWQgJiYgd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGNhY2hlS2V5KSAhPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzaGVldEJhbGFuY2VzID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oY2FjaGVLZXkpID8/IFwiW11cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoZWV0LmRhdGVzLmxlbmd0aCA8IDEpIGF3YWl0IHRoaXMuZmV0Y2hTaGVldChzaGVldC5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoZWV0LmRhdGVzLnNvbWUoZCA9PiBkLmVudHJpZXMubGVuZ3RoID4gMCAmJiBkLmVudHJpZXMuc29tZShlID0+IGUubGVuZ3RoSG91cnMgPiAwKSkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRheSBvZiBzaGVldC5kYXRlcylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG90ZW50aWFsSG91cnMgPSBkYXkud2Vla2VuZCA/IDAgOiBzaGVldC5ob3Vyc1BlckRheTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtlZEhvdXJzID0gTnVtYmVycy5zdW0oZGF5LmVudHJpZXMubWFwKGUgPT4gZS5sZW5ndGhIb3VycykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFsYW5jZSA9IHdvcmtlZEhvdXJzIC0gcG90ZW50aWFsSG91cnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGVldEJhbGFuY2VzLnB1c2goeyBkYXRlOiBkYXkuZGF0ZSwgYmFsYW5jZSB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaGVldC5sb2NrZWQgJiYgc2hlZXQuaWQgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGNhY2hlS2V5LCBKU09OLnN0cmluZ2lmeShzaGVldEJhbGFuY2VzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYmFsYW5jZSArPSBOdW1iZXJzLnN1bShzaGVldEJhbGFuY2VzLmZpbHRlcihiID0+IGIuZGF0ZSA+PSBwYXN0RGF0ZVRpbWUgJiYgYi5kYXRlIDw9IGN1cnJlbnREYXRlVGltZSkubWFwKGIgPT4gYi5iYWxhbmNlKSk7XHJcbiAgICAgICAgICAgICAgICBzaGVldHNbc2hlZXQuaWQudG9TdHJpbmcoKV0gPSBOdW1iZXJzLnN1bShzaGVldEJhbGFuY2VzLm1hcChiID0+IGIuYmFsYW5jZSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0aW5nRmxleCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4geyBzaGVldHMsIGJhbGFuY2UgfTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBSZWFzb25FbmhhbmNlbWVudHMgfSBmcm9tIFwiLi9SZWFzb25FbmhhbmNlbWVudHMvUmVhc29uc0VuaGFuY2VtZW50c1wiO1xyXG5pbXBvcnQgeyBUaW1lbG9nVUkgfSBmcm9tIFwiLi9UaW1lbG9nL1RpbWVsb2dVSVwiO1xyXG5pbXBvcnQgeyBNYXRlcmlhbEljb24gfSBmcm9tIFwiLi9VdGlscy9NYXRlcmlhbEljb25cIjtcclxuXHJcbk1hdGVyaWFsSWNvbi5pbml0aWFsaXplKCk7XHJcbm5ldyBUaW1lbG9nVUkoKTtcclxubmV3IFJlYXNvbkVuaGFuY2VtZW50cygpOyIsImltcG9ydCB7IEhpQm9iUmVhc29uIH0gZnJvbSBcIi4uL0hpQm9iL0hpQm9iVHlwZXNcIjtcclxuaW1wb3J0IHsgRGF0ZXMgfSBmcm9tIFwiLi4vVXRpbHMvRGF0ZXNcIjtcclxuaW1wb3J0IHsgRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4uL1V0aWxzL0V2ZW50SGFuZGxlclwiO1xyXG5pbXBvcnQgeyBNYXRlcmlhbEljb24gfSBmcm9tIFwiLi4vVXRpbHMvTWF0ZXJpYWxJY29uXCI7XHJcbmltcG9ydCB7IE51bWJlcnMgfSBmcm9tIFwiLi4vVXRpbHMvTnVtYmVyc1wiO1xyXG5pbXBvcnQgeyBXYWl0IH0gZnJvbSBcIi4uL1V0aWxzL1dhaXRcIjtcclxuaW1wb3J0IHsgVGltZWxvZ0NzcyB9IGZyb20gXCIuL1RpbWVsb2dDc3NcIjtcclxuaW1wb3J0IHsgVGltZWxvZ01vZGVsIH0gZnJvbSBcIi4vVGltZWxvZ01vZGVsXCI7XHJcbmltcG9ydCB7IFRpbWVsb2dEYXRlLCBUaW1lbG9nRW50cnksIFRpbWVsb2dTYXZlU3RhdHVzLCBUaW1lbG9nU2hlZXQsIFRpbWVsb2dVSURhdGUgYXMgVGltZWxvZ1VJRGF0ZUNvbnRhaW5lciwgVGltZWxvZ1VJV2Vla1N1bSB9IGZyb20gXCIuL1RpbWVsb2dUeXBlc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRpbWVsb2dVSVxyXG57XHJcbiAgICBwcml2YXRlIHRpbWVsb2dVSU91dGVyPzogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHRpbWVsb2dVSUlubmVyPzogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHRvZ2dsZUJ1dHRvbj86IEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBkYXJrTW9kZUJ1dHRvbj86IEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBtb2RlbD86IFRpbWVsb2dNb2RlbDtcclxuXHJcbiAgICBwcml2YXRlIHNoZWV0RHJvcGRvd24/OiBIVE1MU2VsZWN0RWxlbWVudDtcclxuICAgIHByaXZhdGUgc2hlZXREcm9wZG93bk9wdGlvbnM6IHsgc2hlZXQ6IFRpbWVsb2dTaGVldCwgZWxlbWVudDogSFRNTE9wdGlvbkVsZW1lbnQgfVtdID0gW107XHJcbiAgICBwcml2YXRlIHNlbGVjdGVkU2hlZXQ/OiBUaW1lbG9nU2hlZXQ7XHJcblxyXG4gICAgcHJpdmF0ZSBzaGVldENvbnRhaW5lcj86IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBzaGVldERhdGVzOiBUaW1lbG9nVUlEYXRlQ29udGFpbmVyW10gPSBbXTtcclxuICAgIHByaXZhdGUgd2Vla1N1bXM6IFRpbWVsb2dVSVdlZWtTdW1bXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBzYXZlU3RhdHVzPzogSFRNTFNwYW5FbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBiYWxhbmNlTGFiZWw/OiBIVE1MRGl2RWxlbWVudDtcclxuXHJcbiAgICBwcml2YXRlIHJlYXNvbnM6IEhpQm9iUmVhc29uW10gPSBbXTtcclxuXHJcbiAgICBwcml2YXRlIG9uRGFya01vZGVDaGFuZ2UgPSBuZXcgRXZlbnRIYW5kbGVyPGJvb2xlYW4+KCk7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgICAgICAod2luZG93IGFzIGFueSkudGltZWxvZyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5hZGRCdXR0b24oKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgYWRkQnV0dG9uKClcclxuICAgIHtcclxuICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXYuYXBwLWNvbnRlbnQgPiBhcHAtdG9wLWJhci5hcHAtdG9wLWJhciA+IGRpdi5hY3Rpb25zXCIpO1xyXG4gICAgICAgICAgICBpZiAoIXBhcmVudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgV2FpdC5mb3IoMSk7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLXRvZ2dsZS1idG5cIjtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24uYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcInNlbnRpbWVudF92ZXJ5X3NhdGlzZmllZFwiKSk7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLnRpdGxlID0gXCJIaUJvYiBVdGlsaXRpZXNcIjtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMudG9nZ2xlVmlzaWJsZSgpO1xyXG4gICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy50b2dnbGVCdXR0b24pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVVSSgpO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVNb2RlbCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGxvY2F0aW9uLmhhc2ggPT09IFwiI3RsLXVpXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlVmlzaWJsZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9uRGFya01vZGVDaGFuZ2UuZmlyZSh0aGlzLmlzRGFya01vZGUoKSk7XHJcblxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHRvZ2dsZVZpc2libGUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy50aW1lbG9nVUlPdXRlcikgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVsb2dVSU91dGVyLnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5oYXNoID0gXCIjdGwtdWlcIjtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNoZWV0Q29udGFpbmVyKSB0aGlzLnNoZWV0Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWw/LmZldGNoU2hlZXRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5oYXNoID0gXCJcIjtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaW5pdGlhbFwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgaXNEYXJrTW9kZSgpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGxfZGFya19tb2RlXCIpID09PSBcInRydWVcIjtcclxuICAgIH1cclxuICAgIHByaXZhdGUgdG9nZ2xlRGFya01vZGUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGFya01vZGUoKSkgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0bF9kYXJrX21vZGVcIiwgXCJmYWxzZVwiKTtcclxuICAgICAgICBlbHNlIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGxfZGFya19tb2RlXCIsIFwidHJ1ZVwiKTtcclxuICAgICAgICB0aGlzLm9uRGFya01vZGVDaGFuZ2UuZmlyZSh0aGlzLmlzRGFya01vZGUoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVVSSgpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgICAgc3R5bGUuaW5uZXJIVE1MID0gVGltZWxvZ0NzcztcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHN0eWxlKTtcclxuXHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlci5jbGFzc05hbWUgPSBcInRsLXVpXCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQodGhpcy50aW1lbG9nVUlPdXRlcik7XHJcblxyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuY2xhc3NOYW1lID0gXCJ0bC11aS1pbm5lclwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIuYXBwZW5kKHRoaXMudGltZWxvZ1VJSW5uZXIpO1xyXG5cclxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uY2xhc3NOYW1lID0gXCJ0bC1jbG9zZS1idG5cIjtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiY2xvc2VcIikpO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnRvZ2dsZVZpc2libGUoKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKTtcclxuXHJcbiAgICAgICAgdGhpcy5kYXJrTW9kZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgdGhpcy5kYXJrTW9kZUJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLWRhcmstbW9kZS1idG5cIjtcclxuICAgICAgICB0aGlzLmRhcmtNb2RlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnRvZ2dsZURhcmtNb2RlKCk7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZCh0aGlzLmRhcmtNb2RlQnV0dG9uKTtcclxuICAgICAgICB0aGlzLm9uRGFya01vZGVDaGFuZ2Uub24oKGRhcmspID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZGFyaykgdGhpcy50aW1lbG9nVUlPdXRlcj8uY2xhc3NMaXN0LmFkZChcInRsLWRhcmtcIik7XHJcbiAgICAgICAgICAgIGVsc2UgdGhpcy50aW1lbG9nVUlPdXRlcj8uY2xhc3NMaXN0LnJlbW92ZShcInRsLWRhcmtcIik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhcmtNb2RlQnV0dG9uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhcmtNb2RlQnV0dG9uLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhcmtNb2RlQnV0dG9uLmFwcGVuZChkYXJrID8gTWF0ZXJpYWxJY29uLmdldChcImxpZ2h0X21vZGVcIikgOiBNYXRlcmlhbEljb24uZ2V0KFwiZGFya19tb2RlXCIpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNoZWV0RHJvcGRvd25MYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgIHNoZWV0RHJvcGRvd25MYWJlbC5pbm5lclRleHQgPSBcIlNoZWV0OlwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQoc2hlZXREcm9wZG93bkxhYmVsKTtcclxuXHJcbiAgICAgICAgdGhpcy5zaGVldERyb3Bkb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcclxuICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd24uY2xhc3NOYW1lID0gXCJ0bC1zaGVldC1zZWxlY3RcIjtcclxuICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd24ub25jaGFuZ2UgPSAoKSA9PiB0aGlzLm9uU2VsZWN0ZWRTaGVldENoYW5nZSgpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQodGhpcy5zaGVldERyb3Bkb3duKTtcclxuXHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmNsYXNzTmFtZSA9IFwidGwtc2F2ZS1zdGF0dXNcIjtcclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMub25jbGljayA9ICgpID0+IHRoaXMub25TYXZlU3RhdHVzQ2xpY2soKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZCh0aGlzLnNhdmVTdGF0dXMpO1xyXG5cclxuICAgICAgICBjb25zdCBiYWxhbmNlUGFyZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBiYWxhbmNlUGFyZW50LmNsYXNzTmFtZSA9IFwidGwtYmFsYW5jZVwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kKGJhbGFuY2VQYXJlbnQpO1xyXG5cclxuICAgICAgICB0aGlzLmJhbGFuY2VMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5iYWxhbmNlTGFiZWwuaW5uZXJUZXh0ID0gXCJCYWxhbmNlOiBcIjtcclxuICAgICAgICB0aGlzLmJhbGFuY2VMYWJlbC5jbGFzc05hbWUgPSBcInRsLWJhbGFuY2UtbGFiZWxcIjtcclxuICAgICAgICBiYWxhbmNlUGFyZW50LmFwcGVuZCh0aGlzLmJhbGFuY2VMYWJlbCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJhbGFuY2VIZWxwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBiYWxhbmNlSGVscC5hcHBlbmQoTWF0ZXJpYWxJY29uLmdldChcImhlbHBcIikpO1xyXG4gICAgICAgIGJhbGFuY2VIZWxwLmNsYXNzTmFtZSA9IFwidGwtYmFsYW5jZS1oZWxwXCI7XHJcbiAgICAgICAgYmFsYW5jZUhlbHAudGl0bGUgPSBUaW1lbG9nTW9kZWwuZ2V0QmFsYW5jZUNhbGN1bGF0aW9uRGVzY3JpcHRpb24oKTtcclxuICAgICAgICBiYWxhbmNlUGFyZW50LmFwcGVuZChiYWxhbmNlSGVscCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2hlZXRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuc2hlZXRDb250YWluZXIuY2xhc3NOYW1lID0gXCJ0bC1zaGVldFwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQodGhpcy5zaGVldENvbnRhaW5lcik7XHJcblxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVNb2RlbCgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMubW9kZWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLm9uRGF0ZVVwZGF0ZWQub2ZmKHRoaXMub25EYXRlVXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwub25SZWFzb25zVXBkYXRlZC5vZmYodGhpcy5vblJlYXNvbnNVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5vblNhdmVTdGF0dXNVcGRhdGVkLm9mZih0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLm9uU2hlZXRVcGRhdGVkLm9mZih0aGlzLm9uU2hlZXRVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5vblNoZWV0c1VwZGF0ZWQub2ZmKHRoaXMub25TaGVldHNVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG5ldyBUaW1lbG9nTW9kZWwoKTtcclxuICAgICAgICB0aGlzLm1vZGVsLm9uRGF0ZVVwZGF0ZWQub24odGhpcy5vbkRhdGVVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm1vZGVsLm9uUmVhc29uc1VwZGF0ZWQub24odGhpcy5vblJlYXNvbnNVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm1vZGVsLm9uU2F2ZVN0YXR1c1VwZGF0ZWQub24odGhpcy5vblNhdmVTdGF0dXNVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm1vZGVsLm9uU2hlZXRVcGRhdGVkLm9uKHRoaXMub25TaGVldFVwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25TaGVldHNVcGRhdGVkLm9uKHRoaXMub25TaGVldHNVcGRhdGVkLCB0aGlzKTtcclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5tb2RlbC5pbml0aWFsaXplKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGdldERhdGVDb250YWluZXIoZGF0YTogeyBzaGVldDogVGltZWxvZ1NoZWV0LCBkYXRlOiBUaW1lbG9nRGF0ZSB9KVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2hlZXQgPT09IGRhdGEuc2hlZXQgJiYgdGhpcy5zaGVldENvbnRhaW5lcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCBkYXRlQ29udGFpbmVyID0gdGhpcy5zaGVldERhdGVzLmZpbmQoZCA9PiBkLmRhdGUgPT09IGRhdGEuZGF0ZSk7XHJcbiAgICAgICAgICAgIGlmICghZGF0ZUNvbnRhaW5lcilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lciA9IHsgZGF0ZTogZGF0YS5kYXRlLCBwYXJlbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksIGVudHJpZXM6IFtdLCBzdGFyQnV0dG9uOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpLCBwYXN0ZUJ1dHRvbjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKSB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaGVldERhdGVzLnB1c2goZGF0ZUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5jbGFzc05hbWUgPSBcInRsLWRhdGVcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hlZXRDb250YWluZXIuYXBwZW5kQ2hpbGQoZGF0ZUNvbnRhaW5lci5wYXJlbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChuZXcgRGF0ZShkYXRhLmRhdGUuZGF0ZSkuZ2V0RGF5KCkgPT09IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2Vla1NlcGVyYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgd2Vla1NlcGVyYXRvci5jbGFzc05hbWUgPSBcInRsLXdlZWstc2VwZXJhdG9yXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGVldENvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWVrU2VwZXJhdG9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmQoZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8uc2V0RmF2b3JpdGVkRGF0ZShkYXRhLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtc3Rhci1idXR0b24gdGwtc2hvdy1vbi1ob3ZlclwiO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLnRpdGxlID0gXCJGYXZvcml0ZSBEYXlcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgICAgICAgICAgdGl0bGUuY2xhc3NOYW1lID0gXCJ0bC1kYXRlLWxhYmVsXCI7XHJcbiAgICAgICAgICAgICAgICB0aXRsZS5pbm5lclRleHQgPSBuZXcgRGF0ZShkYXRhLmRhdGUuZGF0ZSkudG9EYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRlLndlZWtlbmQpIHRpdGxlLmNsYXNzTGlzdC5hZGQoXCJ0bC1kYXRlLWxhYmVsLXdlZWtlbmRcIik7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmQodGl0bGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghZGF0YS5zaGVldC5sb2NrZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICBhZGQuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImFkZFwiKSlcclxuICAgICAgICAgICAgICAgICAgICBhZGQuY2xhc3NOYW1lID0gXCJ0bC1hZGQtZW50cnktYnRuIHRsLXNob3ctb24taG92ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICBhZGQub25jbGljayA9ICgpID0+IHRoaXMubW9kZWw/Lm5ld0VudHJ5KGRhdGEuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kKGFkZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24uYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcInN3aXRjaF9hY2Nlc3Nfc2hvcnRjdXRfYWRkXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24udGl0bGUgPSBcIlBhc3RlIGZyb20gRmF2b3JpdGUgRGF5XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLXBhc3RlLWJ0biB0bC1zaG93LW9uLWhvdmVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8ucGFzdGVGcm9tU3RhcnJlZChkYXRhLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmFwcGVuZChkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkVG9XZWVrU3VtKGRhdGVDb250YWluZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlQ29udGFpbmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0RW50cnlDb250YWluZXIoZGF0YTogeyBzaGVldDogVGltZWxvZ1NoZWV0LCBkYXRlOiBUaW1lbG9nRGF0ZSB9LCBkYXRlQ29udGFpbmVyOiBUaW1lbG9nVUlEYXRlQ29udGFpbmVyLCBlbnRyeTogVGltZWxvZ0VudHJ5KVxyXG4gICAge1xyXG4gICAgICAgIGxldCBlbnRyeUNvbnRhaW5lciA9IGRhdGVDb250YWluZXIuZW50cmllcy5maW5kKHAgPT4gcC5lbnRyeSA9PT0gZW50cnkpO1xyXG4gICAgICAgIGlmICghZW50cnlDb250YWluZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lciA9IHtcclxuICAgICAgICAgICAgICAgIGVudHJ5LFxyXG4gICAgICAgICAgICAgICAgcGFyZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxyXG4gICAgICAgICAgICAgICAgc3RhcnRIb3VyOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXHJcbiAgICAgICAgICAgICAgICBlbmRIb3VyOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksXHJcbiAgICAgICAgICAgICAgICBsZW5ndGg6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcclxuICAgICAgICAgICAgICAgIHJlYXNvbjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKSxcclxuICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcclxuICAgICAgICAgICAgICAgIGNvbW1lbnRCdXR0b246IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksXHJcbiAgICAgICAgICAgICAgICBub1JlYXNvbldhcm5pbmc6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5lbnRyaWVzLnB1c2goZW50cnlDb250YWluZXIpO1xyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmNsYXNzTmFtZSA9IFwidGwtZW50cnlcIjtcclxuICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIucGFyZW50KTtcclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91ci50eXBlID0gXCJ0aW1lXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91ci5jbGFzc05hbWUgPSBcInRsLWVudHJ5LXN0YXJ0XCI7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnNoZWV0LmxvY2tlZCkgZW50cnlDb250YWluZXIuc3RhcnRIb3VyLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuc3RhcnRIb3VyLm9uY2hhbmdlID0gKCkgPT4gXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IGVudHJ5LnN0YXJ0SG91ciArIGVudHJ5Lmxlbmd0aEhvdXJzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbD8uY2hhbmdlU3RhcnRIb3VyKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIERhdGVzLnBhcnNlVGltZVRvaG91cnMoZW50cnlDb250YWluZXI/LnN0YXJ0SG91ci52YWx1ZSA/PyBcIjA4OjAwXCIpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IE51bWJlcnMucm91bmQoZW5kIC0gZW50cnkuc3RhcnRIb3VyLCAyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWw/LmNoYW5nZUxlbmd0aEhvdXJzKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIGxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91cik7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBlbmRMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgICAgICBlbmRMYWJlbC5jbGFzc05hbWUgPSBcInRsLWVuZC1sYWJlbFwiXHJcbiAgICAgICAgICAgIGVuZExhYmVsLmlubmVyVGV4dCA9IFwiLVwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW5kTGFiZWwpO1xyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuZW5kSG91ci50eXBlID0gXCJ0aW1lXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmVuZEhvdXIuY2xhc3NOYW1lID0gXCJ0bC1lbnRyeS1lbmRcIjtcclxuICAgICAgICAgICAgaWYgKGRhdGEuc2hlZXQubG9ja2VkKSBlbnRyeUNvbnRhaW5lci5lbmRIb3VyLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuZW5kSG91ci5vbmNoYW5nZSA9ICgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChlbnRyeUNvbnRhaW5lcj8uZW5kSG91cilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBOdW1iZXJzLnJvdW5kKERhdGVzLnBhcnNlVGltZVRvaG91cnMoZW50cnlDb250YWluZXIuZW5kSG91ci52YWx1ZSkgLSBlbnRyeS5zdGFydEhvdXIsIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZWw/LmNoYW5nZUxlbmd0aEhvdXJzKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIGxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLmVuZEhvdXIpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnJlYXNvbi5vbmNoYW5nZSA9ICgpID0+IHRoaXMubW9kZWw/LmNoYW5nZVJlYXNvbihkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpLCBlbnRyeUNvbnRhaW5lcj8ucmVhc29uLnZhbHVlID8/IFwiXCIpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zaGVldC5sb2NrZWQpIGVudHJ5Q29udGFpbmVyLnJlYXNvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnJlYXNvbi5jbGFzc05hbWUgPSBcInRsLWVudHJ5LXJlYXNvblwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIucmVhc29uKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVSZWFzb25zRHJvcGRvd24oZW50cnlDb250YWluZXIucmVhc29uKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkYXRlQ29udGFpbmVyLmVudHJpZXMubGVuZ3RoID09PSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN1bUhvdXJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN1bUhvdXJzLmNsYXNzTmFtZSA9IFwidGwtc3VtLWhvdXJzXCI7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kKGRhdGVDb250YWluZXIuc3VtSG91cnMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5sZW5ndGgudHlwZSA9IFwibnVtYmVyXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmxlbmd0aC5jbGFzc05hbWUgPSBcInRsLWVudHJ5LWxlbmd0aFwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5sZW5ndGguc3RlcCA9IFwiMC4wMVwiO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zaGVldC5sb2NrZWQpIGVudHJ5Q29udGFpbmVyLmxlbmd0aC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmxlbmd0aC5vbmNoYW5nZSA9ICgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWw/LmNoYW5nZUxlbmd0aEhvdXJzKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIHBhcnNlRmxvYXQoZW50cnlDb250YWluZXI/Lmxlbmd0aC52YWx1ZSB8fCBcIjBcIikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZHVyYXRpb25MYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgICAgICBkdXJhdGlvbkxhYmVsLmNsYXNzTmFtZSA9IFwidGwtZHVyYXRpb24tbGFiZWxcIjtcclxuICAgICAgICAgICAgZHVyYXRpb25MYWJlbC5pbm5lclRleHQgPSBcImhvdXIocylcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGR1cmF0aW9uTGFiZWwpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFkYXRhLnNoZWV0LmxvY2tlZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLWFkZC1jb21tZW50LWJ0biB0bC1zaG93LW9uLWhvdmVyXCI7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm1vZGVsPy50b2dnbGVDb21tZW50KGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSkpO1xyXG4gICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLmNvbW1lbnRCdXR0b24pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgICAgICByZW1vdmUuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImRlbGV0ZVwiKSk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmUuY2xhc3NOYW1lID0gXCJ0bC1yZW1vdmUtZW50cnktYnRuIHRsLXNob3ctb24taG92ZXJcIjtcclxuICAgICAgICAgICAgICAgIHJlbW92ZS5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8uZGVsZXRlRW50cnkoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSk7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQocmVtb3ZlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubm9SZWFzb25XYXJuaW5nLmFwcGVuZChNYXRlcmlhbEljb24uZ2V0KFwid2FybmluZ1wiLCB0cnVlKSk7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLm5vUmVhc29uV2FybmluZy5hcHBlbmQoXCIgTm8gcmVhc29uIHNlbGVjdGVkIVwiKTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubm9SZWFzb25XYXJuaW5nLmNsYXNzTmFtZSA9IFwidGwtbm8tcmVhc29uLXdhcm5pbmcgdGwtd2FybmluZyB0bC1oYXMtcmVhc29uXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5ub1JlYXNvbldhcm5pbmcpO1xyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC50eXBlID0gXCJ0ZXh0XCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQucGxhY2Vob2xkZXIgPSBcIldyaXRlIGEgbm90ZS4uLlwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50LnRpdGxlID0gXCJXcml0ZSBhIG5vdGUuLi5cIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC5jbGFzc05hbWUgPSBcInRsLWVudHJ5LWNvbW1lbnRcIjtcclxuICAgICAgICAgICAgaWYgKGRhdGEuc2hlZXQubG9ja2VkKSBlbnRyeUNvbnRhaW5lci5jb21tZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC5vbmNoYW5nZSA9ICgpID0+IFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsPy5jaGFuZ2VDb21tZW50KGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIGVudHJ5Q29udGFpbmVyPy5jb21tZW50LnZhbHVlID8/IFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5jb21tZW50KTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlbnRyeUNvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYWRkVG9XZWVrU3VtKGRhdGU6IFRpbWVsb2dVSURhdGVDb250YWluZXIpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMud2Vla1N1bXMubGVuZ3RoIDwgMSB8fCBuZXcgRGF0ZShkYXRlLmRhdGUuZGF0ZSkuZ2V0RGF5KCkgPT09IDApIC8vSWYgdGhpcyBpcyB0aGUgZmlyc3QgZGF5LCBvciBhIHN1bmRheSwgY3JlYXRlIGEgbmV3IHdlZWsgZm9yIGl0LlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgd2Vla1N1bSA9IHtcclxuICAgICAgICAgICAgICAgIGRhdGVzOiBbZGF0ZV0sXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHdlZWtTdW0uZWxlbWVudC5jbGFzc05hbWUgPSBcInRsLXdlZWstc3VtXCI7XHJcbiAgICAgICAgICAgIHRoaXMud2Vla1N1bXMucHVzaCh3ZWVrU3VtKTtcclxuICAgICAgICAgICAgZGF0ZS5wYXJlbnQuYXBwZW5kQ2hpbGQod2Vla1N1bS5lbGVtZW50KTtcclxuICAgICAgICAgICAgZGF0ZS5wYXJlbnQuc3R5bGUubWFyZ2luVG9wID0gXCIzOHB4XCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMud2Vla1N1bXNbdGhpcy53ZWVrU3Vtcy5sZW5ndGggLSAxXS5kYXRlcy5wdXNoKGRhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgb25EYXRlVXBkYXRlZChkYXRhOiB7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGRhdGU6IFRpbWVsb2dEYXRlIH0pXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTaGVldCA9PT0gZGF0YS5zaGVldCAmJiB0aGlzLnNoZWV0Q29udGFpbmVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IGRhdGVDb250YWluZXIgPSB0aGlzLmdldERhdGVDb250YWluZXIoZGF0YSk7XHJcbiAgICAgICAgICAgIGlmIChkYXRlQ29udGFpbmVyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGRhdGEuZGF0ZS5lbnRyaWVzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBlbnRyeUNvbnRhaW5lciA9IHRoaXMuZ2V0RW50cnlDb250YWluZXIoZGF0YSwgZGF0ZUNvbnRhaW5lciwgZW50cnkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5zdGFydEhvdXIudmFsdWUgPSBEYXRlcy5mb3JtYXRIb3VyKGVudHJ5LnN0YXJ0SG91cik7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIubGVuZ3RoLnZhbHVlID0gZW50cnkubGVuZ3RoSG91cnMudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5lbmRIb3VyLnZhbHVlID0gRGF0ZXMuZm9ybWF0SG91cihlbnRyeS5zdGFydEhvdXIgKyBlbnRyeS5sZW5ndGhIb3Vycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIucmVhc29uLnZhbHVlID0gZW50cnkucmVhc29uSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC52YWx1ZSA9IGVudHJ5LmNvbW1lbnQgPz8gXCJcIjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhZW50cnkucmVhc29uSWQpIGVudHJ5Q29udGFpbmVyLm5vUmVhc29uV2FybmluZy5jbGFzc0xpc3QuYWRkKFwidGwtaGFzLXJlYXNvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGVudHJ5Q29udGFpbmVyLm5vUmVhc29uV2FybmluZy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtaGFzLXJlYXNvblwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbi50aXRsZSA9IGVudHJ5Lmhhc0NvbW1lbnQgPyBcIlJlbW92ZSBub3RlXCIgOiBcIkFkZCBub3RlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbi5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnRCdXR0b24uYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChlbnRyeS5oYXNDb21tZW50ID8gXCJzcGVha2VyX25vdGVzX29mZlwiIDogXCJzcGVha2VyX25vdGVzXCIpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5Lmhhc0NvbW1lbnQpIGVudHJ5Q29udGFpbmVyLnBhcmVudC5jbGFzc0xpc3QuYWRkKFwidGwtaGFzLWNvbW1lbnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBlbnRyeUNvbnRhaW5lci5wYXJlbnQuY2xhc3NMaXN0LnJlbW92ZShcInRsLWhhcy1jb21tZW50XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlZEVudHJpZXMgPSBkYXRlQ29udGFpbmVyLmVudHJpZXMuZmlsdGVyKGVudHJ5ID0+ICFkYXRhLmRhdGUuZW50cmllcy5maW5kKGUgPT4gZSA9PT0gZW50cnkuZW50cnkpKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuZW50cmllcyA9IGRhdGVDb250YWluZXIuZW50cmllcy5maWx0ZXIoZW50cnkgPT4gIXJlbW92ZWRFbnRyaWVzLmluY2x1ZGVzKGVudHJ5KSk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVkRW50cmllcy5mb3JFYWNoKGUgPT4gZS5wYXJlbnQucmVtb3ZlKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkYXRlQ29udGFpbmVyLnN1bUhvdXJzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1bSA9IE51bWJlcnMuc3VtKGRhdGEuZGF0ZS5lbnRyaWVzLm1hcChlID0+IGUubGVuZ3RoSG91cnMpKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN1bUhvdXJzLmlubmVyVGV4dCA9IGAke051bWJlcnMucm91bmQoc3VtLCAyKX0gaG91ciR7c3VtID09PSAxID8gXCJcIiA6IFwic1wifWA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uZGlzYWJsZWQgPSBkYXRhLmRhdGUuZmF2b3JpdGVkO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1mYXZvcml0ZVwiKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwic3RhclwiLCBkYXRhLmRhdGUuZmF2b3JpdGVkKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRlLmZhdm9yaXRlZCkgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJ0bC1mYXZvcml0ZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZUNvbnRhaW5lci5lbnRyaWVzLmxlbmd0aCA+IDAgfHwgZGF0ZUNvbnRhaW5lci5kYXRlLmZhdm9yaXRlZClcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJ0bC1oaWRlLWZhdm9yaXRlLWJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1oaWRlLWZhdm9yaXRlLWJ1dHRvblwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3Qgd2Vla1N1bSA9IHRoaXMud2Vla1N1bXMuZmluZCh3ID0+IHcuZGF0ZXMuc29tZShkID0+IGQuZGF0ZSA9PT0gZGF0YS5kYXRlKSk7XHJcbiAgICAgICAgICAgIGlmICh3ZWVrU3VtKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdW0gPSBOdW1iZXJzLnN1bSh3ZWVrU3VtLmRhdGVzLm1hcChkID0+IE51bWJlcnMuc3VtKGQuZW50cmllcy5tYXAoZSA9PiBlLmVudHJ5Lmxlbmd0aEhvdXJzKSkpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRheXMgPSB3ZWVrU3VtLmRhdGVzLmZpbHRlcihkID0+ICFkLmRhdGUud2Vla2VuZCkubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdG90YWxIb3VycyA9IGRhdGEuc2hlZXQuaG91cnNQZXJEYXkgKiBkYXlzO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd2Vla051bWJlciA9IERhdGVzLmdldFdlZWtOdW1iZXJGcm9tRGF0ZSh3ZWVrU3VtLmRhdGVzWzBdLmRhdGUuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB3ZWVrU3VtLmVsZW1lbnQuaW5uZXJIVE1MID0gYDxiPldlZWsgJHt3ZWVrTnVtYmVyfTwvYj46ICR7TnVtYmVycy5yb3VuZChzdW0sIDIpfSAvICR7TnVtYmVycy5yb3VuZCh0b3RhbEhvdXJzLCAyKX0gaG91cnNgO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudXBkYXRlQmFsYW5jZSgpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSB1cGRhdGVSZWFzb25zRHJvcGRvd24oc2VsZWN0OiBIVE1MU2VsZWN0RWxlbWVudClcclxuICAgIHtcclxuICAgICAgICBzZWxlY3QuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICBmb3IgKGNvbnN0IHJlYXNvbiBvZiB0aGlzLnJlYXNvbnMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSByZWFzb24uc2VydmVySWQ7XHJcbiAgICAgICAgICAgIG9wdGlvbi5pbm5lclRleHQgPSByZWFzb24udmFsdWU7XHJcbiAgICAgICAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgb25SZWFzb25zVXBkYXRlZChyZWFzb25zOiBIaUJvYlJlYXNvbltdKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucmVhc29ucyA9IHJlYXNvbnM7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZGF0ZSBvZiB0aGlzLnNoZWV0RGF0ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGRhdGUuZW50cmllcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSZWFzb25zRHJvcGRvd24oZW50cnkucmVhc29uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgb25TYXZlU3RhdHVzVXBkYXRlZChzdGF0dXM6IFRpbWVsb2dTYXZlU3RhdHVzKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5zYXZlU3RhdHVzKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1zdWNjZXNzXCIpO1xyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtd2FybmluZ1wiKTtcclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NMaXN0LnJlbW92ZShcInRsLWNsaWNrYWJsZVwiKTtcclxuICAgICAgICBpZiAoc3RhdHVzID09PSBUaW1lbG9nU2F2ZVN0YXR1cy5TYXZlZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiY2xvdWRfZG9uZVwiLCB0cnVlKSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmQoXCIgU2F2ZWRcIik7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc0xpc3QuYWRkKFwidGwtc3VjY2Vzc1wiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gVGltZWxvZ1NhdmVTdGF0dXMuV2FpdGluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwicGVuZGluZ1wiKSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmQoXCIgUGVuZGluZy4uLlwiKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RhdHVzID09PSBUaW1lbG9nU2F2ZVN0YXR1cy5TYXZpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImNsb3VkX3VwbG9hZFwiKSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmQoXCIgU2F2aW5nLi4uXCIpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdGF0dXMgPT09IFRpbWVsb2dTYXZlU3RhdHVzLkVycm9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJjbG91ZF9vZmZcIikpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kKFwiIEZhaWxlZCFcIik7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc0xpc3QuYWRkKFwidGwtd2FybmluZ1wiKTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmNsYXNzTGlzdC5hZGQoXCJ0bC1jbGlja2FibGVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBvblNhdmVTdGF0dXNDbGljaygpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNhdmVTdGF0dXM/LmNsYXNzTGlzdC5jb250YWlucyhcInRsLWNsaWNrYWJsZVwiKSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMubW9kZWw/LnNhdmUoKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgb25TaGVldFVwZGF0ZWQoc2hlZXQ6IFRpbWVsb2dTaGVldClcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5zaGVldERyb3Bkb3duICYmICF0aGlzLnNoZWV0RHJvcGRvd25PcHRpb25zLmZpbmQocyA9PiBzLnNoZWV0ID09PSBzaGVldCkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSBzaGVldC5pZC50b1N0cmluZygpO1xyXG4gICAgICAgICAgICBvcHRpb24uaW5uZXJUZXh0ID0gYCR7bmV3IERhdGUoc2hlZXQuc3RhcnQpLnRvRGF0ZVN0cmluZygpfSAtICR7bmV3IERhdGUoc2hlZXQuZW5kKS50b0RhdGVTdHJpbmcoKX0ke3NoZWV0LmxvY2tlZCA/IFwiIChsb2NrZWQpXCIgOiBcIlwifWA7XHJcbiAgICAgICAgICAgIHRoaXMuc2hlZXREcm9wZG93bk9wdGlvbnMucHVzaCh7IHNoZWV0OiBzaGVldCwgZWxlbWVudDogb3B0aW9uIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd24uYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTaGVldCA9PT0gc2hlZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaGVldENvbnRhaW5lcikgdGhpcy5zaGVldENvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0RGF0ZXMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy53ZWVrU3VtcyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2Ygc2hlZXQuZGF0ZXMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51cGRhdGVCYWxhbmNlKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uU2hlZXRzVXBkYXRlZChzaGVldHM6IFRpbWVsb2dTaGVldFtdKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLnNoZWV0RHJvcGRvd24pIHRoaXMuc2hlZXREcm9wZG93bi5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuc2hlZXREcm9wZG93bk9wdGlvbnMgPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHNoZWV0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMub25TaGVldFVwZGF0ZWQoc2hlZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9uU2VsZWN0ZWRTaGVldENoYW5nZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25TZWxlY3RlZFNoZWV0Q2hhbmdlKClcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2hlZXREcm9wZG93bikgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0aGlzLnNoZWV0Q29udGFpbmVyKSB0aGlzLnNoZWV0Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5zaGVldERhdGVzID0gW107XHJcbiAgICAgICAgY29uc3QgdmFsID0gdGhpcy5zaGVldERyb3Bkb3duLnZhbHVlO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTaGVldCA9IHRoaXMuc2hlZXREcm9wZG93bk9wdGlvbnMuZmluZChvID0+IG8uZWxlbWVudC52YWx1ZSA9PT0gdmFsKT8uc2hlZXQ7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTaGVldCAmJiB0aGlzLm1vZGVsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5mZXRjaFNoZWV0KHRoaXMuc2VsZWN0ZWRTaGVldC5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgdXBkYXRlQmFsYW5jZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLm1vZGVsIHx8ICF0aGlzLmJhbGFuY2VMYWJlbCB8fCAhdGhpcy5zZWxlY3RlZFNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgYmFsYW5jZSA9IGF3YWl0IHRoaXMubW9kZWwuZ2V0Q3VycmVudEJhbGFuY2VIb3VycygpO1xyXG4gICAgICAgIGNvbnN0IG1vbnRoQmFsYW5jZSA9IE51bWJlcnMucm91bmQoYmFsYW5jZS5zaGVldHNbdGhpcy5zZWxlY3RlZFNoZWV0LmlkLnRvU3RyaW5nKCldID8/IDAsIDIpO1xyXG4gICAgICAgIGNvbnN0IHRvdGFsQmFsYW5jZSA9IE51bWJlcnMucm91bmQoYmFsYW5jZS5iYWxhbmNlLCAyKTtcclxuICAgICAgICB0aGlzLmJhbGFuY2VMYWJlbC5pbm5lclRleHQgPSBgRmxleDogJHt0b3RhbEJhbGFuY2V9IGhvdXIke3RvdGFsQmFsYW5jZSAhPSAxID8gXCJzXCIgOiBcIlwifSAoY3VycmVudCBtb250aDogJHttb250aEJhbGFuY2V9IGhvdXIke21vbnRoQmFsYW5jZSAhPSAxID8gXCJzXCIgOiBcIlwifSlgO1xyXG5cclxuICAgICAgICBjb25zdCBmYXZvcml0ZSA9IGF3YWl0IHRoaXMubW9kZWwuZ2V0RmF2b3JpdGVkRGF0ZSgpO1xyXG4gICAgICAgIGlmIChmYXZvcml0ZSkgdGhpcy5zaGVldENvbnRhaW5lcj8uY2xhc3NMaXN0LmFkZChcInRsLWhhcy1mYXZvcml0ZVwiKTtcclxuICAgICAgICBlbHNlIHRoaXMuc2hlZXRDb250YWluZXI/LmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1oYXMtZmF2b3JpdGVcIik7XHJcbiAgICB9XHJcblxyXG59IiwiZXhwb3J0IGNvbnN0IFRpbWVsb2dDc3MgPSBgXHJcbi50bC10b2dnbGUtYnRuXHJcbntcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIGJhY2tncm91bmQ6IG5vbmU7XHJcbiAgICBmb250LXNpemU6IDJlbTtcclxufVxyXG4udGwtY2xvc2UtYnRuXHJcbntcclxuICAgIGZvbnQtc2l6ZTogMmVtO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgcmlnaHQ6IDVweDtcclxufVxyXG4udGwtdWlcclxue1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgei1pbmRleDogMTAwMDtcclxuICAgIGluc2V0OiAwcHg7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIG92ZXJmbG93LXk6IHNjcm9sbDtcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbn0gICAgICAgIFxyXG4udGwtZGF0ZVxyXG57XHJcbiAgICBtYXJnaW4tdG9wOiAxMHB4O1xyXG4gICAgcGFkZGluZzogMTBweDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkIGdyYXk7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbn1cclxuLnRsLXNhdmUtc3RhdHVzLCAudGwtYWRkLWVudHJ5LWJ0blxyXG57XHJcbiAgICBtYXJnaW4tbGVmdDogMTBweDtcclxufVxyXG4udGwtZW50cnlcclxue1xyXG4gICAgbWFyZ2luLXRvcDogNXB4O1xyXG59XHJcbi50bC1lbnRyeSA+ICpcclxue1xyXG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcclxufVxyXG4udGwtZW50cnkgPiBpbnB1dFt0eXBlPW51bWJlcl1cclxue1xyXG4gICAgd2lkdGg6IDUwcHg7XHJcbn1cclxuLnRsLWVudHJ5ID4gaW5wdXRbdHlwZT10aW1lXVxyXG57XHJcbiAgICB3aWR0aDogNzVweDtcclxufVxyXG4udGwtc2F2ZS1zdGF0dXNcclxue1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuLnRsLXNoZWV0LXNlbGVjdFxyXG57XHJcbiAgICBtYXJnaW4tbGVmdDogNXB4O1xyXG59XHJcbi50bC1kYXRlLWxhYmVsXHJcbntcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcbi50bC1kYXRlLWxhYmVsLnRsLWRhdGUtbGFiZWwtd2Vla2VuZFxyXG57XHJcbiAgICBmb250LXdlaWdodDogaW5pdGlhbDtcclxuICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcclxuICAgIGNvbG9yOiBncmF5O1xyXG59XHJcbi50bC1lbnRyeS1yZWFzb24gXHJcbntcclxuICAgIHBhZGRpbmc6IDNweDtcclxufVxyXG4udGwtcmVtb3ZlLWVudHJ5LWJ0blxyXG57XHJcbiAgICBmbG9hdDogcmlnaHQ7XHJcbn1cclxuLnRsLXdlZWstc2VwZXJhdG9yXHJcbntcclxuICAgIG1hcmdpbi10b3A6IDU3cHg7XHJcbn1cclxuLnRsLWJhbGFuY2UtbGFiZWxcclxue1xyXG4gICAgbWFyZ2luOiA1cHg7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbn1cclxuLnRsLWJhbGFuY2UtaGVscFxyXG57XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICBjdXJzb3I6IGhlbHA7XHJcbn1cclxuXHJcbi50bC11aS1pbm5lclxyXG57XHJcbiAgICBkaXNwbGF5OiB0YWJsZTtcclxuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xyXG4gICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xyXG59XHJcbi50bC11aS1pbm5lciwgLnRsLXdlZWstc2VwZXJhdG9yLCAudGwtZGF0ZVxyXG57XHJcbiAgICBtaW4td2lkdGg6IDY1MHB4O1xyXG59XHJcbi50bC1lbnRyeS1jb21tZW50IHtcclxuICAgIG1hcmdpbi10b3A6IDVweDtcclxuICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuLnRsLWhhcy1jb21tZW50IC50bC1lbnRyeS1jb21tZW50XHJcbntcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG59XHJcbi50bC1zdWNjZXNzXHJcbntcclxuICAgIGNvbG9yOiAjMDJCODc1O1xyXG59XHJcbi50bC13YXJuaW5nXHJcbntcclxuICAgIGNvbG9yOiAjRjBBRjUyO1xyXG59XHJcbi50bC1kYW5nZXJcclxue1xyXG4gICAgY29sb3I6ICNEQTU2NTI7XHJcbn1cclxuLnRsLXN1bS1ob3Vyc1xyXG57XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBtYXJnaW4tdG9wOiAtMjNweDtcclxufVxyXG4udGwtd2Vlay1zdW1cclxue1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgbWFyZ2luLXRvcDogLTU3cHg7XHJcbiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcclxufVxyXG4udGwtdWkgYnV0dG9uLnRsLXN0YXItYnV0dG9uLCAudGwtdWkudGwtZGFyayBidXR0b24udGwtc3Rhci1idXR0b25cclxue1xyXG4gICAgYmFja2dyb3VuZDogbm9uZTtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIG1hcmdpbjogMDtcclxuICAgIHBhZGRpbmc6IDA7XHJcbn1cclxuLnRsLXVpIGJ1dHRvbi50bC1zdGFyLWJ1dHRvbi50bC1mYXZvcml0ZSwgLnRsLXVpLnRsLWRhcmsgYnV0dG9uLnRsLXN0YXItYnV0dG9uLnRsLWZhdm9yaXRlXHJcbntcclxuICAgIGNvbG9yOiAjZjFhMDBiO1xyXG4gICAgb3BhY2l0eTogMTtcclxufVxyXG4udGwtcGFzdGUtYnRuIHtcclxuICAgIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcbi50bC1oYXMtZmF2b3JpdGUgLnRsLXBhc3RlLWJ0bjpub3QoLnRsLWhpZGUtZmF2b3JpdGUtYnV0dG9uKVxyXG57XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbn1cclxuLnRsLXNob3ctb24taG92ZXJcclxue1xyXG4gICAgb3BhY2l0eTogMDtcclxufVxyXG4udGwtZGF0ZTpob3ZlciAudGwtc2hvdy1vbi1ob3ZlclxyXG57XHJcbiAgICBvcGFjaXR5OiAxO1xyXG59XHJcbi50bC1uby1yZWFzb24td2FybmluZyB7XHJcbiAgICBtYXJnaW4tbGVmdDogMTgwcHg7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBtYXJnaW4tdG9wOiAtMjJweDtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG59XHJcbi50bC1uby1yZWFzb24td2FybmluZy50bC1oYXMtcmVhc29uXHJcbntcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuLnRsLWNsaWNrYWJsZVxyXG57XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuLnRsLWRhcmstbW9kZS1idG4ge1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgYm90dG9tOiA1cHg7XHJcbiAgICByaWdodDogMjBweDtcclxufVxyXG4udGwtdWkgYnV0dG9uXHJcbntcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNkOWQ5ZDk7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCBncmF5O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG59XHJcbi50bC11aSBidXR0b246aG92ZXJcclxue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2VmZWJlYjtcclxufVxyXG5cclxuLnRsLXVpLnRsLWRhcmtcclxue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzFFMUUxRTtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxufVxyXG4udGwtdWkudGwtZGFyayBzZWxlY3QsIC50bC11aS50bC1kYXJrIGlucHV0IHtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMyNTI1MjY7XHJcbiAgICBib3JkZXI6IDFweCBncmF5IHNvbGlkO1xyXG4gICAgY29sb3Itc2NoZW1lOiBkYXJrO1xyXG59XHJcbi50bC11aS50bC1kYXJrIGJ1dHRvblxyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzMzMzO1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgIzI4MjgyODtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxufVxyXG4udGwtdWkudGwtZGFyayBidXR0b246aG92ZXJcclxue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzUyNTI1MjtcclxufVxyXG4udGwtdWkudGwtZGFyayAudGwtbm8tcmVhc29uLXdhcm5pbmdcclxue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzI1MjUyNjtcclxufVxyXG5cclxuYDsiLCJleHBvcnQgY29uc3QgUmVhc29uRW5oYW5jZW1lbnRDc3MgPSBgXHJcbi5yZS1sYWJlbFxyXG57XHJcbiAgICBmb250LXNpemU6IDEuNWVtO1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxufVxyXG4ucmUtcmVhc29uLXNlbGVjdFxyXG57XHJcbiAgICBwYWRkaW5nOiA1cHg7XHJcbn1cclxuLnJlLXJlYXNvbi11aVxyXG57XHJcbiAgICB6LWluZGV4OiAyMDAwO1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgaW5zZXQ6IDA7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDAuNzUpO1xyXG4gICAgcGFkZGluZy10b3A6IDQ1dmg7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG4ucmUtYnRuXHJcbntcclxuICAgIHBhZGRpbmc6IDAgdmFyKC0tYnV0dG9uLXBhZGRpbmcteCwgMTVweCk7XHJcbiAgICBtaW4td2lkdGg6IDgwcHg7XHJcbiAgICBoZWlnaHQ6IHZhcigtLWJ1dHRvbi1zaXplLCAzMHB4KTtcclxuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgICBmb250LXNpemU6IHZhcigtLWJ1dHRvbi1mb250LXNpemUsIDEycHgpO1xyXG4gICAgZm9udC1mYW1pbHk6IHZhcigtLWJvZHktZm9udC1mYW1pbHkpO1xyXG4gICAgYm9yZGVyOiAwO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgbWFyZ2luOiA1cHg7XHJcbn1cclxuLnJlLWJ0bi5yZS1wcmltYXJ5XHJcbntcclxuICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5LWJnLXRleHQtY29sb3IsIHdoaXRlKTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktNjAwKTtcclxufVxyXG4ucmUtYnRuLnJlLXNlY29uZGFyeVxyXG57XHJcbiAgICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5LWJnLXRleHQtY29sb3IsICM1MzUzNTMpO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2Vjb25kYXJ5LTYwMCk7XHJcbn1cclxuLnJlLWJsdXJcclxue1xyXG4gICAgZmlsdGVyOiBibHVyKDJweCk7XHJcbn1cclxuLnJlLXN1Ym1pdHRpbmcgLnJlLWJ0blxyXG57XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcbi5yZS1zdWJtaXR0aW5nLXRleHRcclxue1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxuICAgIGZvbnQtc2l6ZTogMS41ZW07XHJcbn1cclxuLnJlLXN1Ym1pdHRpbmcgLnJlLXN1Ym1pdHRpbmctdGV4dFxyXG57XHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxufVxyXG5gOyJdLCJuYW1lcyI6WyJBcGkiLCJzdGF0aWMiLCJtZXRob2QiLCJ1cmwiLCJib2R5IiwiUHJvbWlzZSIsInJlc29sdmUiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInJlc3VsdCIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsInN0YXR1cyIsImhhc093blByb3BlcnR5Iiwia2V5IiwidG9TdHJpbmciLCJhbGVydCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsInNlbmQiLCJzdHJpbmdpZnkiLCJEYXRlcyIsInN0ciIsInNwbGl0IiwibGVuZ3RoIiwicHVzaCIsIkRhdGUiLCJqb2luIiwiZ2V0VGltZSIsInRpbWUiLCJpbmNsdWRlVGltZXN0YW1wIiwiZGF0ZSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJwYWRTdGFydCIsImdldERhdGUiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJob3VycyIsImhvdXIiLCJNYXRoIiwiZmxvb3IiLCJtaW51dGUiLCJyb3VuZCIsInNldEhvdXJzIiwic2V0RGF0ZSIsImdldERheSIsIndlZWsxIiwicGFyc2VJbnQiLCJIaUJvYiIsImVudHJpZXMiLCJzb21lIiwiZSIsInJlYXNvbklkIiwiZGF0YSIsIm1hcCIsInN0YXJ0IiwiZm9ybWF0Iiwic3RhcnRIb3VyIiwiZW5kIiwibGVuZ3RoSG91cnMiLCJ1bmRlZmluZWQiLCJyZWFzb24iLCJjb21tZW50IiwiZGF0ZVN0ciIsInVzZXJJZCIsInRoaXMiLCJnZXRVc2VySWQiLCJtZXRhZGF0YSIsInRpbWVMb2dFbnRyeVJlYXNvbiIsInZhbHVlcyIsInYiLCJpZCIsInNlcnZlcklkIiwibmFtZSIsInZhbHVlIiwic2hlZXQiLCJ1c2VySW5mbyIsIldhaXQiLCJtcyIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJkZWxlZ2F0ZSIsImhhbmRsZSIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsIlJlYXNvbkVuaGFuY2VtZW50TW9kZSIsIlRpbWVsb2dTYXZlU3RhdHVzIiwiRXZlbnRIYW5kbGVyIiwiaGFuZGxlcnMiLCJvbiIsImhhbmRsZXIiLCJjb250ZXh0Iiwib2ZmIiwiZmlsdGVyIiwiaCIsImZpcmUiLCJ2YWwiLCJmb3JFYWNoIiwiY2FsbCIsIk1hdGVyaWFsSWNvbiIsImxpbmsiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwicmVsIiwiaGVhZCIsImFwcGVuZENoaWxkIiwiaWNvbiIsImZpbGwiLCJzcGFuIiwiY2xhc3NOYW1lIiwiaW5uZXJUZXh0Iiwic3R5bGUiLCJ2ZXJ0aWNhbEFsaWduIiwiZm9udFNpemUiLCJmb250VmFyaWF0aW9uU2V0dGluZ3MiLCJOdW1iZXJzIiwibnVtIiwiZGVjaW1hbHMiLCJjZWlsIiwiYXJyIiwiaSIsIlRpbWVsb2dNb2RlbCIsInNoZWV0cyIsIm9uRGF0ZVVwZGF0ZWQiLCJvblJlYXNvbnNVcGRhdGVkIiwib25TaGVldFVwZGF0ZWQiLCJvblNoZWV0c1VwZGF0ZWQiLCJvblNhdmVTdGF0dXNVcGRhdGVkIiwic2F2ZUhhbmRsZSIsInNhdmluZyIsImNhbGN1bGF0aW5nRmxleCIsImZldGNoaW5nU2hlZXRzIiwicmVhc29ucyIsImFzeW5jIiwiZmV0Y2hTaGVldHMiLCJmZXRjaFJlYXNvbnMiLCJTYXZlZCIsInVudGlsIiwiZW1wbG95ZWVTaGVldHMiLCJjeWNsZVN0YXJ0RGF0ZSIsImN5Y2xlRW5kRGF0ZSIsIm5ld1NoZWV0IiwiZGF0ZXMiLCJsb2NrZWQiLCJob3Vyc1BlckRheSIsInNvcnQiLCJhIiwiYiIsImZpbmQiLCJzIiwiYXR0ZW5kYW5jZSIsInN1bW1hcnkiLCJwb3RlbnRpYWxXb3JraW5nSG91cnMiLCJwb3RlbnRpYWxXb3JraW5nRGF5cyIsImRpcnR5Iiwibm93Iiwid2Vla2VuZCIsImZhdm9yaXRlZCIsImhhc0NvbW1lbnQiLCJmYXZvcml0ZSIsImdldEZhdm9yaXRlZERhdGUiLCJjaGFuZ2VTdGFydEhvdXIiLCJpbmRleCIsImQiLCJxdWV1ZVNhdmUiLCJjaGFuZ2VMZW5ndGhIb3VycyIsImNoYW5nZVJlYXNvbiIsImNoYW5nZUNvbW1lbnQiLCJ0b2dnbGVDb21tZW50Iiwib2xkRmF2b3JpdGUiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiZ2V0SXRlbSIsImZldGNoU2hlZXQiLCJkZWxldGVFbnRyeSIsInNwbGljZSIsIm9yaWdpbmFsRGF0ZSIsIm9yaWdpbmFsU2hlZXQiLCJkYXRlSW5kZXgiLCJpbmRleE9mIiwiZW50cnlJbmRleCIsInNoZWV0SW5kZXgiLCJsYXN0IiwiZmluZExhc3RFbnRyeSIsImluY2x1ZGVzIiwiZW50cnkiLCJjbGVhclRpbWVvdXQiLCJzYXZlIiwiV2FpdGluZyIsIlNhdmluZyIsIm1pbmltdW1XYWl0Iiwic3VibWl0IiwiRXJyb3IiLCJjdXJyZW50RGF0ZVRpbWUiLCJwYXN0RGF0ZVRpbWUiLCJiYWxhbmNlIiwic2hlZXRCYWxhbmNlcyIsImNhY2hlS2V5IiwiZGF5IiwicG90ZW50aWFsSG91cnMiLCJzdW0iLCJpbml0aWFsaXplIiwic2hlZXREcm9wZG93bk9wdGlvbnMiLCJzaGVldERhdGVzIiwid2Vla1N1bXMiLCJvbkRhcmtNb2RlQ2hhbmdlIiwidGltZWxvZyIsImFkZEJ1dHRvbiIsInBhcmVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0b2dnbGVCdXR0b24iLCJnZXQiLCJ0aXRsZSIsIm9uY2xpY2siLCJ0b2dnbGVWaXNpYmxlIiwiY3JlYXRlVUkiLCJjcmVhdGVNb2RlbCIsImxvY2F0aW9uIiwiaGFzaCIsImlzRGFya01vZGUiLCJ0aW1lbG9nVUlPdXRlciIsImRpc3BsYXkiLCJvdmVyZmxvdyIsInNoZWV0Q29udGFpbmVyIiwiaW5uZXJIVE1MIiwibW9kZWwiLCJ0b2dnbGVEYXJrTW9kZSIsImFwcGVuZCIsInRpbWVsb2dVSUlubmVyIiwiY2xvc2VCdXR0b24iLCJkYXJrTW9kZUJ1dHRvbiIsImRhcmsiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJzaGVldERyb3Bkb3duTGFiZWwiLCJzaGVldERyb3Bkb3duIiwib25jaGFuZ2UiLCJvblNlbGVjdGVkU2hlZXRDaGFuZ2UiLCJzYXZlU3RhdHVzIiwib25TYXZlU3RhdHVzQ2xpY2siLCJiYWxhbmNlUGFyZW50IiwiYmFsYW5jZUxhYmVsIiwiYmFsYW5jZUhlbHAiLCJnZXRCYWxhbmNlQ2FsY3VsYXRpb25EZXNjcmlwdGlvbiIsImdldERhdGVDb250YWluZXIiLCJzZWxlY3RlZFNoZWV0IiwiZGF0ZUNvbnRhaW5lciIsInN0YXJCdXR0b24iLCJwYXN0ZUJ1dHRvbiIsIndlZWtTZXBlcmF0b3IiLCJzZXRGYXZvcml0ZWREYXRlIiwidG9EYXRlU3RyaW5nIiwibmV3RW50cnkiLCJwYXN0ZUZyb21TdGFycmVkIiwiYWRkVG9XZWVrU3VtIiwiZ2V0RW50cnlDb250YWluZXIiLCJlbnRyeUNvbnRhaW5lciIsInAiLCJlbmRIb3VyIiwiY29tbWVudEJ1dHRvbiIsIm5vUmVhc29uV2FybmluZyIsInR5cGUiLCJkaXNhYmxlZCIsInBhcnNlVGltZVRvaG91cnMiLCJlbmRMYWJlbCIsInVwZGF0ZVJlYXNvbnNEcm9wZG93biIsInN1bUhvdXJzIiwic3RlcCIsInBhcnNlRmxvYXQiLCJkdXJhdGlvbkxhYmVsIiwicGxhY2Vob2xkZXIiLCJ3ZWVrU3VtIiwiZWxlbWVudCIsIm1hcmdpblRvcCIsImZvcm1hdEhvdXIiLCJyZW1vdmVkRW50cmllcyIsInciLCJkYXlzIiwidG90YWxIb3VycyIsIndlZWtOdW1iZXIiLCJnZXRXZWVrTnVtYmVyRnJvbURhdGUiLCJ1cGRhdGVCYWxhbmNlIiwic2VsZWN0Iiwib3B0aW9uIiwiY29udGFpbnMiLCJvIiwiZ2V0Q3VycmVudEJhbGFuY2VIb3VycyIsIm1vbnRoQmFsYW5jZSIsInRvdGFsQmFsYW5jZSIsInN1Ym1pdHRpbmciLCJjbG9ja0luQnV0dG9uRmluZGVyIiwicmVhc29uRW5oYW5jZW1lbnRVSSIsImxhYmVsIiwicmVhc29uU2VsZWN0Iiwic2F2ZURlZmF1bHRSZWFzb25WYWx1ZSIsImNhbmNlbEJ1dHRvbiIsImNhbmNlbCIsInN1Ym1pdEJ1dHRvbiIsInN1Ym1pdHRpbmdUZXh0IiwiZmluZFVuZW5oYW5jZWRCdXR0b25zIiwiZW5oYW5jZUNsb2NrSW5CdXR0b24iLCJGaXhMYXRlc3QiLCJGaXhBbGwiLCJhcHBSb290Iiwic2VsZWN0b3IiLCJxdWVyeSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJidXR0b24iLCJtb2RlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNob3dSZWFzb25GaXhlciIsImxvYWREZWZhdWx0UmVhc29uVmFsdWUiLCJzZXRVSVZpc2libGUiLCJmaXhBbGwiLCJmaXhMYXRlc3QiLCJsYXRlc3QiXSwic291cmNlUm9vdCI6IiJ9