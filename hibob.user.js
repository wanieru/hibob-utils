// ==UserScript==
// @name        HiBob Time Utilities
// @version     1.1.6
// @author      Funday Factory
// @description Utilities to make it easier to log time in HiBob
// @match       https://app.hibob.com/*
// @namespace   http://tampermonkey.net/
// @icon        https://www.google.com/s2/favicons?sz=64&domain=hibob.com
// @grant       none
// ==/UserScript==

(()=>{"use strict";class e{static xhr(e,t,n){return new Promise((a=>{let s=new XMLHttpRequest;s.open(e,t),s.setRequestHeader("Accept","application/json"),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=()=>{if(4===s.readyState){let e;try{e=JSON.parse(s.responseText)}catch(t){e={result:s.responseText}}if(200!==s.status){if(e.hasOwnProperty("error")){const t=e.hasOwnProperty("key")?e.key:s.status.toString();alert(`HiBob Utils: Error ${t} - ${e.error}`)}else alert(`HiBob Utils: Error ${s.status} - check the developer console for more information.`);console.log(`HiBob Utils: Error ${s.status}.`),console.log(s)}a({status:s.status,body:e})}},s.send(JSON.stringify(n))}))}}class t{static parse(e){if(!e)return null;const t=e.split("T");return t.length<2&&t.push("00:00"),new Date(t.join("T")).getTime()}static format(e,t){if(!e)return"";const n=new Date(e);return`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}-${n.getDate().toString().padStart(2,"0")}${t?`T${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`:""}`}static formatHour(e){const t=Math.floor(e%24),n=Math.round(60*(e-t));return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}static getWeekNumberFromDate(e){var t=new Date(e);t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)}static parseTimeTohours(e){const t=e.split(":");return parseInt(t[0])+parseInt(t[1])/60}}class n{static async submit(n,a){if(a.some((e=>!e.reasonId)))return console.log("WARNING: SOME ENTRIES HAVE NO REASON SET - NOT SUBMITTING!!",n,a),!1;const s=a.map((e=>{var a;return{start:t.format(n+3600*e.startHour*1e3,!0),end:e.lengthHours?t.format(n+3600*(e.startHour+e.lengthHours)*1e3,!0):void 0,reason:e.reasonId,comment:null!==(a=e.comment)&&void 0!==a?a:void 0}})),o=t.format(n,!1),i=await this.getUserId();return 200===(await e.xhr("POST",`https://app.hibob.com/api/attendance/employees/${i}/attendance/entries?forDate=${o}`,s)).status}static async timelogReasons(){return(await this.metadata()).timeLogEntryReason.values.map((e=>({id:e.serverId,name:e.value})))}static async attendance(t){return(await e.xhr("GET",`https://app.hibob.com/api/employees/attendance/my/sheets/${t}`,{})).body}static async sheets(){const t=await this.getUserId();return(await e.xhr("GET",`https://app.hibob.com/api/employees/${t}/timelog/attendance/sheets`,{})).body}static async metadata(){return(await e.xhr("GET","https://app.hibob.com/api/company/metadata/lists/?includeArchived=true",{})).body}static async getUserId(){var e;return"string"!=typeof this.userId&&await this.userInfo(),null!==(e=this.userId)&&void 0!==e?e:""}static async userInfo(){const t=await e.xhr("GET","https://app.hibob.com/api/user",{});return this.userId=t.body.id,t.body}}class a{static for(e){return new Promise((t=>{window.setTimeout((()=>t()),e)}))}static until(e){return new Promise((t=>{const n=window.setInterval((()=>{e()&&(t(),window.clearInterval(n))}),1)}))}}var s,o;!function(e){e[e.FixAll=0]="FixAll",e[e.FixLatest=1]="FixLatest"}(s||(s={}));class i{constructor(){this.handlers=[]}on(e,t){this.handlers.push({handler:e,context:t})}off(e,t){this.handlers=this.handlers.filter((n=>n.handler!==e||n.context!==t))}fire(e){this.handlers.forEach((t=>t.handler.call(t.context,e)))}}class r{static initialize(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200",e.rel="stylesheet",document.head.appendChild(e)}static get(e,t=!1){const n=document.createElement("span");return n.className="material-symbols-outlined",n.innerText=e,n.style.verticalAlign="middle",n.style.fontSize="1.5em",n.style.fontVariationSettings="'FILL' "+(t?1:0),n}}class l{static round(e,t){return Math.round(e*10**t)/10**t}static floor(e,t){return Math.floor(e*10**t)/10**t}static ceil(e,t){return Math.ceil(e*10**t)/10**t}static sum(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}}!function(e){e[e.Waiting=0]="Waiting",e[e.Saving=1]="Saving",e[e.Saved=2]="Saved",e[e.Error=3]="Error"}(o||(o={}));class d{constructor(){this.sheets=[],this.onDateUpdated=new i,this.onReasonsUpdated=new i,this.onSheetUpdated=new i,this.onSheetsUpdated=new i,this.onSaveStatusUpdated=new i,this.saveHandle=-1,this.saving=!1,this.calculatingFlex=!1,this.fetchingSheets=!1,this.reasons=[]}async initialize(){await this.fetchSheets(),await this.fetchReasons(),this.onSaveStatusUpdated.fire(o.Saved)}async fetchSheets(){var e,s;await a.until((()=>!this.fetchingSheets)),this.fetchingSheets=!0,this.sheets=[];const o=await n.sheets();for(const n of o.employeeSheets){const a=null!==(e=t.parse(n.cycleStartDate))&&void 0!==e?e:0,o=null!==(s=t.parse(n.cycleEndDate))&&void 0!==s?s:0,i={id:n.id,status:n.status,start:a,end:o,dates:[],locked:n.locked,hoursPerDay:0};this.sheets.push(i)}this.sheets.sort(((e,t)=>t.start-e.start)),this.onSheetsUpdated.fire(this.sheets),this.fetchingSheets=!1}async fetchReasons(){this.reasons=(await n.metadata()).timeLogEntryReason.values,this.onReasonsUpdated.fire(this.reasons)}async fetchSheet(e){var a;const s=this.sheets.find((t=>t.id===e));if(!s)return;const o=await n.attendance(e);s.hoursPerDay=o.summary.potentialWorkingHours/o.summary.potentialWorkingDays,s.dates=[];for(const e of o.attendance){const n={dirty:!1,date:null!==(a=t.parse(e.date))&&void 0!==a?a:Date.now(),nonWorkingDay:"WeekendEvent"===e.status||"ApproveTimeoffRequest"===e.status,hoursToWork:s.hoursPerDay,favorited:!1,dateDescription:e.note.description,entries:e.entries.map((n=>{var a,s,o,i,r;return{startHour:l.floor(((null!==(a=t.parse(n.start))&&void 0!==a?a:Date.now())-(null!==(s=t.parse(e.date))&&void 0!==s?s:Date.now()))/36e5,2),lengthHours:l.ceil(((null!==(o=t.parse(n.end))&&void 0!==o?o:Date.now())-(null!==(i=t.parse(n.start))&&void 0!==i?i:Date.now()))/36e5,2),reasonId:n.reason,comment:null!==(r=n.comment)&&void 0!==r?r:null,hasComment:!!n.comment}})).sort(((e,t)=>e.startHour-t.startHour))};"number"==typeof e.paidTimeoffSeconds&&e.paidTimeoffSeconds>0?n.hoursToWork-=e.paidTimeoffSeconds/3600:n.nonWorkingDay&&(n.hoursToWork=0),s.dates.push(n)}s.dates.sort(((e,t)=>t.date-e.date));const i=await this.getFavoritedDate();i&&i.sheet===s&&(i.date.favorited=!0),this.onSheetUpdated.fire(s)}changeStartHour(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].startHour=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}changeLengthHours(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].lengthHours=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}changeReason(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].reasonId=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}changeComment(e,t,n){const a=this.sheets.find((t=>t.dates.some((t=>t===e))));a&&(e.entries[t].comment=n,e.entries[t].hasComment=!0,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:a,date:e}))}toggleComment(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries[t].hasComment=!e.entries[t].hasComment,e.entries[t].comment=e.entries[t].hasComment?"":null,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}async setFavoritedDate(e){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!n)return;const a=await this.getFavoritedDate();a&&(a.date.favorited=!1,this.onDateUpdated.fire(a)),e.favorited=!0,this.onDateUpdated.fire({sheet:n,date:e}),window.localStorage.setItem("tl_favorite",JSON.stringify({date:t.format(e.date,!1)}))}async getFavoritedDate(){const e=window.localStorage.getItem("tl_favorite");if(!e)return null;const n=JSON.parse(e),a=t.parse(n.date);if("number"==typeof a){const e=this.sheets.find((e=>e.start<=a&&e.end>=a));if(e){e.dates.length<1&&await this.fetchSheet(e.id);const t=e.dates.find((e=>e.date===a));if(t)return{sheet:e,date:t}}}return null}deleteEntry(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries.splice(t,1),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}async findLastEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;let n=t.dates.indexOf(e),a=-1;for(let e=this.sheets.indexOf(t);e<this.sheets.length;e++){const t=this.sheets[e];for(t.dates.length<1&&await this.fetchSheet(t.id);n<t.dates.length;n++){const e=t.dates[n];if(e.entries.length>0)return a<0?e.entries[e.entries.length-1]:e.entries[a];a=0}n=0}}async newEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const n=await this.findLastEntry(e);let a=8.5,s=l.round(t.hoursPerDay,2),o="";n&&(e.entries.includes(n)&&(a=n.startHour+n.lengthHours,s=1),o=n.reasonId),e.entries.push({startHour:a,lengthHours:s,reasonId:o,comment:null,hasComment:!1}),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}async pasteFromStarred(e){if(e.entries.length>0)return;const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const n=await this.getFavoritedDate();if(n&&n.date!==e){for(const t of n.date.entries)e.entries.push({startHour:t.startHour,lengthHours:t.lengthHours,reasonId:t.reasonId,comment:t.comment,hasComment:t.hasComment});e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}}queueSave(){window.clearTimeout(this.saveHandle),this.saveHandle=window.setTimeout((()=>this.save()),500),this.onSaveStatusUpdated.fire(o.Waiting)}async save(){await a.until((()=>!this.saving)),this.saving=!0,this.onSaveStatusUpdated.fire(o.Saving);const e=a.for(100);let t=!1;for(const e of this.sheets)for(const a of e.dates)a.dirty&&(await n.submit(a.date,a.entries)?a.dirty=!1:t=!0);await e,this.onSaveStatusUpdated.fire(t?o.Error:o.Saved),this.saving=!1}setAdjustedDateBalances(e){e=[...e].sort(((e,t)=>e.appliedOn-t.appliedOn)),localStorage.setItem("tl_adjusted_date_balances",JSON.stringify(e))}getAdjustedDateBalances(){var e;return JSON.parse(null!==(e=localStorage.getItem("tl_adjusted_date_balances"))&&void 0!==e?e:"[]")}async fixOverdueFlexBalance(){var e;const n=await this.getFlexStatus(),a=this.getAdjustedDateBalances();for(const s of n.overdueDates)a.push({date:s.date,adjustment:-l.round(s.reallocatedBalance,3),appliedOn:null!==(e=t.parse(t.format(Date.now(),!1)))&&void 0!==e?e:0});this.setAdjustedDateBalances(a)}getFlexPolicy(){return{previousDaysIncluded:28,flexWarningThreshold:21}}async clearSheetBalanceCache(){if(this.sheets)for(let e=0;e<this.sheets.length;e++){const t=this.sheets[e];if(!t)continue;const n=`tl_cached_hour_balances_${t.id}`;t.locked&&null!==window.localStorage.getItem(n)&&window.localStorage.removeItem(n)}}async getCachedBalances(){var e;const n={};for(let a=this.sheets.length-1;a>=0;a--){const s=this.sheets[a];if(!s)continue;let o=[];const i=`tl_cached_hour_balances_${s.id}`;if(s.locked&&null!==window.localStorage.getItem(i))o=JSON.parse(null!==(e=window.localStorage.getItem(i))&&void 0!==e?e:"[]");else{if(s.dates.length<1&&await this.fetchSheet(s.id),s.dates.some((e=>e.entries.length>0&&e.entries.some((e=>e.lengthHours>0)))))for(const e of s.dates){const t=l.sum(e.entries.map((e=>e.lengthHours)))-e.hoursToWork;o.push({date:e.date,balance:t})}s.locked&&s.id>0&&window.localStorage.setItem(i,JSON.stringify(o))}n[s.id.toString()]=o.map((e=>({date:e.date,dateString:t.format(e.date,!1),realBalance:e.balance,reallocatedBalance:l.round(e.balance,3)}))).sort(((e,t)=>e.date-t.date))}return n}async getFlexStatus(){var e,n,s;const o=this.getFlexPolicy(),i=null!==(e=t.parse(t.format(Date.now(),!1)))&&void 0!==e?e:0,r=null!==(n=t.parse(t.format(i-864e5*(o.previousDaysIncluded-1),!1)))&&void 0!==n?n:0,d=null!==(s=t.parse(t.format(i-864e5*(o.flexWarningThreshold-1),!1)))&&void 0!==s?s:0,c=[];let h=0;if(this.sheets){await a.until((()=>!this.calculatingFlex)),this.calculatingFlex=!0;const e=await this.getCachedBalances();for(let t=this.sheets.length-1;t>=0;t--){const n=e[this.sheets[t].id];n&&c.push(...n)}const t=[...this.getAdjustedDateBalances()];for(let e=0;e<c.length;e++){const n=c[e];for(let t=0;t<e&&0!==n.reallocatedBalance;t++){const e=c[t],a=Math.min(Math.abs(n.reallocatedBalance),Math.abs(e.reallocatedBalance));n.reallocatedBalance<0&&e.reallocatedBalance>0?(e.reallocatedBalance-=a,n.reallocatedBalance+=a):n.reallocatedBalance>0&&e.reallocatedBalance<0&&(e.reallocatedBalance+=a,n.reallocatedBalance-=a),e.reallocatedBalance=l.round(e.reallocatedBalance,3)}for(n.reallocatedBalance=l.round(n.reallocatedBalance,3);t.length>0&&t[0].appliedOn<n.date;)this.applyDateAdjustment(t[0],c),t.splice(0,1)}for(const e of t)this.applyDateAdjustment(e,c);h=l.sum(c.map((e=>l.round(e.reallocatedBalance,3)))),this.calculatingFlex=!1}return{balance:h,unbalancedDates:c.filter((e=>0!==e.reallocatedBalance)),overdueDates:c.filter((e=>0!==e.reallocatedBalance&&e.date<=r)),warningDates:c.filter((e=>0!==e.reallocatedBalance&&e.date<=d&&e.date>r))}}applyDateAdjustment(e,t){for(let n=0;n<t.length;n++){const a=t[n];if(a.date===e.date){a.reallocatedBalance+=e.adjustment,a.reallocatedBalance=l.round(a.reallocatedBalance,3);break}}}}r.initialize(),new class{constructor(){this.sheetDropdownOptions=[],this.sheetDates=[],this.weekSums=[],this.reasons=[],this.onDarkModeChange=new i,window.timelog=this,this.addButton()}async addButton(){for(;;){const e=document.querySelector("div.app-content > app-top-bar.app-top-bar > div.actions");if(e){this.toggleButton=document.createElement("button"),this.toggleButton.className="tl-toggle-btn",this.toggleButton.appendChild(r.get("sentiment_very_satisfied")),this.toggleButton.title="HiBob Utilities",this.toggleButton.onclick=()=>this.toggleVisible(),e.appendChild(this.toggleButton),this.createUI(),await this.createModel(),"#tl-ui"===location.hash&&this.toggleVisible(),this.onDarkModeChange.fire(this.isDarkMode());break}await a.for(1)}}toggleVisible(){var e;this.timelogUIOuter&&("none"===this.timelogUIOuter.style.display?(this.timelogUIOuter.style.display="block",location.hash="#tl-ui",document.body.style.overflow="hidden",this.sheetContainer&&(this.sheetContainer.innerHTML=""),null===(e=this.model)||void 0===e||e.fetchSheets()):(this.timelogUIOuter.style.display="none",location.hash="",document.body.style.overflow="initial"))}isDarkMode(){return"true"===localStorage.getItem("tl_dark_mode")}toggleDarkMode(){this.isDarkMode()?localStorage.setItem("tl_dark_mode","false"):localStorage.setItem("tl_dark_mode","true"),this.onDarkModeChange.fire(this.isDarkMode())}createUI(){const e=document.createElement("style");e.innerHTML="\n.tl-toggle-btn\n{\n    border: none;\n    background: none;\n    font-size: 2em;\n}\n.tl-close-btn\n{\n    font-size: 2em;\n    position: absolute;\n    right: 5px;\n}\n.tl-ui\n{\n    position: fixed;\n    z-index: 1000;\n    inset: 0px;\n    background-color: white;\n    overflow-y: scroll;\n    padding: 10px;\n}        \n.tl-date\n{\n    margin-top: 10px;\n    padding: 10px;\n    border: 1px solid gray;\n    border-radius: 5px;\n}\n.tl-save-status, .tl-add-entry-btn\n{\n    margin-left: 10px;\n}\n.tl-entry\n{\n    margin-top: 5px;\n}\n.tl-entry > *\n{\n    margin-left: 5px;\n}\n.tl-entry > input[type=number]\n{\n    width: 50px;\n}\n.tl-entry > input[type=time]\n{\n    width: 75px;\n}\n.tl-save-status\n{\n    font-weight: bold;\n}\n.tl-sheet-select\n{\n    margin-left: 5px;\n}\n.tl-date-label\n{\n    font-weight: bold;\n}\n.tl-date-label.tl-date-label-weekend\n{\n    font-weight: initial;\n    font-style: italic;\n    color: gray;\n}\n.tl-entry-reason \n{\n    padding: 3px;\n}\n.tl-remove-entry-btn\n{\n    float: right;\n}\n.tl-week-seperator\n{\n    margin-top: 57px;\n}\n.tl-balance-label\n{\n    margin: 5px;\n    display: inline-block;\n}\n.tl-balance-help\n{\n    display: inline-block;\n    cursor: help;\n}\n\n.tl-ui-inner\n{\n    display: table;\n    margin-left: auto;\n    margin-right: auto;\n}\n.tl-ui-inner, .tl-week-seperator, .tl-date\n{\n    min-width: 650px;\n}\n.tl-entry-comment {\n    margin-top: 5px;\n    margin-bottom: 15px;\n    width: 100%;\n    display: none;\n}\n.tl-has-comment .tl-entry-comment\n{\n    display: block;\n}\n.tl-success\n{\n    color: #02B875;\n}\n.tl-warning\n{\n    color: #F0AF52;\n}\n.tl-danger\n{\n    color: #DA5652;\n}\n.tl-sum-hours\n{\n    position: absolute;\n    margin-top: -23px;\n}\n.tl-week-sum\n{\n    position: absolute;\n    margin-top: -57px;\n    text-decoration: underline;\n}\n.tl-ui button.tl-star-button, .tl-ui.tl-dark button.tl-star-button\n{\n    background: none;\n    border: none;\n    margin: 0;\n    padding: 0;\n}\n.tl-ui button.tl-star-button.tl-favorite, .tl-ui.tl-dark button.tl-star-button.tl-favorite\n{\n    color: #f1a00b;\n    opacity: 1;\n}\n.tl-paste-btn {\n    margin-left: 5px;\n    display: none;\n}\n.tl-has-favorite .tl-paste-btn:not(.tl-hide-favorite-button)\n{\n    display: inline-block;\n}\n.tl-show-on-hover\n{\n    opacity: 0;\n}\n.tl-date:hover .tl-show-on-hover\n{\n    opacity: 1;\n}\n.tl-no-reason-warning {\n    margin-left: 180px;\n    position: absolute;\n    margin-top: -22px;\n    font-weight: bold;\n    background-color: white;\n    user-select: none;\n    pointer-events: none;\n}\n.tl-no-reason-warning.tl-has-reason\n{\n    display: none;\n}\n.tl-clickable\n{\n    cursor: pointer;\n}\n.tl-dark-mode-btn {\n    position: fixed;\n    bottom: 5px;\n    right: 20px;\n}\n.tl-ui button\n{\n    background-color: #d9d9d9;\n    border: 1px solid gray;\n    border-radius: 5px;\n}\n.tl-ui button:hover\n{\n    background-color: #efebeb;\n}\n\n.tl-ui.tl-dark\n{\n    background-color: #1E1E1E;\n    color: white;\n}\n.tl-ui.tl-dark select, .tl-ui.tl-dark input {\n    color: white;\n    background-color: #252526;\n    border: 1px gray solid;\n    color-scheme: dark;\n}\n.tl-ui.tl-dark button\n{\n    background-color: #333333;\n    border: 1px solid #282828;\n    color: white;\n}\n.tl-ui.tl-dark button:hover\n{\n    background-color: #525252;\n}\n.tl-ui.tl-dark .tl-no-reason-warning\n{\n    background-color: #252526;\n}\n.tl-weekend-description {\n    color: gray;\n    font-style: italic;\n    float: right;\n    margin-top: 2px;\n    display: inline-block;\n    max-width: 400px;\n    overflow: hidden;\n    max-height: 35px;\n}\n.tl-weekend-description.tl-weekend-description-hidden\n{\n    display: none;\n}\n.tl-version-number {\n    position: fixed;\n    bottom: 5px;\n    left: 5px;\n}\n\n.tl-settings {\n    position: fixed;\n    inset: 0;\n    z-index: 100;\n}\n.tl-settings-back {\n    inset: 0;\n    position: absolute;\n    background-color: black;\n    opacity: 0.5;\n    cursor: pointer;\n}\n\n.tl-settings.tl-settings-hidden {\n    display: none;\n}\n\n.tl-settings-version {\n    margin: 5px 10px;\n    border-bottom: 1px solid gray;\n}\n\n.tl-settings-version:last-child {\n    border-bottom: 0;\n}\n\n.tl-settings-title {\n    font-weight: bold;\n    font-size: 1.25em;\n}\n.tl-settings-inner {\n    position: absolute;\n    background-color: white;\n    height: 70vh;\n    width: 90vw;\n    left: 5vw;\n    top: 15vh;\n    border: 1px solid gray;\n    border-radius: 10px;\n    padding: 10px;\n    overflow: auto;\n}\n.tl-settings-version button\n{\n    margin-left: 5px;\n    margin-bottom: 15px;\n}\n\n.tl-dark .tl-settings-inner\n{\n    background-color: #1a1a1a;\n}\n\n.tl-balance-warning\n{\n    font-size: 0.8em;\n    display: inline-block;\n    text-decoration: underline;\n    cursor: help;\n}\n.tl-hidden\n{\n    display: none;\n}\n\n",document.body.appendChild(e),this.timelogUIOuter=document.createElement("div"),this.timelogUIOuter.className="tl-ui",this.timelogUIOuter.style.display="none",document.body.append(this.timelogUIOuter),this.timelogUIInner=document.createElement("div"),this.timelogUIInner.className="tl-ui-inner",this.timelogUIOuter.append(this.timelogUIInner);const t=document.createElement("button");t.className="tl-close-btn",t.appendChild(r.get("close")),t.onclick=()=>this.toggleVisible(),this.timelogUIInner.appendChild(t),this.darkModeButton=document.createElement("button"),this.darkModeButton.className="tl-dark-mode-btn",this.darkModeButton.onclick=()=>this.toggleDarkMode(),this.timelogUIInner.appendChild(this.darkModeButton),this.onDarkModeChange.on((e=>{var t,n;e?null===(t=this.timelogUIOuter)||void 0===t||t.classList.add("tl-dark"):null===(n=this.timelogUIOuter)||void 0===n||n.classList.remove("tl-dark"),this.darkModeButton&&(this.darkModeButton.innerHTML="",this.darkModeButton.append(e?r.get("light_mode"):r.get("dark_mode")))}),this);const n=this.createSettingsWindow();this.timelogUIInner.appendChild(n);const a=document.createElement("div");a.append(r.get("settings",!0)),a.append(" 1.1.6"),a.className="tl-version-number",a.onclick=()=>n.classList.remove("tl-settings-hidden"),a.style.cursor="pointer",a.style.textDecoration="underline",this.timelogUIInner.appendChild(a);const s=document.createElement("span");s.innerText="Sheet:",this.timelogUIInner.appendChild(s),this.sheetDropdown=document.createElement("select"),this.sheetDropdown.className="tl-sheet-select",this.sheetDropdown.onchange=()=>this.onSelectedSheetChange(),this.timelogUIInner.appendChild(this.sheetDropdown),this.saveStatus=document.createElement("span"),this.saveStatus.className="tl-save-status",this.saveStatus.onclick=()=>this.onSaveStatusClick(),this.timelogUIInner.append(this.saveStatus);const o=document.createElement("div");o.className="tl-balance",this.timelogUIInner.append(o),this.balanceLabel=document.createElement("div"),this.balanceLabel.innerText="Balance: ",this.balanceLabel.className="tl-balance-label",o.append(this.balanceLabel),this.balanceWarning=document.createElement("div"),this.balanceWarning.className="tl-balance-warning tl-warning tl-hidden",o.append(this.balanceWarning),this.fixBalanceButton=document.createElement("button"),this.fixBalanceButton.append(r.get("build",!0)),this.fixBalanceButton.className="tl-fix-balance-button tl-hidden",this.fixBalanceButton.append(" Fix"),this.fixBalanceButton.onclick=()=>this.fixBalance(),o.append(this.fixBalanceButton),this.sheetContainer=document.createElement("div"),this.sheetContainer.className="tl-sheet",this.timelogUIInner.appendChild(this.sheetContainer)}createSettingsWindow(){const e=document.createElement("div");e.className="tl-settings tl-settings-hidden";const t=document.createElement("div");t.className="tl-settings-back",e.append(t),t.onclick=()=>e.classList.add("tl-settings-hidden");const n=document.createElement("div");n.className="tl-settings-inner",e.append(n);const a=document.createElement("div");a.className="tl-settings-version",n.append(a);const s=document.createElement("button");s.className="tl-settings-reload-locked-sheets-button",s.append(r.get("cached")),s.append(" Reload Locked Sheets"),s.style.cursor="help",s.title="Recalculates flex balance for all locked sheets.",s.onclick=()=>{var e;return null===(e=this.model)||void 0===e?void 0:e.clearSheetBalanceCache().then((()=>this.updateBalance()))},a.appendChild(s);const o=document.createElement("button");o.className="tl-settings-reset-cancelled-flex-button",o.append(r.get("settings_backup_restore")),o.append(" Reset Cancelled Flex"),o.style.cursor="help",o.title="Resets any flex hour which you're previously cancelled for being overdue.",o.onclick=()=>{var e;null===(e=this.model)||void 0===e||e.setAdjustedDateBalances([]),this.updateBalance()},a.appendChild(o);const i=[{version:"1.1.6 - 26/10/2022",text:["Holidays are now shown in the alternative timelog UI","Holidays are considered in the flex time calculation."]},{version:"1.1.4 - 03/10/2022",text:["Add a warning when unbalanced flex days are close to expiring.","Add button to cancel old unbalanced flex for extraordinary situations","Add buttons to delete cached data in the settings menu."]},{version:"1.1.3 - 03/10/2022",text:["Fixed how flex hours is calculated.","A warning is showed if you have unbalanced flex days that are older than 28 days."]},{version:"1.1.2 - 03/10/2022",text:["Fixed problem where you couldn't log time on some days, where you were supposed to."]},{version:"1.1.1 - 30/09/2022",text:["Added changelog","Show descriptions on non-working days"]}];for(const e of i){const t=document.createElement("div");t.className="tl-settings-version",n.append(t);const a=document.createElement("div");a.className="tl-settings-title",a.innerText=e.version,t.append(a);const s=document.createElement("ul");s.className="tl-settings-list",t.append(s);for(const t of e.text){const e=document.createElement("li");e.innerText=t,s.append(e)}}return e}async createModel(){this.model&&(this.model.onDateUpdated.off(this.onDateUpdated,this),this.model.onReasonsUpdated.off(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.off(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.off(this.onSheetUpdated,this),this.model.onSheetsUpdated.off(this.onSheetsUpdated,this)),this.model=new d,this.model.onDateUpdated.on(this.onDateUpdated,this),this.model.onReasonsUpdated.on(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.on(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.on(this.onSheetUpdated,this),this.model.onSheetsUpdated.on(this.onSheetsUpdated,this),await this.model.initialize()}getDateContainer(e){if(this.selectedSheet===e.sheet&&this.sheetContainer){let t=this.sheetDates.find((t=>t.date===e.date));if(!t){if(t={date:e.date,parent:document.createElement("div"),title:document.createElement("span"),entries:[],starButton:document.createElement("button"),pasteButton:document.createElement("button"),weekendDescription:document.createElement("div")},this.sheetDates.push(t),t.parent.className="tl-date",this.sheetContainer.appendChild(t.parent),1===new Date(e.date.date).getDay()){const e=document.createElement("div");e.className="tl-week-seperator",this.sheetContainer.appendChild(e)}if(t.parent.append(t.starButton),t.starButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.setFavoritedDate(e.date)},t.starButton.className="tl-star-button tl-show-on-hover",t.starButton.title="Favorite Day",t.title.className="tl-date-label",t.title.innerText=new Date(e.date.date).toDateString(),e.date.nonWorkingDay&&t.title.classList.add("tl-date-label-weekend"),t.parent.append(t.title),t.weekendDescription.className="tl-weekend-description",t.parent.append(t.weekendDescription),!e.sheet.locked){const n=document.createElement("button");n.appendChild(r.get("add")),n.className="tl-add-entry-btn tl-show-on-hover",n.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.newEntry(e.date)},t.parent.append(n),t.pasteButton=document.createElement("button"),t.pasteButton.appendChild(r.get("switch_access_shortcut_add")),t.pasteButton.title="Paste from Favorite Day",t.pasteButton.className="tl-paste-btn tl-show-on-hover",t.pasteButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.pasteFromStarred(e.date)},t.parent.append(t.pasteButton)}this.addToWeekSum(t)}return t}return null}getEntryContainer(e,n,a){let s=n.entries.find((e=>e.entry===a));if(!s){s={entry:a,parent:document.createElement("div"),startHour:document.createElement("input"),endHour:document.createElement("input"),length:document.createElement("input"),reason:document.createElement("select"),comment:document.createElement("input"),commentButton:document.createElement("button"),noReasonWarning:document.createElement("div")},n.entries.push(s),s.parent.className="tl-entry",n.parent.appendChild(s.parent),s.startHour.type="time",s.startHour.className="tl-entry-start",e.sheet.locked&&(s.startHour.disabled=!0),s.startHour.onchange=()=>{var n,o,i;const r=a.startHour+a.lengthHours;null===(n=this.model)||void 0===n||n.changeStartHour(e.date,e.date.entries.indexOf(a),t.parseTimeTohours(null!==(o=null==s?void 0:s.startHour.value)&&void 0!==o?o:"08:00"));const d=l.round(r-a.startHour,2);null===(i=this.model)||void 0===i||i.changeLengthHours(e.date,e.date.entries.indexOf(a),d)},s.parent.appendChild(s.startHour);const o=document.createElement("span");o.className="tl-end-label",o.innerText="-",s.parent.appendChild(o),s.endHour.type="time",s.endHour.className="tl-entry-end",e.sheet.locked&&(s.endHour.disabled=!0),s.endHour.onchange=()=>{var n;if(null==s?void 0:s.endHour){const o=l.round(t.parseTimeTohours(s.endHour.value)-a.startHour,2);null===(n=this.model)||void 0===n||n.changeLengthHours(e.date,e.date.entries.indexOf(a),o)}},s.parent.appendChild(s.endHour),s.reason.onchange=()=>{var t,n;return null===(t=this.model)||void 0===t?void 0:t.changeReason(e.date,e.date.entries.indexOf(a),null!==(n=null==s?void 0:s.reason.value)&&void 0!==n?n:"")},e.sheet.locked&&(s.reason.disabled=!0),s.reason.className="tl-entry-reason",s.parent.appendChild(s.reason),this.updateReasonsDropdown(s.reason),1===n.entries.length&&(n.sumHours=document.createElement("span"),n.sumHours.className="tl-sum-hours",s.parent.append(n.sumHours)),s.length.type="number",s.length.className="tl-entry-length",s.length.step="0.01",e.sheet.locked&&(s.length.disabled=!0),s.length.onchange=()=>{var t;null===(t=this.model)||void 0===t||t.changeLengthHours(e.date,e.date.entries.indexOf(a),parseFloat((null==s?void 0:s.length.value)||"0"))},s.parent.appendChild(s.length);const i=document.createElement("span");if(i.className="tl-duration-label",i.innerText="hour(s)",s.parent.appendChild(i),!e.sheet.locked){s.commentButton.className="tl-add-comment-btn tl-show-on-hover",s.commentButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.toggleComment(e.date,e.date.entries.indexOf(a))},s.parent.appendChild(s.commentButton);const t=document.createElement("button");t.appendChild(r.get("delete")),t.className="tl-remove-entry-btn tl-show-on-hover",t.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.deleteEntry(e.date,e.date.entries.indexOf(a))},s.parent.appendChild(t)}s.noReasonWarning.append(r.get("warning",!0)),s.noReasonWarning.append(" No reason selected!"),s.noReasonWarning.className="tl-no-reason-warning tl-warning tl-has-reason",s.parent.appendChild(s.noReasonWarning),s.comment.type="text",s.comment.placeholder="Write a note...",s.comment.title="Write a note...",s.comment.className="tl-entry-comment",e.sheet.locked&&(s.comment.disabled=!0),s.comment.onchange=()=>{var t,n;null===(t=this.model)||void 0===t||t.changeComment(e.date,e.date.entries.indexOf(a),null!==(n=null==s?void 0:s.comment.value)&&void 0!==n?n:"")},s.parent.appendChild(s.comment)}return s}addToWeekSum(e){if(this.weekSums.length<1||0===new Date(e.date.date).getDay()){const t={dates:[e],element:document.createElement("div")};t.element.className="tl-week-sum",this.weekSums.push(t),e.parent.appendChild(t.element),e.parent.style.marginTop="38px"}else this.weekSums[this.weekSums.length-1].dates.push(e)}onDateUpdated(e){var n,a,s;if(this.selectedSheet===e.sheet&&this.sheetContainer){let o=this.getDateContainer(e);if(o){for(const a of e.date.entries){let s=this.getEntryContainer(e,o,a);s.startHour.value=t.formatHour(a.startHour),s.length.value=a.lengthHours.toString(),s.endHour.value=t.formatHour(a.startHour+a.lengthHours),s.reason.value=a.reasonId,s.comment.value=null!==(n=a.comment)&&void 0!==n?n:"",a.reasonId?s.noReasonWarning.classList.add("tl-has-reason"):s.noReasonWarning.classList.remove("tl-has-reason"),s.commentButton.title=a.hasComment?"Remove note":"Add note",s.commentButton.innerHTML="",s.commentButton.appendChild(r.get(a.hasComment?"speaker_notes_off":"speaker_notes")),a.hasComment?s.parent.classList.add("tl-has-comment"):s.parent.classList.remove("tl-has-comment")}const i=o.entries.filter((t=>!e.date.entries.find((e=>e===t.entry))));if(o.entries=o.entries.filter((e=>!i.includes(e))),i.forEach((e=>e.parent.remove())),o.sumHours){const t=l.sum(e.date.entries.map((e=>e.lengthHours)));o.sumHours.innerText=`${l.round(t,2)} hour${1===t?"":"s"}`}o.starButton.innerHTML="",o.starButton.disabled=e.date.favorited,o.starButton.classList.remove("tl-favorite"),o.starButton.appendChild(r.get("star",e.date.favorited)),e.date.favorited&&o.starButton.classList.add("tl-favorite"),o.entries.length>0||o.date.favorited?o.pasteButton.classList.add("tl-hide-favorite-button"):o.pasteButton.classList.remove("tl-hide-favorite-button"),o.title.title=null!==(a=e.date.dateDescription)&&void 0!==a?a:"",e.date.nonWorkingDay&&e.date.entries.length<1?(o.weekendDescription.classList.remove("tl-weekend-description-hidden"),o.weekendDescription.innerText=null!==(s=e.date.dateDescription)&&void 0!==s?s:""):o.weekendDescription.classList.add("tl-weekend-description-hidden")}const i=this.weekSums.find((t=>t.dates.some((t=>t.date===e.date))));if(i){const e=l.sum(i.dates.map((e=>l.sum(e.entries.map((e=>e.entry.lengthHours)))))),n=l.sum(i.dates.map((e=>e.date.hoursToWork))),a=t.getWeekNumberFromDate(i.dates[0].date.date);i.element.innerHTML=`<b>Week ${a}</b>: ${l.round(e,2)} / ${l.round(n,2)} hours`}}this.updateBalance()}updateReasonsDropdown(e){e.innerHTML="";for(const t of this.reasons){const n=document.createElement("option");n.value=t.serverId,n.innerText=t.value,e.appendChild(n)}}onReasonsUpdated(e){this.reasons=e;for(const e of this.sheetDates)for(const t of e.entries)this.updateReasonsDropdown(t.reason)}onSaveStatusUpdated(e){this.saveStatus&&(this.saveStatus.innerHTML="",this.saveStatus.classList.remove("tl-success"),this.saveStatus.classList.remove("tl-warning"),this.saveStatus.classList.remove("tl-clickable"),e===o.Saved&&(this.saveStatus.appendChild(r.get("cloud_done",!0)),this.saveStatus.append(" Saved"),this.saveStatus.classList.add("tl-success")),e===o.Waiting&&(this.saveStatus.appendChild(r.get("pending")),this.saveStatus.append(" Pending...")),e===o.Saving&&(this.saveStatus.appendChild(r.get("cloud_upload")),this.saveStatus.append(" Saving...")),e===o.Error&&(this.saveStatus.appendChild(r.get("cloud_off")),this.saveStatus.append(" Failed!"),this.saveStatus.classList.add("tl-warning"),this.saveStatus.classList.add("tl-clickable")))}onSaveStatusClick(){var e,t;(null===(e=this.saveStatus)||void 0===e?void 0:e.classList.contains("tl-clickable"))&&(null===(t=this.model)||void 0===t||t.save())}onSheetUpdated(e){if(this.sheetDropdown&&!this.sheetDropdownOptions.find((t=>t.sheet===e))){const t=document.createElement("option");t.value=e.id.toString(),t.innerText=`${new Date(e.start).toDateString()} - ${new Date(e.end).toDateString()}${e.locked?" (locked)":""}`,this.sheetDropdownOptions.push({sheet:e,element:t}),this.sheetDropdown.appendChild(t)}this.selectedSheet===e&&(this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[],this.weekSums=[]);for(const t of e.dates)this.onDateUpdated({sheet:e,date:t});this.updateBalance()}onSheetsUpdated(e){this.sheetDropdown&&(this.sheetDropdown.innerHTML=""),this.sheetDropdownOptions=[];for(const t of e)this.onSheetUpdated(t);this.onSelectedSheetChange()}onSelectedSheetChange(){var e;if(!this.sheetDropdown)return;this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[];const t=this.sheetDropdown.value;this.selectedSheet=null===(e=this.sheetDropdownOptions.find((e=>e.element.value===t)))||void 0===e?void 0:e.sheet,this.selectedSheet&&this.model&&this.model.fetchSheet(this.selectedSheet.id)}async updateBalance(){var e,n,a,s,o;if(!this.model||!this.balanceLabel||!this.selectedSheet)return;const i=await this.model.getFlexStatus(),d=l.round(i.balance,2);if(this.balanceLabel.innerText=`Flex: ${d} hour${1!=d?"s":""}${0===d?" ðŸ¥³":""}`,null===(e=this.balanceWarning)||void 0===e||e.classList.add("tl-hidden"),null===(n=this.fixBalanceButton)||void 0===n||n.classList.add("tl-hidden"),i.overdueDates.length+i.warningDates.length>0&&this.balanceWarning){const e=this.model.getFlexPolicy();this.balanceWarning.classList.remove("tl-hidden"),this.balanceWarning.innerHTML="",this.balanceWarning.append(r.get("warning",!0)),i.overdueDates.length>0?(null===(a=this.fixBalanceButton)||void 0===a||a.classList.remove("tl-hidden"),this.balanceWarning.append(`You have ${i.overdueDates.length} unbalanced flex date${1===i.overdueDates.length?"":"s"} older than ${e.previousDaysIncluded} days!`),this.balanceWarning.title+=`Overdue dates: ${i.overdueDates.map((e=>t.format(e.date,!1))).join(", ")}`):i.warningDates.length>0&&this.balanceWarning.append(`${i.warningDates.length} unbalanced flex date${1===i.warningDates.length?"":"s"} will soon be older than ${e.previousDaysIncluded} days!`),this.balanceWarning.title="",i.overdueDates.length>0&&(this.balanceWarning.title+=`Overdue dates: ${i.overdueDates.map((e=>t.format(e.date,!1))).join(", ")}`),i.warningDates.length>0&&(this.balanceWarning.title+=`${this.balanceWarning.title.length>0?"\n":""}Soon overdue dates: ${i.warningDates.map((e=>t.format(e.date,!1))).join(", ")}`),this.balanceWarning.append(" "),this.balanceWarning.append(r.get("info",!1))}await this.model.getFavoritedDate()?null===(s=this.sheetContainer)||void 0===s||s.classList.add("tl-has-favorite"):null===(o=this.sheetContainer)||void 0===o||o.classList.remove("tl-has-favorite")}fixBalance(){var e;confirm("Are you sure you want to cancel out all overdue flex time? Please coorindate with a supervisor before using this feature.")&&(null===(e=this.model)||void 0===e||e.fixOverdueFlexBalance(),this.updateBalance())}},new class{constructor(){this.submitting=!1,this.createUI(),this.clockInButtonFinder()}createUI(){const e=document.createElement("style");e.innerHTML="\n.re-label\n{\n    font-size: 1.5em;\n    margin-bottom: 10px;\n}\n.re-reason-select\n{\n    padding: 5px;\n}\n.re-reason-ui\n{\n    z-index: 2000;\n    position: fixed;\n    inset: 0;\n    background-color: rgba(0,0,0,0.75);\n    padding-top: 45vh;\n    text-align: center;\n    color: white;\n    font-weight: bold;\n}\n.re-btn\n{\n    padding: 0 var(--button-padding-x, 15px);\n    min-width: 80px;\n    height: var(--button-size, 30px);\n    font-weight: 600;\n    font-size: var(--button-font-size, 12px);\n    font-family: var(--body-font-family);\n    border: 0;\n    border-radius: 4px;\n    margin: 5px;\n}\n.re-btn.re-primary\n{\n    color: var(--primary-bg-text-color, white);\n    background-color: var(--primary-600);\n}\n.re-btn.re-secondary\n{\n    color: var(--secondary-bg-text-color, #535353);\n    background-color: var(--secondary-600);\n}\n.re-blur\n{\n    filter: blur(2px);\n}\n.re-submitting .re-btn\n{\n    display: none;\n}\n.re-submitting-text\n{\n    display: none;\n    font-size: 1.5em;\n}\n.re-submitting .re-submitting-text\n{\n    display: block;\n}\n",document.body.append(e),this.reasonEnhancementUI=document.createElement("div"),this.reasonEnhancementUI.className="re-reason-ui",this.reasonEnhancementUI.style.display="none",document.body.appendChild(this.reasonEnhancementUI);const t=document.createElement("div");t.innerText="Choose Default Reason",t.className="re-label",this.reasonEnhancementUI.appendChild(t),this.reasonSelect=document.createElement("select"),this.reasonSelect.className="re-reason-select",this.reasonSelect.onchange=()=>this.saveDefaultReasonValue(),this.reasonEnhancementUI.appendChild(this.reasonSelect),this.reasonEnhancementUI.appendChild(document.createElement("br"));const n=document.createElement("button");n.className="re-cancel-btn re-btn re-secondary",n.innerText="Cancel",n.onclick=()=>this.cancel(),this.reasonEnhancementUI.appendChild(n);const a=document.createElement("button");a.className="re-submit-btn re-btn re-primary",a.innerText="Submit",a.onclick=()=>this.submit(),this.reasonEnhancementUI.appendChild(a);const s=document.createElement("div");s.className="re-submitting-text",s.innerText="Submitting...",this.reasonEnhancementUI.appendChild(s)}async clockInButtonFinder(){for(var e;;)this.findUnenhancedButtons("b-button.punch-clock-button, b-button.time-widget-clock-in-btn, b-button.time-widget-clock-out-btn").forEach((e=>this.enhanceClockInButton(e,s.FixLatest))),this.findUnenhancedButtons("b-button.quick-fix-apply-button").forEach((e=>this.enhanceClockInButton(e,s.FixAll))),this.appRoot||(this.appRoot=null!==(e=document.querySelector("app-root"))&&void 0!==e?e:void 0),await a.for(10)}findUnenhancedButtons(e){var t=[],n=document.querySelectorAll(e);for(const e of n)e.classList.contains("re-enhanced")||(e.classList.add("re-enhanced"),t.push(e));return t}enhanceClockInButton(e,t){e.addEventListener("click",(()=>this.showReasonFixer(t)))}saveDefaultReasonValue(){this.reasonSelect&&window.localStorage.setItem("re-last-reason",this.reasonSelect.value)}loadDefaultReasonValue(){var e;this.reasonSelect&&(this.reasonSelect.value=null!==(e=window.localStorage.getItem("re-last-reason"))&&void 0!==e?e:"")}async showReasonFixer(e){if(this.reasonEnhancementUI&&(await a.for(250),this.setUIVisible(!0),this.mode=e,this.reasonSelect)){const e=await n.metadata();this.reasonSelect.innerHTML="";for(const t of e.timeLogEntryReason.values){const e=document.createElement("option");e.value=t.serverId,e.innerText=t.value,this.reasonSelect.appendChild(e)}this.loadDefaultReasonValue()}}cancel(){this.setUIVisible(!1)}setUIVisible(e){this.reasonEnhancementUI&&(this.reasonEnhancementUI.style.display=e?"block":"none"),this.appRoot&&(e?this.appRoot.classList.add("re-blur"):this.appRoot.classList.remove("re-blur"))}async submit(){var e,t;await a.until((()=>!this.submitting)),this.submitting=!0,null===(e=this.reasonEnhancementUI)||void 0===e||e.classList.add("re-submitting"),this.mode===s.FixAll&&await this.fixAll(),this.mode===s.FixLatest&&await this.fixLatest(),this.setUIVisible(!1),null===(t=this.reasonEnhancementUI)||void 0===t||t.classList.remove("re-submitting"),this.submitting=!1}async fixAll(){if(!this.reasonSelect)return;const e=this.reasonSelect.value,a=await n.sheets();for(const s of a.employeeSheets){if(s.locked)continue;const a=await n.attendance(s.id);for(const s of a.attendance)if(s.entries.some((e=>!e.reason))){const a=t.parse(s.date);if("number"!=typeof a)continue;const o=s.entries.map((n=>{var s,o,i,r;return{startHour:((null!==(s=t.parse(n.start))&&void 0!==s?s:Date.now())-a)/36e5,lengthHours:n.end?((null!==(o=t.parse(n.end))&&void 0!==o?o:Date.now())-(null!==(i=t.parse(n.start))&&void 0!==i?i:Date.now()))/36e5:null,reasonId:n.reason||e,comment:null!==(r=n.comment)&&void 0!==r?r:null}}));await n.submit(a,o)}}}async fixLatest(){if(!this.reasonSelect)return;const e=this.reasonSelect.value;let a=null;const s=await n.sheets();for(const e of s.employeeSheets){if(e.locked)continue;const s=await n.attendance(e.id);for(const e of s.attendance){const n=t.parse(e.date);if("number"==typeof n&&(!a||n>a.date)){const s=e.entries.map((e=>{var a,s,o,i;return{startHour:((null!==(a=t.parse(e.start))&&void 0!==a?a:Date.now())-n)/36e5,lengthHours:e.end?((null!==(s=t.parse(e.end))&&void 0!==s?s:Date.now())-(null!==(o=t.parse(e.start))&&void 0!==o?o:Date.now()))/36e5:null,reasonId:e.reason,comment:null!==(i=e.comment)&&void 0!==i?i:null}}));a={date:n,entries:s}}}}if(a){for(const t of a.entries)t.reasonId=t.reasonId||e;await n.submit(a.date,a.entries)}}}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQ3hCLE1BQU03UixFQUFTSSxLQUFLeVIsYUFBYWhSLE1BQ2pDLElBQUlzUyxFQUErRCxLQUNuRSxNQUFNclAsUUFBZTNFLEVBQU0yRSxTQUMzQixJQUFLLE1BQU1oRCxLQUFTZ0QsRUFBT2dCLGVBQzNCLENBQ0ksR0FBSWhFLEVBQU1xRSxPQUFRLFNBQ2xCLE1BQU1PLFFBQW1CdkcsRUFBTXVHLFdBQVc1RSxFQUFNSixJQUNoRCxJQUFLLE1BQU16QyxLQUFReUgsRUFBV0EsV0FDOUIsQ0FDSSxNQUFNM0gsRUFBT1IsRUFBTVosTUFBTXNCLEVBQUtBLE1BQzlCLEdBQW9CLGlCQUFURixLQUNOb1YsR0FBVXBWLEVBQU9vVixFQUFPbFYsTUFDN0IsQ0FDSSxNQUFNbUIsRUFBOEJuQixFQUFLbUIsUUFBUUssS0FBSUgsSSxZQUVqRCxNQUFPLENBQ0hNLFlBQWlDLFFBQXBCLEVBQUFyQyxFQUFBLE1BQVkrQixFQUFFSSxjQUFNLFFBQUk5QixLQUFLbUksT0FBU2hJLEdBQVEsS0FDM0QrQixZQUFhUixFQUFFTyxNQUEwQixRQUFsQixFQUFBdEMsRUFBQSxNQUFZK0IsRUFBRU8sWUFBSSxRQUFJakMsS0FBS21JLFFBQThCLFFBQXBCLEVBQUF4SSxFQUFBLE1BQVkrQixFQUFFSSxjQUFNLFFBQUk5QixLQUFLbUksUUFBVSxLQUFnQixLQUNuSHhHLFNBQVVELEVBQUVVLE9BQ1pDLFFBQWtCLFFBQVQsRUFBQVgsRUFBRVcsZUFBTyxRQUFJLEtBQ3pCLElBRUxrVCxFQUFTLENBQUVsVixLQUFNRixFQUFNcUIsUUFBU0EsRSxHQUk1QyxHQUFJK1QsRUFDSixDQUNJLElBQUssTUFBTWpMLEtBQVNpTCxFQUFPL1QsUUFFdkI4SSxFQUFNM0ksU0FBVzJJLEVBQU0zSSxVQUFZUyxRQUVqQ2IsRUFBTXFKLE9BQU8ySyxFQUFPbFYsS0FBTWtWLEVBQU8vVCxRLENBRS9DLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9VdGlscy9BcGkudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvRGF0ZXMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvSGlCb2IvSGlCb2IudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvV2FpdC50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9SZWFzb25FbmhhbmNlbWVudHMvUmVhc29uc0VuaGFuY2VtZW50cy50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9UaW1lbG9nL1RpbWVsb2dUeXBlcy50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9VdGlscy9FdmVudEhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvTWF0ZXJpYWxJY29uLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL051bWJlcnMudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVGltZWxvZy9UaW1lbG9nTW9kZWwudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVGltZWxvZy9UaW1lbG9nVUkudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVGltZWxvZy9UaW1lbG9nQ3NzLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1JlYXNvbkVuaGFuY2VtZW50cy9SZWFzb25FbmhhbmNlbWVudHNDc3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEFwaVxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIHhocihtZXRob2Q6IFwiR0VUXCIgfCBcIlBPU1RcIiwgdXJsOiBzdHJpbmcsIGJvZHk6IG9iamVjdClcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8eyBzdGF0dXM6IG51bWJlciwgYm9keTogYW55IH0+KHJlc29sdmUgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwpO1xyXG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XHJcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcclxuICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiB4aHIucmVzcG9uc2VUZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzICE9PSAyMDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lmhhc093blByb3BlcnR5KFwiZXJyb3JcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHJlc3VsdC5oYXNPd25Qcm9wZXJ0eShcImtleVwiKSA/IHJlc3VsdC5rZXkgOiB4aHIuc3RhdHVzLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChgSGlCb2IgVXRpbHM6IEVycm9yICR7a2V5fSAtICR7cmVzdWx0LmVycm9yfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoYEhpQm9iIFV0aWxzOiBFcnJvciAke3hoci5zdGF0dXN9IC0gY2hlY2sgdGhlIGRldmVsb3BlciBjb25zb2xlIGZvciBtb3JlIGluZm9ybWF0aW9uLmApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBIaUJvYiBVdGlsczogRXJyb3IgJHt4aHIuc3RhdHVzfS5gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coeGhyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogeGhyLnN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogcmVzdWx0XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KGJvZHkpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBEYXRlc1xyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIHBhcnNlKHN0cjogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghc3RyKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBjb25zdCBzcGxpdCA9IHN0ci5zcGxpdChcIlRcIik7XHJcbiAgICAgICAgaWYgKHNwbGl0Lmxlbmd0aCA8IDIpIHNwbGl0LnB1c2goXCIwMDowMFwiKTtcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUoc3BsaXQuam9pbihcIlRcIikpLmdldFRpbWUoKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgZm9ybWF0KHRpbWU6IG51bWJlciwgaW5jbHVkZVRpbWVzdGFtcDogYm9vbGVhbilcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRpbWUpIHJldHVybiBcIlwiO1xyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0aW1lKTtcclxuICAgICAgICByZXR1cm4gYCR7ZGF0ZS5nZXRGdWxsWWVhcigpfS0keyhkYXRlLmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX0tJHtkYXRlLmdldERhdGUoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX0ke2luY2x1ZGVUaW1lc3RhbXAgPyBgVCR7ZGF0ZS5nZXRIb3VycygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfToke2RhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfWAgOiBcIlwifWA7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGZvcm1hdEhvdXIoaG91cnM6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBjb25zdCBob3VyID0gTWF0aC5mbG9vcihob3VycyAlIDI0KTtcclxuICAgICAgICBjb25zdCBtaW51dGUgPSBNYXRoLnJvdW5kKChob3VycyAtIGhvdXIpICogNjApO1xyXG4gICAgICAgIHJldHVybiBgJHtob3VyLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfToke21pbnV0ZS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKX1gXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFdlZWtOdW1iZXJGcm9tRGF0ZSh0aW1lOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh0aW1lKTtcclxuICAgICAgICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xyXG4gICAgICAgIC8vIFRodXJzZGF5IGluIGN1cnJlbnQgd2VlayBkZWNpZGVzIHRoZSB5ZWFyLlxyXG4gICAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIDMgLSAoZGF0ZS5nZXREYXkoKSArIDYpICUgNyk7XHJcbiAgICAgICAgLy8gSmFudWFyeSA0IGlzIGFsd2F5cyBpbiB3ZWVrIDEuXHJcbiAgICAgICAgdmFyIHdlZWsxID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCAwLCA0KTtcclxuICAgICAgICAvLyBBZGp1c3QgdG8gVGh1cnNkYXkgaW4gd2VlayAxIGFuZCBjb3VudCBudW1iZXIgb2Ygd2Vla3MgZnJvbSBkYXRlIHRvIHdlZWsxLlxyXG4gICAgICAgIHJldHVybiAxICsgTWF0aC5yb3VuZCgoKGRhdGUuZ2V0VGltZSgpIC0gd2VlazEuZ2V0VGltZSgpKSAvIDg2NDAwMDAwXHJcbiAgICAgICAgICAgIC0gMyArICh3ZWVrMS5nZXREYXkoKSArIDYpICUgNykgLyA3KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgcGFyc2VUaW1lVG9ob3Vycyh0aW1lOiBzdHJpbmcpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc3BsaXQgPSB0aW1lLnNwbGl0KFwiOlwiKTtcclxuICAgICAgICByZXR1cm4gcGFyc2VJbnQoc3BsaXRbMF0pICsgcGFyc2VJbnQoc3BsaXRbMV0pIC8gNjA7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBBcGkgfSBmcm9tIFwiLi4vVXRpbHMvQXBpXCI7XHJcbmltcG9ydCB7IERhdGVzIH0gZnJvbSBcIi4uL1V0aWxzL0RhdGVzXCI7XHJcbmltcG9ydCB7IEhpQm9iQXR0ZW5kYW5jZSwgSGlCb2JNZXRhZGF0YSwgSGlCb2JTaGVldHMsIEhpQm9iU3VibWl0RW50cnksIEhpQm9iVXNlciB9IGZyb20gXCIuL0hpQm9iVHlwZXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBIaUJvYlxyXG57XHJcbiAgICBwcml2YXRlIHN0YXRpYyB1c2VySWQ6IHN0cmluZyB8IG51bGw7XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIHN1Ym1pdChkYXRlOiBudW1iZXIsIGVudHJpZXM6IEhpQm9iU3VibWl0RW50cnlbXSk6IFByb21pc2U8Ym9vbGVhbj5cclxuICAgIHtcclxuICAgICAgICBpZiAoZW50cmllcy5zb21lKGUgPT4gIWUucmVhc29uSWQpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJXQVJOSU5HOiBTT01FIEVOVFJJRVMgSEFWRSBOTyBSRUFTT04gU0VUIC0gTk9UIFNVQk1JVFRJTkchIVwiLCBkYXRlLCBlbnRyaWVzKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBkYXRhID0gZW50cmllcy5tYXAoZSA9PiB7IHJldHVybiB7IHN0YXJ0OiBEYXRlcy5mb3JtYXQoZGF0ZSArIGUuc3RhcnRIb3VyICogMzYwMCAqIDEwMDAsIHRydWUpLCBlbmQ6IGUubGVuZ3RoSG91cnMgPyBEYXRlcy5mb3JtYXQoZGF0ZSArIChlLnN0YXJ0SG91ciArIGUubGVuZ3RoSG91cnMpICogMzYwMCAqIDEwMDAsIHRydWUpIDogdW5kZWZpbmVkLCByZWFzb246IGUucmVhc29uSWQsIGNvbW1lbnQ6IGUuY29tbWVudCA/PyB1bmRlZmluZWQgfSB9KTtcclxuICAgICAgICBjb25zdCBkYXRlU3RyID0gRGF0ZXMuZm9ybWF0KGRhdGUsIGZhbHNlKTtcclxuICAgICAgICBjb25zdCB1c2VySWQgPSBhd2FpdCB0aGlzLmdldFVzZXJJZCgpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFwaS54aHIoXCJQT1NUXCIsIGBodHRwczovL2FwcC5oaWJvYi5jb20vYXBpL2F0dGVuZGFuY2UvZW1wbG95ZWVzLyR7dXNlcklkfS9hdHRlbmRhbmNlL2VudHJpZXM/Zm9yRGF0ZT0ke2RhdGVTdHJ9YCwgZGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5zdGF0dXMgPT09IDIwMDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgdGltZWxvZ1JlYXNvbnMoKTogUHJvbWlzZTx7IGlkOiBzdHJpbmcsIG5hbWU6IHN0cmluZyB9W10+XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhd2FpdCB0aGlzLm1ldGFkYXRhKCk7XHJcbiAgICAgICAgcmV0dXJuIG1ldGFkYXRhLnRpbWVMb2dFbnRyeVJlYXNvbi52YWx1ZXMubWFwKHYgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBpZDogdi5zZXJ2ZXJJZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IHYudmFsdWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBhdHRlbmRhbmNlKHNoZWV0OiBudW1iZXIpOiBQcm9taXNlPEhpQm9iQXR0ZW5kYW5jZT5cclxuICAgIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiR0VUXCIsIGBodHRwczovL2FwcC5oaWJvYi5jb20vYXBpL2VtcGxveWVlcy9hdHRlbmRhbmNlL215L3NoZWV0cy8ke3NoZWV0fWAsIHt9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LmJvZHk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIHNoZWV0cygpOiBQcm9taXNlPEhpQm9iU2hlZXRzPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHVzZXJJZCA9IGF3YWl0IHRoaXMuZ2V0VXNlcklkKCk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQXBpLnhocihcIkdFVFwiLCBgaHR0cHM6Ly9hcHAuaGlib2IuY29tL2FwaS9lbXBsb3llZXMvJHt1c2VySWR9L3RpbWVsb2cvYXR0ZW5kYW5jZS9zaGVldHNgLCB7fSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5ib2R5O1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBtZXRhZGF0YSgpOiBQcm9taXNlPEhpQm9iTWV0YWRhdGE+XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQXBpLnhocihcIkdFVFwiLCBcImh0dHBzOi8vYXBwLmhpYm9iLmNvbS9hcGkvY29tcGFueS9tZXRhZGF0YS9saXN0cy8/aW5jbHVkZUFyY2hpdmVkPXRydWVcIiwge30pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuYm9keTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgc3RhdGljIGFzeW5jIGdldFVzZXJJZCgpOiBQcm9taXNlPHN0cmluZz5cclxuICAgIHtcclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMudXNlcklkICE9PSBcInN0cmluZ1wiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51c2VySW5mbygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy51c2VySWQgPz8gXCJcIjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgdXNlckluZm8oKTogUHJvbWlzZTxIaUJvYlVzZXI+XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQXBpLnhocihcIkdFVFwiLCBcImh0dHBzOi8vYXBwLmhpYm9iLmNvbS9hcGkvdXNlclwiLCB7fSk7XHJcbiAgICAgICAgdGhpcy51c2VySWQgPSAocmVzdWx0LmJvZHkgYXMgSGlCb2JVc2VyKS5pZDtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LmJvZHk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgV2FpdFxyXG57XHJcbiAgICBwdWJsaWMgc3RhdGljIGZvcihtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPlxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPihyZXNvbHZlID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiByZXNvbHZlKCksIG1zKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgdW50aWwoZGVsZWdhdGU6ICgpID0+IGJvb2xlYW4pXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KHJlc29sdmUgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZSA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVsZWdhdGUoKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoaGFuZGxlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBIaUJvYiB9IGZyb20gXCIuLi9IaUJvYi9IaUJvYlwiO1xyXG5pbXBvcnQgeyBIaUJvYlN1Ym1pdEVudHJ5IH0gZnJvbSBcIi4uL0hpQm9iL0hpQm9iVHlwZXNcIjtcclxuaW1wb3J0IHsgRGF0ZXMgfSBmcm9tIFwiLi4vVXRpbHMvRGF0ZXNcIjtcclxuaW1wb3J0IHsgV2FpdCB9IGZyb20gXCIuLi9VdGlscy9XYWl0XCI7XHJcbmltcG9ydCB7IFJlYXNvbkVuaGFuY2VtZW50Q3NzIH0gZnJvbSBcIi4vUmVhc29uRW5oYW5jZW1lbnRzQ3NzXCI7XHJcblxyXG5leHBvcnQgZW51bSBSZWFzb25FbmhhbmNlbWVudE1vZGVcclxue1xyXG4gICAgRml4QWxsLFxyXG4gICAgRml4TGF0ZXN0LFxyXG59XHJcbmV4cG9ydCBjbGFzcyBSZWFzb25FbmhhbmNlbWVudHNcclxue1xyXG4gICAgcHJpdmF0ZSByZWFzb25FbmhhbmNlbWVudFVJPzogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHJlYXNvblNlbGVjdD86IEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBhcHBSb290PzogRWxlbWVudDtcclxuICAgIHByaXZhdGUgc3VibWl0dGluZyA9IGZhbHNlO1xyXG5cclxuICAgIHByaXZhdGUgbW9kZT86IFJlYXNvbkVuaGFuY2VtZW50TW9kZTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuY3JlYXRlVUkoKTtcclxuICAgICAgICB0aGlzLmNsb2NrSW5CdXR0b25GaW5kZXIoKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgY3JlYXRlVUkoKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG4gICAgICAgIHN0eWxlLmlubmVySFRNTCA9IFJlYXNvbkVuaGFuY2VtZW50Q3NzO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHN0eWxlKTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmNsYXNzTmFtZSA9IFwicmUtcmVhc29uLXVpXCI7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBsYWJlbC5pbm5lclRleHQgPSBcIkNob29zZSBEZWZhdWx0IFJlYXNvblwiO1xyXG4gICAgICAgIGxhYmVsLmNsYXNzTmFtZSA9IFwicmUtbGFiZWxcIjtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuYXBwZW5kQ2hpbGQobGFiZWwpO1xyXG5cclxuICAgICAgICB0aGlzLnJlYXNvblNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgdGhpcy5yZWFzb25TZWxlY3QuY2xhc3NOYW1lID0gXCJyZS1yZWFzb24tc2VsZWN0XCI7XHJcbiAgICAgICAgdGhpcy5yZWFzb25TZWxlY3Qub25jaGFuZ2UgPSAoKSA9PiB0aGlzLnNhdmVEZWZhdWx0UmVhc29uVmFsdWUoKTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuYXBwZW5kQ2hpbGQodGhpcy5yZWFzb25TZWxlY3QpO1xyXG5cclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpKTtcclxuXHJcbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICBjYW5jZWxCdXR0b24uY2xhc3NOYW1lID0gXCJyZS1jYW5jZWwtYnRuIHJlLWJ0biByZS1zZWNvbmRhcnlcIjtcclxuICAgICAgICBjYW5jZWxCdXR0b24uaW5uZXJUZXh0ID0gXCJDYW5jZWxcIlxyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jYW5jZWwoKTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuYXBwZW5kQ2hpbGQoY2FuY2VsQnV0dG9uKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICBzdWJtaXRCdXR0b24uY2xhc3NOYW1lID0gXCJyZS1zdWJtaXQtYnRuIHJlLWJ0biByZS1wcmltYXJ5XCI7XHJcbiAgICAgICAgc3VibWl0QnV0dG9uLmlubmVyVGV4dCA9IFwiU3VibWl0XCJcclxuICAgICAgICBzdWJtaXRCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuc3VibWl0KCk7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKHN1Ym1pdEJ1dHRvbik7XHJcblxyXG5cclxuICAgICAgICBjb25zdCBzdWJtaXR0aW5nVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgc3VibWl0dGluZ1RleHQuY2xhc3NOYW1lID0gXCJyZS1zdWJtaXR0aW5nLXRleHRcIjtcclxuICAgICAgICBzdWJtaXR0aW5nVGV4dC5pbm5lclRleHQgPSBcIlN1Ym1pdHRpbmcuLi5cIlxyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChzdWJtaXR0aW5nVGV4dCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGNsb2NrSW5CdXR0b25GaW5kZXIoKVxyXG4gICAge1xyXG4gICAgICAgIHdoaWxlICh0cnVlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGNsb2NrSW5CdXR0b25zID0gdGhpcy5maW5kVW5lbmhhbmNlZEJ1dHRvbnMoXCJiLWJ1dHRvbi5wdW5jaC1jbG9jay1idXR0b24sIGItYnV0dG9uLnRpbWUtd2lkZ2V0LWNsb2NrLWluLWJ0biwgYi1idXR0b24udGltZS13aWRnZXQtY2xvY2stb3V0LWJ0blwiKTtcclxuICAgICAgICAgICAgY2xvY2tJbkJ1dHRvbnMuZm9yRWFjaChlID0+IHRoaXMuZW5oYW5jZUNsb2NrSW5CdXR0b24oZSwgUmVhc29uRW5oYW5jZW1lbnRNb2RlLkZpeExhdGVzdCkpO1xyXG4gICAgICAgICAgICB2YXIgcXVpY2tGaXhCdXR0b24gPSB0aGlzLmZpbmRVbmVuaGFuY2VkQnV0dG9ucyhcImItYnV0dG9uLnF1aWNrLWZpeC1hcHBseS1idXR0b25cIik7XHJcbiAgICAgICAgICAgIHF1aWNrRml4QnV0dG9uLmZvckVhY2goZSA9PiB0aGlzLmVuaGFuY2VDbG9ja0luQnV0dG9uKGUsIFJlYXNvbkVuaGFuY2VtZW50TW9kZS5GaXhBbGwpKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5hcHBSb290KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcFJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYXBwLXJvb3RcIikgPz8gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGF3YWl0IFdhaXQuZm9yKDEwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGZpbmRVbmVuaGFuY2VkQnV0dG9ucyhzZWxlY3Rvcjogc3RyaW5nKTogRWxlbWVudFtdXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGFyciA9IFtdIGFzIEVsZW1lbnRbXTtcclxuICAgICAgICB2YXIgcXVlcnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgcXVlcnkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicmUtZW5oYW5jZWRcIikpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInJlLWVuaGFuY2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgYXJyLnB1c2goZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFycjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGVuaGFuY2VDbG9ja0luQnV0dG9uKGJ1dHRvbjogRWxlbWVudCwgbW9kZTogUmVhc29uRW5oYW5jZW1lbnRNb2RlKVxyXG4gICAge1xyXG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5zaG93UmVhc29uRml4ZXIobW9kZSkpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBzYXZlRGVmYXVsdFJlYXNvblZhbHVlKClcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVhc29uU2VsZWN0KSByZXR1cm47XHJcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicmUtbGFzdC1yZWFzb25cIiwgdGhpcy5yZWFzb25TZWxlY3QudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBsb2FkRGVmYXVsdFJlYXNvblZhbHVlKClcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVhc29uU2VsZWN0KSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5yZWFzb25TZWxlY3QudmFsdWUgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJyZS1sYXN0LXJlYXNvblwiKSA/PyBcIlwiO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBzaG93UmVhc29uRml4ZXIobW9kZTogUmVhc29uRW5oYW5jZW1lbnRNb2RlKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJKSByZXR1cm47XHJcbiAgICAgICAgYXdhaXQgV2FpdC5mb3IoMjUwKTtcclxuICAgICAgICB0aGlzLnNldFVJVmlzaWJsZSh0cnVlKTtcclxuICAgICAgICB0aGlzLm1vZGUgPSBtb2RlO1xyXG4gICAgICAgIGlmICh0aGlzLnJlYXNvblNlbGVjdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlYXNvbnMgPSBhd2FpdCBIaUJvYi5tZXRhZGF0YSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlYXNvbiBvZiByZWFzb25zLnRpbWVMb2dFbnRyeVJlYXNvbi52YWx1ZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICAgICAgICAgICAgICBvcHRpb24udmFsdWUgPSByZWFzb24uc2VydmVySWQ7XHJcbiAgICAgICAgICAgICAgICBvcHRpb24uaW5uZXJUZXh0ID0gcmVhc29uLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWFzb25TZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmxvYWREZWZhdWx0UmVhc29uVmFsdWUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNhbmNlbCgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5zZXRVSVZpc2libGUoZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBzZXRVSVZpc2libGUodmFsdWU6IGJvb2xlYW4pXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSSlcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgICAgICBlbHNlIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmFwcFJvb3QpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB0aGlzLmFwcFJvb3QuY2xhc3NMaXN0LmFkZChcInJlLWJsdXJcIik7XHJcbiAgICAgICAgICAgIGVsc2UgdGhpcy5hcHBSb290LmNsYXNzTGlzdC5yZW1vdmUoXCJyZS1ibHVyXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgc3VibWl0KClcclxuICAgIHtcclxuICAgICAgICBhd2FpdCBXYWl0LnVudGlsKCgpID0+ICF0aGlzLnN1Ym1pdHRpbmcpO1xyXG5cclxuICAgICAgICB0aGlzLnN1Ym1pdHRpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVST8uY2xhc3NMaXN0LmFkZChcInJlLXN1Ym1pdHRpbmdcIik7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgPT09IFJlYXNvbkVuaGFuY2VtZW50TW9kZS5GaXhBbGwpIGF3YWl0IHRoaXMuZml4QWxsKCk7XHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gUmVhc29uRW5oYW5jZW1lbnRNb2RlLkZpeExhdGVzdCkgYXdhaXQgdGhpcy5maXhMYXRlc3QoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRVSVZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVST8uY2xhc3NMaXN0LnJlbW92ZShcInJlLXN1Ym1pdHRpbmdcIik7XHJcblxyXG4gICAgICAgIHRoaXMuc3VibWl0dGluZyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBmaXhBbGwoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFzb25TZWxlY3QpIHJldHVybjtcclxuICAgICAgICBjb25zdCByZWFzb24gPSB0aGlzLnJlYXNvblNlbGVjdC52YWx1ZTtcclxuICAgICAgICBjb25zdCBzaGVldHMgPSBhd2FpdCBIaUJvYi5zaGVldHMoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHNoZWV0cy5lbXBsb3llZVNoZWV0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzaGVldC5sb2NrZWQpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBjb25zdCBhdHRlbmRhbmNlID0gYXdhaXQgSGlCb2IuYXR0ZW5kYW5jZShzaGVldC5pZCk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZGF0ZSBvZiBhdHRlbmRhbmNlLmF0dGVuZGFuY2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRlLmVudHJpZXMuc29tZShlID0+ICFlLnJlYXNvbikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IERhdGVzLnBhcnNlKGRhdGUuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lICE9PSBcIm51bWJlclwiKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRyaWVzOiBIaUJvYlN1Ym1pdEVudHJ5W10gPSBkYXRlLmVudHJpZXMubWFwKGUgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydEhvdXI6ICgoRGF0ZXMucGFyc2UoZS5zdGFydCkgPz8gRGF0ZS5ub3coKSkgLSB0aW1lKSAvICgzNjAwICogMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGhIb3VyczogZS5lbmQgPyAoKERhdGVzLnBhcnNlKGUuZW5kKSA/PyBEYXRlLm5vdygpKSAtIChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSkgLyAoMzYwMCAqIDEwMDApIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbklkOiBlLnJlYXNvbiB8fCByZWFzb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50OiBlLmNvbW1lbnQgPz8gbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IEhpQm9iLnN1Ym1pdCh0aW1lLCBlbnRyaWVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgZml4TGF0ZXN0KClcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVhc29uU2VsZWN0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgcmVhc29uID0gdGhpcy5yZWFzb25TZWxlY3QudmFsdWU7XHJcbiAgICAgICAgbGV0IGxhdGVzdDogeyBkYXRlOiBudW1iZXIsIGVudHJpZXM6IEhpQm9iU3VibWl0RW50cnlbXSB9IHwgbnVsbCA9IG51bGw7XHJcbiAgICAgICAgY29uc3Qgc2hlZXRzID0gYXdhaXQgSGlCb2Iuc2hlZXRzKCk7XHJcbiAgICAgICAgZm9yIChjb25zdCBzaGVldCBvZiBzaGVldHMuZW1wbG95ZWVTaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoc2hlZXQubG9ja2VkKSBjb250aW51ZTtcclxuICAgICAgICAgICAgY29uc3QgYXR0ZW5kYW5jZSA9IGF3YWl0IEhpQm9iLmF0dGVuZGFuY2Uoc2hlZXQuaWQpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2YgYXR0ZW5kYW5jZS5hdHRlbmRhbmNlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lID0gRGF0ZXMucGFyc2UoZGF0ZS5kYXRlKTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGltZSAhPT0gXCJudW1iZXJcIikgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWxhdGVzdCB8fCB0aW1lID4gbGF0ZXN0LmRhdGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW50cmllczogSGlCb2JTdWJtaXRFbnRyeVtdID0gZGF0ZS5lbnRyaWVzLm1hcChlID0+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRIb3VyOiAoKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpIC0gdGltZSkgLyAoMzYwMCAqIDEwMDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoSG91cnM6IGUuZW5kID8gKChEYXRlcy5wYXJzZShlLmVuZCkgPz8gRGF0ZS5ub3coKSkgLSAoRGF0ZXMucGFyc2UoZS5zdGFydCkgPz8gRGF0ZS5ub3coKSkpIC8gKDM2MDAgKiAxMDAwKSA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb25JZDogZS5yZWFzb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50OiBlLmNvbW1lbnQgPz8gbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhdGVzdCA9IHsgZGF0ZTogdGltZSwgZW50cmllczogZW50cmllcyB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsYXRlc3QpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGxhdGVzdC5lbnRyaWVzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlbnRyeS5yZWFzb25JZCA9IGVudHJ5LnJlYXNvbklkIHx8IHJlYXNvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhd2FpdCBIaUJvYi5zdWJtaXQobGF0ZXN0LmRhdGUsIGxhdGVzdC5lbnRyaWVzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgaW50ZXJmYWNlIFRpbWVsb2dFbnRyeVxyXG57XHJcbiAgICBzdGFydEhvdXI6IG51bWJlcixcclxuICAgIGxlbmd0aEhvdXJzOiBudW1iZXIsXHJcbiAgICByZWFzb25JZDogc3RyaW5nLFxyXG4gICAgY29tbWVudDogc3RyaW5nIHwgbnVsbCxcclxuICAgIGhhc0NvbW1lbnQ6IGJvb2xlYW5cclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVsb2dEYXRlXHJcbntcclxuICAgIGRpcnR5OiBib29sZWFuLFxyXG4gICAgZGF0ZTogbnVtYmVyXHJcbiAgICBlbnRyaWVzOiBUaW1lbG9nRW50cnlbXSxcclxuICAgIG5vbldvcmtpbmdEYXk6IGJvb2xlYW4sXHJcbiAgICBob3Vyc1RvV29yazogbnVtYmVyXHJcbiAgICBmYXZvcml0ZWQ6IGJvb2xlYW4sXHJcbiAgICBkYXRlRGVzY3JpcHRpb24/OiBzdHJpbmdcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVsb2dTaGVldFxyXG57XHJcbiAgICBpZDogbnVtYmVyLFxyXG4gICAgc3RhdHVzOiBzdHJpbmcsXHJcbiAgICBzdGFydDogbnVtYmVyLFxyXG4gICAgZW5kOiBudW1iZXJcclxuICAgIGRhdGVzOiBUaW1lbG9nRGF0ZVtdLFxyXG4gICAgbG9ja2VkOiBib29sZWFuLFxyXG4gICAgaG91cnNQZXJEYXk6IG51bWJlclxyXG59XHJcbmV4cG9ydCBlbnVtIFRpbWVsb2dTYXZlU3RhdHVzXHJcbntcclxuICAgIFdhaXRpbmcsXHJcbiAgICBTYXZpbmcsXHJcbiAgICBTYXZlZCxcclxuICAgIEVycm9yXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lTG9nRmF2b3JpdGVkRGF0ZVxyXG57XHJcbiAgICBkYXRlOiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nRmxleERhdGVcclxue1xyXG4gICAgZGF0ZTogbnVtYmVyLFxyXG4gICAgZGF0ZVN0cmluZzogc3RyaW5nLFxyXG4gICAgcmVhbEJhbGFuY2U6IG51bWJlcixcclxuICAgIHJlYWxsb2NhdGVkQmFsYW5jZTogbnVtYmVyXHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nRmxleEFkanVzdG1lbnRcclxue1xyXG4gICAgYXBwbGllZE9uOiBudW1iZXIsXHJcbiAgICBkYXRlOiBudW1iZXIsXHJcbiAgICBhZGp1c3RtZW50OiBudW1iZXJcclxufVxyXG5cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ1VJRGF0ZSBcclxue1xyXG4gICAgZGF0ZTogVGltZWxvZ0RhdGUsXHJcbiAgICBwYXJlbnQ6IEhUTUxEaXZFbGVtZW50LFxyXG4gICAgdGl0bGU6IEhUTUxTcGFuRWxlbWVudCxcclxuICAgIGVudHJpZXM6IFRpbWVsb2dVSUVudHJ5Q29udGFpbmVyW10sXHJcbiAgICBzdW1Ib3Vycz86IEhUTUxTcGFuRWxlbWVudCxcclxuICAgIHN0YXJCdXR0b246IEhUTUxCdXR0b25FbGVtZW50LFxyXG4gICAgcGFzdGVCdXR0b246IEhUTUxCdXR0b25FbGVtZW50LFxyXG4gICAgd2Vla2VuZERlc2NyaXB0aW9uOiBIVE1MRGl2RWxlbWVudFxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ1VJRW50cnlDb250YWluZXJcclxue1xyXG4gICAgZW50cnk6IFRpbWVsb2dFbnRyeSxcclxuICAgIHBhcmVudDogSFRNTERpdkVsZW1lbnQsXHJcbiAgICBzdGFydEhvdXI6IEhUTUxJbnB1dEVsZW1lbnQsXHJcbiAgICBsZW5ndGg6IEhUTUxJbnB1dEVsZW1lbnQsXHJcbiAgICByZWFzb246IEhUTUxTZWxlY3RFbGVtZW50LFxyXG4gICAgZW5kSG91cjogSFRNTElucHV0RWxlbWVudCxcclxuICAgIGNvbW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQsXHJcbiAgICBjb21tZW50QnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCxcclxuICAgIG5vUmVhc29uV2FybmluZzogSFRNTERpdkVsZW1lbnRcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVsb2dVSVdlZWtTdW1cclxue1xyXG4gICAgZGF0ZXM6IFRpbWVsb2dVSURhdGVbXSxcclxuICAgIGVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50XHJcbn0iLCJleHBvcnQgY2xhc3MgRXZlbnRIYW5kbGVyPFQ+XHJcbntcclxuICAgIHByaXZhdGUgaGFuZGxlcnM6IHsgaGFuZGxlcjogKHZhbDogVCkgPT4gdm9pZCwgY29udGV4dDogYW55IH1bXSA9IFtdO1xyXG4gICAgcHVibGljIG9uKGhhbmRsZXI6ICh2YWw6IFQpID0+IHZvaWQsIGNvbnRleHQ6IGFueSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLmhhbmRsZXJzLnB1c2goeyBoYW5kbGVyLCBjb250ZXh0IH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG9mZihoYW5kbGVyOiAodmFsOiBUKSA9PiB2b2lkLCBjb250ZXh0OiBhbnkpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMuZmlsdGVyKGggPT4gaC5oYW5kbGVyICE9PSBoYW5kbGVyIHx8IGguY29udGV4dCAhPT0gY29udGV4dCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZmlyZSh2YWw6IFQpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycy5mb3JFYWNoKGggPT4gaC5oYW5kbGVyLmNhbGwoaC5jb250ZXh0LCB2YWwpKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBhYnN0cmFjdCBjbGFzcyBNYXRlcmlhbEljb25cclxue1xyXG4gICAgcHVibGljIHN0YXRpYyBpbml0aWFsaXplKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcbiAgICAgICAgbGluay5ocmVmID0gXCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PU1hdGVyaWFsK1N5bWJvbHMrT3V0bGluZWQ6b3Bzeix3Z2h0LEZJTEwsR1JBREAyMC4uNDgsMTAwLi43MDAsMC4uMSwtNTAuLjIwMFwiO1xyXG4gICAgICAgIGxpbmsucmVsID0gXCJzdHlsZXNoZWV0XCI7XHJcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0KGljb246IHN0cmluZywgZmlsbDogYm9vbGVhbiA9IGZhbHNlKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICBzcGFuLmNsYXNzTmFtZSA9IGBtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkYDtcclxuICAgICAgICBzcGFuLmlubmVyVGV4dCA9IGljb247XHJcbiAgICAgICAgc3Bhbi5zdHlsZS52ZXJ0aWNhbEFsaWduID0gXCJtaWRkbGVcIjtcclxuICAgICAgICBzcGFuLnN0eWxlLmZvbnRTaXplID0gXCIxLjVlbVwiO1xyXG4gICAgICAgIHNwYW4uc3R5bGUuZm9udFZhcmlhdGlvblNldHRpbmdzID0gYCdGSUxMJyAke2ZpbGwgPyAxIDogMH1gO1xyXG4gICAgICAgIHJldHVybiBzcGFuO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIE51bWJlcnNcclxue1xyXG4gICAgcHVibGljIHN0YXRpYyByb3VuZChudW06IG51bWJlciwgZGVjaW1hbHM6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChudW0gKiAoMTAgKiogZGVjaW1hbHMpKSAvICgxMCAqKiBkZWNpbWFscyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGZsb29yKG51bTogbnVtYmVyLCBkZWNpbWFsczogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKG51bSAqICgxMCAqKiBkZWNpbWFscykpIC8gKDEwICoqIGRlY2ltYWxzKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgY2VpbChudW06IG51bWJlciwgZGVjaW1hbHM6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKG51bSAqICgxMCAqKiBkZWNpbWFscykpIC8gKDEwICoqIGRlY2ltYWxzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHN1bShhcnI6IG51bWJlcltdKVxyXG4gICAge1xyXG4gICAgICAgIGxldCB2YWwgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB2YWwgKz0gYXJyW2ldO1xyXG4gICAgICAgIHJldHVybiB2YWw7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBIaUJvYiB9IGZyb20gXCIuLi9IaUJvYi9IaUJvYlwiO1xyXG5pbXBvcnQgeyBIaUJvYlJlYXNvbiB9IGZyb20gXCIuLi9IaUJvYi9IaUJvYlR5cGVzXCI7XHJcbmltcG9ydCB7IERhdGVzIH0gZnJvbSBcIi4uL1V0aWxzL0RhdGVzXCI7XHJcbmltcG9ydCB7IEV2ZW50SGFuZGxlciB9IGZyb20gXCIuLi9VdGlscy9FdmVudEhhbmRsZXJcIjtcclxuaW1wb3J0IHsgTnVtYmVycyB9IGZyb20gXCIuLi9VdGlscy9OdW1iZXJzXCI7XHJcbmltcG9ydCB7IFdhaXQgfSBmcm9tIFwiLi4vVXRpbHMvV2FpdFwiO1xyXG5pbXBvcnQgeyBUaW1lbG9nU2hlZXQsIFRpbWVsb2dEYXRlLCBUaW1lbG9nU2F2ZVN0YXR1cywgVGltZUxvZ0Zhdm9yaXRlZERhdGUsIFRpbWVsb2dGbGV4RGF0ZSwgVGltZWxvZ0ZsZXhBZGp1c3RtZW50IH0gZnJvbSBcIi4vVGltZWxvZ1R5cGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVGltZWxvZ01vZGVsXHJcbntcclxuICAgIHB1YmxpYyBzaGVldHM6IFRpbWVsb2dTaGVldFtdID0gW107XHJcbiAgICBwdWJsaWMgb25EYXRlVXBkYXRlZCA9IG5ldyBFdmVudEhhbmRsZXI8eyBzaGVldDogVGltZWxvZ1NoZWV0LCBkYXRlOiBUaW1lbG9nRGF0ZSB9PigpO1xyXG4gICAgcHVibGljIG9uUmVhc29uc1VwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPEhpQm9iUmVhc29uW10+KCk7XHJcbiAgICBwdWJsaWMgb25TaGVldFVwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPFRpbWVsb2dTaGVldD4oKTtcclxuICAgIHB1YmxpYyBvblNoZWV0c1VwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPFRpbWVsb2dTaGVldFtdPigpO1xyXG4gICAgcHVibGljIG9uU2F2ZVN0YXR1c1VwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPFRpbWVsb2dTYXZlU3RhdHVzPigpO1xyXG4gICAgcHJpdmF0ZSBzYXZlSGFuZGxlOiBudW1iZXIgPSAtMTtcclxuICAgIHByaXZhdGUgc2F2aW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGNhbGN1bGF0aW5nRmxleDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBmZXRjaGluZ1NoZWV0cyA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSByZWFzb25zOiBIaUJvYlJlYXNvbltdID0gW107XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKVxyXG4gICAge1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGluaXRpYWxpemUoKVxyXG4gICAge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hTaGVldHMoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmZldGNoUmVhc29ucygpO1xyXG4gICAgICAgIHRoaXMub25TYXZlU3RhdHVzVXBkYXRlZC5maXJlKFRpbWVsb2dTYXZlU3RhdHVzLlNhdmVkKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBmZXRjaFNoZWV0cygpXHJcbiAgICB7XHJcbiAgICAgICAgYXdhaXQgV2FpdC51bnRpbCgoKSA9PiAhdGhpcy5mZXRjaGluZ1NoZWV0cyk7XHJcbiAgICAgICAgdGhpcy5mZXRjaGluZ1NoZWV0cyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zaGVldHMgPSBbXTtcclxuICAgICAgICBjb25zdCBzaGVldHMgPSBhd2FpdCBIaUJvYi5zaGVldHMoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHNoZWV0cy5lbXBsb3llZVNoZWV0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZXMucGFyc2Uoc2hlZXQuY3ljbGVTdGFydERhdGUpID8/IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IERhdGVzLnBhcnNlKHNoZWV0LmN5Y2xlRW5kRGF0ZSkgPz8gMDtcclxuICAgICAgICAgICAgY29uc3QgbmV3U2hlZXQgPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogc2hlZXQuaWQsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHNoZWV0LnN0YXR1cyxcclxuICAgICAgICAgICAgICAgIHN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgZW5kLFxyXG4gICAgICAgICAgICAgICAgZGF0ZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgbG9ja2VkOiBzaGVldC5sb2NrZWQsXHJcbiAgICAgICAgICAgICAgICBob3Vyc1BlckRheTogMFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0cy5wdXNoKG5ld1NoZWV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaGVldHMuc29ydCgoYSwgYikgPT4gYi5zdGFydCAtIGEuc3RhcnQpO1xyXG4gICAgICAgIHRoaXMub25TaGVldHNVcGRhdGVkLmZpcmUodGhpcy5zaGVldHMpO1xyXG4gICAgICAgIHRoaXMuZmV0Y2hpbmdTaGVldHMgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBmZXRjaFJlYXNvbnMoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucmVhc29ucyA9IChhd2FpdCBIaUJvYi5tZXRhZGF0YSgpKS50aW1lTG9nRW50cnlSZWFzb24udmFsdWVzO1xyXG4gICAgICAgIHRoaXMub25SZWFzb25zVXBkYXRlZC5maXJlKHRoaXMucmVhc29ucyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZmV0Y2hTaGVldChpZDogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuaWQgPT09IGlkKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgYXR0ZW5kYW5jZSA9IGF3YWl0IEhpQm9iLmF0dGVuZGFuY2UoaWQpO1xyXG4gICAgICAgIHNoZWV0LmhvdXJzUGVyRGF5ID0gYXR0ZW5kYW5jZS5zdW1tYXJ5LnBvdGVudGlhbFdvcmtpbmdIb3VycyAvIGF0dGVuZGFuY2Uuc3VtbWFyeS5wb3RlbnRpYWxXb3JraW5nRGF5cztcclxuICAgICAgICBzaGVldC5kYXRlcyA9IFtdO1xyXG4gICAgICAgIGZvciAoY29uc3QgZGF0ZSBvZiBhdHRlbmRhbmNlLmF0dGVuZGFuY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCB0aW1lID0gRGF0ZXMucGFyc2UoZGF0ZS5kYXRlKSA/PyBEYXRlLm5vdygpXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlOiBUaW1lbG9nRGF0ZSA9IHtcclxuICAgICAgICAgICAgICAgIGRpcnR5OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGRhdGU6IHRpbWUsXHJcbiAgICAgICAgICAgICAgICBub25Xb3JraW5nRGF5OiBkYXRlLnN0YXR1cyA9PT0gXCJXZWVrZW5kRXZlbnRcIiB8fCBkYXRlLnN0YXR1cyA9PT0gXCJBcHByb3ZlVGltZW9mZlJlcXVlc3RcIixcclxuICAgICAgICAgICAgICAgIGhvdXJzVG9Xb3JrOiBzaGVldC5ob3Vyc1BlckRheSxcclxuICAgICAgICAgICAgICAgIGZhdm9yaXRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkYXRlRGVzY3JpcHRpb246IGRhdGUubm90ZS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgIGVudHJpZXM6IGRhdGUuZW50cmllcy5tYXAoZSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0SG91cjogTnVtYmVycy5mbG9vcigoKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpIC0gKERhdGVzLnBhcnNlKGRhdGUuZGF0ZSkgPz8gRGF0ZS5ub3coKSkpIC8gKDM2MDAgKiAxMDAwKSwgMiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aEhvdXJzOiBOdW1iZXJzLmNlaWwoKChEYXRlcy5wYXJzZShlLmVuZCkgPz8gRGF0ZS5ub3coKSkgLSAoRGF0ZXMucGFyc2UoZS5zdGFydCkgPz8gRGF0ZS5ub3coKSkpIC8gKDM2MDAgKiAxMDAwKSwgMiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbklkOiBlLnJlYXNvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDogZS5jb21tZW50ID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NvbW1lbnQ6ICEhZS5jb21tZW50XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pLnNvcnQoKGEsIGIpID0+IGEuc3RhcnRIb3VyIC0gYi5zdGFydEhvdXIpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0ZS5wYWlkVGltZW9mZlNlY29uZHMgPT09IFwibnVtYmVyXCIgJiYgZGF0ZS5wYWlkVGltZW9mZlNlY29uZHMgPiAwKSB2YWx1ZS5ob3Vyc1RvV29yayAtPSAoZGF0ZS5wYWlkVGltZW9mZlNlY29uZHMgLyAoNjAgKiA2MCkpO1xyXG4gICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS5ub25Xb3JraW5nRGF5KSB2YWx1ZS5ob3Vyc1RvV29yayA9IDA7XHJcbiAgICAgICAgICAgIHNoZWV0LmRhdGVzLnB1c2godmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzaGVldC5kYXRlcy5zb3J0KChhLCBiKSA9PiBiLmRhdGUgLSBhLmRhdGUpO1xyXG4gICAgICAgIGNvbnN0IGZhdm9yaXRlID0gYXdhaXQgdGhpcy5nZXRGYXZvcml0ZWREYXRlKCk7XHJcbiAgICAgICAgaWYgKGZhdm9yaXRlICYmIGZhdm9yaXRlLnNoZWV0ID09PSBzaGVldClcclxuICAgICAgICAgICAgZmF2b3JpdGUuZGF0ZS5mYXZvcml0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMub25TaGVldFVwZGF0ZWQuZmlyZShzaGVldCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNoYW5nZVN0YXJ0SG91cihkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlciwgaG91cjogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5zdGFydEhvdXIgPSBob3VyO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBjaGFuZ2VMZW5ndGhIb3VycyhkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLmxlbmd0aEhvdXJzID0gbGVuZ3RoO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBjaGFuZ2VSZWFzb24oZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIsIHJlYXNvbjogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5yZWFzb25JZCA9IHJlYXNvbjtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2hhbmdlQ29tbWVudChkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlciwgY29tbWVudDogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5jb21tZW50ID0gY29tbWVudDtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLmhhc0NvbW1lbnQgPSB0cnVlO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyB0b2dnbGVDb21tZW50KGRhdGU6IFRpbWVsb2dEYXRlLCBpbmRleDogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5oYXNDb21tZW50ID0gIWRhdGUuZW50cmllc1tpbmRleF0uaGFzQ29tbWVudDtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLmNvbW1lbnQgPSBkYXRlLmVudHJpZXNbaW5kZXhdLmhhc0NvbW1lbnQgPyBcIlwiIDogbnVsbDtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgc2V0RmF2b3JpdGVkRGF0ZShkYXRlOiBUaW1lbG9nRGF0ZSlcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBvbGRGYXZvcml0ZSA9IGF3YWl0IHRoaXMuZ2V0RmF2b3JpdGVkRGF0ZSgpO1xyXG4gICAgICAgIGlmIChvbGRGYXZvcml0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9sZEZhdm9yaXRlLmRhdGUuZmF2b3JpdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKG9sZEZhdm9yaXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRhdGUuZmF2b3JpdGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0OiBzaGVldCwgZGF0ZTogZGF0ZSB9KTtcclxuXHJcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGxfZmF2b3JpdGVcIiwgSlNPTi5zdHJpbmdpZnkoeyBkYXRlOiBEYXRlcy5mb3JtYXQoZGF0ZS5kYXRlLCBmYWxzZSkgfSBhcyBUaW1lTG9nRmF2b3JpdGVkRGF0ZSkpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGdldEZhdm9yaXRlZERhdGUoKTogUHJvbWlzZTx7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGRhdGU6IFRpbWVsb2dEYXRlIH0gfCBudWxsPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHN0ciA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRsX2Zhdm9yaXRlXCIpO1xyXG4gICAgICAgIGlmICghc3RyKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBjb25zdCBmYXZvcml0ZTogVGltZUxvZ0Zhdm9yaXRlZERhdGUgPSBKU09OLnBhcnNlKHN0cik7XHJcbiAgICAgICAgY29uc3QgdGltZSA9IERhdGVzLnBhcnNlKGZhdm9yaXRlLmRhdGUpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGltZSA9PT0gXCJudW1iZXJcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuc3RhcnQgPD0gdGltZSAmJiBzLmVuZCA+PSB0aW1lKTtcclxuICAgICAgICAgICAgaWYgKHNoZWV0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hlZXQuZGF0ZXMubGVuZ3RoIDwgMSkgYXdhaXQgdGhpcy5mZXRjaFNoZWV0KHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBzaGVldC5kYXRlcy5maW5kKGQgPT4gZC5kYXRlID09PSB0aW1lKTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHNoZWV0OiBzaGVldCwgZGF0ZTogZGF0ZSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZWxldGVFbnRyeShkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGRhdGUuZW50cmllcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgZmluZExhc3RFbnRyeShvcmlnaW5hbERhdGU6IFRpbWVsb2dEYXRlKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsU2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gb3JpZ2luYWxEYXRlKSk7XHJcbiAgICAgICAgaWYgKCFvcmlnaW5hbFNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgbGV0IGRhdGVJbmRleCA9IG9yaWdpbmFsU2hlZXQuZGF0ZXMuaW5kZXhPZihvcmlnaW5hbERhdGUpO1xyXG4gICAgICAgIGxldCBlbnRyeUluZGV4ID0gLTE7XHJcbiAgICAgICAgZm9yIChsZXQgc2hlZXRJbmRleCA9IHRoaXMuc2hlZXRzLmluZGV4T2Yob3JpZ2luYWxTaGVldCk7IHNoZWV0SW5kZXggPCB0aGlzLnNoZWV0cy5sZW5ndGg7IHNoZWV0SW5kZXgrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHNbc2hlZXRJbmRleF07XHJcbiAgICAgICAgICAgIGlmIChzaGVldC5kYXRlcy5sZW5ndGggPCAxKSBhd2FpdCB0aGlzLmZldGNoU2hlZXQoc2hlZXQuaWQpO1xyXG4gICAgICAgICAgICBmb3IgKDsgZGF0ZUluZGV4IDwgc2hlZXQuZGF0ZXMubGVuZ3RoOyBkYXRlSW5kZXgrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IHNoZWV0LmRhdGVzW2RhdGVJbmRleF07XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZS5lbnRyaWVzLmxlbmd0aCA+IDApIHJldHVybiBlbnRyeUluZGV4IDwgMCA/IGRhdGUuZW50cmllc1tkYXRlLmVudHJpZXMubGVuZ3RoIC0gMV0gOiBkYXRlLmVudHJpZXNbZW50cnlJbmRleF07XHJcbiAgICAgICAgICAgICAgICBlbnRyeUluZGV4ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkYXRlSW5kZXggPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBuZXdFbnRyeShkYXRlOiBUaW1lbG9nRGF0ZSlcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGxhc3QgPSBhd2FpdCB0aGlzLmZpbmRMYXN0RW50cnkoZGF0ZSk7XHJcbiAgICAgICAgbGV0IHN0YXJ0SG91ciA9IDguNTtcclxuICAgICAgICBsZXQgbGVuZ3RoSG91cnMgPSBOdW1iZXJzLnJvdW5kKHNoZWV0LmhvdXJzUGVyRGF5LCAyKTtcclxuICAgICAgICBsZXQgcmVhc29uSWQgPSBcIlwiO1xyXG4gICAgICAgIGlmIChsYXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGRhdGUuZW50cmllcy5pbmNsdWRlcyhsYXN0KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RhcnRIb3VyID0gbGFzdC5zdGFydEhvdXIgKyBsYXN0Lmxlbmd0aEhvdXJzO1xyXG4gICAgICAgICAgICAgICAgbGVuZ3RoSG91cnMgPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlYXNvbklkID0gbGFzdC5yZWFzb25JZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzLnB1c2goe1xyXG4gICAgICAgICAgICBzdGFydEhvdXIsXHJcbiAgICAgICAgICAgIGxlbmd0aEhvdXJzLFxyXG4gICAgICAgICAgICByZWFzb25JZCxcclxuICAgICAgICAgICAgY29tbWVudDogbnVsbCxcclxuICAgICAgICAgICAgaGFzQ29tbWVudDogZmFsc2VcclxuICAgICAgICB9KTtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgcGFzdGVGcm9tU3RhcnJlZChkYXRlOiBUaW1lbG9nRGF0ZSlcclxuICAgIHtcclxuICAgICAgICBpZiAoZGF0ZS5lbnRyaWVzLmxlbmd0aCA+IDApIHJldHVybjtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGZhdm9yaXRlID0gYXdhaXQgdGhpcy5nZXRGYXZvcml0ZWREYXRlKCk7XHJcbiAgICAgICAgaWYgKCFmYXZvcml0ZSB8fCBmYXZvcml0ZS5kYXRlID09PSBkYXRlKSByZXR1cm47XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZmF2b3JpdGUuZGF0ZS5lbnRyaWVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZGF0ZS5lbnRyaWVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgc3RhcnRIb3VyOiBlbnRyeS5zdGFydEhvdXIsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGhIb3VyczogZW50cnkubGVuZ3RoSG91cnMsXHJcbiAgICAgICAgICAgICAgICByZWFzb25JZDogZW50cnkucmVhc29uSWQsXHJcbiAgICAgICAgICAgICAgICBjb21tZW50OiBlbnRyeS5jb21tZW50LFxyXG4gICAgICAgICAgICAgICAgaGFzQ29tbWVudDogZW50cnkuaGFzQ29tbWVudFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBxdWV1ZVNhdmUoKVxyXG4gICAge1xyXG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5zYXZlSGFuZGxlKTtcclxuICAgICAgICB0aGlzLnNhdmVIYW5kbGUgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB0aGlzLnNhdmUoKSwgNTAwKTtcclxuICAgICAgICB0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQuZmlyZShUaW1lbG9nU2F2ZVN0YXR1cy5XYWl0aW5nKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBzYXZlKClcclxuICAgIHtcclxuICAgICAgICBhd2FpdCBXYWl0LnVudGlsKCgpID0+ICF0aGlzLnNhdmluZyk7XHJcbiAgICAgICAgdGhpcy5zYXZpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMub25TYXZlU3RhdHVzVXBkYXRlZC5maXJlKFRpbWVsb2dTYXZlU3RhdHVzLlNhdmluZyk7XHJcbiAgICAgICAgY29uc3QgbWluaW11bVdhaXQgPSBXYWl0LmZvcigxMDApO1xyXG4gICAgICAgIGxldCBlcnJvciA9IGZhbHNlO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2hlZXQgb2YgdGhpcy5zaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2Ygc2hlZXQuZGF0ZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRlLmRpcnR5KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEhpQm9iLnN1Ym1pdChkYXRlLmRhdGUsIGRhdGUuZW50cmllcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUuZGlydHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBhd2FpdCBtaW5pbXVtV2FpdDtcclxuICAgICAgICB0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQuZmlyZShlcnJvciA/IFRpbWVsb2dTYXZlU3RhdHVzLkVycm9yIDogVGltZWxvZ1NhdmVTdGF0dXMuU2F2ZWQpO1xyXG4gICAgICAgIHRoaXMuc2F2aW5nID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0QWRqdXN0ZWREYXRlQmFsYW5jZXModmFsdWU6IFRpbWVsb2dGbGV4QWRqdXN0bWVudFtdKVxyXG4gICAge1xyXG4gICAgICAgIHZhbHVlID0gWy4uLnZhbHVlXS5zb3J0KChhLCBiKSA9PiBhLmFwcGxpZWRPbiAtIGIuYXBwbGllZE9uKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRsX2FkanVzdGVkX2RhdGVfYmFsYW5jZXNcIiwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0QWRqdXN0ZWREYXRlQmFsYW5jZXMoKTogVGltZWxvZ0ZsZXhBZGp1c3RtZW50W11cclxuICAgIHtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRsX2FkanVzdGVkX2RhdGVfYmFsYW5jZXNcIikgPz8gXCJbXVwiKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBmaXhPdmVyZHVlRmxleEJhbGFuY2UoKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGJhbGFuY2UgPSBhd2FpdCB0aGlzLmdldEZsZXhTdGF0dXMoKTtcclxuICAgICAgICBjb25zdCBhZGp1c3RtZW50ID0gdGhpcy5nZXRBZGp1c3RlZERhdGVCYWxhbmNlcygpO1xyXG4gICAgICAgIGZvciAoY29uc3QgZGF0ZSBvZiBiYWxhbmNlLm92ZXJkdWVEYXRlcylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGFkanVzdG1lbnQucHVzaCh7IGRhdGU6IGRhdGUuZGF0ZSwgYWRqdXN0bWVudDogLU51bWJlcnMucm91bmQoZGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UsIDMpLCBhcHBsaWVkT246IERhdGVzLnBhcnNlKERhdGVzLmZvcm1hdChEYXRlLm5vdygpLCBmYWxzZSkpID8/IDAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0QWRqdXN0ZWREYXRlQmFsYW5jZXMoYWRqdXN0bWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEZsZXhQb2xpY3koKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB7IHByZXZpb3VzRGF5c0luY2x1ZGVkOiA3ICogNCwgZmxleFdhcm5pbmdUaHJlc2hvbGQ6IDcgKiAzIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGNsZWFyU2hlZXRCYWxhbmNlQ2FjaGUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5zaGVldHMpIHJldHVybjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2hlZXRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0c1tpXTtcclxuICAgICAgICAgICAgaWYgKCFzaGVldCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gYHRsX2NhY2hlZF9ob3VyX2JhbGFuY2VzXyR7c2hlZXQuaWR9YDtcclxuICAgICAgICAgICAgaWYgKHNoZWV0LmxvY2tlZCAmJiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oY2FjaGVLZXkpICE9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oY2FjaGVLZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgZ2V0Q2FjaGVkQmFsYW5jZXMoKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBUaW1lbG9nRmxleERhdGVbXT4+XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXRzOiBSZWNvcmQ8c3RyaW5nLCBUaW1lbG9nRmxleERhdGVbXT4gPSB7fTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuc2hlZXRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0c1tpXTtcclxuICAgICAgICAgICAgaWYgKCFzaGVldCkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICBsZXQgc2hlZXRCYWxhbmNlczogeyBkYXRlOiBudW1iZXIsIGJhbGFuY2U6IG51bWJlciB9W10gPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgY2FjaGVLZXkgPSBgdGxfY2FjaGVkX2hvdXJfYmFsYW5jZXNfJHtzaGVldC5pZH1gO1xyXG4gICAgICAgICAgICBpZiAoc2hlZXQubG9ja2VkICYmIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShjYWNoZUtleSkgIT09IG51bGwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNoZWV0QmFsYW5jZXMgPSBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShjYWNoZUtleSkgPz8gXCJbXVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChzaGVldC5kYXRlcy5sZW5ndGggPCAxKSBhd2FpdCB0aGlzLmZldGNoU2hlZXQoc2hlZXQuaWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNoZWV0LmRhdGVzLnNvbWUoZCA9PiBkLmVudHJpZXMubGVuZ3RoID4gMCAmJiBkLmVudHJpZXMuc29tZShlID0+IGUubGVuZ3RoSG91cnMgPiAwKSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBkYXkgb2Ygc2hlZXQuZGF0ZXMpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JrZWRIb3VycyA9IE51bWJlcnMuc3VtKGRheS5lbnRyaWVzLm1hcChlID0+IGUubGVuZ3RoSG91cnMpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFsYW5jZSA9IHdvcmtlZEhvdXJzIC0gZGF5LmhvdXJzVG9Xb3JrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGVldEJhbGFuY2VzLnB1c2goeyBkYXRlOiBkYXkuZGF0ZSwgYmFsYW5jZSB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChzaGVldC5sb2NrZWQgJiYgc2hlZXQuaWQgPiAwKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShjYWNoZUtleSwgSlNPTi5zdHJpbmdpZnkoc2hlZXRCYWxhbmNlcykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNoZWV0c1tzaGVldC5pZC50b1N0cmluZygpXSA9IHNoZWV0QmFsYW5jZXMubWFwKGQgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlOiBkLmRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZVN0cmluZzogRGF0ZXMuZm9ybWF0KGQuZGF0ZSwgZmFsc2UpLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWxCYWxhbmNlOiBkLmJhbGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhbGxvY2F0ZWRCYWxhbmNlOiBOdW1iZXJzLnJvdW5kKGQuYmFsYW5jZSwgMylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkuc29ydCgoYSwgYikgPT4gYS5kYXRlIC0gYi5kYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNoZWV0cztcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBnZXRGbGV4U3RhdHVzKClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBwb2xpY3kgPSB0aGlzLmdldEZsZXhQb2xpY3koKTtcclxuXHJcbiAgICAgICAgY29uc3QgY3VycmVudERhdGVUaW1lID0gRGF0ZXMucGFyc2UoRGF0ZXMuZm9ybWF0KERhdGUubm93KCksIGZhbHNlKSkgPz8gMDtcclxuICAgICAgICBjb25zdCBvdmVyZHVlRGF0ZVRpbWUgPSBEYXRlcy5wYXJzZShEYXRlcy5mb3JtYXQoY3VycmVudERhdGVUaW1lIC0gKDEwMDAgKiA2MCAqIDYwICogMjQgKiAocG9saWN5LnByZXZpb3VzRGF5c0luY2x1ZGVkIC0gMSkpLCBmYWxzZSkpID8/IDA7XHJcbiAgICAgICAgY29uc3Qgd2FybmluZ0RhdGVUaW1lID0gRGF0ZXMucGFyc2UoRGF0ZXMuZm9ybWF0KGN1cnJlbnREYXRlVGltZSAtICgxMDAwICogNjAgKiA2MCAqIDI0ICogKHBvbGljeS5mbGV4V2FybmluZ1RocmVzaG9sZCAtIDEpKSwgZmFsc2UpKSA/PyAwO1xyXG5cclxuICAgICAgICBjb25zdCBhbGxEYXRlczogVGltZWxvZ0ZsZXhEYXRlW10gPSBbXTtcclxuICAgICAgICBsZXQgYmFsYW5jZTogbnVtYmVyID0gMDtcclxuICAgICAgICBpZiAoISF0aGlzLnNoZWV0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGF3YWl0IFdhaXQudW50aWwoKCkgPT4gIXRoaXMuY2FsY3VsYXRpbmdGbGV4KTtcclxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGluZ0ZsZXggPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2hlZXRzID0gYXdhaXQgdGhpcy5nZXRDYWNoZWRCYWxhbmNlcygpO1xyXG5cclxuICAgICAgICAgICAgLy9DYWxjdWxhdGUgcmVtYWluaW5nIGJhbGFuY2VzIC8gY2FuY2VsbGVkIG91dCBiYWxhbmNlc1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5zaGVldHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNoZWV0ID0gc2hlZXRzW3RoaXMuc2hlZXRzW2ldLmlkXTtcclxuICAgICAgICAgICAgICAgIGlmIChzaGVldCkgYWxsRGF0ZXMucHVzaCguLi5zaGVldCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vQWRqdXN0bWVudHMgYXBwbGllZCB0byBcImZvcmdldFwiIGFib3V0IHByZXZpb3VzIHVuYmFsYW5jZWQgZmxleFxyXG4gICAgICAgICAgICBjb25zdCBhZGp1c3RtZW50cyA9IFsuLi50aGlzLmdldEFkanVzdGVkRGF0ZUJhbGFuY2VzKCldO1xyXG5cclxuICAgICAgICAgICAgLy9SdW4gdGhlIHJlYWxsb2NhdGlvbiBhbGdvcml0aG1cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxEYXRlcy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGFsbERhdGVzW2ldO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpOyBqKyspXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlID09PSAwKSBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2RGF0ZSA9IGFsbERhdGVzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IE1hdGgubWluKE1hdGguYWJzKGRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlKSwgTWF0aC5hYnMocHJldkRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlIDwgMCAmJiBwcmV2RGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldkRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlIC09IGFtb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgKz0gYW1vdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSA+IDAgJiYgcHJldkRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlIDwgMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZEYXRlLnJlYWxsb2NhdGVkQmFsYW5jZSArPSBhbW91bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlIC09IGFtb3VudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldkRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlID0gTnVtYmVycy5yb3VuZChwcmV2RGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UsIDMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgPSBOdW1iZXJzLnJvdW5kKGRhdGUucmVhbGxvY2F0ZWRCYWxhbmNlLCAzKTtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChhZGp1c3RtZW50cy5sZW5ndGggPiAwICYmIGFkanVzdG1lbnRzWzBdLmFwcGxpZWRPbiA8IGRhdGUuZGF0ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5RGF0ZUFkanVzdG1lbnQoYWRqdXN0bWVudHNbMF0sIGFsbERhdGVzKTtcclxuICAgICAgICAgICAgICAgICAgICBhZGp1c3RtZW50cy5zcGxpY2UoMCwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChjb25zdCBhZGp1c3RtZW50IG9mIGFkanVzdG1lbnRzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5RGF0ZUFkanVzdG1lbnQoYWRqdXN0bWVudCwgYWxsRGF0ZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJhbGFuY2UgPSBOdW1iZXJzLnN1bShhbGxEYXRlcy5tYXAoZCA9PiBOdW1iZXJzLnJvdW5kKGQucmVhbGxvY2F0ZWRCYWxhbmNlLCAzKSkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGluZ0ZsZXggPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYmFsYW5jZSxcclxuICAgICAgICAgICAgdW5iYWxhbmNlZERhdGVzOiBhbGxEYXRlcy5maWx0ZXIoZCA9PiBkLnJlYWxsb2NhdGVkQmFsYW5jZSAhPT0gMCksXHJcbiAgICAgICAgICAgIG92ZXJkdWVEYXRlczogYWxsRGF0ZXMuZmlsdGVyKGQgPT4gZC5yZWFsbG9jYXRlZEJhbGFuY2UgIT09IDAgJiYgZC5kYXRlIDw9IG92ZXJkdWVEYXRlVGltZSksXHJcbiAgICAgICAgICAgIHdhcm5pbmdEYXRlczogYWxsRGF0ZXMuZmlsdGVyKGQgPT4gZC5yZWFsbG9jYXRlZEJhbGFuY2UgIT09IDAgJiYgZC5kYXRlIDw9IHdhcm5pbmdEYXRlVGltZSAmJiBkLmRhdGUgPiBvdmVyZHVlRGF0ZVRpbWUpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXBwbHlEYXRlQWRqdXN0bWVudChhZGp1c3RtZW50OiBUaW1lbG9nRmxleEFkanVzdG1lbnQsIGFsbERhdGVzOiBUaW1lbG9nRmxleERhdGVbXSlcclxuICAgIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbERhdGVzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgYWRqdXN0ZWREYXRlID0gYWxsRGF0ZXNbaV07XHJcbiAgICAgICAgICAgIGlmIChhZGp1c3RlZERhdGUuZGF0ZSA9PT0gYWRqdXN0bWVudC5kYXRlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBhZGp1c3RlZERhdGUucmVhbGxvY2F0ZWRCYWxhbmNlICs9IGFkanVzdG1lbnQuYWRqdXN0bWVudDtcclxuICAgICAgICAgICAgICAgIGFkanVzdGVkRGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UgPSBOdW1iZXJzLnJvdW5kKGFkanVzdGVkRGF0ZS5yZWFsbG9jYXRlZEJhbGFuY2UsIDMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgUmVhc29uRW5oYW5jZW1lbnRzIH0gZnJvbSBcIi4vUmVhc29uRW5oYW5jZW1lbnRzL1JlYXNvbnNFbmhhbmNlbWVudHNcIjtcclxuaW1wb3J0IHsgVGltZWxvZ1VJIH0gZnJvbSBcIi4vVGltZWxvZy9UaW1lbG9nVUlcIjtcclxuaW1wb3J0IHsgTWF0ZXJpYWxJY29uIH0gZnJvbSBcIi4vVXRpbHMvTWF0ZXJpYWxJY29uXCI7XHJcblxyXG5cclxuTWF0ZXJpYWxJY29uLmluaXRpYWxpemUoKTtcclxubmV3IFRpbWVsb2dVSSgpO1xyXG5uZXcgUmVhc29uRW5oYW5jZW1lbnRzKCk7IiwiaW1wb3J0IHsgSGlCb2JSZWFzb24gfSBmcm9tIFwiLi4vSGlCb2IvSGlCb2JUeXBlc1wiO1xyXG5pbXBvcnQgeyBEYXRlcyB9IGZyb20gXCIuLi9VdGlscy9EYXRlc1wiO1xyXG5pbXBvcnQgeyBFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi4vVXRpbHMvRXZlbnRIYW5kbGVyXCI7XHJcbmltcG9ydCB7IE1hdGVyaWFsSWNvbiB9IGZyb20gXCIuLi9VdGlscy9NYXRlcmlhbEljb25cIjtcclxuaW1wb3J0IHsgTnVtYmVycyB9IGZyb20gXCIuLi9VdGlscy9OdW1iZXJzXCI7XHJcbmltcG9ydCB7IFdhaXQgfSBmcm9tIFwiLi4vVXRpbHMvV2FpdFwiO1xyXG5pbXBvcnQgeyBUaW1lbG9nQ3NzIH0gZnJvbSBcIi4vVGltZWxvZ0Nzc1wiO1xyXG5pbXBvcnQgeyBUaW1lbG9nTW9kZWwgfSBmcm9tIFwiLi9UaW1lbG9nTW9kZWxcIjtcclxuaW1wb3J0IHsgVGltZWxvZ0RhdGUsIFRpbWVsb2dFbnRyeSwgVGltZWxvZ1NhdmVTdGF0dXMsIFRpbWVsb2dTaGVldCwgVGltZWxvZ1VJRGF0ZSBhcyBUaW1lbG9nVUlEYXRlQ29udGFpbmVyLCBUaW1lbG9nVUlXZWVrU3VtIH0gZnJvbSBcIi4vVGltZWxvZ1R5cGVzXCI7XHJcblxyXG5kZWNsYXJlIHZhciBISUJPQl9VVElMU19WRVI6IHN0cmluZztcclxuZGVjbGFyZSB2YXIgSElCT0JfVVRJTFNfQ0hBTkdFTE9HOiB7IHZlcnNpb246IHN0cmluZywgdGV4dDogc3RyaW5nW10gfVtdO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRpbWVsb2dVSVxyXG57XHJcbiAgICBwcml2YXRlIHRpbWVsb2dVSU91dGVyPzogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHRpbWVsb2dVSUlubmVyPzogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHRvZ2dsZUJ1dHRvbj86IEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBkYXJrTW9kZUJ1dHRvbj86IEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBtb2RlbD86IFRpbWVsb2dNb2RlbDtcclxuXHJcbiAgICBwcml2YXRlIHNoZWV0RHJvcGRvd24/OiBIVE1MU2VsZWN0RWxlbWVudDtcclxuICAgIHByaXZhdGUgc2hlZXREcm9wZG93bk9wdGlvbnM6IHsgc2hlZXQ6IFRpbWVsb2dTaGVldCwgZWxlbWVudDogSFRNTE9wdGlvbkVsZW1lbnQgfVtdID0gW107XHJcbiAgICBwcml2YXRlIHNlbGVjdGVkU2hlZXQ/OiBUaW1lbG9nU2hlZXQ7XHJcblxyXG4gICAgcHJpdmF0ZSBzaGVldENvbnRhaW5lcj86IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBzaGVldERhdGVzOiBUaW1lbG9nVUlEYXRlQ29udGFpbmVyW10gPSBbXTtcclxuICAgIHByaXZhdGUgd2Vla1N1bXM6IFRpbWVsb2dVSVdlZWtTdW1bXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBzYXZlU3RhdHVzPzogSFRNTFNwYW5FbGVtZW50O1xyXG5cclxuICAgIHByaXZhdGUgYmFsYW5jZUxhYmVsPzogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGJhbGFuY2VXYXJuaW5nPzogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGZpeEJhbGFuY2VCdXR0b24/OiBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHJcbiAgICBwcml2YXRlIHJlYXNvbnM6IEhpQm9iUmVhc29uW10gPSBbXTtcclxuXHJcbiAgICBwcml2YXRlIG9uRGFya01vZGVDaGFuZ2UgPSBuZXcgRXZlbnRIYW5kbGVyPGJvb2xlYW4+KCk7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKClcclxuICAgIHtcclxuICAgICAgICAod2luZG93IGFzIGFueSkudGltZWxvZyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5hZGRCdXR0b24oKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgYWRkQnV0dG9uKClcclxuICAgIHtcclxuICAgICAgICB3aGlsZSAodHJ1ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXYuYXBwLWNvbnRlbnQgPiBhcHAtdG9wLWJhci5hcHAtdG9wLWJhciA+IGRpdi5hY3Rpb25zXCIpO1xyXG4gICAgICAgICAgICBpZiAoIXBhcmVudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgV2FpdC5mb3IoMSk7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLXRvZ2dsZS1idG5cIjtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24uYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcInNlbnRpbWVudF92ZXJ5X3NhdGlzZmllZFwiKSk7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLnRpdGxlID0gXCJIaUJvYiBVdGlsaXRpZXNcIjtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMudG9nZ2xlVmlzaWJsZSgpO1xyXG4gICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy50b2dnbGVCdXR0b24pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVVSSgpO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVNb2RlbCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGxvY2F0aW9uLmhhc2ggPT09IFwiI3RsLXVpXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlVmlzaWJsZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9uRGFya01vZGVDaGFuZ2UuZmlyZSh0aGlzLmlzRGFya01vZGUoKSk7XHJcblxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHRvZ2dsZVZpc2libGUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy50aW1lbG9nVUlPdXRlcikgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVsb2dVSU91dGVyLnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5oYXNoID0gXCIjdGwtdWlcIjtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNoZWV0Q29udGFpbmVyKSB0aGlzLnNoZWV0Q29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWw/LmZldGNoU2hlZXRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5oYXNoID0gXCJcIjtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaW5pdGlhbFwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgaXNEYXJrTW9kZSgpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGxfZGFya19tb2RlXCIpID09PSBcInRydWVcIjtcclxuICAgIH1cclxuICAgIHByaXZhdGUgdG9nZ2xlRGFya01vZGUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGFya01vZGUoKSkgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0bF9kYXJrX21vZGVcIiwgXCJmYWxzZVwiKTtcclxuICAgICAgICBlbHNlIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGxfZGFya19tb2RlXCIsIFwidHJ1ZVwiKTtcclxuICAgICAgICB0aGlzLm9uRGFya01vZGVDaGFuZ2UuZmlyZSh0aGlzLmlzRGFya01vZGUoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVVSSgpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgICAgc3R5bGUuaW5uZXJIVE1MID0gVGltZWxvZ0NzcztcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHN0eWxlKTtcclxuXHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlci5jbGFzc05hbWUgPSBcInRsLXVpXCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlPdXRlci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQodGhpcy50aW1lbG9nVUlPdXRlcik7XHJcblxyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuY2xhc3NOYW1lID0gXCJ0bC11aS1pbm5lclwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIuYXBwZW5kKHRoaXMudGltZWxvZ1VJSW5uZXIpO1xyXG5cclxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uY2xhc3NOYW1lID0gXCJ0bC1jbG9zZS1idG5cIjtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiY2xvc2VcIikpO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnRvZ2dsZVZpc2libGUoKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKTtcclxuXHJcbiAgICAgICAgdGhpcy5kYXJrTW9kZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgdGhpcy5kYXJrTW9kZUJ1dHRvbi5jbGFzc05hbWUgPSBcInRsLWRhcmstbW9kZS1idG5cIjtcclxuICAgICAgICB0aGlzLmRhcmtNb2RlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnRvZ2dsZURhcmtNb2RlKCk7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZCh0aGlzLmRhcmtNb2RlQnV0dG9uKTtcclxuICAgICAgICB0aGlzLm9uRGFya01vZGVDaGFuZ2Uub24oKGRhcmspID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZGFyaykgdGhpcy50aW1lbG9nVUlPdXRlcj8uY2xhc3NMaXN0LmFkZChcInRsLWRhcmtcIik7XHJcbiAgICAgICAgICAgIGVsc2UgdGhpcy50aW1lbG9nVUlPdXRlcj8uY2xhc3NMaXN0LnJlbW92ZShcInRsLWRhcmtcIik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhcmtNb2RlQnV0dG9uKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhcmtNb2RlQnV0dG9uLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhcmtNb2RlQnV0dG9uLmFwcGVuZChkYXJrID8gTWF0ZXJpYWxJY29uLmdldChcImxpZ2h0X21vZGVcIikgOiBNYXRlcmlhbEljb24uZ2V0KFwiZGFya19tb2RlXCIpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNldHRpbnNXaW5kb3cgPSB0aGlzLmNyZWF0ZVNldHRpbmdzV2luZG93KCk7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZChzZXR0aW5zV2luZG93KTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2V0dGluZ3NCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHNldHRpbmdzQnV0dG9uLmFwcGVuZChNYXRlcmlhbEljb24uZ2V0KFwic2V0dGluZ3NcIiwgdHJ1ZSkpO1xyXG4gICAgICAgIHNldHRpbmdzQnV0dG9uLmFwcGVuZChcIiBcIiArIEhJQk9CX1VUSUxTX1ZFUik7XHJcbiAgICAgICAgc2V0dGluZ3NCdXR0b24uY2xhc3NOYW1lID0gXCJ0bC12ZXJzaW9uLW51bWJlclwiO1xyXG4gICAgICAgIHNldHRpbmdzQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBzZXR0aW5zV2luZG93LmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1zZXR0aW5ncy1oaWRkZW5cIik7XHJcbiAgICAgICAgc2V0dGluZ3NCdXR0b24uc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XHJcbiAgICAgICAgc2V0dGluZ3NCdXR0b24uc3R5bGUudGV4dERlY29yYXRpb24gPSBcInVuZGVybGluZVwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQoc2V0dGluZ3NCdXR0b24pO1xyXG5cclxuXHJcbiAgICAgICAgY29uc3Qgc2hlZXREcm9wZG93bkxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgc2hlZXREcm9wZG93bkxhYmVsLmlubmVyVGV4dCA9IFwiU2hlZXQ6XCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZChzaGVldERyb3Bkb3duTGFiZWwpO1xyXG5cclxuICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xyXG4gICAgICAgIHRoaXMuc2hlZXREcm9wZG93bi5jbGFzc05hbWUgPSBcInRsLXNoZWV0LXNlbGVjdFwiO1xyXG4gICAgICAgIHRoaXMuc2hlZXREcm9wZG93bi5vbmNoYW5nZSA9ICgpID0+IHRoaXMub25TZWxlY3RlZFNoZWV0Q2hhbmdlKCk7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZCh0aGlzLnNoZWV0RHJvcGRvd24pO1xyXG5cclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NOYW1lID0gXCJ0bC1zYXZlLXN0YXR1c1wiO1xyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5vbmNsaWNrID0gKCkgPT4gdGhpcy5vblNhdmVTdGF0dXNDbGljaygpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kKHRoaXMuc2F2ZVN0YXR1cyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJhbGFuY2VQYXJlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGJhbGFuY2VQYXJlbnQuY2xhc3NOYW1lID0gXCJ0bC1iYWxhbmNlXCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmQoYmFsYW5jZVBhcmVudCk7XHJcblxyXG4gICAgICAgIHRoaXMuYmFsYW5jZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLmJhbGFuY2VMYWJlbC5pbm5lclRleHQgPSBcIkJhbGFuY2U6IFwiO1xyXG4gICAgICAgIHRoaXMuYmFsYW5jZUxhYmVsLmNsYXNzTmFtZSA9IFwidGwtYmFsYW5jZS1sYWJlbFwiO1xyXG4gICAgICAgIGJhbGFuY2VQYXJlbnQuYXBwZW5kKHRoaXMuYmFsYW5jZUxhYmVsKTtcclxuXHJcbiAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZy5jbGFzc05hbWUgPSBcInRsLWJhbGFuY2Utd2FybmluZyB0bC13YXJuaW5nIHRsLWhpZGRlblwiO1xyXG4gICAgICAgIGJhbGFuY2VQYXJlbnQuYXBwZW5kKHRoaXMuYmFsYW5jZVdhcm5pbmcpO1xyXG5cclxuICAgICAgICB0aGlzLmZpeEJhbGFuY2VCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIHRoaXMuZml4QmFsYW5jZUJ1dHRvbi5hcHBlbmQoTWF0ZXJpYWxJY29uLmdldChcImJ1aWxkXCIsIHRydWUpKTtcclxuICAgICAgICB0aGlzLmZpeEJhbGFuY2VCdXR0b24uY2xhc3NOYW1lID0gXCJ0bC1maXgtYmFsYW5jZS1idXR0b24gdGwtaGlkZGVuXCI7XHJcbiAgICAgICAgdGhpcy5maXhCYWxhbmNlQnV0dG9uLmFwcGVuZChcIiBGaXhcIik7XHJcbiAgICAgICAgdGhpcy5maXhCYWxhbmNlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmZpeEJhbGFuY2UoKTtcclxuICAgICAgICBiYWxhbmNlUGFyZW50LmFwcGVuZCh0aGlzLmZpeEJhbGFuY2VCdXR0b24pO1xyXG5cclxuXHJcblxyXG4gICAgICAgIHRoaXMuc2hlZXRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuc2hlZXRDb250YWluZXIuY2xhc3NOYW1lID0gXCJ0bC1zaGVldFwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQodGhpcy5zaGVldENvbnRhaW5lcik7XHJcblxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjcmVhdGVTZXR0aW5nc1dpbmRvdygpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBcInRsLXNldHRpbmdzIHRsLXNldHRpbmdzLWhpZGRlblwiO1xyXG4gICAgICAgIGNvbnN0IGJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGJhY2suY2xhc3NOYW1lID0gXCJ0bC1zZXR0aW5ncy1iYWNrXCI7XHJcbiAgICAgICAgZWxlbWVudC5hcHBlbmQoYmFjayk7XHJcbiAgICAgICAgYmFjay5vbmNsaWNrID0gKCkgPT4gZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGwtc2V0dGluZ3MtaGlkZGVuXCIpO1xyXG5cclxuICAgICAgICBjb25zdCBpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgaW5uZXIuY2xhc3NOYW1lID0gXCJ0bC1zZXR0aW5ncy1pbm5lclwiO1xyXG4gICAgICAgIGVsZW1lbnQuYXBwZW5kKGlubmVyKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2V0dGluZ3NFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBzZXR0aW5nc0VsZW1lbnQuY2xhc3NOYW1lID0gXCJ0bC1zZXR0aW5ncy12ZXJzaW9uXCI7XHJcbiAgICAgICAgaW5uZXIuYXBwZW5kKHNldHRpbmdzRWxlbWVudCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlbG9hZExvY2tlZFNoZWV0c0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgcmVsb2FkTG9ja2VkU2hlZXRzQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtc2V0dGluZ3MtcmVsb2FkLWxvY2tlZC1zaGVldHMtYnV0dG9uXCI7XHJcbiAgICAgICAgcmVsb2FkTG9ja2VkU2hlZXRzQnV0dG9uLmFwcGVuZChNYXRlcmlhbEljb24uZ2V0KFwiY2FjaGVkXCIpKTtcclxuICAgICAgICByZWxvYWRMb2NrZWRTaGVldHNCdXR0b24uYXBwZW5kKFwiIFJlbG9hZCBMb2NrZWQgU2hlZXRzXCIpO1xyXG4gICAgICAgIHJlbG9hZExvY2tlZFNoZWV0c0J1dHRvbi5zdHlsZS5jdXJzb3IgPSBcImhlbHBcIjtcclxuICAgICAgICByZWxvYWRMb2NrZWRTaGVldHNCdXR0b24udGl0bGUgPSBcIlJlY2FsY3VsYXRlcyBmbGV4IGJhbGFuY2UgZm9yIGFsbCBsb2NrZWQgc2hlZXRzLlwiO1xyXG4gICAgICAgIHJlbG9hZExvY2tlZFNoZWV0c0J1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8uY2xlYXJTaGVldEJhbGFuY2VDYWNoZSgpLnRoZW4oKCkgPT4gdGhpcy51cGRhdGVCYWxhbmNlKCkpO1xyXG4gICAgICAgIHNldHRpbmdzRWxlbWVudC5hcHBlbmRDaGlsZChyZWxvYWRMb2NrZWRTaGVldHNCdXR0b24pO1xyXG5cclxuICAgICAgICBjb25zdCByZXNldENhbmNlbGxlZEZsZXhIb3VycyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgcmVzZXRDYW5jZWxsZWRGbGV4SG91cnMuY2xhc3NOYW1lID0gXCJ0bC1zZXR0aW5ncy1yZXNldC1jYW5jZWxsZWQtZmxleC1idXR0b25cIjtcclxuICAgICAgICByZXNldENhbmNlbGxlZEZsZXhIb3Vycy5hcHBlbmQoTWF0ZXJpYWxJY29uLmdldChcInNldHRpbmdzX2JhY2t1cF9yZXN0b3JlXCIpKTtcclxuICAgICAgICByZXNldENhbmNlbGxlZEZsZXhIb3Vycy5hcHBlbmQoXCIgUmVzZXQgQ2FuY2VsbGVkIEZsZXhcIik7XHJcbiAgICAgICAgcmVzZXRDYW5jZWxsZWRGbGV4SG91cnMuc3R5bGUuY3Vyc29yID0gXCJoZWxwXCI7XHJcbiAgICAgICAgcmVzZXRDYW5jZWxsZWRGbGV4SG91cnMudGl0bGUgPSBcIlJlc2V0cyBhbnkgZmxleCBob3VyIHdoaWNoIHlvdSdyZSBwcmV2aW91c2x5IGNhbmNlbGxlZCBmb3IgYmVpbmcgb3ZlcmR1ZS5cIjtcclxuICAgICAgICByZXNldENhbmNlbGxlZEZsZXhIb3Vycy5vbmNsaWNrID0gKCkgPT4geyB0aGlzLm1vZGVsPy5zZXRBZGp1c3RlZERhdGVCYWxhbmNlcyhbXSk7IHRoaXMudXBkYXRlQmFsYW5jZSgpIH07XHJcbiAgICAgICAgc2V0dGluZ3NFbGVtZW50LmFwcGVuZENoaWxkKHJlc2V0Q2FuY2VsbGVkRmxleEhvdXJzKTtcclxuXHJcbiAgICAgICAgY29uc3QgY2hhbmdlbG9nID0gSElCT0JfVVRJTFNfQ0hBTkdFTE9HO1xyXG4gICAgICAgIGZvciAoY29uc3QgdmVyc2lvbiBvZiBjaGFuZ2Vsb2cpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCB2ZXJzaW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIHZlcnNpb25FbGVtZW50LmNsYXNzTmFtZSA9IFwidGwtc2V0dGluZ3MtdmVyc2lvblwiO1xyXG4gICAgICAgICAgICBpbm5lci5hcHBlbmQodmVyc2lvbkVsZW1lbnQpO1xyXG4gICAgICAgICAgICBjb25zdCB2ZXJzaW9uVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICB2ZXJzaW9uVGl0bGUuY2xhc3NOYW1lID0gXCJ0bC1zZXR0aW5ncy10aXRsZVwiO1xyXG4gICAgICAgICAgICB2ZXJzaW9uVGl0bGUuaW5uZXJUZXh0ID0gdmVyc2lvbi52ZXJzaW9uO1xyXG4gICAgICAgICAgICB2ZXJzaW9uRWxlbWVudC5hcHBlbmQodmVyc2lvblRpdGxlKTtcclxuICAgICAgICAgICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKTtcclxuICAgICAgICAgICAgbGlzdC5jbGFzc05hbWUgPSBcInRsLXNldHRpbmdzLWxpc3RcIjtcclxuICAgICAgICAgICAgdmVyc2lvbkVsZW1lbnQuYXBwZW5kKGxpc3QpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRleHQgb2YgdmVyc2lvbi50ZXh0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICAgICAgICAgIHRleHRFbGVtZW50LmlubmVyVGV4dCA9IHRleHQ7XHJcbiAgICAgICAgICAgICAgICBsaXN0LmFwcGVuZCh0ZXh0RWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGNyZWF0ZU1vZGVsKClcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5tb2RlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwub25EYXRlVXBkYXRlZC5vZmYodGhpcy5vbkRhdGVVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5vblJlYXNvbnNVcGRhdGVkLm9mZih0aGlzLm9uUmVhc29uc1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLm9uU2F2ZVN0YXR1c1VwZGF0ZWQub2ZmKHRoaXMub25TYXZlU3RhdHVzVXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwub25TaGVldFVwZGF0ZWQub2ZmKHRoaXMub25TaGVldFVwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLm9uU2hlZXRzVXBkYXRlZC5vZmYodGhpcy5vblNoZWV0c1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1vZGVsID0gbmV3IFRpbWVsb2dNb2RlbCgpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25EYXRlVXBkYXRlZC5vbih0aGlzLm9uRGF0ZVVwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25SZWFzb25zVXBkYXRlZC5vbih0aGlzLm9uUmVhc29uc1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25TYXZlU3RhdHVzVXBkYXRlZC5vbih0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25TaGVldFVwZGF0ZWQub24odGhpcy5vblNoZWV0VXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5tb2RlbC5vblNoZWV0c1VwZGF0ZWQub24odGhpcy5vblNoZWV0c1VwZGF0ZWQsIHRoaXMpO1xyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLm1vZGVsLmluaXRpYWxpemUoKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0RGF0ZUNvbnRhaW5lcihkYXRhOiB7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGRhdGU6IFRpbWVsb2dEYXRlIH0pXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTaGVldCA9PT0gZGF0YS5zaGVldCAmJiB0aGlzLnNoZWV0Q29udGFpbmVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IGRhdGVDb250YWluZXIgPSB0aGlzLnNoZWV0RGF0ZXMuZmluZChkID0+IGQuZGF0ZSA9PT0gZGF0YS5kYXRlKTtcclxuICAgICAgICAgICAgaWYgKCFkYXRlQ29udGFpbmVyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJpZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJCdXR0b246IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksXHJcbiAgICAgICAgICAgICAgICAgICAgcGFzdGVCdXR0b246IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksXHJcbiAgICAgICAgICAgICAgICAgICAgd2Vla2VuZERlc2NyaXB0aW9uOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaGVldERhdGVzLnB1c2goZGF0ZUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5jbGFzc05hbWUgPSBcInRsLWRhdGVcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hlZXRDb250YWluZXIuYXBwZW5kQ2hpbGQoZGF0ZUNvbnRhaW5lci5wYXJlbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChuZXcgRGF0ZShkYXRhLmRhdGUuZGF0ZSkuZ2V0RGF5KCkgPT09IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2Vla1NlcGVyYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgd2Vla1NlcGVyYXRvci5jbGFzc05hbWUgPSBcInRsLXdlZWstc2VwZXJhdG9yXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGVldENvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWVrU2VwZXJhdG9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmQoZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8uc2V0RmF2b3JpdGVkRGF0ZShkYXRhLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtc3Rhci1idXR0b24gdGwtc2hvdy1vbi1ob3ZlclwiO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLnRpdGxlID0gXCJGYXZvcml0ZSBEYXlcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnRpdGxlLmNsYXNzTmFtZSA9IFwidGwtZGF0ZS1sYWJlbFwiO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci50aXRsZS5pbm5lclRleHQgPSBuZXcgRGF0ZShkYXRhLmRhdGUuZGF0ZSkudG9EYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRlLm5vbldvcmtpbmdEYXkpIGRhdGVDb250YWluZXIudGl0bGUuY2xhc3NMaXN0LmFkZChcInRsLWRhdGUtbGFiZWwtd2Vla2VuZFwiKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmFwcGVuZChkYXRlQ29udGFpbmVyLnRpdGxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLndlZWtlbmREZXNjcmlwdGlvbi5jbGFzc05hbWUgPSBcInRsLXdlZWtlbmQtZGVzY3JpcHRpb25cIjtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmFwcGVuZChkYXRlQ29udGFpbmVyLndlZWtlbmREZXNjcmlwdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhLnNoZWV0LmxvY2tlZClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZC5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiYWRkXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIGFkZC5jbGFzc05hbWUgPSBcInRsLWFkZC1lbnRyeS1idG4gdGwtc2hvdy1vbi1ob3ZlclwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZC5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8ubmV3RW50cnkoZGF0YS5kYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmQoYWRkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwic3dpdGNoX2FjY2Vzc19zaG9ydGN1dF9hZGRcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi50aXRsZSA9IFwiUGFzdGUgZnJvbSBGYXZvcml0ZSBEYXlcIjtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtcGFzdGUtYnRuIHRsLXNob3ctb24taG92ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm1vZGVsPy5wYXN0ZUZyb21TdGFycmVkKGRhdGEuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kKGRhdGVDb250YWluZXIucGFzdGVCdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRUb1dlZWtTdW0oZGF0ZUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGRhdGVDb250YWluZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXRFbnRyeUNvbnRhaW5lcihkYXRhOiB7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGRhdGU6IFRpbWVsb2dEYXRlIH0sIGRhdGVDb250YWluZXI6IFRpbWVsb2dVSURhdGVDb250YWluZXIsIGVudHJ5OiBUaW1lbG9nRW50cnkpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IGVudHJ5Q29udGFpbmVyID0gZGF0ZUNvbnRhaW5lci5lbnRyaWVzLmZpbmQocCA9PiBwLmVudHJ5ID09PSBlbnRyeSk7XHJcbiAgICAgICAgaWYgKCFlbnRyeUNvbnRhaW5lcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyID0ge1xyXG4gICAgICAgICAgICAgICAgZW50cnksXHJcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXHJcbiAgICAgICAgICAgICAgICBzdGFydEhvdXI6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcclxuICAgICAgICAgICAgICAgIGVuZEhvdXI6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLFxyXG4gICAgICAgICAgICAgICAgcmVhc29uOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpLFxyXG4gICAgICAgICAgICAgICAgY29tbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLFxyXG4gICAgICAgICAgICAgICAgY29tbWVudEJ1dHRvbjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKSxcclxuICAgICAgICAgICAgICAgIG5vUmVhc29uV2FybmluZzogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBkYXRlQ29udGFpbmVyLmVudHJpZXMucHVzaChlbnRyeUNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuY2xhc3NOYW1lID0gXCJ0bC1lbnRyeVwiO1xyXG4gICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5wYXJlbnQpO1xyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuc3RhcnRIb3VyLnR5cGUgPSBcInRpbWVcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuc3RhcnRIb3VyLmNsYXNzTmFtZSA9IFwidGwtZW50cnktc3RhcnRcIjtcclxuICAgICAgICAgICAgaWYgKGRhdGEuc2hlZXQubG9ja2VkKSBlbnRyeUNvbnRhaW5lci5zdGFydEhvdXIuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5zdGFydEhvdXIub25jaGFuZ2UgPSAoKSA9PiBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5kID0gZW50cnkuc3RhcnRIb3VyICsgZW50cnkubGVuZ3RoSG91cnM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsPy5jaGFuZ2VTdGFydEhvdXIoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgRGF0ZXMucGFyc2VUaW1lVG9ob3VycyhlbnRyeUNvbnRhaW5lcj8uc3RhcnRIb3VyLnZhbHVlID8/IFwiMDg6MDBcIikpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gTnVtYmVycy5yb3VuZChlbmQgLSBlbnRyeS5zdGFydEhvdXIsIDIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbD8uY2hhbmdlTGVuZ3RoSG91cnMoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIuc3RhcnRIb3VyKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGVuZExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgICAgIGVuZExhYmVsLmNsYXNzTmFtZSA9IFwidGwtZW5kLWxhYmVsXCJcclxuICAgICAgICAgICAgZW5kTGFiZWwuaW5uZXJUZXh0ID0gXCItXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbmRMYWJlbCk7XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5lbmRIb3VyLnR5cGUgPSBcInRpbWVcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuZW5kSG91ci5jbGFzc05hbWUgPSBcInRsLWVudHJ5LWVuZFwiO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zaGVldC5sb2NrZWQpIGVudHJ5Q29udGFpbmVyLmVuZEhvdXIuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5lbmRIb3VyLm9uY2hhbmdlID0gKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5Q29udGFpbmVyPy5lbmRIb3VyKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IE51bWJlcnMucm91bmQoRGF0ZXMucGFyc2VUaW1lVG9ob3VycyhlbnRyeUNvbnRhaW5lci5lbmRIb3VyLnZhbHVlKSAtIGVudHJ5LnN0YXJ0SG91ciwgMik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbD8uY2hhbmdlTGVuZ3RoSG91cnMoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIuZW5kSG91cik7XHJcblxyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucmVhc29uLm9uY2hhbmdlID0gKCkgPT4gdGhpcy5tb2RlbD8uY2hhbmdlUmVhc29uKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIGVudHJ5Q29udGFpbmVyPy5yZWFzb24udmFsdWUgPz8gXCJcIik7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnNoZWV0LmxvY2tlZCkgZW50cnlDb250YWluZXIucmVhc29uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucmVhc29uLmNsYXNzTmFtZSA9IFwidGwtZW50cnktcmVhc29uXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5yZWFzb24pO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJlYXNvbnNEcm9wZG93bihlbnRyeUNvbnRhaW5lci5yZWFzb24pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRhdGVDb250YWluZXIuZW50cmllcy5sZW5ndGggPT09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3VtSG91cnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3VtSG91cnMuY2xhc3NOYW1lID0gXCJ0bC1zdW0taG91cnNcIjtcclxuICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmQoZGF0ZUNvbnRhaW5lci5zdW1Ib3Vycyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmxlbmd0aC50eXBlID0gXCJudW1iZXJcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubGVuZ3RoLmNsYXNzTmFtZSA9IFwidGwtZW50cnktbGVuZ3RoXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmxlbmd0aC5zdGVwID0gXCIwLjAxXCI7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnNoZWV0LmxvY2tlZCkgZW50cnlDb250YWluZXIubGVuZ3RoLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubGVuZ3RoLm9uY2hhbmdlID0gKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbD8uY2hhbmdlTGVuZ3RoSG91cnMoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgcGFyc2VGbG9hdChlbnRyeUNvbnRhaW5lcj8ubGVuZ3RoLnZhbHVlIHx8IFwiMFwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkdXJhdGlvbkxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgICAgIGR1cmF0aW9uTGFiZWwuY2xhc3NOYW1lID0gXCJ0bC1kdXJhdGlvbi1sYWJlbFwiO1xyXG4gICAgICAgICAgICBkdXJhdGlvbkxhYmVsLmlubmVyVGV4dCA9IFwiaG91cihzKVwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZHVyYXRpb25MYWJlbCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWRhdGEuc2hlZXQubG9ja2VkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtYWRkLWNvbW1lbnQtYnRuIHRsLXNob3ctb24taG92ZXJcIjtcclxuICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnRCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMubW9kZWw/LnRvZ2dsZUNvbW1lbnQoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSk7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZS5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiZGVsZXRlXCIpKTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZS5jbGFzc05hbWUgPSBcInRsLXJlbW92ZS1lbnRyeS1idG4gdGwtc2hvdy1vbi1ob3ZlclwiO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm1vZGVsPy5kZWxldGVFbnRyeShkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpKTtcclxuICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChyZW1vdmUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5ub1JlYXNvbldhcm5pbmcuYXBwZW5kKE1hdGVyaWFsSWNvbi5nZXQoXCJ3YXJuaW5nXCIsIHRydWUpKTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubm9SZWFzb25XYXJuaW5nLmFwcGVuZChcIiBObyByZWFzb24gc2VsZWN0ZWQhXCIpO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5ub1JlYXNvbldhcm5pbmcuY2xhc3NOYW1lID0gXCJ0bC1uby1yZWFzb24td2FybmluZyB0bC13YXJuaW5nIHRsLWhhcy1yZWFzb25cIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLm5vUmVhc29uV2FybmluZyk7XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50LnR5cGUgPSBcInRleHRcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC5wbGFjZWhvbGRlciA9IFwiV3JpdGUgYSBub3RlLi4uXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQudGl0bGUgPSBcIldyaXRlIGEgbm90ZS4uLlwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50LmNsYXNzTmFtZSA9IFwidGwtZW50cnktY29tbWVudFwiO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zaGVldC5sb2NrZWQpIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50Lm9uY2hhbmdlID0gKCkgPT4gXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWw/LmNoYW5nZUNvbW1lbnQoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgZW50cnlDb250YWluZXI/LmNvbW1lbnQudmFsdWUgPz8gXCJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLmNvbW1lbnQpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVudHJ5Q29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhZGRUb1dlZWtTdW0oZGF0ZTogVGltZWxvZ1VJRGF0ZUNvbnRhaW5lcilcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy53ZWVrU3Vtcy5sZW5ndGggPCAxIHx8IG5ldyBEYXRlKGRhdGUuZGF0ZS5kYXRlKS5nZXREYXkoKSA9PT0gMCkgLy9JZiB0aGlzIGlzIHRoZSBmaXJzdCBkYXksIG9yIGEgc3VuZGF5LCBjcmVhdGUgYSBuZXcgd2VlayBmb3IgaXQuXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCB3ZWVrU3VtID0ge1xyXG4gICAgICAgICAgICAgICAgZGF0ZXM6IFtkYXRlXSxcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgd2Vla1N1bS5lbGVtZW50LmNsYXNzTmFtZSA9IFwidGwtd2Vlay1zdW1cIjtcclxuICAgICAgICAgICAgdGhpcy53ZWVrU3Vtcy5wdXNoKHdlZWtTdW0pO1xyXG4gICAgICAgICAgICBkYXRlLnBhcmVudC5hcHBlbmRDaGlsZCh3ZWVrU3VtLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICBkYXRlLnBhcmVudC5zdHlsZS5tYXJnaW5Ub3AgPSBcIjM4cHhcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy53ZWVrU3Vtc1t0aGlzLndlZWtTdW1zLmxlbmd0aCAtIDFdLmRhdGVzLnB1c2goZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBvbkRhdGVVcGRhdGVkKGRhdGE6IHsgc2hlZXQ6IFRpbWVsb2dTaGVldCwgZGF0ZTogVGltZWxvZ0RhdGUgfSlcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFNoZWV0ID09PSBkYXRhLnNoZWV0ICYmIHRoaXMuc2hlZXRDb250YWluZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgZGF0ZUNvbnRhaW5lciA9IHRoaXMuZ2V0RGF0ZUNvbnRhaW5lcihkYXRhKTtcclxuICAgICAgICAgICAgaWYgKGRhdGVDb250YWluZXIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZGF0YS5kYXRlLmVudHJpZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVudHJ5Q29udGFpbmVyID0gdGhpcy5nZXRFbnRyeUNvbnRhaW5lcihkYXRhLCBkYXRlQ29udGFpbmVyLCBlbnRyeSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91ci52YWx1ZSA9IERhdGVzLmZvcm1hdEhvdXIoZW50cnkuc3RhcnRIb3VyKTtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5sZW5ndGgudmFsdWUgPSBlbnRyeS5sZW5ndGhIb3Vycy50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmVuZEhvdXIudmFsdWUgPSBEYXRlcy5mb3JtYXRIb3VyKGVudHJ5LnN0YXJ0SG91ciArIGVudHJ5Lmxlbmd0aEhvdXJzKTtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5yZWFzb24udmFsdWUgPSBlbnRyeS5yZWFzb25JZDtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50LnZhbHVlID0gZW50cnkuY29tbWVudCA/PyBcIlwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoISFlbnRyeS5yZWFzb25JZCkgZW50cnlDb250YWluZXIubm9SZWFzb25XYXJuaW5nLmNsYXNzTGlzdC5hZGQoXCJ0bC1oYXMtcmVhc29uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgZW50cnlDb250YWluZXIubm9SZWFzb25XYXJuaW5nLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1oYXMtcmVhc29uXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uLnRpdGxlID0gZW50cnkuaGFzQ29tbWVudCA/IFwiUmVtb3ZlIG5vdGVcIiA6IFwiQWRkIG5vdGVcIjtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KGVudHJ5Lmhhc0NvbW1lbnQgPyBcInNwZWFrZXJfbm90ZXNfb2ZmXCIgOiBcInNwZWFrZXJfbm90ZXNcIikpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuaGFzQ29tbWVudCkgZW50cnlDb250YWluZXIucGFyZW50LmNsYXNzTGlzdC5hZGQoXCJ0bC1oYXMtY29tbWVudFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGVudHJ5Q29udGFpbmVyLnBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKFwidGwtaGFzLWNvbW1lbnRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZW1vdmVkRW50cmllcyA9IGRhdGVDb250YWluZXIuZW50cmllcy5maWx0ZXIoZW50cnkgPT4gIWRhdGEuZGF0ZS5lbnRyaWVzLmZpbmQoZSA9PiBlID09PSBlbnRyeS5lbnRyeSkpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5lbnRyaWVzID0gZGF0ZUNvbnRhaW5lci5lbnRyaWVzLmZpbHRlcihlbnRyeSA9PiAhcmVtb3ZlZEVudHJpZXMuaW5jbHVkZXMoZW50cnkpKTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZWRFbnRyaWVzLmZvckVhY2goZSA9PiBlLnBhcmVudC5yZW1vdmUoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGVDb250YWluZXIuc3VtSG91cnMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VtID0gTnVtYmVycy5zdW0oZGF0YS5kYXRlLmVudHJpZXMubWFwKGUgPT4gZS5sZW5ndGhIb3VycykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3VtSG91cnMuaW5uZXJUZXh0ID0gYCR7TnVtYmVycy5yb3VuZChzdW0sIDIpfSBob3VyJHtzdW0gPT09IDEgPyBcIlwiIDogXCJzXCJ9YDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5kaXNhYmxlZCA9IGRhdGEuZGF0ZS5mYXZvcml0ZWQ7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInRsLWZhdm9yaXRlXCIpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJzdGFyXCIsIGRhdGEuZGF0ZS5mYXZvcml0ZWQpKTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGUuZmF2b3JpdGVkKSBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uY2xhc3NMaXN0LmFkZChcInRsLWZhdm9yaXRlXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkYXRlQ29udGFpbmVyLmVudHJpZXMubGVuZ3RoID4gMCB8fCBkYXRlQ29udGFpbmVyLmRhdGUuZmF2b3JpdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24uY2xhc3NMaXN0LmFkZChcInRsLWhpZGUtZmF2b3JpdGUtYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInRsLWhpZGUtZmF2b3JpdGUtYnV0dG9uXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIudGl0bGUudGl0bGUgPSBkYXRhLmRhdGUuZGF0ZURlc2NyaXB0aW9uID8/IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0ZS5ub25Xb3JraW5nRGF5ICYmIGRhdGEuZGF0ZS5lbnRyaWVzLmxlbmd0aCA8IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci53ZWVrZW5kRGVzY3JpcHRpb24uY2xhc3NMaXN0LnJlbW92ZShcInRsLXdlZWtlbmQtZGVzY3JpcHRpb24taGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIud2Vla2VuZERlc2NyaXB0aW9uLmlubmVyVGV4dCA9IGRhdGEuZGF0ZS5kYXRlRGVzY3JpcHRpb24gPz8gXCJcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLndlZWtlbmREZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKFwidGwtd2Vla2VuZC1kZXNjcmlwdGlvbi1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHdlZWtTdW0gPSB0aGlzLndlZWtTdW1zLmZpbmQodyA9PiB3LmRhdGVzLnNvbWUoZCA9PiBkLmRhdGUgPT09IGRhdGEuZGF0ZSkpO1xyXG4gICAgICAgICAgICBpZiAod2Vla1N1bSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3VtID0gTnVtYmVycy5zdW0od2Vla1N1bS5kYXRlcy5tYXAoZCA9PiBOdW1iZXJzLnN1bShkLmVudHJpZXMubWFwKGUgPT4gZS5lbnRyeS5sZW5ndGhIb3VycykpKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbEhvdXJzID0gTnVtYmVycy5zdW0od2Vla1N1bS5kYXRlcy5tYXAoZCA9PiBkLmRhdGUuaG91cnNUb1dvcmspKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdlZWtOdW1iZXIgPSBEYXRlcy5nZXRXZWVrTnVtYmVyRnJvbURhdGUod2Vla1N1bS5kYXRlc1swXS5kYXRlLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgd2Vla1N1bS5lbGVtZW50LmlubmVySFRNTCA9IGA8Yj5XZWVrICR7d2Vla051bWJlcn08L2I+OiAke051bWJlcnMucm91bmQoc3VtLCAyKX0gLyAke051bWJlcnMucm91bmQodG90YWxIb3VycywgMil9IGhvdXJzYDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVwZGF0ZUJhbGFuY2UoKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgdXBkYXRlUmVhc29uc0Ryb3Bkb3duKHNlbGVjdDogSFRNTFNlbGVjdEVsZW1lbnQpXHJcbiAgICB7XHJcbiAgICAgICAgc2VsZWN0LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgZm9yIChjb25zdCByZWFzb24gb2YgdGhpcy5yZWFzb25zKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gcmVhc29uLnNlcnZlcklkO1xyXG4gICAgICAgICAgICBvcHRpb24uaW5uZXJUZXh0ID0gcmVhc29uLnZhbHVlO1xyXG4gICAgICAgICAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uUmVhc29uc1VwZGF0ZWQocmVhc29uczogSGlCb2JSZWFzb25bXSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLnJlYXNvbnMgPSByZWFzb25zO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2YgdGhpcy5zaGVldERhdGVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBkYXRlLmVudHJpZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUmVhc29uc0Ryb3Bkb3duKGVudHJ5LnJlYXNvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uU2F2ZVN0YXR1c1VwZGF0ZWQoc3RhdHVzOiBUaW1lbG9nU2F2ZVN0YXR1cylcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2F2ZVN0YXR1cykgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtc3VjY2Vzc1wiKTtcclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NMaXN0LnJlbW92ZShcInRsLXdhcm5pbmdcIik7XHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1jbGlja2FibGVcIik7XHJcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gVGltZWxvZ1NhdmVTdGF0dXMuU2F2ZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImNsb3VkX2RvbmVcIiwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kKFwiIFNhdmVkXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NMaXN0LmFkZChcInRsLXN1Y2Nlc3NcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdGF0dXMgPT09IFRpbWVsb2dTYXZlU3RhdHVzLldhaXRpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcInBlbmRpbmdcIikpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kKFwiIFBlbmRpbmcuLi5cIilcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gVGltZWxvZ1NhdmVTdGF0dXMuU2F2aW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJjbG91ZF91cGxvYWRcIikpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kKFwiIFNhdmluZy4uLlwiKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RhdHVzID09PSBUaW1lbG9nU2F2ZVN0YXR1cy5FcnJvcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiY2xvdWRfb2ZmXCIpKTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZChcIiBGYWlsZWQhXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NMaXN0LmFkZChcInRsLXdhcm5pbmdcIik7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc0xpc3QuYWRkKFwidGwtY2xpY2thYmxlXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgb25TYXZlU3RhdHVzQ2xpY2soKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5zYXZlU3RhdHVzPy5jbGFzc0xpc3QuY29udGFpbnMoXCJ0bC1jbGlja2FibGVcIikpIHJldHVybjtcclxuICAgICAgICB0aGlzLm1vZGVsPy5zYXZlKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uU2hlZXRVcGRhdGVkKHNoZWV0OiBUaW1lbG9nU2hlZXQpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hlZXREcm9wZG93biAmJiAhdGhpcy5zaGVldERyb3Bkb3duT3B0aW9ucy5maW5kKHMgPT4gcy5zaGVldCA9PT0gc2hlZXQpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gc2hlZXQuaWQudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgb3B0aW9uLmlubmVyVGV4dCA9IGAke25ldyBEYXRlKHNoZWV0LnN0YXJ0KS50b0RhdGVTdHJpbmcoKX0gLSAke25ldyBEYXRlKHNoZWV0LmVuZCkudG9EYXRlU3RyaW5nKCl9JHtzaGVldC5sb2NrZWQgPyBcIiAobG9ja2VkKVwiIDogXCJcIn1gO1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd25PcHRpb25zLnB1c2goeyBzaGVldDogc2hlZXQsIGVsZW1lbnQ6IG9wdGlvbiB9KTtcclxuICAgICAgICAgICAgdGhpcy5zaGVldERyb3Bkb3duLmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2hlZXQgPT09IHNoZWV0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hlZXRDb250YWluZXIpIHRoaXMuc2hlZXRDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgdGhpcy5zaGVldERhdGVzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMud2Vla1N1bXMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIHNoZWV0LmRhdGVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudXBkYXRlQmFsYW5jZSgpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBvblNoZWV0c1VwZGF0ZWQoc2hlZXRzOiBUaW1lbG9nU2hlZXRbXSlcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5zaGVldERyb3Bkb3duKSB0aGlzLnNoZWV0RHJvcGRvd24uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd25PcHRpb25zID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBzaGVldCBvZiBzaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm9uU2hlZXRVcGRhdGVkKHNoZWV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vblNlbGVjdGVkU2hlZXRDaGFuZ2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uU2VsZWN0ZWRTaGVldENoYW5nZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNoZWV0RHJvcGRvd24pIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5zaGVldENvbnRhaW5lcikgdGhpcy5zaGVldENvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuc2hlZXREYXRlcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHZhbCA9IHRoaXMuc2hlZXREcm9wZG93bi52YWx1ZTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkU2hlZXQgPSB0aGlzLnNoZWV0RHJvcGRvd25PcHRpb25zLmZpbmQobyA9PiBvLmVsZW1lbnQudmFsdWUgPT09IHZhbCk/LnNoZWV0O1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2hlZXQgJiYgdGhpcy5tb2RlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwuZmV0Y2hTaGVldCh0aGlzLnNlbGVjdGVkU2hlZXQuaWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHVwZGF0ZUJhbGFuY2UoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5tb2RlbCB8fCAhdGhpcy5iYWxhbmNlTGFiZWwgfHwgIXRoaXMuc2VsZWN0ZWRTaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGJhbGFuY2UgPSBhd2FpdCB0aGlzLm1vZGVsLmdldEZsZXhTdGF0dXMoKTtcclxuICAgICAgICBjb25zdCB0b3RhbEJhbGFuY2UgPSBOdW1iZXJzLnJvdW5kKGJhbGFuY2UuYmFsYW5jZSwgMik7XHJcbiAgICAgICAgdGhpcy5iYWxhbmNlTGFiZWwuaW5uZXJUZXh0ID0gYEZsZXg6ICR7dG90YWxCYWxhbmNlfSBob3VyJHt0b3RhbEJhbGFuY2UgIT0gMSA/IFwic1wiIDogXCJcIn0ke3RvdGFsQmFsYW5jZSA9PT0gMCA/IFwiIPCfpbNcIiA6IFwiXCJ9YDtcclxuXHJcbiAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZz8uY2xhc3NMaXN0LmFkZChcInRsLWhpZGRlblwiKTtcclxuICAgICAgICB0aGlzLmZpeEJhbGFuY2VCdXR0b24/LmNsYXNzTGlzdC5hZGQoXCJ0bC1oaWRkZW5cIik7XHJcbiAgICAgICAgaWYgKGJhbGFuY2Uub3ZlcmR1ZURhdGVzLmxlbmd0aCArIGJhbGFuY2Uud2FybmluZ0RhdGVzLmxlbmd0aCA+IDAgJiYgdGhpcy5iYWxhbmNlV2FybmluZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvbGljeSA9IHRoaXMubW9kZWwuZ2V0RmxleFBvbGljeSgpO1xyXG4gICAgICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgIHRoaXMuYmFsYW5jZVdhcm5pbmcuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZy5hcHBlbmQoTWF0ZXJpYWxJY29uLmdldChcIndhcm5pbmdcIiwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICBpZiAoYmFsYW5jZS5vdmVyZHVlRGF0ZXMubGVuZ3RoID4gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maXhCYWxhbmNlQnV0dG9uPy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZy5hcHBlbmQoYFlvdSBoYXZlICR7YmFsYW5jZS5vdmVyZHVlRGF0ZXMubGVuZ3RofSB1bmJhbGFuY2VkIGZsZXggZGF0ZSR7YmFsYW5jZS5vdmVyZHVlRGF0ZXMubGVuZ3RoID09PSAxID8gXCJcIiA6IFwic1wifSBvbGRlciB0aGFuICR7cG9saWN5LnByZXZpb3VzRGF5c0luY2x1ZGVkfSBkYXlzIWApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iYWxhbmNlV2FybmluZy50aXRsZSArPSBgT3ZlcmR1ZSBkYXRlczogJHtiYWxhbmNlLm92ZXJkdWVEYXRlcy5tYXAoZCA9PiBEYXRlcy5mb3JtYXQoZC5kYXRlLCBmYWxzZSkpLmpvaW4oXCIsIFwiKX1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGJhbGFuY2Uud2FybmluZ0RhdGVzLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFsYW5jZVdhcm5pbmcuYXBwZW5kKGAke2JhbGFuY2Uud2FybmluZ0RhdGVzLmxlbmd0aH0gdW5iYWxhbmNlZCBmbGV4IGRhdGUke2JhbGFuY2Uud2FybmluZ0RhdGVzLmxlbmd0aCA9PT0gMSA/IFwiXCIgOiBcInNcIn0gd2lsbCBzb29uIGJlIG9sZGVyIHRoYW4gJHtwb2xpY3kucHJldmlvdXNEYXlzSW5jbHVkZWR9IGRheXMhYCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nLnRpdGxlID0gXCJcIjtcclxuICAgICAgICAgICAgaWYgKGJhbGFuY2Uub3ZlcmR1ZURhdGVzLmxlbmd0aCA+IDApIHRoaXMuYmFsYW5jZVdhcm5pbmcudGl0bGUgKz0gYE92ZXJkdWUgZGF0ZXM6ICR7YmFsYW5jZS5vdmVyZHVlRGF0ZXMubWFwKGQgPT4gRGF0ZXMuZm9ybWF0KGQuZGF0ZSwgZmFsc2UpKS5qb2luKFwiLCBcIil9YDtcclxuICAgICAgICAgICAgaWYgKGJhbGFuY2Uud2FybmluZ0RhdGVzLmxlbmd0aCA+IDApIHRoaXMuYmFsYW5jZVdhcm5pbmcudGl0bGUgKz0gYCR7dGhpcy5iYWxhbmNlV2FybmluZy50aXRsZS5sZW5ndGggPiAwID8gXCJcXG5cIiA6IFwiXCJ9U29vbiBvdmVyZHVlIGRhdGVzOiAke2JhbGFuY2Uud2FybmluZ0RhdGVzLm1hcChkID0+IERhdGVzLmZvcm1hdChkLmRhdGUsIGZhbHNlKSkuam9pbihcIiwgXCIpfWA7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmJhbGFuY2VXYXJuaW5nLmFwcGVuZChcIiBcIik7XHJcbiAgICAgICAgICAgIHRoaXMuYmFsYW5jZVdhcm5pbmcuYXBwZW5kKE1hdGVyaWFsSWNvbi5nZXQoXCJpbmZvXCIsIGZhbHNlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmYXZvcml0ZSA9IGF3YWl0IHRoaXMubW9kZWwuZ2V0RmF2b3JpdGVkRGF0ZSgpO1xyXG4gICAgICAgIGlmIChmYXZvcml0ZSkgdGhpcy5zaGVldENvbnRhaW5lcj8uY2xhc3NMaXN0LmFkZChcInRsLWhhcy1mYXZvcml0ZVwiKTtcclxuICAgICAgICBlbHNlIHRoaXMuc2hlZXRDb250YWluZXI/LmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1oYXMtZmF2b3JpdGVcIik7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGZpeEJhbGFuY2UoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghY29uZmlybShgQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGNhbmNlbCBvdXQgYWxsIG92ZXJkdWUgZmxleCB0aW1lPyBQbGVhc2UgY29vcmluZGF0ZSB3aXRoIGEgc3VwZXJ2aXNvciBiZWZvcmUgdXNpbmcgdGhpcyBmZWF0dXJlLmApKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5tb2RlbD8uZml4T3ZlcmR1ZUZsZXhCYWxhbmNlKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVCYWxhbmNlKCk7XHJcbiAgICB9XHJcblxyXG59IiwiZXhwb3J0IGNvbnN0IFRpbWVsb2dDc3MgPSBgXHJcbi50bC10b2dnbGUtYnRuXHJcbntcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIGJhY2tncm91bmQ6IG5vbmU7XHJcbiAgICBmb250LXNpemU6IDJlbTtcclxufVxyXG4udGwtY2xvc2UtYnRuXHJcbntcclxuICAgIGZvbnQtc2l6ZTogMmVtO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgcmlnaHQ6IDVweDtcclxufVxyXG4udGwtdWlcclxue1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgei1pbmRleDogMTAwMDtcclxuICAgIGluc2V0OiAwcHg7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIG92ZXJmbG93LXk6IHNjcm9sbDtcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbn0gICAgICAgIFxyXG4udGwtZGF0ZVxyXG57XHJcbiAgICBtYXJnaW4tdG9wOiAxMHB4O1xyXG4gICAgcGFkZGluZzogMTBweDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkIGdyYXk7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbn1cclxuLnRsLXNhdmUtc3RhdHVzLCAudGwtYWRkLWVudHJ5LWJ0blxyXG57XHJcbiAgICBtYXJnaW4tbGVmdDogMTBweDtcclxufVxyXG4udGwtZW50cnlcclxue1xyXG4gICAgbWFyZ2luLXRvcDogNXB4O1xyXG59XHJcbi50bC1lbnRyeSA+ICpcclxue1xyXG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcclxufVxyXG4udGwtZW50cnkgPiBpbnB1dFt0eXBlPW51bWJlcl1cclxue1xyXG4gICAgd2lkdGg6IDUwcHg7XHJcbn1cclxuLnRsLWVudHJ5ID4gaW5wdXRbdHlwZT10aW1lXVxyXG57XHJcbiAgICB3aWR0aDogNzVweDtcclxufVxyXG4udGwtc2F2ZS1zdGF0dXNcclxue1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuLnRsLXNoZWV0LXNlbGVjdFxyXG57XHJcbiAgICBtYXJnaW4tbGVmdDogNXB4O1xyXG59XHJcbi50bC1kYXRlLWxhYmVsXHJcbntcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcbi50bC1kYXRlLWxhYmVsLnRsLWRhdGUtbGFiZWwtd2Vla2VuZFxyXG57XHJcbiAgICBmb250LXdlaWdodDogaW5pdGlhbDtcclxuICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcclxuICAgIGNvbG9yOiBncmF5O1xyXG59XHJcbi50bC1lbnRyeS1yZWFzb24gXHJcbntcclxuICAgIHBhZGRpbmc6IDNweDtcclxufVxyXG4udGwtcmVtb3ZlLWVudHJ5LWJ0blxyXG57XHJcbiAgICBmbG9hdDogcmlnaHQ7XHJcbn1cclxuLnRsLXdlZWstc2VwZXJhdG9yXHJcbntcclxuICAgIG1hcmdpbi10b3A6IDU3cHg7XHJcbn1cclxuLnRsLWJhbGFuY2UtbGFiZWxcclxue1xyXG4gICAgbWFyZ2luOiA1cHg7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbn1cclxuLnRsLWJhbGFuY2UtaGVscFxyXG57XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICBjdXJzb3I6IGhlbHA7XHJcbn1cclxuXHJcbi50bC11aS1pbm5lclxyXG57XHJcbiAgICBkaXNwbGF5OiB0YWJsZTtcclxuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xyXG4gICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xyXG59XHJcbi50bC11aS1pbm5lciwgLnRsLXdlZWstc2VwZXJhdG9yLCAudGwtZGF0ZVxyXG57XHJcbiAgICBtaW4td2lkdGg6IDY1MHB4O1xyXG59XHJcbi50bC1lbnRyeS1jb21tZW50IHtcclxuICAgIG1hcmdpbi10b3A6IDVweDtcclxuICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuLnRsLWhhcy1jb21tZW50IC50bC1lbnRyeS1jb21tZW50XHJcbntcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG59XHJcbi50bC1zdWNjZXNzXHJcbntcclxuICAgIGNvbG9yOiAjMDJCODc1O1xyXG59XHJcbi50bC13YXJuaW5nXHJcbntcclxuICAgIGNvbG9yOiAjRjBBRjUyO1xyXG59XHJcbi50bC1kYW5nZXJcclxue1xyXG4gICAgY29sb3I6ICNEQTU2NTI7XHJcbn1cclxuLnRsLXN1bS1ob3Vyc1xyXG57XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBtYXJnaW4tdG9wOiAtMjNweDtcclxufVxyXG4udGwtd2Vlay1zdW1cclxue1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgbWFyZ2luLXRvcDogLTU3cHg7XHJcbiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcclxufVxyXG4udGwtdWkgYnV0dG9uLnRsLXN0YXItYnV0dG9uLCAudGwtdWkudGwtZGFyayBidXR0b24udGwtc3Rhci1idXR0b25cclxue1xyXG4gICAgYmFja2dyb3VuZDogbm9uZTtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIG1hcmdpbjogMDtcclxuICAgIHBhZGRpbmc6IDA7XHJcbn1cclxuLnRsLXVpIGJ1dHRvbi50bC1zdGFyLWJ1dHRvbi50bC1mYXZvcml0ZSwgLnRsLXVpLnRsLWRhcmsgYnV0dG9uLnRsLXN0YXItYnV0dG9uLnRsLWZhdm9yaXRlXHJcbntcclxuICAgIGNvbG9yOiAjZjFhMDBiO1xyXG4gICAgb3BhY2l0eTogMTtcclxufVxyXG4udGwtcGFzdGUtYnRuIHtcclxuICAgIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcbi50bC1oYXMtZmF2b3JpdGUgLnRsLXBhc3RlLWJ0bjpub3QoLnRsLWhpZGUtZmF2b3JpdGUtYnV0dG9uKVxyXG57XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbn1cclxuLnRsLXNob3ctb24taG92ZXJcclxue1xyXG4gICAgb3BhY2l0eTogMDtcclxufVxyXG4udGwtZGF0ZTpob3ZlciAudGwtc2hvdy1vbi1ob3ZlclxyXG57XHJcbiAgICBvcGFjaXR5OiAxO1xyXG59XHJcbi50bC1uby1yZWFzb24td2FybmluZyB7XHJcbiAgICBtYXJnaW4tbGVmdDogMTgwcHg7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBtYXJnaW4tdG9wOiAtMjJweDtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG59XHJcbi50bC1uby1yZWFzb24td2FybmluZy50bC1oYXMtcmVhc29uXHJcbntcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuLnRsLWNsaWNrYWJsZVxyXG57XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuLnRsLWRhcmstbW9kZS1idG4ge1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgYm90dG9tOiA1cHg7XHJcbiAgICByaWdodDogMjBweDtcclxufVxyXG4udGwtdWkgYnV0dG9uXHJcbntcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNkOWQ5ZDk7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCBncmF5O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG59XHJcbi50bC11aSBidXR0b246aG92ZXJcclxue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2VmZWJlYjtcclxufVxyXG5cclxuLnRsLXVpLnRsLWRhcmtcclxue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzFFMUUxRTtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxufVxyXG4udGwtdWkudGwtZGFyayBzZWxlY3QsIC50bC11aS50bC1kYXJrIGlucHV0IHtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMyNTI1MjY7XHJcbiAgICBib3JkZXI6IDFweCBncmF5IHNvbGlkO1xyXG4gICAgY29sb3Itc2NoZW1lOiBkYXJrO1xyXG59XHJcbi50bC11aS50bC1kYXJrIGJ1dHRvblxyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzMzMzO1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgIzI4MjgyODtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxufVxyXG4udGwtdWkudGwtZGFyayBidXR0b246aG92ZXJcclxue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzUyNTI1MjtcclxufVxyXG4udGwtdWkudGwtZGFyayAudGwtbm8tcmVhc29uLXdhcm5pbmdcclxue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzI1MjUyNjtcclxufVxyXG4udGwtd2Vla2VuZC1kZXNjcmlwdGlvbiB7XHJcbiAgICBjb2xvcjogZ3JheTtcclxuICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcclxuICAgIGZsb2F0OiByaWdodDtcclxuICAgIG1hcmdpbi10b3A6IDJweDtcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgIG1heC13aWR0aDogNDAwcHg7XHJcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgbWF4LWhlaWdodDogMzVweDtcclxufVxyXG4udGwtd2Vla2VuZC1kZXNjcmlwdGlvbi50bC13ZWVrZW5kLWRlc2NyaXB0aW9uLWhpZGRlblxyXG57XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcbi50bC12ZXJzaW9uLW51bWJlciB7XHJcbiAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICBib3R0b206IDVweDtcclxuICAgIGxlZnQ6IDVweDtcclxufVxyXG5cclxuLnRsLXNldHRpbmdzIHtcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIGluc2V0OiAwO1xyXG4gICAgei1pbmRleDogMTAwO1xyXG59XHJcbi50bC1zZXR0aW5ncy1iYWNrIHtcclxuICAgIGluc2V0OiAwO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XHJcbiAgICBvcGFjaXR5OiAwLjU7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi50bC1zZXR0aW5ncy50bC1zZXR0aW5ncy1oaWRkZW4ge1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG5cclxuLnRsLXNldHRpbmdzLXZlcnNpb24ge1xyXG4gICAgbWFyZ2luOiA1cHggMTBweDtcclxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBncmF5O1xyXG59XHJcblxyXG4udGwtc2V0dGluZ3MtdmVyc2lvbjpsYXN0LWNoaWxkIHtcclxuICAgIGJvcmRlci1ib3R0b206IDA7XHJcbn1cclxuXHJcbi50bC1zZXR0aW5ncy10aXRsZSB7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgIGZvbnQtc2l6ZTogMS4yNWVtO1xyXG59XHJcbi50bC1zZXR0aW5ncy1pbm5lciB7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIGhlaWdodDogNzB2aDtcclxuICAgIHdpZHRoOiA5MHZ3O1xyXG4gICAgbGVmdDogNXZ3O1xyXG4gICAgdG9wOiAxNXZoO1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgZ3JheTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgb3ZlcmZsb3c6IGF1dG87XHJcbn1cclxuLnRsLXNldHRpbmdzLXZlcnNpb24gYnV0dG9uXHJcbntcclxuICAgIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xyXG59XHJcblxyXG4udGwtZGFyayAudGwtc2V0dGluZ3MtaW5uZXJcclxue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzFhMWExYTtcclxufVxyXG5cclxuLnRsLWJhbGFuY2Utd2FybmluZ1xyXG57XHJcbiAgICBmb250LXNpemU6IDAuOGVtO1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XHJcbiAgICBjdXJzb3I6IGhlbHA7XHJcbn1cclxuLnRsLWhpZGRlblxyXG57XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcblxyXG5gOyIsImV4cG9ydCBjb25zdCBSZWFzb25FbmhhbmNlbWVudENzcyA9IGBcclxuLnJlLWxhYmVsXHJcbntcclxuICAgIGZvbnQtc2l6ZTogMS41ZW07XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG59XHJcbi5yZS1yZWFzb24tc2VsZWN0XHJcbntcclxuICAgIHBhZGRpbmc6IDVweDtcclxufVxyXG4ucmUtcmVhc29uLXVpXHJcbntcclxuICAgIHotaW5kZXg6IDIwMDA7XHJcbiAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICBpbnNldDogMDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsMC43NSk7XHJcbiAgICBwYWRkaW5nLXRvcDogNDV2aDtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcbi5yZS1idG5cclxue1xyXG4gICAgcGFkZGluZzogMCB2YXIoLS1idXR0b24tcGFkZGluZy14LCAxNXB4KTtcclxuICAgIG1pbi13aWR0aDogODBweDtcclxuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLXNpemUsIDMwcHgpO1xyXG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICAgIGZvbnQtc2l6ZTogdmFyKC0tYnV0dG9uLWZvbnQtc2l6ZSwgMTJweCk7XHJcbiAgICBmb250LWZhbWlseTogdmFyKC0tYm9keS1mb250LWZhbWlseSk7XHJcbiAgICBib3JkZXI6IDA7XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICBtYXJnaW46IDVweDtcclxufVxyXG4ucmUtYnRuLnJlLXByaW1hcnlcclxue1xyXG4gICAgY29sb3I6IHZhcigtLXByaW1hcnktYmctdGV4dC1jb2xvciwgd2hpdGUpO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS02MDApO1xyXG59XHJcbi5yZS1idG4ucmUtc2Vjb25kYXJ5XHJcbntcclxuICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktYmctdGV4dC1jb2xvciwgIzUzNTM1Myk7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnktNjAwKTtcclxufVxyXG4ucmUtYmx1clxyXG57XHJcbiAgICBmaWx0ZXI6IGJsdXIoMnB4KTtcclxufVxyXG4ucmUtc3VibWl0dGluZyAucmUtYnRuXHJcbntcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuLnJlLXN1Ym1pdHRpbmctdGV4dFxyXG57XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG4gICAgZm9udC1zaXplOiAxLjVlbTtcclxufVxyXG4ucmUtc3VibWl0dGluZyAucmUtc3VibWl0dGluZy10ZXh0XHJcbntcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG59XHJcbmA7Il0sIm5hbWVzIjpbIkFwaSIsInN0YXRpYyIsIm1ldGhvZCIsInVybCIsImJvZHkiLCJQcm9taXNlIiwicmVzb2x2ZSIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwicmVzdWx0IiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0Iiwic3RhdHVzIiwiaGFzT3duUHJvcGVydHkiLCJrZXkiLCJ0b1N0cmluZyIsImFsZXJ0IiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwic2VuZCIsInN0cmluZ2lmeSIsIkRhdGVzIiwic3RyIiwic3BsaXQiLCJsZW5ndGgiLCJwdXNoIiwiRGF0ZSIsImpvaW4iLCJnZXRUaW1lIiwidGltZSIsImluY2x1ZGVUaW1lc3RhbXAiLCJkYXRlIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsInBhZFN0YXJ0IiwiZ2V0RGF0ZSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImhvdXJzIiwiaG91ciIsIk1hdGgiLCJmbG9vciIsIm1pbnV0ZSIsInJvdW5kIiwic2V0SG91cnMiLCJzZXREYXRlIiwiZ2V0RGF5Iiwid2VlazEiLCJwYXJzZUludCIsIkhpQm9iIiwiZW50cmllcyIsInNvbWUiLCJlIiwicmVhc29uSWQiLCJkYXRhIiwibWFwIiwic3RhcnQiLCJmb3JtYXQiLCJzdGFydEhvdXIiLCJlbmQiLCJsZW5ndGhIb3VycyIsInVuZGVmaW5lZCIsInJlYXNvbiIsImNvbW1lbnQiLCJkYXRlU3RyIiwidXNlcklkIiwidGhpcyIsImdldFVzZXJJZCIsIm1ldGFkYXRhIiwidGltZUxvZ0VudHJ5UmVhc29uIiwidmFsdWVzIiwidiIsImlkIiwic2VydmVySWQiLCJuYW1lIiwidmFsdWUiLCJzaGVldCIsInVzZXJJbmZvIiwiV2FpdCIsIm1zIiwid2luZG93Iiwic2V0VGltZW91dCIsImRlbGVnYXRlIiwiaGFuZGxlIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiUmVhc29uRW5oYW5jZW1lbnRNb2RlIiwiVGltZWxvZ1NhdmVTdGF0dXMiLCJFdmVudEhhbmRsZXIiLCJoYW5kbGVycyIsIm9uIiwiaGFuZGxlciIsImNvbnRleHQiLCJvZmYiLCJmaWx0ZXIiLCJoIiwiZmlyZSIsInZhbCIsImZvckVhY2giLCJjYWxsIiwiTWF0ZXJpYWxJY29uIiwibGluayIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJyZWwiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJpY29uIiwiZmlsbCIsInNwYW4iLCJjbGFzc05hbWUiLCJpbm5lclRleHQiLCJzdHlsZSIsInZlcnRpY2FsQWxpZ24iLCJmb250U2l6ZSIsImZvbnRWYXJpYXRpb25TZXR0aW5ncyIsIk51bWJlcnMiLCJudW0iLCJkZWNpbWFscyIsImNlaWwiLCJhcnIiLCJpIiwiVGltZWxvZ01vZGVsIiwic2hlZXRzIiwib25EYXRlVXBkYXRlZCIsIm9uUmVhc29uc1VwZGF0ZWQiLCJvblNoZWV0VXBkYXRlZCIsIm9uU2hlZXRzVXBkYXRlZCIsIm9uU2F2ZVN0YXR1c1VwZGF0ZWQiLCJzYXZlSGFuZGxlIiwic2F2aW5nIiwiY2FsY3VsYXRpbmdGbGV4IiwiZmV0Y2hpbmdTaGVldHMiLCJyZWFzb25zIiwiYXN5bmMiLCJmZXRjaFNoZWV0cyIsImZldGNoUmVhc29ucyIsIlNhdmVkIiwidW50aWwiLCJlbXBsb3llZVNoZWV0cyIsImN5Y2xlU3RhcnREYXRlIiwiY3ljbGVFbmREYXRlIiwibmV3U2hlZXQiLCJkYXRlcyIsImxvY2tlZCIsImhvdXJzUGVyRGF5Iiwic29ydCIsImEiLCJiIiwiZmluZCIsInMiLCJhdHRlbmRhbmNlIiwic3VtbWFyeSIsInBvdGVudGlhbFdvcmtpbmdIb3VycyIsInBvdGVudGlhbFdvcmtpbmdEYXlzIiwiZGlydHkiLCJub3ciLCJub25Xb3JraW5nRGF5IiwiaG91cnNUb1dvcmsiLCJmYXZvcml0ZWQiLCJkYXRlRGVzY3JpcHRpb24iLCJub3RlIiwiZGVzY3JpcHRpb24iLCJoYXNDb21tZW50IiwicGFpZFRpbWVvZmZTZWNvbmRzIiwiZmF2b3JpdGUiLCJnZXRGYXZvcml0ZWREYXRlIiwiY2hhbmdlU3RhcnRIb3VyIiwiaW5kZXgiLCJkIiwicXVldWVTYXZlIiwiY2hhbmdlTGVuZ3RoSG91cnMiLCJjaGFuZ2VSZWFzb24iLCJjaGFuZ2VDb21tZW50IiwidG9nZ2xlQ29tbWVudCIsIm9sZEZhdm9yaXRlIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImdldEl0ZW0iLCJmZXRjaFNoZWV0IiwiZGVsZXRlRW50cnkiLCJzcGxpY2UiLCJvcmlnaW5hbERhdGUiLCJvcmlnaW5hbFNoZWV0IiwiZGF0ZUluZGV4IiwiaW5kZXhPZiIsImVudHJ5SW5kZXgiLCJzaGVldEluZGV4IiwibGFzdCIsImZpbmRMYXN0RW50cnkiLCJpbmNsdWRlcyIsImVudHJ5IiwiY2xlYXJUaW1lb3V0Iiwic2F2ZSIsIldhaXRpbmciLCJTYXZpbmciLCJtaW5pbXVtV2FpdCIsInN1Ym1pdCIsIkVycm9yIiwic2V0QWRqdXN0ZWREYXRlQmFsYW5jZXMiLCJhcHBsaWVkT24iLCJnZXRBZGp1c3RlZERhdGVCYWxhbmNlcyIsImJhbGFuY2UiLCJnZXRGbGV4U3RhdHVzIiwiYWRqdXN0bWVudCIsIm92ZXJkdWVEYXRlcyIsInJlYWxsb2NhdGVkQmFsYW5jZSIsImdldEZsZXhQb2xpY3kiLCJwcmV2aW91c0RheXNJbmNsdWRlZCIsImZsZXhXYXJuaW5nVGhyZXNob2xkIiwiY2FjaGVLZXkiLCJyZW1vdmVJdGVtIiwic2hlZXRCYWxhbmNlcyIsImRheSIsInN1bSIsImRhdGVTdHJpbmciLCJyZWFsQmFsYW5jZSIsInBvbGljeSIsImN1cnJlbnREYXRlVGltZSIsIm92ZXJkdWVEYXRlVGltZSIsIndhcm5pbmdEYXRlVGltZSIsImFsbERhdGVzIiwiZ2V0Q2FjaGVkQmFsYW5jZXMiLCJhZGp1c3RtZW50cyIsImoiLCJwcmV2RGF0ZSIsImFtb3VudCIsIm1pbiIsImFicyIsImFwcGx5RGF0ZUFkanVzdG1lbnQiLCJ1bmJhbGFuY2VkRGF0ZXMiLCJ3YXJuaW5nRGF0ZXMiLCJhZGp1c3RlZERhdGUiLCJpbml0aWFsaXplIiwic2hlZXREcm9wZG93bk9wdGlvbnMiLCJzaGVldERhdGVzIiwid2Vla1N1bXMiLCJvbkRhcmtNb2RlQ2hhbmdlIiwidGltZWxvZyIsImFkZEJ1dHRvbiIsInBhcmVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0b2dnbGVCdXR0b24iLCJnZXQiLCJ0aXRsZSIsIm9uY2xpY2siLCJ0b2dnbGVWaXNpYmxlIiwiY3JlYXRlVUkiLCJjcmVhdGVNb2RlbCIsImxvY2F0aW9uIiwiaGFzaCIsImlzRGFya01vZGUiLCJ0aW1lbG9nVUlPdXRlciIsImRpc3BsYXkiLCJvdmVyZmxvdyIsInNoZWV0Q29udGFpbmVyIiwiaW5uZXJIVE1MIiwibW9kZWwiLCJ0b2dnbGVEYXJrTW9kZSIsImFwcGVuZCIsInRpbWVsb2dVSUlubmVyIiwiY2xvc2VCdXR0b24iLCJkYXJrTW9kZUJ1dHRvbiIsImRhcmsiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJzZXR0aW5zV2luZG93IiwiY3JlYXRlU2V0dGluZ3NXaW5kb3ciLCJzZXR0aW5nc0J1dHRvbiIsImN1cnNvciIsInRleHREZWNvcmF0aW9uIiwic2hlZXREcm9wZG93bkxhYmVsIiwic2hlZXREcm9wZG93biIsIm9uY2hhbmdlIiwib25TZWxlY3RlZFNoZWV0Q2hhbmdlIiwic2F2ZVN0YXR1cyIsIm9uU2F2ZVN0YXR1c0NsaWNrIiwiYmFsYW5jZVBhcmVudCIsImJhbGFuY2VMYWJlbCIsImJhbGFuY2VXYXJuaW5nIiwiZml4QmFsYW5jZUJ1dHRvbiIsImZpeEJhbGFuY2UiLCJlbGVtZW50IiwiYmFjayIsImlubmVyIiwic2V0dGluZ3NFbGVtZW50IiwicmVsb2FkTG9ja2VkU2hlZXRzQnV0dG9uIiwiY2xlYXJTaGVldEJhbGFuY2VDYWNoZSIsInRoZW4iLCJ1cGRhdGVCYWxhbmNlIiwicmVzZXRDYW5jZWxsZWRGbGV4SG91cnMiLCJjaGFuZ2Vsb2ciLCJ2ZXJzaW9uIiwidmVyc2lvbkVsZW1lbnQiLCJ2ZXJzaW9uVGl0bGUiLCJsaXN0IiwidGV4dCIsInRleHRFbGVtZW50IiwiZ2V0RGF0ZUNvbnRhaW5lciIsInNlbGVjdGVkU2hlZXQiLCJkYXRlQ29udGFpbmVyIiwic3RhckJ1dHRvbiIsInBhc3RlQnV0dG9uIiwid2Vla2VuZERlc2NyaXB0aW9uIiwid2Vla1NlcGVyYXRvciIsInNldEZhdm9yaXRlZERhdGUiLCJ0b0RhdGVTdHJpbmciLCJuZXdFbnRyeSIsInBhc3RlRnJvbVN0YXJyZWQiLCJhZGRUb1dlZWtTdW0iLCJnZXRFbnRyeUNvbnRhaW5lciIsImVudHJ5Q29udGFpbmVyIiwicCIsImVuZEhvdXIiLCJjb21tZW50QnV0dG9uIiwibm9SZWFzb25XYXJuaW5nIiwidHlwZSIsImRpc2FibGVkIiwicGFyc2VUaW1lVG9ob3VycyIsImVuZExhYmVsIiwidXBkYXRlUmVhc29uc0Ryb3Bkb3duIiwic3VtSG91cnMiLCJzdGVwIiwicGFyc2VGbG9hdCIsImR1cmF0aW9uTGFiZWwiLCJwbGFjZWhvbGRlciIsIndlZWtTdW0iLCJtYXJnaW5Ub3AiLCJmb3JtYXRIb3VyIiwicmVtb3ZlZEVudHJpZXMiLCJ3IiwidG90YWxIb3VycyIsIndlZWtOdW1iZXIiLCJnZXRXZWVrTnVtYmVyRnJvbURhdGUiLCJzZWxlY3QiLCJvcHRpb24iLCJjb250YWlucyIsIm8iLCJ0b3RhbEJhbGFuY2UiLCJjb25maXJtIiwiZml4T3ZlcmR1ZUZsZXhCYWxhbmNlIiwic3VibWl0dGluZyIsImNsb2NrSW5CdXR0b25GaW5kZXIiLCJyZWFzb25FbmhhbmNlbWVudFVJIiwibGFiZWwiLCJyZWFzb25TZWxlY3QiLCJzYXZlRGVmYXVsdFJlYXNvblZhbHVlIiwiY2FuY2VsQnV0dG9uIiwiY2FuY2VsIiwic3VibWl0QnV0dG9uIiwic3VibWl0dGluZ1RleHQiLCJmaW5kVW5lbmhhbmNlZEJ1dHRvbnMiLCJlbmhhbmNlQ2xvY2tJbkJ1dHRvbiIsIkZpeExhdGVzdCIsIkZpeEFsbCIsImFwcFJvb3QiLCJzZWxlY3RvciIsInF1ZXJ5IiwicXVlcnlTZWxlY3RvckFsbCIsImJ1dHRvbiIsIm1vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwic2hvd1JlYXNvbkZpeGVyIiwibG9hZERlZmF1bHRSZWFzb25WYWx1ZSIsInNldFVJVmlzaWJsZSIsImZpeEFsbCIsImZpeExhdGVzdCIsImxhdGVzdCJdLCJzb3VyY2VSb290IjoiIn0=