// ==UserScript==
// @name        HiBob Time Utilities
// @version     1.1.2
// @author      Funday Factory
// @description Utilities to make it easier to log time in HiBob
// @match       https://app.hibob.com/*
// @namespace   http://tampermonkey.net/
// @icon        https://www.google.com/s2/favicons?sz=64&domain=hibob.com
// @grant       none
// ==/UserScript==

(()=>{"use strict";class e{static xhr(e,t,n){return new Promise((s=>{let a=new XMLHttpRequest;a.open(e,t),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Content-Type","application/json"),a.onreadystatechange=()=>{if(4===a.readyState){let e;try{e=JSON.parse(a.responseText)}catch(t){e={result:a.responseText}}if(200!==a.status){if(e.hasOwnProperty("error")){const t=e.hasOwnProperty("key")?e.key:a.status.toString();alert(`HiBob Utils: Error ${t} - ${e.error}`)}else alert(`HiBob Utils: Error ${a.status} - check the developer console for more information.`);console.log(`HiBob Utils: Error ${a.status}.`),console.log(a)}s({status:a.status,body:e})}},a.send(JSON.stringify(n))}))}}class t{static parse(e){if(!e)return null;const t=e.split("T");return t.length<2&&t.push("00:00"),new Date(t.join("T")).getTime()}static format(e,t){if(!e)return"";const n=new Date(e);return`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}-${n.getDate().toString().padStart(2,"0")}${t?`T${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`:""}`}static formatHour(e){const t=Math.floor(e%24),n=Math.round(60*(e-t));return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}static getWeekNumberFromDate(e){var t=new Date(e);t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)}static parseTimeTohours(e){const t=e.split(":");return parseInt(t[0])+parseInt(t[1])/60}}class n{static async submit(n,s){if(s.some((e=>!e.reasonId)))return console.log("WARNING: SOME ENTRIES HAVE NO REASON SET - NOT SUBMITTING!!",n,s),!1;const a=s.map((e=>{var s;return{start:t.format(n+3600*e.startHour*1e3,!0),end:e.lengthHours?t.format(n+3600*(e.startHour+e.lengthHours)*1e3,!0):void 0,reason:e.reasonId,comment:null!==(s=e.comment)&&void 0!==s?s:void 0}})),o=t.format(n,!1),i=await this.getUserId();return 200===(await e.xhr("POST",`https://app.hibob.com/api/attendance/employees/${i}/attendance/entries?forDate=${o}`,a)).status}static async timelogReasons(){return(await this.metadata()).timeLogEntryReason.values.map((e=>({id:e.serverId,name:e.value})))}static async attendance(t){return(await e.xhr("GET",`https://app.hibob.com/api/employees/attendance/my/sheets/${t}`,{})).body}static async sheets(){const t=await this.getUserId();return(await e.xhr("GET",`https://app.hibob.com/api/employees/${t}/timelog/attendance/sheets`,{})).body}static async metadata(){return(await e.xhr("GET","https://app.hibob.com/api/company/metadata/lists/?includeArchived=true",{})).body}static async getUserId(){var e;return"string"!=typeof this.userId&&await this.userInfo(),null!==(e=this.userId)&&void 0!==e?e:""}static async userInfo(){const t=await e.xhr("GET","https://app.hibob.com/api/user",{});return this.userId=t.body.id,t.body}}class s{static for(e){return new Promise((t=>{window.setTimeout((()=>t()),e)}))}static until(e){return new Promise((t=>{const n=window.setInterval((()=>{e()&&(t(),window.clearInterval(n))}),1)}))}}var a,o;!function(e){e[e.FixAll=0]="FixAll",e[e.FixLatest=1]="FixLatest"}(a||(a={}));class i{constructor(){this.handlers=[]}on(e,t){this.handlers.push({handler:e,context:t})}off(e,t){this.handlers=this.handlers.filter((n=>n.handler!==e||n.context!==t))}fire(e){this.handlers.forEach((t=>t.handler.call(t.context,e)))}}class r{static initialize(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200",e.rel="stylesheet",document.head.appendChild(e)}static get(e,t=!1){const n=document.createElement("span");return n.className="material-symbols-outlined",n.innerText=e,n.style.verticalAlign="middle",n.style.fontSize="1.5em",n.style.fontVariationSettings="'FILL' "+(t?1:0),n}}class l{static round(e,t){return Math.round(e*10**t)/10**t}static floor(e,t){return Math.floor(e*10**t)/10**t}static ceil(e,t){return Math.ceil(e*10**t)/10**t}static sum(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}}!function(e){e[e.Waiting=0]="Waiting",e[e.Saving=1]="Saving",e[e.Saved=2]="Saved",e[e.Error=3]="Error"}(o||(o={}));class d{constructor(){this.sheets=[],this.onDateUpdated=new i,this.onReasonsUpdated=new i,this.onSheetUpdated=new i,this.onSheetsUpdated=new i,this.onSaveStatusUpdated=new i,this.saveHandle=-1,this.saving=!1,this.calculatingFlex=!1,this.fetchingSheets=!1,this.reasons=[]}async initialize(){await this.fetchSheets(),await this.fetchReasons(),this.onSaveStatusUpdated.fire(o.Saved)}async fetchSheets(){var e,a;await s.until((()=>!this.fetchingSheets)),this.fetchingSheets=!0,this.sheets=[];const o=await n.sheets();for(const n of o.employeeSheets){const s=null!==(e=t.parse(n.cycleStartDate))&&void 0!==e?e:0,o=null!==(a=t.parse(n.cycleEndDate))&&void 0!==a?a:0,i={id:n.id,status:n.status,start:s,end:o,dates:[],locked:n.locked,hoursPerDay:0};this.sheets.push(i)}this.sheets.sort(((e,t)=>t.start-e.start)),this.onSheetsUpdated.fire(this.sheets),this.fetchingSheets=!1}async fetchReasons(){this.reasons=(await n.metadata()).timeLogEntryReason.values,this.onReasonsUpdated.fire(this.reasons)}async fetchSheet(e){var s;const a=this.sheets.find((t=>t.id===e));if(!a)return;const o=await n.attendance(e);a.hoursPerDay=o.summary.potentialWorkingHours/o.summary.potentialWorkingDays,a.dates=[];for(const e of o.attendance){const n={dirty:!1,date:null!==(s=t.parse(e.date))&&void 0!==s?s:Date.now(),weekend:"WeekendEvent"===e.status,favorited:!1,dateDescription:e.note.description,entries:e.entries.map((n=>{var s,a,o,i,r;return{startHour:l.floor(((null!==(s=t.parse(n.start))&&void 0!==s?s:Date.now())-(null!==(a=t.parse(e.date))&&void 0!==a?a:Date.now()))/36e5,2),lengthHours:l.ceil(((null!==(o=t.parse(n.end))&&void 0!==o?o:Date.now())-(null!==(i=t.parse(n.start))&&void 0!==i?i:Date.now()))/36e5,2),reasonId:n.reason,comment:null!==(r=n.comment)&&void 0!==r?r:null,hasComment:!!n.comment}})).sort(((e,t)=>e.startHour-t.startHour))};a.dates.push(n)}a.dates.sort(((e,t)=>t.date-e.date));const i=await this.getFavoritedDate();i&&i.sheet===a&&(i.date.favorited=!0),this.onSheetUpdated.fire(a)}changeStartHour(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].startHour=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}changeLengthHours(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].lengthHours=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}changeReason(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].reasonId=n,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}changeComment(e,t,n){const s=this.sheets.find((t=>t.dates.some((t=>t===e))));s&&(e.entries[t].comment=n,e.entries[t].hasComment=!0,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:s,date:e}))}toggleComment(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries[t].hasComment=!e.entries[t].hasComment,e.entries[t].comment=e.entries[t].hasComment?"":null,e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}async setFavoritedDate(e){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!n)return;const s=await this.getFavoritedDate();s&&(s.date.favorited=!1,this.onDateUpdated.fire(s)),e.favorited=!0,this.onDateUpdated.fire({sheet:n,date:e}),window.localStorage.setItem("tl_favorite",JSON.stringify({date:t.format(e.date,!1)}))}async getFavoritedDate(){const e=window.localStorage.getItem("tl_favorite");if(!e)return null;const n=JSON.parse(e),s=t.parse(n.date);if("number"==typeof s){const e=this.sheets.find((e=>e.start<=s&&e.end>=s));if(e){e.dates.length<1&&await this.fetchSheet(e.id);const t=e.dates.find((e=>e.date===s));if(t)return{sheet:e,date:t}}}return null}deleteEntry(e,t){const n=this.sheets.find((t=>t.dates.some((t=>t===e))));n&&(e.entries.splice(t,1),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:n,date:e}))}async findLastEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;let n=t.dates.indexOf(e),s=-1;for(let e=this.sheets.indexOf(t);e<this.sheets.length;e++){const t=this.sheets[e];for(t.dates.length<1&&await this.fetchSheet(t.id);n<t.dates.length;n++){const e=t.dates[n];if(e.entries.length>0)return s<0?e.entries[e.entries.length-1]:e.entries[s];s=0}n=0}}async newEntry(e){const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const n=await this.findLastEntry(e);let s=8.5,a=l.round(t.hoursPerDay,2),o="";n&&(e.entries.includes(n)&&(s=n.startHour+n.lengthHours,a=1),o=n.reasonId),e.entries.push({startHour:s,lengthHours:a,reasonId:o,comment:null,hasComment:!1}),e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}async pasteFromStarred(e){if(e.entries.length>0)return;const t=this.sheets.find((t=>t.dates.some((t=>t===e))));if(!t)return;const n=await this.getFavoritedDate();if(n&&n.date!==e){for(const t of n.date.entries)e.entries.push({startHour:t.startHour,lengthHours:t.lengthHours,reasonId:t.reasonId,comment:t.comment,hasComment:t.hasComment});e.dirty=!0,this.queueSave(),this.onDateUpdated.fire({sheet:t,date:e})}}queueSave(){window.clearTimeout(this.saveHandle),this.saveHandle=window.setTimeout((()=>this.save()),500),this.onSaveStatusUpdated.fire(o.Waiting)}async save(){await s.until((()=>!this.saving)),this.saving=!0,this.onSaveStatusUpdated.fire(o.Saving);const e=s.for(100);let t=!1;for(const e of this.sheets)for(const s of e.dates)s.dirty&&(await n.submit(s.date,s.entries)?s.dirty=!1:t=!0);await e,this.onSaveStatusUpdated.fire(t?o.Error:o.Saved),this.saving=!1}static getBalanceCalculationDescription(){return"Flex hours is calculated using the hours worked in the previous 28 days."}async getCurrentBalanceHours(){var e,n,a;const o=null!==(e=t.parse(t.format(Date.now(),!1)))&&void 0!==e?e:0,i=null!==(n=t.parse(t.format(o-23328e5,!1)))&&void 0!==n?n:0,r={};let d=0;if(this.sheets){await s.until((()=>!this.calculatingFlex)),this.calculatingFlex=!0;for(let e=this.sheets.length-1;e>=0;e--){const t=this.sheets[e];if(!t)continue;let n=[];const s=`tl_cached_hour_balances_${t.id}`;if(t.locked&&null!==window.localStorage.getItem(s))n=JSON.parse(null!==(a=window.localStorage.getItem(s))&&void 0!==a?a:"[]");else{if(t.dates.length<1&&await this.fetchSheet(t.id),t.dates.some((e=>e.entries.length>0&&e.entries.some((e=>e.lengthHours>0)))))for(const e of t.dates){const s=e.weekend?0:t.hoursPerDay,a=l.sum(e.entries.map((e=>e.lengthHours)))-s;n.push({date:e.date,balance:a})}t.locked&&t.id>0&&window.localStorage.setItem(s,JSON.stringify(n))}d+=l.sum(n.filter((e=>e.date>=i&&e.date<=o)).map((e=>e.balance))),r[t.id.toString()]=l.sum(n.map((e=>e.balance)))}this.calculatingFlex=!1}return{sheets:r,balance:d}}}r.initialize(),new class{constructor(){this.sheetDropdownOptions=[],this.sheetDates=[],this.weekSums=[],this.reasons=[],this.onDarkModeChange=new i,window.timelog=this,this.addButton()}async addButton(){for(;;){const e=document.querySelector("div.app-content > app-top-bar.app-top-bar > div.actions");if(e){this.toggleButton=document.createElement("button"),this.toggleButton.className="tl-toggle-btn",this.toggleButton.appendChild(r.get("sentiment_very_satisfied")),this.toggleButton.title="HiBob Utilities",this.toggleButton.onclick=()=>this.toggleVisible(),e.appendChild(this.toggleButton),this.createUI(),await this.createModel(),"#tl-ui"===location.hash&&this.toggleVisible(),this.onDarkModeChange.fire(this.isDarkMode());break}await s.for(1)}}toggleVisible(){var e;this.timelogUIOuter&&("none"===this.timelogUIOuter.style.display?(this.timelogUIOuter.style.display="block",location.hash="#tl-ui",document.body.style.overflow="hidden",this.sheetContainer&&(this.sheetContainer.innerHTML=""),null===(e=this.model)||void 0===e||e.fetchSheets()):(this.timelogUIOuter.style.display="none",location.hash="",document.body.style.overflow="initial"))}isDarkMode(){return"true"===localStorage.getItem("tl_dark_mode")}toggleDarkMode(){this.isDarkMode()?localStorage.setItem("tl_dark_mode","false"):localStorage.setItem("tl_dark_mode","true"),this.onDarkModeChange.fire(this.isDarkMode())}createUI(){const e=document.createElement("style");e.innerHTML="\n.tl-toggle-btn\n{\n    border: none;\n    background: none;\n    font-size: 2em;\n}\n.tl-close-btn\n{\n    font-size: 2em;\n    position: absolute;\n    right: 5px;\n}\n.tl-ui\n{\n    position: fixed;\n    z-index: 1000;\n    inset: 0px;\n    background-color: white;\n    overflow-y: scroll;\n    padding: 10px;\n}        \n.tl-date\n{\n    margin-top: 10px;\n    padding: 10px;\n    border: 1px solid gray;\n    border-radius: 5px;\n}\n.tl-save-status, .tl-add-entry-btn\n{\n    margin-left: 10px;\n}\n.tl-entry\n{\n    margin-top: 5px;\n}\n.tl-entry > *\n{\n    margin-left: 5px;\n}\n.tl-entry > input[type=number]\n{\n    width: 50px;\n}\n.tl-entry > input[type=time]\n{\n    width: 75px;\n}\n.tl-save-status\n{\n    font-weight: bold;\n}\n.tl-sheet-select\n{\n    margin-left: 5px;\n}\n.tl-date-label\n{\n    font-weight: bold;\n}\n.tl-date-label.tl-date-label-weekend\n{\n    font-weight: initial;\n    font-style: italic;\n    color: gray;\n}\n.tl-entry-reason \n{\n    padding: 3px;\n}\n.tl-remove-entry-btn\n{\n    float: right;\n}\n.tl-week-seperator\n{\n    margin-top: 57px;\n}\n.tl-balance-label\n{\n    margin: 5px;\n    display: inline-block;\n}\n.tl-balance-help\n{\n    display: inline-block;\n    cursor: help;\n}\n\n.tl-ui-inner\n{\n    display: table;\n    margin-left: auto;\n    margin-right: auto;\n}\n.tl-ui-inner, .tl-week-seperator, .tl-date\n{\n    min-width: 650px;\n}\n.tl-entry-comment {\n    margin-top: 5px;\n    margin-bottom: 15px;\n    width: 100%;\n    display: none;\n}\n.tl-has-comment .tl-entry-comment\n{\n    display: block;\n}\n.tl-success\n{\n    color: #02B875;\n}\n.tl-warning\n{\n    color: #F0AF52;\n}\n.tl-danger\n{\n    color: #DA5652;\n}\n.tl-sum-hours\n{\n    position: absolute;\n    margin-top: -23px;\n}\n.tl-week-sum\n{\n    position: absolute;\n    margin-top: -57px;\n    text-decoration: underline;\n}\n.tl-ui button.tl-star-button, .tl-ui.tl-dark button.tl-star-button\n{\n    background: none;\n    border: none;\n    margin: 0;\n    padding: 0;\n}\n.tl-ui button.tl-star-button.tl-favorite, .tl-ui.tl-dark button.tl-star-button.tl-favorite\n{\n    color: #f1a00b;\n    opacity: 1;\n}\n.tl-paste-btn {\n    margin-left: 5px;\n    display: none;\n}\n.tl-has-favorite .tl-paste-btn:not(.tl-hide-favorite-button)\n{\n    display: inline-block;\n}\n.tl-show-on-hover\n{\n    opacity: 0;\n}\n.tl-date:hover .tl-show-on-hover\n{\n    opacity: 1;\n}\n.tl-no-reason-warning {\n    margin-left: 180px;\n    position: absolute;\n    margin-top: -22px;\n    font-weight: bold;\n    background-color: white;\n    user-select: none;\n    pointer-events: none;\n}\n.tl-no-reason-warning.tl-has-reason\n{\n    display: none;\n}\n.tl-clickable\n{\n    cursor: pointer;\n}\n.tl-dark-mode-btn {\n    position: fixed;\n    bottom: 5px;\n    right: 20px;\n}\n.tl-ui button\n{\n    background-color: #d9d9d9;\n    border: 1px solid gray;\n    border-radius: 5px;\n}\n.tl-ui button:hover\n{\n    background-color: #efebeb;\n}\n\n.tl-ui.tl-dark\n{\n    background-color: #1E1E1E;\n    color: white;\n}\n.tl-ui.tl-dark select, .tl-ui.tl-dark input {\n    color: white;\n    background-color: #252526;\n    border: 1px gray solid;\n    color-scheme: dark;\n}\n.tl-ui.tl-dark button\n{\n    background-color: #333333;\n    border: 1px solid #282828;\n    color: white;\n}\n.tl-ui.tl-dark button:hover\n{\n    background-color: #525252;\n}\n.tl-ui.tl-dark .tl-no-reason-warning\n{\n    background-color: #252526;\n}\n.tl-weekend-description {\n    color: gray;\n    font-style: italic;\n    float: right;\n    margin-top: 2px;\n    display: inline-block;\n    max-width: 400px;\n    overflow: hidden;\n    max-height: 35px;\n}\n.tl-weekend-description.tl-weekend-description-hidden\n{\n    display: none;\n}\n.tl-version-number {\n    position: fixed;\n    bottom: 5px;\n    left: 5px;\n}\n\n.tl-changelog {\n    position: fixed;\n    inset: 0;\n    z-index: 100;\n}\n.tl-changelog-back {\n    inset: 0;\n    position: absolute;\n    background-color: black;\n    opacity: 0.5;\n    cursor: pointer;\n}\n\n.tl-changelog.tl-changelog-hidden {\n    display: none;\n}\n\n.tl-changelog-version {\n    margin: 5px 10px;\n    border-bottom: 1px solid gray;\n}\n\n.tl-changelog-version:last-child {\n    border-bottom: 0;\n}\n\n.tl-changelog-title {\n    font-weight: bold;\n    font-size: 1.25em;\n}\n.tl-changelog-inner {\n    position: absolute;\n    background-color: white;\n    height: 70vh;\n    width: 90vw;\n    left: 5vw;\n    top: 15vh;\n    border: 1px solid gray;\n    border-radius: 10px;\n    padding: 10px;\n    overflow: auto;\n}\n.tl-dark .tl-changelog-inner\n{\n    background-color: #1a1a1a;\n}\n\n",document.body.appendChild(e),this.timelogUIOuter=document.createElement("div"),this.timelogUIOuter.className="tl-ui",this.timelogUIOuter.style.display="none",document.body.append(this.timelogUIOuter),this.timelogUIInner=document.createElement("div"),this.timelogUIInner.className="tl-ui-inner",this.timelogUIOuter.append(this.timelogUIInner);const t=document.createElement("button");t.className="tl-close-btn",t.appendChild(r.get("close")),t.onclick=()=>this.toggleVisible(),this.timelogUIInner.appendChild(t),this.darkModeButton=document.createElement("button"),this.darkModeButton.className="tl-dark-mode-btn",this.darkModeButton.onclick=()=>this.toggleDarkMode(),this.timelogUIInner.appendChild(this.darkModeButton),this.onDarkModeChange.on((e=>{var t,n;e?null===(t=this.timelogUIOuter)||void 0===t||t.classList.add("tl-dark"):null===(n=this.timelogUIOuter)||void 0===n||n.classList.remove("tl-dark"),this.darkModeButton&&(this.darkModeButton.innerHTML="",this.darkModeButton.append(e?r.get("light_mode"):r.get("dark_mode")))}),this);const n=document.createElement("div");if(n.innerText="1.1.2",n.className="tl-version-number",this.timelogUIInner.appendChild(n),[{version:"1.1.2 - 03/10/2022",text:["Fixed problem where you couldn't log time on some days, where you were supposed to."]},{version:"1.1.1 - 30/09/2022",text:["Added changelog","Show descriptions on non-working days"]}].length>0){const e=this.createChangelogElement();this.timelogUIInner.appendChild(e),n.onclick=()=>e.classList.remove("tl-changelog-hidden"),n.style.cursor="pointer",n.style.textDecoration="underline"}const s=document.createElement("span");s.innerText="Sheet:",this.timelogUIInner.appendChild(s),this.sheetDropdown=document.createElement("select"),this.sheetDropdown.className="tl-sheet-select",this.sheetDropdown.onchange=()=>this.onSelectedSheetChange(),this.timelogUIInner.appendChild(this.sheetDropdown),this.saveStatus=document.createElement("span"),this.saveStatus.className="tl-save-status",this.saveStatus.onclick=()=>this.onSaveStatusClick(),this.timelogUIInner.append(this.saveStatus);const a=document.createElement("div");a.className="tl-balance",this.timelogUIInner.append(a),this.balanceLabel=document.createElement("div"),this.balanceLabel.innerText="Balance: ",this.balanceLabel.className="tl-balance-label",a.append(this.balanceLabel);const o=document.createElement("div");o.append(r.get("help")),o.className="tl-balance-help",o.title=d.getBalanceCalculationDescription(),a.append(o),this.sheetContainer=document.createElement("div"),this.sheetContainer.className="tl-sheet",this.timelogUIInner.appendChild(this.sheetContainer)}createChangelogElement(){const e=document.createElement("div");e.className="tl-changelog tl-changelog-hidden";const t=document.createElement("div");t.className="tl-changelog-back",e.append(t),t.onclick=()=>e.classList.add("tl-changelog-hidden");const n=document.createElement("div");n.className="tl-changelog-inner",e.append(n);const s=[{version:"1.1.2 - 03/10/2022",text:["Fixed problem where you couldn't log time on some days, where you were supposed to."]},{version:"1.1.1 - 30/09/2022",text:["Added changelog","Show descriptions on non-working days"]}];for(const e of s){const t=document.createElement("div");t.className="tl-changelog-version",n.append(t);const s=document.createElement("div");s.className="tl-changelog-title",s.innerText=e.version,t.append(s);const a=document.createElement("ul");a.className="tl-changelog-list",t.append(a);for(const t of e.text){const e=document.createElement("li");e.innerText=t,a.append(e)}}return e}async createModel(){this.model&&(this.model.onDateUpdated.off(this.onDateUpdated,this),this.model.onReasonsUpdated.off(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.off(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.off(this.onSheetUpdated,this),this.model.onSheetsUpdated.off(this.onSheetsUpdated,this)),this.model=new d,this.model.onDateUpdated.on(this.onDateUpdated,this),this.model.onReasonsUpdated.on(this.onReasonsUpdated,this),this.model.onSaveStatusUpdated.on(this.onSaveStatusUpdated,this),this.model.onSheetUpdated.on(this.onSheetUpdated,this),this.model.onSheetsUpdated.on(this.onSheetsUpdated,this),await this.model.initialize()}getDateContainer(e){if(this.selectedSheet===e.sheet&&this.sheetContainer){let t=this.sheetDates.find((t=>t.date===e.date));if(!t){if(t={date:e.date,parent:document.createElement("div"),title:document.createElement("span"),entries:[],starButton:document.createElement("button"),pasteButton:document.createElement("button"),weekendDescription:document.createElement("div")},this.sheetDates.push(t),t.parent.className="tl-date",this.sheetContainer.appendChild(t.parent),1===new Date(e.date.date).getDay()){const e=document.createElement("div");e.className="tl-week-seperator",this.sheetContainer.appendChild(e)}if(t.parent.append(t.starButton),t.starButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.setFavoritedDate(e.date)},t.starButton.className="tl-star-button tl-show-on-hover",t.starButton.title="Favorite Day",t.title.className="tl-date-label",t.title.innerText=new Date(e.date.date).toDateString(),e.date.weekend&&t.title.classList.add("tl-date-label-weekend"),t.parent.append(t.title),t.weekendDescription.className="tl-weekend-description",t.parent.append(t.weekendDescription),!e.sheet.locked){const n=document.createElement("button");n.appendChild(r.get("add")),n.className="tl-add-entry-btn tl-show-on-hover",n.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.newEntry(e.date)},t.parent.append(n),t.pasteButton=document.createElement("button"),t.pasteButton.appendChild(r.get("switch_access_shortcut_add")),t.pasteButton.title="Paste from Favorite Day",t.pasteButton.className="tl-paste-btn tl-show-on-hover",t.pasteButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.pasteFromStarred(e.date)},t.parent.append(t.pasteButton)}this.addToWeekSum(t)}return t}return null}getEntryContainer(e,n,s){let a=n.entries.find((e=>e.entry===s));if(!a){a={entry:s,parent:document.createElement("div"),startHour:document.createElement("input"),endHour:document.createElement("input"),length:document.createElement("input"),reason:document.createElement("select"),comment:document.createElement("input"),commentButton:document.createElement("button"),noReasonWarning:document.createElement("div")},n.entries.push(a),a.parent.className="tl-entry",n.parent.appendChild(a.parent),a.startHour.type="time",a.startHour.className="tl-entry-start",e.sheet.locked&&(a.startHour.disabled=!0),a.startHour.onchange=()=>{var n,o,i;const r=s.startHour+s.lengthHours;null===(n=this.model)||void 0===n||n.changeStartHour(e.date,e.date.entries.indexOf(s),t.parseTimeTohours(null!==(o=null==a?void 0:a.startHour.value)&&void 0!==o?o:"08:00"));const d=l.round(r-s.startHour,2);null===(i=this.model)||void 0===i||i.changeLengthHours(e.date,e.date.entries.indexOf(s),d)},a.parent.appendChild(a.startHour);const o=document.createElement("span");o.className="tl-end-label",o.innerText="-",a.parent.appendChild(o),a.endHour.type="time",a.endHour.className="tl-entry-end",e.sheet.locked&&(a.endHour.disabled=!0),a.endHour.onchange=()=>{var n;if(null==a?void 0:a.endHour){const o=l.round(t.parseTimeTohours(a.endHour.value)-s.startHour,2);null===(n=this.model)||void 0===n||n.changeLengthHours(e.date,e.date.entries.indexOf(s),o)}},a.parent.appendChild(a.endHour),a.reason.onchange=()=>{var t,n;return null===(t=this.model)||void 0===t?void 0:t.changeReason(e.date,e.date.entries.indexOf(s),null!==(n=null==a?void 0:a.reason.value)&&void 0!==n?n:"")},e.sheet.locked&&(a.reason.disabled=!0),a.reason.className="tl-entry-reason",a.parent.appendChild(a.reason),this.updateReasonsDropdown(a.reason),1===n.entries.length&&(n.sumHours=document.createElement("span"),n.sumHours.className="tl-sum-hours",a.parent.append(n.sumHours)),a.length.type="number",a.length.className="tl-entry-length",a.length.step="0.01",e.sheet.locked&&(a.length.disabled=!0),a.length.onchange=()=>{var t;null===(t=this.model)||void 0===t||t.changeLengthHours(e.date,e.date.entries.indexOf(s),parseFloat((null==a?void 0:a.length.value)||"0"))},a.parent.appendChild(a.length);const i=document.createElement("span");if(i.className="tl-duration-label",i.innerText="hour(s)",a.parent.appendChild(i),!e.sheet.locked){a.commentButton.className="tl-add-comment-btn tl-show-on-hover",a.commentButton.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.toggleComment(e.date,e.date.entries.indexOf(s))},a.parent.appendChild(a.commentButton);const t=document.createElement("button");t.appendChild(r.get("delete")),t.className="tl-remove-entry-btn tl-show-on-hover",t.onclick=()=>{var t;return null===(t=this.model)||void 0===t?void 0:t.deleteEntry(e.date,e.date.entries.indexOf(s))},a.parent.appendChild(t)}a.noReasonWarning.append(r.get("warning",!0)),a.noReasonWarning.append(" No reason selected!"),a.noReasonWarning.className="tl-no-reason-warning tl-warning tl-has-reason",a.parent.appendChild(a.noReasonWarning),a.comment.type="text",a.comment.placeholder="Write a note...",a.comment.title="Write a note...",a.comment.className="tl-entry-comment",e.sheet.locked&&(a.comment.disabled=!0),a.comment.onchange=()=>{var t,n;null===(t=this.model)||void 0===t||t.changeComment(e.date,e.date.entries.indexOf(s),null!==(n=null==a?void 0:a.comment.value)&&void 0!==n?n:"")},a.parent.appendChild(a.comment)}return a}addToWeekSum(e){if(this.weekSums.length<1||0===new Date(e.date.date).getDay()){const t={dates:[e],element:document.createElement("div")};t.element.className="tl-week-sum",this.weekSums.push(t),e.parent.appendChild(t.element),e.parent.style.marginTop="38px"}else this.weekSums[this.weekSums.length-1].dates.push(e)}onDateUpdated(e){var n,s,a;if(this.selectedSheet===e.sheet&&this.sheetContainer){let o=this.getDateContainer(e);if(o){for(const s of e.date.entries){let a=this.getEntryContainer(e,o,s);a.startHour.value=t.formatHour(s.startHour),a.length.value=s.lengthHours.toString(),a.endHour.value=t.formatHour(s.startHour+s.lengthHours),a.reason.value=s.reasonId,a.comment.value=null!==(n=s.comment)&&void 0!==n?n:"",s.reasonId?a.noReasonWarning.classList.add("tl-has-reason"):a.noReasonWarning.classList.remove("tl-has-reason"),a.commentButton.title=s.hasComment?"Remove note":"Add note",a.commentButton.innerHTML="",a.commentButton.appendChild(r.get(s.hasComment?"speaker_notes_off":"speaker_notes")),s.hasComment?a.parent.classList.add("tl-has-comment"):a.parent.classList.remove("tl-has-comment")}const i=o.entries.filter((t=>!e.date.entries.find((e=>e===t.entry))));if(o.entries=o.entries.filter((e=>!i.includes(e))),i.forEach((e=>e.parent.remove())),o.sumHours){const t=l.sum(e.date.entries.map((e=>e.lengthHours)));o.sumHours.innerText=`${l.round(t,2)} hour${1===t?"":"s"}`}o.starButton.innerHTML="",o.starButton.disabled=e.date.favorited,o.starButton.classList.remove("tl-favorite"),o.starButton.appendChild(r.get("star",e.date.favorited)),e.date.favorited&&o.starButton.classList.add("tl-favorite"),o.entries.length>0||o.date.favorited?o.pasteButton.classList.add("tl-hide-favorite-button"):o.pasteButton.classList.remove("tl-hide-favorite-button"),o.title.title=null!==(s=e.date.dateDescription)&&void 0!==s?s:"",e.date.weekend&&e.date.entries.length<1?(o.weekendDescription.classList.remove("tl-weekend-description-hidden"),o.weekendDescription.innerText=null!==(a=e.date.dateDescription)&&void 0!==a?a:""):o.weekendDescription.classList.add("tl-weekend-description-hidden")}const i=this.weekSums.find((t=>t.dates.some((t=>t.date===e.date))));if(i){const n=l.sum(i.dates.map((e=>l.sum(e.entries.map((e=>e.entry.lengthHours)))))),s=i.dates.filter((e=>!e.date.weekend)).length,a=e.sheet.hoursPerDay*s,o=t.getWeekNumberFromDate(i.dates[0].date.date);i.element.innerHTML=`<b>Week ${o}</b>: ${l.round(n,2)} / ${l.round(a,2)} hours`}}this.updateBalance()}updateReasonsDropdown(e){e.innerHTML="";for(const t of this.reasons){const n=document.createElement("option");n.value=t.serverId,n.innerText=t.value,e.appendChild(n)}}onReasonsUpdated(e){this.reasons=e;for(const e of this.sheetDates)for(const t of e.entries)this.updateReasonsDropdown(t.reason)}onSaveStatusUpdated(e){this.saveStatus&&(this.saveStatus.innerHTML="",this.saveStatus.classList.remove("tl-success"),this.saveStatus.classList.remove("tl-warning"),this.saveStatus.classList.remove("tl-clickable"),e===o.Saved&&(this.saveStatus.appendChild(r.get("cloud_done",!0)),this.saveStatus.append(" Saved"),this.saveStatus.classList.add("tl-success")),e===o.Waiting&&(this.saveStatus.appendChild(r.get("pending")),this.saveStatus.append(" Pending...")),e===o.Saving&&(this.saveStatus.appendChild(r.get("cloud_upload")),this.saveStatus.append(" Saving...")),e===o.Error&&(this.saveStatus.appendChild(r.get("cloud_off")),this.saveStatus.append(" Failed!"),this.saveStatus.classList.add("tl-warning"),this.saveStatus.classList.add("tl-clickable")))}onSaveStatusClick(){var e,t;(null===(e=this.saveStatus)||void 0===e?void 0:e.classList.contains("tl-clickable"))&&(null===(t=this.model)||void 0===t||t.save())}onSheetUpdated(e){if(this.sheetDropdown&&!this.sheetDropdownOptions.find((t=>t.sheet===e))){const t=document.createElement("option");t.value=e.id.toString(),t.innerText=`${new Date(e.start).toDateString()} - ${new Date(e.end).toDateString()}${e.locked?" (locked)":""}`,this.sheetDropdownOptions.push({sheet:e,element:t}),this.sheetDropdown.appendChild(t)}this.selectedSheet===e&&(this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[],this.weekSums=[]);for(const t of e.dates)this.onDateUpdated({sheet:e,date:t});this.updateBalance()}onSheetsUpdated(e){this.sheetDropdown&&(this.sheetDropdown.innerHTML=""),this.sheetDropdownOptions=[];for(const t of e)this.onSheetUpdated(t);this.onSelectedSheetChange()}onSelectedSheetChange(){var e;if(!this.sheetDropdown)return;this.sheetContainer&&(this.sheetContainer.innerHTML=""),this.sheetDates=[];const t=this.sheetDropdown.value;this.selectedSheet=null===(e=this.sheetDropdownOptions.find((e=>e.element.value===t)))||void 0===e?void 0:e.sheet,this.selectedSheet&&this.model&&this.model.fetchSheet(this.selectedSheet.id)}async updateBalance(){var e,t,n;if(!this.model||!this.balanceLabel||!this.selectedSheet)return;const s=await this.model.getCurrentBalanceHours(),a=l.round(null!==(e=s.sheets[this.selectedSheet.id.toString()])&&void 0!==e?e:0,2),o=l.round(s.balance,2);this.balanceLabel.innerText=`Flex: ${o} hour${1!=o?"s":""} (current month: ${a} hour${1!=a?"s":""})`,await this.model.getFavoritedDate()?null===(t=this.sheetContainer)||void 0===t||t.classList.add("tl-has-favorite"):null===(n=this.sheetContainer)||void 0===n||n.classList.remove("tl-has-favorite")}},new class{constructor(){this.submitting=!1,this.createUI(),this.clockInButtonFinder()}createUI(){const e=document.createElement("style");e.innerHTML="\n.re-label\n{\n    font-size: 1.5em;\n    margin-bottom: 10px;\n}\n.re-reason-select\n{\n    padding: 5px;\n}\n.re-reason-ui\n{\n    z-index: 2000;\n    position: fixed;\n    inset: 0;\n    background-color: rgba(0,0,0,0.75);\n    padding-top: 45vh;\n    text-align: center;\n    color: white;\n    font-weight: bold;\n}\n.re-btn\n{\n    padding: 0 var(--button-padding-x, 15px);\n    min-width: 80px;\n    height: var(--button-size, 30px);\n    font-weight: 600;\n    font-size: var(--button-font-size, 12px);\n    font-family: var(--body-font-family);\n    border: 0;\n    border-radius: 4px;\n    margin: 5px;\n}\n.re-btn.re-primary\n{\n    color: var(--primary-bg-text-color, white);\n    background-color: var(--primary-600);\n}\n.re-btn.re-secondary\n{\n    color: var(--secondary-bg-text-color, #535353);\n    background-color: var(--secondary-600);\n}\n.re-blur\n{\n    filter: blur(2px);\n}\n.re-submitting .re-btn\n{\n    display: none;\n}\n.re-submitting-text\n{\n    display: none;\n    font-size: 1.5em;\n}\n.re-submitting .re-submitting-text\n{\n    display: block;\n}\n",document.body.append(e),this.reasonEnhancementUI=document.createElement("div"),this.reasonEnhancementUI.className="re-reason-ui",this.reasonEnhancementUI.style.display="none",document.body.appendChild(this.reasonEnhancementUI);const t=document.createElement("div");t.innerText="Choose Default Reason",t.className="re-label",this.reasonEnhancementUI.appendChild(t),this.reasonSelect=document.createElement("select"),this.reasonSelect.className="re-reason-select",this.reasonSelect.onchange=()=>this.saveDefaultReasonValue(),this.reasonEnhancementUI.appendChild(this.reasonSelect),this.reasonEnhancementUI.appendChild(document.createElement("br"));const n=document.createElement("button");n.className="re-cancel-btn re-btn re-secondary",n.innerText="Cancel",n.onclick=()=>this.cancel(),this.reasonEnhancementUI.appendChild(n);const s=document.createElement("button");s.className="re-submit-btn re-btn re-primary",s.innerText="Submit",s.onclick=()=>this.submit(),this.reasonEnhancementUI.appendChild(s);const a=document.createElement("div");a.className="re-submitting-text",a.innerText="Submitting...",this.reasonEnhancementUI.appendChild(a)}async clockInButtonFinder(){for(var e;;)this.findUnenhancedButtons("b-button.punch-clock-button, b-button.time-widget-clock-in-btn, b-button.time-widget-clock-out-btn").forEach((e=>this.enhanceClockInButton(e,a.FixLatest))),this.findUnenhancedButtons("b-button.quick-fix-apply-button").forEach((e=>this.enhanceClockInButton(e,a.FixAll))),this.appRoot||(this.appRoot=null!==(e=document.querySelector("app-root"))&&void 0!==e?e:void 0),await s.for(10)}findUnenhancedButtons(e){var t=[],n=document.querySelectorAll(e);for(const e of n)e.classList.contains("re-enhanced")||(e.classList.add("re-enhanced"),t.push(e));return t}enhanceClockInButton(e,t){e.addEventListener("click",(()=>this.showReasonFixer(t)))}saveDefaultReasonValue(){this.reasonSelect&&window.localStorage.setItem("re-last-reason",this.reasonSelect.value)}loadDefaultReasonValue(){var e;this.reasonSelect&&(this.reasonSelect.value=null!==(e=window.localStorage.getItem("re-last-reason"))&&void 0!==e?e:"")}async showReasonFixer(e){if(this.reasonEnhancementUI&&(await s.for(250),this.setUIVisible(!0),this.mode=e,this.reasonSelect)){const e=await n.metadata();this.reasonSelect.innerHTML="";for(const t of e.timeLogEntryReason.values){const e=document.createElement("option");e.value=t.serverId,e.innerText=t.value,this.reasonSelect.appendChild(e)}this.loadDefaultReasonValue()}}cancel(){this.setUIVisible(!1)}setUIVisible(e){this.reasonEnhancementUI&&(this.reasonEnhancementUI.style.display=e?"block":"none"),this.appRoot&&(e?this.appRoot.classList.add("re-blur"):this.appRoot.classList.remove("re-blur"))}async submit(){var e,t;await s.until((()=>!this.submitting)),this.submitting=!0,null===(e=this.reasonEnhancementUI)||void 0===e||e.classList.add("re-submitting"),this.mode===a.FixAll&&await this.fixAll(),this.mode===a.FixLatest&&await this.fixLatest(),this.setUIVisible(!1),null===(t=this.reasonEnhancementUI)||void 0===t||t.classList.remove("re-submitting"),this.submitting=!1}async fixAll(){if(!this.reasonSelect)return;const e=this.reasonSelect.value,s=await n.sheets();for(const a of s.employeeSheets){if(a.locked)continue;const s=await n.attendance(a.id);for(const a of s.attendance)if(a.entries.some((e=>!e.reason))){const s=t.parse(a.date);if("number"!=typeof s)continue;const o=a.entries.map((n=>{var a,o,i,r;return{startHour:((null!==(a=t.parse(n.start))&&void 0!==a?a:Date.now())-s)/36e5,lengthHours:n.end?((null!==(o=t.parse(n.end))&&void 0!==o?o:Date.now())-(null!==(i=t.parse(n.start))&&void 0!==i?i:Date.now()))/36e5:null,reasonId:n.reason||e,comment:null!==(r=n.comment)&&void 0!==r?r:null}}));await n.submit(s,o)}}}async fixLatest(){if(!this.reasonSelect)return;const e=this.reasonSelect.value;let s=null;const a=await n.sheets();for(const e of a.employeeSheets){if(e.locked)continue;const a=await n.attendance(e.id);for(const e of a.attendance){const n=t.parse(e.date);if("number"==typeof n&&(!s||n>s.date)){const a=e.entries.map((e=>{var s,a,o,i;return{startHour:((null!==(s=t.parse(e.start))&&void 0!==s?s:Date.now())-n)/36e5,lengthHours:e.end?((null!==(a=t.parse(e.end))&&void 0!==a?a:Date.now())-(null!==(o=t.parse(e.start))&&void 0!==o?o:Date.now()))/36e5:null,reasonId:e.reason,comment:null!==(i=e.comment)&&void 0!==i?i:null}}));s={date:n,entries:a}}}}if(s){for(const t of s.entries)t.reasonId=t.reasonId||e;await n.submit(s.date,s.entries)}}}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSIsInNvdXJjZXMiOlsid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL0FwaS50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9VdGlscy9EYXRlcy50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9IaUJvYi9IaUJvYi50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9VdGlscy9XYWl0LnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1JlYXNvbkVuaGFuY2VtZW50cy9SZWFzb25zRW5oYW5jZW1lbnRzLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1RpbWVsb2cvVGltZWxvZ1R5cGVzLnRzIiwid2VicGFjazovL2hpYm9iYXBpLy4vc3JjL1V0aWxzL0V2ZW50SGFuZGxlci50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9VdGlscy9NYXRlcmlhbEljb24udHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvVXRpbHMvTnVtYmVycy50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9UaW1lbG9nL1RpbWVsb2dNb2RlbC50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9UaW1lbG9nL1RpbWVsb2dVSS50cyIsIndlYnBhY2s6Ly9oaWJvYmFwaS8uL3NyYy9UaW1lbG9nL1RpbWVsb2dDc3MudHMiLCJ3ZWJwYWNrOi8vaGlib2JhcGkvLi9zcmMvUmVhc29uRW5oYW5jZW1lbnRzL1JlYXNvbkVuaGFuY2VtZW50c0Nzcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQXBpXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgeGhyKG1ldGhvZDogXCJHRVRcIiB8IFwiUE9TVFwiLCB1cmw6IHN0cmluZywgYm9keTogb2JqZWN0KVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx7IHN0YXR1czogbnVtYmVyLCBib2R5OiBhbnkgfT4ocmVzb2x2ZSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB4aHIub3BlbihtZXRob2QsIHVybCk7XHJcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcclxuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xyXG4gICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHhoci5yZXNwb25zZVRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgIT09IDIwMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuaGFzT3duUHJvcGVydHkoXCJlcnJvclwiKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gcmVzdWx0Lmhhc093blByb3BlcnR5KFwia2V5XCIpID8gcmVzdWx0LmtleSA6IHhoci5zdGF0dXMudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGBIaUJvYiBVdGlsczogRXJyb3IgJHtrZXl9IC0gJHtyZXN1bHQuZXJyb3J9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChgSGlCb2IgVXRpbHM6IEVycm9yICR7eGhyLnN0YXR1c30gLSBjaGVjayB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgZm9yIG1vcmUgaW5mb3JtYXRpb24uYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEhpQm9iIFV0aWxzOiBFcnJvciAke3hoci5zdGF0dXN9LmApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh4aHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB4aHIuc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiByZXN1bHRcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkoYm9keSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIERhdGVzXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgcGFyc2Uoc3RyOiBzdHJpbmcpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCFzdHIpIHJldHVybiBudWxsO1xyXG4gICAgICAgIGNvbnN0IHNwbGl0ID0gc3RyLnNwbGl0KFwiVFwiKTtcclxuICAgICAgICBpZiAoc3BsaXQubGVuZ3RoIDwgMikgc3BsaXQucHVzaChcIjAwOjAwXCIpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShzcGxpdC5qb2luKFwiVFwiKSkuZ2V0VGltZSgpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBmb3JtYXQodGltZTogbnVtYmVyLCBpbmNsdWRlVGltZXN0YW1wOiBib29sZWFuKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGltZSkgcmV0dXJuIFwiXCI7XHJcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRpbWUpO1xyXG4gICAgICAgIHJldHVybiBgJHtkYXRlLmdldEZ1bGxZZWFyKCl9LSR7KGRhdGUuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfS0ke2RhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfSR7aW5jbHVkZVRpbWVzdGFtcCA/IGBUJHtkYXRlLmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9OiR7ZGF0ZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9YCA6IFwiXCJ9YDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgZm9ybWF0SG91cihob3VyczogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGhvdXIgPSBNYXRoLmZsb29yKGhvdXJzICUgMjQpO1xyXG4gICAgICAgIGNvbnN0IG1pbnV0ZSA9IE1hdGgucm91bmQoKGhvdXJzIC0gaG91cikgKiA2MCk7XHJcbiAgICAgICAgcmV0dXJuIGAke2hvdXIudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIil9OiR7bWludXRlLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfWBcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0V2Vla051bWJlckZyb21EYXRlKHRpbWU6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHRpbWUpO1xyXG4gICAgICAgIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XHJcbiAgICAgICAgLy8gVGh1cnNkYXkgaW4gY3VycmVudCB3ZWVrIGRlY2lkZXMgdGhlIHllYXIuXHJcbiAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgMyAtIChkYXRlLmdldERheSgpICsgNikgJSA3KTtcclxuICAgICAgICAvLyBKYW51YXJ5IDQgaXMgYWx3YXlzIGluIHdlZWsgMS5cclxuICAgICAgICB2YXIgd2VlazEgPSBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIDAsIDQpO1xyXG4gICAgICAgIC8vIEFkanVzdCB0byBUaHVyc2RheSBpbiB3ZWVrIDEgYW5kIGNvdW50IG51bWJlciBvZiB3ZWVrcyBmcm9tIGRhdGUgdG8gd2VlazEuXHJcbiAgICAgICAgcmV0dXJuIDEgKyBNYXRoLnJvdW5kKCgoZGF0ZS5nZXRUaW1lKCkgLSB3ZWVrMS5nZXRUaW1lKCkpIC8gODY0MDAwMDBcclxuICAgICAgICAgICAgLSAzICsgKHdlZWsxLmdldERheSgpICsgNikgJSA3KSAvIDcpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBwYXJzZVRpbWVUb2hvdXJzKHRpbWU6IHN0cmluZylcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzcGxpdCA9IHRpbWUuc3BsaXQoXCI6XCIpO1xyXG4gICAgICAgIHJldHVybiBwYXJzZUludChzcGxpdFswXSkgKyBwYXJzZUludChzcGxpdFsxXSkgLyA2MDtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEFwaSB9IGZyb20gXCIuLi9VdGlscy9BcGlcIjtcclxuaW1wb3J0IHsgRGF0ZXMgfSBmcm9tIFwiLi4vVXRpbHMvRGF0ZXNcIjtcclxuaW1wb3J0IHsgSGlCb2JBdHRlbmRhbmNlLCBIaUJvYk1ldGFkYXRhLCBIaUJvYlNoZWV0cywgSGlCb2JTdWJtaXRFbnRyeSwgSGlCb2JVc2VyIH0gZnJvbSBcIi4vSGlCb2JUeXBlc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEhpQm9iXHJcbntcclxuICAgIHByaXZhdGUgc3RhdGljIHVzZXJJZDogc3RyaW5nIHwgbnVsbDtcclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgc3VibWl0KGRhdGU6IG51bWJlciwgZW50cmllczogSGlCb2JTdWJtaXRFbnRyeVtdKTogUHJvbWlzZTxib29sZWFuPlxyXG4gICAge1xyXG4gICAgICAgIGlmIChlbnRyaWVzLnNvbWUoZSA9PiAhZS5yZWFzb25JZCkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIldBUk5JTkc6IFNPTUUgRU5UUklFUyBIQVZFIE5PIFJFQVNPTiBTRVQgLSBOT1QgU1VCTUlUVElORyEhXCIsIGRhdGUsIGVudHJpZXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBlbnRyaWVzLm1hcChlID0+IHsgcmV0dXJuIHsgc3RhcnQ6IERhdGVzLmZvcm1hdChkYXRlICsgZS5zdGFydEhvdXIgKiAzNjAwICogMTAwMCwgdHJ1ZSksIGVuZDogZS5sZW5ndGhIb3VycyA/IERhdGVzLmZvcm1hdChkYXRlICsgKGUuc3RhcnRIb3VyICsgZS5sZW5ndGhIb3VycykgKiAzNjAwICogMTAwMCwgdHJ1ZSkgOiB1bmRlZmluZWQsIHJlYXNvbjogZS5yZWFzb25JZCwgY29tbWVudDogZS5jb21tZW50ID8/IHVuZGVmaW5lZCB9IH0pO1xyXG4gICAgICAgIGNvbnN0IGRhdGVTdHIgPSBEYXRlcy5mb3JtYXQoZGF0ZSwgZmFsc2UpO1xyXG4gICAgICAgIGNvbnN0IHVzZXJJZCA9IGF3YWl0IHRoaXMuZ2V0VXNlcklkKCk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQXBpLnhocihcIlBPU1RcIiwgYGh0dHBzOi8vYXBwLmhpYm9iLmNvbS9hcGkvYXR0ZW5kYW5jZS9lbXBsb3llZXMvJHt1c2VySWR9L2F0dGVuZGFuY2UvZW50cmllcz9mb3JEYXRlPSR7ZGF0ZVN0cn1gLCBkYXRhKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LnN0YXR1cyA9PT0gMjAwO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyB0aW1lbG9nUmVhc29ucygpOiBQcm9taXNlPHsgaWQ6IHN0cmluZywgbmFtZTogc3RyaW5nIH1bXT5cclxuICAgIHtcclxuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IHRoaXMubWV0YWRhdGEoKTtcclxuICAgICAgICByZXR1cm4gbWV0YWRhdGEudGltZUxvZ0VudHJ5UmVhc29uLnZhbHVlcy5tYXAodiA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGlkOiB2LnNlcnZlcklkLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogdi52YWx1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGF0dGVuZGFuY2Uoc2hlZXQ6IG51bWJlcik6IFByb21pc2U8SGlCb2JBdHRlbmRhbmNlPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFwaS54aHIoXCJHRVRcIiwgYGh0dHBzOi8vYXBwLmhpYm9iLmNvbS9hcGkvZW1wbG95ZWVzL2F0dGVuZGFuY2UvbXkvc2hlZXRzLyR7c2hlZXR9YCwge30pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuYm9keTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgc2hlZXRzKCk6IFByb21pc2U8SGlCb2JTaGVldHM+XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgdXNlcklkID0gYXdhaXQgdGhpcy5nZXRVc2VySWQoKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiR0VUXCIsIGBodHRwczovL2FwcC5oaWJvYi5jb20vYXBpL2VtcGxveWVlcy8ke3VzZXJJZH0vdGltZWxvZy9hdHRlbmRhbmNlL3NoZWV0c2AsIHt9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LmJvZHk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIG1ldGFkYXRhKCk6IFByb21pc2U8SGlCb2JNZXRhZGF0YT5cclxuICAgIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiR0VUXCIsIFwiaHR0cHM6Ly9hcHAuaGlib2IuY29tL2FwaS9jb21wYW55L21ldGFkYXRhL2xpc3RzLz9pbmNsdWRlQXJjaGl2ZWQ9dHJ1ZVwiLCB7fSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5ib2R5O1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgZ2V0VXNlcklkKCk6IFByb21pc2U8c3RyaW5nPlxyXG4gICAge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy51c2VySWQgIT09IFwic3RyaW5nXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVzZXJJbmZvKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnVzZXJJZCA/PyBcIlwiO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyB1c2VySW5mbygpOiBQcm9taXNlPEhpQm9iVXNlcj5cclxuICAgIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBcGkueGhyKFwiR0VUXCIsIFwiaHR0cHM6Ly9hcHAuaGlib2IuY29tL2FwaS91c2VyXCIsIHt9KTtcclxuICAgICAgICB0aGlzLnVzZXJJZCA9IChyZXN1bHQuYm9keSBhcyBIaUJvYlVzZXIpLmlkO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuYm9keTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBXYWl0XHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgZm9yKG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+XHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KHJlc29sdmUgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoKSwgbXMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyB1bnRpbChkZWxlZ2F0ZTogKCkgPT4gYm9vbGVhbilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4ocmVzb2x2ZSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgaGFuZGxlID0gd2luZG93LnNldEludGVydmFsKCgpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChkZWxlZ2F0ZSgpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChoYW5kbGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAxKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEhpQm9iIH0gZnJvbSBcIi4uL0hpQm9iL0hpQm9iXCI7XHJcbmltcG9ydCB7IEhpQm9iU3VibWl0RW50cnkgfSBmcm9tIFwiLi4vSGlCb2IvSGlCb2JUeXBlc1wiO1xyXG5pbXBvcnQgeyBEYXRlcyB9IGZyb20gXCIuLi9VdGlscy9EYXRlc1wiO1xyXG5pbXBvcnQgeyBXYWl0IH0gZnJvbSBcIi4uL1V0aWxzL1dhaXRcIjtcclxuaW1wb3J0IHsgUmVhc29uRW5oYW5jZW1lbnRDc3MgfSBmcm9tIFwiLi9SZWFzb25FbmhhbmNlbWVudHNDc3NcIjtcclxuXHJcbmV4cG9ydCBlbnVtIFJlYXNvbkVuaGFuY2VtZW50TW9kZVxyXG57XHJcbiAgICBGaXhBbGwsXHJcbiAgICBGaXhMYXRlc3QsXHJcbn1cclxuZXhwb3J0IGNsYXNzIFJlYXNvbkVuaGFuY2VtZW50c1xyXG57XHJcbiAgICBwcml2YXRlIHJlYXNvbkVuaGFuY2VtZW50VUk/OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByaXZhdGUgcmVhc29uU2VsZWN0PzogSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGFwcFJvb3Q/OiBFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBzdWJtaXR0aW5nID0gZmFsc2U7XHJcblxyXG4gICAgcHJpdmF0ZSBtb2RlPzogUmVhc29uRW5oYW5jZW1lbnRNb2RlO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVVSSgpO1xyXG4gICAgICAgIHRoaXMuY2xvY2tJbkJ1dHRvbkZpbmRlcigpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjcmVhdGVVSSgpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgICAgICAgc3R5bGUuaW5uZXJIVE1MID0gUmVhc29uRW5oYW5jZW1lbnRDc3M7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQoc3R5bGUpO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuY2xhc3NOYW1lID0gXCJyZS1yZWFzb24tdWlcIjtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5yZWFzb25FbmhhbmNlbWVudFVJKTtcclxuXHJcbiAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGxhYmVsLmlubmVyVGV4dCA9IFwiQ2hvb3NlIERlZmF1bHQgUmVhc29uXCI7XHJcbiAgICAgICAgbGFiZWwuY2xhc3NOYW1lID0gXCJyZS1sYWJlbFwiO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChsYWJlbCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVhc29uU2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcclxuICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC5jbGFzc05hbWUgPSBcInJlLXJlYXNvbi1zZWxlY3RcIjtcclxuICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHRoaXMuc2F2ZURlZmF1bHRSZWFzb25WYWx1ZSgpO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZCh0aGlzLnJlYXNvblNlbGVjdCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIikpO1xyXG5cclxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5jbGFzc05hbWUgPSBcInJlLWNhbmNlbC1idG4gcmUtYnRuIHJlLXNlY29uZGFyeVwiO1xyXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5pbm5lclRleHQgPSBcIkNhbmNlbFwiXHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNhbmNlbCgpO1xyXG4gICAgICAgIHRoaXMucmVhc29uRW5oYW5jZW1lbnRVSS5hcHBlbmRDaGlsZChjYW5jZWxCdXR0b24pO1xyXG5cclxuICAgICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5jbGFzc05hbWUgPSBcInJlLXN1Ym1pdC1idG4gcmUtYnRuIHJlLXByaW1hcnlcIjtcclxuICAgICAgICBzdWJtaXRCdXR0b24uaW5uZXJUZXh0ID0gXCJTdWJtaXRcIlxyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5zdWJtaXQoKTtcclxuICAgICAgICB0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkuYXBwZW5kQ2hpbGQoc3VibWl0QnV0dG9uKTtcclxuXHJcblxyXG4gICAgICAgIGNvbnN0IHN1Ym1pdHRpbmdUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBzdWJtaXR0aW5nVGV4dC5jbGFzc05hbWUgPSBcInJlLXN1Ym1pdHRpbmctdGV4dFwiO1xyXG4gICAgICAgIHN1Ym1pdHRpbmdUZXh0LmlubmVyVGV4dCA9IFwiU3VibWl0dGluZy4uLlwiXHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLmFwcGVuZENoaWxkKHN1Ym1pdHRpbmdUZXh0KTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgY2xvY2tJbkJ1dHRvbkZpbmRlcigpXHJcbiAgICB7XHJcbiAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2xvY2tJbkJ1dHRvbnMgPSB0aGlzLmZpbmRVbmVuaGFuY2VkQnV0dG9ucyhcImItYnV0dG9uLnB1bmNoLWNsb2NrLWJ1dHRvbiwgYi1idXR0b24udGltZS13aWRnZXQtY2xvY2staW4tYnRuLCBiLWJ1dHRvbi50aW1lLXdpZGdldC1jbG9jay1vdXQtYnRuXCIpO1xyXG4gICAgICAgICAgICBjbG9ja0luQnV0dG9ucy5mb3JFYWNoKGUgPT4gdGhpcy5lbmhhbmNlQ2xvY2tJbkJ1dHRvbihlLCBSZWFzb25FbmhhbmNlbWVudE1vZGUuRml4TGF0ZXN0KSk7XHJcbiAgICAgICAgICAgIHZhciBxdWlja0ZpeEJ1dHRvbiA9IHRoaXMuZmluZFVuZW5oYW5jZWRCdXR0b25zKFwiYi1idXR0b24ucXVpY2stZml4LWFwcGx5LWJ1dHRvblwiKTtcclxuICAgICAgICAgICAgcXVpY2tGaXhCdXR0b24uZm9yRWFjaChlID0+IHRoaXMuZW5oYW5jZUNsb2NrSW5CdXR0b24oZSwgUmVhc29uRW5oYW5jZW1lbnRNb2RlLkZpeEFsbCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmFwcFJvb3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwUm9vdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJhcHAtcm9vdFwiKSA/PyB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgV2FpdC5mb3IoMTApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgZmluZFVuZW5oYW5jZWRCdXR0b25zKHNlbGVjdG9yOiBzdHJpbmcpOiBFbGVtZW50W11cclxuICAgIHtcclxuICAgICAgICB2YXIgYXJyID0gW10gYXMgRWxlbWVudFtdO1xyXG4gICAgICAgIHZhciBxdWVyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xyXG4gICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBxdWVyeSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJyZS1lbmhhbmNlZFwiKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicmUtZW5oYW5jZWRcIik7XHJcbiAgICAgICAgICAgICAgICBhcnIucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZW5oYW5jZUNsb2NrSW5CdXR0b24oYnV0dG9uOiBFbGVtZW50LCBtb2RlOiBSZWFzb25FbmhhbmNlbWVudE1vZGUpXHJcbiAgICB7XHJcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLnNob3dSZWFzb25GaXhlcihtb2RlKSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHNhdmVEZWZhdWx0UmVhc29uVmFsdWUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFzb25TZWxlY3QpIHJldHVybjtcclxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJyZS1sYXN0LXJlYXNvblwiLCB0aGlzLnJlYXNvblNlbGVjdC52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGxvYWREZWZhdWx0UmVhc29uVmFsdWUoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFzb25TZWxlY3QpIHJldHVybjtcclxuICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC52YWx1ZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInJlLWxhc3QtcmVhc29uXCIpID8/IFwiXCI7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIHNob3dSZWFzb25GaXhlcihtb2RlOiBSZWFzb25FbmhhbmNlbWVudE1vZGUpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvbkVuaGFuY2VtZW50VUkpIHJldHVybjtcclxuICAgICAgICBhd2FpdCBXYWl0LmZvcigyNTApO1xyXG4gICAgICAgIHRoaXMuc2V0VUlWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XHJcbiAgICAgICAgaWYgKHRoaXMucmVhc29uU2VsZWN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgcmVhc29ucyA9IGF3YWl0IEhpQm9iLm1ldGFkYXRhKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVhc29uU2VsZWN0LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVhc29uIG9mIHJlYXNvbnMudGltZUxvZ0VudHJ5UmVhc29uLnZhbHVlcylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IHJlYXNvbi5zZXJ2ZXJJZDtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi5pbm5lclRleHQgPSByZWFzb24udmFsdWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlYXNvblNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubG9hZERlZmF1bHRSZWFzb25WYWx1ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgY2FuY2VsKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLnNldFVJVmlzaWJsZShmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHNldFVJVmlzaWJsZSh2YWx1ZTogYm9vbGVhbilcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5yZWFzb25FbmhhbmNlbWVudFVJKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgICAgICAgIGVsc2UgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuYXBwUm9vdClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHRoaXMuYXBwUm9vdC5jbGFzc0xpc3QuYWRkKFwicmUtYmx1clwiKTtcclxuICAgICAgICAgICAgZWxzZSB0aGlzLmFwcFJvb3QuY2xhc3NMaXN0LnJlbW92ZShcInJlLWJsdXJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBzdWJtaXQoKVxyXG4gICAge1xyXG4gICAgICAgIGF3YWl0IFdhaXQudW50aWwoKCkgPT4gIXRoaXMuc3VibWl0dGluZyk7XHJcblxyXG4gICAgICAgIHRoaXMuc3VibWl0dGluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJPy5jbGFzc0xpc3QuYWRkKFwicmUtc3VibWl0dGluZ1wiKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gUmVhc29uRW5oYW5jZW1lbnRNb2RlLkZpeEFsbCkgYXdhaXQgdGhpcy5maXhBbGwoKTtcclxuICAgICAgICBpZiAodGhpcy5tb2RlID09PSBSZWFzb25FbmhhbmNlbWVudE1vZGUuRml4TGF0ZXN0KSBhd2FpdCB0aGlzLmZpeExhdGVzdCgpO1xyXG5cclxuICAgICAgICB0aGlzLnNldFVJVmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5yZWFzb25FbmhhbmNlbWVudFVJPy5jbGFzc0xpc3QucmVtb3ZlKFwicmUtc3VibWl0dGluZ1wiKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdWJtaXR0aW5nID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGZpeEFsbCgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlYXNvblNlbGVjdCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHJlYXNvbiA9IHRoaXMucmVhc29uU2VsZWN0LnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IHNoZWV0cyA9IGF3YWl0IEhpQm9iLnNoZWV0cygpO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2hlZXQgb2Ygc2hlZXRzLmVtcGxveWVlU2hlZXRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHNoZWV0LmxvY2tlZCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGF0dGVuZGFuY2UgPSBhd2FpdCBIaUJvYi5hdHRlbmRhbmNlKHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIGF0dGVuZGFuY2UuYXR0ZW5kYW5jZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGUuZW50cmllcy5zb21lKGUgPT4gIWUucmVhc29uKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lID0gRGF0ZXMucGFyc2UoZGF0ZS5kYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRpbWUgIT09IFwibnVtYmVyXCIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudHJpZXM6IEhpQm9iU3VibWl0RW50cnlbXSA9IGRhdGUuZW50cmllcy5tYXAoZSA9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0SG91cjogKChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSAtIHRpbWUpIC8gKDM2MDAgKiAxMDAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aEhvdXJzOiBlLmVuZCA/ICgoRGF0ZXMucGFyc2UoZS5lbmQpID8/IERhdGUubm93KCkpIC0gKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpKSAvICgzNjAwICogMTAwMCkgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uSWQ6IGUucmVhc29uIHx8IHJlYXNvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGUuY29tbWVudCA/PyBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgSGlCb2Iuc3VibWl0KHRpbWUsIGVudHJpZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhc3luYyBmaXhMYXRlc3QoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWFzb25TZWxlY3QpIHJldHVybjtcclxuICAgICAgICBjb25zdCByZWFzb24gPSB0aGlzLnJlYXNvblNlbGVjdC52YWx1ZTtcclxuICAgICAgICBsZXQgbGF0ZXN0OiB7IGRhdGU6IG51bWJlciwgZW50cmllczogSGlCb2JTdWJtaXRFbnRyeVtdIH0gfCBudWxsID0gbnVsbDtcclxuICAgICAgICBjb25zdCBzaGVldHMgPSBhd2FpdCBIaUJvYi5zaGVldHMoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHNoZWV0cy5lbXBsb3llZVNoZWV0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzaGVldC5sb2NrZWQpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBjb25zdCBhdHRlbmRhbmNlID0gYXdhaXQgSGlCb2IuYXR0ZW5kYW5jZShzaGVldC5pZCk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZGF0ZSBvZiBhdHRlbmRhbmNlLmF0dGVuZGFuY2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBEYXRlcy5wYXJzZShkYXRlLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aW1lICE9PSBcIm51bWJlclwiKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGlmICghbGF0ZXN0IHx8IHRpbWUgPiBsYXRlc3QuZGF0ZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRyaWVzOiBIaUJvYlN1Ym1pdEVudHJ5W10gPSBkYXRlLmVudHJpZXMubWFwKGUgPT5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydEhvdXI6ICgoRGF0ZXMucGFyc2UoZS5zdGFydCkgPz8gRGF0ZS5ub3coKSkgLSB0aW1lKSAvICgzNjAwICogMTAwMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGhIb3VyczogZS5lbmQgPyAoKERhdGVzLnBhcnNlKGUuZW5kKSA/PyBEYXRlLm5vdygpKSAtIChEYXRlcy5wYXJzZShlLnN0YXJ0KSA/PyBEYXRlLm5vdygpKSkgLyAoMzYwMCAqIDEwMDApIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbklkOiBlLnJlYXNvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnQ6IGUuY29tbWVudCA/PyBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF0ZXN0ID0geyBkYXRlOiB0aW1lLCBlbnRyaWVzOiBlbnRyaWVzIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxhdGVzdClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgbGF0ZXN0LmVudHJpZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVudHJ5LnJlYXNvbklkID0gZW50cnkucmVhc29uSWQgfHwgcmVhc29uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGF3YWl0IEhpQm9iLnN1Ym1pdChsYXRlc3QuZGF0ZSwgbGF0ZXN0LmVudHJpZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ0VudHJ5XHJcbntcclxuICAgIHN0YXJ0SG91cjogbnVtYmVyLFxyXG4gICAgbGVuZ3RoSG91cnM6IG51bWJlcixcclxuICAgIHJlYXNvbklkOiBzdHJpbmcsXHJcbiAgICBjb21tZW50OiBzdHJpbmcgfCBudWxsLFxyXG4gICAgaGFzQ29tbWVudDogYm9vbGVhblxyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ0RhdGVcclxue1xyXG4gICAgZGlydHk6IGJvb2xlYW4sXHJcbiAgICBkYXRlOiBudW1iZXJcclxuICAgIGVudHJpZXM6IFRpbWVsb2dFbnRyeVtdLFxyXG4gICAgd2Vla2VuZDogYm9vbGVhbixcclxuICAgIGZhdm9yaXRlZDogYm9vbGVhbixcclxuICAgIGRhdGVEZXNjcmlwdGlvbj86IHN0cmluZ1xyXG59XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGltZWxvZ1NoZWV0XHJcbntcclxuICAgIGlkOiBudW1iZXIsXHJcbiAgICBzdGF0dXM6IHN0cmluZyxcclxuICAgIHN0YXJ0OiBudW1iZXIsXHJcbiAgICBlbmQ6IG51bWJlclxyXG4gICAgZGF0ZXM6IFRpbWVsb2dEYXRlW10sXHJcbiAgICBsb2NrZWQ6IGJvb2xlYW4sXHJcbiAgICBob3Vyc1BlckRheTogbnVtYmVyXHJcbn1cclxuZXhwb3J0IGVudW0gVGltZWxvZ1NhdmVTdGF0dXNcclxue1xyXG4gICAgV2FpdGluZyxcclxuICAgIFNhdmluZyxcclxuICAgIFNhdmVkLFxyXG4gICAgRXJyb3JcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVMb2dGYXZvcml0ZWREYXRlXHJcbntcclxuICAgIGRhdGU6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVsb2dVSURhdGUgXHJcbntcclxuICAgIGRhdGU6IFRpbWVsb2dEYXRlLFxyXG4gICAgcGFyZW50OiBIVE1MRGl2RWxlbWVudCxcclxuICAgIHRpdGxlOiBIVE1MU3BhbkVsZW1lbnQsXHJcbiAgICBlbnRyaWVzOiBUaW1lbG9nVUlFbnRyeUNvbnRhaW5lcltdLFxyXG4gICAgc3VtSG91cnM/OiBIVE1MU3BhbkVsZW1lbnQsXHJcbiAgICBzdGFyQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCxcclxuICAgIHBhc3RlQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCxcclxuICAgIHdlZWtlbmREZXNjcmlwdGlvbjogSFRNTERpdkVsZW1lbnRcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVsb2dVSUVudHJ5Q29udGFpbmVyXHJcbntcclxuICAgIGVudHJ5OiBUaW1lbG9nRW50cnksXHJcbiAgICBwYXJlbnQ6IEhUTUxEaXZFbGVtZW50LFxyXG4gICAgc3RhcnRIb3VyOiBIVE1MSW5wdXRFbGVtZW50LFxyXG4gICAgbGVuZ3RoOiBIVE1MSW5wdXRFbGVtZW50LFxyXG4gICAgcmVhc29uOiBIVE1MU2VsZWN0RWxlbWVudCxcclxuICAgIGVuZEhvdXI6IEhUTUxJbnB1dEVsZW1lbnQsXHJcbiAgICBjb21tZW50OiBIVE1MSW5wdXRFbGVtZW50LFxyXG4gICAgY29tbWVudEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQsXHJcbiAgICBub1JlYXNvbldhcm5pbmc6IEhUTUxEaXZFbGVtZW50XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBUaW1lbG9nVUlXZWVrU3VtXHJcbntcclxuICAgIGRhdGVzOiBUaW1lbG9nVUlEYXRlW10sXHJcbiAgICBlbGVtZW50OiBIVE1MRGl2RWxlbWVudFxyXG59IiwiZXhwb3J0IGNsYXNzIEV2ZW50SGFuZGxlcjxUPlxyXG57XHJcbiAgICBwcml2YXRlIGhhbmRsZXJzOiB7IGhhbmRsZXI6ICh2YWw6IFQpID0+IHZvaWQsIGNvbnRleHQ6IGFueSB9W10gPSBbXTtcclxuICAgIHB1YmxpYyBvbihoYW5kbGVyOiAodmFsOiBUKSA9PiB2b2lkLCBjb250ZXh0OiBhbnkpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycy5wdXNoKHsgaGFuZGxlciwgY29udGV4dCB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvZmYoaGFuZGxlcjogKHZhbDogVCkgPT4gdm9pZCwgY29udGV4dDogYW55KVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmZpbHRlcihoID0+IGguaGFuZGxlciAhPT0gaGFuZGxlciB8fCBoLmNvbnRleHQgIT09IGNvbnRleHQpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGZpcmUodmFsOiBUKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcnMuZm9yRWFjaChoID0+IGguaGFuZGxlci5jYWxsKGguY29udGV4dCwgdmFsKSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgYWJzdHJhY3QgY2xhc3MgTWF0ZXJpYWxJY29uXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgaW5pdGlhbGl6ZSgpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xyXG4gICAgICAgIGxpbmsuaHJlZiA9IFwiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1NYXRlcmlhbCtTeW1ib2xzK091dGxpbmVkOm9wc3osd2dodCxGSUxMLEdSQURAMjAuLjQ4LDEwMC4uNzAwLDAuLjEsLTUwLi4yMDBcIjtcclxuICAgICAgICBsaW5rLnJlbCA9IFwic3R5bGVzaGVldFwiO1xyXG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluayk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGdldChpY29uOiBzdHJpbmcsIGZpbGw6IGJvb2xlYW4gPSBmYWxzZSlcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSBgbWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZGA7XHJcbiAgICAgICAgc3Bhbi5pbm5lclRleHQgPSBpY29uO1xyXG4gICAgICAgIHNwYW4uc3R5bGUudmVydGljYWxBbGlnbiA9IFwibWlkZGxlXCI7XHJcbiAgICAgICAgc3Bhbi5zdHlsZS5mb250U2l6ZSA9IFwiMS41ZW1cIjtcclxuICAgICAgICBzcGFuLnN0eWxlLmZvbnRWYXJpYXRpb25TZXR0aW5ncyA9IGAnRklMTCcgJHtmaWxsID8gMSA6IDB9YDtcclxuICAgICAgICByZXR1cm4gc3BhbjtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBOdW1iZXJzXHJcbntcclxuICAgIHB1YmxpYyBzdGF0aWMgcm91bmQobnVtOiBudW1iZXIsIGRlY2ltYWxzOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQobnVtICogKDEwICoqIGRlY2ltYWxzKSkgLyAoMTAgKiogZGVjaW1hbHMpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBmbG9vcihudW06IG51bWJlciwgZGVjaW1hbHM6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihudW0gKiAoMTAgKiogZGVjaW1hbHMpKSAvICgxMCAqKiBkZWNpbWFscyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGNlaWwobnVtOiBudW1iZXIsIGRlY2ltYWxzOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguY2VpbChudW0gKiAoMTAgKiogZGVjaW1hbHMpKSAvICgxMCAqKiBkZWNpbWFscyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBzdW0oYXJyOiBudW1iZXJbXSlcclxuICAgIHtcclxuICAgICAgICBsZXQgdmFsID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgdmFsICs9IGFycltpXTtcclxuICAgICAgICByZXR1cm4gdmFsO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgSGlCb2IgfSBmcm9tIFwiLi4vSGlCb2IvSGlCb2JcIjtcclxuaW1wb3J0IHsgSGlCb2JSZWFzb24gfSBmcm9tIFwiLi4vSGlCb2IvSGlCb2JUeXBlc1wiO1xyXG5pbXBvcnQgeyBEYXRlcyB9IGZyb20gXCIuLi9VdGlscy9EYXRlc1wiO1xyXG5pbXBvcnQgeyBFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi4vVXRpbHMvRXZlbnRIYW5kbGVyXCI7XHJcbmltcG9ydCB7IE51bWJlcnMgfSBmcm9tIFwiLi4vVXRpbHMvTnVtYmVyc1wiO1xyXG5pbXBvcnQgeyBXYWl0IH0gZnJvbSBcIi4uL1V0aWxzL1dhaXRcIjtcclxuaW1wb3J0IHsgVGltZWxvZ1NoZWV0LCBUaW1lbG9nRGF0ZSwgVGltZWxvZ1NhdmVTdGF0dXMsIFRpbWVMb2dGYXZvcml0ZWREYXRlIH0gZnJvbSBcIi4vVGltZWxvZ1R5cGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVGltZWxvZ01vZGVsXHJcbntcclxuICAgIHB1YmxpYyBzaGVldHM6IFRpbWVsb2dTaGVldFtdID0gW107XHJcbiAgICBwdWJsaWMgb25EYXRlVXBkYXRlZCA9IG5ldyBFdmVudEhhbmRsZXI8eyBzaGVldDogVGltZWxvZ1NoZWV0LCBkYXRlOiBUaW1lbG9nRGF0ZSB9PigpO1xyXG4gICAgcHVibGljIG9uUmVhc29uc1VwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPEhpQm9iUmVhc29uW10+KCk7XHJcbiAgICBwdWJsaWMgb25TaGVldFVwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPFRpbWVsb2dTaGVldD4oKTtcclxuICAgIHB1YmxpYyBvblNoZWV0c1VwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPFRpbWVsb2dTaGVldFtdPigpO1xyXG4gICAgcHVibGljIG9uU2F2ZVN0YXR1c1VwZGF0ZWQgPSBuZXcgRXZlbnRIYW5kbGVyPFRpbWVsb2dTYXZlU3RhdHVzPigpO1xyXG4gICAgcHJpdmF0ZSBzYXZlSGFuZGxlOiBudW1iZXIgPSAtMTtcclxuICAgIHByaXZhdGUgc2F2aW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGNhbGN1bGF0aW5nRmxleDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBmZXRjaGluZ1NoZWV0cyA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSByZWFzb25zOiBIaUJvYlJlYXNvbltdID0gW107XHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKVxyXG4gICAge1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGluaXRpYWxpemUoKVxyXG4gICAge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hTaGVldHMoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmZldGNoUmVhc29ucygpO1xyXG4gICAgICAgIHRoaXMub25TYXZlU3RhdHVzVXBkYXRlZC5maXJlKFRpbWVsb2dTYXZlU3RhdHVzLlNhdmVkKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBmZXRjaFNoZWV0cygpXHJcbiAgICB7XHJcbiAgICAgICAgYXdhaXQgV2FpdC51bnRpbCgoKSA9PiAhdGhpcy5mZXRjaGluZ1NoZWV0cyk7XHJcbiAgICAgICAgdGhpcy5mZXRjaGluZ1NoZWV0cyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zaGVldHMgPSBbXTtcclxuICAgICAgICBjb25zdCBzaGVldHMgPSBhd2FpdCBIaUJvYi5zaGVldHMoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNoZWV0IG9mIHNoZWV0cy5lbXBsb3llZVNoZWV0cylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZXMucGFyc2Uoc2hlZXQuY3ljbGVTdGFydERhdGUpID8/IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IERhdGVzLnBhcnNlKHNoZWV0LmN5Y2xlRW5kRGF0ZSkgPz8gMDtcclxuICAgICAgICAgICAgY29uc3QgbmV3U2hlZXQgPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogc2hlZXQuaWQsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHNoZWV0LnN0YXR1cyxcclxuICAgICAgICAgICAgICAgIHN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgZW5kLFxyXG4gICAgICAgICAgICAgICAgZGF0ZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgbG9ja2VkOiBzaGVldC5sb2NrZWQsXHJcbiAgICAgICAgICAgICAgICBob3Vyc1BlckRheTogMFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0cy5wdXNoKG5ld1NoZWV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaGVldHMuc29ydCgoYSwgYikgPT4gYi5zdGFydCAtIGEuc3RhcnQpO1xyXG4gICAgICAgIHRoaXMub25TaGVldHNVcGRhdGVkLmZpcmUodGhpcy5zaGVldHMpO1xyXG4gICAgICAgIHRoaXMuZmV0Y2hpbmdTaGVldHMgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBmZXRjaFJlYXNvbnMoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMucmVhc29ucyA9IChhd2FpdCBIaUJvYi5tZXRhZGF0YSgpKS50aW1lTG9nRW50cnlSZWFzb24udmFsdWVzO1xyXG4gICAgICAgIHRoaXMub25SZWFzb25zVXBkYXRlZC5maXJlKHRoaXMucmVhc29ucyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZmV0Y2hTaGVldChpZDogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuaWQgPT09IGlkKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgYXR0ZW5kYW5jZSA9IGF3YWl0IEhpQm9iLmF0dGVuZGFuY2UoaWQpO1xyXG4gICAgICAgIHNoZWV0LmhvdXJzUGVyRGF5ID0gYXR0ZW5kYW5jZS5zdW1tYXJ5LnBvdGVudGlhbFdvcmtpbmdIb3VycyAvIGF0dGVuZGFuY2Uuc3VtbWFyeS5wb3RlbnRpYWxXb3JraW5nRGF5cztcclxuICAgICAgICBzaGVldC5kYXRlcyA9IFtdO1xyXG4gICAgICAgIGZvciAoY29uc3QgZGF0ZSBvZiBhdHRlbmRhbmNlLmF0dGVuZGFuY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCB0aW1lID0gRGF0ZXMucGFyc2UoZGF0ZS5kYXRlKSA/PyBEYXRlLm5vdygpXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlOiBUaW1lbG9nRGF0ZSA9IHtcclxuICAgICAgICAgICAgICAgIGRpcnR5OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGRhdGU6IHRpbWUsXHJcbiAgICAgICAgICAgICAgICB3ZWVrZW5kOiBkYXRlLnN0YXR1cyA9PT0gXCJXZWVrZW5kRXZlbnRcIixcclxuICAgICAgICAgICAgICAgIGZhdm9yaXRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkYXRlRGVzY3JpcHRpb246IGRhdGUubm90ZS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgIGVudHJpZXM6IGRhdGUuZW50cmllcy5tYXAoZSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0SG91cjogTnVtYmVycy5mbG9vcigoKERhdGVzLnBhcnNlKGUuc3RhcnQpID8/IERhdGUubm93KCkpIC0gKERhdGVzLnBhcnNlKGRhdGUuZGF0ZSkgPz8gRGF0ZS5ub3coKSkpIC8gKDM2MDAgKiAxMDAwKSwgMiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aEhvdXJzOiBOdW1iZXJzLmNlaWwoKChEYXRlcy5wYXJzZShlLmVuZCkgPz8gRGF0ZS5ub3coKSkgLSAoRGF0ZXMucGFyc2UoZS5zdGFydCkgPz8gRGF0ZS5ub3coKSkpIC8gKDM2MDAgKiAxMDAwKSwgMiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbklkOiBlLnJlYXNvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDogZS5jb21tZW50ID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NvbW1lbnQ6ICEhZS5jb21tZW50XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pLnNvcnQoKGEsIGIpID0+IGEuc3RhcnRIb3VyIC0gYi5zdGFydEhvdXIpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHNoZWV0LmRhdGVzLnB1c2godmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzaGVldC5kYXRlcy5zb3J0KChhLCBiKSA9PiBiLmRhdGUgLSBhLmRhdGUpO1xyXG4gICAgICAgIGNvbnN0IGZhdm9yaXRlID0gYXdhaXQgdGhpcy5nZXRGYXZvcml0ZWREYXRlKCk7XHJcbiAgICAgICAgaWYgKGZhdm9yaXRlICYmIGZhdm9yaXRlLnNoZWV0ID09PSBzaGVldClcclxuICAgICAgICAgICAgZmF2b3JpdGUuZGF0ZS5mYXZvcml0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMub25TaGVldFVwZGF0ZWQuZmlyZShzaGVldCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNoYW5nZVN0YXJ0SG91cihkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlciwgaG91cjogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5zdGFydEhvdXIgPSBob3VyO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBjaGFuZ2VMZW5ndGhIb3VycyhkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gZGF0ZSkpO1xyXG4gICAgICAgIGlmICghc2hlZXQpIHJldHVybjtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLmxlbmd0aEhvdXJzID0gbGVuZ3RoO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBjaGFuZ2VSZWFzb24oZGF0ZTogVGltZWxvZ0RhdGUsIGluZGV4OiBudW1iZXIsIHJlYXNvbjogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5yZWFzb25JZCA9IHJlYXNvbjtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY2hhbmdlQ29tbWVudChkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlciwgY29tbWVudDogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5jb21tZW50ID0gY29tbWVudDtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLmhhc0NvbW1lbnQgPSB0cnVlO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyB0b2dnbGVDb21tZW50KGRhdGU6IFRpbWVsb2dEYXRlLCBpbmRleDogbnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuZGF0ZXMuc29tZShkID0+IGQgPT09IGRhdGUpKTtcclxuICAgICAgICBpZiAoIXNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzW2luZGV4XS5oYXNDb21tZW50ID0gIWRhdGUuZW50cmllc1tpbmRleF0uaGFzQ29tbWVudDtcclxuICAgICAgICBkYXRlLmVudHJpZXNbaW5kZXhdLmNvbW1lbnQgPSBkYXRlLmVudHJpZXNbaW5kZXhdLmhhc0NvbW1lbnQgPyBcIlwiIDogbnVsbDtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgc2V0RmF2b3JpdGVkRGF0ZShkYXRlOiBUaW1lbG9nRGF0ZSlcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBvbGRGYXZvcml0ZSA9IGF3YWl0IHRoaXMuZ2V0RmF2b3JpdGVkRGF0ZSgpO1xyXG4gICAgICAgIGlmIChvbGRGYXZvcml0ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG9sZEZhdm9yaXRlLmRhdGUuZmF2b3JpdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKG9sZEZhdm9yaXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRhdGUuZmF2b3JpdGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0OiBzaGVldCwgZGF0ZTogZGF0ZSB9KTtcclxuXHJcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGxfZmF2b3JpdGVcIiwgSlNPTi5zdHJpbmdpZnkoeyBkYXRlOiBEYXRlcy5mb3JtYXQoZGF0ZS5kYXRlLCBmYWxzZSkgfSBhcyBUaW1lTG9nRmF2b3JpdGVkRGF0ZSkpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGdldEZhdm9yaXRlZERhdGUoKTogUHJvbWlzZTx7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGRhdGU6IFRpbWVsb2dEYXRlIH0gfCBudWxsPlxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHN0ciA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRsX2Zhdm9yaXRlXCIpO1xyXG4gICAgICAgIGlmICghc3RyKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBjb25zdCBmYXZvcml0ZTogVGltZUxvZ0Zhdm9yaXRlZERhdGUgPSBKU09OLnBhcnNlKHN0cik7XHJcbiAgICAgICAgY29uc3QgdGltZSA9IERhdGVzLnBhcnNlKGZhdm9yaXRlLmRhdGUpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGltZSA9PT0gXCJudW1iZXJcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHMuZmluZChzID0+IHMuc3RhcnQgPD0gdGltZSAmJiBzLmVuZCA+PSB0aW1lKTtcclxuICAgICAgICAgICAgaWYgKHNoZWV0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hlZXQuZGF0ZXMubGVuZ3RoIDwgMSkgYXdhaXQgdGhpcy5mZXRjaFNoZWV0KHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBzaGVldC5kYXRlcy5maW5kKGQgPT4gZC5kYXRlID09PSB0aW1lKTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHNoZWV0OiBzaGVldCwgZGF0ZTogZGF0ZSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZWxldGVFbnRyeShkYXRlOiBUaW1lbG9nRGF0ZSwgaW5kZXg6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGRhdGUuZW50cmllcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIGRhdGUuZGlydHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucXVldWVTYXZlKCk7XHJcbiAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkLmZpcmUoeyBzaGVldCwgZGF0ZSB9KTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYXN5bmMgZmluZExhc3RFbnRyeShvcmlnaW5hbERhdGU6IFRpbWVsb2dEYXRlKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsU2hlZXQgPSB0aGlzLnNoZWV0cy5maW5kKHMgPT4gcy5kYXRlcy5zb21lKGQgPT4gZCA9PT0gb3JpZ2luYWxEYXRlKSk7XHJcbiAgICAgICAgaWYgKCFvcmlnaW5hbFNoZWV0KSByZXR1cm47XHJcbiAgICAgICAgbGV0IGRhdGVJbmRleCA9IG9yaWdpbmFsU2hlZXQuZGF0ZXMuaW5kZXhPZihvcmlnaW5hbERhdGUpO1xyXG4gICAgICAgIGxldCBlbnRyeUluZGV4ID0gLTE7XHJcbiAgICAgICAgZm9yIChsZXQgc2hlZXRJbmRleCA9IHRoaXMuc2hlZXRzLmluZGV4T2Yob3JpZ2luYWxTaGVldCk7IHNoZWV0SW5kZXggPCB0aGlzLnNoZWV0cy5sZW5ndGg7IHNoZWV0SW5kZXgrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldHNbc2hlZXRJbmRleF07XHJcbiAgICAgICAgICAgIGlmIChzaGVldC5kYXRlcy5sZW5ndGggPCAxKSBhd2FpdCB0aGlzLmZldGNoU2hlZXQoc2hlZXQuaWQpO1xyXG4gICAgICAgICAgICBmb3IgKDsgZGF0ZUluZGV4IDwgc2hlZXQuZGF0ZXMubGVuZ3RoOyBkYXRlSW5kZXgrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IHNoZWV0LmRhdGVzW2RhdGVJbmRleF07XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZS5lbnRyaWVzLmxlbmd0aCA+IDApIHJldHVybiBlbnRyeUluZGV4IDwgMCA/IGRhdGUuZW50cmllc1tkYXRlLmVudHJpZXMubGVuZ3RoIC0gMV0gOiBkYXRlLmVudHJpZXNbZW50cnlJbmRleF07XHJcbiAgICAgICAgICAgICAgICBlbnRyeUluZGV4ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkYXRlSW5kZXggPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBuZXdFbnRyeShkYXRlOiBUaW1lbG9nRGF0ZSlcclxuICAgIHtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGxhc3QgPSBhd2FpdCB0aGlzLmZpbmRMYXN0RW50cnkoZGF0ZSk7XHJcbiAgICAgICAgbGV0IHN0YXJ0SG91ciA9IDguNTtcclxuICAgICAgICBsZXQgbGVuZ3RoSG91cnMgPSBOdW1iZXJzLnJvdW5kKHNoZWV0LmhvdXJzUGVyRGF5LCAyKTtcclxuICAgICAgICBsZXQgcmVhc29uSWQgPSBcIlwiO1xyXG4gICAgICAgIGlmIChsYXN0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGRhdGUuZW50cmllcy5pbmNsdWRlcyhsYXN0KSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3RhcnRIb3VyID0gbGFzdC5zdGFydEhvdXIgKyBsYXN0Lmxlbmd0aEhvdXJzO1xyXG4gICAgICAgICAgICAgICAgbGVuZ3RoSG91cnMgPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlYXNvbklkID0gbGFzdC5yZWFzb25JZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGF0ZS5lbnRyaWVzLnB1c2goe1xyXG4gICAgICAgICAgICBzdGFydEhvdXIsXHJcbiAgICAgICAgICAgIGxlbmd0aEhvdXJzLFxyXG4gICAgICAgICAgICByZWFzb25JZCxcclxuICAgICAgICAgICAgY29tbWVudDogbnVsbCxcclxuICAgICAgICAgICAgaGFzQ29tbWVudDogZmFsc2VcclxuICAgICAgICB9KTtcclxuICAgICAgICBkYXRlLmRpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXVlU2F2ZSgpO1xyXG4gICAgICAgIHRoaXMub25EYXRlVXBkYXRlZC5maXJlKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgcGFzdGVGcm9tU3RhcnJlZChkYXRlOiBUaW1lbG9nRGF0ZSlcclxuICAgIHtcclxuICAgICAgICBpZiAoZGF0ZS5lbnRyaWVzLmxlbmd0aCA+IDApIHJldHVybjtcclxuICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRzLmZpbmQocyA9PiBzLmRhdGVzLnNvbWUoZCA9PiBkID09PSBkYXRlKSk7XHJcbiAgICAgICAgaWYgKCFzaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGZhdm9yaXRlID0gYXdhaXQgdGhpcy5nZXRGYXZvcml0ZWREYXRlKCk7XHJcbiAgICAgICAgaWYgKCFmYXZvcml0ZSB8fCBmYXZvcml0ZS5kYXRlID09PSBkYXRlKSByZXR1cm47XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZmF2b3JpdGUuZGF0ZS5lbnRyaWVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZGF0ZS5lbnRyaWVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgc3RhcnRIb3VyOiBlbnRyeS5zdGFydEhvdXIsXHJcbiAgICAgICAgICAgICAgICBsZW5ndGhIb3VyczogZW50cnkubGVuZ3RoSG91cnMsXHJcbiAgICAgICAgICAgICAgICByZWFzb25JZDogZW50cnkucmVhc29uSWQsXHJcbiAgICAgICAgICAgICAgICBjb21tZW50OiBlbnRyeS5jb21tZW50LFxyXG4gICAgICAgICAgICAgICAgaGFzQ29tbWVudDogZW50cnkuaGFzQ29tbWVudFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGF0ZS5kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5xdWV1ZVNhdmUoKTtcclxuICAgICAgICB0aGlzLm9uRGF0ZVVwZGF0ZWQuZmlyZSh7IHNoZWV0LCBkYXRlIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBxdWV1ZVNhdmUoKVxyXG4gICAge1xyXG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5zYXZlSGFuZGxlKTtcclxuICAgICAgICB0aGlzLnNhdmVIYW5kbGUgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB0aGlzLnNhdmUoKSwgNTAwKTtcclxuICAgICAgICB0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQuZmlyZShUaW1lbG9nU2F2ZVN0YXR1cy5XYWl0aW5nKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBzYXZlKClcclxuICAgIHtcclxuICAgICAgICBhd2FpdCBXYWl0LnVudGlsKCgpID0+ICF0aGlzLnNhdmluZyk7XHJcbiAgICAgICAgdGhpcy5zYXZpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMub25TYXZlU3RhdHVzVXBkYXRlZC5maXJlKFRpbWVsb2dTYXZlU3RhdHVzLlNhdmluZyk7XHJcbiAgICAgICAgY29uc3QgbWluaW11bVdhaXQgPSBXYWl0LmZvcigxMDApO1xyXG4gICAgICAgIGxldCBlcnJvciA9IGZhbHNlO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2hlZXQgb2YgdGhpcy5zaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2Ygc2hlZXQuZGF0ZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRlLmRpcnR5KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEhpQm9iLnN1Ym1pdChkYXRlLmRhdGUsIGRhdGUuZW50cmllcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUuZGlydHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBhd2FpdCBtaW5pbXVtV2FpdDtcclxuICAgICAgICB0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQuZmlyZShlcnJvciA/IFRpbWVsb2dTYXZlU3RhdHVzLkVycm9yIDogVGltZWxvZ1NhdmVTdGF0dXMuU2F2ZWQpO1xyXG4gICAgICAgIHRoaXMuc2F2aW5nID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEJhbGFuY2VDYWxjdWxhdGlvbkRlc2NyaXB0aW9uKClcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gYEZsZXggaG91cnMgaXMgY2FsY3VsYXRlZCB1c2luZyB0aGUgaG91cnMgd29ya2VkIGluIHRoZSBwcmV2aW91cyAyOCBkYXlzLmA7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0Q3VycmVudEJhbGFuY2VIb3VycygpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgcHJldmlvdXNEYXlzSW5jbHVkZWQgPSA3ICogNDtcclxuXHJcbiAgICAgICAgY29uc3QgY3VycmVudERhdGVUaW1lID0gRGF0ZXMucGFyc2UoRGF0ZXMuZm9ybWF0KERhdGUubm93KCksIGZhbHNlKSkgPz8gMDtcclxuICAgICAgICBjb25zdCBwYXN0RGF0ZVRpbWUgPSBEYXRlcy5wYXJzZShEYXRlcy5mb3JtYXQoY3VycmVudERhdGVUaW1lIC0gKDEwMDAgKiA2MCAqIDYwICogMjQgKiAocHJldmlvdXNEYXlzSW5jbHVkZWQgLSAxKSksIGZhbHNlKSkgPz8gMDtcclxuXHJcbiAgICAgICAgY29uc3Qgc2hlZXRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XHJcbiAgICAgICAgbGV0IGJhbGFuY2U6IG51bWJlciA9IDA7XHJcbiAgICAgICAgaWYgKCEhdGhpcy5zaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhd2FpdCBXYWl0LnVudGlsKCgpID0+ICF0aGlzLmNhbGN1bGF0aW5nRmxleCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRpbmdGbGV4ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnNoZWV0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0c1tpXTtcclxuICAgICAgICAgICAgICAgIGlmICghc2hlZXQpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBzaGVldEJhbGFuY2VzOiB7IGRhdGU6IG51bWJlciwgYmFsYW5jZTogbnVtYmVyIH1bXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2FjaGVLZXkgPSBgdGxfY2FjaGVkX2hvdXJfYmFsYW5jZXNfJHtzaGVldC5pZH1gO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNoZWV0LmxvY2tlZCAmJiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oY2FjaGVLZXkpICE9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNoZWV0QmFsYW5jZXMgPSBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShjYWNoZUtleSkgPz8gXCJbXVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hlZXQuZGF0ZXMubGVuZ3RoIDwgMSkgYXdhaXQgdGhpcy5mZXRjaFNoZWV0KHNoZWV0LmlkKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hlZXQuZGF0ZXMuc29tZShkID0+IGQuZW50cmllcy5sZW5ndGggPiAwICYmIGQuZW50cmllcy5zb21lKGUgPT4gZS5sZW5ndGhIb3VycyA+IDApKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGF5IG9mIHNoZWV0LmRhdGVzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3RlbnRpYWxIb3VycyA9IGRheS53ZWVrZW5kID8gMCA6IHNoZWV0LmhvdXJzUGVyRGF5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd29ya2VkSG91cnMgPSBOdW1iZXJzLnN1bShkYXkuZW50cmllcy5tYXAoZSA9PiBlLmxlbmd0aEhvdXJzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiYWxhbmNlID0gd29ya2VkSG91cnMgLSBwb3RlbnRpYWxIb3VycztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoZWV0QmFsYW5jZXMucHVzaCh7IGRhdGU6IGRheS5kYXRlLCBiYWxhbmNlIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoZWV0LmxvY2tlZCAmJiBzaGVldC5pZCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oY2FjaGVLZXksIEpTT04uc3RyaW5naWZ5KHNoZWV0QmFsYW5jZXMpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBiYWxhbmNlICs9IE51bWJlcnMuc3VtKHNoZWV0QmFsYW5jZXMuZmlsdGVyKGIgPT4gYi5kYXRlID49IHBhc3REYXRlVGltZSAmJiBiLmRhdGUgPD0gY3VycmVudERhdGVUaW1lKS5tYXAoYiA9PiBiLmJhbGFuY2UpKTtcclxuICAgICAgICAgICAgICAgIHNoZWV0c1tzaGVldC5pZC50b1N0cmluZygpXSA9IE51bWJlcnMuc3VtKHNoZWV0QmFsYW5jZXMubWFwKGIgPT4gYi5iYWxhbmNlKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRpbmdGbGV4ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IHNoZWV0cywgYmFsYW5jZSB9O1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCB7IFJlYXNvbkVuaGFuY2VtZW50cyB9IGZyb20gXCIuL1JlYXNvbkVuaGFuY2VtZW50cy9SZWFzb25zRW5oYW5jZW1lbnRzXCI7XHJcbmltcG9ydCB7IFRpbWVsb2dVSSB9IGZyb20gXCIuL1RpbWVsb2cvVGltZWxvZ1VJXCI7XHJcbmltcG9ydCB7IE1hdGVyaWFsSWNvbiB9IGZyb20gXCIuL1V0aWxzL01hdGVyaWFsSWNvblwiO1xyXG5cclxuXHJcbk1hdGVyaWFsSWNvbi5pbml0aWFsaXplKCk7XHJcbm5ldyBUaW1lbG9nVUkoKTtcclxubmV3IFJlYXNvbkVuaGFuY2VtZW50cygpOyIsImltcG9ydCB7IEhpQm9iUmVhc29uIH0gZnJvbSBcIi4uL0hpQm9iL0hpQm9iVHlwZXNcIjtcclxuaW1wb3J0IHsgRGF0ZXMgfSBmcm9tIFwiLi4vVXRpbHMvRGF0ZXNcIjtcclxuaW1wb3J0IHsgRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4uL1V0aWxzL0V2ZW50SGFuZGxlclwiO1xyXG5pbXBvcnQgeyBNYXRlcmlhbEljb24gfSBmcm9tIFwiLi4vVXRpbHMvTWF0ZXJpYWxJY29uXCI7XHJcbmltcG9ydCB7IE51bWJlcnMgfSBmcm9tIFwiLi4vVXRpbHMvTnVtYmVyc1wiO1xyXG5pbXBvcnQgeyBXYWl0IH0gZnJvbSBcIi4uL1V0aWxzL1dhaXRcIjtcclxuaW1wb3J0IHsgVGltZWxvZ0NzcyB9IGZyb20gXCIuL1RpbWVsb2dDc3NcIjtcclxuaW1wb3J0IHsgVGltZWxvZ01vZGVsIH0gZnJvbSBcIi4vVGltZWxvZ01vZGVsXCI7XHJcbmltcG9ydCB7IFRpbWVsb2dEYXRlLCBUaW1lbG9nRW50cnksIFRpbWVsb2dTYXZlU3RhdHVzLCBUaW1lbG9nU2hlZXQsIFRpbWVsb2dVSURhdGUgYXMgVGltZWxvZ1VJRGF0ZUNvbnRhaW5lciwgVGltZWxvZ1VJV2Vla1N1bSB9IGZyb20gXCIuL1RpbWVsb2dUeXBlc1wiO1xyXG5cclxuZGVjbGFyZSB2YXIgSElCT0JfVVRJTFNfVkVSOiBzdHJpbmc7XHJcbmRlY2xhcmUgdmFyIEhJQk9CX1VUSUxTX0NIQU5HRUxPRzogeyB2ZXJzaW9uOiBzdHJpbmcsIHRleHQ6IHN0cmluZ1tdIH1bXTtcclxuXHJcbmV4cG9ydCBjbGFzcyBUaW1lbG9nVUlcclxue1xyXG4gICAgcHJpdmF0ZSB0aW1lbG9nVUlPdXRlcj86IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSB0aW1lbG9nVUlJbm5lcj86IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSB0b2dnbGVCdXR0b24/OiBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgIHByaXZhdGUgZGFya01vZGVCdXR0b24/OiBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgIHByaXZhdGUgbW9kZWw/OiBUaW1lbG9nTW9kZWw7XHJcblxyXG4gICAgcHJpdmF0ZSBzaGVldERyb3Bkb3duPzogSFRNTFNlbGVjdEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHNoZWV0RHJvcGRvd25PcHRpb25zOiB7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGVsZW1lbnQ6IEhUTUxPcHRpb25FbGVtZW50IH1bXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBzZWxlY3RlZFNoZWV0PzogVGltZWxvZ1NoZWV0O1xyXG5cclxuICAgIHByaXZhdGUgc2hlZXRDb250YWluZXI/OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHByaXZhdGUgc2hlZXREYXRlczogVGltZWxvZ1VJRGF0ZUNvbnRhaW5lcltdID0gW107XHJcbiAgICBwcml2YXRlIHdlZWtTdW1zOiBUaW1lbG9nVUlXZWVrU3VtW10gPSBbXTtcclxuICAgIHByaXZhdGUgc2F2ZVN0YXR1cz86IEhUTUxTcGFuRWxlbWVudDtcclxuICAgIHByaXZhdGUgYmFsYW5jZUxhYmVsPzogSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICAgcHJpdmF0ZSByZWFzb25zOiBIaUJvYlJlYXNvbltdID0gW107XHJcblxyXG4gICAgcHJpdmF0ZSBvbkRhcmtNb2RlQ2hhbmdlID0gbmV3IEV2ZW50SGFuZGxlcjxib29sZWFuPigpO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpXHJcbiAgICB7XHJcbiAgICAgICAgKHdpbmRvdyBhcyBhbnkpLnRpbWVsb2cgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuYWRkQnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGFkZEJ1dHRvbigpXHJcbiAgICB7XHJcbiAgICAgICAgd2hpbGUgKHRydWUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZGl2LmFwcC1jb250ZW50ID4gYXBwLXRvcC1iYXIuYXBwLXRvcC1iYXIgPiBkaXYuYWN0aW9uc1wiKTtcclxuICAgICAgICAgICAgaWYgKCFwYXJlbnQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IFdhaXQuZm9yKDEpO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24uY2xhc3NOYW1lID0gXCJ0bC10b2dnbGUtYnRuXCI7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJzZW50aW1lbnRfdmVyeV9zYXRpc2ZpZWRcIikpO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi50aXRsZSA9IFwiSGlCb2IgVXRpbGl0aWVzXCI7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnRvZ2dsZVZpc2libGUoKTtcclxuICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKHRoaXMudG9nZ2xlQnV0dG9uKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlVUkoKTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlTW9kZWwoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbi5oYXNoID09PSBcIiN0bC11aVwiKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVZpc2libGUoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5vbkRhcmtNb2RlQ2hhbmdlLmZpcmUodGhpcy5pc0RhcmtNb2RlKCkpO1xyXG5cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSB0b2dnbGVWaXNpYmxlKClcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMudGltZWxvZ1VJT3V0ZXIpIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy50aW1lbG9nVUlPdXRlci5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICAgICAgbG9jYXRpb24uaGFzaCA9IFwiI3RsLXVpXCI7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaGVldENvbnRhaW5lcikgdGhpcy5zaGVldENvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsPy5mZXRjaFNoZWV0cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVsb2dVSU91dGVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgbG9jYXRpb24uaGFzaCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImluaXRpYWxcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGlzRGFya01vZGUoKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRsX2RhcmtfbW9kZVwiKSA9PT0gXCJ0cnVlXCI7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHRvZ2dsZURhcmtNb2RlKClcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5pc0RhcmtNb2RlKCkpIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidGxfZGFya19tb2RlXCIsIFwiZmFsc2VcIik7XHJcbiAgICAgICAgZWxzZSBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRsX2RhcmtfbW9kZVwiLCBcInRydWVcIik7XHJcbiAgICAgICAgdGhpcy5vbkRhcmtNb2RlQ2hhbmdlLmZpcmUodGhpcy5pc0RhcmtNb2RlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlVUkoKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xyXG4gICAgICAgIHN0eWxlLmlubmVySFRNTCA9IFRpbWVsb2dDc3M7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdHlsZSk7XHJcblxyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIuY2xhc3NOYW1lID0gXCJ0bC11aVwiO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJT3V0ZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHRoaXMudGltZWxvZ1VJT3V0ZXIpO1xyXG5cclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmNsYXNzTmFtZSA9IFwidGwtdWktaW5uZXJcIjtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSU91dGVyLmFwcGVuZCh0aGlzLnRpbWVsb2dVSUlubmVyKTtcclxuXHJcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtY2xvc2UtYnRuXCI7XHJcbiAgICAgICAgY2xvc2VCdXR0b24uYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImNsb3NlXCIpKTtcclxuICAgICAgICBjbG9zZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy50b2dnbGVWaXNpYmxlKCk7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbik7XHJcblxyXG4gICAgICAgIHRoaXMuZGFya01vZGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgIHRoaXMuZGFya01vZGVCdXR0b24uY2xhc3NOYW1lID0gXCJ0bC1kYXJrLW1vZGUtYnRuXCI7XHJcbiAgICAgICAgdGhpcy5kYXJrTW9kZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy50b2dnbGVEYXJrTW9kZSgpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kQ2hpbGQodGhpcy5kYXJrTW9kZUJ1dHRvbik7XHJcbiAgICAgICAgdGhpcy5vbkRhcmtNb2RlQ2hhbmdlLm9uKChkYXJrKSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGRhcmspIHRoaXMudGltZWxvZ1VJT3V0ZXI/LmNsYXNzTGlzdC5hZGQoXCJ0bC1kYXJrXCIpO1xyXG4gICAgICAgICAgICBlbHNlIHRoaXMudGltZWxvZ1VJT3V0ZXI/LmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1kYXJrXCIpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXJrTW9kZUJ1dHRvbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXJrTW9kZUJ1dHRvbi5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXJrTW9kZUJ1dHRvbi5hcHBlbmQoZGFyayA/IE1hdGVyaWFsSWNvbi5nZXQoXCJsaWdodF9tb2RlXCIpIDogTWF0ZXJpYWxJY29uLmdldChcImRhcmtfbW9kZVwiKSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMpO1xyXG5cclxuICAgICAgICBjb25zdCB2ZXJzaW9uTnVtYmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB2ZXJzaW9uTnVtYmVyLmlubmVyVGV4dCA9IEhJQk9CX1VUSUxTX1ZFUjtcclxuICAgICAgICB2ZXJzaW9uTnVtYmVyLmNsYXNzTmFtZSA9IFwidGwtdmVyc2lvbi1udW1iZXJcIjtcclxuICAgICAgICB0aGlzLnRpbWVsb2dVSUlubmVyLmFwcGVuZENoaWxkKHZlcnNpb25OdW1iZXIpO1xyXG5cclxuICAgICAgICBpZiAoSElCT0JfVVRJTFNfQ0hBTkdFTE9HLmxlbmd0aCA+IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBjaGFuZ2Vsb2cgPSB0aGlzLmNyZWF0ZUNoYW5nZWxvZ0VsZW1lbnQoKTtcclxuICAgICAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZChjaGFuZ2Vsb2cpO1xyXG4gICAgICAgICAgICB2ZXJzaW9uTnVtYmVyLm9uY2xpY2sgPSAoKSA9PiBjaGFuZ2Vsb2cuY2xhc3NMaXN0LnJlbW92ZShcInRsLWNoYW5nZWxvZy1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgIHZlcnNpb25OdW1iZXIuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XHJcbiAgICAgICAgICAgIHZlcnNpb25OdW1iZXIuc3R5bGUudGV4dERlY29yYXRpb24gPSBcInVuZGVybGluZVwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc2hlZXREcm9wZG93bkxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgc2hlZXREcm9wZG93bkxhYmVsLmlubmVyVGV4dCA9IFwiU2hlZXQ6XCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZChzaGVldERyb3Bkb3duTGFiZWwpO1xyXG5cclxuICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xyXG4gICAgICAgIHRoaXMuc2hlZXREcm9wZG93bi5jbGFzc05hbWUgPSBcInRsLXNoZWV0LXNlbGVjdFwiO1xyXG4gICAgICAgIHRoaXMuc2hlZXREcm9wZG93bi5vbmNoYW5nZSA9ICgpID0+IHRoaXMub25TZWxlY3RlZFNoZWV0Q2hhbmdlKCk7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZCh0aGlzLnNoZWV0RHJvcGRvd24pO1xyXG5cclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NOYW1lID0gXCJ0bC1zYXZlLXN0YXR1c1wiO1xyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5vbmNsaWNrID0gKCkgPT4gdGhpcy5vblNhdmVTdGF0dXNDbGljaygpO1xyXG4gICAgICAgIHRoaXMudGltZWxvZ1VJSW5uZXIuYXBwZW5kKHRoaXMuc2F2ZVN0YXR1cyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJhbGFuY2VQYXJlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGJhbGFuY2VQYXJlbnQuY2xhc3NOYW1lID0gXCJ0bC1iYWxhbmNlXCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmQoYmFsYW5jZVBhcmVudCk7XHJcblxyXG4gICAgICAgIHRoaXMuYmFsYW5jZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLmJhbGFuY2VMYWJlbC5pbm5lclRleHQgPSBcIkJhbGFuY2U6IFwiO1xyXG4gICAgICAgIHRoaXMuYmFsYW5jZUxhYmVsLmNsYXNzTmFtZSA9IFwidGwtYmFsYW5jZS1sYWJlbFwiO1xyXG4gICAgICAgIGJhbGFuY2VQYXJlbnQuYXBwZW5kKHRoaXMuYmFsYW5jZUxhYmVsKTtcclxuXHJcbiAgICAgICAgY29uc3QgYmFsYW5jZUhlbHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGJhbGFuY2VIZWxwLmFwcGVuZChNYXRlcmlhbEljb24uZ2V0KFwiaGVscFwiKSk7XHJcbiAgICAgICAgYmFsYW5jZUhlbHAuY2xhc3NOYW1lID0gXCJ0bC1iYWxhbmNlLWhlbHBcIjtcclxuICAgICAgICBiYWxhbmNlSGVscC50aXRsZSA9IFRpbWVsb2dNb2RlbC5nZXRCYWxhbmNlQ2FsY3VsYXRpb25EZXNjcmlwdGlvbigpO1xyXG4gICAgICAgIGJhbGFuY2VQYXJlbnQuYXBwZW5kKGJhbGFuY2VIZWxwKTtcclxuXHJcbiAgICAgICAgdGhpcy5zaGVldENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5zaGVldENvbnRhaW5lci5jbGFzc05hbWUgPSBcInRsLXNoZWV0XCI7XHJcbiAgICAgICAgdGhpcy50aW1lbG9nVUlJbm5lci5hcHBlbmRDaGlsZCh0aGlzLnNoZWV0Q29udGFpbmVyKTtcclxuXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNyZWF0ZUNoYW5nZWxvZ0VsZW1lbnQoKVxyXG4gICAge1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gXCJ0bC1jaGFuZ2Vsb2cgdGwtY2hhbmdlbG9nLWhpZGRlblwiO1xyXG4gICAgICAgIGNvbnN0IGJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGJhY2suY2xhc3NOYW1lID0gXCJ0bC1jaGFuZ2Vsb2ctYmFja1wiO1xyXG4gICAgICAgIGVsZW1lbnQuYXBwZW5kKGJhY2spO1xyXG4gICAgICAgIGJhY2sub25jbGljayA9ICgpID0+IGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRsLWNoYW5nZWxvZy1oaWRkZW5cIik7XHJcblxyXG4gICAgICAgIGNvbnN0IGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBpbm5lci5jbGFzc05hbWUgPSBcInRsLWNoYW5nZWxvZy1pbm5lclwiO1xyXG4gICAgICAgIGVsZW1lbnQuYXBwZW5kKGlubmVyKTtcclxuXHJcbiAgICAgICAgY29uc3QgY2hhbmdlbG9nID0gSElCT0JfVVRJTFNfQ0hBTkdFTE9HO1xyXG4gICAgICAgIGZvciAoY29uc3QgdmVyc2lvbiBvZiBjaGFuZ2Vsb2cpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCB2ZXJzaW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIHZlcnNpb25FbGVtZW50LmNsYXNzTmFtZSA9IFwidGwtY2hhbmdlbG9nLXZlcnNpb25cIjtcclxuICAgICAgICAgICAgaW5uZXIuYXBwZW5kKHZlcnNpb25FbGVtZW50KTtcclxuICAgICAgICAgICAgY29uc3QgdmVyc2lvblRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgdmVyc2lvblRpdGxlLmNsYXNzTmFtZSA9IFwidGwtY2hhbmdlbG9nLXRpdGxlXCI7XHJcbiAgICAgICAgICAgIHZlcnNpb25UaXRsZS5pbm5lclRleHQgPSB2ZXJzaW9uLnZlcnNpb247XHJcbiAgICAgICAgICAgIHZlcnNpb25FbGVtZW50LmFwcGVuZCh2ZXJzaW9uVGl0bGUpO1xyXG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xyXG4gICAgICAgICAgICBsaXN0LmNsYXNzTmFtZSA9IFwidGwtY2hhbmdlbG9nLWxpc3RcIjtcclxuICAgICAgICAgICAgdmVyc2lvbkVsZW1lbnQuYXBwZW5kKGxpc3QpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRleHQgb2YgdmVyc2lvbi50ZXh0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICAgICAgICAgIHRleHRFbGVtZW50LmlubmVyVGV4dCA9IHRleHQ7XHJcbiAgICAgICAgICAgICAgICBsaXN0LmFwcGVuZCh0ZXh0RWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFzeW5jIGNyZWF0ZU1vZGVsKClcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5tb2RlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwub25EYXRlVXBkYXRlZC5vZmYodGhpcy5vbkRhdGVVcGRhdGVkLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5vblJlYXNvbnNVcGRhdGVkLm9mZih0aGlzLm9uUmVhc29uc1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLm9uU2F2ZVN0YXR1c1VwZGF0ZWQub2ZmKHRoaXMub25TYXZlU3RhdHVzVXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwub25TaGVldFVwZGF0ZWQub2ZmKHRoaXMub25TaGVldFVwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLm9uU2hlZXRzVXBkYXRlZC5vZmYodGhpcy5vblNoZWV0c1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1vZGVsID0gbmV3IFRpbWVsb2dNb2RlbCgpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25EYXRlVXBkYXRlZC5vbih0aGlzLm9uRGF0ZVVwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25SZWFzb25zVXBkYXRlZC5vbih0aGlzLm9uUmVhc29uc1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25TYXZlU3RhdHVzVXBkYXRlZC5vbih0aGlzLm9uU2F2ZVN0YXR1c1VwZGF0ZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub25TaGVldFVwZGF0ZWQub24odGhpcy5vblNoZWV0VXBkYXRlZCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5tb2RlbC5vblNoZWV0c1VwZGF0ZWQub24odGhpcy5vblNoZWV0c1VwZGF0ZWQsIHRoaXMpO1xyXG5cclxuICAgICAgICBhd2FpdCB0aGlzLm1vZGVsLmluaXRpYWxpemUoKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0RGF0ZUNvbnRhaW5lcihkYXRhOiB7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGRhdGU6IFRpbWVsb2dEYXRlIH0pXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTaGVldCA9PT0gZGF0YS5zaGVldCAmJiB0aGlzLnNoZWV0Q29udGFpbmVyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IGRhdGVDb250YWluZXIgPSB0aGlzLnNoZWV0RGF0ZXMuZmluZChkID0+IGQuZGF0ZSA9PT0gZGF0YS5kYXRlKTtcclxuICAgICAgICAgICAgaWYgKCFkYXRlQ29udGFpbmVyKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJpZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJCdXR0b246IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksXHJcbiAgICAgICAgICAgICAgICAgICAgcGFzdGVCdXR0b246IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksXHJcbiAgICAgICAgICAgICAgICAgICAgd2Vla2VuZERlc2NyaXB0aW9uOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaGVldERhdGVzLnB1c2goZGF0ZUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5jbGFzc05hbWUgPSBcInRsLWRhdGVcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hlZXRDb250YWluZXIuYXBwZW5kQ2hpbGQoZGF0ZUNvbnRhaW5lci5wYXJlbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChuZXcgRGF0ZShkYXRhLmRhdGUuZGF0ZSkuZ2V0RGF5KCkgPT09IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2Vla1NlcGVyYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgd2Vla1NlcGVyYXRvci5jbGFzc05hbWUgPSBcInRsLXdlZWstc2VwZXJhdG9yXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGVldENvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWVrU2VwZXJhdG9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmQoZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8uc2V0RmF2b3JpdGVkRGF0ZShkYXRhLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtc3Rhci1idXR0b24gdGwtc2hvdy1vbi1ob3ZlclwiO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLnRpdGxlID0gXCJGYXZvcml0ZSBEYXlcIjtcclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnRpdGxlLmNsYXNzTmFtZSA9IFwidGwtZGF0ZS1sYWJlbFwiO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci50aXRsZS5pbm5lclRleHQgPSBuZXcgRGF0ZShkYXRhLmRhdGUuZGF0ZSkudG9EYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRlLndlZWtlbmQpIGRhdGVDb250YWluZXIudGl0bGUuY2xhc3NMaXN0LmFkZChcInRsLWRhdGUtbGFiZWwtd2Vla2VuZFwiKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmFwcGVuZChkYXRlQ29udGFpbmVyLnRpdGxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLndlZWtlbmREZXNjcmlwdGlvbi5jbGFzc05hbWUgPSBcInRsLXdlZWtlbmQtZGVzY3JpcHRpb25cIjtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFyZW50LmFwcGVuZChkYXRlQ29udGFpbmVyLndlZWtlbmREZXNjcmlwdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhLnNoZWV0LmxvY2tlZClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZC5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiYWRkXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIGFkZC5jbGFzc05hbWUgPSBcInRsLWFkZC1lbnRyeS1idG4gdGwtc2hvdy1vbi1ob3ZlclwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZC5vbmNsaWNrID0gKCkgPT4gdGhpcy5tb2RlbD8ubmV3RW50cnkoZGF0YS5kYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmQoYWRkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwic3dpdGNoX2FjY2Vzc19zaG9ydGN1dF9hZGRcIikpXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXN0ZUJ1dHRvbi50aXRsZSA9IFwiUGFzdGUgZnJvbSBGYXZvcml0ZSBEYXlcIjtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtcGFzdGUtYnRuIHRsLXNob3ctb24taG92ZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhc3RlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm1vZGVsPy5wYXN0ZUZyb21TdGFycmVkKGRhdGEuZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kKGRhdGVDb250YWluZXIucGFzdGVCdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRUb1dlZWtTdW0oZGF0ZUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGRhdGVDb250YWluZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXRFbnRyeUNvbnRhaW5lcihkYXRhOiB7IHNoZWV0OiBUaW1lbG9nU2hlZXQsIGRhdGU6IFRpbWVsb2dEYXRlIH0sIGRhdGVDb250YWluZXI6IFRpbWVsb2dVSURhdGVDb250YWluZXIsIGVudHJ5OiBUaW1lbG9nRW50cnkpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IGVudHJ5Q29udGFpbmVyID0gZGF0ZUNvbnRhaW5lci5lbnRyaWVzLmZpbmQocCA9PiBwLmVudHJ5ID09PSBlbnRyeSk7XHJcbiAgICAgICAgaWYgKCFlbnRyeUNvbnRhaW5lcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyID0ge1xyXG4gICAgICAgICAgICAgICAgZW50cnksXHJcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksXHJcbiAgICAgICAgICAgICAgICBzdGFydEhvdXI6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcclxuICAgICAgICAgICAgICAgIGVuZEhvdXI6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxcclxuICAgICAgICAgICAgICAgIGxlbmd0aDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLFxyXG4gICAgICAgICAgICAgICAgcmVhc29uOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpLFxyXG4gICAgICAgICAgICAgICAgY29tbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLFxyXG4gICAgICAgICAgICAgICAgY29tbWVudEJ1dHRvbjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKSxcclxuICAgICAgICAgICAgICAgIG5vUmVhc29uV2FybmluZzogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBkYXRlQ29udGFpbmVyLmVudHJpZXMucHVzaChlbnRyeUNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuY2xhc3NOYW1lID0gXCJ0bC1lbnRyeVwiO1xyXG4gICAgICAgICAgICBkYXRlQ29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5wYXJlbnQpO1xyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuc3RhcnRIb3VyLnR5cGUgPSBcInRpbWVcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuc3RhcnRIb3VyLmNsYXNzTmFtZSA9IFwidGwtZW50cnktc3RhcnRcIjtcclxuICAgICAgICAgICAgaWYgKGRhdGEuc2hlZXQubG9ja2VkKSBlbnRyeUNvbnRhaW5lci5zdGFydEhvdXIuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5zdGFydEhvdXIub25jaGFuZ2UgPSAoKSA9PiBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5kID0gZW50cnkuc3RhcnRIb3VyICsgZW50cnkubGVuZ3RoSG91cnM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsPy5jaGFuZ2VTdGFydEhvdXIoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgRGF0ZXMucGFyc2VUaW1lVG9ob3VycyhlbnRyeUNvbnRhaW5lcj8uc3RhcnRIb3VyLnZhbHVlID8/IFwiMDg6MDBcIikpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gTnVtYmVycy5yb3VuZChlbmQgLSBlbnRyeS5zdGFydEhvdXIsIDIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbD8uY2hhbmdlTGVuZ3RoSG91cnMoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIuc3RhcnRIb3VyKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGVuZExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgICAgIGVuZExhYmVsLmNsYXNzTmFtZSA9IFwidGwtZW5kLWxhYmVsXCJcclxuICAgICAgICAgICAgZW5kTGFiZWwuaW5uZXJUZXh0ID0gXCItXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbmRMYWJlbCk7XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5lbmRIb3VyLnR5cGUgPSBcInRpbWVcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuZW5kSG91ci5jbGFzc05hbWUgPSBcInRsLWVudHJ5LWVuZFwiO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zaGVldC5sb2NrZWQpIGVudHJ5Q29udGFpbmVyLmVuZEhvdXIuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5lbmRIb3VyLm9uY2hhbmdlID0gKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5Q29udGFpbmVyPy5lbmRIb3VyKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IE51bWJlcnMucm91bmQoRGF0ZXMucGFyc2VUaW1lVG9ob3VycyhlbnRyeUNvbnRhaW5lci5lbmRIb3VyLnZhbHVlKSAtIGVudHJ5LnN0YXJ0SG91ciwgMik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbD8uY2hhbmdlTGVuZ3RoSG91cnMoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgbGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIuZW5kSG91cik7XHJcblxyXG5cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucmVhc29uLm9uY2hhbmdlID0gKCkgPT4gdGhpcy5tb2RlbD8uY2hhbmdlUmVhc29uKGRhdGEuZGF0ZSwgZGF0YS5kYXRlLmVudHJpZXMuaW5kZXhPZihlbnRyeSksIGVudHJ5Q29udGFpbmVyPy5yZWFzb24udmFsdWUgPz8gXCJcIik7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnNoZWV0LmxvY2tlZCkgZW50cnlDb250YWluZXIucmVhc29uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucmVhc29uLmNsYXNzTmFtZSA9IFwidGwtZW50cnktcmVhc29uXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChlbnRyeUNvbnRhaW5lci5yZWFzb24pO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJlYXNvbnNEcm9wZG93bihlbnRyeUNvbnRhaW5lci5yZWFzb24pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRhdGVDb250YWluZXIuZW50cmllcy5sZW5ndGggPT09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3VtSG91cnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3VtSG91cnMuY2xhc3NOYW1lID0gXCJ0bC1zdW0taG91cnNcIjtcclxuICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmQoZGF0ZUNvbnRhaW5lci5zdW1Ib3Vycyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmxlbmd0aC50eXBlID0gXCJudW1iZXJcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubGVuZ3RoLmNsYXNzTmFtZSA9IFwidGwtZW50cnktbGVuZ3RoXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmxlbmd0aC5zdGVwID0gXCIwLjAxXCI7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnNoZWV0LmxvY2tlZCkgZW50cnlDb250YWluZXIubGVuZ3RoLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubGVuZ3RoLm9uY2hhbmdlID0gKCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbD8uY2hhbmdlTGVuZ3RoSG91cnMoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgcGFyc2VGbG9hdChlbnRyeUNvbnRhaW5lcj8ubGVuZ3RoLnZhbHVlIHx8IFwiMFwiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkdXJhdGlvbkxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgICAgIGR1cmF0aW9uTGFiZWwuY2xhc3NOYW1lID0gXCJ0bC1kdXJhdGlvbi1sYWJlbFwiO1xyXG4gICAgICAgICAgICBkdXJhdGlvbkxhYmVsLmlubmVyVGV4dCA9IFwiaG91cihzKVwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZHVyYXRpb25MYWJlbCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWRhdGEuc2hlZXQubG9ja2VkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uLmNsYXNzTmFtZSA9IFwidGwtYWRkLWNvbW1lbnQtYnRuIHRsLXNob3ctb24taG92ZXJcIjtcclxuICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnRCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMubW9kZWw/LnRvZ2dsZUNvbW1lbnQoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSk7XHJcbiAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5wYXJlbnQuYXBwZW5kQ2hpbGQoZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZS5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiZGVsZXRlXCIpKTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZS5jbGFzc05hbWUgPSBcInRsLXJlbW92ZS1lbnRyeS1idG4gdGwtc2hvdy1vbi1ob3ZlclwiO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm1vZGVsPy5kZWxldGVFbnRyeShkYXRhLmRhdGUsIGRhdGEuZGF0ZS5lbnRyaWVzLmluZGV4T2YoZW50cnkpKTtcclxuICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnBhcmVudC5hcHBlbmRDaGlsZChyZW1vdmUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5ub1JlYXNvbldhcm5pbmcuYXBwZW5kKE1hdGVyaWFsSWNvbi5nZXQoXCJ3YXJuaW5nXCIsIHRydWUpKTtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIubm9SZWFzb25XYXJuaW5nLmFwcGVuZChcIiBObyByZWFzb24gc2VsZWN0ZWQhXCIpO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5ub1JlYXNvbldhcm5pbmcuY2xhc3NOYW1lID0gXCJ0bC1uby1yZWFzb24td2FybmluZyB0bC13YXJuaW5nIHRsLWhhcy1yZWFzb25cIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLm5vUmVhc29uV2FybmluZyk7XHJcblxyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50LnR5cGUgPSBcInRleHRcIjtcclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudC5wbGFjZWhvbGRlciA9IFwiV3JpdGUgYSBub3RlLi4uXCI7XHJcbiAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQudGl0bGUgPSBcIldyaXRlIGEgbm90ZS4uLlwiO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50LmNsYXNzTmFtZSA9IFwidGwtZW50cnktY29tbWVudFwiO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zaGVldC5sb2NrZWQpIGVudHJ5Q29udGFpbmVyLmNvbW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50Lm9uY2hhbmdlID0gKCkgPT4gXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWw/LmNoYW5nZUNvbW1lbnQoZGF0YS5kYXRlLCBkYXRhLmRhdGUuZW50cmllcy5pbmRleE9mKGVudHJ5KSwgZW50cnlDb250YWluZXI/LmNvbW1lbnQudmFsdWUgPz8gXCJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZW50cnlDb250YWluZXIucGFyZW50LmFwcGVuZENoaWxkKGVudHJ5Q29udGFpbmVyLmNvbW1lbnQpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVudHJ5Q29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhZGRUb1dlZWtTdW0oZGF0ZTogVGltZWxvZ1VJRGF0ZUNvbnRhaW5lcilcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy53ZWVrU3Vtcy5sZW5ndGggPCAxIHx8IG5ldyBEYXRlKGRhdGUuZGF0ZS5kYXRlKS5nZXREYXkoKSA9PT0gMCkgLy9JZiB0aGlzIGlzIHRoZSBmaXJzdCBkYXksIG9yIGEgc3VuZGF5LCBjcmVhdGUgYSBuZXcgd2VlayBmb3IgaXQuXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCB3ZWVrU3VtID0ge1xyXG4gICAgICAgICAgICAgICAgZGF0ZXM6IFtkYXRlXSxcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgd2Vla1N1bS5lbGVtZW50LmNsYXNzTmFtZSA9IFwidGwtd2Vlay1zdW1cIjtcclxuICAgICAgICAgICAgdGhpcy53ZWVrU3Vtcy5wdXNoKHdlZWtTdW0pO1xyXG4gICAgICAgICAgICBkYXRlLnBhcmVudC5hcHBlbmRDaGlsZCh3ZWVrU3VtLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICBkYXRlLnBhcmVudC5zdHlsZS5tYXJnaW5Ub3AgPSBcIjM4cHhcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy53ZWVrU3Vtc1t0aGlzLndlZWtTdW1zLmxlbmd0aCAtIDFdLmRhdGVzLnB1c2goZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBvbkRhdGVVcGRhdGVkKGRhdGE6IHsgc2hlZXQ6IFRpbWVsb2dTaGVldCwgZGF0ZTogVGltZWxvZ0RhdGUgfSlcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFNoZWV0ID09PSBkYXRhLnNoZWV0ICYmIHRoaXMuc2hlZXRDb250YWluZXIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgZGF0ZUNvbnRhaW5lciA9IHRoaXMuZ2V0RGF0ZUNvbnRhaW5lcihkYXRhKTtcclxuICAgICAgICAgICAgaWYgKGRhdGVDb250YWluZXIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZGF0YS5kYXRlLmVudHJpZXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVudHJ5Q29udGFpbmVyID0gdGhpcy5nZXRFbnRyeUNvbnRhaW5lcihkYXRhLCBkYXRlQ29udGFpbmVyLCBlbnRyeSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLnN0YXJ0SG91ci52YWx1ZSA9IERhdGVzLmZvcm1hdEhvdXIoZW50cnkuc3RhcnRIb3VyKTtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5sZW5ndGgudmFsdWUgPSBlbnRyeS5sZW5ndGhIb3Vycy50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5Q29udGFpbmVyLmVuZEhvdXIudmFsdWUgPSBEYXRlcy5mb3JtYXRIb3VyKGVudHJ5LnN0YXJ0SG91ciArIGVudHJ5Lmxlbmd0aEhvdXJzKTtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5yZWFzb24udmFsdWUgPSBlbnRyeS5yZWFzb25JZDtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50LnZhbHVlID0gZW50cnkuY29tbWVudCA/PyBcIlwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoISFlbnRyeS5yZWFzb25JZCkgZW50cnlDb250YWluZXIubm9SZWFzb25XYXJuaW5nLmNsYXNzTGlzdC5hZGQoXCJ0bC1oYXMtcmVhc29uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgZW50cnlDb250YWluZXIubm9SZWFzb25XYXJuaW5nLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1oYXMtcmVhc29uXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uLnRpdGxlID0gZW50cnkuaGFzQ29tbWVudCA/IFwiUmVtb3ZlIG5vdGVcIiA6IFwiQWRkIG5vdGVcIjtcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeUNvbnRhaW5lci5jb21tZW50QnV0dG9uLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnlDb250YWluZXIuY29tbWVudEJ1dHRvbi5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KGVudHJ5Lmhhc0NvbW1lbnQgPyBcInNwZWFrZXJfbm90ZXNfb2ZmXCIgOiBcInNwZWFrZXJfbm90ZXNcIikpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuaGFzQ29tbWVudCkgZW50cnlDb250YWluZXIucGFyZW50LmNsYXNzTGlzdC5hZGQoXCJ0bC1oYXMtY29tbWVudFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGVudHJ5Q29udGFpbmVyLnBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKFwidGwtaGFzLWNvbW1lbnRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZW1vdmVkRW50cmllcyA9IGRhdGVDb250YWluZXIuZW50cmllcy5maWx0ZXIoZW50cnkgPT4gIWRhdGEuZGF0ZS5lbnRyaWVzLmZpbmQoZSA9PiBlID09PSBlbnRyeS5lbnRyeSkpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5lbnRyaWVzID0gZGF0ZUNvbnRhaW5lci5lbnRyaWVzLmZpbHRlcihlbnRyeSA9PiAhcmVtb3ZlZEVudHJpZXMuaW5jbHVkZXMoZW50cnkpKTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZWRFbnRyaWVzLmZvckVhY2goZSA9PiBlLnBhcmVudC5yZW1vdmUoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGVDb250YWluZXIuc3VtSG91cnMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VtID0gTnVtYmVycy5zdW0oZGF0YS5kYXRlLmVudHJpZXMubWFwKGUgPT4gZS5sZW5ndGhIb3VycykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3VtSG91cnMuaW5uZXJUZXh0ID0gYCR7TnVtYmVycy5yb3VuZChzdW0sIDIpfSBob3VyJHtzdW0gPT09IDEgPyBcIlwiIDogXCJzXCJ9YDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIuc3RhckJ1dHRvbi5kaXNhYmxlZCA9IGRhdGEuZGF0ZS5mYXZvcml0ZWQ7XHJcbiAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInRsLWZhdm9yaXRlXCIpO1xyXG4gICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci5zdGFyQnV0dG9uLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJzdGFyXCIsIGRhdGEuZGF0ZS5mYXZvcml0ZWQpKTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGUuZmF2b3JpdGVkKSBkYXRlQ29udGFpbmVyLnN0YXJCdXR0b24uY2xhc3NMaXN0LmFkZChcInRsLWZhdm9yaXRlXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkYXRlQ29udGFpbmVyLmVudHJpZXMubGVuZ3RoID4gMCB8fCBkYXRlQ29udGFpbmVyLmRhdGUuZmF2b3JpdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24uY2xhc3NMaXN0LmFkZChcInRsLWhpZGUtZmF2b3JpdGUtYnV0dG9uXCIpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIucGFzdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInRsLWhpZGUtZmF2b3JpdGUtYnV0dG9uXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIudGl0bGUudGl0bGUgPSBkYXRhLmRhdGUuZGF0ZURlc2NyaXB0aW9uID8/IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0ZS53ZWVrZW5kICYmIGRhdGEuZGF0ZS5lbnRyaWVzLmxlbmd0aCA8IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZUNvbnRhaW5lci53ZWVrZW5kRGVzY3JpcHRpb24uY2xhc3NMaXN0LnJlbW92ZShcInRsLXdlZWtlbmQtZGVzY3JpcHRpb24taGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVDb250YWluZXIud2Vla2VuZERlc2NyaXB0aW9uLmlubmVyVGV4dCA9IGRhdGEuZGF0ZS5kYXRlRGVzY3JpcHRpb24gPz8gXCJcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBkYXRlQ29udGFpbmVyLndlZWtlbmREZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKFwidGwtd2Vla2VuZC1kZXNjcmlwdGlvbi1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHdlZWtTdW0gPSB0aGlzLndlZWtTdW1zLmZpbmQodyA9PiB3LmRhdGVzLnNvbWUoZCA9PiBkLmRhdGUgPT09IGRhdGEuZGF0ZSkpO1xyXG4gICAgICAgICAgICBpZiAod2Vla1N1bSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3VtID0gTnVtYmVycy5zdW0od2Vla1N1bS5kYXRlcy5tYXAoZCA9PiBOdW1iZXJzLnN1bShkLmVudHJpZXMubWFwKGUgPT4gZS5lbnRyeS5sZW5ndGhIb3VycykpKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXlzID0gd2Vla1N1bS5kYXRlcy5maWx0ZXIoZCA9PiAhZC5kYXRlLndlZWtlbmQpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsSG91cnMgPSBkYXRhLnNoZWV0LmhvdXJzUGVyRGF5ICogZGF5cztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdlZWtOdW1iZXIgPSBEYXRlcy5nZXRXZWVrTnVtYmVyRnJvbURhdGUod2Vla1N1bS5kYXRlc1swXS5kYXRlLmRhdGUpO1xyXG4gICAgICAgICAgICAgICAgd2Vla1N1bS5lbGVtZW50LmlubmVySFRNTCA9IGA8Yj5XZWVrICR7d2Vla051bWJlcn08L2I+OiAke051bWJlcnMucm91bmQoc3VtLCAyKX0gLyAke051bWJlcnMucm91bmQodG90YWxIb3VycywgMil9IGhvdXJzYDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVwZGF0ZUJhbGFuY2UoKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgdXBkYXRlUmVhc29uc0Ryb3Bkb3duKHNlbGVjdDogSFRNTFNlbGVjdEVsZW1lbnQpXHJcbiAgICB7XHJcbiAgICAgICAgc2VsZWN0LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgZm9yIChjb25zdCByZWFzb24gb2YgdGhpcy5yZWFzb25zKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gcmVhc29uLnNlcnZlcklkO1xyXG4gICAgICAgICAgICBvcHRpb24uaW5uZXJUZXh0ID0gcmVhc29uLnZhbHVlO1xyXG4gICAgICAgICAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uUmVhc29uc1VwZGF0ZWQocmVhc29uczogSGlCb2JSZWFzb25bXSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLnJlYXNvbnMgPSByZWFzb25zO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGRhdGUgb2YgdGhpcy5zaGVldERhdGVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBkYXRlLmVudHJpZXMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUmVhc29uc0Ryb3Bkb3duKGVudHJ5LnJlYXNvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uU2F2ZVN0YXR1c1VwZGF0ZWQoc3RhdHVzOiBUaW1lbG9nU2F2ZVN0YXR1cylcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2F2ZVN0YXR1cykgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtc3VjY2Vzc1wiKTtcclxuICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NMaXN0LnJlbW92ZShcInRsLXdhcm5pbmdcIik7XHJcbiAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmNsYXNzTGlzdC5yZW1vdmUoXCJ0bC1jbGlja2FibGVcIik7XHJcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gVGltZWxvZ1NhdmVTdGF0dXMuU2F2ZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcImNsb3VkX2RvbmVcIiwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kKFwiIFNhdmVkXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NMaXN0LmFkZChcInRsLXN1Y2Nlc3NcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdGF0dXMgPT09IFRpbWVsb2dTYXZlU3RhdHVzLldhaXRpbmcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kQ2hpbGQoTWF0ZXJpYWxJY29uLmdldChcInBlbmRpbmdcIikpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kKFwiIFBlbmRpbmcuLi5cIilcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gVGltZWxvZ1NhdmVTdGF0dXMuU2F2aW5nKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZENoaWxkKE1hdGVyaWFsSWNvbi5nZXQoXCJjbG91ZF91cGxvYWRcIikpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuYXBwZW5kKFwiIFNhdmluZy4uLlwiKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RhdHVzID09PSBUaW1lbG9nU2F2ZVN0YXR1cy5FcnJvcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5hcHBlbmRDaGlsZChNYXRlcmlhbEljb24uZ2V0KFwiY2xvdWRfb2ZmXCIpKTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlU3RhdHVzLmFwcGVuZChcIiBGYWlsZWQhXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVTdGF0dXMuY2xhc3NMaXN0LmFkZChcInRsLXdhcm5pbmdcIik7XHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVN0YXR1cy5jbGFzc0xpc3QuYWRkKFwidGwtY2xpY2thYmxlXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgb25TYXZlU3RhdHVzQ2xpY2soKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5zYXZlU3RhdHVzPy5jbGFzc0xpc3QuY29udGFpbnMoXCJ0bC1jbGlja2FibGVcIikpIHJldHVybjtcclxuICAgICAgICB0aGlzLm1vZGVsPy5zYXZlKCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uU2hlZXRVcGRhdGVkKHNoZWV0OiBUaW1lbG9nU2hlZXQpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hlZXREcm9wZG93biAmJiAhdGhpcy5zaGVldERyb3Bkb3duT3B0aW9ucy5maW5kKHMgPT4gcy5zaGVldCA9PT0gc2hlZXQpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gc2hlZXQuaWQudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgb3B0aW9uLmlubmVyVGV4dCA9IGAke25ldyBEYXRlKHNoZWV0LnN0YXJ0KS50b0RhdGVTdHJpbmcoKX0gLSAke25ldyBEYXRlKHNoZWV0LmVuZCkudG9EYXRlU3RyaW5nKCl9JHtzaGVldC5sb2NrZWQgPyBcIiAobG9ja2VkKVwiIDogXCJcIn1gO1xyXG4gICAgICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd25PcHRpb25zLnB1c2goeyBzaGVldDogc2hlZXQsIGVsZW1lbnQ6IG9wdGlvbiB9KTtcclxuICAgICAgICAgICAgdGhpcy5zaGVldERyb3Bkb3duLmFwcGVuZENoaWxkKG9wdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2hlZXQgPT09IHNoZWV0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hlZXRDb250YWluZXIpIHRoaXMuc2hlZXRDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgdGhpcy5zaGVldERhdGVzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMud2Vla1N1bXMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBkYXRlIG9mIHNoZWV0LmRhdGVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5vbkRhdGVVcGRhdGVkKHsgc2hlZXQsIGRhdGUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudXBkYXRlQmFsYW5jZSgpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBvblNoZWV0c1VwZGF0ZWQoc2hlZXRzOiBUaW1lbG9nU2hlZXRbXSlcclxuICAgIHtcclxuICAgICAgICBpZiAodGhpcy5zaGVldERyb3Bkb3duKSB0aGlzLnNoZWV0RHJvcGRvd24uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICB0aGlzLnNoZWV0RHJvcGRvd25PcHRpb25zID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBzaGVldCBvZiBzaGVldHMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm9uU2hlZXRVcGRhdGVkKHNoZWV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vblNlbGVjdGVkU2hlZXRDaGFuZ2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uU2VsZWN0ZWRTaGVldENoYW5nZSgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNoZWV0RHJvcGRvd24pIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5zaGVldENvbnRhaW5lcikgdGhpcy5zaGVldENvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuc2hlZXREYXRlcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHZhbCA9IHRoaXMuc2hlZXREcm9wZG93bi52YWx1ZTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkU2hlZXQgPSB0aGlzLnNoZWV0RHJvcGRvd25PcHRpb25zLmZpbmQobyA9PiBvLmVsZW1lbnQudmFsdWUgPT09IHZhbCk/LnNoZWV0O1xyXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2hlZXQgJiYgdGhpcy5tb2RlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwuZmV0Y2hTaGVldCh0aGlzLnNlbGVjdGVkU2hlZXQuaWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHVwZGF0ZUJhbGFuY2UoKVxyXG4gICAge1xyXG4gICAgICAgIGlmICghdGhpcy5tb2RlbCB8fCAhdGhpcy5iYWxhbmNlTGFiZWwgfHwgIXRoaXMuc2VsZWN0ZWRTaGVldCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGJhbGFuY2UgPSBhd2FpdCB0aGlzLm1vZGVsLmdldEN1cnJlbnRCYWxhbmNlSG91cnMoKTtcclxuICAgICAgICBjb25zdCBtb250aEJhbGFuY2UgPSBOdW1iZXJzLnJvdW5kKGJhbGFuY2Uuc2hlZXRzW3RoaXMuc2VsZWN0ZWRTaGVldC5pZC50b1N0cmluZygpXSA/PyAwLCAyKTtcclxuICAgICAgICBjb25zdCB0b3RhbEJhbGFuY2UgPSBOdW1iZXJzLnJvdW5kKGJhbGFuY2UuYmFsYW5jZSwgMik7XHJcbiAgICAgICAgdGhpcy5iYWxhbmNlTGFiZWwuaW5uZXJUZXh0ID0gYEZsZXg6ICR7dG90YWxCYWxhbmNlfSBob3VyJHt0b3RhbEJhbGFuY2UgIT0gMSA/IFwic1wiIDogXCJcIn0gKGN1cnJlbnQgbW9udGg6ICR7bW9udGhCYWxhbmNlfSBob3VyJHttb250aEJhbGFuY2UgIT0gMSA/IFwic1wiIDogXCJcIn0pYDtcclxuXHJcbiAgICAgICAgY29uc3QgZmF2b3JpdGUgPSBhd2FpdCB0aGlzLm1vZGVsLmdldEZhdm9yaXRlZERhdGUoKTtcclxuICAgICAgICBpZiAoZmF2b3JpdGUpIHRoaXMuc2hlZXRDb250YWluZXI/LmNsYXNzTGlzdC5hZGQoXCJ0bC1oYXMtZmF2b3JpdGVcIik7XHJcbiAgICAgICAgZWxzZSB0aGlzLnNoZWV0Q29udGFpbmVyPy5jbGFzc0xpc3QucmVtb3ZlKFwidGwtaGFzLWZhdm9yaXRlXCIpO1xyXG4gICAgfVxyXG5cclxufSIsImV4cG9ydCBjb25zdCBUaW1lbG9nQ3NzID0gYFxyXG4udGwtdG9nZ2xlLWJ0blxyXG57XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xyXG4gICAgZm9udC1zaXplOiAyZW07XHJcbn1cclxuLnRsLWNsb3NlLWJ0blxyXG57XHJcbiAgICBmb250LXNpemU6IDJlbTtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIHJpZ2h0OiA1cHg7XHJcbn1cclxuLnRsLXVpXHJcbntcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIHotaW5kZXg6IDEwMDA7XHJcbiAgICBpbnNldDogMHB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICBvdmVyZmxvdy15OiBzY3JvbGw7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG59ICAgICAgICBcclxuLnRsLWRhdGVcclxue1xyXG4gICAgbWFyZ2luLXRvcDogMTBweDtcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCBncmF5O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG59XHJcbi50bC1zYXZlLXN0YXR1cywgLnRsLWFkZC1lbnRyeS1idG5cclxue1xyXG4gICAgbWFyZ2luLWxlZnQ6IDEwcHg7XHJcbn1cclxuLnRsLWVudHJ5XHJcbntcclxuICAgIG1hcmdpbi10b3A6IDVweDtcclxufVxyXG4udGwtZW50cnkgPiAqXHJcbntcclxuICAgIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbn1cclxuLnRsLWVudHJ5ID4gaW5wdXRbdHlwZT1udW1iZXJdXHJcbntcclxuICAgIHdpZHRoOiA1MHB4O1xyXG59XHJcbi50bC1lbnRyeSA+IGlucHV0W3R5cGU9dGltZV1cclxue1xyXG4gICAgd2lkdGg6IDc1cHg7XHJcbn1cclxuLnRsLXNhdmUtc3RhdHVzXHJcbntcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcbi50bC1zaGVldC1zZWxlY3Rcclxue1xyXG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcclxufVxyXG4udGwtZGF0ZS1sYWJlbFxyXG57XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG4udGwtZGF0ZS1sYWJlbC50bC1kYXRlLWxhYmVsLXdlZWtlbmRcclxue1xyXG4gICAgZm9udC13ZWlnaHQ6IGluaXRpYWw7XHJcbiAgICBmb250LXN0eWxlOiBpdGFsaWM7XHJcbiAgICBjb2xvcjogZ3JheTtcclxufVxyXG4udGwtZW50cnktcmVhc29uIFxyXG57XHJcbiAgICBwYWRkaW5nOiAzcHg7XHJcbn1cclxuLnRsLXJlbW92ZS1lbnRyeS1idG5cclxue1xyXG4gICAgZmxvYXQ6IHJpZ2h0O1xyXG59XHJcbi50bC13ZWVrLXNlcGVyYXRvclxyXG57XHJcbiAgICBtYXJnaW4tdG9wOiA1N3B4O1xyXG59XHJcbi50bC1iYWxhbmNlLWxhYmVsXHJcbntcclxuICAgIG1hcmdpbjogNXB4O1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG59XHJcbi50bC1iYWxhbmNlLWhlbHBcclxue1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgY3Vyc29yOiBoZWxwO1xyXG59XHJcblxyXG4udGwtdWktaW5uZXJcclxue1xyXG4gICAgZGlzcGxheTogdGFibGU7XHJcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcclxuICAgIG1hcmdpbi1yaWdodDogYXV0bztcclxufVxyXG4udGwtdWktaW5uZXIsIC50bC13ZWVrLXNlcGVyYXRvciwgLnRsLWRhdGVcclxue1xyXG4gICAgbWluLXdpZHRoOiA2NTBweDtcclxufVxyXG4udGwtZW50cnktY29tbWVudCB7XHJcbiAgICBtYXJnaW4tdG9wOiA1cHg7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcbi50bC1oYXMtY29tbWVudCAudGwtZW50cnktY29tbWVudFxyXG57XHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxufVxyXG4udGwtc3VjY2Vzc1xyXG57XHJcbiAgICBjb2xvcjogIzAyQjg3NTtcclxufVxyXG4udGwtd2FybmluZ1xyXG57XHJcbiAgICBjb2xvcjogI0YwQUY1MjtcclxufVxyXG4udGwtZGFuZ2VyXHJcbntcclxuICAgIGNvbG9yOiAjREE1NjUyO1xyXG59XHJcbi50bC1zdW0taG91cnNcclxue1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgbWFyZ2luLXRvcDogLTIzcHg7XHJcbn1cclxuLnRsLXdlZWstc3VtXHJcbntcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIG1hcmdpbi10b3A6IC01N3B4O1xyXG4gICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XHJcbn1cclxuLnRsLXVpIGJ1dHRvbi50bC1zdGFyLWJ1dHRvbiwgLnRsLXVpLnRsLWRhcmsgYnV0dG9uLnRsLXN0YXItYnV0dG9uXHJcbntcclxuICAgIGJhY2tncm91bmQ6IG5vbmU7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBtYXJnaW46IDA7XHJcbiAgICBwYWRkaW5nOiAwO1xyXG59XHJcbi50bC11aSBidXR0b24udGwtc3Rhci1idXR0b24udGwtZmF2b3JpdGUsIC50bC11aS50bC1kYXJrIGJ1dHRvbi50bC1zdGFyLWJ1dHRvbi50bC1mYXZvcml0ZVxyXG57XHJcbiAgICBjb2xvcjogI2YxYTAwYjtcclxuICAgIG9wYWNpdHk6IDE7XHJcbn1cclxuLnRsLXBhc3RlLWJ0biB7XHJcbiAgICBtYXJnaW4tbGVmdDogNXB4O1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG4udGwtaGFzLWZhdm9yaXRlIC50bC1wYXN0ZS1idG46bm90KC50bC1oaWRlLWZhdm9yaXRlLWJ1dHRvbilcclxue1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG59XHJcbi50bC1zaG93LW9uLWhvdmVyXHJcbntcclxuICAgIG9wYWNpdHk6IDA7XHJcbn1cclxuLnRsLWRhdGU6aG92ZXIgLnRsLXNob3ctb24taG92ZXJcclxue1xyXG4gICAgb3BhY2l0eTogMTtcclxufVxyXG4udGwtbm8tcmVhc29uLXdhcm5pbmcge1xyXG4gICAgbWFyZ2luLWxlZnQ6IDE4MHB4O1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgbWFyZ2luLXRvcDogLTIycHg7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxufVxyXG4udGwtbm8tcmVhc29uLXdhcm5pbmcudGwtaGFzLXJlYXNvblxyXG57XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcbi50bC1jbGlja2FibGVcclxue1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcbi50bC1kYXJrLW1vZGUtYnRuIHtcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIGJvdHRvbTogNXB4O1xyXG4gICAgcmlnaHQ6IDIwcHg7XHJcbn1cclxuLnRsLXVpIGJ1dHRvblxyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDlkOWQ5O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgZ3JheTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxufVxyXG4udGwtdWkgYnV0dG9uOmhvdmVyXHJcbntcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNlZmViZWI7XHJcbn1cclxuXHJcbi50bC11aS50bC1kYXJrXHJcbntcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMxRTFFMUU7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbn1cclxuLnRsLXVpLnRsLWRhcmsgc2VsZWN0LCAudGwtdWkudGwtZGFyayBpbnB1dCB7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjUyNTI2O1xyXG4gICAgYm9yZGVyOiAxcHggZ3JheSBzb2xpZDtcclxuICAgIGNvbG9yLXNjaGVtZTogZGFyaztcclxufVxyXG4udGwtdWkudGwtZGFyayBidXR0b25cclxue1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzMzMzMzMztcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICMyODI4Mjg7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbn1cclxuLnRsLXVpLnRsLWRhcmsgYnV0dG9uOmhvdmVyXHJcbntcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM1MjUyNTI7XHJcbn1cclxuLnRsLXVpLnRsLWRhcmsgLnRsLW5vLXJlYXNvbi13YXJuaW5nXHJcbntcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMyNTI1MjY7XHJcbn1cclxuLnRsLXdlZWtlbmQtZGVzY3JpcHRpb24ge1xyXG4gICAgY29sb3I6IGdyYXk7XHJcbiAgICBmb250LXN0eWxlOiBpdGFsaWM7XHJcbiAgICBmbG9hdDogcmlnaHQ7XHJcbiAgICBtYXJnaW4tdG9wOiAycHg7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICBtYXgtd2lkdGg6IDQwMHB4O1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgIG1heC1oZWlnaHQ6IDM1cHg7XHJcbn1cclxuLnRsLXdlZWtlbmQtZGVzY3JpcHRpb24udGwtd2Vla2VuZC1kZXNjcmlwdGlvbi1oaWRkZW5cclxue1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG4udGwtdmVyc2lvbi1udW1iZXIge1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgYm90dG9tOiA1cHg7XHJcbiAgICBsZWZ0OiA1cHg7XHJcbn1cclxuXHJcbi50bC1jaGFuZ2Vsb2cge1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgaW5zZXQ6IDA7XHJcbiAgICB6LWluZGV4OiAxMDA7XHJcbn1cclxuLnRsLWNoYW5nZWxvZy1iYWNrIHtcclxuICAgIGluc2V0OiAwO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XHJcbiAgICBvcGFjaXR5OiAwLjU7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi50bC1jaGFuZ2Vsb2cudGwtY2hhbmdlbG9nLWhpZGRlbiB7XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59XHJcblxyXG4udGwtY2hhbmdlbG9nLXZlcnNpb24ge1xyXG4gICAgbWFyZ2luOiA1cHggMTBweDtcclxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBncmF5O1xyXG59XHJcblxyXG4udGwtY2hhbmdlbG9nLXZlcnNpb246bGFzdC1jaGlsZCB7XHJcbiAgICBib3JkZXItYm90dG9tOiAwO1xyXG59XHJcblxyXG4udGwtY2hhbmdlbG9nLXRpdGxlIHtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgZm9udC1zaXplOiAxLjI1ZW07XHJcbn1cclxuLnRsLWNoYW5nZWxvZy1pbm5lciB7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIGhlaWdodDogNzB2aDtcclxuICAgIHdpZHRoOiA5MHZ3O1xyXG4gICAgbGVmdDogNXZ3O1xyXG4gICAgdG9wOiAxNXZoO1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgZ3JheTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgb3ZlcmZsb3c6IGF1dG87XHJcbn1cclxuLnRsLWRhcmsgLnRsLWNoYW5nZWxvZy1pbm5lclxyXG57XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWExYTFhO1xyXG59XHJcblxyXG5gOyIsImV4cG9ydCBjb25zdCBSZWFzb25FbmhhbmNlbWVudENzcyA9IGBcclxuLnJlLWxhYmVsXHJcbntcclxuICAgIGZvbnQtc2l6ZTogMS41ZW07XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG59XHJcbi5yZS1yZWFzb24tc2VsZWN0XHJcbntcclxuICAgIHBhZGRpbmc6IDVweDtcclxufVxyXG4ucmUtcmVhc29uLXVpXHJcbntcclxuICAgIHotaW5kZXg6IDIwMDA7XHJcbiAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICBpbnNldDogMDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsMC43NSk7XHJcbiAgICBwYWRkaW5nLXRvcDogNDV2aDtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcbi5yZS1idG5cclxue1xyXG4gICAgcGFkZGluZzogMCB2YXIoLS1idXR0b24tcGFkZGluZy14LCAxNXB4KTtcclxuICAgIG1pbi13aWR0aDogODBweDtcclxuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLXNpemUsIDMwcHgpO1xyXG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICAgIGZvbnQtc2l6ZTogdmFyKC0tYnV0dG9uLWZvbnQtc2l6ZSwgMTJweCk7XHJcbiAgICBmb250LWZhbWlseTogdmFyKC0tYm9keS1mb250LWZhbWlseSk7XHJcbiAgICBib3JkZXI6IDA7XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICBtYXJnaW46IDVweDtcclxufVxyXG4ucmUtYnRuLnJlLXByaW1hcnlcclxue1xyXG4gICAgY29sb3I6IHZhcigtLXByaW1hcnktYmctdGV4dC1jb2xvciwgd2hpdGUpO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS02MDApO1xyXG59XHJcbi5yZS1idG4ucmUtc2Vjb25kYXJ5XHJcbntcclxuICAgIGNvbG9yOiB2YXIoLS1zZWNvbmRhcnktYmctdGV4dC1jb2xvciwgIzUzNTM1Myk7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnktNjAwKTtcclxufVxyXG4ucmUtYmx1clxyXG57XHJcbiAgICBmaWx0ZXI6IGJsdXIoMnB4KTtcclxufVxyXG4ucmUtc3VibWl0dGluZyAucmUtYnRuXHJcbntcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuLnJlLXN1Ym1pdHRpbmctdGV4dFxyXG57XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG4gICAgZm9udC1zaXplOiAxLjVlbTtcclxufVxyXG4ucmUtc3VibWl0dGluZyAucmUtc3VibWl0dGluZy10ZXh0XHJcbntcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG59XHJcbmA7Il0sIm5hbWVzIjpbIkFwaSIsInN0YXRpYyIsIm1ldGhvZCIsInVybCIsImJvZHkiLCJQcm9taXNlIiwicmVzb2x2ZSIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwicmVzdWx0IiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0Iiwic3RhdHVzIiwiaGFzT3duUHJvcGVydHkiLCJrZXkiLCJ0b1N0cmluZyIsImFsZXJ0IiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwic2VuZCIsInN0cmluZ2lmeSIsIkRhdGVzIiwic3RyIiwic3BsaXQiLCJsZW5ndGgiLCJwdXNoIiwiRGF0ZSIsImpvaW4iLCJnZXRUaW1lIiwidGltZSIsImluY2x1ZGVUaW1lc3RhbXAiLCJkYXRlIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsInBhZFN0YXJ0IiwiZ2V0RGF0ZSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImhvdXJzIiwiaG91ciIsIk1hdGgiLCJmbG9vciIsIm1pbnV0ZSIsInJvdW5kIiwic2V0SG91cnMiLCJzZXREYXRlIiwiZ2V0RGF5Iiwid2VlazEiLCJwYXJzZUludCIsIkhpQm9iIiwiZW50cmllcyIsInNvbWUiLCJlIiwicmVhc29uSWQiLCJkYXRhIiwibWFwIiwic3RhcnQiLCJmb3JtYXQiLCJzdGFydEhvdXIiLCJlbmQiLCJsZW5ndGhIb3VycyIsInVuZGVmaW5lZCIsInJlYXNvbiIsImNvbW1lbnQiLCJkYXRlU3RyIiwidXNlcklkIiwidGhpcyIsImdldFVzZXJJZCIsIm1ldGFkYXRhIiwidGltZUxvZ0VudHJ5UmVhc29uIiwidmFsdWVzIiwidiIsImlkIiwic2VydmVySWQiLCJuYW1lIiwidmFsdWUiLCJzaGVldCIsInVzZXJJbmZvIiwiV2FpdCIsIm1zIiwid2luZG93Iiwic2V0VGltZW91dCIsImRlbGVnYXRlIiwiaGFuZGxlIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiUmVhc29uRW5oYW5jZW1lbnRNb2RlIiwiVGltZWxvZ1NhdmVTdGF0dXMiLCJFdmVudEhhbmRsZXIiLCJoYW5kbGVycyIsIm9uIiwiaGFuZGxlciIsImNvbnRleHQiLCJvZmYiLCJmaWx0ZXIiLCJoIiwiZmlyZSIsInZhbCIsImZvckVhY2giLCJjYWxsIiwiTWF0ZXJpYWxJY29uIiwibGluayIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJyZWwiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJpY29uIiwiZmlsbCIsInNwYW4iLCJjbGFzc05hbWUiLCJpbm5lclRleHQiLCJzdHlsZSIsInZlcnRpY2FsQWxpZ24iLCJmb250U2l6ZSIsImZvbnRWYXJpYXRpb25TZXR0aW5ncyIsIk51bWJlcnMiLCJudW0iLCJkZWNpbWFscyIsImNlaWwiLCJhcnIiLCJpIiwiVGltZWxvZ01vZGVsIiwic2hlZXRzIiwib25EYXRlVXBkYXRlZCIsIm9uUmVhc29uc1VwZGF0ZWQiLCJvblNoZWV0VXBkYXRlZCIsIm9uU2hlZXRzVXBkYXRlZCIsIm9uU2F2ZVN0YXR1c1VwZGF0ZWQiLCJzYXZlSGFuZGxlIiwic2F2aW5nIiwiY2FsY3VsYXRpbmdGbGV4IiwiZmV0Y2hpbmdTaGVldHMiLCJyZWFzb25zIiwiYXN5bmMiLCJmZXRjaFNoZWV0cyIsImZldGNoUmVhc29ucyIsIlNhdmVkIiwidW50aWwiLCJlbXBsb3llZVNoZWV0cyIsImN5Y2xlU3RhcnREYXRlIiwiY3ljbGVFbmREYXRlIiwibmV3U2hlZXQiLCJkYXRlcyIsImxvY2tlZCIsImhvdXJzUGVyRGF5Iiwic29ydCIsImEiLCJiIiwiZmluZCIsInMiLCJhdHRlbmRhbmNlIiwic3VtbWFyeSIsInBvdGVudGlhbFdvcmtpbmdIb3VycyIsInBvdGVudGlhbFdvcmtpbmdEYXlzIiwiZGlydHkiLCJub3ciLCJ3ZWVrZW5kIiwiZmF2b3JpdGVkIiwiZGF0ZURlc2NyaXB0aW9uIiwibm90ZSIsImRlc2NyaXB0aW9uIiwiaGFzQ29tbWVudCIsImZhdm9yaXRlIiwiZ2V0RmF2b3JpdGVkRGF0ZSIsImNoYW5nZVN0YXJ0SG91ciIsImluZGV4IiwiZCIsInF1ZXVlU2F2ZSIsImNoYW5nZUxlbmd0aEhvdXJzIiwiY2hhbmdlUmVhc29uIiwiY2hhbmdlQ29tbWVudCIsInRvZ2dsZUNvbW1lbnQiLCJvbGRGYXZvcml0ZSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJnZXRJdGVtIiwiZmV0Y2hTaGVldCIsImRlbGV0ZUVudHJ5Iiwic3BsaWNlIiwib3JpZ2luYWxEYXRlIiwib3JpZ2luYWxTaGVldCIsImRhdGVJbmRleCIsImluZGV4T2YiLCJlbnRyeUluZGV4Iiwic2hlZXRJbmRleCIsImxhc3QiLCJmaW5kTGFzdEVudHJ5IiwiaW5jbHVkZXMiLCJlbnRyeSIsImNsZWFyVGltZW91dCIsInNhdmUiLCJXYWl0aW5nIiwiU2F2aW5nIiwibWluaW11bVdhaXQiLCJzdWJtaXQiLCJFcnJvciIsImN1cnJlbnREYXRlVGltZSIsInBhc3REYXRlVGltZSIsImJhbGFuY2UiLCJzaGVldEJhbGFuY2VzIiwiY2FjaGVLZXkiLCJkYXkiLCJwb3RlbnRpYWxIb3VycyIsInN1bSIsImluaXRpYWxpemUiLCJzaGVldERyb3Bkb3duT3B0aW9ucyIsInNoZWV0RGF0ZXMiLCJ3ZWVrU3VtcyIsIm9uRGFya01vZGVDaGFuZ2UiLCJ0aW1lbG9nIiwiYWRkQnV0dG9uIiwicGFyZW50IiwicXVlcnlTZWxlY3RvciIsInRvZ2dsZUJ1dHRvbiIsImdldCIsInRpdGxlIiwib25jbGljayIsInRvZ2dsZVZpc2libGUiLCJjcmVhdGVVSSIsImNyZWF0ZU1vZGVsIiwibG9jYXRpb24iLCJoYXNoIiwiaXNEYXJrTW9kZSIsInRpbWVsb2dVSU91dGVyIiwiZGlzcGxheSIsIm92ZXJmbG93Iiwic2hlZXRDb250YWluZXIiLCJpbm5lckhUTUwiLCJtb2RlbCIsInRvZ2dsZURhcmtNb2RlIiwiYXBwZW5kIiwidGltZWxvZ1VJSW5uZXIiLCJjbG9zZUJ1dHRvbiIsImRhcmtNb2RlQnV0dG9uIiwiZGFyayIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInZlcnNpb25OdW1iZXIiLCJjaGFuZ2Vsb2ciLCJjcmVhdGVDaGFuZ2Vsb2dFbGVtZW50IiwiY3Vyc29yIiwidGV4dERlY29yYXRpb24iLCJzaGVldERyb3Bkb3duTGFiZWwiLCJzaGVldERyb3Bkb3duIiwib25jaGFuZ2UiLCJvblNlbGVjdGVkU2hlZXRDaGFuZ2UiLCJzYXZlU3RhdHVzIiwib25TYXZlU3RhdHVzQ2xpY2siLCJiYWxhbmNlUGFyZW50IiwiYmFsYW5jZUxhYmVsIiwiYmFsYW5jZUhlbHAiLCJnZXRCYWxhbmNlQ2FsY3VsYXRpb25EZXNjcmlwdGlvbiIsImVsZW1lbnQiLCJiYWNrIiwiaW5uZXIiLCJ2ZXJzaW9uIiwidmVyc2lvbkVsZW1lbnQiLCJ2ZXJzaW9uVGl0bGUiLCJsaXN0IiwidGV4dCIsInRleHRFbGVtZW50IiwiZ2V0RGF0ZUNvbnRhaW5lciIsInNlbGVjdGVkU2hlZXQiLCJkYXRlQ29udGFpbmVyIiwic3RhckJ1dHRvbiIsInBhc3RlQnV0dG9uIiwid2Vla2VuZERlc2NyaXB0aW9uIiwid2Vla1NlcGVyYXRvciIsInNldEZhdm9yaXRlZERhdGUiLCJ0b0RhdGVTdHJpbmciLCJuZXdFbnRyeSIsInBhc3RlRnJvbVN0YXJyZWQiLCJhZGRUb1dlZWtTdW0iLCJnZXRFbnRyeUNvbnRhaW5lciIsImVudHJ5Q29udGFpbmVyIiwicCIsImVuZEhvdXIiLCJjb21tZW50QnV0dG9uIiwibm9SZWFzb25XYXJuaW5nIiwidHlwZSIsImRpc2FibGVkIiwicGFyc2VUaW1lVG9ob3VycyIsImVuZExhYmVsIiwidXBkYXRlUmVhc29uc0Ryb3Bkb3duIiwic3VtSG91cnMiLCJzdGVwIiwicGFyc2VGbG9hdCIsImR1cmF0aW9uTGFiZWwiLCJwbGFjZWhvbGRlciIsIndlZWtTdW0iLCJtYXJnaW5Ub3AiLCJmb3JtYXRIb3VyIiwicmVtb3ZlZEVudHJpZXMiLCJ3IiwiZGF5cyIsInRvdGFsSG91cnMiLCJ3ZWVrTnVtYmVyIiwiZ2V0V2Vla051bWJlckZyb21EYXRlIiwidXBkYXRlQmFsYW5jZSIsInNlbGVjdCIsIm9wdGlvbiIsImNvbnRhaW5zIiwibyIsImdldEN1cnJlbnRCYWxhbmNlSG91cnMiLCJtb250aEJhbGFuY2UiLCJ0b3RhbEJhbGFuY2UiLCJzdWJtaXR0aW5nIiwiY2xvY2tJbkJ1dHRvbkZpbmRlciIsInJlYXNvbkVuaGFuY2VtZW50VUkiLCJsYWJlbCIsInJlYXNvblNlbGVjdCIsInNhdmVEZWZhdWx0UmVhc29uVmFsdWUiLCJjYW5jZWxCdXR0b24iLCJjYW5jZWwiLCJzdWJtaXRCdXR0b24iLCJzdWJtaXR0aW5nVGV4dCIsImZpbmRVbmVuaGFuY2VkQnV0dG9ucyIsImVuaGFuY2VDbG9ja0luQnV0dG9uIiwiRml4TGF0ZXN0IiwiRml4QWxsIiwiYXBwUm9vdCIsInNlbGVjdG9yIiwicXVlcnkiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYnV0dG9uIiwibW9kZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzaG93UmVhc29uRml4ZXIiLCJsb2FkRGVmYXVsdFJlYXNvblZhbHVlIiwic2V0VUlWaXNpYmxlIiwiZml4QWxsIiwiZml4TGF0ZXN0IiwibGF0ZXN0Il0sInNvdXJjZVJvb3QiOiIifQ==